"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@stackblitz";
exports.ids = ["vendor-chunks/@stackblitz"];
exports.modules = {

/***/ "(ssr)/./node_modules/@stackblitz/sdk/bundles/sdk.m.js":
/*!*******************************************************!*\
  !*** ./node_modules/@stackblitz/sdk/bundles/sdk.m.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ StackBlitzSDK)\n/* harmony export */ });\nconst CONNECT_INTERVAL = 500;\nconst CONNECT_MAX_ATTEMPTS = 20;\nconst DEFAULT_FRAME_HEIGHT = 300;\nconst DEFAULT_ORIGIN = \"https://stackblitz.com\";\nconst PROJECT_TEMPLATES = [\n  \"angular-cli\",\n  \"create-react-app\",\n  \"html\",\n  \"javascript\",\n  \"node\",\n  \"polymer\",\n  \"typescript\",\n  \"vue\"\n];\nconst UI_SIDEBAR_VIEWS = [\"project\", \"search\", \"ports\", \"settings\"];\nconst UI_THEMES = [\"light\", \"dark\"];\nconst UI_VIEWS = [\"editor\", \"preview\"];\nconst generators = {\n  clickToLoad: (value) => trueParam(\"ctl\", value),\n  devToolsHeight: (value) => percentParam(\"devtoolsheight\", value),\n  forceEmbedLayout: (value) => trueParam(\"embed\", value),\n  hideDevTools: (value) => trueParam(\"hidedevtools\", value),\n  hideExplorer: (value) => trueParam(\"hideExplorer\", value),\n  hideNavigation: (value) => trueParam(\"hideNavigation\", value),\n  openFile: (value) => stringParams(\"file\", value),\n  showSidebar: (value) => booleanParam(\"showSidebar\", value),\n  sidebarView: (value) => enumParam(\"sidebarView\", value, UI_SIDEBAR_VIEWS),\n  startScript: (value) => stringParams(\"startScript\", value),\n  terminalHeight: (value) => percentParam(\"terminalHeight\", value),\n  theme: (value) => enumParam(\"theme\", value, UI_THEMES),\n  view: (value) => enumParam(\"view\", value, UI_VIEWS),\n  zenMode: (value) => trueParam(\"zenMode\", value)\n};\nfunction buildParams(options = {}) {\n  const params = Object.entries(options).map(([key, value]) => {\n    if (value != null && generators.hasOwnProperty(key)) {\n      return generators[key](value);\n    }\n    return \"\";\n  }).filter(Boolean);\n  return params.length ? `?${params.join(\"&\")}` : \"\";\n}\nfunction trueParam(name, value) {\n  if (value === true) {\n    return `${name}=1`;\n  }\n  return \"\";\n}\nfunction booleanParam(name, value) {\n  if (typeof value === \"boolean\") {\n    return `${name}=${value ? \"1\" : \"0\"}`;\n  }\n  return \"\";\n}\nfunction percentParam(name, value) {\n  if (typeof value === \"number\" && !Number.isNaN(value)) {\n    const clamped = Math.min(100, Math.max(0, value));\n    return `${name}=${encodeURIComponent(Math.round(clamped))}`;\n  }\n  return \"\";\n}\nfunction enumParam(name, value = \"\", allowList = []) {\n  if (allowList.includes(value)) {\n    return `${name}=${encodeURIComponent(value)}`;\n  }\n  return \"\";\n}\nfunction stringParams(name, value) {\n  const values = Array.isArray(value) ? value : [value];\n  return values.filter((val) => typeof val === \"string\" && val.trim() !== \"\").map((val) => `${name}=${encodeURIComponent(val)}`).join(\"&\");\n}\nfunction genID() {\n  return Math.random().toString(36).slice(2, 6) + Math.random().toString(36).slice(2, 6);\n}\nfunction openUrl(route, options) {\n  return `${getOrigin(options)}${route}${buildParams(options)}`;\n}\nfunction embedUrl(route, options) {\n  const config = {\n    forceEmbedLayout: true\n  };\n  if (options && typeof options === \"object\") {\n    Object.assign(config, options);\n  }\n  return `${getOrigin(config)}${route}${buildParams(config)}`;\n}\nfunction getOrigin(options = {}) {\n  const origin = typeof options.origin === \"string\" ? options.origin : DEFAULT_ORIGIN;\n  return origin.replace(/\\/$/, \"\");\n}\nfunction replaceAndEmbed(target, frame, options) {\n  if (!frame || !target || !target.parentNode) {\n    throw new Error(\"Invalid Element\");\n  }\n  if (target.id) {\n    frame.id = target.id;\n  }\n  if (target.className) {\n    frame.className = target.className;\n  }\n  setFrameDimensions(frame, options);\n  target.replaceWith(frame);\n}\nfunction findElement(elementOrId) {\n  if (typeof elementOrId === \"string\") {\n    const element = document.getElementById(elementOrId);\n    if (!element) {\n      throw new Error(`Could not find element with id '${elementOrId}'`);\n    }\n    return element;\n  } else if (elementOrId instanceof HTMLElement) {\n    return elementOrId;\n  }\n  throw new Error(`Invalid element: ${elementOrId}`);\n}\nfunction openTarget(options) {\n  return options && options.newWindow === false ? \"_self\" : \"_blank\";\n}\nfunction setFrameDimensions(frame, options = {}) {\n  const height = Object.hasOwnProperty.call(options, \"height\") ? `${options.height}` : `${DEFAULT_FRAME_HEIGHT}`;\n  const width = Object.hasOwnProperty.call(options, \"width\") ? `${options.width}` : void 0;\n  frame.setAttribute(\"height\", height);\n  if (width) {\n    frame.setAttribute(\"width\", width);\n  } else {\n    frame.setAttribute(\"style\", \"width:100%;\");\n  }\n}\nclass RDC {\n  constructor(port) {\n    this.pending = {};\n    this.port = port;\n    this.port.onmessage = this.messageListener.bind(this);\n  }\n  request({ type, payload }) {\n    return new Promise((resolve, reject) => {\n      const id = genID();\n      this.pending[id] = { resolve, reject };\n      this.port.postMessage({\n        type,\n        payload: {\n          ...payload,\n          // Ensure the payload object includes the request ID\n          __reqid: id\n        }\n      });\n    });\n  }\n  messageListener(event) {\n    if (typeof event.data.payload?.__reqid !== \"string\") {\n      return;\n    }\n    const { type, payload } = event.data;\n    const { __reqid: id, __success: success, __error: error } = payload;\n    if (this.pending[id]) {\n      if (success) {\n        this.pending[id].resolve(this.cleanResult(payload));\n      } else {\n        this.pending[id].reject(error ? `${type}: ${error}` : type);\n      }\n      delete this.pending[id];\n    }\n  }\n  cleanResult(payload) {\n    const result = { ...payload };\n    delete result.__reqid;\n    delete result.__success;\n    delete result.__error;\n    return Object.keys(result).length ? result : null;\n  }\n}\nclass VM {\n  constructor(port, config) {\n    this.editor = {\n      /**\n       * Open one of several files in tabs and/or split panes.\n       *\n       * @since 1.7.0 Added support for opening multiple files\n       */\n      openFile: (path) => {\n        return this._rdc.request({\n          type: \"SDK_OPEN_FILE\",\n          payload: { path }\n        });\n      },\n      /**\n       * Set a project file as the currently selected file.\n       *\n       * - This may update the highlighted file in the file explorer,\n       *   and the currently open and/or focused editor tab.\n       * - It will _not_ open a new editor tab if the provided path does not\n       *   match a currently open tab. See `vm.editor.openFile` to open files.\n       *\n       * @since 1.7.0\n       * @experimental\n       */\n      setCurrentFile: (path) => {\n        return this._rdc.request({\n          type: \"SDK_SET_CURRENT_FILE\",\n          payload: { path }\n        });\n      },\n      /**\n       * Change the color theme\n       *\n       * @since 1.7.0\n       */\n      setTheme: (theme) => {\n        return this._rdc.request({\n          type: \"SDK_SET_UI_THEME\",\n          payload: { theme }\n        });\n      },\n      /**\n       * Change the display mode of the project:\n       *\n       * - `default`: show the editor and preview pane\n       * - `editor`: show the editor pane only\n       * - `preview`: show the preview pane only\n       *\n       * @since 1.7.0\n       */\n      setView: (view) => {\n        return this._rdc.request({\n          type: \"SDK_SET_UI_VIEW\",\n          payload: { view }\n        });\n      },\n      /**\n       * Change the display mode of the sidebar:\n       *\n       * - `true`: show the sidebar\n       * - `false`: hide the sidebar\n       *\n       * @since 1.7.0\n       */\n      showSidebar: (visible = true) => {\n        return this._rdc.request({\n          type: \"SDK_TOGGLE_SIDEBAR\",\n          payload: { visible }\n        });\n      }\n    };\n    this.preview = {\n      /**\n       * The origin (protocol and domain) of the preview iframe.\n       *\n       * In WebContainers-based projects, the origin will always be `null`;\n       * try using `vm.preview.getUrl` instead.\n       *\n       * @see https://developer.stackblitz.com/guides/user-guide/available-environments\n       */\n      origin: \"\",\n      /**\n       * Get the current preview URL.\n       *\n       * In both and EngineBlock and WebContainers-based projects, the preview URL\n       * may not reflect the exact path of the current page, after user navigation.\n       *\n       * In WebContainers-based projects, the preview URL will be `null` initially,\n       * and until the project starts a web server.\n       *\n       * @since 1.7.0\n       * @experimental\n       */\n      getUrl: () => {\n        return this._rdc.request({\n          type: \"SDK_GET_PREVIEW_URL\",\n          payload: {}\n        }).then((data) => data?.url ?? null);\n      },\n      /**\n       * Change the path of the preview URL.\n       *\n       * In WebContainers-based projects, this will be ignored if there is no\n       * currently running web server.\n       *\n       * @since 1.7.0\n       * @experimental\n       */\n      setUrl: (path = \"/\") => {\n        if (typeof path !== \"string\" || !path.startsWith(\"/\")) {\n          throw new Error(`Invalid argument: expected a path starting with '/', got '${path}'`);\n        }\n        return this._rdc.request({\n          type: \"SDK_SET_PREVIEW_URL\",\n          payload: { path }\n        });\n      }\n    };\n    this._rdc = new RDC(port);\n    Object.defineProperty(this.preview, \"origin\", {\n      value: typeof config.previewOrigin === \"string\" ? config.previewOrigin : null,\n      writable: false\n    });\n  }\n  /**\n   * Apply batch updates to the project files in one call.\n   */\n  applyFsDiff(diff) {\n    const isObject = (val) => val !== null && typeof val === \"object\";\n    if (!isObject(diff) || !isObject(diff.create)) {\n      throw new Error(\"Invalid diff object: expected diff.create to be an object.\");\n    } else if (!Array.isArray(diff.destroy)) {\n      throw new Error(\"Invalid diff object: expected diff.destroy to be an array.\");\n    }\n    return this._rdc.request({\n      type: \"SDK_APPLY_FS_DIFF\",\n      payload: diff\n    });\n  }\n  /**\n   * Get the project’s defined dependencies.\n   *\n   * In EngineBlock projects, version numbers represent the resolved dependency versions.\n   * In WebContainers-based projects, returns data from the project’s `package.json` without resolving installed version numbers.\n   */\n  getDependencies() {\n    return this._rdc.request({\n      type: \"SDK_GET_DEPS_SNAPSHOT\",\n      payload: {}\n    });\n  }\n  /**\n   * Get a snapshot of the project files and their content.\n   */\n  getFsSnapshot() {\n    return this._rdc.request({\n      type: \"SDK_GET_FS_SNAPSHOT\",\n      payload: {}\n    });\n  }\n}\nconst connections = [];\nclass Connection {\n  constructor(element) {\n    this.id = genID();\n    this.element = element;\n    this.pending = new Promise((resolve, reject) => {\n      const listenForSuccess = ({ data, ports }) => {\n        if (data?.action === \"SDK_INIT_SUCCESS\" && data.id === this.id) {\n          this.vm = new VM(ports[0], data.payload);\n          resolve(this.vm);\n          cleanup();\n        }\n      };\n      const pingFrame = () => {\n        this.element.contentWindow?.postMessage(\n          {\n            action: \"SDK_INIT\",\n            id: this.id\n          },\n          \"*\"\n        );\n      };\n      function cleanup() {\n        window.clearInterval(interval);\n        window.removeEventListener(\"message\", listenForSuccess);\n      }\n      window.addEventListener(\"message\", listenForSuccess);\n      pingFrame();\n      let attempts = 0;\n      const interval = window.setInterval(() => {\n        if (this.vm) {\n          cleanup();\n          return;\n        }\n        if (attempts >= CONNECT_MAX_ATTEMPTS) {\n          cleanup();\n          reject(\"Timeout: Unable to establish a connection with the StackBlitz VM\");\n          connections.forEach((connection, index) => {\n            if (connection.id === this.id) {\n              connections.splice(index, 1);\n            }\n          });\n          return;\n        }\n        attempts++;\n        pingFrame();\n      }, CONNECT_INTERVAL);\n    });\n    connections.push(this);\n  }\n}\nconst getConnection = (identifier) => {\n  const key = identifier instanceof Element ? \"element\" : \"id\";\n  return connections.find((c) => c[key] === identifier) ?? null;\n};\nfunction createHiddenInput(name, value) {\n  const input = document.createElement(\"input\");\n  input.type = \"hidden\";\n  input.name = name;\n  input.value = value;\n  return input;\n}\nfunction encodeFilePath(path) {\n  return path.replace(/\\[/g, \"%5B\").replace(/\\]/g, \"%5D\");\n}\nfunction createProjectForm({\n  template,\n  title,\n  description,\n  dependencies,\n  files,\n  settings\n}) {\n  if (!PROJECT_TEMPLATES.includes(template)) {\n    const names = PROJECT_TEMPLATES.map((t) => `'${t}'`).join(\", \");\n    console.warn(`Unsupported project.template: must be one of ${names}`);\n  }\n  const inputs = [];\n  const addInput = (name, value, defaultValue = \"\") => {\n    inputs.push(createHiddenInput(name, typeof value === \"string\" ? value : defaultValue));\n  };\n  addInput(\"project[title]\", title);\n  if (typeof description === \"string\" && description.length > 0) {\n    addInput(\"project[description]\", description);\n  }\n  addInput(\"project[template]\", template, \"javascript\");\n  if (dependencies) {\n    if (template === \"node\") {\n      console.warn(\n        `Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template.`\n      );\n    } else {\n      addInput(\"project[dependencies]\", JSON.stringify(dependencies));\n    }\n  }\n  if (settings) {\n    addInput(\"project[settings]\", JSON.stringify(settings));\n  }\n  Object.entries(files).forEach(([path, contents]) => {\n    addInput(`project[files][${encodeFilePath(path)}]`, contents);\n  });\n  const form = document.createElement(\"form\");\n  form.method = \"POST\";\n  form.setAttribute(\"style\", \"display:none!important;\");\n  form.append(...inputs);\n  return form;\n}\nfunction createProjectFrameHTML(project, options) {\n  const form = createProjectForm(project);\n  form.action = embedUrl(\"/run\", options);\n  form.id = \"sb_run\";\n  const html = `<!doctype html>\n<html>\n<head><title></title></head>\n<body>\n  ${form.outerHTML}\n  <script>document.getElementById('${form.id}').submit();<\\/script>\n</body>\n</html>`;\n  return html;\n}\nfunction openNewProject(project, options) {\n  const form = createProjectForm(project);\n  form.action = openUrl(\"/run\", options);\n  form.target = openTarget(options);\n  document.body.appendChild(form);\n  form.submit();\n  document.body.removeChild(form);\n}\nfunction connect(frameEl) {\n  if (!frameEl?.contentWindow) {\n    return Promise.reject(\"Provided element is not an iframe.\");\n  }\n  const connection = getConnection(frameEl) ?? new Connection(frameEl);\n  return connection.pending;\n}\nfunction openProject(project, options) {\n  openNewProject(project, options);\n}\nfunction openProjectId(projectId, options) {\n  const url = openUrl(`/edit/${projectId}`, options);\n  const target = openTarget(options);\n  window.open(url, target);\n}\nfunction openGithubProject(repoSlug, options) {\n  const url = openUrl(`/github/${repoSlug}`, options);\n  const target = openTarget(options);\n  window.open(url, target);\n}\nfunction embedProject(elementOrId, project, options) {\n  const element = findElement(elementOrId);\n  const html = createProjectFrameHTML(project, options);\n  const frame = document.createElement(\"iframe\");\n  replaceAndEmbed(element, frame, options);\n  frame.contentDocument?.write(html);\n  return connect(frame);\n}\nfunction embedProjectId(elementOrId, projectId, options) {\n  const element = findElement(elementOrId);\n  const frame = document.createElement(\"iframe\");\n  frame.src = embedUrl(`/edit/${projectId}`, options);\n  replaceAndEmbed(element, frame, options);\n  return connect(frame);\n}\nfunction embedGithubProject(elementOrId, repoSlug, options) {\n  const element = findElement(elementOrId);\n  const frame = document.createElement(\"iframe\");\n  frame.src = embedUrl(`/github/${repoSlug}`, options);\n  replaceAndEmbed(element, frame, options);\n  return connect(frame);\n}\nconst StackBlitzSDK = {\n  connect,\n  embedGithubProject,\n  embedProject,\n  embedProjectId,\n  openGithubProject,\n  openProject,\n  openProjectId\n};\n\n//# sourceMappingURL=sdk.m.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0YWNrYmxpdHovc2RrL2J1bmRsZXMvc2RrLm0uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDZCQUE2QixpQkFBaUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsY0FBYyxLQUFLO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLEtBQUssR0FBRyxrQkFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxLQUFLLEdBQUcsd0NBQXdDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLEtBQUssR0FBRywwQkFBMEI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhGQUE4RixLQUFLLEdBQUcsd0JBQXdCO0FBQzlIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1CQUFtQixFQUFFLE1BQU0sRUFBRSxxQkFBcUI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0JBQWtCLEVBQUUsTUFBTSxFQUFFLG9CQUFvQjtBQUM1RDtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELFlBQVk7QUFDckU7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0Esc0NBQXNDLFlBQVk7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0Msb0VBQW9FLGVBQWUsT0FBTyxxQkFBcUI7QUFDL0csa0VBQWtFLGNBQWM7QUFDaEY7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxlQUFlO0FBQzNCO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGdCQUFnQjtBQUM1QixZQUFZLGtEQUFrRDtBQUM5RDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsMkNBQTJDLEtBQUssSUFBSSxNQUFNO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RkFBdUYsS0FBSztBQUM1RjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsYUFBYTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxtREFBbUQsRUFBRTtBQUNyRCxpRUFBaUUsTUFBTTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IscUJBQXFCO0FBQ3BELEdBQUc7QUFDSDtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oscUNBQXFDLFFBQVEsWUFBWTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFVBQVU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsU0FBUztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFVBQVU7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFNBQVM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tibGl0ei9zZGsvYnVuZGxlcy9zZGsubS5qcz9iNWRkIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IENPTk5FQ1RfSU5URVJWQUwgPSA1MDA7XG5jb25zdCBDT05ORUNUX01BWF9BVFRFTVBUUyA9IDIwO1xuY29uc3QgREVGQVVMVF9GUkFNRV9IRUlHSFQgPSAzMDA7XG5jb25zdCBERUZBVUxUX09SSUdJTiA9IFwiaHR0cHM6Ly9zdGFja2JsaXR6LmNvbVwiO1xuY29uc3QgUFJPSkVDVF9URU1QTEFURVMgPSBbXG4gIFwiYW5ndWxhci1jbGlcIixcbiAgXCJjcmVhdGUtcmVhY3QtYXBwXCIsXG4gIFwiaHRtbFwiLFxuICBcImphdmFzY3JpcHRcIixcbiAgXCJub2RlXCIsXG4gIFwicG9seW1lclwiLFxuICBcInR5cGVzY3JpcHRcIixcbiAgXCJ2dWVcIlxuXTtcbmNvbnN0IFVJX1NJREVCQVJfVklFV1MgPSBbXCJwcm9qZWN0XCIsIFwic2VhcmNoXCIsIFwicG9ydHNcIiwgXCJzZXR0aW5nc1wiXTtcbmNvbnN0IFVJX1RIRU1FUyA9IFtcImxpZ2h0XCIsIFwiZGFya1wiXTtcbmNvbnN0IFVJX1ZJRVdTID0gW1wiZWRpdG9yXCIsIFwicHJldmlld1wiXTtcbmNvbnN0IGdlbmVyYXRvcnMgPSB7XG4gIGNsaWNrVG9Mb2FkOiAodmFsdWUpID0+IHRydWVQYXJhbShcImN0bFwiLCB2YWx1ZSksXG4gIGRldlRvb2xzSGVpZ2h0OiAodmFsdWUpID0+IHBlcmNlbnRQYXJhbShcImRldnRvb2xzaGVpZ2h0XCIsIHZhbHVlKSxcbiAgZm9yY2VFbWJlZExheW91dDogKHZhbHVlKSA9PiB0cnVlUGFyYW0oXCJlbWJlZFwiLCB2YWx1ZSksXG4gIGhpZGVEZXZUb29sczogKHZhbHVlKSA9PiB0cnVlUGFyYW0oXCJoaWRlZGV2dG9vbHNcIiwgdmFsdWUpLFxuICBoaWRlRXhwbG9yZXI6ICh2YWx1ZSkgPT4gdHJ1ZVBhcmFtKFwiaGlkZUV4cGxvcmVyXCIsIHZhbHVlKSxcbiAgaGlkZU5hdmlnYXRpb246ICh2YWx1ZSkgPT4gdHJ1ZVBhcmFtKFwiaGlkZU5hdmlnYXRpb25cIiwgdmFsdWUpLFxuICBvcGVuRmlsZTogKHZhbHVlKSA9PiBzdHJpbmdQYXJhbXMoXCJmaWxlXCIsIHZhbHVlKSxcbiAgc2hvd1NpZGViYXI6ICh2YWx1ZSkgPT4gYm9vbGVhblBhcmFtKFwic2hvd1NpZGViYXJcIiwgdmFsdWUpLFxuICBzaWRlYmFyVmlldzogKHZhbHVlKSA9PiBlbnVtUGFyYW0oXCJzaWRlYmFyVmlld1wiLCB2YWx1ZSwgVUlfU0lERUJBUl9WSUVXUyksXG4gIHN0YXJ0U2NyaXB0OiAodmFsdWUpID0+IHN0cmluZ1BhcmFtcyhcInN0YXJ0U2NyaXB0XCIsIHZhbHVlKSxcbiAgdGVybWluYWxIZWlnaHQ6ICh2YWx1ZSkgPT4gcGVyY2VudFBhcmFtKFwidGVybWluYWxIZWlnaHRcIiwgdmFsdWUpLFxuICB0aGVtZTogKHZhbHVlKSA9PiBlbnVtUGFyYW0oXCJ0aGVtZVwiLCB2YWx1ZSwgVUlfVEhFTUVTKSxcbiAgdmlldzogKHZhbHVlKSA9PiBlbnVtUGFyYW0oXCJ2aWV3XCIsIHZhbHVlLCBVSV9WSUVXUyksXG4gIHplbk1vZGU6ICh2YWx1ZSkgPT4gdHJ1ZVBhcmFtKFwiemVuTW9kZVwiLCB2YWx1ZSlcbn07XG5mdW5jdGlvbiBidWlsZFBhcmFtcyhvcHRpb25zID0ge30pIHtcbiAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmVudHJpZXMob3B0aW9ucykubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiBnZW5lcmF0b3JzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHJldHVybiBnZW5lcmF0b3JzW2tleV0odmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbiAgfSkuZmlsdGVyKEJvb2xlYW4pO1xuICByZXR1cm4gcGFyYW1zLmxlbmd0aCA/IGA/JHtwYXJhbXMuam9pbihcIiZcIil9YCA6IFwiXCI7XG59XG5mdW5jdGlvbiB0cnVlUGFyYW0obmFtZSwgdmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIGAke25hbWV9PTFgO1xuICB9XG4gIHJldHVybiBcIlwiO1xufVxuZnVuY3Rpb24gYm9vbGVhblBhcmFtKG5hbWUsIHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgcmV0dXJuIGAke25hbWV9PSR7dmFsdWUgPyBcIjFcIiA6IFwiMFwifWA7XG4gIH1cbiAgcmV0dXJuIFwiXCI7XG59XG5mdW5jdGlvbiBwZXJjZW50UGFyYW0obmFtZSwgdmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiAmJiAhTnVtYmVyLmlzTmFOKHZhbHVlKSkge1xuICAgIGNvbnN0IGNsYW1wZWQgPSBNYXRoLm1pbigxMDAsIE1hdGgubWF4KDAsIHZhbHVlKSk7XG4gICAgcmV0dXJuIGAke25hbWV9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KE1hdGgucm91bmQoY2xhbXBlZCkpfWA7XG4gIH1cbiAgcmV0dXJuIFwiXCI7XG59XG5mdW5jdGlvbiBlbnVtUGFyYW0obmFtZSwgdmFsdWUgPSBcIlwiLCBhbGxvd0xpc3QgPSBbXSkge1xuICBpZiAoYWxsb3dMaXN0LmluY2x1ZGVzKHZhbHVlKSkge1xuICAgIHJldHVybiBgJHtuYW1lfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcbiAgfVxuICByZXR1cm4gXCJcIjtcbn1cbmZ1bmN0aW9uIHN0cmluZ1BhcmFtcyhuYW1lLCB2YWx1ZSkge1xuICBjb25zdCB2YWx1ZXMgPSBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW3ZhbHVlXTtcbiAgcmV0dXJuIHZhbHVlcy5maWx0ZXIoKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiAmJiB2YWwudHJpbSgpICE9PSBcIlwiKS5tYXAoKHZhbCkgPT4gYCR7bmFtZX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsKX1gKS5qb2luKFwiJlwiKTtcbn1cbmZ1bmN0aW9uIGdlbklEKCkge1xuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiwgNikgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLCA2KTtcbn1cbmZ1bmN0aW9uIG9wZW5Vcmwocm91dGUsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGAke2dldE9yaWdpbihvcHRpb25zKX0ke3JvdXRlfSR7YnVpbGRQYXJhbXMob3B0aW9ucyl9YDtcbn1cbmZ1bmN0aW9uIGVtYmVkVXJsKHJvdXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGNvbmZpZyA9IHtcbiAgICBmb3JjZUVtYmVkTGF5b3V0OiB0cnVlXG4gIH07XG4gIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiKSB7XG4gICAgT2JqZWN0LmFzc2lnbihjb25maWcsIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiBgJHtnZXRPcmlnaW4oY29uZmlnKX0ke3JvdXRlfSR7YnVpbGRQYXJhbXMoY29uZmlnKX1gO1xufVxuZnVuY3Rpb24gZ2V0T3JpZ2luKG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBvcmlnaW4gPSB0eXBlb2Ygb3B0aW9ucy5vcmlnaW4gPT09IFwic3RyaW5nXCIgPyBvcHRpb25zLm9yaWdpbiA6IERFRkFVTFRfT1JJR0lOO1xuICByZXR1cm4gb3JpZ2luLnJlcGxhY2UoL1xcLyQvLCBcIlwiKTtcbn1cbmZ1bmN0aW9uIHJlcGxhY2VBbmRFbWJlZCh0YXJnZXQsIGZyYW1lLCBvcHRpb25zKSB7XG4gIGlmICghZnJhbWUgfHwgIXRhcmdldCB8fCAhdGFyZ2V0LnBhcmVudE5vZGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEVsZW1lbnRcIik7XG4gIH1cbiAgaWYgKHRhcmdldC5pZCkge1xuICAgIGZyYW1lLmlkID0gdGFyZ2V0LmlkO1xuICB9XG4gIGlmICh0YXJnZXQuY2xhc3NOYW1lKSB7XG4gICAgZnJhbWUuY2xhc3NOYW1lID0gdGFyZ2V0LmNsYXNzTmFtZTtcbiAgfVxuICBzZXRGcmFtZURpbWVuc2lvbnMoZnJhbWUsIG9wdGlvbnMpO1xuICB0YXJnZXQucmVwbGFjZVdpdGgoZnJhbWUpO1xufVxuZnVuY3Rpb24gZmluZEVsZW1lbnQoZWxlbWVudE9ySWQpIHtcbiAgaWYgKHR5cGVvZiBlbGVtZW50T3JJZCA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50T3JJZCk7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIGVsZW1lbnQgd2l0aCBpZCAnJHtlbGVtZW50T3JJZH0nYCk7XG4gICAgfVxuICAgIHJldHVybiBlbGVtZW50O1xuICB9IGVsc2UgaWYgKGVsZW1lbnRPcklkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudE9ySWQ7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGVsZW1lbnQ6ICR7ZWxlbWVudE9ySWR9YCk7XG59XG5mdW5jdGlvbiBvcGVuVGFyZ2V0KG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5uZXdXaW5kb3cgPT09IGZhbHNlID8gXCJfc2VsZlwiIDogXCJfYmxhbmtcIjtcbn1cbmZ1bmN0aW9uIHNldEZyYW1lRGltZW5zaW9ucyhmcmFtZSwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IGhlaWdodCA9IE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMsIFwiaGVpZ2h0XCIpID8gYCR7b3B0aW9ucy5oZWlnaHR9YCA6IGAke0RFRkFVTFRfRlJBTUVfSEVJR0hUfWA7XG4gIGNvbnN0IHdpZHRoID0gT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwob3B0aW9ucywgXCJ3aWR0aFwiKSA/IGAke29wdGlvbnMud2lkdGh9YCA6IHZvaWQgMDtcbiAgZnJhbWUuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGhlaWdodCk7XG4gIGlmICh3aWR0aCkge1xuICAgIGZyYW1lLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHdpZHRoKTtcbiAgfSBlbHNlIHtcbiAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIndpZHRoOjEwMCU7XCIpO1xuICB9XG59XG5jbGFzcyBSREMge1xuICBjb25zdHJ1Y3Rvcihwb3J0KSB7XG4gICAgdGhpcy5wZW5kaW5nID0ge307XG4gICAgdGhpcy5wb3J0ID0gcG9ydDtcbiAgICB0aGlzLnBvcnQub25tZXNzYWdlID0gdGhpcy5tZXNzYWdlTGlzdGVuZXIuYmluZCh0aGlzKTtcbiAgfVxuICByZXF1ZXN0KHsgdHlwZSwgcGF5bG9hZCB9KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGlkID0gZ2VuSUQoKTtcbiAgICAgIHRoaXMucGVuZGluZ1tpZF0gPSB7IHJlc29sdmUsIHJlamVjdCB9O1xuICAgICAgdGhpcy5wb3J0LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgdHlwZSxcbiAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgIC4uLnBheWxvYWQsXG4gICAgICAgICAgLy8gRW5zdXJlIHRoZSBwYXlsb2FkIG9iamVjdCBpbmNsdWRlcyB0aGUgcmVxdWVzdCBJRFxuICAgICAgICAgIF9fcmVxaWQ6IGlkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIG1lc3NhZ2VMaXN0ZW5lcihldmVudCkge1xuICAgIGlmICh0eXBlb2YgZXZlbnQuZGF0YS5wYXlsb2FkPy5fX3JlcWlkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgdHlwZSwgcGF5bG9hZCB9ID0gZXZlbnQuZGF0YTtcbiAgICBjb25zdCB7IF9fcmVxaWQ6IGlkLCBfX3N1Y2Nlc3M6IHN1Y2Nlc3MsIF9fZXJyb3I6IGVycm9yIH0gPSBwYXlsb2FkO1xuICAgIGlmICh0aGlzLnBlbmRpbmdbaWRdKSB7XG4gICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICB0aGlzLnBlbmRpbmdbaWRdLnJlc29sdmUodGhpcy5jbGVhblJlc3VsdChwYXlsb2FkKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBlbmRpbmdbaWRdLnJlamVjdChlcnJvciA/IGAke3R5cGV9OiAke2Vycm9yfWAgOiB0eXBlKTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSB0aGlzLnBlbmRpbmdbaWRdO1xuICAgIH1cbiAgfVxuICBjbGVhblJlc3VsdChwYXlsb2FkKSB7XG4gICAgY29uc3QgcmVzdWx0ID0geyAuLi5wYXlsb2FkIH07XG4gICAgZGVsZXRlIHJlc3VsdC5fX3JlcWlkO1xuICAgIGRlbGV0ZSByZXN1bHQuX19zdWNjZXNzO1xuICAgIGRlbGV0ZSByZXN1bHQuX19lcnJvcjtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMocmVzdWx0KS5sZW5ndGggPyByZXN1bHQgOiBudWxsO1xuICB9XG59XG5jbGFzcyBWTSB7XG4gIGNvbnN0cnVjdG9yKHBvcnQsIGNvbmZpZykge1xuICAgIHRoaXMuZWRpdG9yID0ge1xuICAgICAgLyoqXG4gICAgICAgKiBPcGVuIG9uZSBvZiBzZXZlcmFsIGZpbGVzIGluIHRhYnMgYW5kL29yIHNwbGl0IHBhbmVzLlxuICAgICAgICpcbiAgICAgICAqIEBzaW5jZSAxLjcuMCBBZGRlZCBzdXBwb3J0IGZvciBvcGVuaW5nIG11bHRpcGxlIGZpbGVzXG4gICAgICAgKi9cbiAgICAgIG9wZW5GaWxlOiAocGF0aCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmRjLnJlcXVlc3Qoe1xuICAgICAgICAgIHR5cGU6IFwiU0RLX09QRU5fRklMRVwiLFxuICAgICAgICAgIHBheWxvYWQ6IHsgcGF0aCB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogU2V0IGEgcHJvamVjdCBmaWxlIGFzIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgZmlsZS5cbiAgICAgICAqXG4gICAgICAgKiAtIFRoaXMgbWF5IHVwZGF0ZSB0aGUgaGlnaGxpZ2h0ZWQgZmlsZSBpbiB0aGUgZmlsZSBleHBsb3JlcixcbiAgICAgICAqICAgYW5kIHRoZSBjdXJyZW50bHkgb3BlbiBhbmQvb3IgZm9jdXNlZCBlZGl0b3IgdGFiLlxuICAgICAgICogLSBJdCB3aWxsIF9ub3RfIG9wZW4gYSBuZXcgZWRpdG9yIHRhYiBpZiB0aGUgcHJvdmlkZWQgcGF0aCBkb2VzIG5vdFxuICAgICAgICogICBtYXRjaCBhIGN1cnJlbnRseSBvcGVuIHRhYi4gU2VlIGB2bS5lZGl0b3Iub3BlbkZpbGVgIHRvIG9wZW4gZmlsZXMuXG4gICAgICAgKlxuICAgICAgICogQHNpbmNlIDEuNy4wXG4gICAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICAgKi9cbiAgICAgIHNldEN1cnJlbnRGaWxlOiAocGF0aCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmRjLnJlcXVlc3Qoe1xuICAgICAgICAgIHR5cGU6IFwiU0RLX1NFVF9DVVJSRU5UX0ZJTEVcIixcbiAgICAgICAgICBwYXlsb2FkOiB7IHBhdGggfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIENoYW5nZSB0aGUgY29sb3IgdGhlbWVcbiAgICAgICAqXG4gICAgICAgKiBAc2luY2UgMS43LjBcbiAgICAgICAqL1xuICAgICAgc2V0VGhlbWU6ICh0aGVtZSkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmRjLnJlcXVlc3Qoe1xuICAgICAgICAgIHR5cGU6IFwiU0RLX1NFVF9VSV9USEVNRVwiLFxuICAgICAgICAgIHBheWxvYWQ6IHsgdGhlbWUgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIENoYW5nZSB0aGUgZGlzcGxheSBtb2RlIG9mIHRoZSBwcm9qZWN0OlxuICAgICAgICpcbiAgICAgICAqIC0gYGRlZmF1bHRgOiBzaG93IHRoZSBlZGl0b3IgYW5kIHByZXZpZXcgcGFuZVxuICAgICAgICogLSBgZWRpdG9yYDogc2hvdyB0aGUgZWRpdG9yIHBhbmUgb25seVxuICAgICAgICogLSBgcHJldmlld2A6IHNob3cgdGhlIHByZXZpZXcgcGFuZSBvbmx5XG4gICAgICAgKlxuICAgICAgICogQHNpbmNlIDEuNy4wXG4gICAgICAgKi9cbiAgICAgIHNldFZpZXc6ICh2aWV3KSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZGMucmVxdWVzdCh7XG4gICAgICAgICAgdHlwZTogXCJTREtfU0VUX1VJX1ZJRVdcIixcbiAgICAgICAgICBwYXlsb2FkOiB7IHZpZXcgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIENoYW5nZSB0aGUgZGlzcGxheSBtb2RlIG9mIHRoZSBzaWRlYmFyOlxuICAgICAgICpcbiAgICAgICAqIC0gYHRydWVgOiBzaG93IHRoZSBzaWRlYmFyXG4gICAgICAgKiAtIGBmYWxzZWA6IGhpZGUgdGhlIHNpZGViYXJcbiAgICAgICAqXG4gICAgICAgKiBAc2luY2UgMS43LjBcbiAgICAgICAqL1xuICAgICAgc2hvd1NpZGViYXI6ICh2aXNpYmxlID0gdHJ1ZSkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmRjLnJlcXVlc3Qoe1xuICAgICAgICAgIHR5cGU6IFwiU0RLX1RPR0dMRV9TSURFQkFSXCIsXG4gICAgICAgICAgcGF5bG9hZDogeyB2aXNpYmxlIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLnByZXZpZXcgPSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBvcmlnaW4gKHByb3RvY29sIGFuZCBkb21haW4pIG9mIHRoZSBwcmV2aWV3IGlmcmFtZS5cbiAgICAgICAqXG4gICAgICAgKiBJbiBXZWJDb250YWluZXJzLWJhc2VkIHByb2plY3RzLCB0aGUgb3JpZ2luIHdpbGwgYWx3YXlzIGJlIGBudWxsYDtcbiAgICAgICAqIHRyeSB1c2luZyBgdm0ucHJldmlldy5nZXRVcmxgIGluc3RlYWQuXG4gICAgICAgKlxuICAgICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5zdGFja2JsaXR6LmNvbS9ndWlkZXMvdXNlci1ndWlkZS9hdmFpbGFibGUtZW52aXJvbm1lbnRzXG4gICAgICAgKi9cbiAgICAgIG9yaWdpbjogXCJcIixcbiAgICAgIC8qKlxuICAgICAgICogR2V0IHRoZSBjdXJyZW50IHByZXZpZXcgVVJMLlxuICAgICAgICpcbiAgICAgICAqIEluIGJvdGggYW5kIEVuZ2luZUJsb2NrIGFuZCBXZWJDb250YWluZXJzLWJhc2VkIHByb2plY3RzLCB0aGUgcHJldmlldyBVUkxcbiAgICAgICAqIG1heSBub3QgcmVmbGVjdCB0aGUgZXhhY3QgcGF0aCBvZiB0aGUgY3VycmVudCBwYWdlLCBhZnRlciB1c2VyIG5hdmlnYXRpb24uXG4gICAgICAgKlxuICAgICAgICogSW4gV2ViQ29udGFpbmVycy1iYXNlZCBwcm9qZWN0cywgdGhlIHByZXZpZXcgVVJMIHdpbGwgYmUgYG51bGxgIGluaXRpYWxseSxcbiAgICAgICAqIGFuZCB1bnRpbCB0aGUgcHJvamVjdCBzdGFydHMgYSB3ZWIgc2VydmVyLlxuICAgICAgICpcbiAgICAgICAqIEBzaW5jZSAxLjcuMFxuICAgICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAgICovXG4gICAgICBnZXRVcmw6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JkYy5yZXF1ZXN0KHtcbiAgICAgICAgICB0eXBlOiBcIlNES19HRVRfUFJFVklFV19VUkxcIixcbiAgICAgICAgICBwYXlsb2FkOiB7fVxuICAgICAgICB9KS50aGVuKChkYXRhKSA9PiBkYXRhPy51cmwgPz8gbnVsbCk7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBDaGFuZ2UgdGhlIHBhdGggb2YgdGhlIHByZXZpZXcgVVJMLlxuICAgICAgICpcbiAgICAgICAqIEluIFdlYkNvbnRhaW5lcnMtYmFzZWQgcHJvamVjdHMsIHRoaXMgd2lsbCBiZSBpZ25vcmVkIGlmIHRoZXJlIGlzIG5vXG4gICAgICAgKiBjdXJyZW50bHkgcnVubmluZyB3ZWIgc2VydmVyLlxuICAgICAgICpcbiAgICAgICAqIEBzaW5jZSAxLjcuMFxuICAgICAgICogQGV4cGVyaW1lbnRhbFxuICAgICAgICovXG4gICAgICBzZXRVcmw6IChwYXRoID0gXCIvXCIpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXRoICE9PSBcInN0cmluZ1wiIHx8ICFwYXRoLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFyZ3VtZW50OiBleHBlY3RlZCBhIHBhdGggc3RhcnRpbmcgd2l0aCAnLycsIGdvdCAnJHtwYXRofSdgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcmRjLnJlcXVlc3Qoe1xuICAgICAgICAgIHR5cGU6IFwiU0RLX1NFVF9QUkVWSUVXX1VSTFwiLFxuICAgICAgICAgIHBheWxvYWQ6IHsgcGF0aCB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5fcmRjID0gbmV3IFJEQyhwb3J0KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5wcmV2aWV3LCBcIm9yaWdpblwiLCB7XG4gICAgICB2YWx1ZTogdHlwZW9mIGNvbmZpZy5wcmV2aWV3T3JpZ2luID09PSBcInN0cmluZ1wiID8gY29uZmlnLnByZXZpZXdPcmlnaW4gOiBudWxsLFxuICAgICAgd3JpdGFibGU6IGZhbHNlXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGx5IGJhdGNoIHVwZGF0ZXMgdG8gdGhlIHByb2plY3QgZmlsZXMgaW4gb25lIGNhbGwuXG4gICAqL1xuICBhcHBseUZzRGlmZihkaWZmKSB7XG4gICAgY29uc3QgaXNPYmplY3QgPSAodmFsKSA9PiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIjtcbiAgICBpZiAoIWlzT2JqZWN0KGRpZmYpIHx8ICFpc09iamVjdChkaWZmLmNyZWF0ZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZGlmZiBvYmplY3Q6IGV4cGVjdGVkIGRpZmYuY3JlYXRlIHRvIGJlIGFuIG9iamVjdC5cIik7XG4gICAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheShkaWZmLmRlc3Ryb3kpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGRpZmYgb2JqZWN0OiBleHBlY3RlZCBkaWZmLmRlc3Ryb3kgdG8gYmUgYW4gYXJyYXkuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcmRjLnJlcXVlc3Qoe1xuICAgICAgdHlwZTogXCJTREtfQVBQTFlfRlNfRElGRlwiLFxuICAgICAgcGF5bG9hZDogZGlmZlxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHByb2plY3TigJlzIGRlZmluZWQgZGVwZW5kZW5jaWVzLlxuICAgKlxuICAgKiBJbiBFbmdpbmVCbG9jayBwcm9qZWN0cywgdmVyc2lvbiBudW1iZXJzIHJlcHJlc2VudCB0aGUgcmVzb2x2ZWQgZGVwZW5kZW5jeSB2ZXJzaW9ucy5cbiAgICogSW4gV2ViQ29udGFpbmVycy1iYXNlZCBwcm9qZWN0cywgcmV0dXJucyBkYXRhIGZyb20gdGhlIHByb2plY3TigJlzIGBwYWNrYWdlLmpzb25gIHdpdGhvdXQgcmVzb2x2aW5nIGluc3RhbGxlZCB2ZXJzaW9uIG51bWJlcnMuXG4gICAqL1xuICBnZXREZXBlbmRlbmNpZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JkYy5yZXF1ZXN0KHtcbiAgICAgIHR5cGU6IFwiU0RLX0dFVF9ERVBTX1NOQVBTSE9UXCIsXG4gICAgICBwYXlsb2FkOiB7fVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBzbmFwc2hvdCBvZiB0aGUgcHJvamVjdCBmaWxlcyBhbmQgdGhlaXIgY29udGVudC5cbiAgICovXG4gIGdldEZzU25hcHNob3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JkYy5yZXF1ZXN0KHtcbiAgICAgIHR5cGU6IFwiU0RLX0dFVF9GU19TTkFQU0hPVFwiLFxuICAgICAgcGF5bG9hZDoge31cbiAgICB9KTtcbiAgfVxufVxuY29uc3QgY29ubmVjdGlvbnMgPSBbXTtcbmNsYXNzIENvbm5lY3Rpb24ge1xuICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgdGhpcy5pZCA9IGdlbklEKCk7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLnBlbmRpbmcgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBsaXN0ZW5Gb3JTdWNjZXNzID0gKHsgZGF0YSwgcG9ydHMgfSkgPT4ge1xuICAgICAgICBpZiAoZGF0YT8uYWN0aW9uID09PSBcIlNES19JTklUX1NVQ0NFU1NcIiAmJiBkYXRhLmlkID09PSB0aGlzLmlkKSB7XG4gICAgICAgICAgdGhpcy52bSA9IG5ldyBWTShwb3J0c1swXSwgZGF0YS5wYXlsb2FkKTtcbiAgICAgICAgICByZXNvbHZlKHRoaXMudm0pO1xuICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbnN0IHBpbmdGcmFtZSA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNvbnRlbnRXaW5kb3c/LnBvc3RNZXNzYWdlKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFjdGlvbjogXCJTREtfSU5JVFwiLFxuICAgICAgICAgICAgaWQ6IHRoaXMuaWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiKlwiXG4gICAgICAgICk7XG4gICAgICB9O1xuICAgICAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbGlzdGVuRm9yU3VjY2Vzcyk7XG4gICAgICB9XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbGlzdGVuRm9yU3VjY2Vzcyk7XG4gICAgICBwaW5nRnJhbWUoKTtcbiAgICAgIGxldCBhdHRlbXB0cyA9IDA7XG4gICAgICBjb25zdCBpbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnZtKSB7XG4gICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0ZW1wdHMgPj0gQ09OTkVDVF9NQVhfQVRURU1QVFMpIHtcbiAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgcmVqZWN0KFwiVGltZW91dDogVW5hYmxlIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gd2l0aCB0aGUgU3RhY2tCbGl0eiBWTVwiKTtcbiAgICAgICAgICBjb25uZWN0aW9ucy5mb3JFYWNoKChjb25uZWN0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uaWQgPT09IHRoaXMuaWQpIHtcbiAgICAgICAgICAgICAgY29ubmVjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXR0ZW1wdHMrKztcbiAgICAgICAgcGluZ0ZyYW1lKCk7XG4gICAgICB9LCBDT05ORUNUX0lOVEVSVkFMKTtcbiAgICB9KTtcbiAgICBjb25uZWN0aW9ucy5wdXNoKHRoaXMpO1xuICB9XG59XG5jb25zdCBnZXRDb25uZWN0aW9uID0gKGlkZW50aWZpZXIpID0+IHtcbiAgY29uc3Qga2V5ID0gaWRlbnRpZmllciBpbnN0YW5jZW9mIEVsZW1lbnQgPyBcImVsZW1lbnRcIiA6IFwiaWRcIjtcbiAgcmV0dXJuIGNvbm5lY3Rpb25zLmZpbmQoKGMpID0+IGNba2V5XSA9PT0gaWRlbnRpZmllcikgPz8gbnVsbDtcbn07XG5mdW5jdGlvbiBjcmVhdGVIaWRkZW5JbnB1dChuYW1lLCB2YWx1ZSkge1xuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgaW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gIGlucHV0Lm5hbWUgPSBuYW1lO1xuICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICByZXR1cm4gaW5wdXQ7XG59XG5mdW5jdGlvbiBlbmNvZGVGaWxlUGF0aChwYXRoKSB7XG4gIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcWy9nLCBcIiU1QlwiKS5yZXBsYWNlKC9cXF0vZywgXCIlNURcIik7XG59XG5mdW5jdGlvbiBjcmVhdGVQcm9qZWN0Rm9ybSh7XG4gIHRlbXBsYXRlLFxuICB0aXRsZSxcbiAgZGVzY3JpcHRpb24sXG4gIGRlcGVuZGVuY2llcyxcbiAgZmlsZXMsXG4gIHNldHRpbmdzXG59KSB7XG4gIGlmICghUFJPSkVDVF9URU1QTEFURVMuaW5jbHVkZXModGVtcGxhdGUpKSB7XG4gICAgY29uc3QgbmFtZXMgPSBQUk9KRUNUX1RFTVBMQVRFUy5tYXAoKHQpID0+IGAnJHt0fSdgKS5qb2luKFwiLCBcIik7XG4gICAgY29uc29sZS53YXJuKGBVbnN1cHBvcnRlZCBwcm9qZWN0LnRlbXBsYXRlOiBtdXN0IGJlIG9uZSBvZiAke25hbWVzfWApO1xuICB9XG4gIGNvbnN0IGlucHV0cyA9IFtdO1xuICBjb25zdCBhZGRJbnB1dCA9IChuYW1lLCB2YWx1ZSwgZGVmYXVsdFZhbHVlID0gXCJcIikgPT4ge1xuICAgIGlucHV0cy5wdXNoKGNyZWF0ZUhpZGRlbklucHV0KG5hbWUsIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHZhbHVlIDogZGVmYXVsdFZhbHVlKSk7XG4gIH07XG4gIGFkZElucHV0KFwicHJvamVjdFt0aXRsZV1cIiwgdGl0bGUpO1xuICBpZiAodHlwZW9mIGRlc2NyaXB0aW9uID09PSBcInN0cmluZ1wiICYmIGRlc2NyaXB0aW9uLmxlbmd0aCA+IDApIHtcbiAgICBhZGRJbnB1dChcInByb2plY3RbZGVzY3JpcHRpb25dXCIsIGRlc2NyaXB0aW9uKTtcbiAgfVxuICBhZGRJbnB1dChcInByb2plY3RbdGVtcGxhdGVdXCIsIHRlbXBsYXRlLCBcImphdmFzY3JpcHRcIik7XG4gIGlmIChkZXBlbmRlbmNpZXMpIHtcbiAgICBpZiAodGVtcGxhdGUgPT09IFwibm9kZVwiKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBJbnZhbGlkIHByb2plY3QuZGVwZW5kZW5jaWVzOiBkZXBlbmRlbmNpZXMgbXVzdCBiZSBwcm92aWRlZCBhcyBhICdwYWNrYWdlLmpzb24nIGZpbGUgd2hlbiB1c2luZyB0aGUgJ25vZGUnIHRlbXBsYXRlLmBcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFkZElucHV0KFwicHJvamVjdFtkZXBlbmRlbmNpZXNdXCIsIEpTT04uc3RyaW5naWZ5KGRlcGVuZGVuY2llcykpO1xuICAgIH1cbiAgfVxuICBpZiAoc2V0dGluZ3MpIHtcbiAgICBhZGRJbnB1dChcInByb2plY3Rbc2V0dGluZ3NdXCIsIEpTT04uc3RyaW5naWZ5KHNldHRpbmdzKSk7XG4gIH1cbiAgT2JqZWN0LmVudHJpZXMoZmlsZXMpLmZvckVhY2goKFtwYXRoLCBjb250ZW50c10pID0+IHtcbiAgICBhZGRJbnB1dChgcHJvamVjdFtmaWxlc11bJHtlbmNvZGVGaWxlUGF0aChwYXRoKX1dYCwgY29udGVudHMpO1xuICB9KTtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICBmb3JtLm1ldGhvZCA9IFwiUE9TVFwiO1xuICBmb3JtLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiZGlzcGxheTpub25lIWltcG9ydGFudDtcIik7XG4gIGZvcm0uYXBwZW5kKC4uLmlucHV0cyk7XG4gIHJldHVybiBmb3JtO1xufVxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdEZyYW1lSFRNTChwcm9qZWN0LCBvcHRpb25zKSB7XG4gIGNvbnN0IGZvcm0gPSBjcmVhdGVQcm9qZWN0Rm9ybShwcm9qZWN0KTtcbiAgZm9ybS5hY3Rpb24gPSBlbWJlZFVybChcIi9ydW5cIiwgb3B0aW9ucyk7XG4gIGZvcm0uaWQgPSBcInNiX3J1blwiO1xuICBjb25zdCBodG1sID0gYDwhZG9jdHlwZSBodG1sPlxuPGh0bWw+XG48aGVhZD48dGl0bGU+PC90aXRsZT48L2hlYWQ+XG48Ym9keT5cbiAgJHtmb3JtLm91dGVySFRNTH1cbiAgPHNjcmlwdD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnJHtmb3JtLmlkfScpLnN1Ym1pdCgpOzxcXC9zY3JpcHQ+XG48L2JvZHk+XG48L2h0bWw+YDtcbiAgcmV0dXJuIGh0bWw7XG59XG5mdW5jdGlvbiBvcGVuTmV3UHJvamVjdChwcm9qZWN0LCBvcHRpb25zKSB7XG4gIGNvbnN0IGZvcm0gPSBjcmVhdGVQcm9qZWN0Rm9ybShwcm9qZWN0KTtcbiAgZm9ybS5hY3Rpb24gPSBvcGVuVXJsKFwiL3J1blwiLCBvcHRpb25zKTtcbiAgZm9ybS50YXJnZXQgPSBvcGVuVGFyZ2V0KG9wdGlvbnMpO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO1xuICBmb3JtLnN1Ym1pdCgpO1xuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGZvcm0pO1xufVxuZnVuY3Rpb24gY29ubmVjdChmcmFtZUVsKSB7XG4gIGlmICghZnJhbWVFbD8uY29udGVudFdpbmRvdykge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIlByb3ZpZGVkIGVsZW1lbnQgaXMgbm90IGFuIGlmcmFtZS5cIik7XG4gIH1cbiAgY29uc3QgY29ubmVjdGlvbiA9IGdldENvbm5lY3Rpb24oZnJhbWVFbCkgPz8gbmV3IENvbm5lY3Rpb24oZnJhbWVFbCk7XG4gIHJldHVybiBjb25uZWN0aW9uLnBlbmRpbmc7XG59XG5mdW5jdGlvbiBvcGVuUHJvamVjdChwcm9qZWN0LCBvcHRpb25zKSB7XG4gIG9wZW5OZXdQcm9qZWN0KHByb2plY3QsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gb3BlblByb2plY3RJZChwcm9qZWN0SWQsIG9wdGlvbnMpIHtcbiAgY29uc3QgdXJsID0gb3BlblVybChgL2VkaXQvJHtwcm9qZWN0SWR9YCwgb3B0aW9ucyk7XG4gIGNvbnN0IHRhcmdldCA9IG9wZW5UYXJnZXQob3B0aW9ucyk7XG4gIHdpbmRvdy5vcGVuKHVybCwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIG9wZW5HaXRodWJQcm9qZWN0KHJlcG9TbHVnLCBvcHRpb25zKSB7XG4gIGNvbnN0IHVybCA9IG9wZW5VcmwoYC9naXRodWIvJHtyZXBvU2x1Z31gLCBvcHRpb25zKTtcbiAgY29uc3QgdGFyZ2V0ID0gb3BlblRhcmdldChvcHRpb25zKTtcbiAgd2luZG93Lm9wZW4odXJsLCB0YXJnZXQpO1xufVxuZnVuY3Rpb24gZW1iZWRQcm9qZWN0KGVsZW1lbnRPcklkLCBwcm9qZWN0LCBvcHRpb25zKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBmaW5kRWxlbWVudChlbGVtZW50T3JJZCk7XG4gIGNvbnN0IGh0bWwgPSBjcmVhdGVQcm9qZWN0RnJhbWVIVE1MKHByb2plY3QsIG9wdGlvbnMpO1xuICBjb25zdCBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gIHJlcGxhY2VBbmRFbWJlZChlbGVtZW50LCBmcmFtZSwgb3B0aW9ucyk7XG4gIGZyYW1lLmNvbnRlbnREb2N1bWVudD8ud3JpdGUoaHRtbCk7XG4gIHJldHVybiBjb25uZWN0KGZyYW1lKTtcbn1cbmZ1bmN0aW9uIGVtYmVkUHJvamVjdElkKGVsZW1lbnRPcklkLCBwcm9qZWN0SWQsIG9wdGlvbnMpIHtcbiAgY29uc3QgZWxlbWVudCA9IGZpbmRFbGVtZW50KGVsZW1lbnRPcklkKTtcbiAgY29uc3QgZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuICBmcmFtZS5zcmMgPSBlbWJlZFVybChgL2VkaXQvJHtwcm9qZWN0SWR9YCwgb3B0aW9ucyk7XG4gIHJlcGxhY2VBbmRFbWJlZChlbGVtZW50LCBmcmFtZSwgb3B0aW9ucyk7XG4gIHJldHVybiBjb25uZWN0KGZyYW1lKTtcbn1cbmZ1bmN0aW9uIGVtYmVkR2l0aHViUHJvamVjdChlbGVtZW50T3JJZCwgcmVwb1NsdWcsIG9wdGlvbnMpIHtcbiAgY29uc3QgZWxlbWVudCA9IGZpbmRFbGVtZW50KGVsZW1lbnRPcklkKTtcbiAgY29uc3QgZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuICBmcmFtZS5zcmMgPSBlbWJlZFVybChgL2dpdGh1Yi8ke3JlcG9TbHVnfWAsIG9wdGlvbnMpO1xuICByZXBsYWNlQW5kRW1iZWQoZWxlbWVudCwgZnJhbWUsIG9wdGlvbnMpO1xuICByZXR1cm4gY29ubmVjdChmcmFtZSk7XG59XG5jb25zdCBTdGFja0JsaXR6U0RLID0ge1xuICBjb25uZWN0LFxuICBlbWJlZEdpdGh1YlByb2plY3QsXG4gIGVtYmVkUHJvamVjdCxcbiAgZW1iZWRQcm9qZWN0SWQsXG4gIG9wZW5HaXRodWJQcm9qZWN0LFxuICBvcGVuUHJvamVjdCxcbiAgb3BlblByb2plY3RJZFxufTtcbmV4cG9ydCB7XG4gIFN0YWNrQmxpdHpTREsgYXMgZGVmYXVsdFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNkay5tLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stackblitz/sdk/bundles/sdk.m.js\n");

/***/ })

};
;