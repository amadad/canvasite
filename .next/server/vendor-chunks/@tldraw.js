"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@tldraw";
exports.ids = ["vendor-chunks/@tldraw"];
exports.modules = {

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/index.mjs":
/*!********************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/index.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Arc2d: () => (/* reexport safe */ _lib_primitives_geometry_Arc2d_mjs__WEBPACK_IMPORTED_MODULE_77__.Arc2d),\n/* harmony export */   ArrayOfValidator: () => (/* reexport safe */ _tldraw_validate__WEBPACK_IMPORTED_MODULE_8__.ArrayOfValidator),\n/* harmony export */   ArrowShapeArrowheadEndStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.ArrowShapeArrowheadEndStyle),\n/* harmony export */   ArrowShapeArrowheadStartStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.ArrowShapeArrowheadStartStyle),\n/* harmony export */   AssetRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.AssetRecordType),\n/* harmony export */   BaseBoxShapeTool: () => (/* reexport safe */ _lib_editor_tools_BaseBoxShapeTool_BaseBoxShapeTool_mjs__WEBPACK_IMPORTED_MODULE_52__.BaseBoxShapeTool),\n/* harmony export */   BaseBoxShapeUtil: () => (/* reexport safe */ _lib_editor_shapes_BaseBoxShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_48__.BaseBoxShapeUtil),\n/* harmony export */   BindingUtil: () => (/* reexport safe */ _lib_editor_bindings_BindingUtil_mjs__WEBPACK_IMPORTED_MODULE_38__.BindingUtil),\n/* harmony export */   BoundsSnaps: () => (/* reexport safe */ _lib_editor_managers_SnapManager_BoundsSnaps_mjs__WEBPACK_IMPORTED_MODULE_43__.BoundsSnaps),\n/* harmony export */   Box: () => (/* reexport safe */ _lib_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_73__.Box),\n/* harmony export */   CameraRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.CameraRecordType),\n/* harmony export */   Circle2d: () => (/* reexport safe */ _lib_primitives_geometry_Circle2d_mjs__WEBPACK_IMPORTED_MODULE_78__.Circle2d),\n/* harmony export */   ClickManager: () => (/* reexport safe */ _lib_editor_managers_ClickManager_mjs__WEBPACK_IMPORTED_MODULE_39__.ClickManager),\n/* harmony export */   ContainerProvider: () => (/* reexport safe */ _lib_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_56__.ContainerProvider),\n/* harmony export */   CubicBezier2d: () => (/* reexport safe */ _lib_primitives_geometry_CubicBezier2d_mjs__WEBPACK_IMPORTED_MODULE_79__.CubicBezier2d),\n/* harmony export */   CubicSpline2d: () => (/* reexport safe */ _lib_primitives_geometry_CubicSpline2d_mjs__WEBPACK_IMPORTED_MODULE_80__.CubicSpline2d),\n/* harmony export */   DEFAULT_ANIMATION_OPTIONS: () => (/* reexport safe */ _lib_constants_mjs__WEBPACK_IMPORTED_MODULE_36__.DEFAULT_ANIMATION_OPTIONS),\n/* harmony export */   DEFAULT_CAMERA_OPTIONS: () => (/* reexport safe */ _lib_constants_mjs__WEBPACK_IMPORTED_MODULE_36__.DEFAULT_CAMERA_OPTIONS),\n/* harmony export */   DEFAULT_SUPPORTED_IMAGE_TYPES: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_SUPPORTED_IMAGE_TYPES),\n/* harmony export */   DEFAULT_SUPPORTED_MEDIA_TYPE_LIST: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_SUPPORTED_MEDIA_TYPE_LIST),\n/* harmony export */   DEFAULT_SUPPORT_VIDEO_TYPES: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_SUPPORT_VIDEO_TYPES),\n/* harmony export */   DefaultBackground: () => (/* reexport safe */ _lib_components_default_components_DefaultBackground_mjs__WEBPACK_IMPORTED_MODULE_14__.DefaultBackground),\n/* harmony export */   DefaultBrush: () => (/* reexport safe */ _lib_components_default_components_DefaultBrush_mjs__WEBPACK_IMPORTED_MODULE_15__.DefaultBrush),\n/* harmony export */   DefaultCanvas: () => (/* reexport safe */ _lib_components_default_components_DefaultCanvas_mjs__WEBPACK_IMPORTED_MODULE_16__.DefaultCanvas),\n/* harmony export */   DefaultCollaboratorHint: () => (/* reexport safe */ _lib_components_default_components_DefaultCollaboratorHint_mjs__WEBPACK_IMPORTED_MODULE_17__.DefaultCollaboratorHint),\n/* harmony export */   DefaultColorStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.DefaultColorStyle),\n/* harmony export */   DefaultColorThemePalette: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.DefaultColorThemePalette),\n/* harmony export */   DefaultCursor: () => (/* reexport safe */ _lib_components_default_components_DefaultCursor_mjs__WEBPACK_IMPORTED_MODULE_18__.DefaultCursor),\n/* harmony export */   DefaultDashStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.DefaultDashStyle),\n/* harmony export */   DefaultErrorFallback: () => (/* reexport safe */ _lib_components_default_components_DefaultErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_19__.DefaultErrorFallback),\n/* harmony export */   DefaultFillStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.DefaultFillStyle),\n/* harmony export */   DefaultFontFamilies: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.DefaultFontFamilies),\n/* harmony export */   DefaultFontStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.DefaultFontStyle),\n/* harmony export */   DefaultGrid: () => (/* reexport safe */ _lib_components_default_components_DefaultGrid_mjs__WEBPACK_IMPORTED_MODULE_20__.DefaultGrid),\n/* harmony export */   DefaultHandle: () => (/* reexport safe */ _lib_components_default_components_DefaultHandle_mjs__WEBPACK_IMPORTED_MODULE_21__.DefaultHandle),\n/* harmony export */   DefaultHandles: () => (/* reexport safe */ _lib_components_default_components_DefaultHandles_mjs__WEBPACK_IMPORTED_MODULE_22__.DefaultHandles),\n/* harmony export */   DefaultHorizontalAlignStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.DefaultHorizontalAlignStyle),\n/* harmony export */   DefaultScribble: () => (/* reexport safe */ _lib_components_default_components_DefaultScribble_mjs__WEBPACK_IMPORTED_MODULE_23__.DefaultScribble),\n/* harmony export */   DefaultSelectionBackground: () => (/* reexport safe */ _lib_components_default_components_DefaultSelectionBackground_mjs__WEBPACK_IMPORTED_MODULE_24__.DefaultSelectionBackground),\n/* harmony export */   DefaultSelectionForeground: () => (/* reexport safe */ _lib_components_default_components_DefaultSelectionForeground_mjs__WEBPACK_IMPORTED_MODULE_25__.DefaultSelectionForeground),\n/* harmony export */   DefaultShapeIndicator: () => (/* reexport safe */ _lib_components_default_components_DefaultShapeIndicator_mjs__WEBPACK_IMPORTED_MODULE_26__.DefaultShapeIndicator),\n/* harmony export */   DefaultSizeStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.DefaultSizeStyle),\n/* harmony export */   DefaultSnapIndicator: () => (/* reexport safe */ _lib_components_default_components_DefaultSnapIndictor_mjs__WEBPACK_IMPORTED_MODULE_27__.DefaultSnapIndicator),\n/* harmony export */   DefaultSpinner: () => (/* reexport safe */ _lib_components_default_components_DefaultSpinner_mjs__WEBPACK_IMPORTED_MODULE_28__.DefaultSpinner),\n/* harmony export */   DefaultSvgDefs: () => (/* reexport safe */ _lib_components_default_components_DefaultSvgDefs_mjs__WEBPACK_IMPORTED_MODULE_29__.DefaultSvgDefs),\n/* harmony export */   DefaultTextAlignStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.DefaultTextAlignStyle),\n/* harmony export */   DefaultVerticalAlignStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.DefaultVerticalAlignStyle),\n/* harmony export */   DictValidator: () => (/* reexport safe */ _tldraw_validate__WEBPACK_IMPORTED_MODULE_8__.DictValidator),\n/* harmony export */   DocumentRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.DocumentRecordType),\n/* harmony export */   EASINGS: () => (/* reexport safe */ _lib_primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_76__.EASINGS),\n/* harmony export */   EMBED_DEFINITIONS: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.EMBED_DEFINITIONS),\n/* harmony export */   EMPTY_ARRAY: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_9__.EMPTY_ARRAY),\n/* harmony export */   EVENT_NAME_MAP: () => (/* reexport safe */ _lib_editor_types_event_types_mjs__WEBPACK_IMPORTED_MODULE_55__.EVENT_NAME_MAP),\n/* harmony export */   Edge2d: () => (/* reexport safe */ _lib_primitives_geometry_Edge2d_mjs__WEBPACK_IMPORTED_MODULE_81__.Edge2d),\n/* harmony export */   Editor: () => (/* reexport safe */ _lib_editor_Editor_mjs__WEBPACK_IMPORTED_MODULE_37__.Editor),\n/* harmony export */   EditorContext: () => (/* reexport safe */ _lib_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_58__.EditorContext),\n/* harmony export */   Ellipse2d: () => (/* reexport safe */ _lib_primitives_geometry_Ellipse2d_mjs__WEBPACK_IMPORTED_MODULE_82__.Ellipse2d),\n/* harmony export */   EnumStyleProp: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.EnumStyleProp),\n/* harmony export */   EnvironmentManager: () => (/* reexport safe */ _lib_editor_managers_EnvironmentManager_mjs__WEBPACK_IMPORTED_MODULE_40__.EnvironmentManager),\n/* harmony export */   ErrorBoundary: () => (/* reexport safe */ _lib_components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_11__.ErrorBoundary),\n/* harmony export */   ErrorScreen: () => (/* reexport safe */ _lib_TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_10__.ErrorScreen),\n/* harmony export */   FileHelpers: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.FileHelpers),\n/* harmony export */   GeoShapeGeoStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.GeoShapeGeoStyle),\n/* harmony export */   Geometry2d: () => (/* reexport safe */ _lib_primitives_geometry_Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_83__.Geometry2d),\n/* harmony export */   Group2d: () => (/* reexport safe */ _lib_primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_84__.Group2d),\n/* harmony export */   GroupShapeUtil: () => (/* reexport safe */ _lib_editor_shapes_group_GroupShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_50__.GroupShapeUtil),\n/* harmony export */   HALF_PI: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.HALF_PI),\n/* harmony export */   HTMLContainer: () => (/* reexport safe */ _lib_components_HTMLContainer_mjs__WEBPACK_IMPORTED_MODULE_12__.HTMLContainer),\n/* harmony export */   HandleSnaps: () => (/* reexport safe */ _lib_editor_managers_SnapManager_HandleSnaps_mjs__WEBPACK_IMPORTED_MODULE_44__.HandleSnaps),\n/* harmony export */   HistoryManager: () => (/* reexport safe */ _lib_editor_managers_HistoryManager_mjs__WEBPACK_IMPORTED_MODULE_41__.HistoryManager),\n/* harmony export */   ImageShapeCrop: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.ImageShapeCrop),\n/* harmony export */   IncrementalSetConstructor: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.IncrementalSetConstructor),\n/* harmony export */   InstancePageStateRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.InstancePageStateRecordType),\n/* harmony export */   InstancePresenceRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.InstancePresenceRecordType),\n/* harmony export */   LANGUAGES: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.LANGUAGES),\n/* harmony export */   LineShapeSplineStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.LineShapeSplineStyle),\n/* harmony export */   LoadingScreen: () => (/* reexport safe */ _lib_TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_10__.LoadingScreen),\n/* harmony export */   Mat: () => (/* reexport safe */ _lib_primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_74__.Mat),\n/* harmony export */   MediaHelpers: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.MediaHelpers),\n/* harmony export */   MigrationFailureReason: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.MigrationFailureReason),\n/* harmony export */   ObjectValidator: () => (/* reexport safe */ _tldraw_validate__WEBPACK_IMPORTED_MODULE_8__.ObjectValidator),\n/* harmony export */   OptionalErrorBoundary: () => (/* reexport safe */ _lib_components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_11__.OptionalErrorBoundary),\n/* harmony export */   PI: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.PI),\n/* harmony export */   PI2: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.PI2),\n/* harmony export */   PageRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.PageRecordType),\n/* harmony export */   PerformanceTracker: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.PerformanceTracker),\n/* harmony export */   PngHelpers: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.PngHelpers),\n/* harmony export */   Point2d: () => (/* reexport safe */ _lib_primitives_geometry_Point2d_mjs__WEBPACK_IMPORTED_MODULE_85__.Point2d),\n/* harmony export */   PointerRecordType: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.PointerRecordType),\n/* harmony export */   Polygon2d: () => (/* reexport safe */ _lib_primitives_geometry_Polygon2d_mjs__WEBPACK_IMPORTED_MODULE_86__.Polygon2d),\n/* harmony export */   Polyline2d: () => (/* reexport safe */ _lib_primitives_geometry_Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_87__.Polyline2d),\n/* harmony export */   ROTATE_CORNER_TO_SELECTION_CORNER: () => (/* reexport safe */ _lib_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_73__.ROTATE_CORNER_TO_SELECTION_CORNER),\n/* harmony export */   ReadonlySharedStyleMap: () => (/* reexport safe */ _lib_utils_SharedStylesMap_mjs__WEBPACK_IMPORTED_MODULE_92__.ReadonlySharedStyleMap),\n/* harmony export */   RecordType: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.RecordType),\n/* harmony export */   Rectangle2d: () => (/* reexport safe */ _lib_primitives_geometry_Rectangle2d_mjs__WEBPACK_IMPORTED_MODULE_88__.Rectangle2d),\n/* harmony export */   Result: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.Result),\n/* harmony export */   SIDES: () => (/* reexport safe */ _lib_constants_mjs__WEBPACK_IMPORTED_MODULE_36__.SIDES),\n/* harmony export */   SIN: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.SIN),\n/* harmony export */   STRUCTURED_CLONE_OBJECT_PROTOTYPE: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.STRUCTURED_CLONE_OBJECT_PROTOTYPE),\n/* harmony export */   SVGContainer: () => (/* reexport safe */ _lib_components_SVGContainer_mjs__WEBPACK_IMPORTED_MODULE_13__.SVGContainer),\n/* harmony export */   ScribbleManager: () => (/* reexport safe */ _lib_editor_managers_ScribbleManager_mjs__WEBPACK_IMPORTED_MODULE_42__.ScribbleManager),\n/* harmony export */   ShapeUtil: () => (/* reexport safe */ _lib_editor_shapes_ShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_49__.ShapeUtil),\n/* harmony export */   SharedStyleMap: () => (/* reexport safe */ _lib_utils_SharedStylesMap_mjs__WEBPACK_IMPORTED_MODULE_92__.SharedStyleMap),\n/* harmony export */   SnapManager: () => (/* reexport safe */ _lib_editor_managers_SnapManager_SnapManager_mjs__WEBPACK_IMPORTED_MODULE_45__.SnapManager),\n/* harmony export */   Stadium2d: () => (/* reexport safe */ _lib_primitives_geometry_Stadium2d_mjs__WEBPACK_IMPORTED_MODULE_89__.Stadium2d),\n/* harmony export */   StateNode: () => (/* reexport safe */ _lib_editor_tools_StateNode_mjs__WEBPACK_IMPORTED_MODULE_53__.StateNode),\n/* harmony export */   Store: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.Store),\n/* harmony export */   StoreQueries: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.StoreQueries),\n/* harmony export */   StoreSchema: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.StoreSchema),\n/* harmony export */   StoreSideEffects: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.StoreSideEffects),\n/* harmony export */   StyleProp: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.StyleProp),\n/* harmony export */   T: () => (/* reexport safe */ _tldraw_validate__WEBPACK_IMPORTED_MODULE_8__.T),\n/* harmony export */   TAB_ID: () => (/* reexport safe */ _lib_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_31__.TAB_ID),\n/* harmony export */   TLDOCUMENT_ID: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.TLDOCUMENT_ID),\n/* harmony export */   TLINSTANCE_ID: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.TLINSTANCE_ID),\n/* harmony export */   TLPOINTER_ID: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.TLPOINTER_ID),\n/* harmony export */   TL_CANVAS_UI_COLOR_TYPES: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.TL_CANVAS_UI_COLOR_TYPES),\n/* harmony export */   TL_CURSOR_TYPES: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.TL_CURSOR_TYPES),\n/* harmony export */   TL_HANDLE_TYPES: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.TL_HANDLE_TYPES),\n/* harmony export */   TL_SCRIBBLE_STATES: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.TL_SCRIBBLE_STATES),\n/* harmony export */   TextManager: () => (/* reexport safe */ _lib_editor_managers_TextManager_mjs__WEBPACK_IMPORTED_MODULE_46__.TextManager),\n/* harmony export */   Timers: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.Timers),\n/* harmony export */   TldrawEditor: () => (/* reexport safe */ _lib_TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_10__.TldrawEditor),\n/* harmony export */   USER_COLORS: () => (/* reexport safe */ _lib_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_32__.USER_COLORS),\n/* harmony export */   UnionValidator: () => (/* reexport safe */ _tldraw_validate__WEBPACK_IMPORTED_MODULE_8__.UnionValidator),\n/* harmony export */   UserPreferencesManager: () => (/* reexport safe */ _lib_editor_managers_UserPreferencesManager_mjs__WEBPACK_IMPORTED_MODULE_47__.UserPreferencesManager),\n/* harmony export */   Validator: () => (/* reexport safe */ _tldraw_validate__WEBPACK_IMPORTED_MODULE_8__.Validator),\n/* harmony export */   Vec: () => (/* reexport safe */ _lib_primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_75__.Vec),\n/* harmony export */   WeakCache: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.WeakCache),\n/* harmony export */   ZERO_INDEX_KEY: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.ZERO_INDEX_KEY),\n/* harmony export */   angleDistance: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.angleDistance),\n/* harmony export */   annotateError: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.annotateError),\n/* harmony export */   applyRotationToSnapshotShapes: () => (/* reexport safe */ _lib_utils_rotation_mjs__WEBPACK_IMPORTED_MODULE_103__.applyRotationToSnapshotShapes),\n/* harmony export */   approximately: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.approximately),\n/* harmony export */   areAnglesCompatible: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.areAnglesCompatible),\n/* harmony export */   areArraysShallowEqual: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.areArraysShallowEqual),\n/* harmony export */   areObjectsShallowEqual: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.areObjectsShallowEqual),\n/* harmony export */   arrowBindingMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.arrowBindingMigrations),\n/* harmony export */   arrowBindingProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.arrowBindingProps),\n/* harmony export */   arrowShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.arrowShapeMigrations),\n/* harmony export */   arrowShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.arrowShapeProps),\n/* harmony export */   assert: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.assert),\n/* harmony export */   assertExists: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.assertExists),\n/* harmony export */   assertIdType: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.assertIdType),\n/* harmony export */   assetIdValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.assetIdValidator),\n/* harmony export */   assetMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.assetMigrations),\n/* harmony export */   assetValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.assetValidator),\n/* harmony export */   atom: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_9__.atom),\n/* harmony export */   average: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.average),\n/* harmony export */   bindingIdValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.bindingIdValidator),\n/* harmony export */   bookmarkShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.bookmarkShapeMigrations),\n/* harmony export */   bookmarkShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.bookmarkShapeProps),\n/* harmony export */   boxModelValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.boxModelValidator),\n/* harmony export */   canonicalizeRotation: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.canonicalizeRotation),\n/* harmony export */   canvasUiColorTypeValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.canvasUiColorTypeValidator),\n/* harmony export */   centerOfCircleFromThreePoints: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.centerOfCircleFromThreePoints),\n/* harmony export */   clamp: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.clamp),\n/* harmony export */   clampRadians: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.clampRadians),\n/* harmony export */   clearLocalStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.clearLocalStorage),\n/* harmony export */   clearSessionStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.clearSessionStorage),\n/* harmony export */   clockwiseAngleDist: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.clockwiseAngleDist),\n/* harmony export */   compact: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.compact),\n/* harmony export */   computed: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_9__.computed),\n/* harmony export */   coreShapes: () => (/* reexport safe */ _lib_config_defaultShapes_mjs__WEBPACK_IMPORTED_MODULE_35__.coreShapes),\n/* harmony export */   counterClockwiseAngleDist: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.counterClockwiseAngleDist),\n/* harmony export */   createAssetValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.createAssetValidator),\n/* harmony export */   createBindingId: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.createBindingId),\n/* harmony export */   createBindingPropsMigrationIds: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.createBindingPropsMigrationIds),\n/* harmony export */   createBindingPropsMigrationSequence: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.createBindingPropsMigrationSequence),\n/* harmony export */   createBindingValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.createBindingValidator),\n/* harmony export */   createComputedCache: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.createComputedCache),\n/* harmony export */   createEmptyRecordsDiff: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.createEmptyRecordsDiff),\n/* harmony export */   createMigrationIds: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.createMigrationIds),\n/* harmony export */   createMigrationSequence: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.createMigrationSequence),\n/* harmony export */   createPresenceStateDerivation: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.createPresenceStateDerivation),\n/* harmony export */   createRecordMigrationSequence: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.createRecordMigrationSequence),\n/* harmony export */   createRecordType: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.createRecordType),\n/* harmony export */   createSessionStateSnapshotSignal: () => (/* reexport safe */ _lib_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_31__.createSessionStateSnapshotSignal),\n/* harmony export */   createShapeId: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.createShapeId),\n/* harmony export */   createShapePropsMigrationIds: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.createShapePropsMigrationIds),\n/* harmony export */   createShapePropsMigrationSequence: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.createShapePropsMigrationSequence),\n/* harmony export */   createShapeValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.createShapeValidator),\n/* harmony export */   createTLSchema: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.createTLSchema),\n/* harmony export */   createTLStore: () => (/* reexport safe */ _lib_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_33__.createTLStore),\n/* harmony export */   createTLUser: () => (/* reexport safe */ _lib_config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_34__.createTLUser),\n/* harmony export */   dataUrlToFile: () => (/* reexport safe */ _lib_utils_assets_mjs__WEBPACK_IMPORTED_MODULE_93__.dataUrlToFile),\n/* harmony export */   debounce: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.debounce),\n/* harmony export */   debugFlags: () => (/* reexport safe */ _lib_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_94__.debugFlags),\n/* harmony export */   dedupe: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.dedupe),\n/* harmony export */   defaultColorNames: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.defaultColorNames),\n/* harmony export */   defaultShapeSchemas: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.defaultShapeSchemas),\n/* harmony export */   defaultTldrawOptions: () => (/* reexport safe */ _lib_options_mjs__WEBPACK_IMPORTED_MODULE_72__.defaultTldrawOptions),\n/* harmony export */   defaultUserPreferences: () => (/* reexport safe */ _lib_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_32__.defaultUserPreferences),\n/* harmony export */   defineMigrations: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.defineMigrations),\n/* harmony export */   degreesToRadians: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.degreesToRadians),\n/* harmony export */   deleteFromLocalStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.deleteFromLocalStorage),\n/* harmony export */   deleteFromSessionStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.deleteFromSessionStorage),\n/* harmony export */   devFreeze: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.devFreeze),\n/* harmony export */   drawShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.drawShapeMigrations),\n/* harmony export */   drawShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.drawShapeProps),\n/* harmony export */   embedShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.embedShapeMigrations),\n/* harmony export */   embedShapePermissionDefaults: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.embedShapePermissionDefaults),\n/* harmony export */   embedShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.embedShapeProps),\n/* harmony export */   exhaustiveSwitchError: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.exhaustiveSwitchError),\n/* harmony export */   extractSessionStateFromLegacySnapshot: () => (/* reexport safe */ _lib_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_31__.extractSessionStateFromLegacySnapshot),\n/* harmony export */   featureFlags: () => (/* reexport safe */ _lib_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_94__.featureFlags),\n/* harmony export */   filterEntries: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.filterEntries),\n/* harmony export */   fpsThrottle: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.fpsThrottle),\n/* harmony export */   frameShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.frameShapeMigrations),\n/* harmony export */   frameShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.frameShapeProps),\n/* harmony export */   geoShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.geoShapeMigrations),\n/* harmony export */   geoShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.geoShapeProps),\n/* harmony export */   getArcMeasure: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.getArcMeasure),\n/* harmony export */   getCursor: () => (/* reexport safe */ _lib_hooks_useCursor_mjs__WEBPACK_IMPORTED_MODULE_57__.getCursor),\n/* harmony export */   getDefaultColorTheme: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.getDefaultColorTheme),\n/* harmony export */   getDefaultTranslationLocale: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.getDefaultTranslationLocale),\n/* harmony export */   getErrorAnnotations: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getErrorAnnotations),\n/* harmony export */   getFirstFromIterable: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getFirstFromIterable),\n/* harmony export */   getFreshUserPreferences: () => (/* reexport safe */ _lib_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_32__.getFreshUserPreferences),\n/* harmony export */   getFromLocalStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getFromLocalStorage),\n/* harmony export */   getFromSessionStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getFromSessionStorage),\n/* harmony export */   getHashForBuffer: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getHashForBuffer),\n/* harmony export */   getHashForObject: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getHashForObject),\n/* harmony export */   getHashForString: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getHashForString),\n/* harmony export */   getIncrementedName: () => (/* reexport safe */ _lib_utils_getIncrementedName_mjs__WEBPACK_IMPORTED_MODULE_97__.getIncrementedName),\n/* harmony export */   getIndexAbove: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getIndexAbove),\n/* harmony export */   getIndexBelow: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getIndexBelow),\n/* harmony export */   getIndexBetween: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getIndexBetween),\n/* harmony export */   getIndices: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getIndices),\n/* harmony export */   getIndicesAbove: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getIndicesAbove),\n/* harmony export */   getIndicesBelow: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getIndicesBelow),\n/* harmony export */   getIndicesBetween: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getIndicesBetween),\n/* harmony export */   getOwnProperty: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.getOwnProperty),\n/* harmony export */   getPointInArcT: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.getPointInArcT),\n/* harmony export */   getPointOnCircle: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.getPointOnCircle),\n/* harmony export */   getPointerInfo: () => (/* reexport safe */ _lib_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_98__.getPointerInfo),\n/* harmony export */   getPointsOnArc: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.getPointsOnArc),\n/* harmony export */   getPolygonVertices: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.getPolygonVertices),\n/* harmony export */   getRotationSnapshot: () => (/* reexport safe */ _lib_utils_rotation_mjs__WEBPACK_IMPORTED_MODULE_103__.getRotationSnapshot),\n/* harmony export */   getShapePropKeysByStyle: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.getShapePropKeysByStyle),\n/* harmony export */   getSnapshot: () => (/* reexport safe */ _lib_config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_30__.getSnapshot),\n/* harmony export */   getSvgPathFromPoints: () => (/* reexport safe */ _lib_utils_getSvgPathFromPoints_mjs__WEBPACK_IMPORTED_MODULE_99__.getSvgPathFromPoints),\n/* harmony export */   getUserPreferences: () => (/* reexport safe */ _lib_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_32__.getUserPreferences),\n/* harmony export */   groupShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.groupShapeMigrations),\n/* harmony export */   groupShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.groupShapeProps),\n/* harmony export */   hardReset: () => (/* reexport safe */ _lib_utils_sync_hardReset_mjs__WEBPACK_IMPORTED_MODULE_105__.hardReset),\n/* harmony export */   hardResetEditor: () => (/* reexport safe */ _lib_utils_hardResetEditor_mjs__WEBPACK_IMPORTED_MODULE_100__.hardResetEditor),\n/* harmony export */   hasOwnProperty: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.hasOwnProperty),\n/* harmony export */   highlightShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.highlightShapeMigrations),\n/* harmony export */   highlightShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.highlightShapeProps),\n/* harmony export */   idValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.idValidator),\n/* harmony export */   imageShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.imageShapeMigrations),\n/* harmony export */   imageShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.imageShapeProps),\n/* harmony export */   intersectCircleCircle: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__.intersectCircleCircle),\n/* harmony export */   intersectCirclePolygon: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__.intersectCirclePolygon),\n/* harmony export */   intersectCirclePolyline: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__.intersectCirclePolyline),\n/* harmony export */   intersectLineSegmentCircle: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__.intersectLineSegmentCircle),\n/* harmony export */   intersectLineSegmentLineSegment: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__.intersectLineSegmentLineSegment),\n/* harmony export */   intersectLineSegmentPolygon: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__.intersectLineSegmentPolygon),\n/* harmony export */   intersectLineSegmentPolyline: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__.intersectLineSegmentPolyline),\n/* harmony export */   intersectPolygonBounds: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__.intersectPolygonBounds),\n/* harmony export */   intersectPolygonPolygon: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__.intersectPolygonPolygon),\n/* harmony export */   invLerp: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.invLerp),\n/* harmony export */   isBinding: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.isBinding),\n/* harmony export */   isBindingId: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.isBindingId),\n/* harmony export */   isDefined: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.isDefined),\n/* harmony export */   isNativeStructuredClone: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.isNativeStructuredClone),\n/* harmony export */   isNonNull: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.isNonNull),\n/* harmony export */   isNonNullish: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.isNonNullish),\n/* harmony export */   isPageId: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.isPageId),\n/* harmony export */   isRecordsDiffEmpty: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.isRecordsDiffEmpty),\n/* harmony export */   isSafeFloat: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.isSafeFloat),\n/* harmony export */   isShape: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.isShape),\n/* harmony export */   isShapeId: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.isShapeId),\n/* harmony export */   last: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.last),\n/* harmony export */   lerp: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.lerp),\n/* harmony export */   lineShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.lineShapeMigrations),\n/* harmony export */   lineShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.lineShapeProps),\n/* harmony export */   linesIntersect: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__.linesIntersect),\n/* harmony export */   lns: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.lns),\n/* harmony export */   loadSessionStateSnapshotIntoStore: () => (/* reexport safe */ _lib_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_31__.loadSessionStateSnapshotIntoStore),\n/* harmony export */   loadSnapshot: () => (/* reexport safe */ _lib_config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_30__.loadSnapshot),\n/* harmony export */   loopToHtmlElement: () => (/* reexport safe */ _lib_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_95__.loopToHtmlElement),\n/* harmony export */   mapObjectMapValues: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.mapObjectMapValues),\n/* harmony export */   measureAverageDuration: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.measureAverageDuration),\n/* harmony export */   measureCbDuration: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.measureCbDuration),\n/* harmony export */   measureDuration: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.measureDuration),\n/* harmony export */   minBy: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.minBy),\n/* harmony export */   modulate: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.modulate),\n/* harmony export */   moveCameraWhenCloseToEdge: () => (/* reexport safe */ _lib_utils_edgeScrolling_mjs__WEBPACK_IMPORTED_MODULE_96__.moveCameraWhenCloseToEdge),\n/* harmony export */   noop: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.noop),\n/* harmony export */   normalizeWheel: () => (/* reexport safe */ _lib_utils_normalizeWheel_mjs__WEBPACK_IMPORTED_MODULE_101__.normalizeWheel),\n/* harmony export */   noteShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.noteShapeMigrations),\n/* harmony export */   noteShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.noteShapeProps),\n/* harmony export */   objectMapEntries: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.objectMapEntries),\n/* harmony export */   objectMapFromEntries: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.objectMapFromEntries),\n/* harmony export */   objectMapKeys: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.objectMapKeys),\n/* harmony export */   objectMapValues: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.objectMapValues),\n/* harmony export */   omitFromStackTrace: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.omitFromStackTrace),\n/* harmony export */   opacityValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.opacityValidator),\n/* harmony export */   openWindow: () => (/* reexport safe */ _lib_utils_window_open_mjs__WEBPACK_IMPORTED_MODULE_108__.openWindow),\n/* harmony export */   pageIdValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.pageIdValidator),\n/* harmony export */   parentIdValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.parentIdValidator),\n/* harmony export */   parseMigrationId: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.parseMigrationId),\n/* harmony export */   partition: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.partition),\n/* harmony export */   perimeterOfEllipse: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.perimeterOfEllipse),\n/* harmony export */   pluckPreservingValues: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.pluckPreservingValues),\n/* harmony export */   pointInPolygon: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.pointInPolygon),\n/* harmony export */   polygonIntersectsPolyline: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__.polygonIntersectsPolyline),\n/* harmony export */   polygonsIntersect: () => (/* reexport safe */ _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__.polygonsIntersect),\n/* harmony export */   precise: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.precise),\n/* harmony export */   preventDefault: () => (/* reexport safe */ _lib_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_95__.preventDefault),\n/* harmony export */   promiseWithResolve: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.promiseWithResolve),\n/* harmony export */   radiansToDegrees: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.radiansToDegrees),\n/* harmony export */   rangeIntersection: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.rangeIntersection),\n/* harmony export */   react: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_9__.react),\n/* harmony export */   refreshPage: () => (/* reexport safe */ _lib_utils_refreshPage_mjs__WEBPACK_IMPORTED_MODULE_102__.refreshPage),\n/* harmony export */   releasePointerCapture: () => (/* reexport safe */ _lib_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_95__.releasePointerCapture),\n/* harmony export */   resizeBox: () => (/* reexport safe */ _lib_editor_shapes_shared_resizeBox_mjs__WEBPACK_IMPORTED_MODULE_51__.resizeBox),\n/* harmony export */   reverseRecordsDiff: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.reverseRecordsDiff),\n/* harmony export */   rng: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.rng),\n/* harmony export */   rootBindingMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.rootBindingMigrations),\n/* harmony export */   rootShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.rootShapeMigrations),\n/* harmony export */   rotateArray: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.rotateArray),\n/* harmony export */   rotateSelectionHandle: () => (/* reexport safe */ _lib_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_73__.rotateSelectionHandle),\n/* harmony export */   runtime: () => (/* reexport safe */ _lib_utils_runtime_mjs__WEBPACK_IMPORTED_MODULE_104__.runtime),\n/* harmony export */   scribbleValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.scribbleValidator),\n/* harmony export */   setInLocalStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.setInLocalStorage),\n/* harmony export */   setInSessionStorage: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.setInSessionStorage),\n/* harmony export */   setPointerCapture: () => (/* reexport safe */ _lib_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_95__.setPointerCapture),\n/* harmony export */   setRuntimeOverrides: () => (/* reexport safe */ _lib_utils_runtime_mjs__WEBPACK_IMPORTED_MODULE_104__.setRuntimeOverrides),\n/* harmony export */   setUserPreferences: () => (/* reexport safe */ _lib_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_32__.setUserPreferences),\n/* harmony export */   shapeIdValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.shapeIdValidator),\n/* harmony export */   shortAngleDist: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.shortAngleDist),\n/* harmony export */   snapAngle: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.snapAngle),\n/* harmony export */   sortById: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.sortById),\n/* harmony export */   sortByIndex: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.sortByIndex),\n/* harmony export */   squashRecordDiffs: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.squashRecordDiffs),\n/* harmony export */   squashRecordDiffsMutable: () => (/* reexport safe */ _tldraw_store__WEBPACK_IMPORTED_MODULE_5__.squashRecordDiffsMutable),\n/* harmony export */   stopEventPropagation: () => (/* reexport safe */ _lib_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_95__.stopEventPropagation),\n/* harmony export */   structuredClone: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.structuredClone),\n/* harmony export */   textShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.textShapeMigrations),\n/* harmony export */   textShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.textShapeProps),\n/* harmony export */   throttle: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.throttle),\n/* harmony export */   throttleToNextFrame: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.throttleToNextFrame),\n/* harmony export */   toDomPrecision: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.toDomPrecision),\n/* harmony export */   toFixed: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.toFixed),\n/* harmony export */   toPrecision: () => (/* reexport safe */ _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__.toPrecision),\n/* harmony export */   track: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_9__.track),\n/* harmony export */   transact: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_9__.transact),\n/* harmony export */   transaction: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_9__.transaction),\n/* harmony export */   uniq: () => (/* reexport safe */ _lib_utils_uniq_mjs__WEBPACK_IMPORTED_MODULE_106__.uniq),\n/* harmony export */   uniqueId: () => (/* reexport safe */ _lib_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_107__.uniqueId),\n/* harmony export */   useComputed: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_9__.useComputed),\n/* harmony export */   useContainer: () => (/* reexport safe */ _lib_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_56__.useContainer),\n/* harmony export */   useEditor: () => (/* reexport safe */ _lib_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_58__.useEditor),\n/* harmony export */   useEditorComponents: () => (/* reexport safe */ _lib_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_59__.useEditorComponents),\n/* harmony export */   useEvent: () => (/* reexport safe */ _lib_hooks_useEvent_mjs__WEBPACK_IMPORTED_MODULE_60__.useEvent),\n/* harmony export */   useIsCropping: () => (/* reexport safe */ _lib_hooks_useIsCropping_mjs__WEBPACK_IMPORTED_MODULE_62__.useIsCropping),\n/* harmony export */   useIsDarkMode: () => (/* reexport safe */ _lib_hooks_useIsDarkMode_mjs__WEBPACK_IMPORTED_MODULE_63__.useIsDarkMode),\n/* harmony export */   useIsEditing: () => (/* reexport safe */ _lib_hooks_useIsEditing_mjs__WEBPACK_IMPORTED_MODULE_64__.useIsEditing),\n/* harmony export */   useLocalStore: () => (/* reexport safe */ _lib_hooks_useLocalStore_mjs__WEBPACK_IMPORTED_MODULE_65__.useLocalStore),\n/* harmony export */   usePeerIds: () => (/* reexport safe */ _lib_hooks_usePeerIds_mjs__WEBPACK_IMPORTED_MODULE_66__.usePeerIds),\n/* harmony export */   usePresence: () => (/* reexport safe */ _lib_hooks_usePresence_mjs__WEBPACK_IMPORTED_MODULE_67__.usePresence),\n/* harmony export */   useQuickReactor: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_9__.useQuickReactor),\n/* harmony export */   useReactor: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_9__.useReactor),\n/* harmony export */   useSafeId: () => (/* reexport safe */ _lib_hooks_useSafeId_mjs__WEBPACK_IMPORTED_MODULE_68__.useSafeId),\n/* harmony export */   useSelectionEvents: () => (/* reexport safe */ _lib_hooks_useSelectionEvents_mjs__WEBPACK_IMPORTED_MODULE_69__.useSelectionEvents),\n/* harmony export */   useShallowArrayIdentity: () => (/* reexport safe */ _lib_hooks_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_61__.useShallowArrayIdentity),\n/* harmony export */   useShallowObjectIdentity: () => (/* reexport safe */ _lib_hooks_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_61__.useShallowObjectIdentity),\n/* harmony export */   useSvgExportContext: () => (/* reexport safe */ _lib_editor_types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_54__.useSvgExportContext),\n/* harmony export */   useTLStore: () => (/* reexport safe */ _lib_hooks_useTLStore_mjs__WEBPACK_IMPORTED_MODULE_70__.useTLStore),\n/* harmony export */   useTransform: () => (/* reexport safe */ _lib_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_71__.useTransform),\n/* harmony export */   useValue: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_9__.useValue),\n/* harmony export */   validateIndexKey: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.validateIndexKey),\n/* harmony export */   vecModelValidator: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.vecModelValidator),\n/* harmony export */   videoShapeMigrations: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.videoShapeMigrations),\n/* harmony export */   videoShapeProps: () => (/* reexport safe */ _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__.videoShapeProps),\n/* harmony export */   warnDeprecatedGetter: () => (/* reexport safe */ _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__.warnDeprecatedGetter),\n/* harmony export */   whyAmIRunning: () => (/* reexport safe */ _tldraw_state__WEBPACK_IMPORTED_MODULE_9__.whyAmIRunning)\n/* harmony export */ });\n/* harmony import */ var core_js_stable_array_at_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/stable/array/at.js */ \"(ssr)/./node_modules/core-js/stable/array/at.js\");\n/* harmony import */ var core_js_stable_array_flat_map_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/stable/array/flat-map.js */ \"(ssr)/./node_modules/core-js/stable/array/flat-map.js\");\n/* harmony import */ var core_js_stable_array_flat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/stable/array/flat.js */ \"(ssr)/./node_modules/core-js/stable/array/flat.js\");\n/* harmony import */ var core_js_stable_string_at_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/stable/string/at.js */ \"(ssr)/./node_modules/core-js/stable/string/at.js\");\n/* harmony import */ var core_js_stable_string_replace_all_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/stable/string/replace-all.js */ \"(ssr)/./node_modules/core-js/stable/string/replace-all.js\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _lib_TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lib/TldrawEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/TldrawEditor.mjs\");\n/* harmony import */ var _lib_components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./lib/components/ErrorBoundary.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\");\n/* harmony import */ var _lib_components_HTMLContainer_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./lib/components/HTMLContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/HTMLContainer.mjs\");\n/* harmony import */ var _lib_components_SVGContainer_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./lib/components/SVGContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/SVGContainer.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultBackground_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./lib/components/default-components/DefaultBackground.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBackground.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultBrush_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./lib/components/default-components/DefaultBrush.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBrush.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultCanvas_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./lib/components/default-components/DefaultCanvas.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCanvas.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultCollaboratorHint_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./lib/components/default-components/DefaultCollaboratorHint.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCollaboratorHint.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultCursor_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./lib/components/default-components/DefaultCursor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCursor.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./lib/components/default-components/DefaultErrorFallback.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultErrorFallback.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultGrid_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./lib/components/default-components/DefaultGrid.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultGrid.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultHandle_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./lib/components/default-components/DefaultHandle.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandle.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultHandles_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./lib/components/default-components/DefaultHandles.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandles.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultScribble_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./lib/components/default-components/DefaultScribble.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultScribble.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultSelectionBackground_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./lib/components/default-components/DefaultSelectionBackground.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionBackground.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultSelectionForeground_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./lib/components/default-components/DefaultSelectionForeground.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionForeground.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultShapeIndicator_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./lib/components/default-components/DefaultShapeIndicator.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicator.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultSnapIndictor_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./lib/components/default-components/DefaultSnapIndictor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSnapIndictor.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultSpinner_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./lib/components/default-components/DefaultSpinner.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSpinner.mjs\");\n/* harmony import */ var _lib_components_default_components_DefaultSvgDefs_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./lib/components/default-components/DefaultSvgDefs.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSvgDefs.mjs\");\n/* harmony import */ var _lib_config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./lib/config/TLEditorSnapshot.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLEditorSnapshot.mjs\");\n/* harmony import */ var _lib_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./lib/config/TLSessionStateSnapshot.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLSessionStateSnapshot.mjs\");\n/* harmony import */ var _lib_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./lib/config/TLUserPreferences.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLUserPreferences.mjs\");\n/* harmony import */ var _lib_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./lib/config/createTLStore.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLStore.mjs\");\n/* harmony import */ var _lib_config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./lib/config/createTLUser.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLUser.mjs\");\n/* harmony import */ var _lib_config_defaultShapes_mjs__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./lib/config/defaultShapes.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultShapes.mjs\");\n/* harmony import */ var _lib_constants_mjs__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./lib/constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _lib_editor_Editor_mjs__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./lib/editor/Editor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/Editor.mjs\");\n/* harmony import */ var _lib_editor_bindings_BindingUtil_mjs__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./lib/editor/bindings/BindingUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/bindings/BindingUtil.mjs\");\n/* harmony import */ var _lib_editor_managers_ClickManager_mjs__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./lib/editor/managers/ClickManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ClickManager.mjs\");\n/* harmony import */ var _lib_editor_managers_EnvironmentManager_mjs__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./lib/editor/managers/EnvironmentManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/EnvironmentManager.mjs\");\n/* harmony import */ var _lib_editor_managers_HistoryManager_mjs__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./lib/editor/managers/HistoryManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/HistoryManager.mjs\");\n/* harmony import */ var _lib_editor_managers_ScribbleManager_mjs__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./lib/editor/managers/ScribbleManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ScribbleManager.mjs\");\n/* harmony import */ var _lib_editor_managers_SnapManager_BoundsSnaps_mjs__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./lib/editor/managers/SnapManager/BoundsSnaps.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/BoundsSnaps.mjs\");\n/* harmony import */ var _lib_editor_managers_SnapManager_HandleSnaps_mjs__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./lib/editor/managers/SnapManager/HandleSnaps.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/HandleSnaps.mjs\");\n/* harmony import */ var _lib_editor_managers_SnapManager_SnapManager_mjs__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./lib/editor/managers/SnapManager/SnapManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/SnapManager.mjs\");\n/* harmony import */ var _lib_editor_managers_TextManager_mjs__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./lib/editor/managers/TextManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TextManager.mjs\");\n/* harmony import */ var _lib_editor_managers_UserPreferencesManager_mjs__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./lib/editor/managers/UserPreferencesManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/UserPreferencesManager.mjs\");\n/* harmony import */ var _lib_editor_shapes_BaseBoxShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./lib/editor/shapes/BaseBoxShapeUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/BaseBoxShapeUtil.mjs\");\n/* harmony import */ var _lib_editor_shapes_ShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./lib/editor/shapes/ShapeUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/ShapeUtil.mjs\");\n/* harmony import */ var _lib_editor_shapes_group_GroupShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./lib/editor/shapes/group/GroupShapeUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/GroupShapeUtil.mjs\");\n/* harmony import */ var _lib_editor_shapes_shared_resizeBox_mjs__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./lib/editor/shapes/shared/resizeBox.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/resizeBox.mjs\");\n/* harmony import */ var _lib_editor_tools_BaseBoxShapeTool_BaseBoxShapeTool_mjs__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./lib/editor/tools/BaseBoxShapeTool/BaseBoxShapeTool.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/BaseBoxShapeTool.mjs\");\n/* harmony import */ var _lib_editor_tools_StateNode_mjs__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./lib/editor/tools/StateNode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs\");\n/* harmony import */ var _lib_editor_types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./lib/editor/types/SvgExportContext.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/SvgExportContext.mjs\");\n/* harmony import */ var _lib_editor_types_event_types_mjs__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./lib/editor/types/event-types.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/event-types.mjs\");\n/* harmony import */ var _lib_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./lib/hooks/useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _lib_hooks_useCursor_mjs__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./lib/hooks/useCursor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCursor.mjs\");\n/* harmony import */ var _lib_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./lib/hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _lib_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./lib/hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _lib_hooks_useEvent_mjs__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./lib/hooks/useEvent.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEvent.mjs\");\n/* harmony import */ var _lib_hooks_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./lib/hooks/useIdentity.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs\");\n/* harmony import */ var _lib_hooks_useIsCropping_mjs__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./lib/hooks/useIsCropping.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsCropping.mjs\");\n/* harmony import */ var _lib_hooks_useIsDarkMode_mjs__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./lib/hooks/useIsDarkMode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsDarkMode.mjs\");\n/* harmony import */ var _lib_hooks_useIsEditing_mjs__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./lib/hooks/useIsEditing.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsEditing.mjs\");\n/* harmony import */ var _lib_hooks_useLocalStore_mjs__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./lib/hooks/useLocalStore.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useLocalStore.mjs\");\n/* harmony import */ var _lib_hooks_usePeerIds_mjs__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./lib/hooks/usePeerIds.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePeerIds.mjs\");\n/* harmony import */ var _lib_hooks_usePresence_mjs__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./lib/hooks/usePresence.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePresence.mjs\");\n/* harmony import */ var _lib_hooks_useSafeId_mjs__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./lib/hooks/useSafeId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSafeId.mjs\");\n/* harmony import */ var _lib_hooks_useSelectionEvents_mjs__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./lib/hooks/useSelectionEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSelectionEvents.mjs\");\n/* harmony import */ var _lib_hooks_useTLStore_mjs__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./lib/hooks/useTLStore.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTLStore.mjs\");\n/* harmony import */ var _lib_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./lib/hooks/useTransform.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\");\n/* harmony import */ var _lib_options_mjs__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./lib/options.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/options.mjs\");\n/* harmony import */ var _lib_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./lib/primitives/Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _lib_primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ./lib/primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _lib_primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ./lib/primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _lib_primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ./lib/primitives/easings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Arc2d_mjs__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ./lib/primitives/geometry/Arc2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Arc2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Circle2d_mjs__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ./lib/primitives/geometry/Circle2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Circle2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_CubicBezier2d_mjs__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ./lib/primitives/geometry/CubicBezier2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicBezier2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_CubicSpline2d_mjs__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ./lib/primitives/geometry/CubicSpline2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicSpline2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Edge2d_mjs__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ./lib/primitives/geometry/Edge2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Ellipse2d_mjs__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ./lib/primitives/geometry/Ellipse2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Ellipse2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ./lib/primitives/geometry/Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ./lib/primitives/geometry/Group2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Point2d_mjs__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ./lib/primitives/geometry/Point2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Point2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Polygon2d_mjs__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ./lib/primitives/geometry/Polygon2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polygon2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ./lib/primitives/geometry/Polyline2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Rectangle2d_mjs__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! ./lib/primitives/geometry/Rectangle2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Rectangle2d.mjs\");\n/* harmony import */ var _lib_primitives_geometry_Stadium2d_mjs__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! ./lib/primitives/geometry/Stadium2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Stadium2d.mjs\");\n/* harmony import */ var _lib_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! ./lib/primitives/intersect.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs\");\n/* harmony import */ var _lib_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! ./lib/primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _lib_utils_SharedStylesMap_mjs__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! ./lib/utils/SharedStylesMap.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/SharedStylesMap.mjs\");\n/* harmony import */ var _lib_utils_assets_mjs__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! ./lib/utils/assets.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/assets.mjs\");\n/* harmony import */ var _lib_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! ./lib/utils/debug-flags.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\");\n/* harmony import */ var _lib_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! ./lib/utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _lib_utils_edgeScrolling_mjs__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! ./lib/utils/edgeScrolling.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/edgeScrolling.mjs\");\n/* harmony import */ var _lib_utils_getIncrementedName_mjs__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! ./lib/utils/getIncrementedName.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getIncrementedName.mjs\");\n/* harmony import */ var _lib_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! ./lib/utils/getPointerInfo.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs\");\n/* harmony import */ var _lib_utils_getSvgPathFromPoints_mjs__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! ./lib/utils/getSvgPathFromPoints.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getSvgPathFromPoints.mjs\");\n/* harmony import */ var _lib_utils_hardResetEditor_mjs__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! ./lib/utils/hardResetEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/hardResetEditor.mjs\");\n/* harmony import */ var _lib_utils_normalizeWheel_mjs__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! ./lib/utils/normalizeWheel.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/normalizeWheel.mjs\");\n/* harmony import */ var _lib_utils_refreshPage_mjs__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! ./lib/utils/refreshPage.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/refreshPage.mjs\");\n/* harmony import */ var _lib_utils_rotation_mjs__WEBPACK_IMPORTED_MODULE_103__ = __webpack_require__(/*! ./lib/utils/rotation.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/rotation.mjs\");\n/* harmony import */ var _lib_utils_runtime_mjs__WEBPACK_IMPORTED_MODULE_104__ = __webpack_require__(/*! ./lib/utils/runtime.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs\");\n/* harmony import */ var _lib_utils_sync_hardReset_mjs__WEBPACK_IMPORTED_MODULE_105__ = __webpack_require__(/*! ./lib/utils/sync/hardReset.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/hardReset.mjs\");\n/* harmony import */ var _lib_utils_uniq_mjs__WEBPACK_IMPORTED_MODULE_106__ = __webpack_require__(/*! ./lib/utils/uniq.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniq.mjs\");\n/* harmony import */ var _lib_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_107__ = __webpack_require__(/*! ./lib/utils/uniqueId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs\");\n/* harmony import */ var _lib_utils_window_open_mjs__WEBPACK_IMPORTED_MODULE_108__ = __webpack_require__(/*! ./lib/utils/window-open.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/window-open.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvQztBQUNNO0FBQ0o7QUFDRDtBQUNTO0FBQ2hCO0FBQ0c7QUFDSDtBQUNHO0FBY1Y7QUFLUztBQUlZO0FBQ3VCO0FBQ0Y7QUFDNkI7QUFDVjtBQUdyQjtBQUdVO0FBR1Y7QUFHTztBQUNZO0FBR25CO0FBR0M7QUFHQztBQUdXO0FBR0E7QUFHTDtBQUdGO0FBQ21CO0FBQ0E7QUFDVjtBQU03QjtBQU9MO0FBR0o7QUFDcUI7QUFDRDtBQUNtQztBQUM5QztBQUdGO0FBQ3VCO0FBQ1k7QUFDUjtBQUNFO0FBR2pCO0FBQ3FCO0FBR3JCO0FBQ1M7QUFDc0I7QUFDZDtBQUdqQztBQUNtQztBQUNUO0FBQ3VCO0FBQy9CO0FBR1o7QUFHTDtBQUNtQztBQUN6QjtBQUNlO0FBQ0s7QUFDdEI7QUFDNEM7QUFDbEM7QUFDQTtBQUNGO0FBQ0U7QUFDTjtBQUNFO0FBQ0o7QUFDa0I7QUFDaEI7QUFDSTtBQUNIO0FBS3ZCO0FBQ2E7QUFDQTtBQUNRO0FBQ0s7QUFDTTtBQUNVO0FBQ0E7QUFDZDtBQUNNO0FBQ0U7QUFDTjtBQUNBO0FBQ0k7QUFDRTtBQUNFO0FBQ0o7QUFjNUI7QUFpQ0o7QUFJSztBQUNjO0FBSWxCO0FBT1I7QUFDNkM7QUFDRjtBQUNSO0FBQ1k7QUFDVjtBQUNGO0FBQ047QUFJeEI7QUFDcUM7QUFDWjtBQUNmO0FBQ1E7QUFDSztBQW9MdkQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9pbmRleC5tanM/MDEyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCJjb3JlLWpzL3N0YWJsZS9hcnJheS9hdC5qc1wiO1xuaW1wb3J0IFwiY29yZS1qcy9zdGFibGUvYXJyYXkvZmxhdC1tYXAuanNcIjtcbmltcG9ydCBcImNvcmUtanMvc3RhYmxlL2FycmF5L2ZsYXQuanNcIjtcbmltcG9ydCBcImNvcmUtanMvc3RhYmxlL3N0cmluZy9hdC5qc1wiO1xuaW1wb3J0IFwiY29yZS1qcy9zdGFibGUvc3RyaW5nL3JlcGxhY2UtYWxsLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuZXhwb3J0ICogZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmV4cG9ydCAqIGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5leHBvcnQgKiBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHtcbiAgRU1QVFlfQVJSQVksXG4gIGF0b20sXG4gIGNvbXB1dGVkLFxuICByZWFjdCxcbiAgdHJhY2ssXG4gIHRyYW5zYWN0LFxuICB0cmFuc2FjdGlvbixcbiAgdXNlQ29tcHV0ZWQsXG4gIHVzZVF1aWNrUmVhY3RvcixcbiAgdXNlUmVhY3RvcixcbiAgdXNlVmFsdWUsXG4gIHdoeUFtSVJ1bm5pbmdcbn0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7XG4gIEVycm9yU2NyZWVuLFxuICBMb2FkaW5nU2NyZWVuLFxuICBUbGRyYXdFZGl0b3Jcbn0gZnJvbSBcIi4vbGliL1RsZHJhd0VkaXRvci5tanNcIjtcbmltcG9ydCB7XG4gIEVycm9yQm91bmRhcnksXG4gIE9wdGlvbmFsRXJyb3JCb3VuZGFyeVxufSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9FcnJvckJvdW5kYXJ5Lm1qc1wiO1xuaW1wb3J0IHsgSFRNTENvbnRhaW5lciB9IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL0hUTUxDb250YWluZXIubWpzXCI7XG5pbXBvcnQgeyBTVkdDb250YWluZXIgfSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9TVkdDb250YWluZXIubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0QmFja2dyb3VuZCB9IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0QmFja2dyb3VuZC5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRCcnVzaCB9IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0QnJ1c2gubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0Q2FudmFzXG59IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0Q2FudmFzLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdENvbGxhYm9yYXRvckhpbnRcbn0gZnJvbSBcIi4vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDb2xsYWJvcmF0b3JIaW50Lm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdEN1cnNvclxufSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdEN1cnNvci5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRFcnJvckZhbGxiYWNrXG59IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0RXJyb3JGYWxsYmFjay5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRHcmlkIH0gZnJvbSBcIi4vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRHcmlkLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdEhhbmRsZVxufSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdEhhbmRsZS5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRIYW5kbGVzXG59IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0SGFuZGxlcy5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRTY3JpYmJsZVxufSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNjcmliYmxlLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFNlbGVjdGlvbkJhY2tncm91bmRcbn0gZnJvbSBcIi4vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTZWxlY3Rpb25CYWNrZ3JvdW5kLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFNlbGVjdGlvbkZvcmVncm91bmRcbn0gZnJvbSBcIi4vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTZWxlY3Rpb25Gb3JlZ3JvdW5kLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFNoYXBlSW5kaWNhdG9yXG59IGZyb20gXCIuL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2hhcGVJbmRpY2F0b3IubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0U25hcEluZGljYXRvclxufSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNuYXBJbmRpY3Rvci5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRTcGlubmVyIH0gZnJvbSBcIi4vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTcGlubmVyLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdFN2Z0RlZnMgfSBmcm9tIFwiLi9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFN2Z0RlZnMubWpzXCI7XG5pbXBvcnQgeyBnZXRTbmFwc2hvdCwgbG9hZFNuYXBzaG90IH0gZnJvbSBcIi4vbGliL2NvbmZpZy9UTEVkaXRvclNuYXBzaG90Lm1qc1wiO1xuaW1wb3J0IHtcbiAgVEFCX0lELFxuICBjcmVhdGVTZXNzaW9uU3RhdGVTbmFwc2hvdFNpZ25hbCxcbiAgZXh0cmFjdFNlc3Npb25TdGF0ZUZyb21MZWdhY3lTbmFwc2hvdCxcbiAgbG9hZFNlc3Npb25TdGF0ZVNuYXBzaG90SW50b1N0b3JlXG59IGZyb20gXCIuL2xpYi9jb25maWcvVExTZXNzaW9uU3RhdGVTbmFwc2hvdC5tanNcIjtcbmltcG9ydCB7XG4gIFVTRVJfQ09MT1JTLFxuICBkZWZhdWx0VXNlclByZWZlcmVuY2VzLFxuICBnZXRGcmVzaFVzZXJQcmVmZXJlbmNlcyxcbiAgZ2V0VXNlclByZWZlcmVuY2VzLFxuICBzZXRVc2VyUHJlZmVyZW5jZXNcbn0gZnJvbSBcIi4vbGliL2NvbmZpZy9UTFVzZXJQcmVmZXJlbmNlcy5tanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVRMU3RvcmVcbn0gZnJvbSBcIi4vbGliL2NvbmZpZy9jcmVhdGVUTFN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlVExVc2VyIH0gZnJvbSBcIi4vbGliL2NvbmZpZy9jcmVhdGVUTFVzZXIubWpzXCI7XG5pbXBvcnQgeyBjb3JlU2hhcGVzIH0gZnJvbSBcIi4vbGliL2NvbmZpZy9kZWZhdWx0U2hhcGVzLm1qc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9BTklNQVRJT05fT1BUSU9OUywgREVGQVVMVF9DQU1FUkFfT1BUSU9OUywgU0lERVMgfSBmcm9tIFwiLi9saWIvY29uc3RhbnRzLm1qc1wiO1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSBcIi4vbGliL2VkaXRvci9FZGl0b3IubWpzXCI7XG5pbXBvcnQge1xuICBCaW5kaW5nVXRpbFxufSBmcm9tIFwiLi9saWIvZWRpdG9yL2JpbmRpbmdzL0JpbmRpbmdVdGlsLm1qc1wiO1xuaW1wb3J0IHsgQ2xpY2tNYW5hZ2VyIH0gZnJvbSBcIi4vbGliL2VkaXRvci9tYW5hZ2Vycy9DbGlja01hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBFbnZpcm9ubWVudE1hbmFnZXIgfSBmcm9tIFwiLi9saWIvZWRpdG9yL21hbmFnZXJzL0Vudmlyb25tZW50TWFuYWdlci5tanNcIjtcbmltcG9ydCB7IEhpc3RvcnlNYW5hZ2VyIH0gZnJvbSBcIi4vbGliL2VkaXRvci9tYW5hZ2Vycy9IaXN0b3J5TWFuYWdlci5tanNcIjtcbmltcG9ydCB7IFNjcmliYmxlTWFuYWdlciB9IGZyb20gXCIuL2xpYi9lZGl0b3IvbWFuYWdlcnMvU2NyaWJibGVNYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHtcbiAgQm91bmRzU25hcHNcbn0gZnJvbSBcIi4vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9Cb3VuZHNTbmFwcy5tanNcIjtcbmltcG9ydCB7IEhhbmRsZVNuYXBzIH0gZnJvbSBcIi4vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9IYW5kbGVTbmFwcy5tanNcIjtcbmltcG9ydCB7XG4gIFNuYXBNYW5hZ2VyXG59IGZyb20gXCIuL2xpYi9lZGl0b3IvbWFuYWdlcnMvU25hcE1hbmFnZXIvU25hcE1hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBUZXh0TWFuYWdlciB9IGZyb20gXCIuL2xpYi9lZGl0b3IvbWFuYWdlcnMvVGV4dE1hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBVc2VyUHJlZmVyZW5jZXNNYW5hZ2VyIH0gZnJvbSBcIi4vbGliL2VkaXRvci9tYW5hZ2Vycy9Vc2VyUHJlZmVyZW5jZXNNYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHsgQmFzZUJveFNoYXBlVXRpbCB9IGZyb20gXCIuL2xpYi9lZGl0b3Ivc2hhcGVzL0Jhc2VCb3hTaGFwZVV0aWwubWpzXCI7XG5pbXBvcnQge1xuICBTaGFwZVV0aWxcbn0gZnJvbSBcIi4vbGliL2VkaXRvci9zaGFwZXMvU2hhcGVVdGlsLm1qc1wiO1xuaW1wb3J0IHsgR3JvdXBTaGFwZVV0aWwgfSBmcm9tIFwiLi9saWIvZWRpdG9yL3NoYXBlcy9ncm91cC9Hcm91cFNoYXBlVXRpbC5tanNcIjtcbmltcG9ydCB7IHJlc2l6ZUJveCB9IGZyb20gXCIuL2xpYi9lZGl0b3Ivc2hhcGVzL3NoYXJlZC9yZXNpemVCb3gubWpzXCI7XG5pbXBvcnQgeyBCYXNlQm94U2hhcGVUb29sIH0gZnJvbSBcIi4vbGliL2VkaXRvci90b29scy9CYXNlQm94U2hhcGVUb29sL0Jhc2VCb3hTaGFwZVRvb2wubWpzXCI7XG5pbXBvcnQgeyBTdGF0ZU5vZGUgfSBmcm9tIFwiLi9saWIvZWRpdG9yL3Rvb2xzL1N0YXRlTm9kZS5tanNcIjtcbmltcG9ydCB7XG4gIHVzZVN2Z0V4cG9ydENvbnRleHRcbn0gZnJvbSBcIi4vbGliL2VkaXRvci90eXBlcy9TdmdFeHBvcnRDb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHtcbiAgRVZFTlRfTkFNRV9NQVBcbn0gZnJvbSBcIi4vbGliL2VkaXRvci90eXBlcy9ldmVudC10eXBlcy5tanNcIjtcbmltcG9ydCB7IENvbnRhaW5lclByb3ZpZGVyLCB1c2VDb250YWluZXIgfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlQ29udGFpbmVyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q3Vyc29yIH0gZnJvbSBcIi4vbGliL2hvb2tzL3VzZUN1cnNvci5tanNcIjtcbmltcG9ydCB7IEVkaXRvckNvbnRleHQsIHVzZUVkaXRvciB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3JDb21wb25lbnRzIH0gZnJvbSBcIi4vbGliL2hvb2tzL3VzZUVkaXRvckNvbXBvbmVudHMubWpzXCI7XG5pbXBvcnQgeyB1c2VFdmVudCB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VFdmVudC5tanNcIjtcbmltcG9ydCB7IHVzZVNoYWxsb3dBcnJheUlkZW50aXR5LCB1c2VTaGFsbG93T2JqZWN0SWRlbnRpdHkgfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlSWRlbnRpdHkubWpzXCI7XG5pbXBvcnQgeyB1c2VJc0Nyb3BwaW5nIH0gZnJvbSBcIi4vbGliL2hvb2tzL3VzZUlzQ3JvcHBpbmcubWpzXCI7XG5pbXBvcnQgeyB1c2VJc0RhcmtNb2RlIH0gZnJvbSBcIi4vbGliL2hvb2tzL3VzZUlzRGFya01vZGUubWpzXCI7XG5pbXBvcnQgeyB1c2VJc0VkaXRpbmcgfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlSXNFZGl0aW5nLm1qc1wiO1xuaW1wb3J0IHsgdXNlTG9jYWxTdG9yZSB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VMb2NhbFN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgdXNlUGVlcklkcyB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VQZWVySWRzLm1qc1wiO1xuaW1wb3J0IHsgdXNlUHJlc2VuY2UgfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlUHJlc2VuY2UubWpzXCI7XG5pbXBvcnQgeyB1c2VTYWZlSWQgfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlU2FmZUlkLm1qc1wiO1xuaW1wb3J0IHsgdXNlU2VsZWN0aW9uRXZlbnRzIH0gZnJvbSBcIi4vbGliL2hvb2tzL3VzZVNlbGVjdGlvbkV2ZW50cy5tanNcIjtcbmltcG9ydCB7IHVzZVRMU3RvcmUgfSBmcm9tIFwiLi9saWIvaG9va3MvdXNlVExTdG9yZS5tanNcIjtcbmltcG9ydCB7IHVzZVRyYW5zZm9ybSB9IGZyb20gXCIuL2xpYi9ob29rcy91c2VUcmFuc2Zvcm0ubWpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0VGxkcmF3T3B0aW9ucyB9IGZyb20gXCIuL2xpYi9vcHRpb25zLm1qc1wiO1xuaW1wb3J0IHtcbiAgQm94LFxuICBST1RBVEVfQ09STkVSX1RPX1NFTEVDVElPTl9DT1JORVIsXG4gIHJvdGF0ZVNlbGVjdGlvbkhhbmRsZVxufSBmcm9tIFwiLi9saWIvcHJpbWl0aXZlcy9Cb3gubWpzXCI7XG5pbXBvcnQgeyBNYXQgfSBmcm9tIFwiLi9saWIvcHJpbWl0aXZlcy9NYXQubWpzXCI7XG5pbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi9saWIvcHJpbWl0aXZlcy9WZWMubWpzXCI7XG5pbXBvcnQgeyBFQVNJTkdTIH0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvZWFzaW5ncy5tanNcIjtcbmltcG9ydCB7IEFyYzJkIH0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQXJjMmQubWpzXCI7XG5pbXBvcnQgeyBDaXJjbGUyZCB9IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L0NpcmNsZTJkLm1qc1wiO1xuaW1wb3J0IHsgQ3ViaWNCZXppZXIyZCB9IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L0N1YmljQmV6aWVyMmQubWpzXCI7XG5pbXBvcnQgeyBDdWJpY1NwbGluZTJkIH0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQ3ViaWNTcGxpbmUyZC5tanNcIjtcbmltcG9ydCB7IEVkZ2UyZCB9IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L0VkZ2UyZC5tanNcIjtcbmltcG9ydCB7IEVsbGlwc2UyZCB9IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L0VsbGlwc2UyZC5tanNcIjtcbmltcG9ydCB7IEdlb21ldHJ5MmQgfSBmcm9tIFwiLi9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9HZW9tZXRyeTJkLm1qc1wiO1xuaW1wb3J0IHsgR3JvdXAyZCB9IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L0dyb3VwMmQubWpzXCI7XG5pbXBvcnQgeyBQb2ludDJkIH0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUG9pbnQyZC5tanNcIjtcbmltcG9ydCB7IFBvbHlnb24yZCB9IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L1BvbHlnb24yZC5tanNcIjtcbmltcG9ydCB7IFBvbHlsaW5lMmQgfSBmcm9tIFwiLi9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9Qb2x5bGluZTJkLm1qc1wiO1xuaW1wb3J0IHsgUmVjdGFuZ2xlMmQgfSBmcm9tIFwiLi9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9SZWN0YW5nbGUyZC5tanNcIjtcbmltcG9ydCB7IFN0YWRpdW0yZCB9IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L1N0YWRpdW0yZC5tanNcIjtcbmltcG9ydCB7XG4gIGludGVyc2VjdENpcmNsZUNpcmNsZSxcbiAgaW50ZXJzZWN0Q2lyY2xlUG9seWdvbixcbiAgaW50ZXJzZWN0Q2lyY2xlUG9seWxpbmUsXG4gIGludGVyc2VjdExpbmVTZWdtZW50Q2lyY2xlLFxuICBpbnRlcnNlY3RMaW5lU2VnbWVudExpbmVTZWdtZW50LFxuICBpbnRlcnNlY3RMaW5lU2VnbWVudFBvbHlnb24sXG4gIGludGVyc2VjdExpbmVTZWdtZW50UG9seWxpbmUsXG4gIGludGVyc2VjdFBvbHlnb25Cb3VuZHMsXG4gIGludGVyc2VjdFBvbHlnb25Qb2x5Z29uLFxuICBsaW5lc0ludGVyc2VjdCxcbiAgcG9seWdvbkludGVyc2VjdHNQb2x5bGluZSxcbiAgcG9seWdvbnNJbnRlcnNlY3Rcbn0gZnJvbSBcIi4vbGliL3ByaW1pdGl2ZXMvaW50ZXJzZWN0Lm1qc1wiO1xuaW1wb3J0IHtcbiAgSEFMRl9QSSxcbiAgUEksXG4gIFBJMixcbiAgU0lOLFxuICBhbmdsZURpc3RhbmNlLFxuICBhcHByb3hpbWF0ZWx5LFxuICBhcmVBbmdsZXNDb21wYXRpYmxlLFxuICBhdmVyYWdlLFxuICBjYW5vbmljYWxpemVSb3RhdGlvbixcbiAgY2VudGVyT2ZDaXJjbGVGcm9tVGhyZWVQb2ludHMsXG4gIGNsYW1wLFxuICBjbGFtcFJhZGlhbnMsXG4gIGNsb2Nrd2lzZUFuZ2xlRGlzdCxcbiAgY291bnRlckNsb2Nrd2lzZUFuZ2xlRGlzdCxcbiAgZGVncmVlc1RvUmFkaWFucyxcbiAgZ2V0QXJjTWVhc3VyZSxcbiAgZ2V0UG9pbnRJbkFyY1QsXG4gIGdldFBvaW50T25DaXJjbGUsXG4gIGdldFBvaW50c09uQXJjLFxuICBnZXRQb2x5Z29uVmVydGljZXMsXG4gIGlzU2FmZUZsb2F0LFxuICBwZXJpbWV0ZXJPZkVsbGlwc2UsXG4gIHBvaW50SW5Qb2x5Z29uLFxuICBwcmVjaXNlLFxuICByYWRpYW5zVG9EZWdyZWVzLFxuICByYW5nZUludGVyc2VjdGlvbixcbiAgc2hvcnRBbmdsZURpc3QsXG4gIHNuYXBBbmdsZSxcbiAgdG9Eb21QcmVjaXNpb24sXG4gIHRvRml4ZWQsXG4gIHRvUHJlY2lzaW9uXG59IGZyb20gXCIuL2xpYi9wcmltaXRpdmVzL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHtcbiAgUmVhZG9ubHlTaGFyZWRTdHlsZU1hcCxcbiAgU2hhcmVkU3R5bGVNYXBcbn0gZnJvbSBcIi4vbGliL3V0aWxzL1NoYXJlZFN0eWxlc01hcC5tanNcIjtcbmltcG9ydCB7IGRhdGFVcmxUb0ZpbGUgfSBmcm9tIFwiLi9saWIvdXRpbHMvYXNzZXRzLm1qc1wiO1xuaW1wb3J0IHtcbiAgZGVidWdGbGFncyxcbiAgZmVhdHVyZUZsYWdzXG59IGZyb20gXCIuL2xpYi91dGlscy9kZWJ1Zy1mbGFncy5tanNcIjtcbmltcG9ydCB7XG4gIGxvb3BUb0h0bWxFbGVtZW50LFxuICBwcmV2ZW50RGVmYXVsdCxcbiAgcmVsZWFzZVBvaW50ZXJDYXB0dXJlLFxuICBzZXRQb2ludGVyQ2FwdHVyZSxcbiAgc3RvcEV2ZW50UHJvcGFnYXRpb25cbn0gZnJvbSBcIi4vbGliL3V0aWxzL2RvbS5tanNcIjtcbmltcG9ydCB7IG1vdmVDYW1lcmFXaGVuQ2xvc2VUb0VkZ2UgfSBmcm9tIFwiLi9saWIvdXRpbHMvZWRnZVNjcm9sbGluZy5tanNcIjtcbmltcG9ydCB7IGdldEluY3JlbWVudGVkTmFtZSB9IGZyb20gXCIuL2xpYi91dGlscy9nZXRJbmNyZW1lbnRlZE5hbWUubWpzXCI7XG5pbXBvcnQgeyBnZXRQb2ludGVySW5mbyB9IGZyb20gXCIuL2xpYi91dGlscy9nZXRQb2ludGVySW5mby5tanNcIjtcbmltcG9ydCB7IGdldFN2Z1BhdGhGcm9tUG9pbnRzIH0gZnJvbSBcIi4vbGliL3V0aWxzL2dldFN2Z1BhdGhGcm9tUG9pbnRzLm1qc1wiO1xuaW1wb3J0IHsgaGFyZFJlc2V0RWRpdG9yIH0gZnJvbSBcIi4vbGliL3V0aWxzL2hhcmRSZXNldEVkaXRvci5tanNcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZVdoZWVsIH0gZnJvbSBcIi4vbGliL3V0aWxzL25vcm1hbGl6ZVdoZWVsLm1qc1wiO1xuaW1wb3J0IHsgcmVmcmVzaFBhZ2UgfSBmcm9tIFwiLi9saWIvdXRpbHMvcmVmcmVzaFBhZ2UubWpzXCI7XG5pbXBvcnQge1xuICBhcHBseVJvdGF0aW9uVG9TbmFwc2hvdFNoYXBlcyxcbiAgZ2V0Um90YXRpb25TbmFwc2hvdFxufSBmcm9tIFwiLi9saWIvdXRpbHMvcm90YXRpb24ubWpzXCI7XG5pbXBvcnQgeyBydW50aW1lLCBzZXRSdW50aW1lT3ZlcnJpZGVzIH0gZnJvbSBcIi4vbGliL3V0aWxzL3J1bnRpbWUubWpzXCI7XG5pbXBvcnQgeyBoYXJkUmVzZXQgfSBmcm9tIFwiLi9saWIvdXRpbHMvc3luYy9oYXJkUmVzZXQubWpzXCI7XG5pbXBvcnQgeyB1bmlxIH0gZnJvbSBcIi4vbGliL3V0aWxzL3VuaXEubWpzXCI7XG5pbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gXCIuL2xpYi91dGlscy91bmlxdWVJZC5tanNcIjtcbmltcG9ydCB7IG9wZW5XaW5kb3cgfSBmcm9tIFwiLi9saWIvdXRpbHMvd2luZG93LW9wZW4ubWpzXCI7XG5leHBvcnQge1xuICBBcmMyZCxcbiAgQmFzZUJveFNoYXBlVG9vbCxcbiAgQmFzZUJveFNoYXBlVXRpbCxcbiAgQmluZGluZ1V0aWwsXG4gIEJvdW5kc1NuYXBzLFxuICBCb3gsXG4gIENpcmNsZTJkLFxuICBDbGlja01hbmFnZXIsXG4gIENvbnRhaW5lclByb3ZpZGVyLFxuICBDdWJpY0JlemllcjJkLFxuICBDdWJpY1NwbGluZTJkLFxuICBERUZBVUxUX0FOSU1BVElPTl9PUFRJT05TLFxuICBERUZBVUxUX0NBTUVSQV9PUFRJT05TLFxuICBEZWZhdWx0QmFja2dyb3VuZCxcbiAgRGVmYXVsdEJydXNoLFxuICBEZWZhdWx0Q2FudmFzLFxuICBEZWZhdWx0Q29sbGFib3JhdG9ySGludCxcbiAgRGVmYXVsdEN1cnNvcixcbiAgRGVmYXVsdEVycm9yRmFsbGJhY2ssXG4gIERlZmF1bHRHcmlkLFxuICBEZWZhdWx0SGFuZGxlLFxuICBEZWZhdWx0SGFuZGxlcyxcbiAgRGVmYXVsdFNjcmliYmxlLFxuICBEZWZhdWx0U2VsZWN0aW9uQmFja2dyb3VuZCxcbiAgRGVmYXVsdFNlbGVjdGlvbkZvcmVncm91bmQsXG4gIERlZmF1bHRTaGFwZUluZGljYXRvcixcbiAgRGVmYXVsdFNuYXBJbmRpY2F0b3IsXG4gIERlZmF1bHRTcGlubmVyLFxuICBEZWZhdWx0U3ZnRGVmcyxcbiAgRUFTSU5HUyxcbiAgRU1QVFlfQVJSQVksXG4gIEVWRU5UX05BTUVfTUFQLFxuICBFZGdlMmQsXG4gIEVkaXRvcixcbiAgRWRpdG9yQ29udGV4dCxcbiAgRWxsaXBzZTJkLFxuICBFbnZpcm9ubWVudE1hbmFnZXIsXG4gIEVycm9yQm91bmRhcnksXG4gIEVycm9yU2NyZWVuLFxuICBHZW9tZXRyeTJkLFxuICBHcm91cDJkLFxuICBHcm91cFNoYXBlVXRpbCxcbiAgSEFMRl9QSSxcbiAgSFRNTENvbnRhaW5lcixcbiAgSGFuZGxlU25hcHMsXG4gIEhpc3RvcnlNYW5hZ2VyLFxuICBMb2FkaW5nU2NyZWVuLFxuICBNYXQsXG4gIE9wdGlvbmFsRXJyb3JCb3VuZGFyeSxcbiAgUEksXG4gIFBJMixcbiAgUG9pbnQyZCxcbiAgUG9seWdvbjJkLFxuICBQb2x5bGluZTJkLFxuICBST1RBVEVfQ09STkVSX1RPX1NFTEVDVElPTl9DT1JORVIsXG4gIFJlYWRvbmx5U2hhcmVkU3R5bGVNYXAsXG4gIFJlY3RhbmdsZTJkLFxuICBTSURFUyxcbiAgU0lOLFxuICBTVkdDb250YWluZXIsXG4gIFNjcmliYmxlTWFuYWdlcixcbiAgU2hhcGVVdGlsLFxuICBTaGFyZWRTdHlsZU1hcCxcbiAgU25hcE1hbmFnZXIsXG4gIFN0YWRpdW0yZCxcbiAgU3RhdGVOb2RlLFxuICBUQUJfSUQsXG4gIFRleHRNYW5hZ2VyLFxuICBUbGRyYXdFZGl0b3IsXG4gIFVTRVJfQ09MT1JTLFxuICBVc2VyUHJlZmVyZW5jZXNNYW5hZ2VyLFxuICBWZWMsXG4gIGFuZ2xlRGlzdGFuY2UsXG4gIGFwcGx5Um90YXRpb25Ub1NuYXBzaG90U2hhcGVzLFxuICBhcHByb3hpbWF0ZWx5LFxuICBhcmVBbmdsZXNDb21wYXRpYmxlLFxuICBhdG9tLFxuICBhdmVyYWdlLFxuICBjYW5vbmljYWxpemVSb3RhdGlvbixcbiAgY2VudGVyT2ZDaXJjbGVGcm9tVGhyZWVQb2ludHMsXG4gIGNsYW1wLFxuICBjbGFtcFJhZGlhbnMsXG4gIGNsb2Nrd2lzZUFuZ2xlRGlzdCxcbiAgY29tcHV0ZWQsXG4gIGNvcmVTaGFwZXMsXG4gIGNvdW50ZXJDbG9ja3dpc2VBbmdsZURpc3QsXG4gIGNyZWF0ZVNlc3Npb25TdGF0ZVNuYXBzaG90U2lnbmFsLFxuICBjcmVhdGVUTFN0b3JlLFxuICBjcmVhdGVUTFVzZXIsXG4gIGRhdGFVcmxUb0ZpbGUsXG4gIGRlYnVnRmxhZ3MsXG4gIGRlZmF1bHRUbGRyYXdPcHRpb25zLFxuICBkZWZhdWx0VXNlclByZWZlcmVuY2VzLFxuICBkZWdyZWVzVG9SYWRpYW5zLFxuICBleHRyYWN0U2Vzc2lvblN0YXRlRnJvbUxlZ2FjeVNuYXBzaG90LFxuICBmZWF0dXJlRmxhZ3MsXG4gIGdldEFyY01lYXN1cmUsXG4gIGdldEN1cnNvcixcbiAgZ2V0RnJlc2hVc2VyUHJlZmVyZW5jZXMsXG4gIGdldEluY3JlbWVudGVkTmFtZSxcbiAgZ2V0UG9pbnRJbkFyY1QsXG4gIGdldFBvaW50T25DaXJjbGUsXG4gIGdldFBvaW50ZXJJbmZvLFxuICBnZXRQb2ludHNPbkFyYyxcbiAgZ2V0UG9seWdvblZlcnRpY2VzLFxuICBnZXRSb3RhdGlvblNuYXBzaG90LFxuICBnZXRTbmFwc2hvdCxcbiAgZ2V0U3ZnUGF0aEZyb21Qb2ludHMsXG4gIGdldFVzZXJQcmVmZXJlbmNlcyxcbiAgaGFyZFJlc2V0LFxuICBoYXJkUmVzZXRFZGl0b3IsXG4gIGludGVyc2VjdENpcmNsZUNpcmNsZSxcbiAgaW50ZXJzZWN0Q2lyY2xlUG9seWdvbixcbiAgaW50ZXJzZWN0Q2lyY2xlUG9seWxpbmUsXG4gIGludGVyc2VjdExpbmVTZWdtZW50Q2lyY2xlLFxuICBpbnRlcnNlY3RMaW5lU2VnbWVudExpbmVTZWdtZW50LFxuICBpbnRlcnNlY3RMaW5lU2VnbWVudFBvbHlnb24sXG4gIGludGVyc2VjdExpbmVTZWdtZW50UG9seWxpbmUsXG4gIGludGVyc2VjdFBvbHlnb25Cb3VuZHMsXG4gIGludGVyc2VjdFBvbHlnb25Qb2x5Z29uLFxuICBpc1NhZmVGbG9hdCxcbiAgbGluZXNJbnRlcnNlY3QsXG4gIGxvYWRTZXNzaW9uU3RhdGVTbmFwc2hvdEludG9TdG9yZSxcbiAgbG9hZFNuYXBzaG90LFxuICBsb29wVG9IdG1sRWxlbWVudCxcbiAgbW92ZUNhbWVyYVdoZW5DbG9zZVRvRWRnZSxcbiAgbm9ybWFsaXplV2hlZWwsXG4gIG9wZW5XaW5kb3csXG4gIHBlcmltZXRlck9mRWxsaXBzZSxcbiAgcG9pbnRJblBvbHlnb24sXG4gIHBvbHlnb25JbnRlcnNlY3RzUG9seWxpbmUsXG4gIHBvbHlnb25zSW50ZXJzZWN0LFxuICBwcmVjaXNlLFxuICBwcmV2ZW50RGVmYXVsdCxcbiAgcmFkaWFuc1RvRGVncmVlcyxcbiAgcmFuZ2VJbnRlcnNlY3Rpb24sXG4gIHJlYWN0LFxuICByZWZyZXNoUGFnZSxcbiAgcmVsZWFzZVBvaW50ZXJDYXB0dXJlLFxuICByZXNpemVCb3gsXG4gIHJvdGF0ZVNlbGVjdGlvbkhhbmRsZSxcbiAgcnVudGltZSxcbiAgc2V0UG9pbnRlckNhcHR1cmUsXG4gIHNldFJ1bnRpbWVPdmVycmlkZXMsXG4gIHNldFVzZXJQcmVmZXJlbmNlcyxcbiAgc2hvcnRBbmdsZURpc3QsXG4gIHNuYXBBbmdsZSxcbiAgc3RvcEV2ZW50UHJvcGFnYXRpb24sXG4gIHRvRG9tUHJlY2lzaW9uLFxuICB0b0ZpeGVkLFxuICB0b1ByZWNpc2lvbixcbiAgdHJhY2ssXG4gIHRyYW5zYWN0LFxuICB0cmFuc2FjdGlvbixcbiAgdW5pcSxcbiAgdW5pcXVlSWQsXG4gIHVzZUNvbXB1dGVkLFxuICB1c2VDb250YWluZXIsXG4gIHVzZUVkaXRvcixcbiAgdXNlRWRpdG9yQ29tcG9uZW50cyxcbiAgdXNlRXZlbnQsXG4gIHVzZUlzQ3JvcHBpbmcsXG4gIHVzZUlzRGFya01vZGUsXG4gIHVzZUlzRWRpdGluZyxcbiAgdXNlTG9jYWxTdG9yZSxcbiAgdXNlUGVlcklkcyxcbiAgdXNlUHJlc2VuY2UsXG4gIHVzZVF1aWNrUmVhY3RvcixcbiAgdXNlUmVhY3RvcixcbiAgdXNlU2FmZUlkLFxuICB1c2VTZWxlY3Rpb25FdmVudHMsXG4gIHVzZVNoYWxsb3dBcnJheUlkZW50aXR5LFxuICB1c2VTaGFsbG93T2JqZWN0SWRlbnRpdHksXG4gIHVzZVN2Z0V4cG9ydENvbnRleHQsXG4gIHVzZVRMU3RvcmUsXG4gIHVzZVRyYW5zZm9ybSxcbiAgdXNlVmFsdWUsXG4gIHdoeUFtSVJ1bm5pbmdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/TldrawEditor.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/TldrawEditor.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrorScreen: () => (/* binding */ ErrorScreen),\n/* harmony export */   LoadingScreen: () => (/* binding */ LoadingScreen),\n/* harmony export */   TldrawEditor: () => (/* binding */ TldrawEditor)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var _components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/ErrorBoundary.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\");\n/* harmony import */ var _components_default_components_DefaultErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/default-components/DefaultErrorFallback.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultErrorFallback.mjs\");\n/* harmony import */ var _config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./config/createTLUser.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLUser.mjs\");\n/* harmony import */ var _editor_Editor_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./editor/Editor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/Editor.mjs\");\n/* harmony import */ var _hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./hooks/useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _hooks_useCursor_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./hooks/useCursor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCursor.mjs\");\n/* harmony import */ var _hooks_useDarkMode_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./hooks/useDarkMode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDarkMode.mjs\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _hooks_useEvent_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./hooks/useEvent.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEvent.mjs\");\n/* harmony import */ var _hooks_useForceUpdate_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./hooks/useForceUpdate.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useForceUpdate.mjs\");\n/* harmony import */ var _hooks_useLocalStore_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./hooks/useLocalStore.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useLocalStore.mjs\");\n/* harmony import */ var _hooks_useZoomCss_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./hooks/useZoomCss.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useZoomCss.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst EMPTY_SHAPE_UTILS_ARRAY = [];\nconst EMPTY_BINDING_UTILS_ARRAY = [];\nconst EMPTY_TOOLS_ARRAY = [];\nconst TldrawEditor = (0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(function TldrawEditor2({\n  store,\n  components,\n  className,\n  user: _user,\n  ...rest\n}) {\n  const [container, setContainer] = react__WEBPACK_IMPORTED_MODULE_3__.useState(null);\n  const user = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => _user ?? (0,_config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_7__.createTLUser)(), [_user]);\n  const ErrorFallback = components?.ErrorFallback === void 0 ? _components_default_components_DefaultErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultErrorFallback : components?.ErrorFallback;\n  const withDefaults = {\n    ...rest,\n    shapeUtils: rest.shapeUtils ?? EMPTY_SHAPE_UTILS_ARRAY,\n    bindingUtils: rest.bindingUtils ?? EMPTY_BINDING_UTILS_ARRAY,\n    tools: rest.tools ?? EMPTY_TOOLS_ARRAY,\n    components\n  };\n  return (\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"div\",\n      {\n        ref: setContainer,\n        draggable: false,\n        className: classnames__WEBPACK_IMPORTED_MODULE_4__(\"tl-container tl-theme__light\", className),\n        onPointerDown: _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_18__.stopEventPropagation,\n        tabIndex: -1,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          _components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_5__.OptionalErrorBoundary,\n          {\n            fallback: ErrorFallback,\n            onError: (error) => (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.annotateError)(error, { tags: { origin: \"react.tldraw-before-app\" } }),\n            children: container && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_9__.ContainerProvider, { container, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_13__.EditorComponentsProvider, { overrides: components, children: store ? store instanceof _tldraw_store__WEBPACK_IMPORTED_MODULE_1__.Store ? (\n              // Store is ready to go, whether externally synced or not\n              /* @__PURE__ */ ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TldrawEditorWithReadyStore, { ...withDefaults, store, user }))\n            ) : (\n              // Store is a synced store, so handle syncing stages internally\n              /* @__PURE__ */ ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TldrawEditorWithLoadingStore, { ...withDefaults, store, user }))\n            ) : (\n              // We have no store (it's undefined) so create one and possibly sync it\n              /* @__PURE__ */ ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TldrawEditorWithOwnStore, { ...withDefaults, store, user }))\n            ) }) })\n          }\n        )\n      }\n    )\n  );\n});\nfunction TldrawEditorWithOwnStore(props) {\n  const {\n    defaultName,\n    snapshot,\n    initialData,\n    shapeUtils,\n    bindingUtils,\n    persistenceKey,\n    sessionId,\n    user\n  } = props;\n  const syncedStore = (0,_hooks_useLocalStore_mjs__WEBPACK_IMPORTED_MODULE_16__.useLocalStore)({\n    shapeUtils,\n    bindingUtils,\n    initialData,\n    persistenceKey,\n    sessionId,\n    defaultName,\n    snapshot\n  });\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TldrawEditorWithLoadingStore, { ...props, store: syncedStore, user });\n}\nconst TldrawEditorWithLoadingStore = (0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(function TldrawEditorBeforeLoading({\n  store,\n  user,\n  ...rest\n}) {\n  const container = (0,_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_9__.useContainer)();\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(() => {\n    if (user.userPreferences.get().isDarkMode) {\n      container.classList.remove(\"tl-theme__light\");\n      container.classList.add(\"tl-theme__dark\");\n    }\n  }, [container, user]);\n  const { LoadingScreen: LoadingScreen2 } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_13__.useEditorComponents)();\n  switch (store.status) {\n    case \"error\": {\n      throw store.error;\n    }\n    case \"loading\": {\n      return LoadingScreen2 ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingScreen2, {}) : null;\n    }\n    case \"not-synced\": {\n      break;\n    }\n    case \"synced-local\": {\n      break;\n    }\n    case \"synced-remote\": {\n      break;\n    }\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TldrawEditorWithReadyStore, { ...rest, store: store.store, user });\n});\nfunction TldrawEditorWithReadyStore({\n  onMount,\n  children,\n  store,\n  tools,\n  shapeUtils,\n  bindingUtils,\n  user,\n  initialState,\n  autoFocus = true,\n  inferDarkMode,\n  cameraOptions,\n  options\n}) {\n  const { ErrorFallback } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_13__.useEditorComponents)();\n  const container = (0,_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_9__.useContainer)();\n  const editorRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  const [renderEditor, setRenderEditor] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n  const editor = editorRef.current;\n  if (renderEditor !== editor) {\n    setRenderEditor(editor);\n  }\n  const [initialAutoFocus] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(autoFocus);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(() => {\n    const editor2 = new _editor_Editor_mjs__WEBPACK_IMPORTED_MODULE_8__.Editor({\n      store,\n      shapeUtils,\n      bindingUtils,\n      tools,\n      getContainer: () => container,\n      user,\n      initialState,\n      autoFocus: initialAutoFocus,\n      inferDarkMode,\n      cameraOptions,\n      options\n    });\n    editorRef.current = editor2;\n    setRenderEditor(editor2);\n    return () => {\n      editor2.dispose();\n    };\n  }, [\n    container,\n    shapeUtils,\n    bindingUtils,\n    tools,\n    store,\n    user,\n    initialState,\n    initialAutoFocus,\n    inferDarkMode,\n    cameraOptions,\n    options\n  ]);\n  const crashingError = (0,react__WEBPACK_IMPORTED_MODULE_3__.useSyncExternalStore)(\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(\n      (onStoreChange) => {\n        if (editor) {\n          editor.on(\"crash\", onStoreChange);\n          return () => editor.off(\"crash\", onStoreChange);\n        }\n        return () => {\n        };\n      },\n      [editor]\n    ),\n    () => editor?.getCrashingError() ?? null\n  );\n  const { Canvas } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_13__.useEditorComponents)();\n  if (!editor) {\n    return null;\n  }\n  return (\n    // the top-level tldraw component also renders an error boundary almost\n    // identical to this one. the reason we have two is because this one has\n    // access to `App`, which means that here we can enrich errors with data\n    // from app for reporting, and also still attempt to render the user's\n    // document in the event of an error to reassure them that their work is\n    // not lost.\n    /* @__PURE__ */ ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_5__.OptionalErrorBoundary, {\n      fallback: ErrorFallback,\n      onError: (error) => editor.annotateError(error, { origin: \"react.tldraw\", willCrashApp: true }),\n      children: crashingError ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Crash, { crashingError }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_12__.EditorContext.Provider, { value: editor, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Layout, { onMount, children: children ?? (Canvas ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Canvas, {}) : null) }) })\n    }))\n  );\n}\nfunction Layout({ children, onMount }) {\n  (0,_hooks_useZoomCss_mjs__WEBPACK_IMPORTED_MODULE_17__.useZoomCss)();\n  (0,_hooks_useCursor_mjs__WEBPACK_IMPORTED_MODULE_10__.useCursor)();\n  (0,_hooks_useDarkMode_mjs__WEBPACK_IMPORTED_MODULE_11__.useDarkMode)();\n  (0,_hooks_useForceUpdate_mjs__WEBPACK_IMPORTED_MODULE_15__.useForceUpdate)();\n  useOnMount(onMount);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children });\n}\nfunction Crash({ crashingError }) {\n  throw crashingError;\n}\nfunction LoadingScreen({ children }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-loading\", children });\n}\nfunction ErrorScreen({ children }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-loading\", children });\n}\nfunction useOnMount(onMount) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_12__.useEditor)();\n  const onMountEvent = (0,_hooks_useEvent_mjs__WEBPACK_IMPORTED_MODULE_14__.useEvent)((editor2) => {\n    let teardown = void 0;\n    editor2.history.ignore(() => {\n      teardown = onMount?.(editor2);\n      editor2.emit(\"mount\");\n    });\n    window.tldrawReady = true;\n    return teardown;\n  });\n  react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect(() => {\n    if (editor)\n      return onMountEvent?.(editor);\n  }, [editor, onMountEvent]);\n}\n\n//# sourceMappingURL=TldrawEditor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL1RsZHJhd0VkaXRvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFrRDtBQUNaO0FBQ1E7QUFTL0I7QUFDcUI7QUFDbUM7QUFDeUI7QUFDdkM7QUFDWjtBQUM4QjtBQUN6QjtBQUNJO0FBQ1c7QUFJeEI7QUFDTztBQUNZO0FBQ0Y7QUFDTjtBQUNHO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwyQ0FBSTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELG9DQUFvQywyQ0FBYztBQUNsRCxlQUFlLDhDQUFPLGdCQUFnQixzRUFBWTtBQUNsRCwrREFBK0QseUdBQW9CO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0RBQUc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsdUNBQVU7QUFDN0IsdUJBQXVCLGlFQUFvQjtBQUMzQztBQUNBLGtDQUFrQyxzREFBRztBQUNyQyxVQUFVLGdGQUFxQjtBQUMvQjtBQUNBO0FBQ0EsZ0NBQWdDLDREQUFhLFVBQVUsUUFBUSxxQ0FBcUM7QUFDcEcsbURBQW1ELHNEQUFHLENBQUMsc0VBQWlCLElBQUkscUNBQXFDLHNEQUFHLENBQUMscUZBQXdCLElBQUksMERBQTBELGdEQUFLO0FBQ2hOO0FBQ0EsK0JBQStCLHNEQUFHLCtCQUErQiw4QkFBOEI7QUFDL0Y7QUFDQTtBQUNBLCtCQUErQixzREFBRyxpQ0FBaUMsOEJBQThCO0FBQ2pHO0FBQ0E7QUFDQSwrQkFBK0Isc0RBQUcsNkJBQTZCLDhCQUE4QjtBQUM3RixlQUFlLEdBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixzQkFBc0Isd0VBQWE7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gseUJBQXlCLHNEQUFHLGlDQUFpQyxvQ0FBb0M7QUFDakc7QUFDQSxxQ0FBcUMsMkNBQUk7QUFDekM7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELG9CQUFvQixxRUFBWTtBQUNoQyxFQUFFLHNEQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFVBQVUsZ0NBQWdDLEVBQUUsb0ZBQW1CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsc0RBQUcsbUJBQW1CO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsc0RBQUcsK0JBQStCLG1DQUFtQztBQUM5RixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsVUFBVSxnQkFBZ0IsRUFBRSxvRkFBbUI7QUFDL0Msb0JBQW9CLHFFQUFZO0FBQ2hDLG9CQUFvQiw2Q0FBTTtBQUMxQiwwQ0FBMEMsK0NBQVE7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsK0NBQVE7QUFDckMsRUFBRSxzREFBZTtBQUNqQix3QkFBd0Isc0RBQU07QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyREFBb0I7QUFDNUMsSUFBSSxrREFBVztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxTQUFTLEVBQUUsb0ZBQW1CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNEQUFHLENBQUMsZ0ZBQXFCO0FBQzlDO0FBQ0Esd0RBQXdELDRDQUE0QztBQUNwRyxnREFBZ0Qsc0RBQUcsVUFBVSxlQUFlLG9CQUFvQixzREFBRyxDQUFDLGdFQUFhLGFBQWEseUNBQXlDLHNEQUFHLFdBQVcseURBQXlELHNEQUFHLFdBQVcsV0FBVyxHQUFHO0FBQzFRLEtBQUs7QUFDTDtBQUNBO0FBQ0Esa0JBQWtCLG1CQUFtQjtBQUNyQyxFQUFFLGtFQUFVO0FBQ1osRUFBRSxnRUFBUztBQUNYLEVBQUUsb0VBQVc7QUFDYixFQUFFLDBFQUFjO0FBQ2hCO0FBQ0EseUJBQXlCLHNEQUFHLENBQUMsdURBQVEsSUFBSSxVQUFVO0FBQ25EO0FBQ0EsaUJBQWlCLGVBQWU7QUFDaEM7QUFDQTtBQUNBLHlCQUF5QixVQUFVO0FBQ25DLHlCQUF5QixzREFBRyxVQUFVLG1DQUFtQztBQUN6RTtBQUNBLHVCQUF1QixVQUFVO0FBQ2pDLHlCQUF5QixzREFBRyxVQUFVLG1DQUFtQztBQUN6RTtBQUNBO0FBQ0EsaUJBQWlCLGdFQUFTO0FBQzFCLHVCQUF1Qiw4REFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsa0RBQXFCO0FBQ3ZCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFLRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9UbGRyYXdFZGl0b3IubWpzPzUxNDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRnJhZ21lbnQsIGpzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgU3RvcmUgfSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgYW5ub3RhdGVFcnJvciB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgUmVhY3QsIHtcbiAgbWVtbyxcbiAgdXNlQ2FsbGJhY2ssXG4gIHVzZUxheW91dEVmZmVjdCxcbiAgdXNlTWVtbyxcbiAgdXNlUmVmLFxuICB1c2VTdGF0ZSxcbiAgdXNlU3luY0V4dGVybmFsU3RvcmVcbn0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xuaW1wb3J0IHsgT3B0aW9uYWxFcnJvckJvdW5kYXJ5IH0gZnJvbSBcIi4vY29tcG9uZW50cy9FcnJvckJvdW5kYXJ5Lm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdEVycm9yRmFsbGJhY2sgfSBmcm9tIFwiLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0RXJyb3JGYWxsYmFjay5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVRMVXNlciB9IGZyb20gXCIuL2NvbmZpZy9jcmVhdGVUTFVzZXIubWpzXCI7XG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tIFwiLi9lZGl0b3IvRWRpdG9yLm1qc1wiO1xuaW1wb3J0IHsgQ29udGFpbmVyUHJvdmlkZXIsIHVzZUNvbnRhaW5lciB9IGZyb20gXCIuL2hvb2tzL3VzZUNvbnRhaW5lci5tanNcIjtcbmltcG9ydCB7IHVzZUN1cnNvciB9IGZyb20gXCIuL2hvb2tzL3VzZUN1cnNvci5tanNcIjtcbmltcG9ydCB7IHVzZURhcmtNb2RlIH0gZnJvbSBcIi4vaG9va3MvdXNlRGFya01vZGUubWpzXCI7XG5pbXBvcnQgeyBFZGl0b3JDb250ZXh0LCB1c2VFZGl0b3IgfSBmcm9tIFwiLi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5pbXBvcnQge1xuICBFZGl0b3JDb21wb25lbnRzUHJvdmlkZXIsXG4gIHVzZUVkaXRvckNvbXBvbmVudHNcbn0gZnJvbSBcIi4vaG9va3MvdXNlRWRpdG9yQ29tcG9uZW50cy5tanNcIjtcbmltcG9ydCB7IHVzZUV2ZW50IH0gZnJvbSBcIi4vaG9va3MvdXNlRXZlbnQubWpzXCI7XG5pbXBvcnQgeyB1c2VGb3JjZVVwZGF0ZSB9IGZyb20gXCIuL2hvb2tzL3VzZUZvcmNlVXBkYXRlLm1qc1wiO1xuaW1wb3J0IHsgdXNlTG9jYWxTdG9yZSB9IGZyb20gXCIuL2hvb2tzL3VzZUxvY2FsU3RvcmUubWpzXCI7XG5pbXBvcnQgeyB1c2Vab29tQ3NzIH0gZnJvbSBcIi4vaG9va3MvdXNlWm9vbUNzcy5tanNcIjtcbmltcG9ydCB7IHN0b3BFdmVudFByb3BhZ2F0aW9uIH0gZnJvbSBcIi4vdXRpbHMvZG9tLm1qc1wiO1xuY29uc3QgRU1QVFlfU0hBUEVfVVRJTFNfQVJSQVkgPSBbXTtcbmNvbnN0IEVNUFRZX0JJTkRJTkdfVVRJTFNfQVJSQVkgPSBbXTtcbmNvbnN0IEVNUFRZX1RPT0xTX0FSUkFZID0gW107XG5jb25zdCBUbGRyYXdFZGl0b3IgPSBtZW1vKGZ1bmN0aW9uIFRsZHJhd0VkaXRvcjIoe1xuICBzdG9yZSxcbiAgY29tcG9uZW50cyxcbiAgY2xhc3NOYW1lLFxuICB1c2VyOiBfdXNlcixcbiAgLi4ucmVzdFxufSkge1xuICBjb25zdCBbY29udGFpbmVyLCBzZXRDb250YWluZXJdID0gUmVhY3QudXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IHVzZXIgPSB1c2VNZW1vKCgpID0+IF91c2VyID8/IGNyZWF0ZVRMVXNlcigpLCBbX3VzZXJdKTtcbiAgY29uc3QgRXJyb3JGYWxsYmFjayA9IGNvbXBvbmVudHM/LkVycm9yRmFsbGJhY2sgPT09IHZvaWQgMCA/IERlZmF1bHRFcnJvckZhbGxiYWNrIDogY29tcG9uZW50cz8uRXJyb3JGYWxsYmFjaztcbiAgY29uc3Qgd2l0aERlZmF1bHRzID0ge1xuICAgIC4uLnJlc3QsXG4gICAgc2hhcGVVdGlsczogcmVzdC5zaGFwZVV0aWxzID8/IEVNUFRZX1NIQVBFX1VUSUxTX0FSUkFZLFxuICAgIGJpbmRpbmdVdGlsczogcmVzdC5iaW5kaW5nVXRpbHMgPz8gRU1QVFlfQklORElOR19VVElMU19BUlJBWSxcbiAgICB0b29sczogcmVzdC50b29scyA/PyBFTVBUWV9UT09MU19BUlJBWSxcbiAgICBjb21wb25lbnRzXG4gIH07XG4gIHJldHVybiAoXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7XG4gICAgICAgIHJlZjogc2V0Q29udGFpbmVyLFxuICAgICAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0bC1jb250YWluZXIgdGwtdGhlbWVfX2xpZ2h0XCIsIGNsYXNzTmFtZSksXG4gICAgICAgIG9uUG9pbnRlckRvd246IHN0b3BFdmVudFByb3BhZ2F0aW9uLFxuICAgICAgICB0YWJJbmRleDogLTEsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgIE9wdGlvbmFsRXJyb3JCb3VuZGFyeSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmYWxsYmFjazogRXJyb3JGYWxsYmFjayxcbiAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4gYW5ub3RhdGVFcnJvcihlcnJvciwgeyB0YWdzOiB7IG9yaWdpbjogXCJyZWFjdC50bGRyYXctYmVmb3JlLWFwcFwiIH0gfSksXG4gICAgICAgICAgICBjaGlsZHJlbjogY29udGFpbmVyICYmIC8qIEBfX1BVUkVfXyAqLyBqc3goQ29udGFpbmVyUHJvdmlkZXIsIHsgY29udGFpbmVyLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChFZGl0b3JDb21wb25lbnRzUHJvdmlkZXIsIHsgb3ZlcnJpZGVzOiBjb21wb25lbnRzLCBjaGlsZHJlbjogc3RvcmUgPyBzdG9yZSBpbnN0YW5jZW9mIFN0b3JlID8gKFxuICAgICAgICAgICAgICAvLyBTdG9yZSBpcyByZWFkeSB0byBnbywgd2hldGhlciBleHRlcm5hbGx5IHN5bmNlZCBvciBub3RcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIChqc3goVGxkcmF3RWRpdG9yV2l0aFJlYWR5U3RvcmUsIHsgLi4ud2l0aERlZmF1bHRzLCBzdG9yZSwgdXNlciB9KSlcbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIC8vIFN0b3JlIGlzIGEgc3luY2VkIHN0b3JlLCBzbyBoYW5kbGUgc3luY2luZyBzdGFnZXMgaW50ZXJuYWxseVxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8gKGpzeChUbGRyYXdFZGl0b3JXaXRoTG9hZGluZ1N0b3JlLCB7IC4uLndpdGhEZWZhdWx0cywgc3RvcmUsIHVzZXIgfSkpXG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAvLyBXZSBoYXZlIG5vIHN0b3JlIChpdCdzIHVuZGVmaW5lZCkgc28gY3JlYXRlIG9uZSBhbmQgcG9zc2libHkgc3luYyBpdFxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8gKGpzeChUbGRyYXdFZGl0b3JXaXRoT3duU3RvcmUsIHsgLi4ud2l0aERlZmF1bHRzLCBzdG9yZSwgdXNlciB9KSlcbiAgICAgICAgICAgICkgfSkgfSlcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICApXG4gICk7XG59KTtcbmZ1bmN0aW9uIFRsZHJhd0VkaXRvcldpdGhPd25TdG9yZShwcm9wcykge1xuICBjb25zdCB7XG4gICAgZGVmYXVsdE5hbWUsXG4gICAgc25hcHNob3QsXG4gICAgaW5pdGlhbERhdGEsXG4gICAgc2hhcGVVdGlscyxcbiAgICBiaW5kaW5nVXRpbHMsXG4gICAgcGVyc2lzdGVuY2VLZXksXG4gICAgc2Vzc2lvbklkLFxuICAgIHVzZXJcbiAgfSA9IHByb3BzO1xuICBjb25zdCBzeW5jZWRTdG9yZSA9IHVzZUxvY2FsU3RvcmUoe1xuICAgIHNoYXBlVXRpbHMsXG4gICAgYmluZGluZ1V0aWxzLFxuICAgIGluaXRpYWxEYXRhLFxuICAgIHBlcnNpc3RlbmNlS2V5LFxuICAgIHNlc3Npb25JZCxcbiAgICBkZWZhdWx0TmFtZSxcbiAgICBzbmFwc2hvdFxuICB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goVGxkcmF3RWRpdG9yV2l0aExvYWRpbmdTdG9yZSwgeyAuLi5wcm9wcywgc3RvcmU6IHN5bmNlZFN0b3JlLCB1c2VyIH0pO1xufVxuY29uc3QgVGxkcmF3RWRpdG9yV2l0aExvYWRpbmdTdG9yZSA9IG1lbW8oZnVuY3Rpb24gVGxkcmF3RWRpdG9yQmVmb3JlTG9hZGluZyh7XG4gIHN0b3JlLFxuICB1c2VyLFxuICAuLi5yZXN0XG59KSB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IHVzZUNvbnRhaW5lcigpO1xuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh1c2VyLnVzZXJQcmVmZXJlbmNlcy5nZXQoKS5pc0RhcmtNb2RlKSB7XG4gICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcInRsLXRoZW1lX19saWdodFwiKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGwtdGhlbWVfX2RhcmtcIik7XG4gICAgfVxuICB9LCBbY29udGFpbmVyLCB1c2VyXSk7XG4gIGNvbnN0IHsgTG9hZGluZ1NjcmVlbjogTG9hZGluZ1NjcmVlbjIgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgc3dpdGNoIChzdG9yZS5zdGF0dXMpIHtcbiAgICBjYXNlIFwiZXJyb3JcIjoge1xuICAgICAgdGhyb3cgc3RvcmUuZXJyb3I7XG4gICAgfVxuICAgIGNhc2UgXCJsb2FkaW5nXCI6IHtcbiAgICAgIHJldHVybiBMb2FkaW5nU2NyZWVuMiA/IC8qIEBfX1BVUkVfXyAqLyBqc3goTG9hZGluZ1NjcmVlbjIsIHt9KSA6IG51bGw7XG4gICAgfVxuICAgIGNhc2UgXCJub3Qtc3luY2VkXCI6IHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwic3luY2VkLWxvY2FsXCI6IHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwic3luY2VkLXJlbW90ZVwiOiB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goVGxkcmF3RWRpdG9yV2l0aFJlYWR5U3RvcmUsIHsgLi4ucmVzdCwgc3RvcmU6IHN0b3JlLnN0b3JlLCB1c2VyIH0pO1xufSk7XG5mdW5jdGlvbiBUbGRyYXdFZGl0b3JXaXRoUmVhZHlTdG9yZSh7XG4gIG9uTW91bnQsXG4gIGNoaWxkcmVuLFxuICBzdG9yZSxcbiAgdG9vbHMsXG4gIHNoYXBlVXRpbHMsXG4gIGJpbmRpbmdVdGlscyxcbiAgdXNlcixcbiAgaW5pdGlhbFN0YXRlLFxuICBhdXRvRm9jdXMgPSB0cnVlLFxuICBpbmZlckRhcmtNb2RlLFxuICBjYW1lcmFPcHRpb25zLFxuICBvcHRpb25zXG59KSB7XG4gIGNvbnN0IHsgRXJyb3JGYWxsYmFjayB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBjb25zdCBjb250YWluZXIgPSB1c2VDb250YWluZXIoKTtcbiAgY29uc3QgZWRpdG9yUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBbcmVuZGVyRWRpdG9yLCBzZXRSZW5kZXJFZGl0b3JdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IGVkaXRvciA9IGVkaXRvclJlZi5jdXJyZW50O1xuICBpZiAocmVuZGVyRWRpdG9yICE9PSBlZGl0b3IpIHtcbiAgICBzZXRSZW5kZXJFZGl0b3IoZWRpdG9yKTtcbiAgfVxuICBjb25zdCBbaW5pdGlhbEF1dG9Gb2N1c10gPSB1c2VTdGF0ZShhdXRvRm9jdXMpO1xuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGVkaXRvcjIgPSBuZXcgRWRpdG9yKHtcbiAgICAgIHN0b3JlLFxuICAgICAgc2hhcGVVdGlscyxcbiAgICAgIGJpbmRpbmdVdGlscyxcbiAgICAgIHRvb2xzLFxuICAgICAgZ2V0Q29udGFpbmVyOiAoKSA9PiBjb250YWluZXIsXG4gICAgICB1c2VyLFxuICAgICAgaW5pdGlhbFN0YXRlLFxuICAgICAgYXV0b0ZvY3VzOiBpbml0aWFsQXV0b0ZvY3VzLFxuICAgICAgaW5mZXJEYXJrTW9kZSxcbiAgICAgIGNhbWVyYU9wdGlvbnMsXG4gICAgICBvcHRpb25zXG4gICAgfSk7XG4gICAgZWRpdG9yUmVmLmN1cnJlbnQgPSBlZGl0b3IyO1xuICAgIHNldFJlbmRlckVkaXRvcihlZGl0b3IyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZWRpdG9yMi5kaXNwb3NlKCk7XG4gICAgfTtcbiAgfSwgW1xuICAgIGNvbnRhaW5lcixcbiAgICBzaGFwZVV0aWxzLFxuICAgIGJpbmRpbmdVdGlscyxcbiAgICB0b29scyxcbiAgICBzdG9yZSxcbiAgICB1c2VyLFxuICAgIGluaXRpYWxTdGF0ZSxcbiAgICBpbml0aWFsQXV0b0ZvY3VzLFxuICAgIGluZmVyRGFya01vZGUsXG4gICAgY2FtZXJhT3B0aW9ucyxcbiAgICBvcHRpb25zXG4gIF0pO1xuICBjb25zdCBjcmFzaGluZ0Vycm9yID0gdXNlU3luY0V4dGVybmFsU3RvcmUoXG4gICAgdXNlQ2FsbGJhY2soXG4gICAgICAob25TdG9yZUNoYW5nZSkgPT4ge1xuICAgICAgICBpZiAoZWRpdG9yKSB7XG4gICAgICAgICAgZWRpdG9yLm9uKFwiY3Jhc2hcIiwgb25TdG9yZUNoYW5nZSk7XG4gICAgICAgICAgcmV0dXJuICgpID0+IGVkaXRvci5vZmYoXCJjcmFzaFwiLCBvblN0b3JlQ2hhbmdlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIFtlZGl0b3JdXG4gICAgKSxcbiAgICAoKSA9PiBlZGl0b3I/LmdldENyYXNoaW5nRXJyb3IoKSA/PyBudWxsXG4gICk7XG4gIGNvbnN0IHsgQ2FudmFzIH0gPSB1c2VFZGl0b3JDb21wb25lbnRzKCk7XG4gIGlmICghZWRpdG9yKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIChcbiAgICAvLyB0aGUgdG9wLWxldmVsIHRsZHJhdyBjb21wb25lbnQgYWxzbyByZW5kZXJzIGFuIGVycm9yIGJvdW5kYXJ5IGFsbW9zdFxuICAgIC8vIGlkZW50aWNhbCB0byB0aGlzIG9uZS4gdGhlIHJlYXNvbiB3ZSBoYXZlIHR3byBpcyBiZWNhdXNlIHRoaXMgb25lIGhhc1xuICAgIC8vIGFjY2VzcyB0byBgQXBwYCwgd2hpY2ggbWVhbnMgdGhhdCBoZXJlIHdlIGNhbiBlbnJpY2ggZXJyb3JzIHdpdGggZGF0YVxuICAgIC8vIGZyb20gYXBwIGZvciByZXBvcnRpbmcsIGFuZCBhbHNvIHN0aWxsIGF0dGVtcHQgdG8gcmVuZGVyIHRoZSB1c2VyJ3NcbiAgICAvLyBkb2N1bWVudCBpbiB0aGUgZXZlbnQgb2YgYW4gZXJyb3IgdG8gcmVhc3N1cmUgdGhlbSB0aGF0IHRoZWlyIHdvcmsgaXNcbiAgICAvLyBub3QgbG9zdC5cbiAgICAvKiBAX19QVVJFX18gKi8gKGpzeChPcHRpb25hbEVycm9yQm91bmRhcnksIHtcbiAgICAgIGZhbGxiYWNrOiBFcnJvckZhbGxiYWNrLFxuICAgICAgb25FcnJvcjogKGVycm9yKSA9PiBlZGl0b3IuYW5ub3RhdGVFcnJvcihlcnJvciwgeyBvcmlnaW46IFwicmVhY3QudGxkcmF3XCIsIHdpbGxDcmFzaEFwcDogdHJ1ZSB9KSxcbiAgICAgIGNoaWxkcmVuOiBjcmFzaGluZ0Vycm9yID8gLyogQF9fUFVSRV9fICovIGpzeChDcmFzaCwgeyBjcmFzaGluZ0Vycm9yIH0pIDogLyogQF9fUFVSRV9fICovIGpzeChFZGl0b3JDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBlZGl0b3IsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KExheW91dCwgeyBvbk1vdW50LCBjaGlsZHJlbjogY2hpbGRyZW4gPz8gKENhbnZhcyA/IC8qIEBfX1BVUkVfXyAqLyBqc3goQ2FudmFzLCB7fSkgOiBudWxsKSB9KSB9KVxuICAgIH0pKVxuICApO1xufVxuZnVuY3Rpb24gTGF5b3V0KHsgY2hpbGRyZW4sIG9uTW91bnQgfSkge1xuICB1c2Vab29tQ3NzKCk7XG4gIHVzZUN1cnNvcigpO1xuICB1c2VEYXJrTW9kZSgpO1xuICB1c2VGb3JjZVVwZGF0ZSgpO1xuICB1c2VPbk1vdW50KG9uTW91bnQpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChGcmFnbWVudCwgeyBjaGlsZHJlbiB9KTtcbn1cbmZ1bmN0aW9uIENyYXNoKHsgY3Jhc2hpbmdFcnJvciB9KSB7XG4gIHRocm93IGNyYXNoaW5nRXJyb3I7XG59XG5mdW5jdGlvbiBMb2FkaW5nU2NyZWVuKHsgY2hpbGRyZW4gfSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1sb2FkaW5nXCIsIGNoaWxkcmVuIH0pO1xufVxuZnVuY3Rpb24gRXJyb3JTY3JlZW4oeyBjaGlsZHJlbiB9KSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRsLWxvYWRpbmdcIiwgY2hpbGRyZW4gfSk7XG59XG5mdW5jdGlvbiB1c2VPbk1vdW50KG9uTW91bnQpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IG9uTW91bnRFdmVudCA9IHVzZUV2ZW50KChlZGl0b3IyKSA9PiB7XG4gICAgbGV0IHRlYXJkb3duID0gdm9pZCAwO1xuICAgIGVkaXRvcjIuaGlzdG9yeS5pZ25vcmUoKCkgPT4ge1xuICAgICAgdGVhcmRvd24gPSBvbk1vdW50Py4oZWRpdG9yMik7XG4gICAgICBlZGl0b3IyLmVtaXQoXCJtb3VudFwiKTtcbiAgICB9KTtcbiAgICB3aW5kb3cudGxkcmF3UmVhZHkgPSB0cnVlO1xuICAgIHJldHVybiB0ZWFyZG93bjtcbiAgfSk7XG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGVkaXRvcilcbiAgICAgIHJldHVybiBvbk1vdW50RXZlbnQ/LihlZGl0b3IpO1xuICB9LCBbZWRpdG9yLCBvbk1vdW50RXZlbnRdKTtcbn1cbmV4cG9ydCB7XG4gIEVycm9yU2NyZWVuLFxuICBMb2FkaW5nU2NyZWVuLFxuICBUbGRyYXdFZGl0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UbGRyYXdFZGl0b3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/TldrawEditor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrorBoundary: () => (/* binding */ ErrorBoundary),\n/* harmony export */   OptionalErrorBoundary: () => (/* binding */ OptionalErrorBoundary)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nconst initialState = { error: null };\nclass ErrorBoundary extends react__WEBPACK_IMPORTED_MODULE_1__.Component {\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  state = initialState;\n  componentDidCatch(error) {\n    this.props.onError?.(error);\n  }\n  render() {\n    const { error } = this.state;\n    if (error !== null) {\n      const { fallback: Fallback } = this.props;\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Fallback, { error });\n    }\n    return this.props.children;\n  }\n}\nfunction OptionalErrorBoundary({\n  children,\n  fallback,\n  ...props\n}) {\n  if (fallback === null) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children });\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ErrorBoundary, { fallback, ...props, children });\n}\n\n//# sourceMappingURL=ErrorBoundary.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvRXJyb3JCb3VuZGFyeS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFrRDtBQUNuQjtBQUMvQix1QkFBdUI7QUFDdkIsNEJBQTRCLDRDQUFlO0FBQzNDO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUTtBQUNwQjtBQUNBLGNBQWMscUJBQXFCO0FBQ25DLDZCQUE2QixzREFBRyxhQUFhLE9BQU87QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLDJCQUEyQixzREFBRyxDQUFDLHVEQUFRLElBQUksVUFBVTtBQUNyRDtBQUNBLHlCQUF5QixzREFBRyxrQkFBa0IsOEJBQThCO0FBQzVFO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9FcnJvckJvdW5kYXJ5Lm1qcz9hNjQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZyYWdtZW50LCBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuY29uc3QgaW5pdGlhbFN0YXRlID0geyBlcnJvcjogbnVsbCB9O1xuY2xhc3MgRXJyb3JCb3VuZGFyeSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoZXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9XG4gIHN0YXRlID0gaW5pdGlhbFN0YXRlO1xuICBjb21wb25lbnREaWRDYXRjaChlcnJvcikge1xuICAgIHRoaXMucHJvcHMub25FcnJvcj8uKGVycm9yKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBlcnJvciB9ID0gdGhpcy5zdGF0ZTtcbiAgICBpZiAoZXJyb3IgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHsgZmFsbGJhY2s6IEZhbGxiYWNrIH0gPSB0aGlzLnByb3BzO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goRmFsbGJhY2ssIHsgZXJyb3IgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnByb3BzLmNoaWxkcmVuO1xuICB9XG59XG5mdW5jdGlvbiBPcHRpb25hbEVycm9yQm91bmRhcnkoe1xuICBjaGlsZHJlbixcbiAgZmFsbGJhY2ssXG4gIC4uLnByb3BzXG59KSB7XG4gIGlmIChmYWxsYmFjayA9PT0gbnVsbCkge1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEZyYWdtZW50LCB7IGNoaWxkcmVuIH0pO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEVycm9yQm91bmRhcnksIHsgZmFsbGJhY2ssIC4uLnByb3BzLCBjaGlsZHJlbiB9KTtcbn1cbmV4cG9ydCB7XG4gIEVycm9yQm91bmRhcnksXG4gIE9wdGlvbmFsRXJyb3JCb3VuZGFyeVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVycm9yQm91bmRhcnkubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/GeometryDebuggingView.mjs":
/*!***************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/GeometryDebuggingView.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeometryDebuggingView: () => (/* binding */ GeometryDebuggingView)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../primitives/geometry/Group2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs\");\n\n\n\n\n\n\nfunction useTick(isEnabled = true) {\n  const [_, setTick] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(0);\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (!isEnabled)\n      return;\n    const update = () => setTick((tick) => tick + 1);\n    editor.on(\"tick\", update);\n    return () => {\n      editor.off(\"tick\", update);\n    };\n  }, [editor, isEnabled]);\n}\nconst GeometryDebuggingView = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.track)(function GeometryDebuggingView2({\n  showStroke = true,\n  showVertices = true,\n  showClosestPointOnOutline = true\n}) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  useTick(showClosestPointOnOutline);\n  const zoomLevel = editor.getZoomLevel();\n  const renderingShapes = editor.getRenderingShapes();\n  const {\n    inputs: { currentPagePoint }\n  } = editor;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"svg\",\n    {\n      style: {\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        zIndex: 999999999,\n        top: 0,\n        left: 0,\n        overflow: \"visible\"\n      },\n      children: renderingShapes.map((result) => {\n        const shape = editor.getShape(result.id);\n        if (shape.type === \"group\")\n          return null;\n        const geometry = editor.getShapeGeometry(shape);\n        const pageTransform = editor.getShapePageTransform(shape);\n        const pointInShapeSpace = editor.getPointInShapeSpace(shape, currentPagePoint);\n        const nearestPointOnShape = geometry.nearestPoint(pointInShapeSpace);\n        const distanceToPoint = geometry.distanceToPoint(pointInShapeSpace, true);\n        const dist = Math.abs(distanceToPoint) * zoomLevel;\n        const hitInside = distanceToPoint < 0;\n        const { vertices } = geometry;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\n          \"g\",\n          {\n            transform: pageTransform.toCssString(),\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [\n              showStroke && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(GeometryStroke, { geometry }),\n              showVertices && vertices.map((v, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n                \"circle\",\n                {\n                  cx: v.x,\n                  cy: v.y,\n                  r: \"2\",\n                  fill: `hsl(${(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.modulate)(i, [0, vertices.length - 1], [120, 200])}, 100%, 50%)`,\n                  stroke: \"black\",\n                  strokeWidth: \"1\"\n                },\n                `v${i}`\n              )),\n              showClosestPointOnOutline && dist < 150 && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n                \"line\",\n                {\n                  x1: nearestPointOnShape.x,\n                  y1: nearestPointOnShape.y,\n                  x2: pointInShapeSpace.x,\n                  y2: pointInShapeSpace.y,\n                  opacity: 1 - dist / 150,\n                  stroke: hitInside ? \"goldenrod\" : \"dodgerblue\",\n                  strokeWidth: \"2\"\n                }\n              )\n            ]\n          },\n          result.id + \"_outline\"\n        );\n      })\n    }\n  );\n});\nfunction GeometryStroke({ geometry }) {\n  if (geometry instanceof _primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_5__.Group2d) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [...geometry.children, ...geometry.ignoredChildren].map((child, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(GeometryStroke, { geometry: child }, i)) });\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"path\",\n    {\n      stroke: geometry.debugColor ?? \"red\",\n      strokeWidth: \"2\",\n      fill: \"none\",\n      opacity: \"1\",\n      d: geometry.toSimpleSvgPath()\n    }\n  );\n}\n\n//# sourceMappingURL=GeometryDebuggingView.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvR2VvbWV0cnlEZWJ1Z2dpbmdWaWV3Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdEO0FBQ2xCO0FBQ0c7QUFDRztBQUNPO0FBQ1U7QUFDN0Q7QUFDQSx1QkFBdUIsK0NBQVE7QUFDL0IsaUJBQWlCLCtEQUFTO0FBQzFCLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDhCQUE4QixvREFBSztBQUNuQztBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsaUJBQWlCLCtEQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLElBQUk7QUFDSix5QkFBeUIsc0RBQUc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVztBQUMzQiwrQkFBK0IsdURBQUk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHNEQUFHLG1CQUFtQixVQUFVO0FBQzVFLHFFQUFxRSxzREFBRztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHVEQUFRLDBDQUEwQztBQUNqRjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLG9CQUFvQixFQUFFO0FBQ3RCO0FBQ0EseUVBQXlFLHNEQUFHO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsMEJBQTBCLFVBQVU7QUFDcEMsMEJBQTBCLHFFQUFPO0FBQ2pDLDJCQUEyQixzREFBRyxDQUFDLHVEQUFRLElBQUksZ0dBQWdHLHNEQUFHLG1CQUFtQixpQkFBaUIsT0FBTztBQUN6TDtBQUNBLHlCQUF5QixzREFBRztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvR2VvbWV0cnlEZWJ1Z2dpbmdWaWV3Lm1qcz9iYTdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZyYWdtZW50LCBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHRyYWNrIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IG1vZHVsYXRlIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuLi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyBHcm91cDJkIH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvR3JvdXAyZC5tanNcIjtcbmZ1bmN0aW9uIHVzZVRpY2soaXNFbmFibGVkID0gdHJ1ZSkge1xuICBjb25zdCBbXywgc2V0VGlja10gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFpc0VuYWJsZWQpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgdXBkYXRlID0gKCkgPT4gc2V0VGljaygodGljaykgPT4gdGljayArIDEpO1xuICAgIGVkaXRvci5vbihcInRpY2tcIiwgdXBkYXRlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZWRpdG9yLm9mZihcInRpY2tcIiwgdXBkYXRlKTtcbiAgICB9O1xuICB9LCBbZWRpdG9yLCBpc0VuYWJsZWRdKTtcbn1cbmNvbnN0IEdlb21ldHJ5RGVidWdnaW5nVmlldyA9IHRyYWNrKGZ1bmN0aW9uIEdlb21ldHJ5RGVidWdnaW5nVmlldzIoe1xuICBzaG93U3Ryb2tlID0gdHJ1ZSxcbiAgc2hvd1ZlcnRpY2VzID0gdHJ1ZSxcbiAgc2hvd0Nsb3Nlc3RQb2ludE9uT3V0bGluZSA9IHRydWVcbn0pIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIHVzZVRpY2soc2hvd0Nsb3Nlc3RQb2ludE9uT3V0bGluZSk7XG4gIGNvbnN0IHpvb21MZXZlbCA9IGVkaXRvci5nZXRab29tTGV2ZWwoKTtcbiAgY29uc3QgcmVuZGVyaW5nU2hhcGVzID0gZWRpdG9yLmdldFJlbmRlcmluZ1NoYXBlcygpO1xuICBjb25zdCB7XG4gICAgaW5wdXRzOiB7IGN1cnJlbnRQYWdlUG9pbnQgfVxuICB9ID0gZWRpdG9yO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICBcInN2Z1wiLFxuICAgIHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiLFxuICAgICAgICB6SW5kZXg6IDk5OTk5OTk5OSxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICBvdmVyZmxvdzogXCJ2aXNpYmxlXCJcbiAgICAgIH0sXG4gICAgICBjaGlsZHJlbjogcmVuZGVyaW5nU2hhcGVzLm1hcCgocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0gZWRpdG9yLmdldFNoYXBlKHJlc3VsdC5pZCk7XG4gICAgICAgIGlmIChzaGFwZS50eXBlID09PSBcImdyb3VwXCIpXG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gZWRpdG9yLmdldFNoYXBlR2VvbWV0cnkoc2hhcGUpO1xuICAgICAgICBjb25zdCBwYWdlVHJhbnNmb3JtID0gZWRpdG9yLmdldFNoYXBlUGFnZVRyYW5zZm9ybShzaGFwZSk7XG4gICAgICAgIGNvbnN0IHBvaW50SW5TaGFwZVNwYWNlID0gZWRpdG9yLmdldFBvaW50SW5TaGFwZVNwYWNlKHNoYXBlLCBjdXJyZW50UGFnZVBvaW50KTtcbiAgICAgICAgY29uc3QgbmVhcmVzdFBvaW50T25TaGFwZSA9IGdlb21ldHJ5Lm5lYXJlc3RQb2ludChwb2ludEluU2hhcGVTcGFjZSk7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlVG9Qb2ludCA9IGdlb21ldHJ5LmRpc3RhbmNlVG9Qb2ludChwb2ludEluU2hhcGVTcGFjZSwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLmFicyhkaXN0YW5jZVRvUG9pbnQpICogem9vbUxldmVsO1xuICAgICAgICBjb25zdCBoaXRJbnNpZGUgPSBkaXN0YW5jZVRvUG9pbnQgPCAwO1xuICAgICAgICBjb25zdCB7IHZlcnRpY2VzIH0gPSBnZW9tZXRyeTtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFxuICAgICAgICAgIFwiZ1wiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogcGFnZVRyYW5zZm9ybS50b0Nzc1N0cmluZygpLFxuICAgICAgICAgICAgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLFxuICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIHNob3dTdHJva2UgJiYgLyogQF9fUFVSRV9fICovIGpzeChHZW9tZXRyeVN0cm9rZSwgeyBnZW9tZXRyeSB9KSxcbiAgICAgICAgICAgICAgc2hvd1ZlcnRpY2VzICYmIHZlcnRpY2VzLm1hcCgodiwgaSkgPT4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgICAgICAgICBcImNpcmNsZVwiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGN4OiB2LngsXG4gICAgICAgICAgICAgICAgICBjeTogdi55LFxuICAgICAgICAgICAgICAgICAgcjogXCIyXCIsXG4gICAgICAgICAgICAgICAgICBmaWxsOiBgaHNsKCR7bW9kdWxhdGUoaSwgWzAsIHZlcnRpY2VzLmxlbmd0aCAtIDFdLCBbMTIwLCAyMDBdKX0sIDEwMCUsIDUwJSlgLFxuICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBcImJsYWNrXCIsXG4gICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogXCIxXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGB2JHtpfWBcbiAgICAgICAgICAgICAgKSksXG4gICAgICAgICAgICAgIHNob3dDbG9zZXN0UG9pbnRPbk91dGxpbmUgJiYgZGlzdCA8IDE1MCAmJiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgICAgICAgIFwibGluZVwiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHgxOiBuZWFyZXN0UG9pbnRPblNoYXBlLngsXG4gICAgICAgICAgICAgICAgICB5MTogbmVhcmVzdFBvaW50T25TaGFwZS55LFxuICAgICAgICAgICAgICAgICAgeDI6IHBvaW50SW5TaGFwZVNwYWNlLngsXG4gICAgICAgICAgICAgICAgICB5MjogcG9pbnRJblNoYXBlU3BhY2UueSxcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEgLSBkaXN0IC8gMTUwLFxuICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBoaXRJbnNpZGUgPyBcImdvbGRlbnJvZFwiIDogXCJkb2RnZXJibHVlXCIsXG4gICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogXCIyXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlc3VsdC5pZCArIFwiX291dGxpbmVcIlxuICAgICAgICApO1xuICAgICAgfSlcbiAgICB9XG4gICk7XG59KTtcbmZ1bmN0aW9uIEdlb21ldHJ5U3Ryb2tlKHsgZ2VvbWV0cnkgfSkge1xuICBpZiAoZ2VvbWV0cnkgaW5zdGFuY2VvZiBHcm91cDJkKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goRnJhZ21lbnQsIHsgY2hpbGRyZW46IFsuLi5nZW9tZXRyeS5jaGlsZHJlbiwgLi4uZ2VvbWV0cnkuaWdub3JlZENoaWxkcmVuXS5tYXAoKGNoaWxkLCBpKSA9PiAvKiBAX19QVVJFX18gKi8ganN4KEdlb21ldHJ5U3Ryb2tlLCB7IGdlb21ldHJ5OiBjaGlsZCB9LCBpKSkgfSk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgXCJwYXRoXCIsXG4gICAge1xuICAgICAgc3Ryb2tlOiBnZW9tZXRyeS5kZWJ1Z0NvbG9yID8/IFwicmVkXCIsXG4gICAgICBzdHJva2VXaWR0aDogXCIyXCIsXG4gICAgICBmaWxsOiBcIm5vbmVcIixcbiAgICAgIG9wYWNpdHk6IFwiMVwiLFxuICAgICAgZDogZ2VvbWV0cnkudG9TaW1wbGVTdmdQYXRoKClcbiAgICB9XG4gICk7XG59XG5leHBvcnQge1xuICBHZW9tZXRyeURlYnVnZ2luZ1ZpZXdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9tZXRyeURlYnVnZ2luZ1ZpZXcubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/GeometryDebuggingView.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/HTMLContainer.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/HTMLContainer.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HTMLContainer: () => (/* binding */ HTMLContainer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n\n\nfunction HTMLContainer({ children, className = \"\", ...rest }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { ...rest, className: classnames__WEBPACK_IMPORTED_MODULE_1__(\"tl-html-container\", className), children });\n}\n\n//# sourceMappingURL=HTMLContainer.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvSFRNTENvbnRhaW5lci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdDO0FBQ0o7QUFDcEMseUJBQXlCLG1DQUFtQztBQUM1RCx5QkFBeUIsc0RBQUcsVUFBVSxvQkFBb0IsdUNBQVUsNENBQTRDO0FBQ2hIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9IVE1MQ29udGFpbmVyLm1qcz84NWIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmZ1bmN0aW9uIEhUTUxDb250YWluZXIoeyBjaGlsZHJlbiwgY2xhc3NOYW1lID0gXCJcIiwgLi4ucmVzdCB9KSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgLi4ucmVzdCwgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGwtaHRtbC1jb250YWluZXJcIiwgY2xhc3NOYW1lKSwgY2hpbGRyZW4gfSk7XG59XG5leHBvcnQge1xuICBIVE1MQ29udGFpbmVyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SFRNTENvbnRhaW5lci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/HTMLContainer.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/LiveCollaborators.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/LiveCollaborators.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LiveCollaborators: () => (/* binding */ LiveCollaborators)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _hooks_usePeerIds_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../hooks/usePeerIds.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePeerIds.mjs\");\n/* harmony import */ var _hooks_usePresence_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../hooks/usePresence.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePresence.mjs\");\n\n\n\n\n\n\n\nconst LiveCollaborators = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.track)(function Collaborators() {\n  const peerIds = (0,_hooks_usePeerIds_mjs__WEBPACK_IMPORTED_MODULE_5__.usePeerIds)();\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: peerIds.map((id) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CollaboratorGuard, { collaboratorId: id }, id)) });\n});\nconst CollaboratorGuard = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.track)(function CollaboratorGuard2({\n  collaboratorId\n}) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  const presence = (0,_hooks_usePresence_mjs__WEBPACK_IMPORTED_MODULE_6__.usePresence)(collaboratorId);\n  const collaboratorState = useCollaboratorState(editor, presence);\n  if (!(presence && presence.currentPageId === editor.getCurrentPageId())) {\n    return null;\n  }\n  switch (collaboratorState) {\n    case \"inactive\": {\n      const { followingUserId, highlightedUserIds } = editor.getInstanceState();\n      if (!(followingUserId === presence.userId || highlightedUserIds.includes(presence.userId))) {\n        return null;\n      }\n      break;\n    }\n    case \"idle\": {\n      const { highlightedUserIds } = editor.getInstanceState();\n      if (presence.followingUserId === editor.user.getId() && !(presence.chatMessage || highlightedUserIds.includes(presence.userId))) {\n        return null;\n      }\n      break;\n    }\n    case \"active\": {\n      break;\n    }\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Collaborator, { latestPresence: presence });\n});\nconst Collaborator = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.track)(function Collaborator2({\n  latestPresence\n}) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  const {\n    CollaboratorBrush,\n    CollaboratorScribble,\n    CollaboratorCursor,\n    CollaboratorHint,\n    CollaboratorShapeIndicator\n  } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditorComponents)();\n  const zoomLevel = editor.getZoomLevel();\n  const viewportPageBounds = editor.getViewportPageBounds();\n  const { userId, chatMessage, brush, scribbles, selectedShapeIds, userName, cursor, color } = latestPresence;\n  const isCursorInViewport = !(cursor.x < viewportPageBounds.minX - 12 / zoomLevel || cursor.y < viewportPageBounds.minY - 16 / zoomLevel || cursor.x > viewportPageBounds.maxX - 12 / zoomLevel || cursor.y > viewportPageBounds.maxY - 16 / zoomLevel);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    brush && CollaboratorBrush ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      CollaboratorBrush,\n      {\n        className: \"tl-collaborator__brush\",\n        brush,\n        color,\n        opacity: 0.1\n      },\n      userId + \"_brush\"\n    ) : null,\n    isCursorInViewport && CollaboratorCursor ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      CollaboratorCursor,\n      {\n        className: \"tl-collaborator__cursor\",\n        point: cursor,\n        color,\n        zoom: zoomLevel,\n        name: userName !== \"New User\" ? userName : null,\n        chatMessage\n      },\n      userId + \"_cursor\"\n    ) : CollaboratorHint ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      CollaboratorHint,\n      {\n        className: \"tl-collaborator__cursor-hint\",\n        point: cursor,\n        color,\n        zoom: zoomLevel,\n        viewport: viewportPageBounds\n      },\n      userId + \"_cursor_hint\"\n    ) : null,\n    CollaboratorScribble && scribbles.length ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: scribbles.map((scribble) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      CollaboratorScribble,\n      {\n        className: \"tl-collaborator__scribble\",\n        scribble,\n        color,\n        zoom: zoomLevel,\n        opacity: scribble.color === \"laser\" ? 0.5 : 0.1\n      },\n      userId + \"_scribble_\" + scribble.id\n    )) }) : null,\n    CollaboratorShapeIndicator && selectedShapeIds.map((shapeId) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      CollaboratorShapeIndicator,\n      {\n        className: \"tl-collaborator__shape-indicator\",\n        shapeId,\n        color,\n        opacity: 0.5\n      },\n      userId + \"_\" + shapeId\n    ))\n  ] });\n});\nfunction getStateFromElapsedTime(editor, elapsed) {\n  return elapsed > editor.options.collaboratorInactiveTimeoutMs ? \"inactive\" : elapsed > editor.options.collaboratorIdleTimeoutMs ? \"idle\" : \"active\";\n}\nfunction useCollaboratorState(editor, latestPresence) {\n  const rLastActivityTimestamp = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(latestPresence?.lastActivityTimestamp ?? -1);\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\n    () => getStateFromElapsedTime(editor, Date.now() - rLastActivityTimestamp.current)\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const interval = editor.timers.setInterval(() => {\n      setState(getStateFromElapsedTime(editor, Date.now() - rLastActivityTimestamp.current));\n    }, editor.options.collaboratorCheckIntervalMs);\n    return () => clearInterval(interval);\n  }, [editor]);\n  if (latestPresence) {\n    rLastActivityTimestamp.current = latestPresence.lastActivityTimestamp;\n  }\n  return state;\n}\n\n//# sourceMappingURL=LiveCollaborators.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvTGl2ZUNvbGxhYm9yYXRvcnMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ2xCO0FBQ2M7QUFDRDtBQUNvQjtBQUNsQjtBQUNFO0FBQ3ZELDBCQUEwQixvREFBSztBQUMvQixrQkFBa0IsaUVBQVU7QUFDNUIseUJBQXlCLHNEQUFHLENBQUMsdURBQVEsSUFBSSw4Q0FBOEMsc0RBQUcsc0JBQXNCLG9CQUFvQixRQUFRO0FBQzVJLENBQUM7QUFDRCwwQkFBMEIsb0RBQUs7QUFDL0I7QUFDQSxDQUFDO0FBQ0QsaUJBQWlCLCtEQUFTO0FBQzFCLG1CQUFtQixtRUFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHNDQUFzQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHFCQUFxQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsc0RBQUcsaUJBQWlCLDBCQUEwQjtBQUN2RSxDQUFDO0FBQ0QscUJBQXFCLG9EQUFLO0FBQzFCO0FBQ0EsQ0FBQztBQUNELGlCQUFpQiwrREFBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLEVBQUUsbUZBQW1CO0FBQ3pCO0FBQ0E7QUFDQSxVQUFVLG1GQUFtRjtBQUM3RjtBQUNBLHlCQUF5Qix1REFBSSxDQUFDLHVEQUFRLElBQUk7QUFDMUMsaURBQWlELHNEQUFHO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsK0RBQStELHNEQUFHO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSwyQ0FBMkMsc0RBQUc7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLCtEQUErRCxzREFBRyxDQUFDLHVEQUFRLElBQUksc0RBQXNELHNEQUFHO0FBQ3hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsUUFBUTtBQUNSLG9GQUFvRixzREFBRztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNkNBQU07QUFDdkMsNEJBQTRCLCtDQUFRO0FBQ3BDO0FBQ0E7QUFDQSxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9MaXZlQ29sbGFib3JhdG9ycy5tanM/YjZlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGcmFnbWVudCwganN4LCBqc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyB0cmFjayB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuLi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3JDb21wb25lbnRzIH0gZnJvbSBcIi4uL2hvb2tzL3VzZUVkaXRvckNvbXBvbmVudHMubWpzXCI7XG5pbXBvcnQgeyB1c2VQZWVySWRzIH0gZnJvbSBcIi4uL2hvb2tzL3VzZVBlZXJJZHMubWpzXCI7XG5pbXBvcnQgeyB1c2VQcmVzZW5jZSB9IGZyb20gXCIuLi9ob29rcy91c2VQcmVzZW5jZS5tanNcIjtcbmNvbnN0IExpdmVDb2xsYWJvcmF0b3JzID0gdHJhY2soZnVuY3Rpb24gQ29sbGFib3JhdG9ycygpIHtcbiAgY29uc3QgcGVlcklkcyA9IHVzZVBlZXJJZHMoKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goRnJhZ21lbnQsIHsgY2hpbGRyZW46IHBlZXJJZHMubWFwKChpZCkgPT4gLyogQF9fUFVSRV9fICovIGpzeChDb2xsYWJvcmF0b3JHdWFyZCwgeyBjb2xsYWJvcmF0b3JJZDogaWQgfSwgaWQpKSB9KTtcbn0pO1xuY29uc3QgQ29sbGFib3JhdG9yR3VhcmQgPSB0cmFjayhmdW5jdGlvbiBDb2xsYWJvcmF0b3JHdWFyZDIoe1xuICBjb2xsYWJvcmF0b3JJZFxufSkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgcHJlc2VuY2UgPSB1c2VQcmVzZW5jZShjb2xsYWJvcmF0b3JJZCk7XG4gIGNvbnN0IGNvbGxhYm9yYXRvclN0YXRlID0gdXNlQ29sbGFib3JhdG9yU3RhdGUoZWRpdG9yLCBwcmVzZW5jZSk7XG4gIGlmICghKHByZXNlbmNlICYmIHByZXNlbmNlLmN1cnJlbnRQYWdlSWQgPT09IGVkaXRvci5nZXRDdXJyZW50UGFnZUlkKCkpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgc3dpdGNoIChjb2xsYWJvcmF0b3JTdGF0ZSkge1xuICAgIGNhc2UgXCJpbmFjdGl2ZVwiOiB7XG4gICAgICBjb25zdCB7IGZvbGxvd2luZ1VzZXJJZCwgaGlnaGxpZ2h0ZWRVc2VySWRzIH0gPSBlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpO1xuICAgICAgaWYgKCEoZm9sbG93aW5nVXNlcklkID09PSBwcmVzZW5jZS51c2VySWQgfHwgaGlnaGxpZ2h0ZWRVc2VySWRzLmluY2x1ZGVzKHByZXNlbmNlLnVzZXJJZCkpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgXCJpZGxlXCI6IHtcbiAgICAgIGNvbnN0IHsgaGlnaGxpZ2h0ZWRVc2VySWRzIH0gPSBlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpO1xuICAgICAgaWYgKHByZXNlbmNlLmZvbGxvd2luZ1VzZXJJZCA9PT0gZWRpdG9yLnVzZXIuZ2V0SWQoKSAmJiAhKHByZXNlbmNlLmNoYXRNZXNzYWdlIHx8IGhpZ2hsaWdodGVkVXNlcklkcy5pbmNsdWRlcyhwcmVzZW5jZS51c2VySWQpKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwiYWN0aXZlXCI6IHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChDb2xsYWJvcmF0b3IsIHsgbGF0ZXN0UHJlc2VuY2U6IHByZXNlbmNlIH0pO1xufSk7XG5jb25zdCBDb2xsYWJvcmF0b3IgPSB0cmFjayhmdW5jdGlvbiBDb2xsYWJvcmF0b3IyKHtcbiAgbGF0ZXN0UHJlc2VuY2Vcbn0pIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IHtcbiAgICBDb2xsYWJvcmF0b3JCcnVzaCxcbiAgICBDb2xsYWJvcmF0b3JTY3JpYmJsZSxcbiAgICBDb2xsYWJvcmF0b3JDdXJzb3IsXG4gICAgQ29sbGFib3JhdG9ySGludCxcbiAgICBDb2xsYWJvcmF0b3JTaGFwZUluZGljYXRvclxuICB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBjb25zdCB6b29tTGV2ZWwgPSBlZGl0b3IuZ2V0Wm9vbUxldmVsKCk7XG4gIGNvbnN0IHZpZXdwb3J0UGFnZUJvdW5kcyA9IGVkaXRvci5nZXRWaWV3cG9ydFBhZ2VCb3VuZHMoKTtcbiAgY29uc3QgeyB1c2VySWQsIGNoYXRNZXNzYWdlLCBicnVzaCwgc2NyaWJibGVzLCBzZWxlY3RlZFNoYXBlSWRzLCB1c2VyTmFtZSwgY3Vyc29yLCBjb2xvciB9ID0gbGF0ZXN0UHJlc2VuY2U7XG4gIGNvbnN0IGlzQ3Vyc29ySW5WaWV3cG9ydCA9ICEoY3Vyc29yLnggPCB2aWV3cG9ydFBhZ2VCb3VuZHMubWluWCAtIDEyIC8gem9vbUxldmVsIHx8IGN1cnNvci55IDwgdmlld3BvcnRQYWdlQm91bmRzLm1pblkgLSAxNiAvIHpvb21MZXZlbCB8fCBjdXJzb3IueCA+IHZpZXdwb3J0UGFnZUJvdW5kcy5tYXhYIC0gMTIgLyB6b29tTGV2ZWwgfHwgY3Vyc29yLnkgPiB2aWV3cG9ydFBhZ2VCb3VuZHMubWF4WSAtIDE2IC8gem9vbUxldmVsKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgYnJ1c2ggJiYgQ29sbGFib3JhdG9yQnJ1c2ggPyAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgQ29sbGFib3JhdG9yQnJ1c2gsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJ0bC1jb2xsYWJvcmF0b3JfX2JydXNoXCIsXG4gICAgICAgIGJydXNoLFxuICAgICAgICBjb2xvcixcbiAgICAgICAgb3BhY2l0eTogMC4xXG4gICAgICB9LFxuICAgICAgdXNlcklkICsgXCJfYnJ1c2hcIlxuICAgICkgOiBudWxsLFxuICAgIGlzQ3Vyc29ySW5WaWV3cG9ydCAmJiBDb2xsYWJvcmF0b3JDdXJzb3IgPyAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgQ29sbGFib3JhdG9yQ3Vyc29yLFxuICAgICAge1xuICAgICAgICBjbGFzc05hbWU6IFwidGwtY29sbGFib3JhdG9yX19jdXJzb3JcIixcbiAgICAgICAgcG9pbnQ6IGN1cnNvcixcbiAgICAgICAgY29sb3IsXG4gICAgICAgIHpvb206IHpvb21MZXZlbCxcbiAgICAgICAgbmFtZTogdXNlck5hbWUgIT09IFwiTmV3IFVzZXJcIiA/IHVzZXJOYW1lIDogbnVsbCxcbiAgICAgICAgY2hhdE1lc3NhZ2VcbiAgICAgIH0sXG4gICAgICB1c2VySWQgKyBcIl9jdXJzb3JcIlxuICAgICkgOiBDb2xsYWJvcmF0b3JIaW50ID8gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIENvbGxhYm9yYXRvckhpbnQsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJ0bC1jb2xsYWJvcmF0b3JfX2N1cnNvci1oaW50XCIsXG4gICAgICAgIHBvaW50OiBjdXJzb3IsXG4gICAgICAgIGNvbG9yLFxuICAgICAgICB6b29tOiB6b29tTGV2ZWwsXG4gICAgICAgIHZpZXdwb3J0OiB2aWV3cG9ydFBhZ2VCb3VuZHNcbiAgICAgIH0sXG4gICAgICB1c2VySWQgKyBcIl9jdXJzb3JfaGludFwiXG4gICAgKSA6IG51bGwsXG4gICAgQ29sbGFib3JhdG9yU2NyaWJibGUgJiYgc2NyaWJibGVzLmxlbmd0aCA/IC8qIEBfX1BVUkVfXyAqLyBqc3goRnJhZ21lbnQsIHsgY2hpbGRyZW46IHNjcmliYmxlcy5tYXAoKHNjcmliYmxlKSA9PiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgQ29sbGFib3JhdG9yU2NyaWJibGUsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJ0bC1jb2xsYWJvcmF0b3JfX3NjcmliYmxlXCIsXG4gICAgICAgIHNjcmliYmxlLFxuICAgICAgICBjb2xvcixcbiAgICAgICAgem9vbTogem9vbUxldmVsLFxuICAgICAgICBvcGFjaXR5OiBzY3JpYmJsZS5jb2xvciA9PT0gXCJsYXNlclwiID8gMC41IDogMC4xXG4gICAgICB9LFxuICAgICAgdXNlcklkICsgXCJfc2NyaWJibGVfXCIgKyBzY3JpYmJsZS5pZFxuICAgICkpIH0pIDogbnVsbCxcbiAgICBDb2xsYWJvcmF0b3JTaGFwZUluZGljYXRvciAmJiBzZWxlY3RlZFNoYXBlSWRzLm1hcCgoc2hhcGVJZCkgPT4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIENvbGxhYm9yYXRvclNoYXBlSW5kaWNhdG9yLFxuICAgICAge1xuICAgICAgICBjbGFzc05hbWU6IFwidGwtY29sbGFib3JhdG9yX19zaGFwZS1pbmRpY2F0b3JcIixcbiAgICAgICAgc2hhcGVJZCxcbiAgICAgICAgY29sb3IsXG4gICAgICAgIG9wYWNpdHk6IDAuNVxuICAgICAgfSxcbiAgICAgIHVzZXJJZCArIFwiX1wiICsgc2hhcGVJZFxuICAgICkpXG4gIF0gfSk7XG59KTtcbmZ1bmN0aW9uIGdldFN0YXRlRnJvbUVsYXBzZWRUaW1lKGVkaXRvciwgZWxhcHNlZCkge1xuICByZXR1cm4gZWxhcHNlZCA+IGVkaXRvci5vcHRpb25zLmNvbGxhYm9yYXRvckluYWN0aXZlVGltZW91dE1zID8gXCJpbmFjdGl2ZVwiIDogZWxhcHNlZCA+IGVkaXRvci5vcHRpb25zLmNvbGxhYm9yYXRvcklkbGVUaW1lb3V0TXMgPyBcImlkbGVcIiA6IFwiYWN0aXZlXCI7XG59XG5mdW5jdGlvbiB1c2VDb2xsYWJvcmF0b3JTdGF0ZShlZGl0b3IsIGxhdGVzdFByZXNlbmNlKSB7XG4gIGNvbnN0IHJMYXN0QWN0aXZpdHlUaW1lc3RhbXAgPSB1c2VSZWYobGF0ZXN0UHJlc2VuY2U/Lmxhc3RBY3Rpdml0eVRpbWVzdGFtcCA/PyAtMSk7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoXG4gICAgKCkgPT4gZ2V0U3RhdGVGcm9tRWxhcHNlZFRpbWUoZWRpdG9yLCBEYXRlLm5vdygpIC0gckxhc3RBY3Rpdml0eVRpbWVzdGFtcC5jdXJyZW50KVxuICApO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGludGVydmFsID0gZWRpdG9yLnRpbWVycy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBzZXRTdGF0ZShnZXRTdGF0ZUZyb21FbGFwc2VkVGltZShlZGl0b3IsIERhdGUubm93KCkgLSByTGFzdEFjdGl2aXR5VGltZXN0YW1wLmN1cnJlbnQpKTtcbiAgICB9LCBlZGl0b3Iub3B0aW9ucy5jb2xsYWJvcmF0b3JDaGVja0ludGVydmFsTXMpO1xuICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgfSwgW2VkaXRvcl0pO1xuICBpZiAobGF0ZXN0UHJlc2VuY2UpIHtcbiAgICByTGFzdEFjdGl2aXR5VGltZXN0YW1wLmN1cnJlbnQgPSBsYXRlc3RQcmVzZW5jZS5sYXN0QWN0aXZpdHlUaW1lc3RhbXA7XG4gIH1cbiAgcmV0dXJuIHN0YXRlO1xufVxuZXhwb3J0IHtcbiAgTGl2ZUNvbGxhYm9yYXRvcnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MaXZlQ29sbGFib3JhdG9ycy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/LiveCollaborators.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/SVGContainer.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/SVGContainer.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SVGContainer: () => (/* binding */ SVGContainer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n\n\nfunction SVGContainer({ children, className = \"\", ...rest }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { ...rest, className: classnames__WEBPACK_IMPORTED_MODULE_1__(\"tl-svg-container\", className), children });\n}\n\n//# sourceMappingURL=SVGContainer.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvU1ZHQ29udGFpbmVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0M7QUFDSjtBQUNwQyx3QkFBd0IsbUNBQW1DO0FBQzNELHlCQUF5QixzREFBRyxVQUFVLG9CQUFvQix1Q0FBVSwyQ0FBMkM7QUFDL0c7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL1NWR0NvbnRhaW5lci5tanM/MmY3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5mdW5jdGlvbiBTVkdDb250YWluZXIoeyBjaGlsZHJlbiwgY2xhc3NOYW1lID0gXCJcIiwgLi4ucmVzdCB9KSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwic3ZnXCIsIHsgLi4ucmVzdCwgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwidGwtc3ZnLWNvbnRhaW5lclwiLCBjbGFzc05hbWUpLCBjaGlsZHJlbiB9KTtcbn1cbmV4cG9ydCB7XG4gIFNWR0NvbnRhaW5lclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNWR0NvbnRhaW5lci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/SVGContainer.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/Shape.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/Shape.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Shape: () => (/* binding */ Shape)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ErrorBoundary.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\");\n\n\n\n\n\n\n\n\nconst Shape = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function Shape2({\n  id,\n  shape,\n  util,\n  index,\n  backgroundIndex,\n  opacity,\n  dprMultiple\n}) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  const { ShapeErrorFallback } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditorComponents)();\n  const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const bgContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  const memoizedStuffRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)({\n    transform: \"\",\n    clipPath: \"none\",\n    width: 0,\n    height: 0,\n    x: 0,\n    y: 0,\n    isCulled: false\n  });\n  (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useQuickReactor)(\n    \"set shape stuff\",\n    () => {\n      const shape2 = editor.getShape(id);\n      if (!shape2)\n        return;\n      const prev = memoizedStuffRef.current;\n      const clipPath = editor.getShapeClipPath(id) ?? \"none\";\n      if (clipPath !== prev.clipPath) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(containerRef.current, \"clip-path\", clipPath);\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainerRef.current, \"clip-path\", clipPath);\n        prev.clipPath = clipPath;\n      }\n      const pageTransform = editor.getShapePageTransform(id);\n      const transform = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_5__.Mat.toCssString(pageTransform);\n      const bounds = editor.getShapeGeometry(shape2).bounds;\n      if (transform !== prev.transform) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(containerRef.current, \"transform\", transform);\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainerRef.current, \"transform\", transform);\n        prev.transform = transform;\n      }\n      const widthRemainder = bounds.w % dprMultiple;\n      const heightRemainder = bounds.h % dprMultiple;\n      const width = widthRemainder === 0 ? bounds.w : bounds.w + (dprMultiple - widthRemainder);\n      const height = heightRemainder === 0 ? bounds.h : bounds.h + (dprMultiple - heightRemainder);\n      if (width !== prev.width || height !== prev.height) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(containerRef.current, \"width\", Math.max(width, dprMultiple) + \"px\");\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(containerRef.current, \"height\", Math.max(height, dprMultiple) + \"px\");\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainerRef.current, \"width\", Math.max(width, dprMultiple) + \"px\");\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainerRef.current, \"height\", Math.max(height, dprMultiple) + \"px\");\n        prev.width = width;\n        prev.height = height;\n      }\n    },\n    [editor]\n  );\n  (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useQuickReactor)(\n    \"set opacity and z-index\",\n    () => {\n      const container = containerRef.current;\n      const bgContainer = bgContainerRef.current;\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(container, \"opacity\", opacity);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainer, \"opacity\", opacity);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(container, \"z-index\", index);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainer, \"z-index\", backgroundIndex);\n    },\n    [opacity, index, backgroundIndex]\n  );\n  (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useQuickReactor)(\n    \"set display\",\n    () => {\n      const shape2 = editor.getShape(id);\n      if (!shape2)\n        return;\n      const culledShapes = editor.getCulledShapes();\n      const isCulled = culledShapes.has(id);\n      if (isCulled !== memoizedStuffRef.current.isCulled) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(containerRef.current, \"display\", isCulled ? \"none\" : \"block\");\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_6__.setStyleProperty)(bgContainerRef.current, \"display\", isCulled ? \"none\" : \"block\");\n        memoizedStuffRef.current.isCulled = isCulled;\n      }\n    },\n    [editor]\n  );\n  const annotateError = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (error) => editor.annotateError(error, { origin: \"shape\", willCrashApp: false }),\n    [editor]\n  );\n  if (!shape)\n    return null;\n  const isFilledShape = \"fill\" in shape.props && shape.props.fill !== \"none\";\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    util.backgroundComponent && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"div\",\n      {\n        ref: bgContainerRef,\n        className: \"tl-shape tl-shape-background\",\n        \"data-shape-type\": shape.type,\n        draggable: false,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_7__.OptionalErrorBoundary, { fallback: ShapeErrorFallback, onError: annotateError, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InnerShapeBackground, { shape, util }) })\n      }\n    ),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"div\",\n      {\n        ref: containerRef,\n        className: \"tl-shape\",\n        \"data-shape-type\": shape.type,\n        \"data-shape-is-filled\": isFilledShape,\n        draggable: false,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_7__.OptionalErrorBoundary, { fallback: ShapeErrorFallback, onError: annotateError, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InnerShape, { shape, util }) })\n      }\n    )\n  ] });\n});\nconst InnerShape = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(\n  function InnerShape2({ shape, util }) {\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useStateTracking)(\n      \"InnerShape:\" + shape.type,\n      () => (\n        // always fetch the latest shape from the store even if the props/meta have not changed, to avoid\n        // calling the render method with stale data.\n        (util.component(util.editor.store.unsafeGetWithoutCapture(shape.id)))\n      )\n    );\n  },\n  (prev, next) => prev.shape.props === next.shape.props && prev.shape.meta === next.shape.meta\n);\nconst InnerShapeBackground = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(\n  function InnerShapeBackground2({\n    shape,\n    util\n  }) {\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useStateTracking)(\n      \"InnerShape:\" + shape.type,\n      () => (\n        // always fetch the latest shape from the store even if the props/meta have not changed, to avoid\n        // calling the render method with stale data.\n        (util.backgroundComponent?.(util.editor.store.unsafeGetWithoutCapture(shape.id)))\n      )\n    );\n  },\n  (prev, next) => prev.shape.props === next.shape.props && prev.shape.meta === next.shape.meta\n);\n\n//# sourceMappingURL=Shape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvU2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUF3RDtBQUNVO0FBQ2hCO0FBQ0M7QUFDb0I7QUFDM0I7QUFDUTtBQUNRO0FBQzVELGNBQWMsMkNBQUk7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsaUJBQWlCLCtEQUFTO0FBQzFCLFVBQVUscUJBQXFCLEVBQUUsbUZBQW1CO0FBQ3BELHVCQUF1Qiw2Q0FBTTtBQUM3Qix5QkFBeUIsNkNBQU07QUFDL0IsMkJBQTJCLDZDQUFNO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsOERBQWU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0VBQWdCO0FBQ3hCLFFBQVEsZ0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvREFBRztBQUMzQjtBQUNBO0FBQ0EsUUFBUSxnRUFBZ0I7QUFDeEIsUUFBUSxnRUFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGdFQUFnQjtBQUN4QixRQUFRLGdFQUFnQjtBQUN4QixRQUFRLGdFQUFnQjtBQUN4QixRQUFRLGdFQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUUsOERBQWU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGdFQUFnQjtBQUN0QixNQUFNLGdFQUFnQjtBQUN0QixNQUFNLGdFQUFnQjtBQUN0QixNQUFNLGdFQUFnQjtBQUN0QixLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUUsOERBQWU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0VBQWdCO0FBQ3hCLFFBQVEsZ0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHdCQUF3QixrREFBVztBQUNuQyw2Q0FBNkMsc0NBQXNDO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdURBQUksQ0FBQyx1REFBUSxJQUFJO0FBQzFDLGdEQUFnRCxzREFBRztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0RBQUcsQ0FBQyxxRUFBcUIsSUFBSSxnRkFBZ0Ysc0RBQUcseUJBQXlCLGFBQWEsR0FBRztBQUMzTDtBQUNBO0FBQ0Esb0JBQW9CLHNEQUFHO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHNEQUFHLENBQUMscUVBQXFCLElBQUksZ0ZBQWdGLHNEQUFHLGVBQWUsYUFBYSxHQUFHO0FBQ2pMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNELG1CQUFtQiwyQ0FBSTtBQUN2Qix5QkFBeUIsYUFBYTtBQUN0QyxXQUFXLCtEQUFnQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsNkJBQTZCLDJDQUFJO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxXQUFXLCtEQUFnQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9TaGFwZS5tanM/ZDE3NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGcmFnbWVudCwganN4LCBqc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyB1c2VRdWlja1JlYWN0b3IsIHVzZVN0YXRlVHJhY2tpbmcgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgbWVtbywgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlRWRpdG9yIH0gZnJvbSBcIi4uL2hvb2tzL3VzZUVkaXRvci5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvckNvbXBvbmVudHMgfSBmcm9tIFwiLi4vaG9va3MvdXNlRWRpdG9yQ29tcG9uZW50cy5tanNcIjtcbmltcG9ydCB7IE1hdCB9IGZyb20gXCIuLi9wcmltaXRpdmVzL01hdC5tanNcIjtcbmltcG9ydCB7IHNldFN0eWxlUHJvcGVydHkgfSBmcm9tIFwiLi4vdXRpbHMvZG9tLm1qc1wiO1xuaW1wb3J0IHsgT3B0aW9uYWxFcnJvckJvdW5kYXJ5IH0gZnJvbSBcIi4vRXJyb3JCb3VuZGFyeS5tanNcIjtcbmNvbnN0IFNoYXBlID0gbWVtbyhmdW5jdGlvbiBTaGFwZTIoe1xuICBpZCxcbiAgc2hhcGUsXG4gIHV0aWwsXG4gIGluZGV4LFxuICBiYWNrZ3JvdW5kSW5kZXgsXG4gIG9wYWNpdHksXG4gIGRwck11bHRpcGxlXG59KSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCB7IFNoYXBlRXJyb3JGYWxsYmFjayB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBjb25zdCBjb250YWluZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGJnQ29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBtZW1vaXplZFN0dWZmUmVmID0gdXNlUmVmKHtcbiAgICB0cmFuc2Zvcm06IFwiXCIsXG4gICAgY2xpcFBhdGg6IFwibm9uZVwiLFxuICAgIHdpZHRoOiAwLFxuICAgIGhlaWdodDogMCxcbiAgICB4OiAwLFxuICAgIHk6IDAsXG4gICAgaXNDdWxsZWQ6IGZhbHNlXG4gIH0pO1xuICB1c2VRdWlja1JlYWN0b3IoXG4gICAgXCJzZXQgc2hhcGUgc3R1ZmZcIixcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBzaGFwZTIgPSBlZGl0b3IuZ2V0U2hhcGUoaWQpO1xuICAgICAgaWYgKCFzaGFwZTIpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IHByZXYgPSBtZW1vaXplZFN0dWZmUmVmLmN1cnJlbnQ7XG4gICAgICBjb25zdCBjbGlwUGF0aCA9IGVkaXRvci5nZXRTaGFwZUNsaXBQYXRoKGlkKSA/PyBcIm5vbmVcIjtcbiAgICAgIGlmIChjbGlwUGF0aCAhPT0gcHJldi5jbGlwUGF0aCkge1xuICAgICAgICBzZXRTdHlsZVByb3BlcnR5KGNvbnRhaW5lclJlZi5jdXJyZW50LCBcImNsaXAtcGF0aFwiLCBjbGlwUGF0aCk7XG4gICAgICAgIHNldFN0eWxlUHJvcGVydHkoYmdDb250YWluZXJSZWYuY3VycmVudCwgXCJjbGlwLXBhdGhcIiwgY2xpcFBhdGgpO1xuICAgICAgICBwcmV2LmNsaXBQYXRoID0gY2xpcFBhdGg7XG4gICAgICB9XG4gICAgICBjb25zdCBwYWdlVHJhbnNmb3JtID0gZWRpdG9yLmdldFNoYXBlUGFnZVRyYW5zZm9ybShpZCk7XG4gICAgICBjb25zdCB0cmFuc2Zvcm0gPSBNYXQudG9Dc3NTdHJpbmcocGFnZVRyYW5zZm9ybSk7XG4gICAgICBjb25zdCBib3VuZHMgPSBlZGl0b3IuZ2V0U2hhcGVHZW9tZXRyeShzaGFwZTIpLmJvdW5kcztcbiAgICAgIGlmICh0cmFuc2Zvcm0gIT09IHByZXYudHJhbnNmb3JtKSB7XG4gICAgICAgIHNldFN0eWxlUHJvcGVydHkoY29udGFpbmVyUmVmLmN1cnJlbnQsIFwidHJhbnNmb3JtXCIsIHRyYW5zZm9ybSk7XG4gICAgICAgIHNldFN0eWxlUHJvcGVydHkoYmdDb250YWluZXJSZWYuY3VycmVudCwgXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtKTtcbiAgICAgICAgcHJldi50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICB9XG4gICAgICBjb25zdCB3aWR0aFJlbWFpbmRlciA9IGJvdW5kcy53ICUgZHByTXVsdGlwbGU7XG4gICAgICBjb25zdCBoZWlnaHRSZW1haW5kZXIgPSBib3VuZHMuaCAlIGRwck11bHRpcGxlO1xuICAgICAgY29uc3Qgd2lkdGggPSB3aWR0aFJlbWFpbmRlciA9PT0gMCA/IGJvdW5kcy53IDogYm91bmRzLncgKyAoZHByTXVsdGlwbGUgLSB3aWR0aFJlbWFpbmRlcik7XG4gICAgICBjb25zdCBoZWlnaHQgPSBoZWlnaHRSZW1haW5kZXIgPT09IDAgPyBib3VuZHMuaCA6IGJvdW5kcy5oICsgKGRwck11bHRpcGxlIC0gaGVpZ2h0UmVtYWluZGVyKTtcbiAgICAgIGlmICh3aWR0aCAhPT0gcHJldi53aWR0aCB8fCBoZWlnaHQgIT09IHByZXYuaGVpZ2h0KSB7XG4gICAgICAgIHNldFN0eWxlUHJvcGVydHkoY29udGFpbmVyUmVmLmN1cnJlbnQsIFwid2lkdGhcIiwgTWF0aC5tYXgod2lkdGgsIGRwck11bHRpcGxlKSArIFwicHhcIik7XG4gICAgICAgIHNldFN0eWxlUHJvcGVydHkoY29udGFpbmVyUmVmLmN1cnJlbnQsIFwiaGVpZ2h0XCIsIE1hdGgubWF4KGhlaWdodCwgZHByTXVsdGlwbGUpICsgXCJweFwiKTtcbiAgICAgICAgc2V0U3R5bGVQcm9wZXJ0eShiZ0NvbnRhaW5lclJlZi5jdXJyZW50LCBcIndpZHRoXCIsIE1hdGgubWF4KHdpZHRoLCBkcHJNdWx0aXBsZSkgKyBcInB4XCIpO1xuICAgICAgICBzZXRTdHlsZVByb3BlcnR5KGJnQ29udGFpbmVyUmVmLmN1cnJlbnQsIFwiaGVpZ2h0XCIsIE1hdGgubWF4KGhlaWdodCwgZHByTXVsdGlwbGUpICsgXCJweFwiKTtcbiAgICAgICAgcHJldi53aWR0aCA9IHdpZHRoO1xuICAgICAgICBwcmV2LmhlaWdodCA9IGhlaWdodDtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtlZGl0b3JdXG4gICk7XG4gIHVzZVF1aWNrUmVhY3RvcihcbiAgICBcInNldCBvcGFjaXR5IGFuZCB6LWluZGV4XCIsXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGFpbmVyID0gY29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgICBjb25zdCBiZ0NvbnRhaW5lciA9IGJnQ29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgICBzZXRTdHlsZVByb3BlcnR5KGNvbnRhaW5lciwgXCJvcGFjaXR5XCIsIG9wYWNpdHkpO1xuICAgICAgc2V0U3R5bGVQcm9wZXJ0eShiZ0NvbnRhaW5lciwgXCJvcGFjaXR5XCIsIG9wYWNpdHkpO1xuICAgICAgc2V0U3R5bGVQcm9wZXJ0eShjb250YWluZXIsIFwiei1pbmRleFwiLCBpbmRleCk7XG4gICAgICBzZXRTdHlsZVByb3BlcnR5KGJnQ29udGFpbmVyLCBcInotaW5kZXhcIiwgYmFja2dyb3VuZEluZGV4KTtcbiAgICB9LFxuICAgIFtvcGFjaXR5LCBpbmRleCwgYmFja2dyb3VuZEluZGV4XVxuICApO1xuICB1c2VRdWlja1JlYWN0b3IoXG4gICAgXCJzZXQgZGlzcGxheVwiLFxuICAgICgpID0+IHtcbiAgICAgIGNvbnN0IHNoYXBlMiA9IGVkaXRvci5nZXRTaGFwZShpZCk7XG4gICAgICBpZiAoIXNoYXBlMilcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY29uc3QgY3VsbGVkU2hhcGVzID0gZWRpdG9yLmdldEN1bGxlZFNoYXBlcygpO1xuICAgICAgY29uc3QgaXNDdWxsZWQgPSBjdWxsZWRTaGFwZXMuaGFzKGlkKTtcbiAgICAgIGlmIChpc0N1bGxlZCAhPT0gbWVtb2l6ZWRTdHVmZlJlZi5jdXJyZW50LmlzQ3VsbGVkKSB7XG4gICAgICAgIHNldFN0eWxlUHJvcGVydHkoY29udGFpbmVyUmVmLmN1cnJlbnQsIFwiZGlzcGxheVwiLCBpc0N1bGxlZCA/IFwibm9uZVwiIDogXCJibG9ja1wiKTtcbiAgICAgICAgc2V0U3R5bGVQcm9wZXJ0eShiZ0NvbnRhaW5lclJlZi5jdXJyZW50LCBcImRpc3BsYXlcIiwgaXNDdWxsZWQgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIik7XG4gICAgICAgIG1lbW9pemVkU3R1ZmZSZWYuY3VycmVudC5pc0N1bGxlZCA9IGlzQ3VsbGVkO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2VkaXRvcl1cbiAgKTtcbiAgY29uc3QgYW5ub3RhdGVFcnJvciA9IHVzZUNhbGxiYWNrKFxuICAgIChlcnJvcikgPT4gZWRpdG9yLmFubm90YXRlRXJyb3IoZXJyb3IsIHsgb3JpZ2luOiBcInNoYXBlXCIsIHdpbGxDcmFzaEFwcDogZmFsc2UgfSksXG4gICAgW2VkaXRvcl1cbiAgKTtcbiAgaWYgKCFzaGFwZSlcbiAgICByZXR1cm4gbnVsbDtcbiAgY29uc3QgaXNGaWxsZWRTaGFwZSA9IFwiZmlsbFwiIGluIHNoYXBlLnByb3BzICYmIHNoYXBlLnByb3BzLmZpbGwgIT09IFwibm9uZVwiO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtcbiAgICB1dGlsLmJhY2tncm91bmRDb21wb25lbnQgJiYgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7XG4gICAgICAgIHJlZjogYmdDb250YWluZXJSZWYsXG4gICAgICAgIGNsYXNzTmFtZTogXCJ0bC1zaGFwZSB0bC1zaGFwZS1iYWNrZ3JvdW5kXCIsXG4gICAgICAgIFwiZGF0YS1zaGFwZS10eXBlXCI6IHNoYXBlLnR5cGUsXG4gICAgICAgIGRyYWdnYWJsZTogZmFsc2UsXG4gICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KE9wdGlvbmFsRXJyb3JCb3VuZGFyeSwgeyBmYWxsYmFjazogU2hhcGVFcnJvckZhbGxiYWNrLCBvbkVycm9yOiBhbm5vdGF0ZUVycm9yLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChJbm5lclNoYXBlQmFja2dyb3VuZCwgeyBzaGFwZSwgdXRpbCB9KSB9KVxuICAgICAgfVxuICAgICksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7XG4gICAgICAgIHJlZjogY29udGFpbmVyUmVmLFxuICAgICAgICBjbGFzc05hbWU6IFwidGwtc2hhcGVcIixcbiAgICAgICAgXCJkYXRhLXNoYXBlLXR5cGVcIjogc2hhcGUudHlwZSxcbiAgICAgICAgXCJkYXRhLXNoYXBlLWlzLWZpbGxlZFwiOiBpc0ZpbGxlZFNoYXBlLFxuICAgICAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChPcHRpb25hbEVycm9yQm91bmRhcnksIHsgZmFsbGJhY2s6IFNoYXBlRXJyb3JGYWxsYmFjaywgb25FcnJvcjogYW5ub3RhdGVFcnJvciwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goSW5uZXJTaGFwZSwgeyBzaGFwZSwgdXRpbCB9KSB9KVxuICAgICAgfVxuICAgIClcbiAgXSB9KTtcbn0pO1xuY29uc3QgSW5uZXJTaGFwZSA9IG1lbW8oXG4gIGZ1bmN0aW9uIElubmVyU2hhcGUyKHsgc2hhcGUsIHV0aWwgfSkge1xuICAgIHJldHVybiB1c2VTdGF0ZVRyYWNraW5nKFxuICAgICAgXCJJbm5lclNoYXBlOlwiICsgc2hhcGUudHlwZSxcbiAgICAgICgpID0+IChcbiAgICAgICAgLy8gYWx3YXlzIGZldGNoIHRoZSBsYXRlc3Qgc2hhcGUgZnJvbSB0aGUgc3RvcmUgZXZlbiBpZiB0aGUgcHJvcHMvbWV0YSBoYXZlIG5vdCBjaGFuZ2VkLCB0byBhdm9pZFxuICAgICAgICAvLyBjYWxsaW5nIHRoZSByZW5kZXIgbWV0aG9kIHdpdGggc3RhbGUgZGF0YS5cbiAgICAgICAgKHV0aWwuY29tcG9uZW50KHV0aWwuZWRpdG9yLnN0b3JlLnVuc2FmZUdldFdpdGhvdXRDYXB0dXJlKHNoYXBlLmlkKSkpXG4gICAgICApXG4gICAgKTtcbiAgfSxcbiAgKHByZXYsIG5leHQpID0+IHByZXYuc2hhcGUucHJvcHMgPT09IG5leHQuc2hhcGUucHJvcHMgJiYgcHJldi5zaGFwZS5tZXRhID09PSBuZXh0LnNoYXBlLm1ldGFcbik7XG5jb25zdCBJbm5lclNoYXBlQmFja2dyb3VuZCA9IG1lbW8oXG4gIGZ1bmN0aW9uIElubmVyU2hhcGVCYWNrZ3JvdW5kMih7XG4gICAgc2hhcGUsXG4gICAgdXRpbFxuICB9KSB7XG4gICAgcmV0dXJuIHVzZVN0YXRlVHJhY2tpbmcoXG4gICAgICBcIklubmVyU2hhcGU6XCIgKyBzaGFwZS50eXBlLFxuICAgICAgKCkgPT4gKFxuICAgICAgICAvLyBhbHdheXMgZmV0Y2ggdGhlIGxhdGVzdCBzaGFwZSBmcm9tIHRoZSBzdG9yZSBldmVuIGlmIHRoZSBwcm9wcy9tZXRhIGhhdmUgbm90IGNoYW5nZWQsIHRvIGF2b2lkXG4gICAgICAgIC8vIGNhbGxpbmcgdGhlIHJlbmRlciBtZXRob2Qgd2l0aCBzdGFsZSBkYXRhLlxuICAgICAgICAodXRpbC5iYWNrZ3JvdW5kQ29tcG9uZW50Py4odXRpbC5lZGl0b3Iuc3RvcmUudW5zYWZlR2V0V2l0aG91dENhcHR1cmUoc2hhcGUuaWQpKSlcbiAgICAgIClcbiAgICApO1xuICB9LFxuICAocHJldiwgbmV4dCkgPT4gcHJldi5zaGFwZS5wcm9wcyA9PT0gbmV4dC5zaGFwZS5wcm9wcyAmJiBwcmV2LnNoYXBlLm1ldGEgPT09IG5leHQuc2hhcGUubWV0YVxuKTtcbmV4cG9ydCB7XG4gIFNoYXBlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2hhcGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/Shape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBackground.mjs":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBackground.mjs ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultBackground: () => (/* binding */ DefaultBackground)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\nfunction DefaultBackground() {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-background\" });\n}\n\n//# sourceMappingURL=DefaultBackground.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRCYWNrZ3JvdW5kLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QztBQUN4QztBQUNBLHlCQUF5QixzREFBRyxVQUFVLDRCQUE0QjtBQUNsRTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRCYWNrZ3JvdW5kLm1qcz83ODM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gRGVmYXVsdEJhY2tncm91bmQoKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRsLWJhY2tncm91bmRcIiB9KTtcbn1cbmV4cG9ydCB7XG4gIERlZmF1bHRCYWNrZ3JvdW5kXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdEJhY2tncm91bmQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBackground.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBrush.mjs":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBrush.mjs ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultBrush: () => (/* binding */ DefaultBrush)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks/useTransform.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\n\n\nconst DefaultBrush = ({ brush, color, opacity, className }) => {\n  const rSvg = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  (0,_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_2__.useTransform)(rSvg, brush.x, brush.y);\n  const w = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.toDomPrecision)(Math.max(1, brush.w));\n  const h = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.toDomPrecision)(Math.max(1, brush.h));\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: \"tl-overlays__item\", ref: rSvg, children: color ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { className: \"tl-brush\", opacity, children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"rect\", { width: w, height: h, fill: color, opacity: 0.75 }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"rect\", { width: w, height: h, fill: \"none\", stroke: color, opacity: 0.1 })\n  ] }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"rect\", { className: `tl-brush tl-brush__default ${className}`, width: w, height: h }) });\n};\n\n//# sourceMappingURL=DefaultBrush.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRCcnVzaC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBOEM7QUFDZjtBQUM2QjtBQUNBO0FBQzVELHdCQUF3QixrQ0FBa0M7QUFDMUQsZUFBZSw2Q0FBTTtBQUNyQixFQUFFLHFFQUFZO0FBQ2QsWUFBWSxxRUFBYztBQUMxQixZQUFZLHFFQUFjO0FBQzFCLHlCQUF5QixzREFBRyxVQUFVLDZFQUE2RSx1REFBSSxRQUFRO0FBQy9ILG9CQUFvQixzREFBRyxXQUFXLGlEQUFpRDtBQUNuRixvQkFBb0Isc0RBQUcsV0FBVyxnRUFBZ0U7QUFDbEcsS0FBSyxvQkFBb0Isc0RBQUcsV0FBVyx5Q0FBeUMsVUFBVSx3QkFBd0IsR0FBRztBQUNySDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRCcnVzaC5tanM/ODdkOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlVHJhbnNmb3JtIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZVRyYW5zZm9ybS5tanNcIjtcbmltcG9ydCB7IHRvRG9tUHJlY2lzaW9uIH0gZnJvbSBcIi4uLy4uL3ByaW1pdGl2ZXMvdXRpbHMubWpzXCI7XG5jb25zdCBEZWZhdWx0QnJ1c2ggPSAoeyBicnVzaCwgY29sb3IsIG9wYWNpdHksIGNsYXNzTmFtZSB9KSA9PiB7XG4gIGNvbnN0IHJTdmcgPSB1c2VSZWYobnVsbCk7XG4gIHVzZVRyYW5zZm9ybShyU3ZnLCBicnVzaC54LCBicnVzaC55KTtcbiAgY29uc3QgdyA9IHRvRG9tUHJlY2lzaW9uKE1hdGgubWF4KDEsIGJydXNoLncpKTtcbiAgY29uc3QgaCA9IHRvRG9tUHJlY2lzaW9uKE1hdGgubWF4KDEsIGJydXNoLmgpKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJzdmdcIiwgeyBjbGFzc05hbWU6IFwidGwtb3ZlcmxheXNfX2l0ZW1cIiwgcmVmOiByU3ZnLCBjaGlsZHJlbjogY29sb3IgPyAvKiBAX19QVVJFX18gKi8ganN4cyhcImdcIiwgeyBjbGFzc05hbWU6IFwidGwtYnJ1c2hcIiwgb3BhY2l0eSwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicmVjdFwiLCB7IHdpZHRoOiB3LCBoZWlnaHQ6IGgsIGZpbGw6IGNvbG9yLCBvcGFjaXR5OiAwLjc1IH0pLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJyZWN0XCIsIHsgd2lkdGg6IHcsIGhlaWdodDogaCwgZmlsbDogXCJub25lXCIsIHN0cm9rZTogY29sb3IsIG9wYWNpdHk6IDAuMSB9KVxuICBdIH0pIDogLyogQF9fUFVSRV9fICovIGpzeChcInJlY3RcIiwgeyBjbGFzc05hbWU6IGB0bC1icnVzaCB0bC1icnVzaF9fZGVmYXVsdCAke2NsYXNzTmFtZX1gLCB3aWR0aDogdywgaGVpZ2h0OiBoIH0pIH0pO1xufTtcbmV4cG9ydCB7XG4gIERlZmF1bHRCcnVzaFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmF1bHRCcnVzaC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBrush.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCanvas.mjs":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCanvas.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultCanvas: () => (/* binding */ DefaultCanvas)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useCanvasEvents_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../hooks/useCanvasEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCanvasEvents.mjs\");\n/* harmony import */ var _hooks_useCoarsePointer_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../hooks/useCoarsePointer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCoarsePointer.mjs\");\n/* harmony import */ var _hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../hooks/useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _hooks_useDocumentEvents_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../hooks/useDocumentEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDocumentEvents.mjs\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _hooks_useFixSafariDoubleTapZoomPencilEvents_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../hooks/useFixSafariDoubleTapZoomPencilEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useFixSafariDoubleTapZoomPencilEvents.mjs\");\n/* harmony import */ var _hooks_useGestureEvents_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../hooks/useGestureEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useGestureEvents.mjs\");\n/* harmony import */ var _hooks_useHandleEvents_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../hooks/useHandleEvents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useHandleEvents.mjs\");\n/* harmony import */ var _hooks_useScreenBounds_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../hooks/useScreenBounds.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useScreenBounds.mjs\");\n/* harmony import */ var _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../utils/debug-flags.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _utils_nearestMultiple_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../utils/nearestMultiple.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/nearestMultiple.mjs\");\n/* harmony import */ var _GeometryDebuggingView_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../GeometryDebuggingView.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/GeometryDebuggingView.mjs\");\n/* harmony import */ var _LiveCollaborators_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../LiveCollaborators.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/LiveCollaborators.mjs\");\n/* harmony import */ var _Shape_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../Shape.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/Shape.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction DefaultCanvas({ className }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const { Background, SvgDefs } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  const rCanvas = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const rHtmlLayer = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const rHtmlLayer2 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const container = (0,_hooks_useContainer_mjs__WEBPACK_IMPORTED_MODULE_7__.useContainer)();\n  (0,_hooks_useScreenBounds_mjs__WEBPACK_IMPORTED_MODULE_14__.useScreenBounds)(rCanvas);\n  (0,_hooks_useDocumentEvents_mjs__WEBPACK_IMPORTED_MODULE_8__.useDocumentEvents)();\n  (0,_hooks_useCoarsePointer_mjs__WEBPACK_IMPORTED_MODULE_6__.useCoarsePointer)();\n  (0,_hooks_useGestureEvents_mjs__WEBPACK_IMPORTED_MODULE_12__.useGestureEvents)(rCanvas);\n  (0,_hooks_useFixSafariDoubleTapZoomPencilEvents_mjs__WEBPACK_IMPORTED_MODULE_11__.useFixSafariDoubleTapZoomPencilEvents)(rCanvas);\n  const rMemoizedStuff = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)({ lodDisableTextOutline: false, allowTextOutline: true });\n  (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useQuickReactor)(\n    \"position layers\",\n    function positionLayersWhenCameraMoves() {\n      const { x, y, z } = editor.getCamera();\n      if (rMemoizedStuff.current.allowTextOutline && editor.environment.isSafari) {\n        container.style.setProperty(\"--tl-text-outline\", \"none\");\n        rMemoizedStuff.current.allowTextOutline = false;\n      }\n      if (rMemoizedStuff.current.allowTextOutline && z < editor.options.textShadowLod !== rMemoizedStuff.current.lodDisableTextOutline) {\n        const lodDisableTextOutline = z < editor.options.textShadowLod;\n        container.style.setProperty(\n          \"--tl-text-outline\",\n          lodDisableTextOutline ? \"none\" : `var(--tl-text-outline-reference)`\n        );\n        rMemoizedStuff.current.lodDisableTextOutline = lodDisableTextOutline;\n      }\n      const offset = z >= 1 ? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.modulate)(z, [1, 8], [0.125, 0.5], true) : (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.modulate)(z, [0.1, 1], [-2, 0.125], true);\n      const transform = `scale(${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_17__.toDomPrecision)(z)}) translate(${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_17__.toDomPrecision)(\n        x + offset\n      )}px,${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_17__.toDomPrecision)(y + offset)}px)`;\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_19__.setStyleProperty)(rHtmlLayer.current, \"transform\", transform);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_19__.setStyleProperty)(rHtmlLayer2.current, \"transform\", transform);\n    },\n    [editor, container]\n  );\n  const events = (0,_hooks_useCanvasEvents_mjs__WEBPACK_IMPORTED_MODULE_5__.useCanvasEvents)();\n  const shapeSvgDefs = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"shapeSvgDefs\",\n    () => {\n      const shapeSvgDefsByKey = /* @__PURE__ */ new Map();\n      for (const util of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.objectMapValues)(editor.shapeUtils)) {\n        if (!util)\n          return;\n        const defs = util.getCanvasSvgDefs();\n        for (const { key, component: Component } of defs) {\n          if (shapeSvgDefsByKey.has(key))\n            continue;\n          shapeSvgDefsByKey.set(key, /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Component, {}, key));\n        }\n      }\n      return [...shapeSvgDefsByKey.values()];\n    },\n    [editor]\n  );\n  const hideShapes = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"debug_shapes\", () => _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_18__.debugFlags.hideShapes.get(), [_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_18__.debugFlags]);\n  const debugSvg = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"debug_svg\", () => _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_18__.debugFlags.debugSvg.get(), [_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_18__.debugFlags]);\n  const debugGeometry = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"debug_geometry\", () => _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_18__.debugFlags.debugGeometry.get(), [\n    _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_18__.debugFlags\n  ]);\n  const isEditingAnything = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"isEditingAnything\",\n    () => editor.getEditingShapeId() !== null,\n    [editor]\n  );\n  const isSelectingAnything = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"isSelectingAnything\",\n    () => !!editor.getSelectedShapeIds().length,\n    [editor]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\n    \"div\",\n    {\n      ref: rCanvas,\n      draggable: false,\n      \"data-iseditinganything\": isEditingAnything,\n      \"data-isselectinganything\": isSelectingAnything,\n      className: classnames__WEBPACK_IMPORTED_MODULE_3__(\"tl-canvas\", className),\n      \"data-testid\": \"canvas\",\n      ...events,\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: \"tl-svg-context\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"defs\", { children: [\n          shapeSvgDefs,\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CursorDef, {}),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(CollaboratorHintDef, {}),\n          SvgDefs && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SvgDefs, {})\n        ] }) }),\n        Background && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-background__wrapper\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Background, {}) }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(GridWrapper, {}),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { ref: rHtmlLayer, className: \"tl-html-layer tl-shapes\", draggable: false, children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OnTheCanvasWrapper, {}),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SelectionBackgroundWrapper, {}),\n          hideShapes ? null : debugSvg ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ShapesWithSVGs, {}) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ShapesToDisplay, {})\n        ] }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-overlays\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { ref: rHtmlLayer2, className: \"tl-html-layer\", children: [\n          debugGeometry ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_GeometryDebuggingView_mjs__WEBPACK_IMPORTED_MODULE_21__.GeometryDebuggingView, {}) : null,\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(HandlesWrapper, {}),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(BrushWrapper, {}),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ScribbleWrapper, {}),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ZoomBrushWrapper, {}),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ShapeIndicators, {}),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(HintedShapeIndicator, {}),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SnapIndicatorWrapper, {}),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SelectionForegroundWrapper, {}),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_LiveCollaborators_mjs__WEBPACK_IMPORTED_MODULE_22__.LiveCollaborators, {})\n        ] }) }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(MovingCameraHitTestBlocker, {})\n      ]\n    }\n  );\n}\nfunction GridWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const gridSize = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"gridSize\", () => editor.getDocumentSettings().gridSize, [editor]);\n  const { x, y, z } = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"camera\", () => editor.getCamera(), [editor]);\n  const isGridMode = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"isGridMode\", () => editor.getInstanceState().isGridMode, [editor]);\n  const { Grid } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  if (!(Grid && isGridMode))\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Grid, { x, y, z, size: gridSize });\n}\nfunction ScribbleWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const scribbles = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"scribbles\", () => editor.getInstanceState().scribbles, [editor]);\n  const zoomLevel = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"zoomLevel\", () => editor.getZoomLevel(), [editor]);\n  const { Scribble } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  if (!(Scribble && scribbles.length))\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: scribbles.map((scribble) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    Scribble,\n    {\n      className: \"tl-user-scribble\",\n      scribble,\n      zoom: zoomLevel\n    },\n    scribble.id\n  )) });\n}\nfunction BrushWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const brush = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"brush\", () => editor.getInstanceState().brush, [editor]);\n  const { Brush } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  if (!(Brush && brush))\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Brush, { className: \"tl-user-brush\", brush });\n}\nfunction ZoomBrushWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const zoomBrush = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"zoomBrush\", () => editor.getInstanceState().zoomBrush, [editor]);\n  const { ZoomBrush } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  if (!(ZoomBrush && zoomBrush))\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ZoomBrush, { className: \"tl-user-brush tl-zoom-brush\", brush: zoomBrush });\n}\nfunction SnapIndicatorWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const lines = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"snapLines\", () => editor.snaps.getIndicators(), [editor]);\n  const zoomLevel = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"zoomLevel\", () => editor.getZoomLevel(), [editor]);\n  const { SnapIndicator } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  if (!(SnapIndicator && lines.length > 0))\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: lines.map((line) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SnapIndicator, { className: \"tl-user-snapline\", line, zoom: zoomLevel }, line.id)) });\n}\nfunction HandlesWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const shapeIdWithHandles = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"handles shapeIdWithHandles\",\n    () => {\n      const { isReadonly, isChangingStyle } = editor.getInstanceState();\n      if (isReadonly || isChangingStyle)\n        return false;\n      const onlySelectedShape = editor.getOnlySelectedShape();\n      if (!onlySelectedShape)\n        return false;\n      const handles = editor.getShapeHandles(onlySelectedShape);\n      if (!handles)\n        return false;\n      return onlySelectedShape.id;\n    },\n    [editor]\n  );\n  if (!shapeIdWithHandles)\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(HandlesWrapperInner, { shapeId: shapeIdWithHandles });\n}\nfunction HandlesWrapperInner({ shapeId }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const { Handles } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  const zoomLevel = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"zoomLevel\", () => editor.getZoomLevel(), [editor]);\n  const isCoarse = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"coarse pointer\", () => editor.getInstanceState().isCoarsePointer, [\n    editor\n  ]);\n  const transform = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"handles transform\", () => editor.getShapePageTransform(shapeId), [\n    editor,\n    shapeId\n  ]);\n  const handles = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"handles\",\n    () => {\n      const handles2 = editor.getShapeHandles(shapeId);\n      if (!handles2)\n        return null;\n      const minDistBetweenVirtualHandlesAndRegularHandles = (isCoarse ? editor.options.coarseHandleRadius : editor.options.handleRadius) / zoomLevel * 2;\n      return handles2.filter(\n        (handle) => (\n          // if the handle isn't a virtual handle, we'll display it\n          (// but for virtual handles, we'll only display them if they're far enough away from vertex handles\n          handle.type !== \"virtual\" || !handles2.some(\n            (h) => (\n              // skip the handle we're checking against\n              (// and check that their distance isn't below the minimum distance\n              h !== handle && // only check against vertex handles\n              h.type === \"vertex\" && _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_16__.Vec.Dist(handle, h) < minDistBetweenVirtualHandlesAndRegularHandles)\n            )\n          ))\n        )\n      ).sort((a) => a.type === \"vertex\" ? 1 : -1);\n    },\n    [editor, zoomLevel, isCoarse, shapeId]\n  );\n  if (!Handles || !handles || !transform) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Handles, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { transform: _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_15__.Mat.toCssString(transform), children: handles.map((handle) => {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      HandleWrapper,\n      {\n        shapeId,\n        handle,\n        zoom: zoomLevel,\n        isCoarse\n      },\n      handle.id\n    );\n  }) }) });\n}\nfunction HandleWrapper({\n  shapeId,\n  handle,\n  zoom,\n  isCoarse\n}) {\n  const events = (0,_hooks_useHandleEvents_mjs__WEBPACK_IMPORTED_MODULE_13__.useHandleEvents)(shapeId, handle.id);\n  const { Handle } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  if (!Handle)\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { \"aria-label\": \"handle\", transform: `translate(${handle.x}, ${handle.y})`, ...events, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Handle, { shapeId, handle, zoom, isCoarse }) });\n}\nfunction ShapesWithSVGs() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const renderingShapes = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"rendering shapes\", () => editor.getRenderingShapes(), [editor]);\n  const dprMultiple = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"dpr multiple\",\n    () => (\n      // dprMultiple is the smallest number we can multiply dpr by to get an integer\n      // it's usually 1, 2, or 4 (for e.g. dpr of 2, 2.5 and 2.25 respectively)\n      ((0,_utils_nearestMultiple_mjs__WEBPACK_IMPORTED_MODULE_20__.nearestMultiple)(Math.floor(editor.getInstanceState().devicePixelRatio * 100) / 100))\n    ),\n    [editor]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: renderingShapes.map((result) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react__WEBPACK_IMPORTED_MODULE_4__.Fragment, { children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Shape_mjs__WEBPACK_IMPORTED_MODULE_23__.Shape, { ...result, dprMultiple }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DebugSvgCopy, { id: result.id })\n  ] }, result.id + \"_fragment\")) });\n}\nfunction ReflowIfNeeded() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const culledShapesRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(/* @__PURE__ */ new Set());\n  (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useQuickReactor)(\n    \"reflow for culled shapes\",\n    () => {\n      const culledShapes = editor.getCulledShapes();\n      if (culledShapesRef.current.size === culledShapes.size && [...culledShapes].every((id) => culledShapesRef.current.has(id)))\n        return;\n      culledShapesRef.current = culledShapes;\n      const canvas = document.getElementsByClassName(\"tl-canvas\");\n      if (canvas.length === 0)\n        return;\n      const _height = canvas[0].offsetHeight;\n    },\n    [editor]\n  );\n  return null;\n}\nfunction ShapesToDisplay() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const renderingShapes = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"rendering shapes\", () => editor.getRenderingShapes(), [editor]);\n  const dprMultiple = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"dpr multiple\",\n    () => (\n      // dprMultiple is the smallest number we can multiply dpr by to get an integer\n      // it's usually 1, 2, or 4 (for e.g. dpr of 2, 2.5 and 2.25 respectively)\n      ((0,_utils_nearestMultiple_mjs__WEBPACK_IMPORTED_MODULE_20__.nearestMultiple)(Math.floor(editor.getInstanceState().devicePixelRatio * 100) / 100))\n    ),\n    [editor]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    renderingShapes.map((result) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Shape_mjs__WEBPACK_IMPORTED_MODULE_23__.Shape, { ...result, dprMultiple }, result.id + \"_shape\")),\n    editor.environment.isSafari && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ReflowIfNeeded, {})\n  ] });\n}\nfunction ShapeIndicators() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const renderingShapes = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"rendering shapes\", () => editor.getRenderingShapes(), [editor]);\n  const rPreviousSelectedShapeIds = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(/* @__PURE__ */ new Set());\n  const idsToDisplay = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"should display selected ids\",\n    () => {\n      const prev = rPreviousSelectedShapeIds.current;\n      const next = /* @__PURE__ */ new Set();\n      if (editor.isInAny(\n        \"select.idle\",\n        \"select.brushing\",\n        \"select.scribble_brushing\",\n        \"select.editing_shape\",\n        \"select.pointing_shape\",\n        \"select.pointing_selection\",\n        \"select.pointing_handle\"\n      ) && !editor.getInstanceState().isChangingStyle) {\n        const selected = editor.getSelectedShapeIds();\n        for (const id of selected) {\n          next.add(id);\n        }\n        if (editor.isInAny(\"select.idle\", \"select.editing_shape\")) {\n          const instanceState = editor.getInstanceState();\n          if (instanceState.isHoveringCanvas && !instanceState.isCoarsePointer) {\n            const hovered = editor.getHoveredShapeId();\n            if (hovered)\n              next.add(hovered);\n          }\n        }\n      }\n      if (prev.size !== next.size) {\n        rPreviousSelectedShapeIds.current = next;\n        return next;\n      }\n      for (const id of next) {\n        if (!prev.has(id)) {\n          rPreviousSelectedShapeIds.current = next;\n          return next;\n        }\n      }\n      return prev;\n    },\n    [editor]\n  );\n  const { ShapeIndicator } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  if (!ShapeIndicator)\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: renderingShapes.map(({ id }) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ShapeIndicator, { shapeId: id, hidden: !idsToDisplay.has(id) }, id + \"_indicator\")) });\n}\nfunction HintedShapeIndicator() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const { ShapeIndicator } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  const ids = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"hinting shape ids\", () => (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.dedupe)(editor.getHintingShapeIds()), [editor]);\n  if (!ids.length)\n    return null;\n  if (!ShapeIndicator)\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: ids.map((id) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ShapeIndicator, { className: \"tl-user-indicator__hint\", shapeId: id }, id + \"_hinting\")) });\n}\nfunction CursorDef() {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { id: \"cursor\", children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { fill: \"rgba(0,0,0,.2)\", transform: \"translate(-11,-11)\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z\" }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z\" })\n    ] }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { fill: \"white\", transform: \"translate(-12,-12)\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z\" }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z\" })\n    ] }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { fill: \"currentColor\", transform: \"translate(-12,-12)\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z\" }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: \"m13 10.814v11.188l2.969-2.866.428-.139h4.768z\" })\n    ] })\n  ] });\n}\nfunction CollaboratorHintDef() {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { id: \"cursor_hint\", fill: \"currentColor\", d: \"M -2,-5 2,0 -2,5 Z\" });\n}\nfunction DebugSvgCopy({ id }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const [image, setImage] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(null);\n  const isInRoot = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"is in root\",\n    () => {\n      const shape = editor.getShape(id);\n      return shape?.parentId === editor.getCurrentPageId();\n    },\n    [editor, id]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    if (!isInRoot)\n      return;\n    let latest = null;\n    const unsubscribe = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.react)(\"shape to svg\", async () => {\n      const renderId = Math.random();\n      latest = renderId;\n      const isSingleFrame = editor.isShapeOfType(id, \"frame\");\n      const padding = isSingleFrame ? 0 : 10;\n      let bounds = editor.getShapePageBounds(id);\n      if (!bounds)\n        return;\n      bounds = bounds.clone().expandBy(padding);\n      const result = await editor.getSvgString([id], {\n        padding,\n        background: editor.getInstanceState().exportBackground\n      });\n      if (latest !== renderId || !result)\n        return;\n      const svgDataUrl = `data:image/svg+xml;utf8,${encodeURIComponent(result.svg)}`;\n      setImage({ src: svgDataUrl, bounds });\n    });\n    return () => {\n      latest = null;\n      unsubscribe();\n    };\n  }, [editor, id, isInRoot]);\n  if (!isInRoot || !image)\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"img\",\n    {\n      src: image.src,\n      width: image.bounds.width,\n      height: image.bounds.height,\n      style: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        transform: `translate(${image.bounds.x}px, ${image.bounds.maxY + 12}px)`,\n        outline: \"1px solid black\",\n        maxWidth: \"none\"\n      }\n    }\n  );\n}\nfunction SelectionForegroundWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const selectionRotation = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"selection rotation\", () => editor.getSelectionRotation(), [\n    editor\n  ]);\n  const selectionBounds = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"selection bounds\",\n    () => editor.getSelectionRotatedPageBounds(),\n    [editor]\n  );\n  const { SelectionForeground } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  if (!selectionBounds || !SelectionForeground)\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SelectionForeground, { bounds: selectionBounds, rotation: selectionRotation });\n}\nfunction SelectionBackgroundWrapper() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const selectionRotation = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"selection rotation\", () => editor.getSelectionRotation(), [\n    editor\n  ]);\n  const selectionBounds = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"selection bounds\",\n    () => editor.getSelectionRotatedPageBounds(),\n    [editor]\n  );\n  const { SelectionBackground } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  if (!selectionBounds || !SelectionBackground)\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SelectionBackground, { bounds: selectionBounds, rotation: selectionRotation });\n}\nfunction OnTheCanvasWrapper() {\n  const { OnTheCanvas } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_10__.useEditorComponents)();\n  if (!OnTheCanvas)\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OnTheCanvas, {});\n}\nfunction MovingCameraHitTestBlocker() {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_9__.useEditor)();\n  const cameraState = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"camera state\", () => editor.getCameraState(), [editor]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"div\",\n    {\n      className: classnames__WEBPACK_IMPORTED_MODULE_3__(\"tl-hit-test-blocker\", {\n        \"tl-hit-test-blocker__hidden\": cameraState === \"idle\"\n      })\n    }\n  );\n}\n\n//# sourceMappingURL=DefaultCanvas.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDYW52YXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDUztBQUNDO0FBQzlCO0FBQ3VDO0FBQ1Q7QUFDRTtBQUNSO0FBQ1U7QUFDaEI7QUFDb0I7QUFDb0M7QUFDMUM7QUFDRjtBQUNBO0FBQ25CO0FBQ0E7QUFDYTtBQUNIO0FBQ0Y7QUFDVztBQUNHO0FBQ1I7QUFDeEI7QUFDckMseUJBQXlCLFdBQVc7QUFDcEMsaUJBQWlCLCtEQUFTO0FBQzFCLFVBQVUsc0JBQXNCLEVBQUUsb0ZBQW1CO0FBQ3JELGtCQUFrQiw2Q0FBTTtBQUN4QixxQkFBcUIsNkNBQU07QUFDM0Isc0JBQXNCLDZDQUFNO0FBQzVCLG9CQUFvQixxRUFBWTtBQUNoQyxFQUFFLDRFQUFlO0FBQ2pCLEVBQUUsK0VBQWlCO0FBQ25CLEVBQUUsNkVBQWdCO0FBQ2xCLEVBQUUsOEVBQWdCO0FBQ2xCLEVBQUUsd0hBQXFDO0FBQ3ZDLHlCQUF5Qiw2Q0FBTSxHQUFHLHNEQUFzRDtBQUN4RixFQUFFLDhEQUFlO0FBQ2pCO0FBQ0E7QUFDQSxjQUFjLFVBQVU7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHVEQUFRLGtDQUFrQyx1REFBUTtBQUNoRixpQ0FBaUMsc0VBQWMsSUFBSSxjQUFjLHNFQUFjO0FBQy9FO0FBQ0EsUUFBUSxLQUFLLHNFQUFjLGFBQWE7QUFDeEMsTUFBTSxpRUFBZ0I7QUFDdEIsTUFBTSxpRUFBZ0I7QUFDdEIsS0FBSztBQUNMO0FBQ0E7QUFDQSxpQkFBaUIsMkVBQWU7QUFDaEMsdUJBQXVCLHVEQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw4REFBZTtBQUN4QztBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsNEJBQTRCO0FBQ2pEO0FBQ0E7QUFDQSxxREFBcUQsc0RBQUcsY0FBYztBQUN0RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHFCQUFxQix1REFBUSx1QkFBdUIsK0RBQVUsb0JBQW9CLCtEQUFVO0FBQzVGLG1CQUFtQix1REFBUSxvQkFBb0IsK0RBQVUsa0JBQWtCLCtEQUFVO0FBQ3JGLHdCQUF3Qix1REFBUSx5QkFBeUIsK0RBQVU7QUFDbkUsSUFBSSwrREFBVTtBQUNkO0FBQ0EsNEJBQTRCLHVEQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHVEQUFRO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVEQUFJO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1Q0FBVTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQUcsVUFBVSx1REFBdUQsdURBQUksV0FBVztBQUMzRztBQUNBLDBCQUEwQixzREFBRyxjQUFjO0FBQzNDLDBCQUEwQixzREFBRyx3QkFBd0I7QUFDckQscUNBQXFDLHNEQUFHLFlBQVk7QUFDcEQsV0FBVyxHQUFHO0FBQ2Qsc0NBQXNDLHNEQUFHLFVBQVUsK0RBQStELHNEQUFHLGVBQWUsR0FBRztBQUN2SSx3QkFBd0Isc0RBQUcsZ0JBQWdCO0FBQzNDLHdCQUF3Qix1REFBSSxVQUFVO0FBQ3RDLDBCQUEwQixzREFBRyx1QkFBdUI7QUFDcEQsMEJBQTBCLHNEQUFHLCtCQUErQjtBQUM1RCx5REFBeUQsc0RBQUcsbUJBQW1CLG9CQUFvQixzREFBRyxvQkFBb0I7QUFDMUgsV0FBVztBQUNYLHdCQUF3QixzREFBRyxVQUFVLG9EQUFvRCx1REFBSSxVQUFVO0FBQ3ZHLDBDQUEwQyxzREFBRyxDQUFDLDhFQUFxQixJQUFJO0FBQ3ZFLDBCQUEwQixzREFBRyxtQkFBbUI7QUFDaEQsMEJBQTBCLHNEQUFHLGlCQUFpQjtBQUM5QywwQkFBMEIsc0RBQUcsb0JBQW9CO0FBQ2pELDBCQUEwQixzREFBRyxxQkFBcUI7QUFDbEQsMEJBQTBCLHNEQUFHLG9CQUFvQjtBQUNqRCwwQkFBMEIsc0RBQUcseUJBQXlCO0FBQ3RELDBCQUEwQixzREFBRyx5QkFBeUI7QUFDdEQsMEJBQTBCLHNEQUFHLCtCQUErQjtBQUM1RCwwQkFBMEIsc0RBQUcsQ0FBQyxzRUFBaUIsSUFBSTtBQUNuRCxXQUFXLEdBQUc7QUFDZCx3QkFBd0Isc0RBQUcsK0JBQStCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQVM7QUFDMUIsbUJBQW1CLHVEQUFRO0FBQzNCLFVBQVUsVUFBVSxFQUFFLHVEQUFRO0FBQzlCLHFCQUFxQix1REFBUTtBQUM3QixVQUFVLE9BQU8sRUFBRSxvRkFBbUI7QUFDdEM7QUFDQTtBQUNBLHlCQUF5QixzREFBRyxTQUFTLHlCQUF5QjtBQUM5RDtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFTO0FBQzFCLG9CQUFvQix1REFBUTtBQUM1QixvQkFBb0IsdURBQVE7QUFDNUIsVUFBVSxXQUFXLEVBQUUsb0ZBQW1CO0FBQzFDO0FBQ0E7QUFDQSx5QkFBeUIsc0RBQUcsQ0FBQyx1REFBUSxJQUFJLHNEQUFzRCxzREFBRztBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQVM7QUFDMUIsZ0JBQWdCLHVEQUFRO0FBQ3hCLFVBQVUsUUFBUSxFQUFFLG9GQUFtQjtBQUN2QztBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLFVBQVUsbUNBQW1DO0FBQ3pFO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQVM7QUFDMUIsb0JBQW9CLHVEQUFRO0FBQzVCLFVBQVUsWUFBWSxFQUFFLG9GQUFtQjtBQUMzQztBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLGNBQWMsNERBQTREO0FBQ3RHO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQVM7QUFDMUIsZ0JBQWdCLHVEQUFRO0FBQ3hCLG9CQUFvQix1REFBUTtBQUM1QixVQUFVLGdCQUFnQixFQUFFLG9GQUFtQjtBQUMvQztBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLENBQUMsdURBQVEsSUFBSSw4Q0FBOEMsc0RBQUcsa0JBQWtCLHNEQUFzRCxhQUFhO0FBQy9LO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQVM7QUFDMUIsNkJBQTZCLHVEQUFRO0FBQ3JDO0FBQ0E7QUFDQSxjQUFjLDhCQUE4QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsc0RBQUcsd0JBQXdCLDZCQUE2QjtBQUNqRjtBQUNBLCtCQUErQixTQUFTO0FBQ3hDLGlCQUFpQiwrREFBUztBQUMxQixVQUFVLFVBQVUsRUFBRSxvRkFBbUI7QUFDekMsb0JBQW9CLHVEQUFRO0FBQzVCLG1CQUFtQix1REFBUTtBQUMzQjtBQUNBO0FBQ0Esb0JBQW9CLHVEQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBUTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMscURBQUc7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzREFBRyxZQUFZLDBCQUEwQixzREFBRyxRQUFRLFdBQVcscURBQUc7QUFDM0YsMkJBQTJCLHNEQUFHO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRyxHQUFHLEdBQUc7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsaUJBQWlCLDRFQUFlO0FBQ2hDLFVBQVUsU0FBUyxFQUFFLG9GQUFtQjtBQUN4QztBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLFFBQVEsZ0RBQWdELFNBQVMsSUFBSSxTQUFTLHlDQUF5QyxzREFBRyxXQUFXLGlDQUFpQyxHQUFHO0FBQ3JNO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQVM7QUFDMUIsMEJBQTBCLHVEQUFRO0FBQ2xDLHNCQUFzQix1REFBUTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sNEVBQWU7QUFDdEI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLENBQUMsdURBQVEsSUFBSSwwREFBMEQsdURBQUksQ0FBQywyQ0FBUyxJQUFJO0FBQ3JILG9CQUFvQixzREFBRyxDQUFDLDhDQUFLLElBQUksd0JBQXdCO0FBQ3pELG9CQUFvQixzREFBRyxpQkFBaUIsZUFBZTtBQUN2RCxLQUFLLDZCQUE2QjtBQUNsQztBQUNBO0FBQ0EsaUJBQWlCLCtEQUFTO0FBQzFCLDBCQUEwQiw2Q0FBTTtBQUNoQyxFQUFFLDhEQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQVM7QUFDMUIsMEJBQTBCLHVEQUFRO0FBQ2xDLHNCQUFzQix1REFBUTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sNEVBQWU7QUFDdEI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVEQUFJLENBQUMsdURBQVEsSUFBSTtBQUMxQyxvREFBb0Qsc0RBQUcsQ0FBQyw4Q0FBSyxJQUFJLHdCQUF3QjtBQUN6RixtREFBbUQsc0RBQUcsbUJBQW1CO0FBQ3pFLEtBQUs7QUFDTDtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFTO0FBQzFCLDBCQUEwQix1REFBUTtBQUNsQyxvQ0FBb0MsNkNBQU07QUFDMUMsdUJBQXVCLHVEQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxVQUFVLGlCQUFpQixFQUFFLG9GQUFtQjtBQUNoRDtBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLENBQUMsdURBQVEsSUFBSSxpQ0FBaUMsSUFBSSxxQkFBcUIsc0RBQUcsbUJBQW1CLDRDQUE0Qyx1QkFBdUI7QUFDNUw7QUFDQTtBQUNBLGlCQUFpQiwrREFBUztBQUMxQixVQUFVLGlCQUFpQixFQUFFLG9GQUFtQjtBQUNoRCxjQUFjLHVEQUFRLDRCQUE0QixxREFBTTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzREFBRyxDQUFDLHVEQUFRLElBQUksMENBQTBDLHNEQUFHLG1CQUFtQixtREFBbUQscUJBQXFCO0FBQ2pMO0FBQ0E7QUFDQSx5QkFBeUIsdURBQUksUUFBUTtBQUNyQyxvQkFBb0IsdURBQUksUUFBUTtBQUNoQyxzQkFBc0Isc0RBQUcsV0FBVywwREFBMEQ7QUFDOUYsc0JBQXNCLHNEQUFHLFdBQVcsNkRBQTZEO0FBQ2pHLE9BQU87QUFDUCxvQkFBb0IsdURBQUksUUFBUTtBQUNoQyxzQkFBc0Isc0RBQUcsV0FBVywwREFBMEQ7QUFDOUYsc0JBQXNCLHNEQUFHLFdBQVcsNkRBQTZEO0FBQ2pHLE9BQU87QUFDUCxvQkFBb0IsdURBQUksUUFBUTtBQUNoQyxzQkFBc0Isc0RBQUcsV0FBVyxzREFBc0Q7QUFDMUYsc0JBQXNCLHNEQUFHLFdBQVcsb0RBQW9EO0FBQ3hGLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLHlCQUF5QixzREFBRyxXQUFXLGtFQUFrRTtBQUN6RztBQUNBLHdCQUF3QixJQUFJO0FBQzVCLGlCQUFpQiwrREFBUztBQUMxQiw0QkFBNEIsK0NBQVE7QUFDcEMsbUJBQW1CLHVEQUFRO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9EQUFLO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLDZDQUE2QyxPQUFPLCtCQUErQjtBQUNuRixpQkFBaUIseUJBQXlCO0FBQzFDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EseUJBQXlCLHNEQUFHO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxlQUFlLE1BQU0sdUJBQXVCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFTO0FBQzFCLDRCQUE0Qix1REFBUTtBQUNwQztBQUNBO0FBQ0EsMEJBQTBCLHVEQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzQkFBc0IsRUFBRSxvRkFBbUI7QUFDckQ7QUFDQTtBQUNBLHlCQUF5QixzREFBRyx3QkFBd0Isc0RBQXNEO0FBQzFHO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQVM7QUFDMUIsNEJBQTRCLHVEQUFRO0FBQ3BDO0FBQ0E7QUFDQSwwQkFBMEIsdURBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHNCQUFzQixFQUFFLG9GQUFtQjtBQUNyRDtBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLHdCQUF3QixzREFBc0Q7QUFDMUc7QUFDQTtBQUNBLFVBQVUsY0FBYyxFQUFFLG9GQUFtQjtBQUM3QztBQUNBO0FBQ0EseUJBQXlCLHNEQUFHLGdCQUFnQjtBQUM1QztBQUNBO0FBQ0EsaUJBQWlCLCtEQUFTO0FBQzFCLHNCQUFzQix1REFBUTtBQUM5Qix5QkFBeUIsc0RBQUc7QUFDNUI7QUFDQTtBQUNBLGlCQUFpQix1Q0FBVTtBQUMzQjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0Q2FudmFzLm1qcz8wMjRjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZyYWdtZW50LCBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHJlYWN0LCB1c2VRdWlja1JlYWN0b3IsIHVzZVZhbHVlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IGRlZHVwZSwgbW9kdWxhdGUsIG9iamVjdE1hcFZhbHVlcyB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xuaW1wb3J0IHsgRnJhZ21lbnQgYXMgRnJhZ21lbnQyLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUNhbnZhc0V2ZW50cyB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VDYW52YXNFdmVudHMubWpzXCI7XG5pbXBvcnQgeyB1c2VDb2Fyc2VQb2ludGVyIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZUNvYXJzZVBvaW50ZXIubWpzXCI7XG5pbXBvcnQgeyB1c2VDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlQ29udGFpbmVyLm1qc1wiO1xuaW1wb3J0IHsgdXNlRG9jdW1lbnRFdmVudHMgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlRG9jdW1lbnRFdmVudHMubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlRWRpdG9yLm1qc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yQ29tcG9uZW50cyB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VFZGl0b3JDb21wb25lbnRzLm1qc1wiO1xuaW1wb3J0IHsgdXNlRml4U2FmYXJpRG91YmxlVGFwWm9vbVBlbmNpbEV2ZW50cyB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VGaXhTYWZhcmlEb3VibGVUYXBab29tUGVuY2lsRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgdXNlR2VzdHVyZUV2ZW50cyB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VHZXN0dXJlRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgdXNlSGFuZGxlRXZlbnRzIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZUhhbmRsZUV2ZW50cy5tanNcIjtcbmltcG9ydCB7IHVzZVNjcmVlbkJvdW5kcyB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VTY3JlZW5Cb3VuZHMubWpzXCI7XG5pbXBvcnQgeyBNYXQgfSBmcm9tIFwiLi4vLi4vcHJpbWl0aXZlcy9NYXQubWpzXCI7XG5pbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vLi4vcHJpbWl0aXZlcy9WZWMubWpzXCI7XG5pbXBvcnQgeyB0b0RvbVByZWNpc2lvbiB9IGZyb20gXCIuLi8uLi9wcmltaXRpdmVzL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgZGVidWdGbGFncyB9IGZyb20gXCIuLi8uLi91dGlscy9kZWJ1Zy1mbGFncy5tanNcIjtcbmltcG9ydCB7IHNldFN0eWxlUHJvcGVydHkgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZG9tLm1qc1wiO1xuaW1wb3J0IHsgbmVhcmVzdE11bHRpcGxlIH0gZnJvbSBcIi4uLy4uL3V0aWxzL25lYXJlc3RNdWx0aXBsZS5tanNcIjtcbmltcG9ydCB7IEdlb21ldHJ5RGVidWdnaW5nVmlldyB9IGZyb20gXCIuLi9HZW9tZXRyeURlYnVnZ2luZ1ZpZXcubWpzXCI7XG5pbXBvcnQgeyBMaXZlQ29sbGFib3JhdG9ycyB9IGZyb20gXCIuLi9MaXZlQ29sbGFib3JhdG9ycy5tanNcIjtcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL1NoYXBlLm1qc1wiO1xuZnVuY3Rpb24gRGVmYXVsdENhbnZhcyh7IGNsYXNzTmFtZSB9KSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCB7IEJhY2tncm91bmQsIFN2Z0RlZnMgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgY29uc3QgckNhbnZhcyA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qgckh0bWxMYXllciA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qgckh0bWxMYXllcjIgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGNvbnRhaW5lciA9IHVzZUNvbnRhaW5lcigpO1xuICB1c2VTY3JlZW5Cb3VuZHMockNhbnZhcyk7XG4gIHVzZURvY3VtZW50RXZlbnRzKCk7XG4gIHVzZUNvYXJzZVBvaW50ZXIoKTtcbiAgdXNlR2VzdHVyZUV2ZW50cyhyQ2FudmFzKTtcbiAgdXNlRml4U2FmYXJpRG91YmxlVGFwWm9vbVBlbmNpbEV2ZW50cyhyQ2FudmFzKTtcbiAgY29uc3Qgck1lbW9pemVkU3R1ZmYgPSB1c2VSZWYoeyBsb2REaXNhYmxlVGV4dE91dGxpbmU6IGZhbHNlLCBhbGxvd1RleHRPdXRsaW5lOiB0cnVlIH0pO1xuICB1c2VRdWlja1JlYWN0b3IoXG4gICAgXCJwb3NpdGlvbiBsYXllcnNcIixcbiAgICBmdW5jdGlvbiBwb3NpdGlvbkxheWVyc1doZW5DYW1lcmFNb3ZlcygpIHtcbiAgICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gZWRpdG9yLmdldENhbWVyYSgpO1xuICAgICAgaWYgKHJNZW1vaXplZFN0dWZmLmN1cnJlbnQuYWxsb3dUZXh0T3V0bGluZSAmJiBlZGl0b3IuZW52aXJvbm1lbnQuaXNTYWZhcmkpIHtcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiLS10bC10ZXh0LW91dGxpbmVcIiwgXCJub25lXCIpO1xuICAgICAgICByTWVtb2l6ZWRTdHVmZi5jdXJyZW50LmFsbG93VGV4dE91dGxpbmUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChyTWVtb2l6ZWRTdHVmZi5jdXJyZW50LmFsbG93VGV4dE91dGxpbmUgJiYgeiA8IGVkaXRvci5vcHRpb25zLnRleHRTaGFkb3dMb2QgIT09IHJNZW1vaXplZFN0dWZmLmN1cnJlbnQubG9kRGlzYWJsZVRleHRPdXRsaW5lKSB7XG4gICAgICAgIGNvbnN0IGxvZERpc2FibGVUZXh0T3V0bGluZSA9IHogPCBlZGl0b3Iub3B0aW9ucy50ZXh0U2hhZG93TG9kO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgXCItLXRsLXRleHQtb3V0bGluZVwiLFxuICAgICAgICAgIGxvZERpc2FibGVUZXh0T3V0bGluZSA/IFwibm9uZVwiIDogYHZhcigtLXRsLXRleHQtb3V0bGluZS1yZWZlcmVuY2UpYFxuICAgICAgICApO1xuICAgICAgICByTWVtb2l6ZWRTdHVmZi5jdXJyZW50LmxvZERpc2FibGVUZXh0T3V0bGluZSA9IGxvZERpc2FibGVUZXh0T3V0bGluZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9mZnNldCA9IHogPj0gMSA/IG1vZHVsYXRlKHosIFsxLCA4XSwgWzAuMTI1LCAwLjVdLCB0cnVlKSA6IG1vZHVsYXRlKHosIFswLjEsIDFdLCBbLTIsIDAuMTI1XSwgdHJ1ZSk7XG4gICAgICBjb25zdCB0cmFuc2Zvcm0gPSBgc2NhbGUoJHt0b0RvbVByZWNpc2lvbih6KX0pIHRyYW5zbGF0ZSgke3RvRG9tUHJlY2lzaW9uKFxuICAgICAgICB4ICsgb2Zmc2V0XG4gICAgICApfXB4LCR7dG9Eb21QcmVjaXNpb24oeSArIG9mZnNldCl9cHgpYDtcbiAgICAgIHNldFN0eWxlUHJvcGVydHkockh0bWxMYXllci5jdXJyZW50LCBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0pO1xuICAgICAgc2V0U3R5bGVQcm9wZXJ0eShySHRtbExheWVyMi5jdXJyZW50LCBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0pO1xuICAgIH0sXG4gICAgW2VkaXRvciwgY29udGFpbmVyXVxuICApO1xuICBjb25zdCBldmVudHMgPSB1c2VDYW52YXNFdmVudHMoKTtcbiAgY29uc3Qgc2hhcGVTdmdEZWZzID0gdXNlVmFsdWUoXG4gICAgXCJzaGFwZVN2Z0RlZnNcIixcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBzaGFwZVN2Z0RlZnNCeUtleSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICBmb3IgKGNvbnN0IHV0aWwgb2Ygb2JqZWN0TWFwVmFsdWVzKGVkaXRvci5zaGFwZVV0aWxzKSkge1xuICAgICAgICBpZiAoIXV0aWwpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBkZWZzID0gdXRpbC5nZXRDYW52YXNTdmdEZWZzKCk7XG4gICAgICAgIGZvciAoY29uc3QgeyBrZXksIGNvbXBvbmVudDogQ29tcG9uZW50IH0gb2YgZGVmcykge1xuICAgICAgICAgIGlmIChzaGFwZVN2Z0RlZnNCeUtleS5oYXMoa2V5KSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIHNoYXBlU3ZnRGVmc0J5S2V5LnNldChrZXksIC8qIEBfX1BVUkVfXyAqLyBqc3goQ29tcG9uZW50LCB7fSwga2V5KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBbLi4uc2hhcGVTdmdEZWZzQnlLZXkudmFsdWVzKCldO1xuICAgIH0sXG4gICAgW2VkaXRvcl1cbiAgKTtcbiAgY29uc3QgaGlkZVNoYXBlcyA9IHVzZVZhbHVlKFwiZGVidWdfc2hhcGVzXCIsICgpID0+IGRlYnVnRmxhZ3MuaGlkZVNoYXBlcy5nZXQoKSwgW2RlYnVnRmxhZ3NdKTtcbiAgY29uc3QgZGVidWdTdmcgPSB1c2VWYWx1ZShcImRlYnVnX3N2Z1wiLCAoKSA9PiBkZWJ1Z0ZsYWdzLmRlYnVnU3ZnLmdldCgpLCBbZGVidWdGbGFnc10pO1xuICBjb25zdCBkZWJ1Z0dlb21ldHJ5ID0gdXNlVmFsdWUoXCJkZWJ1Z19nZW9tZXRyeVwiLCAoKSA9PiBkZWJ1Z0ZsYWdzLmRlYnVnR2VvbWV0cnkuZ2V0KCksIFtcbiAgICBkZWJ1Z0ZsYWdzXG4gIF0pO1xuICBjb25zdCBpc0VkaXRpbmdBbnl0aGluZyA9IHVzZVZhbHVlKFxuICAgIFwiaXNFZGl0aW5nQW55dGhpbmdcIixcbiAgICAoKSA9PiBlZGl0b3IuZ2V0RWRpdGluZ1NoYXBlSWQoKSAhPT0gbnVsbCxcbiAgICBbZWRpdG9yXVxuICApO1xuICBjb25zdCBpc1NlbGVjdGluZ0FueXRoaW5nID0gdXNlVmFsdWUoXG4gICAgXCJpc1NlbGVjdGluZ0FueXRoaW5nXCIsXG4gICAgKCkgPT4gISFlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpLmxlbmd0aCxcbiAgICBbZWRpdG9yXVxuICApO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMoXG4gICAgXCJkaXZcIixcbiAgICB7XG4gICAgICByZWY6IHJDYW52YXMsXG4gICAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgXCJkYXRhLWlzZWRpdGluZ2FueXRoaW5nXCI6IGlzRWRpdGluZ0FueXRoaW5nLFxuICAgICAgXCJkYXRhLWlzc2VsZWN0aW5nYW55dGhpbmdcIjogaXNTZWxlY3RpbmdBbnl0aGluZyxcbiAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRsLWNhbnZhc1wiLCBjbGFzc05hbWUpLFxuICAgICAgXCJkYXRhLXRlc3RpZFwiOiBcImNhbnZhc1wiLFxuICAgICAgLi4uZXZlbnRzLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcInN2Z1wiLCB7IGNsYXNzTmFtZTogXCJ0bC1zdmctY29udGV4dFwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeHMoXCJkZWZzXCIsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgICBzaGFwZVN2Z0RlZnMsXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChDdXJzb3JEZWYsIHt9KSxcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KENvbGxhYm9yYXRvckhpbnREZWYsIHt9KSxcbiAgICAgICAgICBTdmdEZWZzICYmIC8qIEBfX1BVUkVfXyAqLyBqc3goU3ZnRGVmcywge30pXG4gICAgICAgIF0gfSkgfSksXG4gICAgICAgIEJhY2tncm91bmQgJiYgLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1iYWNrZ3JvdW5kX193cmFwcGVyXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KEJhY2tncm91bmQsIHt9KSB9KSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChHcmlkV3JhcHBlciwge30pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4cyhcImRpdlwiLCB7IHJlZjogckh0bWxMYXllciwgY2xhc3NOYW1lOiBcInRsLWh0bWwtbGF5ZXIgdGwtc2hhcGVzXCIsIGRyYWdnYWJsZTogZmFsc2UsIGNoaWxkcmVuOiBbXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChPblRoZUNhbnZhc1dyYXBwZXIsIHt9KSxcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFNlbGVjdGlvbkJhY2tncm91bmRXcmFwcGVyLCB7fSksXG4gICAgICAgICAgaGlkZVNoYXBlcyA/IG51bGwgOiBkZWJ1Z1N2ZyA/IC8qIEBfX1BVUkVfXyAqLyBqc3goU2hhcGVzV2l0aFNWR3MsIHt9KSA6IC8qIEBfX1BVUkVfXyAqLyBqc3goU2hhcGVzVG9EaXNwbGF5LCB7fSlcbiAgICAgICAgXSB9KSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1vdmVybGF5c1wiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeHMoXCJkaXZcIiwgeyByZWY6IHJIdG1sTGF5ZXIyLCBjbGFzc05hbWU6IFwidGwtaHRtbC1sYXllclwiLCBjaGlsZHJlbjogW1xuICAgICAgICAgIGRlYnVnR2VvbWV0cnkgPyAvKiBAX19QVVJFX18gKi8ganN4KEdlb21ldHJ5RGVidWdnaW5nVmlldywge30pIDogbnVsbCxcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KEhhbmRsZXNXcmFwcGVyLCB7fSksXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChCcnVzaFdyYXBwZXIsIHt9KSxcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFNjcmliYmxlV3JhcHBlciwge30pLFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goWm9vbUJydXNoV3JhcHBlciwge30pLFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goU2hhcGVJbmRpY2F0b3JzLCB7fSksXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChIaW50ZWRTaGFwZUluZGljYXRvciwge30pLFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goU25hcEluZGljYXRvcldyYXBwZXIsIHt9KSxcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFNlbGVjdGlvbkZvcmVncm91bmRXcmFwcGVyLCB7fSksXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChMaXZlQ29sbGFib3JhdG9ycywge30pXG4gICAgICAgIF0gfSkgfSksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goTW92aW5nQ2FtZXJhSGl0VGVzdEJsb2NrZXIsIHt9KVxuICAgICAgXVxuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIEdyaWRXcmFwcGVyKCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgZ3JpZFNpemUgPSB1c2VWYWx1ZShcImdyaWRTaXplXCIsICgpID0+IGVkaXRvci5nZXREb2N1bWVudFNldHRpbmdzKCkuZ3JpZFNpemUsIFtlZGl0b3JdKTtcbiAgY29uc3QgeyB4LCB5LCB6IH0gPSB1c2VWYWx1ZShcImNhbWVyYVwiLCAoKSA9PiBlZGl0b3IuZ2V0Q2FtZXJhKCksIFtlZGl0b3JdKTtcbiAgY29uc3QgaXNHcmlkTW9kZSA9IHVzZVZhbHVlKFwiaXNHcmlkTW9kZVwiLCAoKSA9PiBlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzR3JpZE1vZGUsIFtlZGl0b3JdKTtcbiAgY29uc3QgeyBHcmlkIH0gPSB1c2VFZGl0b3JDb21wb25lbnRzKCk7XG4gIGlmICghKEdyaWQgJiYgaXNHcmlkTW9kZSkpXG4gICAgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEdyaWQsIHsgeCwgeSwgeiwgc2l6ZTogZ3JpZFNpemUgfSk7XG59XG5mdW5jdGlvbiBTY3JpYmJsZVdyYXBwZXIoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBzY3JpYmJsZXMgPSB1c2VWYWx1ZShcInNjcmliYmxlc1wiLCAoKSA9PiBlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpLnNjcmliYmxlcywgW2VkaXRvcl0pO1xuICBjb25zdCB6b29tTGV2ZWwgPSB1c2VWYWx1ZShcInpvb21MZXZlbFwiLCAoKSA9PiBlZGl0b3IuZ2V0Wm9vbUxldmVsKCksIFtlZGl0b3JdKTtcbiAgY29uc3QgeyBTY3JpYmJsZSB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBpZiAoIShTY3JpYmJsZSAmJiBzY3JpYmJsZXMubGVuZ3RoKSlcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goRnJhZ21lbnQsIHsgY2hpbGRyZW46IHNjcmliYmxlcy5tYXAoKHNjcmliYmxlKSA9PiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgIFNjcmliYmxlLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogXCJ0bC11c2VyLXNjcmliYmxlXCIsXG4gICAgICBzY3JpYmJsZSxcbiAgICAgIHpvb206IHpvb21MZXZlbFxuICAgIH0sXG4gICAgc2NyaWJibGUuaWRcbiAgKSkgfSk7XG59XG5mdW5jdGlvbiBCcnVzaFdyYXBwZXIoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBicnVzaCA9IHVzZVZhbHVlKFwiYnJ1c2hcIiwgKCkgPT4gZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKS5icnVzaCwgW2VkaXRvcl0pO1xuICBjb25zdCB7IEJydXNoIH0gPSB1c2VFZGl0b3JDb21wb25lbnRzKCk7XG4gIGlmICghKEJydXNoICYmIGJydXNoKSlcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goQnJ1c2gsIHsgY2xhc3NOYW1lOiBcInRsLXVzZXItYnJ1c2hcIiwgYnJ1c2ggfSk7XG59XG5mdW5jdGlvbiBab29tQnJ1c2hXcmFwcGVyKCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3Qgem9vbUJydXNoID0gdXNlVmFsdWUoXCJ6b29tQnJ1c2hcIiwgKCkgPT4gZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKS56b29tQnJ1c2gsIFtlZGl0b3JdKTtcbiAgY29uc3QgeyBab29tQnJ1c2ggfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgaWYgKCEoWm9vbUJydXNoICYmIHpvb21CcnVzaCkpXG4gICAgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFpvb21CcnVzaCwgeyBjbGFzc05hbWU6IFwidGwtdXNlci1icnVzaCB0bC16b29tLWJydXNoXCIsIGJydXNoOiB6b29tQnJ1c2ggfSk7XG59XG5mdW5jdGlvbiBTbmFwSW5kaWNhdG9yV3JhcHBlcigpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IGxpbmVzID0gdXNlVmFsdWUoXCJzbmFwTGluZXNcIiwgKCkgPT4gZWRpdG9yLnNuYXBzLmdldEluZGljYXRvcnMoKSwgW2VkaXRvcl0pO1xuICBjb25zdCB6b29tTGV2ZWwgPSB1c2VWYWx1ZShcInpvb21MZXZlbFwiLCAoKSA9PiBlZGl0b3IuZ2V0Wm9vbUxldmVsKCksIFtlZGl0b3JdKTtcbiAgY29uc3QgeyBTbmFwSW5kaWNhdG9yIH0gPSB1c2VFZGl0b3JDb21wb25lbnRzKCk7XG4gIGlmICghKFNuYXBJbmRpY2F0b3IgJiYgbGluZXMubGVuZ3RoID4gMCkpXG4gICAgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEZyYWdtZW50LCB7IGNoaWxkcmVuOiBsaW5lcy5tYXAoKGxpbmUpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3goU25hcEluZGljYXRvciwgeyBjbGFzc05hbWU6IFwidGwtdXNlci1zbmFwbGluZVwiLCBsaW5lLCB6b29tOiB6b29tTGV2ZWwgfSwgbGluZS5pZCkpIH0pO1xufVxuZnVuY3Rpb24gSGFuZGxlc1dyYXBwZXIoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBzaGFwZUlkV2l0aEhhbmRsZXMgPSB1c2VWYWx1ZShcbiAgICBcImhhbmRsZXMgc2hhcGVJZFdpdGhIYW5kbGVzXCIsXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgeyBpc1JlYWRvbmx5LCBpc0NoYW5naW5nU3R5bGUgfSA9IGVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCk7XG4gICAgICBpZiAoaXNSZWFkb25seSB8fCBpc0NoYW5naW5nU3R5bGUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIGNvbnN0IG9ubHlTZWxlY3RlZFNoYXBlID0gZWRpdG9yLmdldE9ubHlTZWxlY3RlZFNoYXBlKCk7XG4gICAgICBpZiAoIW9ubHlTZWxlY3RlZFNoYXBlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICBjb25zdCBoYW5kbGVzID0gZWRpdG9yLmdldFNoYXBlSGFuZGxlcyhvbmx5U2VsZWN0ZWRTaGFwZSk7XG4gICAgICBpZiAoIWhhbmRsZXMpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiBvbmx5U2VsZWN0ZWRTaGFwZS5pZDtcbiAgICB9LFxuICAgIFtlZGl0b3JdXG4gICk7XG4gIGlmICghc2hhcGVJZFdpdGhIYW5kbGVzKVxuICAgIHJldHVybiBudWxsO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChIYW5kbGVzV3JhcHBlcklubmVyLCB7IHNoYXBlSWQ6IHNoYXBlSWRXaXRoSGFuZGxlcyB9KTtcbn1cbmZ1bmN0aW9uIEhhbmRsZXNXcmFwcGVySW5uZXIoeyBzaGFwZUlkIH0pIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IHsgSGFuZGxlcyB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBjb25zdCB6b29tTGV2ZWwgPSB1c2VWYWx1ZShcInpvb21MZXZlbFwiLCAoKSA9PiBlZGl0b3IuZ2V0Wm9vbUxldmVsKCksIFtlZGl0b3JdKTtcbiAgY29uc3QgaXNDb2Fyc2UgPSB1c2VWYWx1ZShcImNvYXJzZSBwb2ludGVyXCIsICgpID0+IGVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCkuaXNDb2Fyc2VQb2ludGVyLCBbXG4gICAgZWRpdG9yXG4gIF0pO1xuICBjb25zdCB0cmFuc2Zvcm0gPSB1c2VWYWx1ZShcImhhbmRsZXMgdHJhbnNmb3JtXCIsICgpID0+IGVkaXRvci5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGVJZCksIFtcbiAgICBlZGl0b3IsXG4gICAgc2hhcGVJZFxuICBdKTtcbiAgY29uc3QgaGFuZGxlcyA9IHVzZVZhbHVlKFxuICAgIFwiaGFuZGxlc1wiLFxuICAgICgpID0+IHtcbiAgICAgIGNvbnN0IGhhbmRsZXMyID0gZWRpdG9yLmdldFNoYXBlSGFuZGxlcyhzaGFwZUlkKTtcbiAgICAgIGlmICghaGFuZGxlczIpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgbWluRGlzdEJldHdlZW5WaXJ0dWFsSGFuZGxlc0FuZFJlZ3VsYXJIYW5kbGVzID0gKGlzQ29hcnNlID8gZWRpdG9yLm9wdGlvbnMuY29hcnNlSGFuZGxlUmFkaXVzIDogZWRpdG9yLm9wdGlvbnMuaGFuZGxlUmFkaXVzKSAvIHpvb21MZXZlbCAqIDI7XG4gICAgICByZXR1cm4gaGFuZGxlczIuZmlsdGVyKFxuICAgICAgICAoaGFuZGxlKSA9PiAoXG4gICAgICAgICAgLy8gaWYgdGhlIGhhbmRsZSBpc24ndCBhIHZpcnR1YWwgaGFuZGxlLCB3ZSdsbCBkaXNwbGF5IGl0XG4gICAgICAgICAgKC8vIGJ1dCBmb3IgdmlydHVhbCBoYW5kbGVzLCB3ZSdsbCBvbmx5IGRpc3BsYXkgdGhlbSBpZiB0aGV5J3JlIGZhciBlbm91Z2ggYXdheSBmcm9tIHZlcnRleCBoYW5kbGVzXG4gICAgICAgICAgaGFuZGxlLnR5cGUgIT09IFwidmlydHVhbFwiIHx8ICFoYW5kbGVzMi5zb21lKFxuICAgICAgICAgICAgKGgpID0+IChcbiAgICAgICAgICAgICAgLy8gc2tpcCB0aGUgaGFuZGxlIHdlJ3JlIGNoZWNraW5nIGFnYWluc3RcbiAgICAgICAgICAgICAgKC8vIGFuZCBjaGVjayB0aGF0IHRoZWlyIGRpc3RhbmNlIGlzbid0IGJlbG93IHRoZSBtaW5pbXVtIGRpc3RhbmNlXG4gICAgICAgICAgICAgIGggIT09IGhhbmRsZSAmJiAvLyBvbmx5IGNoZWNrIGFnYWluc3QgdmVydGV4IGhhbmRsZXNcbiAgICAgICAgICAgICAgaC50eXBlID09PSBcInZlcnRleFwiICYmIFZlYy5EaXN0KGhhbmRsZSwgaCkgPCBtaW5EaXN0QmV0d2VlblZpcnR1YWxIYW5kbGVzQW5kUmVndWxhckhhbmRsZXMpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSlcbiAgICAgICAgKVxuICAgICAgKS5zb3J0KChhKSA9PiBhLnR5cGUgPT09IFwidmVydGV4XCIgPyAxIDogLTEpO1xuICAgIH0sXG4gICAgW2VkaXRvciwgem9vbUxldmVsLCBpc0NvYXJzZSwgc2hhcGVJZF1cbiAgKTtcbiAgaWYgKCFIYW5kbGVzIHx8ICFoYW5kbGVzIHx8ICF0cmFuc2Zvcm0pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChIYW5kbGVzLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFwiZ1wiLCB7IHRyYW5zZm9ybTogTWF0LnRvQ3NzU3RyaW5nKHRyYW5zZm9ybSksIGNoaWxkcmVuOiBoYW5kbGVzLm1hcCgoaGFuZGxlKSA9PiB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICBIYW5kbGVXcmFwcGVyLFxuICAgICAge1xuICAgICAgICBzaGFwZUlkLFxuICAgICAgICBoYW5kbGUsXG4gICAgICAgIHpvb206IHpvb21MZXZlbCxcbiAgICAgICAgaXNDb2Fyc2VcbiAgICAgIH0sXG4gICAgICBoYW5kbGUuaWRcbiAgICApO1xuICB9KSB9KSB9KTtcbn1cbmZ1bmN0aW9uIEhhbmRsZVdyYXBwZXIoe1xuICBzaGFwZUlkLFxuICBoYW5kbGUsXG4gIHpvb20sXG4gIGlzQ29hcnNlXG59KSB7XG4gIGNvbnN0IGV2ZW50cyA9IHVzZUhhbmRsZUV2ZW50cyhzaGFwZUlkLCBoYW5kbGUuaWQpO1xuICBjb25zdCB7IEhhbmRsZSB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBpZiAoIUhhbmRsZSlcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJnXCIsIHsgXCJhcmlhLWxhYmVsXCI6IFwiaGFuZGxlXCIsIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgke2hhbmRsZS54fSwgJHtoYW5kbGUueX0pYCwgLi4uZXZlbnRzLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChIYW5kbGUsIHsgc2hhcGVJZCwgaGFuZGxlLCB6b29tLCBpc0NvYXJzZSB9KSB9KTtcbn1cbmZ1bmN0aW9uIFNoYXBlc1dpdGhTVkdzKCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgcmVuZGVyaW5nU2hhcGVzID0gdXNlVmFsdWUoXCJyZW5kZXJpbmcgc2hhcGVzXCIsICgpID0+IGVkaXRvci5nZXRSZW5kZXJpbmdTaGFwZXMoKSwgW2VkaXRvcl0pO1xuICBjb25zdCBkcHJNdWx0aXBsZSA9IHVzZVZhbHVlKFxuICAgIFwiZHByIG11bHRpcGxlXCIsXG4gICAgKCkgPT4gKFxuICAgICAgLy8gZHByTXVsdGlwbGUgaXMgdGhlIHNtYWxsZXN0IG51bWJlciB3ZSBjYW4gbXVsdGlwbHkgZHByIGJ5IHRvIGdldCBhbiBpbnRlZ2VyXG4gICAgICAvLyBpdCdzIHVzdWFsbHkgMSwgMiwgb3IgNCAoZm9yIGUuZy4gZHByIG9mIDIsIDIuNSBhbmQgMi4yNSByZXNwZWN0aXZlbHkpXG4gICAgICAobmVhcmVzdE11bHRpcGxlKE1hdGguZmxvb3IoZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKS5kZXZpY2VQaXhlbFJhdGlvICogMTAwKSAvIDEwMCkpXG4gICAgKSxcbiAgICBbZWRpdG9yXVxuICApO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChGcmFnbWVudCwgeyBjaGlsZHJlbjogcmVuZGVyaW5nU2hhcGVzLm1hcCgocmVzdWx0KSA9PiAvKiBAX19QVVJFX18gKi8ganN4cyhGcmFnbWVudDIsIHsgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFNoYXBlLCB7IC4uLnJlc3VsdCwgZHByTXVsdGlwbGUgfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChEZWJ1Z1N2Z0NvcHksIHsgaWQ6IHJlc3VsdC5pZCB9KVxuICBdIH0sIHJlc3VsdC5pZCArIFwiX2ZyYWdtZW50XCIpKSB9KTtcbn1cbmZ1bmN0aW9uIFJlZmxvd0lmTmVlZGVkKCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgY3VsbGVkU2hhcGVzUmVmID0gdXNlUmVmKC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpO1xuICB1c2VRdWlja1JlYWN0b3IoXG4gICAgXCJyZWZsb3cgZm9yIGN1bGxlZCBzaGFwZXNcIixcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBjdWxsZWRTaGFwZXMgPSBlZGl0b3IuZ2V0Q3VsbGVkU2hhcGVzKCk7XG4gICAgICBpZiAoY3VsbGVkU2hhcGVzUmVmLmN1cnJlbnQuc2l6ZSA9PT0gY3VsbGVkU2hhcGVzLnNpemUgJiYgWy4uLmN1bGxlZFNoYXBlc10uZXZlcnkoKGlkKSA9PiBjdWxsZWRTaGFwZXNSZWYuY3VycmVudC5oYXMoaWQpKSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY3VsbGVkU2hhcGVzUmVmLmN1cnJlbnQgPSBjdWxsZWRTaGFwZXM7XG4gICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidGwtY2FudmFzXCIpO1xuICAgICAgaWYgKGNhbnZhcy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IF9oZWlnaHQgPSBjYW52YXNbMF0ub2Zmc2V0SGVpZ2h0O1xuICAgIH0sXG4gICAgW2VkaXRvcl1cbiAgKTtcbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBTaGFwZXNUb0Rpc3BsYXkoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCByZW5kZXJpbmdTaGFwZXMgPSB1c2VWYWx1ZShcInJlbmRlcmluZyBzaGFwZXNcIiwgKCkgPT4gZWRpdG9yLmdldFJlbmRlcmluZ1NoYXBlcygpLCBbZWRpdG9yXSk7XG4gIGNvbnN0IGRwck11bHRpcGxlID0gdXNlVmFsdWUoXG4gICAgXCJkcHIgbXVsdGlwbGVcIixcbiAgICAoKSA9PiAoXG4gICAgICAvLyBkcHJNdWx0aXBsZSBpcyB0aGUgc21hbGxlc3QgbnVtYmVyIHdlIGNhbiBtdWx0aXBseSBkcHIgYnkgdG8gZ2V0IGFuIGludGVnZXJcbiAgICAgIC8vIGl0J3MgdXN1YWxseSAxLCAyLCBvciA0IChmb3IgZS5nLiBkcHIgb2YgMiwgMi41IGFuZCAyLjI1IHJlc3BlY3RpdmVseSlcbiAgICAgIChuZWFyZXN0TXVsdGlwbGUoTWF0aC5mbG9vcihlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpLmRldmljZVBpeGVsUmF0aW8gKiAxMDApIC8gMTAwKSlcbiAgICApLFxuICAgIFtlZGl0b3JdXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW1xuICAgIHJlbmRlcmluZ1NoYXBlcy5tYXAoKHJlc3VsdCkgPT4gLyogQF9fUFVSRV9fICovIGpzeChTaGFwZSwgeyAuLi5yZXN1bHQsIGRwck11bHRpcGxlIH0sIHJlc3VsdC5pZCArIFwiX3NoYXBlXCIpKSxcbiAgICBlZGl0b3IuZW52aXJvbm1lbnQuaXNTYWZhcmkgJiYgLyogQF9fUFVSRV9fICovIGpzeChSZWZsb3dJZk5lZWRlZCwge30pXG4gIF0gfSk7XG59XG5mdW5jdGlvbiBTaGFwZUluZGljYXRvcnMoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCByZW5kZXJpbmdTaGFwZXMgPSB1c2VWYWx1ZShcInJlbmRlcmluZyBzaGFwZXNcIiwgKCkgPT4gZWRpdG9yLmdldFJlbmRlcmluZ1NoYXBlcygpLCBbZWRpdG9yXSk7XG4gIGNvbnN0IHJQcmV2aW91c1NlbGVjdGVkU2hhcGVJZHMgPSB1c2VSZWYoLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG4gIGNvbnN0IGlkc1RvRGlzcGxheSA9IHVzZVZhbHVlKFxuICAgIFwic2hvdWxkIGRpc3BsYXkgc2VsZWN0ZWQgaWRzXCIsXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgcHJldiA9IHJQcmV2aW91c1NlbGVjdGVkU2hhcGVJZHMuY3VycmVudDtcbiAgICAgIGNvbnN0IG5leHQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgaWYgKGVkaXRvci5pc0luQW55KFxuICAgICAgICBcInNlbGVjdC5pZGxlXCIsXG4gICAgICAgIFwic2VsZWN0LmJydXNoaW5nXCIsXG4gICAgICAgIFwic2VsZWN0LnNjcmliYmxlX2JydXNoaW5nXCIsXG4gICAgICAgIFwic2VsZWN0LmVkaXRpbmdfc2hhcGVcIixcbiAgICAgICAgXCJzZWxlY3QucG9pbnRpbmdfc2hhcGVcIixcbiAgICAgICAgXCJzZWxlY3QucG9pbnRpbmdfc2VsZWN0aW9uXCIsXG4gICAgICAgIFwic2VsZWN0LnBvaW50aW5nX2hhbmRsZVwiXG4gICAgICApICYmICFlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzQ2hhbmdpbmdTdHlsZSkge1xuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKCk7XG4gICAgICAgIGZvciAoY29uc3QgaWQgb2Ygc2VsZWN0ZWQpIHtcbiAgICAgICAgICBuZXh0LmFkZChpZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVkaXRvci5pc0luQW55KFwic2VsZWN0LmlkbGVcIiwgXCJzZWxlY3QuZWRpdGluZ19zaGFwZVwiKSkge1xuICAgICAgICAgIGNvbnN0IGluc3RhbmNlU3RhdGUgPSBlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpO1xuICAgICAgICAgIGlmIChpbnN0YW5jZVN0YXRlLmlzSG92ZXJpbmdDYW52YXMgJiYgIWluc3RhbmNlU3RhdGUuaXNDb2Fyc2VQb2ludGVyKSB7XG4gICAgICAgICAgICBjb25zdCBob3ZlcmVkID0gZWRpdG9yLmdldEhvdmVyZWRTaGFwZUlkKCk7XG4gICAgICAgICAgICBpZiAoaG92ZXJlZClcbiAgICAgICAgICAgICAgbmV4dC5hZGQoaG92ZXJlZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocHJldi5zaXplICE9PSBuZXh0LnNpemUpIHtcbiAgICAgICAgclByZXZpb3VzU2VsZWN0ZWRTaGFwZUlkcy5jdXJyZW50ID0gbmV4dDtcbiAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGlkIG9mIG5leHQpIHtcbiAgICAgICAgaWYgKCFwcmV2LmhhcyhpZCkpIHtcbiAgICAgICAgICByUHJldmlvdXNTZWxlY3RlZFNoYXBlSWRzLmN1cnJlbnQgPSBuZXh0O1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJldjtcbiAgICB9LFxuICAgIFtlZGl0b3JdXG4gICk7XG4gIGNvbnN0IHsgU2hhcGVJbmRpY2F0b3IgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgaWYgKCFTaGFwZUluZGljYXRvcilcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goRnJhZ21lbnQsIHsgY2hpbGRyZW46IHJlbmRlcmluZ1NoYXBlcy5tYXAoKHsgaWQgfSkgPT4gLyogQF9fUFVSRV9fICovIGpzeChTaGFwZUluZGljYXRvciwgeyBzaGFwZUlkOiBpZCwgaGlkZGVuOiAhaWRzVG9EaXNwbGF5LmhhcyhpZCkgfSwgaWQgKyBcIl9pbmRpY2F0b3JcIikpIH0pO1xufVxuZnVuY3Rpb24gSGludGVkU2hhcGVJbmRpY2F0b3IoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCB7IFNoYXBlSW5kaWNhdG9yIH0gPSB1c2VFZGl0b3JDb21wb25lbnRzKCk7XG4gIGNvbnN0IGlkcyA9IHVzZVZhbHVlKFwiaGludGluZyBzaGFwZSBpZHNcIiwgKCkgPT4gZGVkdXBlKGVkaXRvci5nZXRIaW50aW5nU2hhcGVJZHMoKSksIFtlZGl0b3JdKTtcbiAgaWYgKCFpZHMubGVuZ3RoKVxuICAgIHJldHVybiBudWxsO1xuICBpZiAoIVNoYXBlSW5kaWNhdG9yKVxuICAgIHJldHVybiBudWxsO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChGcmFnbWVudCwgeyBjaGlsZHJlbjogaWRzLm1hcCgoaWQpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3goU2hhcGVJbmRpY2F0b3IsIHsgY2xhc3NOYW1lOiBcInRsLXVzZXItaW5kaWNhdG9yX19oaW50XCIsIHNoYXBlSWQ6IGlkIH0sIGlkICsgXCJfaGludGluZ1wiKSkgfSk7XG59XG5mdW5jdGlvbiBDdXJzb3JEZWYoKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4cyhcImdcIiwgeyBpZDogXCJjdXJzb3JcIiwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4cyhcImdcIiwgeyBmaWxsOiBcInJnYmEoMCwwLDAsLjIpXCIsIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoLTExLC0xMSlcIiwgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwYXRoXCIsIHsgZDogXCJtMTIgMjQuNDIxOXYtMTYuMDE1bDExLjU5MSAxMS42MTloLTYuNzgxbC0uNDExLjEyNHpcIiB9KSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwYXRoXCIsIHsgZDogXCJtMjEuMDg0NSAyNS4wOTYyLTMuNjA1IDEuNTM1LTQuNjgyLTExLjA4OSAzLjY4Ni0xLjU1M3pcIiB9KVxuICAgIF0gfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeHMoXCJnXCIsIHsgZmlsbDogXCJ3aGl0ZVwiLCB0cmFuc2Zvcm06IFwidHJhbnNsYXRlKC0xMiwtMTIpXCIsIGNoaWxkcmVuOiBbXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicGF0aFwiLCB7IGQ6IFwibTEyIDI0LjQyMTl2LTE2LjAxNWwxMS41OTEgMTEuNjE5aC02Ljc4MWwtLjQxMS4xMjR6XCIgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicGF0aFwiLCB7IGQ6IFwibTIxLjA4NDUgMjUuMDk2Mi0zLjYwNSAxLjUzNS00LjY4Mi0xMS4wODkgMy42ODYtMS41NTN6XCIgfSlcbiAgICBdIH0pLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFwiZ1wiLCB7IGZpbGw6IFwiY3VycmVudENvbG9yXCIsIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoLTEyLC0xMilcIiwgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwYXRoXCIsIHsgZDogXCJtMTkuNzUxIDI0LjQxNTUtMS44NDQuNzc0LTMuMS03LjM3NCAxLjg0MS0uNzc1elwiIH0pLFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcInBhdGhcIiwgeyBkOiBcIm0xMyAxMC44MTR2MTEuMTg4bDIuOTY5LTIuODY2LjQyOC0uMTM5aDQuNzY4elwiIH0pXG4gICAgXSB9KVxuICBdIH0pO1xufVxuZnVuY3Rpb24gQ29sbGFib3JhdG9ySGludERlZigpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwYXRoXCIsIHsgaWQ6IFwiY3Vyc29yX2hpbnRcIiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiwgZDogXCJNIC0yLC01IDIsMCAtMiw1IFpcIiB9KTtcbn1cbmZ1bmN0aW9uIERlYnVnU3ZnQ29weSh7IGlkIH0pIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IFtpbWFnZSwgc2V0SW1hZ2VdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IGlzSW5Sb290ID0gdXNlVmFsdWUoXG4gICAgXCJpcyBpbiByb290XCIsXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3Qgc2hhcGUgPSBlZGl0b3IuZ2V0U2hhcGUoaWQpO1xuICAgICAgcmV0dXJuIHNoYXBlPy5wYXJlbnRJZCA9PT0gZWRpdG9yLmdldEN1cnJlbnRQYWdlSWQoKTtcbiAgICB9LFxuICAgIFtlZGl0b3IsIGlkXVxuICApO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNJblJvb3QpXG4gICAgICByZXR1cm47XG4gICAgbGV0IGxhdGVzdCA9IG51bGw7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSByZWFjdChcInNoYXBlIHRvIHN2Z1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZW5kZXJJZCA9IE1hdGgucmFuZG9tKCk7XG4gICAgICBsYXRlc3QgPSByZW5kZXJJZDtcbiAgICAgIGNvbnN0IGlzU2luZ2xlRnJhbWUgPSBlZGl0b3IuaXNTaGFwZU9mVHlwZShpZCwgXCJmcmFtZVwiKTtcbiAgICAgIGNvbnN0IHBhZGRpbmcgPSBpc1NpbmdsZUZyYW1lID8gMCA6IDEwO1xuICAgICAgbGV0IGJvdW5kcyA9IGVkaXRvci5nZXRTaGFwZVBhZ2VCb3VuZHMoaWQpO1xuICAgICAgaWYgKCFib3VuZHMpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGJvdW5kcyA9IGJvdW5kcy5jbG9uZSgpLmV4cGFuZEJ5KHBhZGRpbmcpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZWRpdG9yLmdldFN2Z1N0cmluZyhbaWRdLCB7XG4gICAgICAgIHBhZGRpbmcsXG4gICAgICAgIGJhY2tncm91bmQ6IGVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCkuZXhwb3J0QmFja2dyb3VuZFxuICAgICAgfSk7XG4gICAgICBpZiAobGF0ZXN0ICE9PSByZW5kZXJJZCB8fCAhcmVzdWx0KVxuICAgICAgICByZXR1cm47XG4gICAgICBjb25zdCBzdmdEYXRhVXJsID0gYGRhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCR7ZW5jb2RlVVJJQ29tcG9uZW50KHJlc3VsdC5zdmcpfWA7XG4gICAgICBzZXRJbWFnZSh7IHNyYzogc3ZnRGF0YVVybCwgYm91bmRzIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsYXRlc3QgPSBudWxsO1xuICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICB9LCBbZWRpdG9yLCBpZCwgaXNJblJvb3RdKTtcbiAgaWYgKCFpc0luUm9vdCB8fCAhaW1hZ2UpXG4gICAgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgIFwiaW1nXCIsXG4gICAge1xuICAgICAgc3JjOiBpbWFnZS5zcmMsXG4gICAgICB3aWR0aDogaW1hZ2UuYm91bmRzLndpZHRoLFxuICAgICAgaGVpZ2h0OiBpbWFnZS5ib3VuZHMuaGVpZ2h0LFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtpbWFnZS5ib3VuZHMueH1weCwgJHtpbWFnZS5ib3VuZHMubWF4WSArIDEyfXB4KWAsXG4gICAgICAgIG91dGxpbmU6IFwiMXB4IHNvbGlkIGJsYWNrXCIsXG4gICAgICAgIG1heFdpZHRoOiBcIm5vbmVcIlxuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIFNlbGVjdGlvbkZvcmVncm91bmRXcmFwcGVyKCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3Qgc2VsZWN0aW9uUm90YXRpb24gPSB1c2VWYWx1ZShcInNlbGVjdGlvbiByb3RhdGlvblwiLCAoKSA9PiBlZGl0b3IuZ2V0U2VsZWN0aW9uUm90YXRpb24oKSwgW1xuICAgIGVkaXRvclxuICBdKTtcbiAgY29uc3Qgc2VsZWN0aW9uQm91bmRzID0gdXNlVmFsdWUoXG4gICAgXCJzZWxlY3Rpb24gYm91bmRzXCIsXG4gICAgKCkgPT4gZWRpdG9yLmdldFNlbGVjdGlvblJvdGF0ZWRQYWdlQm91bmRzKCksXG4gICAgW2VkaXRvcl1cbiAgKTtcbiAgY29uc3QgeyBTZWxlY3Rpb25Gb3JlZ3JvdW5kIH0gPSB1c2VFZGl0b3JDb21wb25lbnRzKCk7XG4gIGlmICghc2VsZWN0aW9uQm91bmRzIHx8ICFTZWxlY3Rpb25Gb3JlZ3JvdW5kKVxuICAgIHJldHVybiBudWxsO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChTZWxlY3Rpb25Gb3JlZ3JvdW5kLCB7IGJvdW5kczogc2VsZWN0aW9uQm91bmRzLCByb3RhdGlvbjogc2VsZWN0aW9uUm90YXRpb24gfSk7XG59XG5mdW5jdGlvbiBTZWxlY3Rpb25CYWNrZ3JvdW5kV3JhcHBlcigpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IHNlbGVjdGlvblJvdGF0aW9uID0gdXNlVmFsdWUoXCJzZWxlY3Rpb24gcm90YXRpb25cIiwgKCkgPT4gZWRpdG9yLmdldFNlbGVjdGlvblJvdGF0aW9uKCksIFtcbiAgICBlZGl0b3JcbiAgXSk7XG4gIGNvbnN0IHNlbGVjdGlvbkJvdW5kcyA9IHVzZVZhbHVlKFxuICAgIFwic2VsZWN0aW9uIGJvdW5kc1wiLFxuICAgICgpID0+IGVkaXRvci5nZXRTZWxlY3Rpb25Sb3RhdGVkUGFnZUJvdW5kcygpLFxuICAgIFtlZGl0b3JdXG4gICk7XG4gIGNvbnN0IHsgU2VsZWN0aW9uQmFja2dyb3VuZCB9ID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICBpZiAoIXNlbGVjdGlvbkJvdW5kcyB8fCAhU2VsZWN0aW9uQmFja2dyb3VuZClcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goU2VsZWN0aW9uQmFja2dyb3VuZCwgeyBib3VuZHM6IHNlbGVjdGlvbkJvdW5kcywgcm90YXRpb246IHNlbGVjdGlvblJvdGF0aW9uIH0pO1xufVxuZnVuY3Rpb24gT25UaGVDYW52YXNXcmFwcGVyKCkge1xuICBjb25zdCB7IE9uVGhlQ2FudmFzIH0gPSB1c2VFZGl0b3JDb21wb25lbnRzKCk7XG4gIGlmICghT25UaGVDYW52YXMpXG4gICAgcmV0dXJuIG51bGw7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KE9uVGhlQ2FudmFzLCB7fSk7XG59XG5mdW5jdGlvbiBNb3ZpbmdDYW1lcmFIaXRUZXN0QmxvY2tlcigpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IGNhbWVyYVN0YXRlID0gdXNlVmFsdWUoXCJjYW1lcmEgc3RhdGVcIiwgKCkgPT4gZWRpdG9yLmdldENhbWVyYVN0YXRlKCksIFtlZGl0b3JdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgXCJkaXZcIixcbiAgICB7XG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0bC1oaXQtdGVzdC1ibG9ja2VyXCIsIHtcbiAgICAgICAgXCJ0bC1oaXQtdGVzdC1ibG9ja2VyX19oaWRkZW5cIjogY2FtZXJhU3RhdGUgPT09IFwiaWRsZVwiXG4gICAgICB9KVxuICAgIH1cbiAgKTtcbn1cbmV4cG9ydCB7XG4gIERlZmF1bHRDYW52YXNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZhdWx0Q2FudmFzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCanvas.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCollaboratorHint.mjs":
/*!************************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCollaboratorHint.mjs ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultCollaboratorHint: () => (/* binding */ DefaultCollaboratorHint)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks/useTransform.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\n\n\n\n\nfunction DefaultCollaboratorHint({\n  className,\n  zoom,\n  point,\n  color,\n  viewport,\n  opacity = 1\n}) {\n  const rSvg = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  (0,_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_3__.useTransform)(\n    rSvg,\n    (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.clamp)(point.x, viewport.minX + 5 / zoom, viewport.maxX - 5 / zoom),\n    (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.clamp)(point.y, viewport.minY + 5 / zoom, viewport.maxY - 5 / zoom),\n    1 / zoom,\n    _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec.Angle(viewport.center, point)\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", { ref: rSvg, className: classnames__WEBPACK_IMPORTED_MODULE_1__(\"tl-overlays__item\", className), children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"use\", { href: \"#cursor_hint\", color, strokeWidth: 3, stroke: \"var(--color-background)\" }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"use\", { href: \"#cursor_hint\", color, opacity })\n  ] });\n}\n\n//# sourceMappingURL=DefaultCollaboratorHint.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDb2xsYWJvcmF0b3JIaW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQThDO0FBQ1Y7QUFDTDtBQUM2QjtBQUNiO0FBQ0k7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsZUFBZSw2Q0FBTTtBQUNyQixFQUFFLHFFQUFZO0FBQ2Q7QUFDQSxJQUFJLDREQUFLO0FBQ1QsSUFBSSw0REFBSztBQUNUO0FBQ0EsSUFBSSxvREFBRztBQUNQO0FBQ0EseUJBQXlCLHVEQUFJLFVBQVUsc0JBQXNCLHVDQUFVO0FBQ3ZFLG9CQUFvQixzREFBRyxVQUFVLGdGQUFnRjtBQUNqSCxvQkFBb0Isc0RBQUcsVUFBVSxzQ0FBc0M7QUFDdkUsS0FBSztBQUNMO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdENvbGxhYm9yYXRvckhpbnQubWpzPzA1OTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4LCBqc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xuaW1wb3J0IHsgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlVHJhbnNmb3JtLm1qc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uLy4uL3ByaW1pdGl2ZXMvVmVjLm1qc1wiO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tIFwiLi4vLi4vcHJpbWl0aXZlcy91dGlscy5tanNcIjtcbmZ1bmN0aW9uIERlZmF1bHRDb2xsYWJvcmF0b3JIaW50KHtcbiAgY2xhc3NOYW1lLFxuICB6b29tLFxuICBwb2ludCxcbiAgY29sb3IsXG4gIHZpZXdwb3J0LFxuICBvcGFjaXR5ID0gMVxufSkge1xuICBjb25zdCByU3ZnID0gdXNlUmVmKG51bGwpO1xuICB1c2VUcmFuc2Zvcm0oXG4gICAgclN2ZyxcbiAgICBjbGFtcChwb2ludC54LCB2aWV3cG9ydC5taW5YICsgNSAvIHpvb20sIHZpZXdwb3J0Lm1heFggLSA1IC8gem9vbSksXG4gICAgY2xhbXAocG9pbnQueSwgdmlld3BvcnQubWluWSArIDUgLyB6b29tLCB2aWV3cG9ydC5tYXhZIC0gNSAvIHpvb20pLFxuICAgIDEgLyB6b29tLFxuICAgIFZlYy5BbmdsZSh2aWV3cG9ydC5jZW50ZXIsIHBvaW50KVxuICApO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMoXCJzdmdcIiwgeyByZWY6IHJTdmcsIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRsLW92ZXJsYXlzX19pdGVtXCIsIGNsYXNzTmFtZSksIGNoaWxkcmVuOiBbXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChcInVzZVwiLCB7IGhyZWY6IFwiI2N1cnNvcl9oaW50XCIsIGNvbG9yLCBzdHJva2VXaWR0aDogMywgc3Ryb2tlOiBcInZhcigtLWNvbG9yLWJhY2tncm91bmQpXCIgfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChcInVzZVwiLCB7IGhyZWY6IFwiI2N1cnNvcl9oaW50XCIsIGNvbG9yLCBvcGFjaXR5IH0pXG4gIF0gfSk7XG59XG5leHBvcnQge1xuICBEZWZhdWx0Q29sbGFib3JhdG9ySGludFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmF1bHRDb2xsYWJvcmF0b3JIaW50Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCollaboratorHint.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCursor.mjs":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCursor.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultCursor: () => (/* binding */ DefaultCursor)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks/useTransform.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\");\n\n\n\n\nconst DefaultCursor = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function DefaultCursor2({\n  className,\n  zoom,\n  point,\n  color,\n  name,\n  chatMessage\n}) {\n  const rCursor = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  (0,_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_3__.useTransform)(rCursor, point?.x, point?.y, 1 / zoom);\n  if (!point)\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { ref: rCursor, className: classnames__WEBPACK_IMPORTED_MODULE_1__(\"tl-overlays__item\", className), children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: \"tl-cursor\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"use\", { href: \"#cursor\", color }) }),\n    chatMessage ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n      name && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-nametag-title\", style: { color }, children: name }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-nametag-chat\", style: { backgroundColor: color }, children: chatMessage })\n    ] }) : name && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-nametag\", style: { backgroundColor: color }, children: name })\n  ] });\n});\n\n//# sourceMappingURL=DefaultCursor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDdXJzb3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdEO0FBQ3BCO0FBQ0M7QUFDdUI7QUFDNUQsc0JBQXNCLDJDQUFJO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBa0IsNkNBQU07QUFDeEIsRUFBRSxxRUFBWTtBQUNkO0FBQ0E7QUFDQSx5QkFBeUIsdURBQUksVUFBVSx5QkFBeUIsdUNBQVU7QUFDMUUsb0JBQW9CLHNEQUFHLFVBQVUsa0RBQWtELHNEQUFHLFVBQVUsd0JBQXdCLEdBQUc7QUFDM0gsa0NBQWtDLHVEQUFJLENBQUMsdURBQVEsSUFBSTtBQUNuRCw4QkFBOEIsc0RBQUcsVUFBVSx3Q0FBd0MsT0FBTyxrQkFBa0I7QUFDNUcsc0JBQXNCLHNEQUFHLFVBQVUsdUNBQXVDLHdCQUF3Qix5QkFBeUI7QUFDM0gsT0FBTyw0QkFBNEIsc0RBQUcsVUFBVSxrQ0FBa0Msd0JBQXdCLGtCQUFrQjtBQUM1SCxLQUFLO0FBQ0wsQ0FBQztBQUdDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDdXJzb3IubWpzPzg2MzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRnJhZ21lbnQsIGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCB7IG1lbW8sIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlVHJhbnNmb3JtIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZVRyYW5zZm9ybS5tanNcIjtcbmNvbnN0IERlZmF1bHRDdXJzb3IgPSBtZW1vKGZ1bmN0aW9uIERlZmF1bHRDdXJzb3IyKHtcbiAgY2xhc3NOYW1lLFxuICB6b29tLFxuICBwb2ludCxcbiAgY29sb3IsXG4gIG5hbWUsXG4gIGNoYXRNZXNzYWdlXG59KSB7XG4gIGNvbnN0IHJDdXJzb3IgPSB1c2VSZWYobnVsbCk7XG4gIHVzZVRyYW5zZm9ybShyQ3Vyc29yLCBwb2ludD8ueCwgcG9pbnQ/LnksIDEgLyB6b29tKTtcbiAgaWYgKCFwb2ludClcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFwiZGl2XCIsIHsgcmVmOiByQ3Vyc29yLCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0bC1vdmVybGF5c19faXRlbVwiLCBjbGFzc05hbWUpLCBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJzdmdcIiwgeyBjbGFzc05hbWU6IFwidGwtY3Vyc29yXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFwidXNlXCIsIHsgaHJlZjogXCIjY3Vyc29yXCIsIGNvbG9yIH0pIH0pLFxuICAgIGNoYXRNZXNzYWdlID8gLyogQF9fUFVSRV9fICovIGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtcbiAgICAgIG5hbWUgJiYgLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1uYW1ldGFnLXRpdGxlXCIsIHN0eWxlOiB7IGNvbG9yIH0sIGNoaWxkcmVuOiBuYW1lIH0pLFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1uYW1ldGFnLWNoYXRcIiwgc3R5bGU6IHsgYmFja2dyb3VuZENvbG9yOiBjb2xvciB9LCBjaGlsZHJlbjogY2hhdE1lc3NhZ2UgfSlcbiAgICBdIH0pIDogbmFtZSAmJiAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRsLW5hbWV0YWdcIiwgc3R5bGU6IHsgYmFja2dyb3VuZENvbG9yOiBjb2xvciB9LCBjaGlsZHJlbjogbmFtZSB9KVxuICBdIH0pO1xufSk7XG5leHBvcnQge1xuICBEZWZhdWx0Q3Vyc29yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdEN1cnNvci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCursor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultErrorFallback.mjs":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultErrorFallback.mjs ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultErrorFallback: () => (/* binding */ DefaultErrorFallback)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _utils_hardResetEditor_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/hardResetEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/hardResetEditor.mjs\");\n/* harmony import */ var _utils_refreshPage_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/refreshPage.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/refreshPage.mjs\");\n/* harmony import */ var _ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../ErrorBoundary.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\");\n\n\n\n\n\n\n\n\n\n\nconst BASE_ERROR_URL = \"https://github.com/tldraw/tldraw/issues/new\";\nconst DefaultErrorFallback = ({ error, editor }) => {\n  const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  const [shouldShowError, setShouldShowError] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(\"development\" === \"development\");\n  const [didCopy, setDidCopy] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n  const [shouldShowResetConfirmation, setShouldShowResetConfirmation] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n  let Canvas = null;\n  try {\n    const components = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_6__.useEditorComponents)();\n    Canvas = components.Canvas ?? null;\n  } catch (e) {\n  }\n  const errorMessage = error instanceof Error ? error.message : String(error);\n  const errorStack = error instanceof Error ? error.stack : null;\n  const isDarkModeFromApp = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\n    \"isDarkMode\",\n    () => {\n      try {\n        if (editor) {\n          return editor.user.getIsDarkMode();\n        }\n      } catch {\n      }\n      return null;\n    },\n    [editor]\n  );\n  const [isDarkMode, setIsDarkMode] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useLayoutEffect)(() => {\n    if (isDarkModeFromApp !== null) {\n      setIsDarkMode(isDarkModeFromApp);\n    }\n    let parent = containerRef.current?.parentElement;\n    let foundParentThemeClass = false;\n    while (parent) {\n      if (parent.classList.contains(\"tl-theme__dark\") || parent.classList.contains(\"tl-theme__light\")) {\n        foundParentThemeClass = true;\n        break;\n      }\n      parent = parent.parentElement;\n    }\n    if (foundParentThemeClass) {\n      setIsDarkMode(null);\n      return;\n    }\n    setIsDarkMode(window.matchMedia(\"(prefers-color-scheme: dark)\").matches);\n  }, [isDarkModeFromApp]);\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(() => {\n    if (didCopy) {\n      const timeout = editor?.timers.setTimeout(() => {\n        setDidCopy(false);\n      }, 2e3);\n      return () => clearTimeout(timeout);\n    }\n  }, [didCopy, editor]);\n  const copyError = () => {\n    const textarea = document.createElement(\"textarea\");\n    textarea.value = errorStack ?? errorMessage;\n    document.body.appendChild(textarea);\n    textarea.select();\n    document.execCommand(\"copy\");\n    textarea.remove();\n    setDidCopy(true);\n  };\n  const refresh = () => {\n    (0,_utils_refreshPage_mjs__WEBPACK_IMPORTED_MODULE_8__.refreshPage)();\n  };\n  const resetLocalState = async () => {\n    (0,_utils_hardResetEditor_mjs__WEBPACK_IMPORTED_MODULE_7__.hardResetEditor)();\n  };\n  const url = new URL(BASE_ERROR_URL);\n  url.searchParams.set(\"title\", errorMessage);\n  url.searchParams.set(\"labels\", `bug`);\n  url.searchParams.set(\n    \"body\",\n    `Hey, I ran into an error while using tldraw:\n\n\\`\\`\\`js\n${errorStack ?? errorMessage}\n\\`\\`\\`\n\nMy browser: ${navigator.userAgent}`\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\n    \"div\",\n    {\n      ref: containerRef,\n      className: classnames__WEBPACK_IMPORTED_MODULE_3__(\n        \"tl-container tl-error-boundary\",\n        // error-boundary is sometimes used outside of the theme\n        // container, so we need to provide it with a theme for our\n        // styles to work correctly\n        isDarkMode === null ? \"\" : isDarkMode ? \"tl-theme__dark\" : \"tl-theme__light\"\n      ),\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-error-boundary__overlay\" }),\n        editor && // opportunistically attempt to render the canvas to reassure\n        // the user that their document is still there. there's a good\n        // chance this won't work (ie the error that we're currently\n        // notifying the user about originates in the canvas) so it's\n        // not a big deal if it doesn't work - in that case we just have\n        // a plain grey background.\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_9__.ErrorBoundary, { onError: _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.noop, fallback: () => null, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_5__.EditorContext.Provider, { value: editor, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-overlay tl-error-boundary__canvas\", children: Canvas ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Canvas, {}) : null }) }) }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"div\",\n          {\n            className: classnames__WEBPACK_IMPORTED_MODULE_3__(\"tl-modal\", \"tl-error-boundary__content\", {\n              \"tl-error-boundary__content__expanded\": shouldShowError && !shouldShowResetConfirmation\n            }),\n            children: shouldShowResetConfirmation ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h2\", { children: \"Are you sure?\" }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { children: \"Resetting your data will delete your drawing and cannot be undone.\" }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"tl-error-boundary__content__actions\", children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { onClick: () => setShouldShowResetConfirmation(false), children: \"Cancel\" }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { className: \"tl-error-boundary__reset\", onClick: resetLocalState, children: \"Reset data\" })\n              ] })\n            ] }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h2\", { children: \"Something's gone wrong.\" }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"p\", { children: [\n                \"Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can \",\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { href: url.toString(), children: \"create a GitHub issue\" }),\n                \" or\",\n                \" \",\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { href: \"https://discord.gg/Cq6cPsTfNy\", children: \"ask for help on Discord\" }),\n                \".\"\n              ] }),\n              shouldShowError && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n                \"Message:\",\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"h4\", { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", { children: errorMessage }) }),\n                \"Stack trace:\",\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"tl-error-boundary__content__error\", children: [\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"pre\", { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"code\", { children: errorStack ?? errorMessage }) }),\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { onClick: copyError, children: didCopy ? \"Copied!\" : \"Copy\" })\n                ] })\n              ] }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"tl-error-boundary__content__actions\", children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { onClick: () => setShouldShowError(!shouldShowError), children: shouldShowError ? \"Hide details\" : \"Show details\" }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"tl-error-boundary__content__actions__group\", children: [\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n                    \"button\",\n                    {\n                      className: \"tl-error-boundary__reset\",\n                      onClick: () => setShouldShowResetConfirmation(true),\n                      children: \"Reset data\"\n                    }\n                  ),\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"button\", { className: \"tl-error-boundary__refresh\", onClick: refresh, children: \"Refresh Page\" })\n                ] })\n              ] })\n            ] })\n          }\n        )\n      ]\n    }\n  );\n};\n\n//# sourceMappingURL=DefaultErrorFallback.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRFcnJvckZhbGxiYWNrLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUF3RDtBQUNmO0FBQ0o7QUFDRDtBQUNpQztBQUNYO0FBQ2dCO0FBQ1I7QUFDUjtBQUNMO0FBQ3JEO0FBQ0EsZ0NBQWdDLGVBQWU7QUFDL0MsdUJBQXVCLDZDQUFNO0FBQzdCLGdEQUFnRCwrQ0FBUSxDQUFDLGFBQW9CO0FBQzdFLGdDQUFnQywrQ0FBUTtBQUN4Qyx3RUFBd0UsK0NBQVE7QUFDaEY7QUFDQTtBQUNBLHVCQUF1QixtRkFBbUI7QUFDMUM7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHVEQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxzQ0FBc0MsK0NBQVE7QUFDOUMsRUFBRSxzREFBZTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksbUVBQVc7QUFDZjtBQUNBO0FBQ0EsSUFBSSwyRUFBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjs7QUFFQSxjQUFjLG9CQUFvQjtBQUNsQztBQUNBLHlCQUF5Qix1REFBSTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdUNBQVU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQUcsVUFBVSx5Q0FBeUM7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFHLENBQUMsNkRBQWEsSUFBSSxTQUFTLCtDQUFJLGtEQUFrRCxzREFBRyxDQUFDLCtEQUFhLGFBQWEseUNBQXlDLHNEQUFHLFVBQVUsc0ZBQXNGLHNEQUFHLFdBQVcsVUFBVSxHQUFHLEdBQUc7QUFDcFQsd0JBQXdCLHNEQUFHO0FBQzNCO0FBQ0E7QUFDQSx1QkFBdUIsdUNBQVU7QUFDakM7QUFDQSxhQUFhO0FBQ2Isb0VBQW9FLHVEQUFJLENBQUMsdURBQVEsSUFBSTtBQUNyRiw4QkFBOEIsc0RBQUcsU0FBUywyQkFBMkI7QUFDckUsOEJBQThCLHNEQUFHLFFBQVEsZ0ZBQWdGO0FBQ3pILDhCQUE4Qix1REFBSSxVQUFVO0FBQzVDLGdDQUFnQyxzREFBRyxhQUFhLDBFQUEwRTtBQUMxSCxnQ0FBZ0Msc0RBQUcsYUFBYSx5RkFBeUY7QUFDekksaUJBQWlCO0FBQ2pCLGVBQWUsb0JBQW9CLHVEQUFJLENBQUMsdURBQVEsSUFBSTtBQUNwRCw4QkFBOEIsc0RBQUcsU0FBUyxxQ0FBcUM7QUFDL0UsOEJBQThCLHVEQUFJLFFBQVE7QUFDMUM7QUFDQSxnQ0FBZ0Msc0RBQUcsUUFBUSx5REFBeUQ7QUFDcEc7QUFDQTtBQUNBLGdDQUFnQyxzREFBRyxRQUFRLDRFQUE0RTtBQUN2SDtBQUNBLGlCQUFpQjtBQUNqQixpREFBaUQsdURBQUksQ0FBQyx1REFBUSxJQUFJO0FBQ2xFO0FBQ0EsZ0NBQWdDLHNEQUFHLFNBQVMsMEJBQTBCLHNEQUFHLFdBQVcsd0JBQXdCLEdBQUc7QUFDL0c7QUFDQSxnQ0FBZ0MsdURBQUksVUFBVTtBQUM5QyxrQ0FBa0Msc0RBQUcsVUFBVSwwQkFBMEIsc0RBQUcsV0FBVyxzQ0FBc0MsR0FBRztBQUNoSSxrQ0FBa0Msc0RBQUcsYUFBYSw0REFBNEQ7QUFDOUcsbUJBQW1CO0FBQ25CLGlCQUFpQjtBQUNqQiw4QkFBOEIsdURBQUksVUFBVTtBQUM1QyxnQ0FBZ0Msc0RBQUcsYUFBYSxrSEFBa0g7QUFDbEssZ0NBQWdDLHVEQUFJLFVBQVU7QUFDOUMsa0NBQWtDLHNEQUFHO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHNEQUFHLGFBQWEscUZBQXFGO0FBQ3ZJLG1CQUFtQjtBQUNuQixpQkFBaUI7QUFDakIsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRFcnJvckZhbGxiYWNrLm1qcz9lNjRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZyYWdtZW50LCBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZVZhbHVlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IG5vb3AgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTGF5b3V0RWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBFZGl0b3JDb250ZXh0IH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZUVkaXRvci5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvckNvbXBvbmVudHMgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlRWRpdG9yQ29tcG9uZW50cy5tanNcIjtcbmltcG9ydCB7IGhhcmRSZXNldEVkaXRvciB9IGZyb20gXCIuLi8uLi91dGlscy9oYXJkUmVzZXRFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyByZWZyZXNoUGFnZSB9IGZyb20gXCIuLi8uLi91dGlscy9yZWZyZXNoUGFnZS5tanNcIjtcbmltcG9ydCB7IEVycm9yQm91bmRhcnkgfSBmcm9tIFwiLi4vRXJyb3JCb3VuZGFyeS5tanNcIjtcbmNvbnN0IEJBU0VfRVJST1JfVVJMID0gXCJodHRwczovL2dpdGh1Yi5jb20vdGxkcmF3L3RsZHJhdy9pc3N1ZXMvbmV3XCI7XG5jb25zdCBEZWZhdWx0RXJyb3JGYWxsYmFjayA9ICh7IGVycm9yLCBlZGl0b3IgfSkgPT4ge1xuICBjb25zdCBjb250YWluZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFtzaG91bGRTaG93RXJyb3IsIHNldFNob3VsZFNob3dFcnJvcl0gPSB1c2VTdGF0ZShwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKTtcbiAgY29uc3QgW2RpZENvcHksIHNldERpZENvcHldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvdWxkU2hvd1Jlc2V0Q29uZmlybWF0aW9uLCBzZXRTaG91bGRTaG93UmVzZXRDb25maXJtYXRpb25dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBsZXQgQ2FudmFzID0gbnVsbDtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb21wb25lbnRzID0gdXNlRWRpdG9yQ29tcG9uZW50cygpO1xuICAgIENhbnZhcyA9IGNvbXBvbmVudHMuQ2FudmFzID8/IG51bGw7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gIGNvbnN0IGVycm9yU3RhY2sgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiBudWxsO1xuICBjb25zdCBpc0RhcmtNb2RlRnJvbUFwcCA9IHVzZVZhbHVlKFxuICAgIFwiaXNEYXJrTW9kZVwiLFxuICAgICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgICByZXR1cm4gZWRpdG9yLnVzZXIuZ2V0SXNEYXJrTW9kZSgpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIHtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgW2VkaXRvcl1cbiAgKTtcbiAgY29uc3QgW2lzRGFya01vZGUsIHNldElzRGFya01vZGVdID0gdXNlU3RhdGUobnVsbCk7XG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzRGFya01vZGVGcm9tQXBwICE9PSBudWxsKSB7XG4gICAgICBzZXRJc0RhcmtNb2RlKGlzRGFya01vZGVGcm9tQXBwKTtcbiAgICB9XG4gICAgbGV0IHBhcmVudCA9IGNvbnRhaW5lclJlZi5jdXJyZW50Py5wYXJlbnRFbGVtZW50O1xuICAgIGxldCBmb3VuZFBhcmVudFRoZW1lQ2xhc3MgPSBmYWxzZTtcbiAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhcInRsLXRoZW1lX19kYXJrXCIpIHx8IHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0bC10aGVtZV9fbGlnaHRcIikpIHtcbiAgICAgICAgZm91bmRQYXJlbnRUaGVtZUNsYXNzID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcbiAgICB9XG4gICAgaWYgKGZvdW5kUGFyZW50VGhlbWVDbGFzcykge1xuICAgICAgc2V0SXNEYXJrTW9kZShudWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0SXNEYXJrTW9kZSh3aW5kb3cubWF0Y2hNZWRpYShcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaylcIikubWF0Y2hlcyk7XG4gIH0sIFtpc0RhcmtNb2RlRnJvbUFwcF0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChkaWRDb3B5KSB7XG4gICAgICBjb25zdCB0aW1lb3V0ID0gZWRpdG9yPy50aW1lcnMuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNldERpZENvcHkoZmFsc2UpO1xuICAgICAgfSwgMmUzKTtcbiAgICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgfVxuICB9LCBbZGlkQ29weSwgZWRpdG9yXSk7XG4gIGNvbnN0IGNvcHlFcnJvciA9ICgpID0+IHtcbiAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICB0ZXh0YXJlYS52YWx1ZSA9IGVycm9yU3RhY2sgPz8gZXJyb3JNZXNzYWdlO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpO1xuICAgIHRleHRhcmVhLnNlbGVjdCgpO1xuICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiY29weVwiKTtcbiAgICB0ZXh0YXJlYS5yZW1vdmUoKTtcbiAgICBzZXREaWRDb3B5KHRydWUpO1xuICB9O1xuICBjb25zdCByZWZyZXNoID0gKCkgPT4ge1xuICAgIHJlZnJlc2hQYWdlKCk7XG4gIH07XG4gIGNvbnN0IHJlc2V0TG9jYWxTdGF0ZSA9IGFzeW5jICgpID0+IHtcbiAgICBoYXJkUmVzZXRFZGl0b3IoKTtcbiAgfTtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChCQVNFX0VSUk9SX1VSTCk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwidGl0bGVcIiwgZXJyb3JNZXNzYWdlKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJsYWJlbHNcIiwgYGJ1Z2ApO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldChcbiAgICBcImJvZHlcIixcbiAgICBgSGV5LCBJIHJhbiBpbnRvIGFuIGVycm9yIHdoaWxlIHVzaW5nIHRsZHJhdzpcblxuXFxgXFxgXFxganNcbiR7ZXJyb3JTdGFjayA/PyBlcnJvck1lc3NhZ2V9XG5cXGBcXGBcXGBcblxuTXkgYnJvd3NlcjogJHtuYXZpZ2F0b3IudXNlckFnZW50fWBcbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFxuICAgIFwiZGl2XCIsXG4gICAge1xuICAgICAgcmVmOiBjb250YWluZXJSZWYsXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXG4gICAgICAgIFwidGwtY29udGFpbmVyIHRsLWVycm9yLWJvdW5kYXJ5XCIsXG4gICAgICAgIC8vIGVycm9yLWJvdW5kYXJ5IGlzIHNvbWV0aW1lcyB1c2VkIG91dHNpZGUgb2YgdGhlIHRoZW1lXG4gICAgICAgIC8vIGNvbnRhaW5lciwgc28gd2UgbmVlZCB0byBwcm92aWRlIGl0IHdpdGggYSB0aGVtZSBmb3Igb3VyXG4gICAgICAgIC8vIHN0eWxlcyB0byB3b3JrIGNvcnJlY3RseVxuICAgICAgICBpc0RhcmtNb2RlID09PSBudWxsID8gXCJcIiA6IGlzRGFya01vZGUgPyBcInRsLXRoZW1lX19kYXJrXCIgOiBcInRsLXRoZW1lX19saWdodFwiXG4gICAgICApLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1lcnJvci1ib3VuZGFyeV9fb3ZlcmxheVwiIH0pLFxuICAgICAgICBlZGl0b3IgJiYgLy8gb3Bwb3J0dW5pc3RpY2FsbHkgYXR0ZW1wdCB0byByZW5kZXIgdGhlIGNhbnZhcyB0byByZWFzc3VyZVxuICAgICAgICAvLyB0aGUgdXNlciB0aGF0IHRoZWlyIGRvY3VtZW50IGlzIHN0aWxsIHRoZXJlLiB0aGVyZSdzIGEgZ29vZFxuICAgICAgICAvLyBjaGFuY2UgdGhpcyB3b24ndCB3b3JrIChpZSB0aGUgZXJyb3IgdGhhdCB3ZSdyZSBjdXJyZW50bHlcbiAgICAgICAgLy8gbm90aWZ5aW5nIHRoZSB1c2VyIGFib3V0IG9yaWdpbmF0ZXMgaW4gdGhlIGNhbnZhcykgc28gaXQnc1xuICAgICAgICAvLyBub3QgYSBiaWcgZGVhbCBpZiBpdCBkb2Vzbid0IHdvcmsgLSBpbiB0aGF0IGNhc2Ugd2UganVzdCBoYXZlXG4gICAgICAgIC8vIGEgcGxhaW4gZ3JleSBiYWNrZ3JvdW5kLlxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KEVycm9yQm91bmRhcnksIHsgb25FcnJvcjogbm9vcCwgZmFsbGJhY2s6ICgpID0+IG51bGwsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KEVkaXRvckNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGVkaXRvciwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidGwtb3ZlcmxheSB0bC1lcnJvci1ib3VuZGFyeV9fY2FudmFzXCIsIGNoaWxkcmVuOiBDYW52YXMgPyAvKiBAX19QVVJFX18gKi8ganN4KENhbnZhcywge30pIDogbnVsbCB9KSB9KSB9KSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRsLW1vZGFsXCIsIFwidGwtZXJyb3ItYm91bmRhcnlfX2NvbnRlbnRcIiwge1xuICAgICAgICAgICAgICBcInRsLWVycm9yLWJvdW5kYXJ5X19jb250ZW50X19leHBhbmRlZFwiOiBzaG91bGRTaG93RXJyb3IgJiYgIXNob3VsZFNob3dSZXNldENvbmZpcm1hdGlvblxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjaGlsZHJlbjogc2hvdWxkU2hvd1Jlc2V0Q29uZmlybWF0aW9uID8gLyogQF9fUFVSRV9fICovIGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImgyXCIsIHsgY2hpbGRyZW46IFwiQXJlIHlvdSBzdXJlP1wiIH0pLFxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicFwiLCB7IGNoaWxkcmVuOiBcIlJlc2V0dGluZyB5b3VyIGRhdGEgd2lsbCBkZWxldGUgeW91ciBkcmF3aW5nIGFuZCBjYW5ub3QgYmUgdW5kb25lLlwiIH0pLFxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1lcnJvci1ib3VuZGFyeV9fY29udGVudF9fYWN0aW9uc1wiLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJidXR0b25cIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRTaG91bGRTaG93UmVzZXRDb25maXJtYXRpb24oZmFsc2UpLCBjaGlsZHJlbjogXCJDYW5jZWxcIiB9KSxcbiAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcInRsLWVycm9yLWJvdW5kYXJ5X19yZXNldFwiLCBvbkNsaWNrOiByZXNldExvY2FsU3RhdGUsIGNoaWxkcmVuOiBcIlJlc2V0IGRhdGFcIiB9KVxuICAgICAgICAgICAgICBdIH0pXG4gICAgICAgICAgICBdIH0pIDogLyogQF9fUFVSRV9fICovIGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImgyXCIsIHsgY2hpbGRyZW46IFwiU29tZXRoaW5nJ3MgZ29uZSB3cm9uZy5cIiB9KSxcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHMoXCJwXCIsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBcIlNvcnJ5LCB3ZSBlbmNvdW50ZXJlZCBhbiBlcnJvci4gUGxlYXNlIHJlZnJlc2ggdGhlIHBhZ2UgdG8gY29udGludWUuIElmIHlvdSBrZWVwIHNlZWluZyB0aGlzIGVycm9yLCB5b3UgY2FuIFwiLFxuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJhXCIsIHsgaHJlZjogdXJsLnRvU3RyaW5nKCksIGNoaWxkcmVuOiBcImNyZWF0ZSBhIEdpdEh1YiBpc3N1ZVwiIH0pLFxuICAgICAgICAgICAgICAgIFwiIG9yXCIsXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImFcIiwgeyBocmVmOiBcImh0dHBzOi8vZGlzY29yZC5nZy9DcTZjUHNUZk55XCIsIGNoaWxkcmVuOiBcImFzayBmb3IgaGVscCBvbiBEaXNjb3JkXCIgfSksXG4gICAgICAgICAgICAgICAgXCIuXCJcbiAgICAgICAgICAgICAgXSB9KSxcbiAgICAgICAgICAgICAgc2hvdWxkU2hvd0Vycm9yICYmIC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgXCJNZXNzYWdlOlwiLFxuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJoNFwiLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFwiY29kZVwiLCB7IGNoaWxkcmVuOiBlcnJvck1lc3NhZ2UgfSkgfSksXG4gICAgICAgICAgICAgICAgXCJTdGFjayB0cmFjZTpcIixcbiAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0bC1lcnJvci1ib3VuZGFyeV9fY29udGVudF9fZXJyb3JcIiwgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwcmVcIiwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChcImNvZGVcIiwgeyBjaGlsZHJlbjogZXJyb3JTdGFjayA/PyBlcnJvck1lc3NhZ2UgfSkgfSksXG4gICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwiYnV0dG9uXCIsIHsgb25DbGljazogY29weUVycm9yLCBjaGlsZHJlbjogZGlkQ29weSA/IFwiQ29waWVkIVwiIDogXCJDb3B5XCIgfSlcbiAgICAgICAgICAgICAgICBdIH0pXG4gICAgICAgICAgICAgIF0gfSksXG4gICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRsLWVycm9yLWJvdW5kYXJ5X19jb250ZW50X19hY3Rpb25zXCIsIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImJ1dHRvblwiLCB7IG9uQ2xpY2s6ICgpID0+IHNldFNob3VsZFNob3dFcnJvcighc2hvdWxkU2hvd0Vycm9yKSwgY2hpbGRyZW46IHNob3VsZFNob3dFcnJvciA/IFwiSGlkZSBkZXRhaWxzXCIgOiBcIlNob3cgZGV0YWlsc1wiIH0pLFxuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRsLWVycm9yLWJvdW5kYXJ5X19jb250ZW50X19hY3Rpb25zX19ncm91cFwiLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgICAgICAgICAgICAgXCJidXR0b25cIixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJ0bC1lcnJvci1ib3VuZGFyeV9fcmVzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiBzZXRTaG91bGRTaG93UmVzZXRDb25maXJtYXRpb24odHJ1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiUmVzZXQgZGF0YVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcInRsLWVycm9yLWJvdW5kYXJ5X19yZWZyZXNoXCIsIG9uQ2xpY2s6IHJlZnJlc2gsIGNoaWxkcmVuOiBcIlJlZnJlc2ggUGFnZVwiIH0pXG4gICAgICAgICAgICAgICAgXSB9KVxuICAgICAgICAgICAgICBdIH0pXG4gICAgICAgICAgICBdIH0pXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICBdXG4gICAgfVxuICApO1xufTtcbmV4cG9ydCB7XG4gIERlZmF1bHRFcnJvckZhbGxiYWNrXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdEVycm9yRmFsbGJhY2subWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultErrorFallback.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultGrid.mjs":
/*!************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultGrid.mjs ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultGrid: () => (/* binding */ DefaultGrid)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\nfunction DefaultGrid({ x, y, z, size }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n  const { gridSteps } = editor.options;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"svg\", { className: \"tl-grid\", version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"defs\", { children: gridSteps.map(({ min, mid, step }, i) => {\n      const s = step * size * z;\n      const xo = 0.5 + x * z;\n      const yo = 0.5 + y * z;\n      const gxo = xo > 0 ? xo % s : s + xo % s;\n      const gyo = yo > 0 ? yo % s : s + yo % s;\n      const opacity = z < mid ? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.modulate)(z, [min, mid], [0, 1]) : 1;\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n        \"pattern\",\n        {\n          id: `grid-${step}`,\n          width: s,\n          height: s,\n          patternUnits: \"userSpaceOnUse\",\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { className: \"tl-grid-dot\", cx: gxo, cy: gyo, r: 1, opacity })\n        },\n        `grid-pattern-${i}`\n      );\n    }) }),\n    gridSteps.map(({ step }, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"rect\", { width: \"100%\", height: \"100%\", fill: `url(#grid-${step})` }, `grid-rect-${i}`))\n  ] });\n}\n\n//# sourceMappingURL=DefaultGrid.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRHcmlkLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThDO0FBQ0w7QUFDYTtBQUN0RCx1QkFBdUIsZUFBZTtBQUN0QyxpQkFBaUIsK0RBQVM7QUFDMUIsVUFBVSxZQUFZO0FBQ3RCLHlCQUF5Qix1REFBSSxVQUFVO0FBQ3ZDLG9CQUFvQixzREFBRyxXQUFXLDJCQUEyQixnQkFBZ0I7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyx1REFBUTtBQUN4Qyw2QkFBNkIsc0RBQUc7QUFDaEM7QUFDQTtBQUNBLHNCQUFzQixLQUFLO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxzREFBRyxhQUFhLDJEQUEyRDtBQUMvRyxTQUFTO0FBQ1Qsd0JBQXdCLEVBQUU7QUFDMUI7QUFDQSxLQUFLLEdBQUc7QUFDUixxQkFBcUIsTUFBTSx3QkFBd0Isc0RBQUcsV0FBVyxrREFBa0QsS0FBSyxJQUFJLGVBQWUsRUFBRTtBQUM3SSxLQUFLO0FBQ0w7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0R3JpZC5tanM/OTgxYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IG1vZHVsYXRlIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5mdW5jdGlvbiBEZWZhdWx0R3JpZCh7IHgsIHksIHosIHNpemUgfSkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgeyBncmlkU3RlcHMgfSA9IGVkaXRvci5vcHRpb25zO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMoXCJzdmdcIiwgeyBjbGFzc05hbWU6IFwidGwtZ3JpZFwiLCB2ZXJzaW9uOiBcIjEuMVwiLCB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkZWZzXCIsIHsgY2hpbGRyZW46IGdyaWRTdGVwcy5tYXAoKHsgbWluLCBtaWQsIHN0ZXAgfSwgaSkgPT4ge1xuICAgICAgY29uc3QgcyA9IHN0ZXAgKiBzaXplICogejtcbiAgICAgIGNvbnN0IHhvID0gMC41ICsgeCAqIHo7XG4gICAgICBjb25zdCB5byA9IDAuNSArIHkgKiB6O1xuICAgICAgY29uc3QgZ3hvID0geG8gPiAwID8geG8gJSBzIDogcyArIHhvICUgcztcbiAgICAgIGNvbnN0IGd5byA9IHlvID4gMCA/IHlvICUgcyA6IHMgKyB5byAlIHM7XG4gICAgICBjb25zdCBvcGFjaXR5ID0geiA8IG1pZCA/IG1vZHVsYXRlKHosIFttaW4sIG1pZF0sIFswLCAxXSkgOiAxO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgIFwicGF0dGVyblwiLFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IGBncmlkLSR7c3RlcH1gLFxuICAgICAgICAgIHdpZHRoOiBzLFxuICAgICAgICAgIGhlaWdodDogcyxcbiAgICAgICAgICBwYXR0ZXJuVW5pdHM6IFwidXNlclNwYWNlT25Vc2VcIixcbiAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChcImNpcmNsZVwiLCB7IGNsYXNzTmFtZTogXCJ0bC1ncmlkLWRvdFwiLCBjeDogZ3hvLCBjeTogZ3lvLCByOiAxLCBvcGFjaXR5IH0pXG4gICAgICAgIH0sXG4gICAgICAgIGBncmlkLXBhdHRlcm4tJHtpfWBcbiAgICAgICk7XG4gICAgfSkgfSksXG4gICAgZ3JpZFN0ZXBzLm1hcCgoeyBzdGVwIH0sIGkpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJyZWN0XCIsIHsgd2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiLCBmaWxsOiBgdXJsKCNncmlkLSR7c3RlcH0pYCB9LCBgZ3JpZC1yZWN0LSR7aX1gKSlcbiAgXSB9KTtcbn1cbmV4cG9ydCB7XG4gIERlZmF1bHRHcmlkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdEdyaWQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultGrid.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandle.mjs":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandle.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultHandle: () => (/* binding */ DefaultHandle)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\nfunction DefaultHandle({ handle, isCoarse, className, zoom }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  const br = (isCoarse ? editor.options.coarseHandleRadius : editor.options.handleRadius) / zoom;\n  if (handle.type === \"clone\") {\n    const fr2 = 3 / Math.max(zoom, 0.35);\n    const path = `M0,${-fr2} A${fr2},${fr2} 0 0,1 0,${fr2}`;\n    const index = _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.SIDES.indexOf(handle.id);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { className: classnames__WEBPACK_IMPORTED_MODULE_1__(`tl-handle tl-handle__${handle.type}`, className), children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { className: \"tl-handle__bg\", r: br }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { className: \"tl-handle__fg\", d: path, transform: `rotate(${-90 + 90 * index})` })\n    ] });\n  }\n  const fr = (handle.type === \"create\" && isCoarse ? 3 : 4) / Math.max(zoom, 0.35);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { className: classnames__WEBPACK_IMPORTED_MODULE_1__(`tl-handle tl-handle__${handle.type}`, className), children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { className: \"tl-handle__bg\", r: br }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { className: \"tl-handle__fg\", r: fr })\n  ] });\n}\n\n//# sourceMappingURL=DefaultHandle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRIYW5kbGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThDO0FBQ1Y7QUFDUTtBQUNVO0FBQ3RELHlCQUF5QixtQ0FBbUM7QUFDNUQsaUJBQWlCLCtEQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixNQUFNLEdBQUcsSUFBSSxHQUFHLEtBQUssVUFBVSxJQUFJO0FBQzFELGtCQUFrQixpREFBSztBQUN2QiwyQkFBMkIsdURBQUksUUFBUSxXQUFXLHVDQUFVLHlCQUF5QixZQUFZO0FBQ2pHLHNCQUFzQixzREFBRyxhQUFhLG1DQUFtQztBQUN6RSxzQkFBc0Isc0RBQUcsV0FBVywwREFBMEQsaUJBQWlCLElBQUk7QUFDbkgsT0FBTztBQUNQO0FBQ0E7QUFDQSx5QkFBeUIsdURBQUksUUFBUSxXQUFXLHVDQUFVLHlCQUF5QixZQUFZO0FBQy9GLG9CQUFvQixzREFBRyxhQUFhLG1DQUFtQztBQUN2RSxvQkFBb0Isc0RBQUcsYUFBYSxtQ0FBbUM7QUFDdkUsS0FBSztBQUNMO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdEhhbmRsZS5tanM/NTU5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5pbXBvcnQgeyBTSURFUyB9IGZyb20gXCIuLi8uLi9jb25zdGFudHMubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlRWRpdG9yLm1qc1wiO1xuZnVuY3Rpb24gRGVmYXVsdEhhbmRsZSh7IGhhbmRsZSwgaXNDb2Fyc2UsIGNsYXNzTmFtZSwgem9vbSB9KSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBiciA9IChpc0NvYXJzZSA/IGVkaXRvci5vcHRpb25zLmNvYXJzZUhhbmRsZVJhZGl1cyA6IGVkaXRvci5vcHRpb25zLmhhbmRsZVJhZGl1cykgLyB6b29tO1xuICBpZiAoaGFuZGxlLnR5cGUgPT09IFwiY2xvbmVcIikge1xuICAgIGNvbnN0IGZyMiA9IDMgLyBNYXRoLm1heCh6b29tLCAwLjM1KTtcbiAgICBjb25zdCBwYXRoID0gYE0wLCR7LWZyMn0gQSR7ZnIyfSwke2ZyMn0gMCAwLDEgMCwke2ZyMn1gO1xuICAgIGNvbnN0IGluZGV4ID0gU0lERVMuaW5kZXhPZihoYW5kbGUuaWQpO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4cyhcImdcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoYHRsLWhhbmRsZSB0bC1oYW5kbGVfXyR7aGFuZGxlLnR5cGV9YCwgY2xhc3NOYW1lKSwgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJjaXJjbGVcIiwgeyBjbGFzc05hbWU6IFwidGwtaGFuZGxlX19iZ1wiLCByOiBiciB9KSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwYXRoXCIsIHsgY2xhc3NOYW1lOiBcInRsLWhhbmRsZV9fZmdcIiwgZDogcGF0aCwgdHJhbnNmb3JtOiBgcm90YXRlKCR7LTkwICsgOTAgKiBpbmRleH0pYCB9KVxuICAgIF0gfSk7XG4gIH1cbiAgY29uc3QgZnIgPSAoaGFuZGxlLnR5cGUgPT09IFwiY3JlYXRlXCIgJiYgaXNDb2Fyc2UgPyAzIDogNCkgLyBNYXRoLm1heCh6b29tLCAwLjM1KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFwiZ1wiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcyhgdGwtaGFuZGxlIHRsLWhhbmRsZV9fJHtoYW5kbGUudHlwZX1gLCBjbGFzc05hbWUpLCBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJjaXJjbGVcIiwgeyBjbGFzc05hbWU6IFwidGwtaGFuZGxlX19iZ1wiLCByOiBiciB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFwiY2lyY2xlXCIsIHsgY2xhc3NOYW1lOiBcInRsLWhhbmRsZV9fZmdcIiwgcjogZnIgfSlcbiAgXSB9KTtcbn1cbmV4cG9ydCB7XG4gIERlZmF1bHRIYW5kbGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZhdWx0SGFuZGxlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandles.mjs":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandles.mjs ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultHandles: () => (/* binding */ DefaultHandles)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\nconst DefaultHandles = ({ children }) => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: \"tl-user-handles tl-overlays__item\", children });\n};\n\n//# sourceMappingURL=DefaultHandles.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRIYW5kbGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QztBQUN4QywwQkFBMEIsVUFBVTtBQUNwQyx5QkFBeUIsc0RBQUcsVUFBVSwwREFBMEQ7QUFDaEc7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0SGFuZGxlcy5tanM/MTU0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmNvbnN0IERlZmF1bHRIYW5kbGVzID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcInN2Z1wiLCB7IGNsYXNzTmFtZTogXCJ0bC11c2VyLWhhbmRsZXMgdGwtb3ZlcmxheXNfX2l0ZW1cIiwgY2hpbGRyZW4gfSk7XG59O1xuZXhwb3J0IHtcbiAgRGVmYXVsdEhhbmRsZXNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZhdWx0SGFuZGxlcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandles.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultLoadingScreen.mjs":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultLoadingScreen.mjs ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultLoadingScreen: () => (/* binding */ DefaultLoadingScreen)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../TldrawEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/TldrawEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n\n\n\nconst DefaultLoadingScreen = () => {\n  const { Spinner } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditorComponents)();\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_TldrawEditor_mjs__WEBPACK_IMPORTED_MODULE_1__.LoadingScreen, { children: Spinner ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Spinner, {}) : null });\n};\n\n//# sourceMappingURL=DefaultLoadingScreen.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRMb2FkaW5nU2NyZWVuLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdDO0FBQ2U7QUFDbUI7QUFDMUU7QUFDQSxVQUFVLFVBQVUsRUFBRSxtRkFBbUI7QUFDekMseUJBQXlCLHNEQUFHLENBQUMsNERBQWEsSUFBSSxvQ0FBb0Msc0RBQUcsWUFBWSxVQUFVO0FBQzNHO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdExvYWRpbmdTY3JlZW4ubWpzPzZiNTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyBMb2FkaW5nU2NyZWVuIH0gZnJvbSBcIi4uLy4uL1RsZHJhd0VkaXRvci5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvckNvbXBvbmVudHMgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlRWRpdG9yQ29tcG9uZW50cy5tanNcIjtcbmNvbnN0IERlZmF1bHRMb2FkaW5nU2NyZWVuID0gKCkgPT4ge1xuICBjb25zdCB7IFNwaW5uZXIgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goTG9hZGluZ1NjcmVlbiwgeyBjaGlsZHJlbjogU3Bpbm5lciA/IC8qIEBfX1BVUkVfXyAqLyBqc3goU3Bpbm5lciwge30pIDogbnVsbCB9KTtcbn07XG5leHBvcnQge1xuICBEZWZhdWx0TG9hZGluZ1NjcmVlblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmF1bHRMb2FkaW5nU2NyZWVuLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultLoadingScreen.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultScribble.mjs":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultScribble.mjs ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultScribble: () => (/* binding */ DefaultScribble)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var _utils_getSvgPathFromPoints_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/getSvgPathFromPoints.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getSvgPathFromPoints.mjs\");\n\n\n\nfunction DefaultScribble({ scribble, zoom, color, opacity, className }) {\n  if (!scribble.points.length)\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: className ? classnames__WEBPACK_IMPORTED_MODULE_1__(\"tl-overlays__item\", className) : className, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"path\",\n    {\n      className: \"tl-scribble\",\n      d: (0,_utils_getSvgPathFromPoints_mjs__WEBPACK_IMPORTED_MODULE_2__.getSvgPathFromPoints)(scribble.points, false),\n      stroke: color ?? `var(--color-${scribble.color})`,\n      fill: \"none\",\n      strokeWidth: 8 / zoom,\n      opacity: opacity ?? scribble.opacity\n    }\n  ) });\n}\n\n//# sourceMappingURL=DefaultScribble.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTY3JpYmJsZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3QztBQUNKO0FBQ3dDO0FBQzVFLDJCQUEyQiwyQ0FBMkM7QUFDdEU7QUFDQTtBQUNBLHlCQUF5QixzREFBRyxVQUFVLHVCQUF1Qix1Q0FBVSx3RUFBd0Usc0RBQUc7QUFDbEo7QUFDQTtBQUNBO0FBQ0EsU0FBUyxxRkFBb0I7QUFDN0Isc0NBQXNDLGVBQWU7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2NyaWJibGUubWpzPzJkZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xuaW1wb3J0IHsgZ2V0U3ZnUGF0aEZyb21Qb2ludHMgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZ2V0U3ZnUGF0aEZyb21Qb2ludHMubWpzXCI7XG5mdW5jdGlvbiBEZWZhdWx0U2NyaWJibGUoeyBzY3JpYmJsZSwgem9vbSwgY29sb3IsIG9wYWNpdHksIGNsYXNzTmFtZSB9KSB7XG4gIGlmICghc2NyaWJibGUucG9pbnRzLmxlbmd0aClcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJzdmdcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZSA/IGNsYXNzTmFtZXMoXCJ0bC1vdmVybGF5c19faXRlbVwiLCBjbGFzc05hbWUpIDogY2xhc3NOYW1lLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChcbiAgICBcInBhdGhcIixcbiAgICB7XG4gICAgICBjbGFzc05hbWU6IFwidGwtc2NyaWJibGVcIixcbiAgICAgIGQ6IGdldFN2Z1BhdGhGcm9tUG9pbnRzKHNjcmliYmxlLnBvaW50cywgZmFsc2UpLFxuICAgICAgc3Ryb2tlOiBjb2xvciA/PyBgdmFyKC0tY29sb3ItJHtzY3JpYmJsZS5jb2xvcn0pYCxcbiAgICAgIGZpbGw6IFwibm9uZVwiLFxuICAgICAgc3Ryb2tlV2lkdGg6IDggLyB6b29tLFxuICAgICAgb3BhY2l0eTogb3BhY2l0eSA/PyBzY3JpYmJsZS5vcGFjaXR5XG4gICAgfVxuICApIH0pO1xufVxuZXhwb3J0IHtcbiAgRGVmYXVsdFNjcmliYmxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdFNjcmliYmxlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultScribble.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionBackground.mjs":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionBackground.mjs ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultSelectionBackground: () => (/* binding */ DefaultSelectionBackground)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks/useTransform.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\n\n\nfunction DefaultSelectionBackground({ bounds, rotation }) {\n  const rDiv = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  (0,_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_2__.useTransform)(rDiv, bounds.x, bounds.y, 1, rotation);\n  react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect(() => {\n    const div = rDiv.current;\n    if (!div)\n      return;\n    div.style.width = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.toDomPrecision)(Math.max(1, bounds.width)) + \"px\";\n    div.style.height = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.toDomPrecision)(Math.max(1, bounds.height)) + \"px\";\n  }, [bounds.width, bounds.height]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { ref: rDiv, className: \"tl-selection__bg\", draggable: false });\n}\n\n//# sourceMappingURL=DefaultSelectionBackground.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTZWxlY3Rpb25CYWNrZ3JvdW5kLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3QztBQUNUO0FBQzZCO0FBQ0E7QUFDNUQsc0NBQXNDLGtCQUFrQjtBQUN4RCxlQUFlLHlDQUFZO0FBQzNCLEVBQUUscUVBQVk7QUFDZCxFQUFFLGtEQUFxQjtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IscUVBQWM7QUFDcEMsdUJBQXVCLHFFQUFjO0FBQ3JDLEdBQUc7QUFDSCx5QkFBeUIsc0RBQUcsVUFBVSw0REFBNEQ7QUFDbEc7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U2VsZWN0aW9uQmFja2dyb3VuZC5tanM/NDNlNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlVHJhbnNmb3JtIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZVRyYW5zZm9ybS5tanNcIjtcbmltcG9ydCB7IHRvRG9tUHJlY2lzaW9uIH0gZnJvbSBcIi4uLy4uL3ByaW1pdGl2ZXMvdXRpbHMubWpzXCI7XG5mdW5jdGlvbiBEZWZhdWx0U2VsZWN0aW9uQmFja2dyb3VuZCh7IGJvdW5kcywgcm90YXRpb24gfSkge1xuICBjb25zdCByRGl2ID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICB1c2VUcmFuc2Zvcm0ockRpdiwgYm91bmRzLngsIGJvdW5kcy55LCAxLCByb3RhdGlvbik7XG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZGl2ID0gckRpdi5jdXJyZW50O1xuICAgIGlmICghZGl2KVxuICAgICAgcmV0dXJuO1xuICAgIGRpdi5zdHlsZS53aWR0aCA9IHRvRG9tUHJlY2lzaW9uKE1hdGgubWF4KDEsIGJvdW5kcy53aWR0aCkpICsgXCJweFwiO1xuICAgIGRpdi5zdHlsZS5oZWlnaHQgPSB0b0RvbVByZWNpc2lvbihNYXRoLm1heCgxLCBib3VuZHMuaGVpZ2h0KSkgKyBcInB4XCI7XG4gIH0sIFtib3VuZHMud2lkdGgsIGJvdW5kcy5oZWlnaHRdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkaXZcIiwgeyByZWY6IHJEaXYsIGNsYXNzTmFtZTogXCJ0bC1zZWxlY3Rpb25fX2JnXCIsIGRyYWdnYWJsZTogZmFsc2UgfSk7XG59XG5leHBvcnQge1xuICBEZWZhdWx0U2VsZWN0aW9uQmFja2dyb3VuZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmF1bHRTZWxlY3Rpb25CYWNrZ3JvdW5kLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionBackground.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionForeground.mjs":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionForeground.mjs ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultSelectionForeground: () => (/* binding */ DefaultSelectionForeground)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../hooks/useTransform.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\n\n\n\n\n\nfunction DefaultSelectionForeground({ bounds, rotation }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const rSvg = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  const onlyShape = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"only selected shape\", () => editor.getOnlySelectedShape(), [editor]);\n  const expandOutlineBy = onlyShape ? editor.getShapeUtil(onlyShape).expandSelectionOutlinePx(onlyShape) : 0;\n  (0,_hooks_useTransform_mjs__WEBPACK_IMPORTED_MODULE_5__.useTransform)(rSvg, bounds?.x, bounds?.y, 1, rotation, {\n    x: -expandOutlineBy,\n    y: -expandOutlineBy\n  });\n  bounds = bounds.clone().expandBy(expandOutlineBy).zeroFix();\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    \"svg\",\n    {\n      ref: rSvg,\n      className: \"tl-overlays__item tl-selection__fg\",\n      \"data-testid\": \"selection-foreground\",\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n        \"rect\",\n        {\n          className: classnames__WEBPACK_IMPORTED_MODULE_2__(\"tl-selection__fg__outline\"),\n          width: (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.toDomPrecision)(bounds.width),\n          height: (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.toDomPrecision)(bounds.height)\n        }\n      )\n    }\n  );\n}\n\n//# sourceMappingURL=DefaultSelectionForeground.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTZWxlY3Rpb25Gb3JlZ3JvdW5kLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF3QztBQUNDO0FBQ0w7QUFDTDtBQUN1QjtBQUNNO0FBQ0E7QUFDNUQsc0NBQXNDLGtCQUFrQjtBQUN4RCxpQkFBaUIsK0RBQVM7QUFDMUIsZUFBZSw2Q0FBTTtBQUNyQixvQkFBb0IsdURBQVE7QUFDNUI7QUFDQSxFQUFFLHFFQUFZO0FBQ2Q7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHlCQUF5QixzREFBRztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHNEQUFHO0FBQ25DO0FBQ0E7QUFDQSxxQkFBcUIsdUNBQVU7QUFDL0IsaUJBQWlCLHFFQUFjO0FBQy9CLGtCQUFrQixxRUFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNlbGVjdGlvbkZvcmVncm91bmQubWpzP2QzMWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyB1c2VWYWx1ZSB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiO1xuaW1wb3J0IHsgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlRWRpdG9yLm1qc1wiO1xuaW1wb3J0IHsgdXNlVHJhbnNmb3JtIH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZVRyYW5zZm9ybS5tanNcIjtcbmltcG9ydCB7IHRvRG9tUHJlY2lzaW9uIH0gZnJvbSBcIi4uLy4uL3ByaW1pdGl2ZXMvdXRpbHMubWpzXCI7XG5mdW5jdGlvbiBEZWZhdWx0U2VsZWN0aW9uRm9yZWdyb3VuZCh7IGJvdW5kcywgcm90YXRpb24gfSkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgclN2ZyA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qgb25seVNoYXBlID0gdXNlVmFsdWUoXCJvbmx5IHNlbGVjdGVkIHNoYXBlXCIsICgpID0+IGVkaXRvci5nZXRPbmx5U2VsZWN0ZWRTaGFwZSgpLCBbZWRpdG9yXSk7XG4gIGNvbnN0IGV4cGFuZE91dGxpbmVCeSA9IG9ubHlTaGFwZSA/IGVkaXRvci5nZXRTaGFwZVV0aWwob25seVNoYXBlKS5leHBhbmRTZWxlY3Rpb25PdXRsaW5lUHgob25seVNoYXBlKSA6IDA7XG4gIHVzZVRyYW5zZm9ybShyU3ZnLCBib3VuZHM/LngsIGJvdW5kcz8ueSwgMSwgcm90YXRpb24sIHtcbiAgICB4OiAtZXhwYW5kT3V0bGluZUJ5LFxuICAgIHk6IC1leHBhbmRPdXRsaW5lQnlcbiAgfSk7XG4gIGJvdW5kcyA9IGJvdW5kcy5jbG9uZSgpLmV4cGFuZEJ5KGV4cGFuZE91dGxpbmVCeSkuemVyb0ZpeCgpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICBcInN2Z1wiLFxuICAgIHtcbiAgICAgIHJlZjogclN2ZyxcbiAgICAgIGNsYXNzTmFtZTogXCJ0bC1vdmVybGF5c19faXRlbSB0bC1zZWxlY3Rpb25fX2ZnXCIsXG4gICAgICBcImRhdGEtdGVzdGlkXCI6IFwic2VsZWN0aW9uLWZvcmVncm91bmRcIixcbiAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICBcInJlY3RcIixcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRsLXNlbGVjdGlvbl9fZmdfX291dGxpbmVcIiksXG4gICAgICAgICAgd2lkdGg6IHRvRG9tUHJlY2lzaW9uKGJvdW5kcy53aWR0aCksXG4gICAgICAgICAgaGVpZ2h0OiB0b0RvbVByZWNpc2lvbihib3VuZHMuaGVpZ2h0KVxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuICApO1xufVxuZXhwb3J0IHtcbiAgRGVmYXVsdFNlbGVjdGlvbkZvcmVncm91bmRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZhdWx0U2VsZWN0aW9uRm9yZWdyb3VuZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionForeground.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeErrorFallback.mjs":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeErrorFallback.mjs ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultShapeErrorFallback: () => (/* binding */ DefaultShapeErrorFallback)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\nconst DefaultShapeErrorFallback = () => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"tl-shape-error-boundary\" });\n};\n\n//# sourceMappingURL=DefaultShapeErrorFallback.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTaGFwZUVycm9yRmFsbGJhY2subWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdDO0FBQ3hDO0FBQ0EseUJBQXlCLHNEQUFHLFVBQVUsc0NBQXNDO0FBQzVFO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNoYXBlRXJyb3JGYWxsYmFjay5tanM/YjMzMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmNvbnN0IERlZmF1bHRTaGFwZUVycm9yRmFsbGJhY2sgPSAoKSA9PiB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRsLXNoYXBlLWVycm9yLWJvdW5kYXJ5XCIgfSk7XG59O1xuZXhwb3J0IHtcbiAgRGVmYXVsdFNoYXBlRXJyb3JGYWxsYmFja1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmF1bHRTaGFwZUVycm9yRmFsbGJhY2subWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeErrorFallback.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicator.mjs":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicator.mjs ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultShapeIndicator: () => (/* binding */ DefaultShapeIndicator)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../hooks/useEditorComponents.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\");\n/* harmony import */ var _ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ErrorBoundary.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/ErrorBoundary.mjs\");\n\n\n\n\n\n\n\nconst EvenInnererIndicator = ({ shape, util }) => {\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useStateTracking)(\n    \"Indicator: \" + shape.type,\n    () => (\n      // always fetch the latest shape from the store even if the props/meta have not changed, to avoid\n      // calling the render method with stale data.\n      (util.indicator(util.editor.store.unsafeGetWithoutCapture(shape.id)))\n    )\n  );\n};\nconst InnerIndicator = ({ editor, id }) => {\n  const shape = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"shape for indicator\", () => editor.store.get(id), [editor, id]);\n  const { ShapeIndicatorErrorFallback } = (0,_hooks_useEditorComponents_mjs__WEBPACK_IMPORTED_MODULE_5__.useEditorComponents)();\n  if (!shape || shape.isLocked)\n    return null;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    _ErrorBoundary_mjs__WEBPACK_IMPORTED_MODULE_6__.OptionalErrorBoundary,\n    {\n      fallback: ShapeIndicatorErrorFallback,\n      onError: (error) => editor.annotateError(error, { origin: \"react.shapeIndicator\", willCrashApp: false }),\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(EvenInnererIndicator, { shape, util: editor.getShapeUtil(shape) }, shape.id)\n    }\n  );\n};\nconst DefaultShapeIndicator = (0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(function DefaultShapeIndicator2({\n  shapeId,\n  className,\n  color,\n  hidden,\n  opacity\n}) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const rIndicator = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useQuickReactor)(\n    \"indicator transform\",\n    () => {\n      const elm = rIndicator.current;\n      if (!elm)\n        return;\n      const pageTransform = editor.getShapePageTransform(shapeId);\n      if (!pageTransform)\n        return;\n      elm.style.setProperty(\"transform\", pageTransform.toCssString());\n    },\n    [editor, shapeId]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(() => {\n    const elm = rIndicator.current;\n    if (!elm)\n      return;\n    elm.style.setProperty(\"display\", hidden ? \"none\" : \"block\");\n  }, [hidden]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { ref: rIndicator, className: classnames__WEBPACK_IMPORTED_MODULE_2__(\"tl-overlays__item\", className), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { className: \"tl-shape-indicator\", stroke: color ?? \"var(--color-selected)\", opacity, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InnerIndicator, { editor, id: shapeId }) }) });\n});\n\n//# sourceMappingURL=DefaultShapeIndicator.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTaGFwZUluZGljYXRvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBd0M7QUFDb0M7QUFDeEM7QUFDa0I7QUFDQTtBQUNvQjtBQUNiO0FBQzdELGdDQUFnQyxhQUFhO0FBQzdDLFNBQVMsK0RBQWdCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsWUFBWTtBQUN0QyxnQkFBZ0IsdURBQVE7QUFDeEIsVUFBVSw4QkFBOEIsRUFBRSxtRkFBbUI7QUFDN0Q7QUFDQTtBQUNBLHlCQUF5QixzREFBRztBQUM1QixJQUFJLHFFQUFxQjtBQUN6QjtBQUNBO0FBQ0Esd0RBQXdELHFEQUFxRDtBQUM3RyxnQ0FBZ0Msc0RBQUcseUJBQXlCLHlDQUF5QztBQUNyRztBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsMkNBQUk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxpQkFBaUIsK0RBQVM7QUFDMUIscUJBQXFCLDZDQUFNO0FBQzNCLEVBQUUsOERBQWU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFLHNEQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHlCQUF5QixzREFBRyxVQUFVLDRCQUE0Qix1Q0FBVSw0REFBNEQsc0RBQUcsUUFBUSw4R0FBOEcsc0RBQUcsbUJBQW1CLHFCQUFxQixHQUFHLEdBQUc7QUFDbFQsQ0FBQztBQUdDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTaGFwZUluZGljYXRvci5tanM/YmY3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZVF1aWNrUmVhY3RvciwgdXNlU3RhdGVUcmFja2luZywgdXNlVmFsdWUgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcbmltcG9ydCB7IG1lbW8sIHVzZUxheW91dEVmZmVjdCwgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlRWRpdG9yLm1qc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yQ29tcG9uZW50cyB9IGZyb20gXCIuLi8uLi9ob29rcy91c2VFZGl0b3JDb21wb25lbnRzLm1qc1wiO1xuaW1wb3J0IHsgT3B0aW9uYWxFcnJvckJvdW5kYXJ5IH0gZnJvbSBcIi4uL0Vycm9yQm91bmRhcnkubWpzXCI7XG5jb25zdCBFdmVuSW5uZXJlckluZGljYXRvciA9ICh7IHNoYXBlLCB1dGlsIH0pID0+IHtcbiAgcmV0dXJuIHVzZVN0YXRlVHJhY2tpbmcoXG4gICAgXCJJbmRpY2F0b3I6IFwiICsgc2hhcGUudHlwZSxcbiAgICAoKSA9PiAoXG4gICAgICAvLyBhbHdheXMgZmV0Y2ggdGhlIGxhdGVzdCBzaGFwZSBmcm9tIHRoZSBzdG9yZSBldmVuIGlmIHRoZSBwcm9wcy9tZXRhIGhhdmUgbm90IGNoYW5nZWQsIHRvIGF2b2lkXG4gICAgICAvLyBjYWxsaW5nIHRoZSByZW5kZXIgbWV0aG9kIHdpdGggc3RhbGUgZGF0YS5cbiAgICAgICh1dGlsLmluZGljYXRvcih1dGlsLmVkaXRvci5zdG9yZS51bnNhZmVHZXRXaXRob3V0Q2FwdHVyZShzaGFwZS5pZCkpKVxuICAgIClcbiAgKTtcbn07XG5jb25zdCBJbm5lckluZGljYXRvciA9ICh7IGVkaXRvciwgaWQgfSkgPT4ge1xuICBjb25zdCBzaGFwZSA9IHVzZVZhbHVlKFwic2hhcGUgZm9yIGluZGljYXRvclwiLCAoKSA9PiBlZGl0b3Iuc3RvcmUuZ2V0KGlkKSwgW2VkaXRvciwgaWRdKTtcbiAgY29uc3QgeyBTaGFwZUluZGljYXRvckVycm9yRmFsbGJhY2sgfSA9IHVzZUVkaXRvckNvbXBvbmVudHMoKTtcbiAgaWYgKCFzaGFwZSB8fCBzaGFwZS5pc0xvY2tlZClcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgT3B0aW9uYWxFcnJvckJvdW5kYXJ5LFxuICAgIHtcbiAgICAgIGZhbGxiYWNrOiBTaGFwZUluZGljYXRvckVycm9yRmFsbGJhY2ssXG4gICAgICBvbkVycm9yOiAoZXJyb3IpID0+IGVkaXRvci5hbm5vdGF0ZUVycm9yKGVycm9yLCB7IG9yaWdpbjogXCJyZWFjdC5zaGFwZUluZGljYXRvclwiLCB3aWxsQ3Jhc2hBcHA6IGZhbHNlIH0pLFxuICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goRXZlbklubmVyZXJJbmRpY2F0b3IsIHsgc2hhcGUsIHV0aWw6IGVkaXRvci5nZXRTaGFwZVV0aWwoc2hhcGUpIH0sIHNoYXBlLmlkKVxuICAgIH1cbiAgKTtcbn07XG5jb25zdCBEZWZhdWx0U2hhcGVJbmRpY2F0b3IgPSBtZW1vKGZ1bmN0aW9uIERlZmF1bHRTaGFwZUluZGljYXRvcjIoe1xuICBzaGFwZUlkLFxuICBjbGFzc05hbWUsXG4gIGNvbG9yLFxuICBoaWRkZW4sXG4gIG9wYWNpdHlcbn0pIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IHJJbmRpY2F0b3IgPSB1c2VSZWYobnVsbCk7XG4gIHVzZVF1aWNrUmVhY3RvcihcbiAgICBcImluZGljYXRvciB0cmFuc2Zvcm1cIixcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBlbG0gPSBySW5kaWNhdG9yLmN1cnJlbnQ7XG4gICAgICBpZiAoIWVsbSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY29uc3QgcGFnZVRyYW5zZm9ybSA9IGVkaXRvci5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGVJZCk7XG4gICAgICBpZiAoIXBhZ2VUcmFuc2Zvcm0pXG4gICAgICAgIHJldHVybjtcbiAgICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcInRyYW5zZm9ybVwiLCBwYWdlVHJhbnNmb3JtLnRvQ3NzU3RyaW5nKCkpO1xuICAgIH0sXG4gICAgW2VkaXRvciwgc2hhcGVJZF1cbiAgKTtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBlbG0gPSBySW5kaWNhdG9yLmN1cnJlbnQ7XG4gICAgaWYgKCFlbG0pXG4gICAgICByZXR1cm47XG4gICAgZWxtLnN0eWxlLnNldFByb3BlcnR5KFwiZGlzcGxheVwiLCBoaWRkZW4gPyBcIm5vbmVcIiA6IFwiYmxvY2tcIik7XG4gIH0sIFtoaWRkZW5dKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJzdmdcIiwgeyByZWY6IHJJbmRpY2F0b3IsIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcInRsLW92ZXJsYXlzX19pdGVtXCIsIGNsYXNzTmFtZSksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFwiZ1wiLCB7IGNsYXNzTmFtZTogXCJ0bC1zaGFwZS1pbmRpY2F0b3JcIiwgc3Ryb2tlOiBjb2xvciA/PyBcInZhcigtLWNvbG9yLXNlbGVjdGVkKVwiLCBvcGFjaXR5LCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChJbm5lckluZGljYXRvciwgeyBlZGl0b3IsIGlkOiBzaGFwZUlkIH0pIH0pIH0pO1xufSk7XG5leHBvcnQge1xuICBEZWZhdWx0U2hhcGVJbmRpY2F0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZhdWx0U2hhcGVJbmRpY2F0b3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicator.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicatorErrorFallback.mjs":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicatorErrorFallback.mjs ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultShapeIndicatorErrorFallback: () => (/* binding */ DefaultShapeIndicatorErrorFallback)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\nconst DefaultShapeIndicatorErrorFallback = () => {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { cx: 4, cy: 4, r: 8, strokeWidth: \"1\", stroke: \"red\" });\n};\n\n//# sourceMappingURL=DefaultShapeIndicatorErrorFallback.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTaGFwZUluZGljYXRvckVycm9yRmFsbGJhY2subWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdDO0FBQ3hDO0FBQ0EseUJBQXlCLHNEQUFHLGFBQWEscURBQXFEO0FBQzlGO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNoYXBlSW5kaWNhdG9yRXJyb3JGYWxsYmFjay5tanM/MTQ3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmNvbnN0IERlZmF1bHRTaGFwZUluZGljYXRvckVycm9yRmFsbGJhY2sgPSAoKSA9PiB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFwiY2lyY2xlXCIsIHsgY3g6IDQsIGN5OiA0LCByOiA4LCBzdHJva2VXaWR0aDogXCIxXCIsIHN0cm9rZTogXCJyZWRcIiB9KTtcbn07XG5leHBvcnQge1xuICBEZWZhdWx0U2hhcGVJbmRpY2F0b3JFcnJvckZhbGxiYWNrXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdFNoYXBlSW5kaWNhdG9yRXJyb3JGYWxsYmFjay5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicatorErrorFallback.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSnapIndictor.mjs":
/*!********************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSnapIndictor.mjs ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultSnapIndicator: () => (/* binding */ DefaultSnapIndicator)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ \"(ssr)/./node_modules/classnames/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\n\n\nfunction PointsSnapIndicator({ points, zoom }) {\n  const l = 2.5 / zoom;\n  const minX = points.reduce((acc, p) => Math.min(acc, p.x), Infinity);\n  const maxX = points.reduce((acc, p) => Math.max(acc, p.x), -Infinity);\n  const minY = points.reduce((acc, p) => Math.min(acc, p.y), Infinity);\n  const maxY = points.reduce((acc, p) => Math.max(acc, p.y), -Infinity);\n  const useNWtoSEdireciton = points.some((p) => p.x === minX && p.y === minY);\n  let firstX, firstY, secondX, secondY;\n  if (useNWtoSEdireciton) {\n    firstX = minX;\n    firstY = minY;\n    secondX = maxX;\n    secondY = maxY;\n  } else {\n    firstX = minX;\n    firstY = maxY;\n    secondX = maxX;\n    secondY = minY;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { className: \"tl-snap-indicator\", stroke: \"lime\", children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"line\", { x1: firstX, y1: firstY, x2: secondX, y2: secondY }),\n    points.map((p, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { transform: `translate(${p.x},${p.y})`, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"path\",\n      {\n        className: \"tl-snap-point\",\n        d: `M ${-l},${-l} L ${l},${l} M ${-l},${l} L ${l},${-l}`\n      }\n    ) }, i))\n  ] });\n}\nfunction GapsSnapIndicator({ gaps, direction, zoom }) {\n  const l = 3.5 / zoom;\n  let edgeIntersection = [-Infinity, Infinity];\n  let nextEdgeIntersection = null;\n  const horizontal = direction === \"horizontal\";\n  for (const gap of gaps) {\n    nextEdgeIntersection = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.rangeIntersection)(\n      edgeIntersection[0],\n      edgeIntersection[1],\n      horizontal ? gap.startEdge[0].y : gap.startEdge[0].x,\n      horizontal ? gap.startEdge[1].y : gap.startEdge[1].x\n    );\n    if (nextEdgeIntersection) {\n      edgeIntersection = nextEdgeIntersection;\n    } else {\n      continue;\n    }\n    nextEdgeIntersection = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.rangeIntersection)(\n      edgeIntersection[0],\n      edgeIntersection[1],\n      horizontal ? gap.endEdge[0].y : gap.endEdge[0].x,\n      horizontal ? gap.endEdge[1].y : gap.endEdge[1].x\n    );\n    if (nextEdgeIntersection) {\n      edgeIntersection = nextEdgeIntersection;\n    } else {\n      continue;\n    }\n  }\n  if (edgeIntersection === null) {\n    return null;\n  }\n  const midPoint = (edgeIntersection[0] + edgeIntersection[1]) / 2;\n  return (\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { className: \"tl-snap-indicator\", stroke: \"cyan\", children: gaps.map(({ startEdge, endEdge }, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: horizontal ? (\n      // horizontal gap\n      /* @__PURE__ */ ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"line\",\n          {\n            x1: startEdge[0].x,\n            y1: midPoint - 2 * l,\n            x2: startEdge[1].x,\n            y2: midPoint + 2 * l\n          }\n        ),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"line\",\n          {\n            x1: endEdge[0].x,\n            y1: midPoint - 2 * l,\n            x2: endEdge[1].x,\n            y2: midPoint + 2 * l\n          }\n        ),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"line\", { x1: startEdge[0].x, y1: midPoint, x2: endEdge[0].x, y2: midPoint }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"line\",\n          {\n            x1: (startEdge[0].x + endEdge[0].x) / 2,\n            y1: midPoint - l,\n            x2: (startEdge[0].x + endEdge[0].x) / 2,\n            y2: midPoint + l\n          }\n        )\n      ] }))\n    ) : (\n      // vertical gap\n      /* @__PURE__ */ ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"line\",\n          {\n            x1: midPoint - 2 * l,\n            y1: startEdge[0].y,\n            x2: midPoint + 2 * l,\n            y2: startEdge[1].y\n          }\n        ),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"line\",\n          {\n            x1: midPoint - 2 * l,\n            y1: endEdge[0].y,\n            x2: midPoint + 2 * l,\n            y2: endEdge[1].y\n          }\n        ),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"line\", { x1: midPoint, y1: startEdge[0].y, x2: midPoint, y2: endEdge[0].y }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"line\",\n          {\n            x1: midPoint - l,\n            y1: (startEdge[0].y + endEdge[0].y) / 2,\n            x2: midPoint + l,\n            y2: (startEdge[0].y + endEdge[0].y) / 2\n          }\n        )\n      ] }))\n    ) }, i)) })\n  );\n}\nfunction DefaultSnapIndicator({ className, line, zoom }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: classnames__WEBPACK_IMPORTED_MODULE_1__(\"tl-overlays__item\", className), children: line.type === \"points\" ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PointsSnapIndicator, { ...line, zoom }) : line.type === \"gaps\" ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(GapsSnapIndicator, { ...line, zoom }) : null });\n}\n\n//# sourceMappingURL=DefaultSnapIndictor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTbmFwSW5kaWN0b3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdEO0FBQ3BCO0FBQ0w7QUFDZ0M7QUFDL0QsK0JBQStCLGNBQWM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdURBQUksUUFBUTtBQUNyQyxvQkFBb0Isc0RBQUcsV0FBVyxrREFBa0Q7QUFDcEYseUNBQXlDLHNEQUFHLFFBQVEsd0JBQXdCLElBQUksR0FBRyxJQUFJLDhCQUE4QixzREFBRztBQUN4SDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsR0FBRyxHQUFHLElBQUksSUFBSSxFQUFFLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksRUFBRSxHQUFHLEdBQUc7QUFDL0Q7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHdFQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsMkJBQTJCLHdFQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNEQUFHLFFBQVEsc0VBQXNFLG9CQUFvQix3QkFBd0Isc0RBQUcsQ0FBQywyQ0FBYyxJQUFJO0FBQ3ZLO0FBQ0EsdUJBQXVCLHVEQUFJLENBQUMsdURBQVEsSUFBSTtBQUN4Qyx3QkFBd0Isc0RBQUc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzREFBRztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFHLFdBQVcsa0VBQWtFO0FBQ3hHLHdCQUF3QixzREFBRztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx1QkFBdUIsdURBQUksQ0FBQyx1REFBUSxJQUFJO0FBQ3hDLHdCQUF3QixzREFBRztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFHO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQUcsV0FBVyxrRUFBa0U7QUFDeEcsd0JBQXdCLHNEQUFHO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTyxPQUFPO0FBQ2Q7QUFDQTtBQUNBLGdDQUFnQyx1QkFBdUI7QUFDdkQseUJBQXlCLHNEQUFHLFVBQVUsV0FBVyx1Q0FBVSxxRkFBcUYsc0RBQUcsd0JBQXdCLGVBQWUsMkNBQTJDLHNEQUFHLHNCQUFzQixlQUFlLFVBQVU7QUFDdlI7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U25hcEluZGljdG9yLm1qcz84MjEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZyYWdtZW50LCBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHJhbmdlSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4uLy4uL3ByaW1pdGl2ZXMvdXRpbHMubWpzXCI7XG5mdW5jdGlvbiBQb2ludHNTbmFwSW5kaWNhdG9yKHsgcG9pbnRzLCB6b29tIH0pIHtcbiAgY29uc3QgbCA9IDIuNSAvIHpvb207XG4gIGNvbnN0IG1pblggPSBwb2ludHMucmVkdWNlKChhY2MsIHApID0+IE1hdGgubWluKGFjYywgcC54KSwgSW5maW5pdHkpO1xuICBjb25zdCBtYXhYID0gcG9pbnRzLnJlZHVjZSgoYWNjLCBwKSA9PiBNYXRoLm1heChhY2MsIHAueCksIC1JbmZpbml0eSk7XG4gIGNvbnN0IG1pblkgPSBwb2ludHMucmVkdWNlKChhY2MsIHApID0+IE1hdGgubWluKGFjYywgcC55KSwgSW5maW5pdHkpO1xuICBjb25zdCBtYXhZID0gcG9pbnRzLnJlZHVjZSgoYWNjLCBwKSA9PiBNYXRoLm1heChhY2MsIHAueSksIC1JbmZpbml0eSk7XG4gIGNvbnN0IHVzZU5XdG9TRWRpcmVjaXRvbiA9IHBvaW50cy5zb21lKChwKSA9PiBwLnggPT09IG1pblggJiYgcC55ID09PSBtaW5ZKTtcbiAgbGV0IGZpcnN0WCwgZmlyc3RZLCBzZWNvbmRYLCBzZWNvbmRZO1xuICBpZiAodXNlTld0b1NFZGlyZWNpdG9uKSB7XG4gICAgZmlyc3RYID0gbWluWDtcbiAgICBmaXJzdFkgPSBtaW5ZO1xuICAgIHNlY29uZFggPSBtYXhYO1xuICAgIHNlY29uZFkgPSBtYXhZO1xuICB9IGVsc2Uge1xuICAgIGZpcnN0WCA9IG1pblg7XG4gICAgZmlyc3RZID0gbWF4WTtcbiAgICBzZWNvbmRYID0gbWF4WDtcbiAgICBzZWNvbmRZID0gbWluWTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMoXCJnXCIsIHsgY2xhc3NOYW1lOiBcInRsLXNuYXAtaW5kaWNhdG9yXCIsIHN0cm9rZTogXCJsaW1lXCIsIGNoaWxkcmVuOiBbXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChcImxpbmVcIiwgeyB4MTogZmlyc3RYLCB5MTogZmlyc3RZLCB4Mjogc2Vjb25kWCwgeTI6IHNlY29uZFkgfSksXG4gICAgcG9pbnRzLm1hcCgocCwgaSkgPT4gLyogQF9fUFVSRV9fICovIGpzeChcImdcIiwgeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtwLnh9LCR7cC55fSlgLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIFwicGF0aFwiLFxuICAgICAge1xuICAgICAgICBjbGFzc05hbWU6IFwidGwtc25hcC1wb2ludFwiLFxuICAgICAgICBkOiBgTSAkey1sfSwkey1sfSBMICR7bH0sJHtsfSBNICR7LWx9LCR7bH0gTCAke2x9LCR7LWx9YFxuICAgICAgfVxuICAgICkgfSwgaSkpXG4gIF0gfSk7XG59XG5mdW5jdGlvbiBHYXBzU25hcEluZGljYXRvcih7IGdhcHMsIGRpcmVjdGlvbiwgem9vbSB9KSB7XG4gIGNvbnN0IGwgPSAzLjUgLyB6b29tO1xuICBsZXQgZWRnZUludGVyc2VjdGlvbiA9IFstSW5maW5pdHksIEluZmluaXR5XTtcbiAgbGV0IG5leHRFZGdlSW50ZXJzZWN0aW9uID0gbnVsbDtcbiAgY29uc3QgaG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gXCJob3Jpem9udGFsXCI7XG4gIGZvciAoY29uc3QgZ2FwIG9mIGdhcHMpIHtcbiAgICBuZXh0RWRnZUludGVyc2VjdGlvbiA9IHJhbmdlSW50ZXJzZWN0aW9uKFxuICAgICAgZWRnZUludGVyc2VjdGlvblswXSxcbiAgICAgIGVkZ2VJbnRlcnNlY3Rpb25bMV0sXG4gICAgICBob3Jpem9udGFsID8gZ2FwLnN0YXJ0RWRnZVswXS55IDogZ2FwLnN0YXJ0RWRnZVswXS54LFxuICAgICAgaG9yaXpvbnRhbCA/IGdhcC5zdGFydEVkZ2VbMV0ueSA6IGdhcC5zdGFydEVkZ2VbMV0ueFxuICAgICk7XG4gICAgaWYgKG5leHRFZGdlSW50ZXJzZWN0aW9uKSB7XG4gICAgICBlZGdlSW50ZXJzZWN0aW9uID0gbmV4dEVkZ2VJbnRlcnNlY3Rpb247XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBuZXh0RWRnZUludGVyc2VjdGlvbiA9IHJhbmdlSW50ZXJzZWN0aW9uKFxuICAgICAgZWRnZUludGVyc2VjdGlvblswXSxcbiAgICAgIGVkZ2VJbnRlcnNlY3Rpb25bMV0sXG4gICAgICBob3Jpem9udGFsID8gZ2FwLmVuZEVkZ2VbMF0ueSA6IGdhcC5lbmRFZGdlWzBdLngsXG4gICAgICBob3Jpem9udGFsID8gZ2FwLmVuZEVkZ2VbMV0ueSA6IGdhcC5lbmRFZGdlWzFdLnhcbiAgICApO1xuICAgIGlmIChuZXh0RWRnZUludGVyc2VjdGlvbikge1xuICAgICAgZWRnZUludGVyc2VjdGlvbiA9IG5leHRFZGdlSW50ZXJzZWN0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gIH1cbiAgaWYgKGVkZ2VJbnRlcnNlY3Rpb24gPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBtaWRQb2ludCA9IChlZGdlSW50ZXJzZWN0aW9uWzBdICsgZWRnZUludGVyc2VjdGlvblsxXSkgLyAyO1xuICByZXR1cm4gKFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJnXCIsIHsgY2xhc3NOYW1lOiBcInRsLXNuYXAtaW5kaWNhdG9yXCIsIHN0cm9rZTogXCJjeWFuXCIsIGNoaWxkcmVuOiBnYXBzLm1hcCgoeyBzdGFydEVkZ2UsIGVuZEVkZ2UgfSwgaSkgPT4gLyogQF9fUFVSRV9fICovIGpzeChSZWFjdC5GcmFnbWVudCwgeyBjaGlsZHJlbjogaG9yaXpvbnRhbCA/IChcbiAgICAgIC8vIGhvcml6b250YWwgZ2FwXG4gICAgICAvKiBAX19QVVJFX18gKi8gKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgICBcImxpbmVcIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICB4MTogc3RhcnRFZGdlWzBdLngsXG4gICAgICAgICAgICB5MTogbWlkUG9pbnQgLSAyICogbCxcbiAgICAgICAgICAgIHgyOiBzdGFydEVkZ2VbMV0ueCxcbiAgICAgICAgICAgIHkyOiBtaWRQb2ludCArIDIgKiBsXG4gICAgICAgICAgfVxuICAgICAgICApLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgIFwibGluZVwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHgxOiBlbmRFZGdlWzBdLngsXG4gICAgICAgICAgICB5MTogbWlkUG9pbnQgLSAyICogbCxcbiAgICAgICAgICAgIHgyOiBlbmRFZGdlWzFdLngsXG4gICAgICAgICAgICB5MjogbWlkUG9pbnQgKyAyICogbFxuICAgICAgICAgIH1cbiAgICAgICAgKSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImxpbmVcIiwgeyB4MTogc3RhcnRFZGdlWzBdLngsIHkxOiBtaWRQb2ludCwgeDI6IGVuZEVkZ2VbMF0ueCwgeTI6IG1pZFBvaW50IH0pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgIFwibGluZVwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHgxOiAoc3RhcnRFZGdlWzBdLnggKyBlbmRFZGdlWzBdLngpIC8gMixcbiAgICAgICAgICAgIHkxOiBtaWRQb2ludCAtIGwsXG4gICAgICAgICAgICB4MjogKHN0YXJ0RWRnZVswXS54ICsgZW5kRWRnZVswXS54KSAvIDIsXG4gICAgICAgICAgICB5MjogbWlkUG9pbnQgKyBsXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICBdIH0pKVxuICAgICkgOiAoXG4gICAgICAvLyB2ZXJ0aWNhbCBnYXBcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW1xuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgIFwibGluZVwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHgxOiBtaWRQb2ludCAtIDIgKiBsLFxuICAgICAgICAgICAgeTE6IHN0YXJ0RWRnZVswXS55LFxuICAgICAgICAgICAgeDI6IG1pZFBvaW50ICsgMiAqIGwsXG4gICAgICAgICAgICB5Mjogc3RhcnRFZGdlWzFdLnlcbiAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgICAgXCJsaW5lXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDE6IG1pZFBvaW50IC0gMiAqIGwsXG4gICAgICAgICAgICB5MTogZW5kRWRnZVswXS55LFxuICAgICAgICAgICAgeDI6IG1pZFBvaW50ICsgMiAqIGwsXG4gICAgICAgICAgICB5MjogZW5kRWRnZVsxXS55XG4gICAgICAgICAgfVxuICAgICAgICApLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwibGluZVwiLCB7IHgxOiBtaWRQb2ludCwgeTE6IHN0YXJ0RWRnZVswXS55LCB4MjogbWlkUG9pbnQsIHkyOiBlbmRFZGdlWzBdLnkgfSksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgICAgXCJsaW5lXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDE6IG1pZFBvaW50IC0gbCxcbiAgICAgICAgICAgIHkxOiAoc3RhcnRFZGdlWzBdLnkgKyBlbmRFZGdlWzBdLnkpIC8gMixcbiAgICAgICAgICAgIHgyOiBtaWRQb2ludCArIGwsXG4gICAgICAgICAgICB5MjogKHN0YXJ0RWRnZVswXS55ICsgZW5kRWRnZVswXS55KSAvIDJcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIF0gfSkpXG4gICAgKSB9LCBpKSkgfSlcbiAgKTtcbn1cbmZ1bmN0aW9uIERlZmF1bHRTbmFwSW5kaWNhdG9yKHsgY2xhc3NOYW1lLCBsaW5lLCB6b29tIH0pIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJzdmdcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJ0bC1vdmVybGF5c19faXRlbVwiLCBjbGFzc05hbWUpLCBjaGlsZHJlbjogbGluZS50eXBlID09PSBcInBvaW50c1wiID8gLyogQF9fUFVSRV9fICovIGpzeChQb2ludHNTbmFwSW5kaWNhdG9yLCB7IC4uLmxpbmUsIHpvb20gfSkgOiBsaW5lLnR5cGUgPT09IFwiZ2Fwc1wiID8gLyogQF9fUFVSRV9fICovIGpzeChHYXBzU25hcEluZGljYXRvciwgeyAuLi5saW5lLCB6b29tIH0pIDogbnVsbCB9KTtcbn1cbmV4cG9ydCB7XG4gIERlZmF1bHRTbmFwSW5kaWNhdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdFNuYXBJbmRpY3Rvci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSnapIndictor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSpinner.mjs":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSpinner.mjs ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultSpinner: () => (/* binding */ DefaultSpinner)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\nfunction DefaultSpinner() {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { width: 16, height: 16, viewBox: \"0 0 16 16\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"g\", { strokeWidth: 2, fill: \"none\", fillRule: \"evenodd\", children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"circle\", { strokeOpacity: 0.25, cx: 8, cy: 8, r: 7, stroke: \"var(--color-text-1)\" }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { strokeLinecap: \"round\", d: \"M15 8c0-4.5-4.5-7-7-7\", stroke: \"var(--color-text-1)\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"animateTransform\",\n      {\n        attributeName: \"transform\",\n        type: \"rotate\",\n        from: \"0 8 8\",\n        to: \"360 8 8\",\n        dur: \"1s\",\n        repeatCount: \"indefinite\"\n      }\n    ) })\n  ] }) });\n}\n\n//# sourceMappingURL=DefaultSpinner.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTcGlubmVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE4QztBQUM5QztBQUNBLHlCQUF5QixzREFBRyxVQUFVLHVFQUF1RSx1REFBSSxRQUFRO0FBQ3pILG9CQUFvQixzREFBRyxhQUFhLHdFQUF3RTtBQUM1RyxvQkFBb0Isc0RBQUcsV0FBVyw2R0FBNkcsc0RBQUc7QUFDbEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUssR0FBRztBQUNSO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNwaW5uZXIubWpzPzg0ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4LCBqc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5mdW5jdGlvbiBEZWZhdWx0U3Bpbm5lcigpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJzdmdcIiwgeyB3aWR0aDogMTYsIGhlaWdodDogMTYsIHZpZXdCb3g6IFwiMCAwIDE2IDE2XCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4cyhcImdcIiwgeyBzdHJva2VXaWR0aDogMiwgZmlsbDogXCJub25lXCIsIGZpbGxSdWxlOiBcImV2ZW5vZGRcIiwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFwiY2lyY2xlXCIsIHsgc3Ryb2tlT3BhY2l0eTogMC4yNSwgY3g6IDgsIGN5OiA4LCByOiA3LCBzdHJva2U6IFwidmFyKC0tY29sb3ItdGV4dC0xKVwiIH0pLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwYXRoXCIsIHsgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLCBkOiBcIk0xNSA4YzAtNC41LTQuNS03LTctN1wiLCBzdHJva2U6IFwidmFyKC0tY29sb3ItdGV4dC0xKVwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIFwiYW5pbWF0ZVRyYW5zZm9ybVwiLFxuICAgICAge1xuICAgICAgICBhdHRyaWJ1dGVOYW1lOiBcInRyYW5zZm9ybVwiLFxuICAgICAgICB0eXBlOiBcInJvdGF0ZVwiLFxuICAgICAgICBmcm9tOiBcIjAgOCA4XCIsXG4gICAgICAgIHRvOiBcIjM2MCA4IDhcIixcbiAgICAgICAgZHVyOiBcIjFzXCIsXG4gICAgICAgIHJlcGVhdENvdW50OiBcImluZGVmaW5pdGVcIlxuICAgICAgfVxuICAgICkgfSlcbiAgXSB9KSB9KTtcbn1cbmV4cG9ydCB7XG4gIERlZmF1bHRTcGlubmVyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdFNwaW5uZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSpinner.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSvgDefs.mjs":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSvgDefs.mjs ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultSvgDefs: () => (/* binding */ DefaultSvgDefs)\n/* harmony export */ });\nconst DefaultSvgDefs = () => {\n  return null;\n};\n\n//# sourceMappingURL=DefaultSvgDefs.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTdmdEZWZzLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFN2Z0RlZnMubWpzPzk5ZGEiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRGVmYXVsdFN2Z0RlZnMgPSAoKSA9PiB7XG4gIHJldHVybiBudWxsO1xufTtcbmV4cG9ydCB7XG4gIERlZmF1bHRTdmdEZWZzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmYXVsdFN2Z0RlZnMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSvgDefs.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLEditorSnapshot.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/TLEditorSnapshot.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSnapshot: () => (/* binding */ getSnapshot),\n/* harmony export */   loadSnapshot: () => (/* binding */ loadSnapshot)\n/* harmony export */ });\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TLSessionStateSnapshot.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLSessionStateSnapshot.mjs\");\n\n\n\nfunction loadSnapshot(store, _snapshot) {\n  let snapshot = {};\n  if (\"store\" in _snapshot) {\n    const migrationResult = store.schema.migrateStoreSnapshot(_snapshot);\n    if (migrationResult.type !== \"success\") {\n      throw new Error(\"Failed to migrate store snapshot: \" + migrationResult.reason);\n    }\n    snapshot.document = {\n      schema: store.schema.serialize(),\n      store: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.filterEntries)(\n        migrationResult.value,\n        (_, { typeName }) => store.scopedTypes.document.has(typeName)\n      )\n    };\n  } else {\n    snapshot = _snapshot;\n  }\n  const preservingInstanceState = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.pluckPreservingValues)(store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.TLINSTANCE_ID));\n  store.atomic(() => {\n    if (snapshot.document) {\n      store.loadStoreSnapshot(snapshot.document);\n    }\n    if (preservingInstanceState) {\n      store.update(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.TLINSTANCE_ID, (r) => ({ ...r, ...preservingInstanceState }));\n    }\n    if (snapshot.session) {\n      (0,_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_2__.loadSessionStateSnapshotIntoStore)(store, snapshot.session);\n    }\n  });\n}\nconst sessionStateCache = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.WeakCache();\nfunction getSnapshot(store) {\n  const sessionState$ = sessionStateCache.get(store, _TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_2__.createSessionStateSnapshotSignal);\n  const session = sessionState$.get();\n  if (!session) {\n    throw new Error(\"Session state is not ready yet\");\n  }\n  return {\n    document: store.getStoreSnapshot(),\n    session\n  };\n}\n\n//# sourceMappingURL=TLEditorSnapshot.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9UTEVkaXRvclNuYXBzaG90Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3RTtBQUNmO0FBSW5CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNERBQWE7QUFDMUI7QUFDQSxjQUFjLFVBQVU7QUFDeEI7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0Esa0NBQWtDLHVFQUFxQixXQUFXLDJEQUFhO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsMkRBQWEsWUFBWSxrQ0FBa0M7QUFDOUU7QUFDQTtBQUNBLE1BQU0sOEZBQWlDO0FBQ3ZDO0FBQ0EsR0FBRztBQUNIO0FBQ0EsOEJBQThCLG9EQUFTO0FBQ3ZDO0FBQ0EscURBQXFELHlGQUFnQztBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb25maWcvVExFZGl0b3JTbmFwc2hvdC5tanM/ZTRlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUTElOU1RBTkNFX0lELCBwbHVja1ByZXNlcnZpbmdWYWx1ZXMgfSBmcm9tIFwiQHRsZHJhdy90bHNjaGVtYVwiO1xuaW1wb3J0IHsgV2Vha0NhY2hlLCBmaWx0ZXJFbnRyaWVzIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVNlc3Npb25TdGF0ZVNuYXBzaG90U2lnbmFsLFxuICBsb2FkU2Vzc2lvblN0YXRlU25hcHNob3RJbnRvU3RvcmVcbn0gZnJvbSBcIi4vVExTZXNzaW9uU3RhdGVTbmFwc2hvdC5tanNcIjtcbmZ1bmN0aW9uIGxvYWRTbmFwc2hvdChzdG9yZSwgX3NuYXBzaG90KSB7XG4gIGxldCBzbmFwc2hvdCA9IHt9O1xuICBpZiAoXCJzdG9yZVwiIGluIF9zbmFwc2hvdCkge1xuICAgIGNvbnN0IG1pZ3JhdGlvblJlc3VsdCA9IHN0b3JlLnNjaGVtYS5taWdyYXRlU3RvcmVTbmFwc2hvdChfc25hcHNob3QpO1xuICAgIGlmIChtaWdyYXRpb25SZXN1bHQudHlwZSAhPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBtaWdyYXRlIHN0b3JlIHNuYXBzaG90OiBcIiArIG1pZ3JhdGlvblJlc3VsdC5yZWFzb24pO1xuICAgIH1cbiAgICBzbmFwc2hvdC5kb2N1bWVudCA9IHtcbiAgICAgIHNjaGVtYTogc3RvcmUuc2NoZW1hLnNlcmlhbGl6ZSgpLFxuICAgICAgc3RvcmU6IGZpbHRlckVudHJpZXMoXG4gICAgICAgIG1pZ3JhdGlvblJlc3VsdC52YWx1ZSxcbiAgICAgICAgKF8sIHsgdHlwZU5hbWUgfSkgPT4gc3RvcmUuc2NvcGVkVHlwZXMuZG9jdW1lbnQuaGFzKHR5cGVOYW1lKVxuICAgICAgKVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgc25hcHNob3QgPSBfc25hcHNob3Q7XG4gIH1cbiAgY29uc3QgcHJlc2VydmluZ0luc3RhbmNlU3RhdGUgPSBwbHVja1ByZXNlcnZpbmdWYWx1ZXMoc3RvcmUuZ2V0KFRMSU5TVEFOQ0VfSUQpKTtcbiAgc3RvcmUuYXRvbWljKCgpID0+IHtcbiAgICBpZiAoc25hcHNob3QuZG9jdW1lbnQpIHtcbiAgICAgIHN0b3JlLmxvYWRTdG9yZVNuYXBzaG90KHNuYXBzaG90LmRvY3VtZW50KTtcbiAgICB9XG4gICAgaWYgKHByZXNlcnZpbmdJbnN0YW5jZVN0YXRlKSB7XG4gICAgICBzdG9yZS51cGRhdGUoVExJTlNUQU5DRV9JRCwgKHIpID0+ICh7IC4uLnIsIC4uLnByZXNlcnZpbmdJbnN0YW5jZVN0YXRlIH0pKTtcbiAgICB9XG4gICAgaWYgKHNuYXBzaG90LnNlc3Npb24pIHtcbiAgICAgIGxvYWRTZXNzaW9uU3RhdGVTbmFwc2hvdEludG9TdG9yZShzdG9yZSwgc25hcHNob3Quc2Vzc2lvbik7XG4gICAgfVxuICB9KTtcbn1cbmNvbnN0IHNlc3Npb25TdGF0ZUNhY2hlID0gbmV3IFdlYWtDYWNoZSgpO1xuZnVuY3Rpb24gZ2V0U25hcHNob3Qoc3RvcmUpIHtcbiAgY29uc3Qgc2Vzc2lvblN0YXRlJCA9IHNlc3Npb25TdGF0ZUNhY2hlLmdldChzdG9yZSwgY3JlYXRlU2Vzc2lvblN0YXRlU25hcHNob3RTaWduYWwpO1xuICBjb25zdCBzZXNzaW9uID0gc2Vzc2lvblN0YXRlJC5nZXQoKTtcbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vzc2lvbiBzdGF0ZSBpcyBub3QgcmVhZHkgeWV0XCIpO1xuICB9XG4gIHJldHVybiB7XG4gICAgZG9jdW1lbnQ6IHN0b3JlLmdldFN0b3JlU25hcHNob3QoKSxcbiAgICBzZXNzaW9uXG4gIH07XG59XG5leHBvcnQge1xuICBnZXRTbmFwc2hvdCxcbiAgbG9hZFNuYXBzaG90XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExFZGl0b3JTbmFwc2hvdC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLEditorSnapshot.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLSessionStateSnapshot.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/TLSessionStateSnapshot.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TAB_ID: () => (/* binding */ TAB_ID),\n/* harmony export */   createSessionStateSnapshotSignal: () => (/* binding */ createSessionStateSnapshotSignal),\n/* harmony export */   extractSessionStateFromLegacySnapshot: () => (/* binding */ extractSessionStateFromLegacySnapshot),\n/* harmony export */   loadSessionStateSnapshotIntoStore: () => (/* binding */ loadSessionStateSnapshotIntoStore)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/uniqueId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs\");\n\n\n\n\n\nconst tabIdKey = \"TLDRAW_TAB_ID_v2\";\nconst window = globalThis.window;\nfunction iOS() {\n  if (!window)\n    return false;\n  return [\"iPad Simulator\", \"iPhone Simulator\", \"iPod Simulator\", \"iPad\", \"iPhone\", \"iPod\"].includes(\n    // eslint-disable-next-line deprecation/deprecation\n    window.navigator.platform\n  ) || // iPad on iOS 13 detection\n  window.navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document;\n}\nconst TAB_ID = window ? window[tabIdKey] ?? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.getFromSessionStorage)(tabIdKey) ?? `TLDRAW_INSTANCE_STATE_V1_` + (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_4__.uniqueId)() : \"<error>\";\nif (window) {\n  window[tabIdKey] = TAB_ID;\n  if (iOS()) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.setInSessionStorage)(tabIdKey, TAB_ID);\n  } else {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.deleteFromSessionStorage)(tabIdKey);\n  }\n}\nwindow?.addEventListener(\"beforeunload\", () => {\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.setInSessionStorage)(tabIdKey, TAB_ID);\n});\nconst Versions = {\n  Initial: 0\n};\nconst CURRENT_SESSION_STATE_SNAPSHOT_VERSION = Math.max(...Object.values(Versions));\nfunction migrate(snapshot) {\n  if (snapshot.version < Versions.Initial) {\n  }\n  snapshot.version = CURRENT_SESSION_STATE_SNAPSHOT_VERSION;\n}\nconst sessionStateSnapshotValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.object({\n  version: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.number,\n  currentPageId: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.pageIdValidator,\n  isFocusMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean,\n  exportBackground: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean,\n  isDebugMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean,\n  isToolLocked: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean,\n  isGridMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean,\n  pageStates: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.arrayOf(\n    _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.object({\n      pageId: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.pageIdValidator,\n      camera: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.object({\n        x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.number,\n        y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.number,\n        z: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.number\n      }),\n      selectedShapeIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.arrayOf(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.shapeIdValidator),\n      focusedGroupId: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.shapeIdValidator.nullable()\n    })\n  )\n});\nfunction migrateAndValidateSessionStateSnapshot(state) {\n  if (!state || typeof state !== \"object\") {\n    console.warn(\"Invalid instance state\");\n    return null;\n  }\n  if (!(\"version\" in state) || typeof state.version !== \"number\") {\n    console.warn(\"No version in instance state\");\n    return null;\n  }\n  if (state.version !== CURRENT_SESSION_STATE_SNAPSHOT_VERSION) {\n    state = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.structuredClone)(state);\n    migrate(state);\n  }\n  try {\n    return sessionStateSnapshotValidator.validate(state);\n  } catch (e) {\n    console.warn(e);\n    return null;\n  }\n}\nfunction createSessionStateSnapshotSignal(store) {\n  const $allPageIds = store.query.ids(\"page\");\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"sessionStateSnapshot\", () => {\n    const instanceState = store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.TLINSTANCE_ID);\n    if (!instanceState)\n      return null;\n    const allPageIds = [...$allPageIds.get()];\n    return {\n      version: CURRENT_SESSION_STATE_SNAPSHOT_VERSION,\n      currentPageId: instanceState.currentPageId,\n      exportBackground: instanceState.exportBackground,\n      isFocusMode: instanceState.isFocusMode,\n      isDebugMode: instanceState.isDebugMode,\n      isToolLocked: instanceState.isToolLocked,\n      isGridMode: instanceState.isGridMode,\n      pageStates: allPageIds.map((id) => {\n        const ps = store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.InstancePageStateRecordType.createId(id));\n        const camera = store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.CameraRecordType.createId(id));\n        return {\n          pageId: id,\n          camera: {\n            x: camera?.x ?? 0,\n            y: camera?.y ?? 0,\n            z: camera?.z ?? 1\n          },\n          selectedShapeIds: ps?.selectedShapeIds ?? [],\n          focusedGroupId: ps?.focusedGroupId ?? null\n        };\n      })\n    };\n  });\n}\nfunction loadSessionStateSnapshotIntoStore(store, snapshot) {\n  const res = migrateAndValidateSessionStateSnapshot(snapshot);\n  if (!res)\n    return;\n  const instanceState = store.schema.types.instance.create({\n    id: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.TLINSTANCE_ID,\n    ...(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.pluckPreservingValues)(store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.TLINSTANCE_ID)),\n    currentPageId: res.currentPageId,\n    isDebugMode: res.isDebugMode,\n    isFocusMode: res.isFocusMode,\n    isToolLocked: res.isToolLocked,\n    isGridMode: res.isGridMode,\n    exportBackground: res.exportBackground\n  });\n  const allPageStatesAndCameras = store.allRecords().filter((r) => r.typeName === \"instance_page_state\" || r.typeName === \"camera\");\n  store.atomic(() => {\n    store.remove(allPageStatesAndCameras.map((r) => r.id));\n    for (const ps of res.pageStates) {\n      store.put([\n        _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.CameraRecordType.create({\n          id: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.CameraRecordType.createId(ps.pageId),\n          x: ps.camera.x,\n          y: ps.camera.y,\n          z: ps.camera.z\n        }),\n        _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.InstancePageStateRecordType.create({\n          id: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.InstancePageStateRecordType.createId(ps.pageId),\n          pageId: ps.pageId,\n          selectedShapeIds: ps.selectedShapeIds,\n          focusedGroupId: ps.focusedGroupId\n        })\n      ]);\n    }\n    store.put([instanceState]);\n    store.ensureStoreIsUsable();\n  });\n}\nfunction extractSessionStateFromLegacySnapshot(store) {\n  const instanceRecords = [];\n  for (const record of Object.values(store)) {\n    if (record.typeName?.match(/^(instance.*|pointer|camera)$/)) {\n      instanceRecords.push(record);\n    }\n  }\n  const oldInstance = instanceRecords.filter(\n    (r) => r.typeName === \"instance\" && r.id !== _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.TLINSTANCE_ID\n  )[0];\n  if (!oldInstance)\n    return null;\n  const result = {\n    version: CURRENT_SESSION_STATE_SNAPSHOT_VERSION,\n    currentPageId: oldInstance.currentPageId,\n    exportBackground: !!oldInstance.exportBackground,\n    isFocusMode: !!oldInstance.isFocusMode,\n    isDebugMode: !!oldInstance.isDebugMode,\n    isToolLocked: !!oldInstance.isToolLocked,\n    isGridMode: false,\n    pageStates: instanceRecords.filter((r) => r.typeName === \"instance_page_state\" && r.instanceId === oldInstance.id).map((ps) => {\n      const camera = store[ps.cameraId] ?? { x: 0, y: 0, z: 1 };\n      return {\n        pageId: ps.pageId,\n        camera: {\n          x: camera.x,\n          y: camera.y,\n          z: camera.z\n        },\n        selectedShapeIds: ps.selectedShapeIds,\n        focusedGroupId: ps.focusedGroupId\n      };\n    })\n  };\n  try {\n    sessionStateSnapshotValidator.validate(result);\n    return result;\n  } catch (e) {\n    return null;\n  }\n}\n\n//# sourceMappingURL=TLSessionStateSnapshot.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9UTFNlc3Npb25TdGF0ZVNuYXBzaG90Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBeUM7QUFRZjtBQU1IO0FBQ2M7QUFDWTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLG9FQUFxQiw0Q0FBNEMsNkRBQVE7QUFDckg7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrRUFBbUI7QUFDdkIsSUFBSTtBQUNKLElBQUksdUVBQXdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLEVBQUUsa0VBQW1CO0FBQ3JCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msc0RBQVE7QUFDOUMsV0FBVyxzREFBUTtBQUNuQixpQkFBaUIsNkRBQWU7QUFDaEMsZUFBZSx1REFBUztBQUN4QixvQkFBb0IsdURBQVM7QUFDN0IsZUFBZSx1REFBUztBQUN4QixnQkFBZ0IsdURBQVM7QUFDekIsY0FBYyx1REFBUztBQUN2QixjQUFjLHVEQUFTO0FBQ3ZCLElBQUksc0RBQVE7QUFDWixjQUFjLDZEQUFlO0FBQzdCLGNBQWMsc0RBQVE7QUFDdEIsV0FBVyxzREFBUTtBQUNuQixXQUFXLHNEQUFRO0FBQ25CLFdBQVcsc0RBQVE7QUFDbkIsT0FBTztBQUNQLHdCQUF3Qix1REFBUyxDQUFDLDhEQUFnQjtBQUNsRCxzQkFBc0IsOERBQWdCO0FBQ3RDLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksOERBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx1REFBUTtBQUNqQixvQ0FBb0MsMkRBQWE7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHlFQUEyQjtBQUN4RCxpQ0FBaUMsOERBQWdCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyREFBYTtBQUNyQixPQUFPLHVFQUFxQixXQUFXLDJEQUFhO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw4REFBZ0I7QUFDeEIsY0FBYyw4REFBZ0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVEseUVBQTJCO0FBQ25DLGNBQWMseUVBQTJCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsMkRBQWE7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBTUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29uZmlnL1RMU2Vzc2lvblN0YXRlU25hcHNob3QubWpzPzhkNTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHtcbiAgQ2FtZXJhUmVjb3JkVHlwZSxcbiAgSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlLFxuICBUTElOU1RBTkNFX0lELFxuICBwYWdlSWRWYWxpZGF0b3IsXG4gIHBsdWNrUHJlc2VydmluZ1ZhbHVlcyxcbiAgc2hhcGVJZFZhbGlkYXRvclxufSBmcm9tIFwiQHRsZHJhdy90bHNjaGVtYVwiO1xuaW1wb3J0IHtcbiAgZGVsZXRlRnJvbVNlc3Npb25TdG9yYWdlLFxuICBnZXRGcm9tU2Vzc2lvblN0b3JhZ2UsXG4gIHNldEluU2Vzc2lvblN0b3JhZ2UsXG4gIHN0cnVjdHVyZWRDbG9uZVxufSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gXCIuLi91dGlscy91bmlxdWVJZC5tanNcIjtcbmNvbnN0IHRhYklkS2V5ID0gXCJUTERSQVdfVEFCX0lEX3YyXCI7XG5jb25zdCB3aW5kb3cgPSBnbG9iYWxUaGlzLndpbmRvdztcbmZ1bmN0aW9uIGlPUygpIHtcbiAgaWYgKCF3aW5kb3cpXG4gICAgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gW1wiaVBhZCBTaW11bGF0b3JcIiwgXCJpUGhvbmUgU2ltdWxhdG9yXCIsIFwiaVBvZCBTaW11bGF0b3JcIiwgXCJpUGFkXCIsIFwiaVBob25lXCIsIFwiaVBvZFwiXS5pbmNsdWRlcyhcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb25cbiAgICB3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtXG4gICkgfHwgLy8gaVBhZCBvbiBpT1MgMTMgZGV0ZWN0aW9uXG4gIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKFwiTWFjXCIpICYmIFwib250b3VjaGVuZFwiIGluIGRvY3VtZW50O1xufVxuY29uc3QgVEFCX0lEID0gd2luZG93ID8gd2luZG93W3RhYklkS2V5XSA/PyBnZXRGcm9tU2Vzc2lvblN0b3JhZ2UodGFiSWRLZXkpID8/IGBUTERSQVdfSU5TVEFOQ0VfU1RBVEVfVjFfYCArIHVuaXF1ZUlkKCkgOiBcIjxlcnJvcj5cIjtcbmlmICh3aW5kb3cpIHtcbiAgd2luZG93W3RhYklkS2V5XSA9IFRBQl9JRDtcbiAgaWYgKGlPUygpKSB7XG4gICAgc2V0SW5TZXNzaW9uU3RvcmFnZSh0YWJJZEtleSwgVEFCX0lEKTtcbiAgfSBlbHNlIHtcbiAgICBkZWxldGVGcm9tU2Vzc2lvblN0b3JhZ2UodGFiSWRLZXkpO1xuICB9XG59XG53aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgKCkgPT4ge1xuICBzZXRJblNlc3Npb25TdG9yYWdlKHRhYklkS2V5LCBUQUJfSUQpO1xufSk7XG5jb25zdCBWZXJzaW9ucyA9IHtcbiAgSW5pdGlhbDogMFxufTtcbmNvbnN0IENVUlJFTlRfU0VTU0lPTl9TVEFURV9TTkFQU0hPVF9WRVJTSU9OID0gTWF0aC5tYXgoLi4uT2JqZWN0LnZhbHVlcyhWZXJzaW9ucykpO1xuZnVuY3Rpb24gbWlncmF0ZShzbmFwc2hvdCkge1xuICBpZiAoc25hcHNob3QudmVyc2lvbiA8IFZlcnNpb25zLkluaXRpYWwpIHtcbiAgfVxuICBzbmFwc2hvdC52ZXJzaW9uID0gQ1VSUkVOVF9TRVNTSU9OX1NUQVRFX1NOQVBTSE9UX1ZFUlNJT047XG59XG5jb25zdCBzZXNzaW9uU3RhdGVTbmFwc2hvdFZhbGlkYXRvciA9IFQub2JqZWN0KHtcbiAgdmVyc2lvbjogVC5udW1iZXIsXG4gIGN1cnJlbnRQYWdlSWQ6IHBhZ2VJZFZhbGlkYXRvcixcbiAgaXNGb2N1c01vZGU6IFQuYm9vbGVhbixcbiAgZXhwb3J0QmFja2dyb3VuZDogVC5ib29sZWFuLFxuICBpc0RlYnVnTW9kZTogVC5ib29sZWFuLFxuICBpc1Rvb2xMb2NrZWQ6IFQuYm9vbGVhbixcbiAgaXNHcmlkTW9kZTogVC5ib29sZWFuLFxuICBwYWdlU3RhdGVzOiBULmFycmF5T2YoXG4gICAgVC5vYmplY3Qoe1xuICAgICAgcGFnZUlkOiBwYWdlSWRWYWxpZGF0b3IsXG4gICAgICBjYW1lcmE6IFQub2JqZWN0KHtcbiAgICAgICAgeDogVC5udW1iZXIsXG4gICAgICAgIHk6IFQubnVtYmVyLFxuICAgICAgICB6OiBULm51bWJlclxuICAgICAgfSksXG4gICAgICBzZWxlY3RlZFNoYXBlSWRzOiBULmFycmF5T2Yoc2hhcGVJZFZhbGlkYXRvciksXG4gICAgICBmb2N1c2VkR3JvdXBJZDogc2hhcGVJZFZhbGlkYXRvci5udWxsYWJsZSgpXG4gICAgfSlcbiAgKVxufSk7XG5mdW5jdGlvbiBtaWdyYXRlQW5kVmFsaWRhdGVTZXNzaW9uU3RhdGVTbmFwc2hvdChzdGF0ZSkge1xuICBpZiAoIXN0YXRlIHx8IHR5cGVvZiBzdGF0ZSAhPT0gXCJvYmplY3RcIikge1xuICAgIGNvbnNvbGUud2FybihcIkludmFsaWQgaW5zdGFuY2Ugc3RhdGVcIik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKCEoXCJ2ZXJzaW9uXCIgaW4gc3RhdGUpIHx8IHR5cGVvZiBzdGF0ZS52ZXJzaW9uICE9PSBcIm51bWJlclwiKSB7XG4gICAgY29uc29sZS53YXJuKFwiTm8gdmVyc2lvbiBpbiBpbnN0YW5jZSBzdGF0ZVwiKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoc3RhdGUudmVyc2lvbiAhPT0gQ1VSUkVOVF9TRVNTSU9OX1NUQVRFX1NOQVBTSE9UX1ZFUlNJT04pIHtcbiAgICBzdGF0ZSA9IHN0cnVjdHVyZWRDbG9uZShzdGF0ZSk7XG4gICAgbWlncmF0ZShzdGF0ZSk7XG4gIH1cbiAgdHJ5IHtcbiAgICByZXR1cm4gc2Vzc2lvblN0YXRlU25hcHNob3RWYWxpZGF0b3IudmFsaWRhdGUoc3RhdGUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKGUpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBjcmVhdGVTZXNzaW9uU3RhdGVTbmFwc2hvdFNpZ25hbChzdG9yZSkge1xuICBjb25zdCAkYWxsUGFnZUlkcyA9IHN0b3JlLnF1ZXJ5LmlkcyhcInBhZ2VcIik7XG4gIHJldHVybiBjb21wdXRlZChcInNlc3Npb25TdGF0ZVNuYXBzaG90XCIsICgpID0+IHtcbiAgICBjb25zdCBpbnN0YW5jZVN0YXRlID0gc3RvcmUuZ2V0KFRMSU5TVEFOQ0VfSUQpO1xuICAgIGlmICghaW5zdGFuY2VTdGF0ZSlcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGFsbFBhZ2VJZHMgPSBbLi4uJGFsbFBhZ2VJZHMuZ2V0KCldO1xuICAgIHJldHVybiB7XG4gICAgICB2ZXJzaW9uOiBDVVJSRU5UX1NFU1NJT05fU1RBVEVfU05BUFNIT1RfVkVSU0lPTixcbiAgICAgIGN1cnJlbnRQYWdlSWQ6IGluc3RhbmNlU3RhdGUuY3VycmVudFBhZ2VJZCxcbiAgICAgIGV4cG9ydEJhY2tncm91bmQ6IGluc3RhbmNlU3RhdGUuZXhwb3J0QmFja2dyb3VuZCxcbiAgICAgIGlzRm9jdXNNb2RlOiBpbnN0YW5jZVN0YXRlLmlzRm9jdXNNb2RlLFxuICAgICAgaXNEZWJ1Z01vZGU6IGluc3RhbmNlU3RhdGUuaXNEZWJ1Z01vZGUsXG4gICAgICBpc1Rvb2xMb2NrZWQ6IGluc3RhbmNlU3RhdGUuaXNUb29sTG9ja2VkLFxuICAgICAgaXNHcmlkTW9kZTogaW5zdGFuY2VTdGF0ZS5pc0dyaWRNb2RlLFxuICAgICAgcGFnZVN0YXRlczogYWxsUGFnZUlkcy5tYXAoKGlkKSA9PiB7XG4gICAgICAgIGNvbnN0IHBzID0gc3RvcmUuZ2V0KEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZS5jcmVhdGVJZChpZCkpO1xuICAgICAgICBjb25zdCBjYW1lcmEgPSBzdG9yZS5nZXQoQ2FtZXJhUmVjb3JkVHlwZS5jcmVhdGVJZChpZCkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHBhZ2VJZDogaWQsXG4gICAgICAgICAgY2FtZXJhOiB7XG4gICAgICAgICAgICB4OiBjYW1lcmE/LnggPz8gMCxcbiAgICAgICAgICAgIHk6IGNhbWVyYT8ueSA/PyAwLFxuICAgICAgICAgICAgejogY2FtZXJhPy56ID8/IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlbGVjdGVkU2hhcGVJZHM6IHBzPy5zZWxlY3RlZFNoYXBlSWRzID8/IFtdLFxuICAgICAgICAgIGZvY3VzZWRHcm91cElkOiBwcz8uZm9jdXNlZEdyb3VwSWQgPz8gbnVsbFxuICAgICAgICB9O1xuICAgICAgfSlcbiAgICB9O1xuICB9KTtcbn1cbmZ1bmN0aW9uIGxvYWRTZXNzaW9uU3RhdGVTbmFwc2hvdEludG9TdG9yZShzdG9yZSwgc25hcHNob3QpIHtcbiAgY29uc3QgcmVzID0gbWlncmF0ZUFuZFZhbGlkYXRlU2Vzc2lvblN0YXRlU25hcHNob3Qoc25hcHNob3QpO1xuICBpZiAoIXJlcylcbiAgICByZXR1cm47XG4gIGNvbnN0IGluc3RhbmNlU3RhdGUgPSBzdG9yZS5zY2hlbWEudHlwZXMuaW5zdGFuY2UuY3JlYXRlKHtcbiAgICBpZDogVExJTlNUQU5DRV9JRCxcbiAgICAuLi5wbHVja1ByZXNlcnZpbmdWYWx1ZXMoc3RvcmUuZ2V0KFRMSU5TVEFOQ0VfSUQpKSxcbiAgICBjdXJyZW50UGFnZUlkOiByZXMuY3VycmVudFBhZ2VJZCxcbiAgICBpc0RlYnVnTW9kZTogcmVzLmlzRGVidWdNb2RlLFxuICAgIGlzRm9jdXNNb2RlOiByZXMuaXNGb2N1c01vZGUsXG4gICAgaXNUb29sTG9ja2VkOiByZXMuaXNUb29sTG9ja2VkLFxuICAgIGlzR3JpZE1vZGU6IHJlcy5pc0dyaWRNb2RlLFxuICAgIGV4cG9ydEJhY2tncm91bmQ6IHJlcy5leHBvcnRCYWNrZ3JvdW5kXG4gIH0pO1xuICBjb25zdCBhbGxQYWdlU3RhdGVzQW5kQ2FtZXJhcyA9IHN0b3JlLmFsbFJlY29yZHMoKS5maWx0ZXIoKHIpID0+IHIudHlwZU5hbWUgPT09IFwiaW5zdGFuY2VfcGFnZV9zdGF0ZVwiIHx8IHIudHlwZU5hbWUgPT09IFwiY2FtZXJhXCIpO1xuICBzdG9yZS5hdG9taWMoKCkgPT4ge1xuICAgIHN0b3JlLnJlbW92ZShhbGxQYWdlU3RhdGVzQW5kQ2FtZXJhcy5tYXAoKHIpID0+IHIuaWQpKTtcbiAgICBmb3IgKGNvbnN0IHBzIG9mIHJlcy5wYWdlU3RhdGVzKSB7XG4gICAgICBzdG9yZS5wdXQoW1xuICAgICAgICBDYW1lcmFSZWNvcmRUeXBlLmNyZWF0ZSh7XG4gICAgICAgICAgaWQ6IENhbWVyYVJlY29yZFR5cGUuY3JlYXRlSWQocHMucGFnZUlkKSxcbiAgICAgICAgICB4OiBwcy5jYW1lcmEueCxcbiAgICAgICAgICB5OiBwcy5jYW1lcmEueSxcbiAgICAgICAgICB6OiBwcy5jYW1lcmEuelxuICAgICAgICB9KSxcbiAgICAgICAgSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlLmNyZWF0ZSh7XG4gICAgICAgICAgaWQ6IEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZS5jcmVhdGVJZChwcy5wYWdlSWQpLFxuICAgICAgICAgIHBhZ2VJZDogcHMucGFnZUlkLFxuICAgICAgICAgIHNlbGVjdGVkU2hhcGVJZHM6IHBzLnNlbGVjdGVkU2hhcGVJZHMsXG4gICAgICAgICAgZm9jdXNlZEdyb3VwSWQ6IHBzLmZvY3VzZWRHcm91cElkXG4gICAgICAgIH0pXG4gICAgICBdKTtcbiAgICB9XG4gICAgc3RvcmUucHV0KFtpbnN0YW5jZVN0YXRlXSk7XG4gICAgc3RvcmUuZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RTZXNzaW9uU3RhdGVGcm9tTGVnYWN5U25hcHNob3Qoc3RvcmUpIHtcbiAgY29uc3QgaW5zdGFuY2VSZWNvcmRzID0gW107XG4gIGZvciAoY29uc3QgcmVjb3JkIG9mIE9iamVjdC52YWx1ZXMoc3RvcmUpKSB7XG4gICAgaWYgKHJlY29yZC50eXBlTmFtZT8ubWF0Y2goL14oaW5zdGFuY2UuKnxwb2ludGVyfGNhbWVyYSkkLykpIHtcbiAgICAgIGluc3RhbmNlUmVjb3Jkcy5wdXNoKHJlY29yZCk7XG4gICAgfVxuICB9XG4gIGNvbnN0IG9sZEluc3RhbmNlID0gaW5zdGFuY2VSZWNvcmRzLmZpbHRlcihcbiAgICAocikgPT4gci50eXBlTmFtZSA9PT0gXCJpbnN0YW5jZVwiICYmIHIuaWQgIT09IFRMSU5TVEFOQ0VfSURcbiAgKVswXTtcbiAgaWYgKCFvbGRJbnN0YW5jZSlcbiAgICByZXR1cm4gbnVsbDtcbiAgY29uc3QgcmVzdWx0ID0ge1xuICAgIHZlcnNpb246IENVUlJFTlRfU0VTU0lPTl9TVEFURV9TTkFQU0hPVF9WRVJTSU9OLFxuICAgIGN1cnJlbnRQYWdlSWQ6IG9sZEluc3RhbmNlLmN1cnJlbnRQYWdlSWQsXG4gICAgZXhwb3J0QmFja2dyb3VuZDogISFvbGRJbnN0YW5jZS5leHBvcnRCYWNrZ3JvdW5kLFxuICAgIGlzRm9jdXNNb2RlOiAhIW9sZEluc3RhbmNlLmlzRm9jdXNNb2RlLFxuICAgIGlzRGVidWdNb2RlOiAhIW9sZEluc3RhbmNlLmlzRGVidWdNb2RlLFxuICAgIGlzVG9vbExvY2tlZDogISFvbGRJbnN0YW5jZS5pc1Rvb2xMb2NrZWQsXG4gICAgaXNHcmlkTW9kZTogZmFsc2UsXG4gICAgcGFnZVN0YXRlczogaW5zdGFuY2VSZWNvcmRzLmZpbHRlcigocikgPT4gci50eXBlTmFtZSA9PT0gXCJpbnN0YW5jZV9wYWdlX3N0YXRlXCIgJiYgci5pbnN0YW5jZUlkID09PSBvbGRJbnN0YW5jZS5pZCkubWFwKChwcykgPT4ge1xuICAgICAgY29uc3QgY2FtZXJhID0gc3RvcmVbcHMuY2FtZXJhSWRdID8/IHsgeDogMCwgeTogMCwgejogMSB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGFnZUlkOiBwcy5wYWdlSWQsXG4gICAgICAgIGNhbWVyYToge1xuICAgICAgICAgIHg6IGNhbWVyYS54LFxuICAgICAgICAgIHk6IGNhbWVyYS55LFxuICAgICAgICAgIHo6IGNhbWVyYS56XG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdGVkU2hhcGVJZHM6IHBzLnNlbGVjdGVkU2hhcGVJZHMsXG4gICAgICAgIGZvY3VzZWRHcm91cElkOiBwcy5mb2N1c2VkR3JvdXBJZFxuICAgICAgfTtcbiAgICB9KVxuICB9O1xuICB0cnkge1xuICAgIHNlc3Npb25TdGF0ZVNuYXBzaG90VmFsaWRhdG9yLnZhbGlkYXRlKHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5leHBvcnQge1xuICBUQUJfSUQsXG4gIGNyZWF0ZVNlc3Npb25TdGF0ZVNuYXBzaG90U2lnbmFsLFxuICBleHRyYWN0U2Vzc2lvblN0YXRlRnJvbUxlZ2FjeVNuYXBzaG90LFxuICBsb2FkU2Vzc2lvblN0YXRlU25hcHNob3RJbnRvU3RvcmVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTFNlc3Npb25TdGF0ZVNuYXBzaG90Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLSessionStateSnapshot.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLUserPreferences.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/TLUserPreferences.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   USER_COLORS: () => (/* binding */ USER_COLORS),\n/* harmony export */   defaultUserPreferences: () => (/* binding */ defaultUserPreferences),\n/* harmony export */   getFreshUserPreferences: () => (/* binding */ getFreshUserPreferences),\n/* harmony export */   getUserPreferences: () => (/* binding */ getUserPreferences),\n/* harmony export */   setUserPreferences: () => (/* binding */ setUserPreferences),\n/* harmony export */   userPrefersDarkUI: () => (/* binding */ userPrefersDarkUI),\n/* harmony export */   userPrefersReducedMotion: () => (/* binding */ userPrefersReducedMotion)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/uniqueId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs\");\n\n\n\n\n\nconst USER_DATA_KEY = \"TLDRAW_USER_DATA_v3\";\nconst userTypeValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.object({\n  id: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.string,\n  name: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.string.nullable().optional(),\n  locale: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.string.nullable().optional(),\n  color: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.string.nullable().optional(),\n  isDarkMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean.nullable().optional(),\n  animationSpeed: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.number.nullable().optional(),\n  edgeScrollSpeed: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.number.nullable().optional(),\n  isSnapMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean.nullable().optional(),\n  isWrapMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_3__.T.boolean.nullable().optional()\n});\nconst Versions = {\n  AddAnimationSpeed: 1,\n  AddIsSnapMode: 2,\n  MakeFieldsNullable: 3,\n  AddEdgeScrollSpeed: 4,\n  AddExcalidrawSelectMode: 5\n};\nconst CURRENT_VERSION = Math.max(...Object.values(Versions));\nfunction migrateSnapshot(data) {\n  if (data.version < Versions.AddAnimationSpeed) {\n    data.user.animationSpeed = 1;\n  }\n  if (data.version < Versions.AddIsSnapMode) {\n    data.user.isSnapMode = false;\n  }\n  if (data.version < Versions.MakeFieldsNullable) {\n  }\n  if (data.version < Versions.AddEdgeScrollSpeed) {\n    data.user.edgeScrollSpeed = 1;\n  }\n  if (data.version < Versions.AddExcalidrawSelectMode) {\n    data.user.isWrapMode = false;\n  }\n  data.version = CURRENT_VERSION;\n}\nconst USER_COLORS = [\n  \"#FF802B\",\n  \"#EC5E41\",\n  \"#F2555A\",\n  \"#F04F88\",\n  \"#E34BA9\",\n  \"#BD54C6\",\n  \"#9D5BD2\",\n  \"#7B66DC\",\n  \"#02B1CC\",\n  \"#11B3A3\",\n  \"#39B178\",\n  \"#55B467\"\n];\nfunction getRandomColor() {\n  return USER_COLORS[Math.floor(Math.random() * USER_COLORS.length)];\n}\nfunction userPrefersDarkUI() {\n  if (typeof window === \"undefined\") {\n    return false;\n  }\n  return window.matchMedia?.(\"(prefers-color-scheme: dark)\")?.matches ?? false;\n}\nfunction userPrefersReducedMotion() {\n  if (typeof window === \"undefined\") {\n    return false;\n  }\n  return window.matchMedia?.(\"(prefers-reduced-motion: reduce)\")?.matches ?? false;\n}\nconst defaultUserPreferences = Object.freeze({\n  name: \"New User\",\n  locale: (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.getDefaultTranslationLocale)(),\n  color: getRandomColor(),\n  isDarkMode: false,\n  edgeScrollSpeed: 1,\n  animationSpeed: userPrefersReducedMotion() ? 0 : 1,\n  isSnapMode: false,\n  isWrapMode: false\n});\nfunction getFreshUserPreferences() {\n  return {\n    id: (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_4__.uniqueId)()\n  };\n}\nfunction migrateUserPreferences(userData) {\n  if (userData === null || typeof userData !== \"object\") {\n    return getFreshUserPreferences();\n  }\n  if (!(\"version\" in userData) || !(\"user\" in userData) || typeof userData.version !== \"number\") {\n    return getFreshUserPreferences();\n  }\n  const snapshot = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.structuredClone)(userData);\n  migrateSnapshot(snapshot);\n  try {\n    return userTypeValidator.validate(snapshot.user);\n  } catch (e) {\n    return getFreshUserPreferences();\n  }\n}\nfunction loadUserPreferences() {\n  const userData = JSON.parse((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.getFromLocalStorage)(USER_DATA_KEY) || \"null\") ?? null;\n  return migrateUserPreferences(userData);\n}\nconst globalUserPreferences = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"globalUserData\", null);\nfunction storeUserPreferences() {\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.setInLocalStorage)(\n    USER_DATA_KEY,\n    JSON.stringify({\n      version: CURRENT_VERSION,\n      user: globalUserPreferences.get()\n    })\n  );\n}\nfunction setUserPreferences(user) {\n  userTypeValidator.validate(user);\n  globalUserPreferences.set(user);\n  storeUserPreferences();\n  broadcastUserPreferencesChange();\n}\nconst isTest = typeof process !== \"undefined\" && \"development\" === \"test\";\nconst channel = typeof BroadcastChannel !== \"undefined\" && !isTest ? new BroadcastChannel(\"tldraw-user-sync\") : null;\nchannel?.addEventListener(\"message\", (e) => {\n  const data = e.data;\n  if (data?.type === broadcastEventKey && data?.origin !== getBroadcastOrigin()) {\n    globalUserPreferences.set(migrateUserPreferences(data.data));\n  }\n});\nlet _broadcastOrigin = null;\nfunction getBroadcastOrigin() {\n  if (_broadcastOrigin === null) {\n    _broadcastOrigin = (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_4__.uniqueId)();\n  }\n  return _broadcastOrigin;\n}\nconst broadcastEventKey = \"tldraw-user-preferences-change\";\nfunction broadcastUserPreferencesChange() {\n  channel?.postMessage({\n    type: broadcastEventKey,\n    origin: getBroadcastOrigin(),\n    data: {\n      user: getUserPreferences(),\n      version: CURRENT_VERSION\n    }\n  });\n}\nfunction getUserPreferences() {\n  let prefs = globalUserPreferences.get();\n  if (!prefs) {\n    prefs = loadUserPreferences();\n    globalUserPreferences.set(prefs);\n  }\n  return prefs;\n}\n\n//# sourceMappingURL=TLUserPreferences.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9UTFVzZXJQcmVmZXJlbmNlcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXFDO0FBQzBCO0FBQ3lCO0FBQ25EO0FBQ1k7QUFDakQ7QUFDQSwwQkFBMEIsc0RBQVE7QUFDbEMsTUFBTSxzREFBUTtBQUNkLFFBQVEsc0RBQVE7QUFDaEIsVUFBVSxzREFBUTtBQUNsQixTQUFTLHNEQUFRO0FBQ2pCLGNBQWMsdURBQVM7QUFDdkIsa0JBQWtCLHNEQUFRO0FBQzFCLG1CQUFtQixzREFBUTtBQUMzQixjQUFjLHVEQUFTO0FBQ3ZCLGNBQWMsdURBQVM7QUFDdkIsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDZFQUEyQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLFFBQVEsNkRBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDhEQUFlO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrRUFBbUI7QUFDakQ7QUFDQTtBQUNBLDhCQUE4QixtREFBSTtBQUNsQztBQUNBLEVBQUUsZ0VBQWlCO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsYUFBb0I7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2REFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29uZmlnL1RMVXNlclByZWZlcmVuY2VzLm1qcz9mMjRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0b20gfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdFRyYW5zbGF0aW9uTG9jYWxlIH0gZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmltcG9ydCB7IGdldEZyb21Mb2NhbFN0b3JhZ2UsIHNldEluTG9jYWxTdG9yYWdlLCBzdHJ1Y3R1cmVkQ2xvbmUgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gXCIuLi91dGlscy91bmlxdWVJZC5tanNcIjtcbmNvbnN0IFVTRVJfREFUQV9LRVkgPSBcIlRMRFJBV19VU0VSX0RBVEFfdjNcIjtcbmNvbnN0IHVzZXJUeXBlVmFsaWRhdG9yID0gVC5vYmplY3Qoe1xuICBpZDogVC5zdHJpbmcsXG4gIG5hbWU6IFQuc3RyaW5nLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgbG9jYWxlOiBULnN0cmluZy5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIGNvbG9yOiBULnN0cmluZy5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIGlzRGFya01vZGU6IFQuYm9vbGVhbi5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIGFuaW1hdGlvblNwZWVkOiBULm51bWJlci5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIGVkZ2VTY3JvbGxTcGVlZDogVC5udW1iZXIubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBpc1NuYXBNb2RlOiBULmJvb2xlYW4ubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBpc1dyYXBNb2RlOiBULmJvb2xlYW4ubnVsbGFibGUoKS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IFZlcnNpb25zID0ge1xuICBBZGRBbmltYXRpb25TcGVlZDogMSxcbiAgQWRkSXNTbmFwTW9kZTogMixcbiAgTWFrZUZpZWxkc051bGxhYmxlOiAzLFxuICBBZGRFZGdlU2Nyb2xsU3BlZWQ6IDQsXG4gIEFkZEV4Y2FsaWRyYXdTZWxlY3RNb2RlOiA1XG59O1xuY29uc3QgQ1VSUkVOVF9WRVJTSU9OID0gTWF0aC5tYXgoLi4uT2JqZWN0LnZhbHVlcyhWZXJzaW9ucykpO1xuZnVuY3Rpb24gbWlncmF0ZVNuYXBzaG90KGRhdGEpIHtcbiAgaWYgKGRhdGEudmVyc2lvbiA8IFZlcnNpb25zLkFkZEFuaW1hdGlvblNwZWVkKSB7XG4gICAgZGF0YS51c2VyLmFuaW1hdGlvblNwZWVkID0gMTtcbiAgfVxuICBpZiAoZGF0YS52ZXJzaW9uIDwgVmVyc2lvbnMuQWRkSXNTbmFwTW9kZSkge1xuICAgIGRhdGEudXNlci5pc1NuYXBNb2RlID0gZmFsc2U7XG4gIH1cbiAgaWYgKGRhdGEudmVyc2lvbiA8IFZlcnNpb25zLk1ha2VGaWVsZHNOdWxsYWJsZSkge1xuICB9XG4gIGlmIChkYXRhLnZlcnNpb24gPCBWZXJzaW9ucy5BZGRFZGdlU2Nyb2xsU3BlZWQpIHtcbiAgICBkYXRhLnVzZXIuZWRnZVNjcm9sbFNwZWVkID0gMTtcbiAgfVxuICBpZiAoZGF0YS52ZXJzaW9uIDwgVmVyc2lvbnMuQWRkRXhjYWxpZHJhd1NlbGVjdE1vZGUpIHtcbiAgICBkYXRhLnVzZXIuaXNXcmFwTW9kZSA9IGZhbHNlO1xuICB9XG4gIGRhdGEudmVyc2lvbiA9IENVUlJFTlRfVkVSU0lPTjtcbn1cbmNvbnN0IFVTRVJfQ09MT1JTID0gW1xuICBcIiNGRjgwMkJcIixcbiAgXCIjRUM1RTQxXCIsXG4gIFwiI0YyNTU1QVwiLFxuICBcIiNGMDRGODhcIixcbiAgXCIjRTM0QkE5XCIsXG4gIFwiI0JENTRDNlwiLFxuICBcIiM5RDVCRDJcIixcbiAgXCIjN0I2NkRDXCIsXG4gIFwiIzAyQjFDQ1wiLFxuICBcIiMxMUIzQTNcIixcbiAgXCIjMzlCMTc4XCIsXG4gIFwiIzU1QjQ2N1wiXG5dO1xuZnVuY3Rpb24gZ2V0UmFuZG9tQ29sb3IoKSB7XG4gIHJldHVybiBVU0VSX0NPTE9SU1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBVU0VSX0NPTE9SUy5sZW5ndGgpXTtcbn1cbmZ1bmN0aW9uIHVzZXJQcmVmZXJzRGFya1VJKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gd2luZG93Lm1hdGNoTWVkaWE/LihcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaylcIik/Lm1hdGNoZXMgPz8gZmFsc2U7XG59XG5mdW5jdGlvbiB1c2VyUHJlZmVyc1JlZHVjZWRNb3Rpb24oKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB3aW5kb3cubWF0Y2hNZWRpYT8uKFwiKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSlcIik/Lm1hdGNoZXMgPz8gZmFsc2U7XG59XG5jb25zdCBkZWZhdWx0VXNlclByZWZlcmVuY2VzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIG5hbWU6IFwiTmV3IFVzZXJcIixcbiAgbG9jYWxlOiBnZXREZWZhdWx0VHJhbnNsYXRpb25Mb2NhbGUoKSxcbiAgY29sb3I6IGdldFJhbmRvbUNvbG9yKCksXG4gIGlzRGFya01vZGU6IGZhbHNlLFxuICBlZGdlU2Nyb2xsU3BlZWQ6IDEsXG4gIGFuaW1hdGlvblNwZWVkOiB1c2VyUHJlZmVyc1JlZHVjZWRNb3Rpb24oKSA/IDAgOiAxLFxuICBpc1NuYXBNb2RlOiBmYWxzZSxcbiAgaXNXcmFwTW9kZTogZmFsc2Vcbn0pO1xuZnVuY3Rpb24gZ2V0RnJlc2hVc2VyUHJlZmVyZW5jZXMoKSB7XG4gIHJldHVybiB7XG4gICAgaWQ6IHVuaXF1ZUlkKClcbiAgfTtcbn1cbmZ1bmN0aW9uIG1pZ3JhdGVVc2VyUHJlZmVyZW5jZXModXNlckRhdGEpIHtcbiAgaWYgKHVzZXJEYXRhID09PSBudWxsIHx8IHR5cGVvZiB1c2VyRGF0YSAhPT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBnZXRGcmVzaFVzZXJQcmVmZXJlbmNlcygpO1xuICB9XG4gIGlmICghKFwidmVyc2lvblwiIGluIHVzZXJEYXRhKSB8fCAhKFwidXNlclwiIGluIHVzZXJEYXRhKSB8fCB0eXBlb2YgdXNlckRhdGEudmVyc2lvbiAhPT0gXCJudW1iZXJcIikge1xuICAgIHJldHVybiBnZXRGcmVzaFVzZXJQcmVmZXJlbmNlcygpO1xuICB9XG4gIGNvbnN0IHNuYXBzaG90ID0gc3RydWN0dXJlZENsb25lKHVzZXJEYXRhKTtcbiAgbWlncmF0ZVNuYXBzaG90KHNuYXBzaG90KTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gdXNlclR5cGVWYWxpZGF0b3IudmFsaWRhdGUoc25hcHNob3QudXNlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZ2V0RnJlc2hVc2VyUHJlZmVyZW5jZXMoKTtcbiAgfVxufVxuZnVuY3Rpb24gbG9hZFVzZXJQcmVmZXJlbmNlcygpIHtcbiAgY29uc3QgdXNlckRhdGEgPSBKU09OLnBhcnNlKGdldEZyb21Mb2NhbFN0b3JhZ2UoVVNFUl9EQVRBX0tFWSkgfHwgXCJudWxsXCIpID8/IG51bGw7XG4gIHJldHVybiBtaWdyYXRlVXNlclByZWZlcmVuY2VzKHVzZXJEYXRhKTtcbn1cbmNvbnN0IGdsb2JhbFVzZXJQcmVmZXJlbmNlcyA9IGF0b20oXCJnbG9iYWxVc2VyRGF0YVwiLCBudWxsKTtcbmZ1bmN0aW9uIHN0b3JlVXNlclByZWZlcmVuY2VzKCkge1xuICBzZXRJbkxvY2FsU3RvcmFnZShcbiAgICBVU0VSX0RBVEFfS0VZLFxuICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIHZlcnNpb246IENVUlJFTlRfVkVSU0lPTixcbiAgICAgIHVzZXI6IGdsb2JhbFVzZXJQcmVmZXJlbmNlcy5nZXQoKVxuICAgIH0pXG4gICk7XG59XG5mdW5jdGlvbiBzZXRVc2VyUHJlZmVyZW5jZXModXNlcikge1xuICB1c2VyVHlwZVZhbGlkYXRvci52YWxpZGF0ZSh1c2VyKTtcbiAgZ2xvYmFsVXNlclByZWZlcmVuY2VzLnNldCh1c2VyKTtcbiAgc3RvcmVVc2VyUHJlZmVyZW5jZXMoKTtcbiAgYnJvYWRjYXN0VXNlclByZWZlcmVuY2VzQ2hhbmdlKCk7XG59XG5jb25zdCBpc1Rlc3QgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJ0ZXN0XCI7XG5jb25zdCBjaGFubmVsID0gdHlwZW9mIEJyb2FkY2FzdENoYW5uZWwgIT09IFwidW5kZWZpbmVkXCIgJiYgIWlzVGVzdCA/IG5ldyBCcm9hZGNhc3RDaGFubmVsKFwidGxkcmF3LXVzZXItc3luY1wiKSA6IG51bGw7XG5jaGFubmVsPy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCAoZSkgPT4ge1xuICBjb25zdCBkYXRhID0gZS5kYXRhO1xuICBpZiAoZGF0YT8udHlwZSA9PT0gYnJvYWRjYXN0RXZlbnRLZXkgJiYgZGF0YT8ub3JpZ2luICE9PSBnZXRCcm9hZGNhc3RPcmlnaW4oKSkge1xuICAgIGdsb2JhbFVzZXJQcmVmZXJlbmNlcy5zZXQobWlncmF0ZVVzZXJQcmVmZXJlbmNlcyhkYXRhLmRhdGEpKTtcbiAgfVxufSk7XG5sZXQgX2Jyb2FkY2FzdE9yaWdpbiA9IG51bGw7XG5mdW5jdGlvbiBnZXRCcm9hZGNhc3RPcmlnaW4oKSB7XG4gIGlmIChfYnJvYWRjYXN0T3JpZ2luID09PSBudWxsKSB7XG4gICAgX2Jyb2FkY2FzdE9yaWdpbiA9IHVuaXF1ZUlkKCk7XG4gIH1cbiAgcmV0dXJuIF9icm9hZGNhc3RPcmlnaW47XG59XG5jb25zdCBicm9hZGNhc3RFdmVudEtleSA9IFwidGxkcmF3LXVzZXItcHJlZmVyZW5jZXMtY2hhbmdlXCI7XG5mdW5jdGlvbiBicm9hZGNhc3RVc2VyUHJlZmVyZW5jZXNDaGFuZ2UoKSB7XG4gIGNoYW5uZWw/LnBvc3RNZXNzYWdlKHtcbiAgICB0eXBlOiBicm9hZGNhc3RFdmVudEtleSxcbiAgICBvcmlnaW46IGdldEJyb2FkY2FzdE9yaWdpbigpLFxuICAgIGRhdGE6IHtcbiAgICAgIHVzZXI6IGdldFVzZXJQcmVmZXJlbmNlcygpLFxuICAgICAgdmVyc2lvbjogQ1VSUkVOVF9WRVJTSU9OXG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldFVzZXJQcmVmZXJlbmNlcygpIHtcbiAgbGV0IHByZWZzID0gZ2xvYmFsVXNlclByZWZlcmVuY2VzLmdldCgpO1xuICBpZiAoIXByZWZzKSB7XG4gICAgcHJlZnMgPSBsb2FkVXNlclByZWZlcmVuY2VzKCk7XG4gICAgZ2xvYmFsVXNlclByZWZlcmVuY2VzLnNldChwcmVmcyk7XG4gIH1cbiAgcmV0dXJuIHByZWZzO1xufVxuZXhwb3J0IHtcbiAgVVNFUl9DT0xPUlMsXG4gIGRlZmF1bHRVc2VyUHJlZmVyZW5jZXMsXG4gIGdldEZyZXNoVXNlclByZWZlcmVuY2VzLFxuICBnZXRVc2VyUHJlZmVyZW5jZXMsXG4gIHNldFVzZXJQcmVmZXJlbmNlcyxcbiAgdXNlclByZWZlcnNEYXJrVUksXG4gIHVzZXJQcmVmZXJzUmVkdWNlZE1vdGlvblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMVXNlclByZWZlcmVuY2VzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLUserPreferences.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLStore.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/createTLStore.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTLStore: () => (/* binding */ createTLStore)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _defaultBindings_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./defaultBindings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultBindings.mjs\");\n/* harmony import */ var _defaultShapes_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./defaultShapes.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultShapes.mjs\");\n\n\n\n\nfunction createTLStore({\n  initialData,\n  defaultName = \"\",\n  id,\n  ...rest\n} = {}) {\n  const schema = \"schema\" in rest && rest.schema ? (\n    // we have a schema\n    (rest.schema)\n  ) : (\n    // we need a schema\n    ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.createTLSchema)({\n      shapes: \"shapeUtils\" in rest && rest.shapeUtils ? utilsToMap((0,_defaultShapes_mjs__WEBPACK_IMPORTED_MODULE_3__.checkShapesAndAddCore)(rest.shapeUtils)) : void 0,\n      bindings: \"bindingUtils\" in rest && rest.bindingUtils ? utilsToMap((0,_defaultBindings_mjs__WEBPACK_IMPORTED_MODULE_2__.checkBindings)(rest.bindingUtils)) : void 0,\n      migrations: \"migrations\" in rest ? rest.migrations : void 0\n    }))\n  );\n  return new _tldraw_store__WEBPACK_IMPORTED_MODULE_0__.Store({\n    id,\n    schema,\n    initialData,\n    props: {\n      defaultName\n    }\n  });\n}\nfunction utilsToMap(utils) {\n  return Object.fromEntries(\n    utils.map((s) => [\n      s.type,\n      {\n        props: s.props,\n        migrations: s.migrations\n      }\n    ])\n  );\n}\n\n//# sourceMappingURL=createTLStore.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9jcmVhdGVUTFN0b3JlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzQztBQUNZO0FBQ0k7QUFDTTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxJQUFJO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssZ0VBQWM7QUFDbkIsbUVBQW1FLHlFQUFxQjtBQUN4Rix5RUFBeUUsbUVBQWE7QUFDdEY7QUFDQSxLQUFLO0FBQ0w7QUFDQSxhQUFhLGdEQUFLO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb25maWcvY3JlYXRlVExTdG9yZS5tanM/N2YwMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdG9yZSB9IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBjcmVhdGVUTFNjaGVtYSB9IGZyb20gXCJAdGxkcmF3L3Rsc2NoZW1hXCI7XG5pbXBvcnQgeyBjaGVja0JpbmRpbmdzIH0gZnJvbSBcIi4vZGVmYXVsdEJpbmRpbmdzLm1qc1wiO1xuaW1wb3J0IHsgY2hlY2tTaGFwZXNBbmRBZGRDb3JlIH0gZnJvbSBcIi4vZGVmYXVsdFNoYXBlcy5tanNcIjtcbmZ1bmN0aW9uIGNyZWF0ZVRMU3RvcmUoe1xuICBpbml0aWFsRGF0YSxcbiAgZGVmYXVsdE5hbWUgPSBcIlwiLFxuICBpZCxcbiAgLi4ucmVzdFxufSA9IHt9KSB7XG4gIGNvbnN0IHNjaGVtYSA9IFwic2NoZW1hXCIgaW4gcmVzdCAmJiByZXN0LnNjaGVtYSA/IChcbiAgICAvLyB3ZSBoYXZlIGEgc2NoZW1hXG4gICAgKHJlc3Quc2NoZW1hKVxuICApIDogKFxuICAgIC8vIHdlIG5lZWQgYSBzY2hlbWFcbiAgICAoY3JlYXRlVExTY2hlbWEoe1xuICAgICAgc2hhcGVzOiBcInNoYXBlVXRpbHNcIiBpbiByZXN0ICYmIHJlc3Quc2hhcGVVdGlscyA/IHV0aWxzVG9NYXAoY2hlY2tTaGFwZXNBbmRBZGRDb3JlKHJlc3Quc2hhcGVVdGlscykpIDogdm9pZCAwLFxuICAgICAgYmluZGluZ3M6IFwiYmluZGluZ1V0aWxzXCIgaW4gcmVzdCAmJiByZXN0LmJpbmRpbmdVdGlscyA/IHV0aWxzVG9NYXAoY2hlY2tCaW5kaW5ncyhyZXN0LmJpbmRpbmdVdGlscykpIDogdm9pZCAwLFxuICAgICAgbWlncmF0aW9uczogXCJtaWdyYXRpb25zXCIgaW4gcmVzdCA/IHJlc3QubWlncmF0aW9ucyA6IHZvaWQgMFxuICAgIH0pKVxuICApO1xuICByZXR1cm4gbmV3IFN0b3JlKHtcbiAgICBpZCxcbiAgICBzY2hlbWEsXG4gICAgaW5pdGlhbERhdGEsXG4gICAgcHJvcHM6IHtcbiAgICAgIGRlZmF1bHROYW1lXG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIHV0aWxzVG9NYXAodXRpbHMpIHtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhcbiAgICB1dGlscy5tYXAoKHMpID0+IFtcbiAgICAgIHMudHlwZSxcbiAgICAgIHtcbiAgICAgICAgcHJvcHM6IHMucHJvcHMsXG4gICAgICAgIG1pZ3JhdGlvbnM6IHMubWlncmF0aW9uc1xuICAgICAgfVxuICAgIF0pXG4gICk7XG59XG5leHBvcnQge1xuICBjcmVhdGVUTFN0b3JlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlVExTdG9yZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLStore.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLUser.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/createTLUser.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTLUser: () => (/* binding */ createTLUser)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TLUserPreferences.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLUserPreferences.mjs\");\n\n\nfunction createTLUser(opts = {}) {\n  return {\n    derivePresenceState: opts.derivePresenceState ?? (() => (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"presence\", () => null)),\n    userPreferences: opts.userPreferences ?? (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"userPreferences\", () => (0,_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.getUserPreferences)()),\n    setUserPreferences: opts.setUserPreferences ?? _TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.setUserPreferences\n  };\n}\n\n//# sourceMappingURL=createTLUser.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9jcmVhdGVUTFVzZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5QztBQUN3QztBQUNqRiwrQkFBK0I7QUFDL0I7QUFDQSw0REFBNEQsdURBQVE7QUFDcEUsNkNBQTZDLHVEQUFRLDBCQUEwQiwwRUFBa0I7QUFDakcsbURBQW1ELHNFQUFrQjtBQUNyRTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29uZmlnL2NyZWF0ZVRMVXNlci5tanM/OTJiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyBnZXRVc2VyUHJlZmVyZW5jZXMsIHNldFVzZXJQcmVmZXJlbmNlcyB9IGZyb20gXCIuL1RMVXNlclByZWZlcmVuY2VzLm1qc1wiO1xuZnVuY3Rpb24gY3JlYXRlVExVc2VyKG9wdHMgPSB7fSkge1xuICByZXR1cm4ge1xuICAgIGRlcml2ZVByZXNlbmNlU3RhdGU6IG9wdHMuZGVyaXZlUHJlc2VuY2VTdGF0ZSA/PyAoKCkgPT4gY29tcHV0ZWQoXCJwcmVzZW5jZVwiLCAoKSA9PiBudWxsKSksXG4gICAgdXNlclByZWZlcmVuY2VzOiBvcHRzLnVzZXJQcmVmZXJlbmNlcyA/PyBjb21wdXRlZChcInVzZXJQcmVmZXJlbmNlc1wiLCAoKSA9PiBnZXRVc2VyUHJlZmVyZW5jZXMoKSksXG4gICAgc2V0VXNlclByZWZlcmVuY2VzOiBvcHRzLnNldFVzZXJQcmVmZXJlbmNlcyA/PyBzZXRVc2VyUHJlZmVyZW5jZXNcbiAgfTtcbn1cbmV4cG9ydCB7XG4gIGNyZWF0ZVRMVXNlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZVRMVXNlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLUser.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultBindings.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/defaultBindings.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkBindings: () => (/* binding */ checkBindings)\n/* harmony export */ });\nfunction checkBindings(customBindings) {\n  const bindings = [];\n  const addedCustomBindingTypes = /* @__PURE__ */ new Set();\n  for (const customBinding of customBindings) {\n    if (addedCustomBindingTypes.has(customBinding.type)) {\n      throw new Error(`Binding type \"${customBinding.type}\" is defined more than once`);\n    }\n    bindings.push(customBinding);\n    addedCustomBindingTypes.add(customBinding.type);\n  }\n  return bindings;\n}\n\n//# sourceMappingURL=defaultBindings.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9kZWZhdWx0QmluZGluZ3MubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLG1CQUFtQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb25maWcvZGVmYXVsdEJpbmRpbmdzLm1qcz8wYWUyIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGNoZWNrQmluZGluZ3MoY3VzdG9tQmluZGluZ3MpIHtcbiAgY29uc3QgYmluZGluZ3MgPSBbXTtcbiAgY29uc3QgYWRkZWRDdXN0b21CaW5kaW5nVHlwZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBmb3IgKGNvbnN0IGN1c3RvbUJpbmRpbmcgb2YgY3VzdG9tQmluZGluZ3MpIHtcbiAgICBpZiAoYWRkZWRDdXN0b21CaW5kaW5nVHlwZXMuaGFzKGN1c3RvbUJpbmRpbmcudHlwZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQmluZGluZyB0eXBlIFwiJHtjdXN0b21CaW5kaW5nLnR5cGV9XCIgaXMgZGVmaW5lZCBtb3JlIHRoYW4gb25jZWApO1xuICAgIH1cbiAgICBiaW5kaW5ncy5wdXNoKGN1c3RvbUJpbmRpbmcpO1xuICAgIGFkZGVkQ3VzdG9tQmluZGluZ1R5cGVzLmFkZChjdXN0b21CaW5kaW5nLnR5cGUpO1xuICB9XG4gIHJldHVybiBiaW5kaW5ncztcbn1cbmV4cG9ydCB7XG4gIGNoZWNrQmluZGluZ3Ncbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0QmluZGluZ3MubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultBindings.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultShapes.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/config/defaultShapes.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkShapesAndAddCore: () => (/* binding */ checkShapesAndAddCore),\n/* harmony export */   coreShapes: () => (/* binding */ coreShapes)\n/* harmony export */ });\n/* harmony import */ var _editor_shapes_group_GroupShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../editor/shapes/group/GroupShapeUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/GroupShapeUtil.mjs\");\n\nconst coreShapes = [\n  // created by grouping interactions, probably the corest core shape that we have\n  _editor_shapes_group_GroupShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_0__.GroupShapeUtil\n];\nconst coreShapeTypes = new Set(coreShapes.map((s) => s.type));\nfunction checkShapesAndAddCore(customShapes) {\n  const shapes = [...coreShapes];\n  const addedCustomShapeTypes = /* @__PURE__ */ new Set();\n  for (const customShape of customShapes) {\n    if (coreShapeTypes.has(customShape.type)) {\n      throw new Error(\n        `Shape type \"${customShape.type}\" is a core shapes type and cannot be overridden`\n      );\n    }\n    if (addedCustomShapeTypes.has(customShape.type)) {\n      throw new Error(`Shape type \"${customShape.type}\" is defined more than once`);\n    }\n    shapes.push(customShape);\n    addedCustomShapeTypes.add(customShape.type);\n  }\n  return shapes;\n}\n\n//# sourceMappingURL=defaultShapes.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbmZpZy9kZWZhdWx0U2hhcGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkU7QUFDM0U7QUFDQTtBQUNBLEVBQUUsbUZBQWM7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixpQkFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGlCQUFpQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9jb25maWcvZGVmYXVsdFNoYXBlcy5tanM/OWUwYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHcm91cFNoYXBlVXRpbCB9IGZyb20gXCIuLi9lZGl0b3Ivc2hhcGVzL2dyb3VwL0dyb3VwU2hhcGVVdGlsLm1qc1wiO1xuY29uc3QgY29yZVNoYXBlcyA9IFtcbiAgLy8gY3JlYXRlZCBieSBncm91cGluZyBpbnRlcmFjdGlvbnMsIHByb2JhYmx5IHRoZSBjb3Jlc3QgY29yZSBzaGFwZSB0aGF0IHdlIGhhdmVcbiAgR3JvdXBTaGFwZVV0aWxcbl07XG5jb25zdCBjb3JlU2hhcGVUeXBlcyA9IG5ldyBTZXQoY29yZVNoYXBlcy5tYXAoKHMpID0+IHMudHlwZSkpO1xuZnVuY3Rpb24gY2hlY2tTaGFwZXNBbmRBZGRDb3JlKGN1c3RvbVNoYXBlcykge1xuICBjb25zdCBzaGFwZXMgPSBbLi4uY29yZVNoYXBlc107XG4gIGNvbnN0IGFkZGVkQ3VzdG9tU2hhcGVUeXBlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGZvciAoY29uc3QgY3VzdG9tU2hhcGUgb2YgY3VzdG9tU2hhcGVzKSB7XG4gICAgaWYgKGNvcmVTaGFwZVR5cGVzLmhhcyhjdXN0b21TaGFwZS50eXBlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgU2hhcGUgdHlwZSBcIiR7Y3VzdG9tU2hhcGUudHlwZX1cIiBpcyBhIGNvcmUgc2hhcGVzIHR5cGUgYW5kIGNhbm5vdCBiZSBvdmVycmlkZGVuYFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGFkZGVkQ3VzdG9tU2hhcGVUeXBlcy5oYXMoY3VzdG9tU2hhcGUudHlwZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU2hhcGUgdHlwZSBcIiR7Y3VzdG9tU2hhcGUudHlwZX1cIiBpcyBkZWZpbmVkIG1vcmUgdGhhbiBvbmNlYCk7XG4gICAgfVxuICAgIHNoYXBlcy5wdXNoKGN1c3RvbVNoYXBlKTtcbiAgICBhZGRlZEN1c3RvbVNoYXBlVHlwZXMuYWRkKGN1c3RvbVNoYXBlLnR5cGUpO1xuICB9XG4gIHJldHVybiBzaGFwZXM7XG59XG5leHBvcnQge1xuICBjaGVja1NoYXBlc0FuZEFkZENvcmUsXG4gIGNvcmVTaGFwZXNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0U2hhcGVzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultShapes.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_ANIMATION_OPTIONS: () => (/* binding */ DEFAULT_ANIMATION_OPTIONS),\n/* harmony export */   DEFAULT_CAMERA_OPTIONS: () => (/* binding */ DEFAULT_CAMERA_OPTIONS),\n/* harmony export */   INTERNAL_POINTER_IDS: () => (/* binding */ INTERNAL_POINTER_IDS),\n/* harmony export */   LEFT_MOUSE_BUTTON: () => (/* binding */ LEFT_MOUSE_BUTTON),\n/* harmony export */   MIDDLE_MOUSE_BUTTON: () => (/* binding */ MIDDLE_MOUSE_BUTTON),\n/* harmony export */   RIGHT_MOUSE_BUTTON: () => (/* binding */ RIGHT_MOUSE_BUTTON),\n/* harmony export */   SIDES: () => (/* binding */ SIDES),\n/* harmony export */   STYLUS_ERASER_BUTTON: () => (/* binding */ STYLUS_ERASER_BUTTON),\n/* harmony export */   ZOOM_TO_FIT_PADDING: () => (/* binding */ ZOOM_TO_FIT_PADDING)\n/* harmony export */ });\n/* harmony import */ var _primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./primitives/easings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs\");\n\nconst DEFAULT_CAMERA_OPTIONS = {\n  isLocked: false,\n  wheelBehavior: \"pan\",\n  panSpeed: 1,\n  zoomSpeed: 1,\n  zoomSteps: [0.1, 0.25, 0.5, 1, 2, 4, 8]\n};\nconst DEFAULT_ANIMATION_OPTIONS = {\n  duration: 0,\n  easing: _primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_0__.EASINGS.easeInOutCubic\n};\nconst INTERNAL_POINTER_IDS = {\n  CAMERA_MOVE: -10\n};\nconst SIDES = [\"top\", \"right\", \"bottom\", \"left\"];\nconst LEFT_MOUSE_BUTTON = 0;\nconst RIGHT_MOUSE_BUTTON = 2;\nconst MIDDLE_MOUSE_BUTTON = 1;\nconst STYLUS_ERASER_BUTTON = 5;\nconst ZOOM_TO_FIT_PADDING = 128;\n\n//# sourceMappingURL=constants.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2NvbnN0YW50cy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDREQUFPO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvY29uc3RhbnRzLm1qcz9mOWFmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVBU0lOR1MgfSBmcm9tIFwiLi9wcmltaXRpdmVzL2Vhc2luZ3MubWpzXCI7XG5jb25zdCBERUZBVUxUX0NBTUVSQV9PUFRJT05TID0ge1xuICBpc0xvY2tlZDogZmFsc2UsXG4gIHdoZWVsQmVoYXZpb3I6IFwicGFuXCIsXG4gIHBhblNwZWVkOiAxLFxuICB6b29tU3BlZWQ6IDEsXG4gIHpvb21TdGVwczogWzAuMSwgMC4yNSwgMC41LCAxLCAyLCA0LCA4XVxufTtcbmNvbnN0IERFRkFVTFRfQU5JTUFUSU9OX09QVElPTlMgPSB7XG4gIGR1cmF0aW9uOiAwLFxuICBlYXNpbmc6IEVBU0lOR1MuZWFzZUluT3V0Q3ViaWNcbn07XG5jb25zdCBJTlRFUk5BTF9QT0lOVEVSX0lEUyA9IHtcbiAgQ0FNRVJBX01PVkU6IC0xMFxufTtcbmNvbnN0IFNJREVTID0gW1widG9wXCIsIFwicmlnaHRcIiwgXCJib3R0b21cIiwgXCJsZWZ0XCJdO1xuY29uc3QgTEVGVF9NT1VTRV9CVVRUT04gPSAwO1xuY29uc3QgUklHSFRfTU9VU0VfQlVUVE9OID0gMjtcbmNvbnN0IE1JRERMRV9NT1VTRV9CVVRUT04gPSAxO1xuY29uc3QgU1RZTFVTX0VSQVNFUl9CVVRUT04gPSA1O1xuY29uc3QgWk9PTV9UT19GSVRfUEFERElORyA9IDEyODtcbmV4cG9ydCB7XG4gIERFRkFVTFRfQU5JTUFUSU9OX09QVElPTlMsXG4gIERFRkFVTFRfQ0FNRVJBX09QVElPTlMsXG4gIElOVEVSTkFMX1BPSU5URVJfSURTLFxuICBMRUZUX01PVVNFX0JVVFRPTixcbiAgTUlERExFX01PVVNFX0JVVFRPTixcbiAgUklHSFRfTU9VU0VfQlVUVE9OLFxuICBTSURFUyxcbiAgU1RZTFVTX0VSQVNFUl9CVVRUT04sXG4gIFpPT01fVE9fRklUX1BBRERJTkdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25zdGFudHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/Editor.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/Editor.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Editor: () => (/* binding */ Editor)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! eventemitter3 */ \"(ssr)/./node_modules/eventemitter3/index.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-dom.js\");\n/* harmony import */ var react_dom_client__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-dom/client */ \"(ssr)/./node_modules/next/dist/compiled/react-dom/client.js\");\n/* harmony import */ var _config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../config/TLEditorSnapshot.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLEditorSnapshot.mjs\");\n/* harmony import */ var _config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../config/createTLUser.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLUser.mjs\");\n/* harmony import */ var _config_defaultBindings_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../config/defaultBindings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultBindings.mjs\");\n/* harmony import */ var _config_defaultShapes_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../config/defaultShapes.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/defaultShapes.mjs\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _options_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../options.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/options.mjs\");\n/* harmony import */ var _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../primitives/Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../primitives/easings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs\");\n/* harmony import */ var _primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../primitives/geometry/Group2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs\");\n/* harmony import */ var _primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../primitives/intersect.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _utils_SharedStylesMap_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../utils/SharedStylesMap.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/SharedStylesMap.mjs\");\n/* harmony import */ var _utils_assets_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../utils/assets.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/assets.mjs\");\n/* harmony import */ var _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../utils/debug-flags.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\");\n/* harmony import */ var _utils_getIncrementedName_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../utils/getIncrementedName.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getIncrementedName.mjs\");\n/* harmony import */ var _utils_reorderShapes_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../utils/reorderShapes.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/reorderShapes.mjs\");\n/* harmony import */ var _utils_rotation_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../utils/rotation.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/rotation.mjs\");\n/* harmony import */ var _utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../utils/uniqueId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs\");\n/* harmony import */ var _derivations_bindingsIndex_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./derivations/bindingsIndex.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/bindingsIndex.mjs\");\n/* harmony import */ var _derivations_notVisibleShapes_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./derivations/notVisibleShapes.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/notVisibleShapes.mjs\");\n/* harmony import */ var _derivations_parentsToChildren_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./derivations/parentsToChildren.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/parentsToChildren.mjs\");\n/* harmony import */ var _derivations_shapeIdsInCurrentPage_mjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./derivations/shapeIdsInCurrentPage.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/shapeIdsInCurrentPage.mjs\");\n/* harmony import */ var _getSvgJsx_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./getSvgJsx.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/getSvgJsx.mjs\");\n/* harmony import */ var _managers_ClickManager_mjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./managers/ClickManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ClickManager.mjs\");\n/* harmony import */ var _managers_EnvironmentManager_mjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./managers/EnvironmentManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/EnvironmentManager.mjs\");\n/* harmony import */ var _managers_FocusManager_mjs__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./managers/FocusManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/FocusManager.mjs\");\n/* harmony import */ var _managers_HistoryManager_mjs__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./managers/HistoryManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/HistoryManager.mjs\");\n/* harmony import */ var _managers_ScribbleManager_mjs__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./managers/ScribbleManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ScribbleManager.mjs\");\n/* harmony import */ var _managers_SnapManager_SnapManager_mjs__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./managers/SnapManager/SnapManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/SnapManager.mjs\");\n/* harmony import */ var _managers_TextManager_mjs__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./managers/TextManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TextManager.mjs\");\n/* harmony import */ var _managers_TickManager_mjs__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./managers/TickManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TickManager.mjs\");\n/* harmony import */ var _managers_UserPreferencesManager_mjs__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./managers/UserPreferencesManager.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/UserPreferencesManager.mjs\");\n/* harmony import */ var _tools_RootState_mjs__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./tools/RootState.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/RootState.mjs\");\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass Editor extends eventemitter3__WEBPACK_IMPORTED_MODULE_4__ {\n  constructor({\n    store,\n    user,\n    shapeUtils,\n    bindingUtils,\n    tools,\n    getContainer,\n    cameraOptions,\n    initialState,\n    autoFocus,\n    inferDarkMode,\n    options\n  }) {\n    super();\n    this.options = { ..._options_mjs__WEBPACK_IMPORTED_MODULE_12__.defaultTldrawOptions, ...options };\n    this.store = store;\n    this.history = new _managers_HistoryManager_mjs__WEBPACK_IMPORTED_MODULE_35__.HistoryManager({\n      store,\n      annotateError: (error) => {\n        this.annotateError(error, { origin: \"history.batch\", willCrashApp: true });\n        this.crash(error);\n      }\n    });\n    this.snaps = new _managers_SnapManager_SnapManager_mjs__WEBPACK_IMPORTED_MODULE_37__.SnapManager(this);\n    this.timers = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Timers();\n    this.disposables.add(this.timers.dispose.bind(this.timers));\n    this._cameraOptions.set({ ..._constants_mjs__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_CAMERA_OPTIONS, ...cameraOptions });\n    this.user = new _managers_UserPreferencesManager_mjs__WEBPACK_IMPORTED_MODULE_40__.UserPreferencesManager(user ?? (0,_config_createTLUser_mjs__WEBPACK_IMPORTED_MODULE_8__.createTLUser)(), inferDarkMode ?? false);\n    this.getContainer = getContainer ?? (() => document.body);\n    this.textMeasure = new _managers_TextManager_mjs__WEBPACK_IMPORTED_MODULE_38__.TextManager(this);\n    this._tickManager = new _managers_TickManager_mjs__WEBPACK_IMPORTED_MODULE_39__.TickManager(this);\n    class NewRoot extends _tools_RootState_mjs__WEBPACK_IMPORTED_MODULE_41__.RootState {\n      static initial = initialState ?? \"\";\n    }\n    this.root = new NewRoot(this);\n    this.root.children = {};\n    const allShapeUtils = (0,_config_defaultShapes_mjs__WEBPACK_IMPORTED_MODULE_10__.checkShapesAndAddCore)(shapeUtils);\n    const _shapeUtils = {};\n    const _styleProps = {};\n    const allStylesById = /* @__PURE__ */ new Map();\n    for (const Util of allShapeUtils) {\n      const util = new Util(this);\n      _shapeUtils[Util.type] = util;\n      const propKeysByStyle = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.getShapePropKeysByStyle)(Util.props ?? {});\n      _styleProps[Util.type] = propKeysByStyle;\n      for (const style of propKeysByStyle.keys()) {\n        if (!allStylesById.has(style.id)) {\n          allStylesById.set(style.id, style);\n        } else if (allStylesById.get(style.id) !== style) {\n          throw Error(\n            `Multiple style props with id \"${style.id}\" in use. Style prop IDs must be unique.`\n          );\n        }\n      }\n    }\n    this.shapeUtils = _shapeUtils;\n    this.styleProps = _styleProps;\n    const allBindingUtils = (0,_config_defaultBindings_mjs__WEBPACK_IMPORTED_MODULE_9__.checkBindings)(bindingUtils);\n    const _bindingUtils = {};\n    for (const Util of allBindingUtils) {\n      const util = new Util(this);\n      _bindingUtils[Util.type] = util;\n    }\n    this.bindingUtils = _bindingUtils;\n    for (const Tool of [...tools]) {\n      if ((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.hasOwnProperty)(this.root.children, Tool.id)) {\n        throw Error(`Can't override tool with id \"${Tool.id}\"`);\n      }\n      this.root.children[Tool.id] = new Tool(this, this.root);\n    }\n    this.environment = new _managers_EnvironmentManager_mjs__WEBPACK_IMPORTED_MODULE_33__.EnvironmentManager(this);\n    this.scribbles = new _managers_ScribbleManager_mjs__WEBPACK_IMPORTED_MODULE_36__.ScribbleManager(this);\n    const cleanupInstancePageState = (prevPageState, shapesNoLongerInPage) => {\n      let nextPageState = null;\n      const selectedShapeIds = prevPageState.selectedShapeIds.filter(\n        (id) => !shapesNoLongerInPage.has(id)\n      );\n      if (selectedShapeIds.length !== prevPageState.selectedShapeIds.length) {\n        if (!nextPageState)\n          nextPageState = { ...prevPageState };\n        nextPageState.selectedShapeIds = selectedShapeIds;\n      }\n      const erasingShapeIds = prevPageState.erasingShapeIds.filter(\n        (id) => !shapesNoLongerInPage.has(id)\n      );\n      if (erasingShapeIds.length !== prevPageState.erasingShapeIds.length) {\n        if (!nextPageState)\n          nextPageState = { ...prevPageState };\n        nextPageState.erasingShapeIds = erasingShapeIds;\n      }\n      if (prevPageState.hoveredShapeId && shapesNoLongerInPage.has(prevPageState.hoveredShapeId)) {\n        if (!nextPageState)\n          nextPageState = { ...prevPageState };\n        nextPageState.hoveredShapeId = null;\n      }\n      if (prevPageState.editingShapeId && shapesNoLongerInPage.has(prevPageState.editingShapeId)) {\n        if (!nextPageState)\n          nextPageState = { ...prevPageState };\n        nextPageState.editingShapeId = null;\n      }\n      const hintingShapeIds = prevPageState.hintingShapeIds.filter(\n        (id) => !shapesNoLongerInPage.has(id)\n      );\n      if (hintingShapeIds.length !== prevPageState.hintingShapeIds.length) {\n        if (!nextPageState)\n          nextPageState = { ...prevPageState };\n        nextPageState.hintingShapeIds = hintingShapeIds;\n      }\n      if (prevPageState.focusedGroupId && shapesNoLongerInPage.has(prevPageState.focusedGroupId)) {\n        if (!nextPageState)\n          nextPageState = { ...prevPageState };\n        nextPageState.focusedGroupId = null;\n      }\n      return nextPageState;\n    };\n    this.sideEffects = this.store.sideEffects;\n    let deletedBindings = /* @__PURE__ */ new Map();\n    const deletedShapeIds = /* @__PURE__ */ new Set();\n    const invalidParents = /* @__PURE__ */ new Set();\n    let invalidBindingTypes = /* @__PURE__ */ new Set();\n    this.disposables.add(\n      this.sideEffects.registerOperationCompleteHandler(() => {\n        deletedShapeIds.clear();\n        for (const parentId of invalidParents) {\n          invalidParents.delete(parentId);\n          const parent = this.getShape(parentId);\n          if (!parent)\n            continue;\n          const util = this.getShapeUtil(parent);\n          const changes = util.onChildrenChange?.(parent);\n          if (changes?.length) {\n            this.updateShapes(changes);\n          }\n        }\n        if (invalidBindingTypes.size) {\n          const t = invalidBindingTypes;\n          invalidBindingTypes = /* @__PURE__ */ new Set();\n          for (const type of t) {\n            const util = this.getBindingUtil(type);\n            util.onOperationComplete?.();\n          }\n        }\n        if (deletedBindings.size) {\n          const t = deletedBindings;\n          deletedBindings = /* @__PURE__ */ new Map();\n          for (const opts of t.values()) {\n            this.getBindingUtil(opts.binding).onAfterDelete?.(opts);\n          }\n        }\n        this.emit(\"update\");\n      })\n    );\n    this.disposables.add(\n      this.sideEffects.register({\n        shape: {\n          afterChange: (shapeBefore, shapeAfter) => {\n            for (const binding of this.getBindingsInvolvingShape(shapeAfter)) {\n              invalidBindingTypes.add(binding.type);\n              if (binding.fromId === shapeAfter.id) {\n                this.getBindingUtil(binding).onAfterChangeFromShape?.({\n                  binding,\n                  shapeBefore,\n                  shapeAfter\n                });\n              }\n              if (binding.toId === shapeAfter.id) {\n                this.getBindingUtil(binding).onAfterChangeToShape?.({\n                  binding,\n                  shapeBefore,\n                  shapeAfter\n                });\n              }\n            }\n            if (shapeBefore.parentId !== shapeAfter.parentId) {\n              const notifyBindingAncestryChange = (id) => {\n                const descendantShape = this.getShape(id);\n                if (!descendantShape)\n                  return;\n                for (const binding of this.getBindingsInvolvingShape(descendantShape)) {\n                  invalidBindingTypes.add(binding.type);\n                  if (binding.fromId === descendantShape.id) {\n                    this.getBindingUtil(binding).onAfterChangeFromShape?.({\n                      binding,\n                      shapeBefore: descendantShape,\n                      shapeAfter: descendantShape\n                    });\n                  }\n                  if (binding.toId === descendantShape.id) {\n                    this.getBindingUtil(binding).onAfterChangeToShape?.({\n                      binding,\n                      shapeBefore: descendantShape,\n                      shapeAfter: descendantShape\n                    });\n                  }\n                }\n              };\n              notifyBindingAncestryChange(shapeAfter.id);\n              this.visitDescendants(shapeAfter.id, notifyBindingAncestryChange);\n            }\n            if (shapeBefore.parentId !== shapeAfter.parentId && (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(shapeAfter.parentId)) {\n              const allMovingIds = /* @__PURE__ */ new Set([shapeBefore.id]);\n              this.visitDescendants(shapeBefore.id, (id) => {\n                allMovingIds.add(id);\n              });\n              for (const instancePageState of this.getPageStates()) {\n                if (instancePageState.pageId === shapeAfter.parentId)\n                  continue;\n                const nextPageState = cleanupInstancePageState(instancePageState, allMovingIds);\n                if (nextPageState) {\n                  this.store.put([nextPageState]);\n                }\n              }\n            }\n            if (shapeBefore.parentId && (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(shapeBefore.parentId)) {\n              invalidParents.add(shapeBefore.parentId);\n            }\n            if (shapeAfter.parentId !== shapeBefore.parentId && (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(shapeAfter.parentId)) {\n              invalidParents.add(shapeAfter.parentId);\n            }\n          },\n          beforeDelete: (shape) => {\n            if (deletedShapeIds.has(shape.id))\n              return;\n            if (shape.parentId && (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(shape.parentId)) {\n              invalidParents.add(shape.parentId);\n            }\n            deletedShapeIds.add(shape.id);\n            const deleteBindingIds = [];\n            for (const binding of this.getBindingsInvolvingShape(shape)) {\n              invalidBindingTypes.add(binding.type);\n              deleteBindingIds.push(binding.id);\n              const util = this.getBindingUtil(binding);\n              if (binding.fromId === shape.id) {\n                util.onBeforeIsolateToShape?.({ binding, removedShape: shape });\n                util.onBeforeDeleteFromShape?.({ binding, shape });\n              } else {\n                util.onBeforeIsolateFromShape?.({ binding, removedShape: shape });\n                util.onBeforeDeleteToShape?.({ binding, shape });\n              }\n            }\n            if (deleteBindingIds.length) {\n              this.deleteBindings(deleteBindingIds);\n            }\n            const deletedIds = /* @__PURE__ */ new Set([shape.id]);\n            const updates = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(\n              this.getPageStates().map((pageState) => {\n                return cleanupInstancePageState(pageState, deletedIds);\n              })\n            );\n            if (updates.length) {\n              this.store.put(updates);\n            }\n          }\n        },\n        binding: {\n          beforeCreate: (binding) => {\n            const next = this.getBindingUtil(binding).onBeforeCreate?.({ binding });\n            if (next)\n              return next;\n            return binding;\n          },\n          afterCreate: (binding) => {\n            invalidBindingTypes.add(binding.type);\n            this.getBindingUtil(binding).onAfterCreate?.({ binding });\n          },\n          beforeChange: (bindingBefore, bindingAfter) => {\n            const updated = this.getBindingUtil(bindingAfter).onBeforeChange?.({\n              bindingBefore,\n              bindingAfter\n            });\n            if (updated)\n              return updated;\n            return bindingAfter;\n          },\n          afterChange: (bindingBefore, bindingAfter) => {\n            invalidBindingTypes.add(bindingAfter.type);\n            this.getBindingUtil(bindingAfter).onAfterChange?.({ bindingBefore, bindingAfter });\n          },\n          beforeDelete: (binding) => {\n            this.getBindingUtil(binding).onBeforeDelete?.({ binding });\n          },\n          afterDelete: (binding) => {\n            this.getBindingUtil(binding).onAfterDelete?.({ binding });\n            invalidBindingTypes.add(binding.type);\n          }\n        },\n        page: {\n          afterCreate: (record) => {\n            const cameraId = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.CameraRecordType.createId(record.id);\n            const _pageStateId = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.InstancePageStateRecordType.createId(record.id);\n            if (!this.store.has(cameraId)) {\n              this.store.put([_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.CameraRecordType.create({ id: cameraId })]);\n            }\n            if (!this.store.has(_pageStateId)) {\n              this.store.put([\n                _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.InstancePageStateRecordType.create({ id: _pageStateId, pageId: record.id })\n              ]);\n            }\n          },\n          afterDelete: (record, source) => {\n            if (this.getInstanceState()?.currentPageId === record.id) {\n              const backupPageId = this.getPages().find((p) => p.id !== record.id)?.id;\n              if (backupPageId) {\n                this.store.put([{ ...this.getInstanceState(), currentPageId: backupPageId }]);\n              } else if (source === \"user\") {\n                this.store.ensureStoreIsUsable();\n              }\n            }\n            const cameraId = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.CameraRecordType.createId(record.id);\n            const instance_PageStateId = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.InstancePageStateRecordType.createId(record.id);\n            this.store.remove([cameraId, instance_PageStateId]);\n          }\n        },\n        instance: {\n          afterChange: (prev, next, source) => {\n            if (!this.store.has(next.currentPageId)) {\n              const backupPageId = this.store.has(prev.currentPageId) ? prev.currentPageId : this.getPages()[0]?.id;\n              if (backupPageId) {\n                this.store.update(next.id, (instance) => ({\n                  ...instance,\n                  currentPageId: backupPageId\n                }));\n              } else if (source === \"user\") {\n                this.store.ensureStoreIsUsable();\n              }\n            }\n          }\n        },\n        instance_page_state: {\n          afterChange: (prev, next) => {\n            if (prev?.selectedShapeIds !== next?.selectedShapeIds) {\n              const filtered = next.selectedShapeIds.filter((id) => {\n                let parentId = this.getShape(id)?.parentId;\n                while ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(parentId)) {\n                  if (next.selectedShapeIds.includes(parentId)) {\n                    return false;\n                  }\n                  parentId = this.getShape(parentId)?.parentId;\n                }\n                return true;\n              });\n              let nextFocusedGroupId = null;\n              if (filtered.length > 0) {\n                const commonGroupAncestor = this.findCommonAncestor(\n                  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(filtered.map((id) => this.getShape(id))),\n                  (shape) => this.isShapeOfType(shape, \"group\")\n                );\n                if (commonGroupAncestor) {\n                  nextFocusedGroupId = commonGroupAncestor;\n                }\n              } else {\n                if (next?.focusedGroupId) {\n                  nextFocusedGroupId = next.focusedGroupId;\n                }\n              }\n              if (filtered.length !== next.selectedShapeIds.length || nextFocusedGroupId !== next.focusedGroupId) {\n                this.store.put([\n                  {\n                    ...next,\n                    selectedShapeIds: filtered,\n                    focusedGroupId: nextFocusedGroupId ?? null\n                  }\n                ]);\n              }\n            }\n          }\n        }\n      })\n    );\n    this._currentPageShapeIds = (0,_derivations_shapeIdsInCurrentPage_mjs__WEBPACK_IMPORTED_MODULE_30__.deriveShapeIdsInCurrentPage)(\n      this.store,\n      () => this.getCurrentPageId()\n    );\n    this._parentIdsToChildIds = (0,_derivations_parentsToChildren_mjs__WEBPACK_IMPORTED_MODULE_29__.parentsToChildren)(this.store);\n    this.disposables.add(\n      this.store.listen((changes) => {\n        this.emit(\"change\", changes);\n      })\n    );\n    this.disposables.add(this.history.dispose);\n    this.history.ignore(() => {\n      this.store.ensureStoreIsUsable();\n      this._updateCurrentPageState({\n        editingShapeId: null,\n        hoveredShapeId: null,\n        erasingShapeIds: []\n      });\n    });\n    if (initialState && this.root.children[initialState] === void 0) {\n      throw Error(`No state found for initialState \"${initialState}\".`);\n    }\n    this.root.enter(void 0, \"initial\");\n    this.focusManager = new _managers_FocusManager_mjs__WEBPACK_IMPORTED_MODULE_34__.FocusManager(this, autoFocus);\n    this.disposables.add(this.focusManager.dispose.bind(this.focusManager));\n    if (this.getInstanceState().followingUserId) {\n      this.stopFollowingUser();\n    }\n    this.on(\"tick\", this._flushEventsForTick);\n    this.timers.requestAnimationFrame(() => {\n      this._tickManager.start();\n    });\n    this.performanceTracker = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.PerformanceTracker();\n  }\n  options;\n  /**\n   * The editor's store\n   *\n   * @public\n   */\n  store;\n  /**\n   * The root state of the statechart.\n   *\n   * @public\n   */\n  root;\n  /**\n   * A set of functions to call when the app is disposed.\n   *\n   * @public\n   */\n  disposables = /* @__PURE__ */ new Set();\n  /** @internal */\n  _tickManager;\n  /**\n   * A manager for the app's snapping feature.\n   *\n   * @public\n   */\n  snaps;\n  /**\n   * A manager for the any asynchronous events and making sure they're\n   * cleaned up upon disposal.\n   *\n   * @public\n   */\n  timers;\n  /**\n   * A manager for the user and their preferences.\n   *\n   * @public\n   */\n  user;\n  /**\n   * A helper for measuring text.\n   *\n   * @public\n   */\n  textMeasure;\n  /**\n   * A manager for the editor's environment.\n   *\n   * @public\n   */\n  environment;\n  /**\n   * A manager for the editor's scribbles.\n   *\n   * @public\n   */\n  scribbles;\n  /**\n   * A manager for side effects and correct state enforcement. See {@link @tldraw/store#StoreSideEffects} for details.\n   *\n   * @public\n   */\n  sideEffects;\n  /**\n   * A manager for ensuring correct focus. See FocusManager for details.\n   *\n   * @internal\n   */\n  focusManager;\n  /**\n   * The current HTML element containing the editor.\n   *\n   * @example\n   * ```ts\n   * const container = editor.getContainer()\n   * ```\n   *\n   * @public\n   */\n  getContainer;\n  /**\n   * Dispose the editor.\n   *\n   * @public\n   */\n  dispose() {\n    this.disposables.forEach((dispose) => dispose());\n    this.disposables.clear();\n  }\n  /* ------------------- Shape Utils ------------------ */\n  /**\n   * A map of shape utility classes (TLShapeUtils) by shape type.\n   *\n   * @public\n   */\n  shapeUtils;\n  styleProps;\n  getShapeUtil(arg) {\n    const type = typeof arg === \"string\" ? arg : arg.type;\n    const shapeUtil = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getOwnProperty)(this.shapeUtils, type);\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assert)(shapeUtil, `No shape util found for type \"${type}\"`);\n    return shapeUtil;\n  }\n  /* ------------------- Binding Utils ------------------ */\n  /**\n   * A map of shape utility classes (TLShapeUtils) by shape type.\n   *\n   * @public\n   */\n  bindingUtils;\n  getBindingUtil(arg) {\n    const type = typeof arg === \"string\" ? arg : arg.type;\n    const bindingUtil = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getOwnProperty)(this.bindingUtils, type);\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assert)(bindingUtil, `No binding util found for type \"${type}\"`);\n    return bindingUtil;\n  }\n  /* --------------------- History -------------------- */\n  /**\n   * A manager for the app's history.\n   *\n   * @readonly\n   */\n  history;\n  /**\n   * Undo to the last mark.\n   *\n   * @example\n   * ```ts\n   * editor.undo()\n   * ```\n   *\n   * @public\n   */\n  undo() {\n    this._flushEventsForTick(0);\n    this.complete();\n    this.history.undo();\n    return this;\n  }\n  getCanUndo() {\n    return this.history.getNumUndos() > 0;\n  }\n  /**\n   * Redo to the next mark.\n   *\n   * @example\n   * ```ts\n   * editor.redo()\n   * ```\n   *\n   * @public\n   */\n  redo() {\n    this._flushEventsForTick(0);\n    this.complete();\n    this.history.redo();\n    return this;\n  }\n  getCanRedo() {\n    return this.history.getNumRedos() > 0;\n  }\n  /**\n   * Create a new \"mark\", or stopping point, in the undo redo history. Creating a mark will clear\n   * any redos.\n   *\n   * @example\n   * ```ts\n   * editor.mark()\n   * editor.mark('flip shapes')\n   * ```\n   *\n   * @param markId - The mark's id, usually the reason for adding the mark.\n   *\n   * @public\n   */\n  mark(markId) {\n    this.history.mark(markId);\n    return this;\n  }\n  /**\n   * Clear all marks in the undo stack back to the next mark.\n   *\n   * @example\n   * ```ts\n   * editor.bail()\n   * ```\n   *\n   * @public\n   */\n  bail() {\n    this.history.bail();\n    return this;\n  }\n  /**\n   * Clear all marks in the undo stack back to the mark with the provided mark id.\n   *\n   * @example\n   * ```ts\n   * editor.bailToMark('dragging')\n   * ```\n   *\n   * @public\n   */\n  bailToMark(id) {\n    this.history.bailToMark(id);\n    return this;\n  }\n  /**\n   * Run a function in a batch.\n   *\n   * @public\n   */\n  batch(fn, opts) {\n    this.history.batch(fn, opts);\n    return this;\n  }\n  /* --------------------- Errors --------------------- */\n  /** @internal */\n  annotateError(error, {\n    origin,\n    willCrashApp,\n    tags,\n    extras\n  }) {\n    const defaultAnnotations = this.createErrorAnnotations(origin, willCrashApp);\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.annotateError)(error, {\n      tags: { ...defaultAnnotations.tags, ...tags },\n      extras: { ...defaultAnnotations.extras, ...extras }\n    });\n    if (willCrashApp) {\n      this.store.markAsPossiblyCorrupted();\n    }\n    return this;\n  }\n  /** @internal */\n  createErrorAnnotations(origin, willCrashApp) {\n    try {\n      const editingShapeId = this.getEditingShapeId();\n      return {\n        tags: {\n          origin,\n          willCrashApp\n        },\n        extras: {\n          activeStateNode: this.root.getPath(),\n          selectedShapes: this.getSelectedShapes(),\n          editingShape: editingShapeId ? this.getShape(editingShapeId) : void 0,\n          inputs: this.inputs\n        }\n      };\n    } catch {\n      return {\n        tags: {\n          origin,\n          willCrashApp\n        },\n        extras: {}\n      };\n    }\n  }\n  /** @internal */\n  _crashingError = null;\n  /**\n   * We can't use an `atom` here because there's a chance that when `crashAndReportError` is called,\n   * we're in a transaction that's about to be rolled back due to the same error we're currently\n   * reporting.\n   *\n   * Instead, to listen to changes to this value, you need to listen to app's `crash` event.\n   *\n   * @internal\n   */\n  getCrashingError() {\n    return this._crashingError;\n  }\n  /** @internal */\n  crash(error) {\n    this._crashingError = error;\n    this.store.markAsPossiblyCorrupted();\n    this.emit(\"crash\", { error });\n    return this;\n  }\n  getPath() {\n    return this.root.getPath().split(\"root.\")[1];\n  }\n  /**\n   * Get whether a certain tool (or other state node) is currently active.\n   *\n   * @example\n   * ```ts\n   * editor.isIn('select')\n   * editor.isIn('select.brushing')\n   * ```\n   *\n   * @param path - The path of active states, separated by periods.\n   *\n   * @public\n   */\n  isIn(path) {\n    const ids = path.split(\".\").reverse();\n    let state = this.root;\n    while (ids.length > 0) {\n      const id = ids.pop();\n      if (!id)\n        return true;\n      const current = state.getCurrent();\n      if (current?.id === id) {\n        if (ids.length === 0)\n          return true;\n        state = current;\n        continue;\n      } else\n        return false;\n    }\n    return false;\n  }\n  /**\n   * Get whether the state node is in any of the given active paths.\n   *\n   * @example\n   * ```ts\n   * state.isInAny('select', 'erase')\n   * state.isInAny('select.brushing', 'erase.idle')\n   * ```\n   *\n   * @public\n   */\n  isInAny(...paths) {\n    return paths.some((path) => this.isIn(path));\n  }\n  /**\n   * Set the selected tool.\n   *\n   * @example\n   * ```ts\n   * editor.setCurrentTool('hand')\n   * editor.setCurrentTool('hand', { date: Date.now() })\n   * ```\n   *\n   * @param id - The id of the tool to select.\n   * @param info - Arbitrary data to pass along into the transition.\n   *\n   * @public\n   */\n  setCurrentTool(id, info = {}) {\n    this.root.transition(id, info);\n    return this;\n  }\n  getCurrentTool() {\n    return this.root.getCurrent();\n  }\n  getCurrentToolId() {\n    const currentTool = this.getCurrentTool();\n    if (!currentTool)\n      return \"\";\n    return currentTool.getCurrentToolIdMask() ?? currentTool.id;\n  }\n  /**\n   * Get a descendant by its path.\n   *\n   * @example\n   * ```ts\n   * state.getStateDescendant('select')\n   * state.getStateDescendant('select.brushing')\n   * ```\n   *\n   * @param path - The descendant's path of state ids, separated by periods.\n   *\n   * @public\n   */\n  getStateDescendant(path) {\n    const ids = path.split(\".\").reverse();\n    let state = this.root;\n    while (ids.length > 0) {\n      const id = ids.pop();\n      if (!id)\n        return state;\n      const childState = state.children?.[id];\n      if (!childState)\n        return void 0;\n      state = childState;\n    }\n    return state;\n  }\n  getDocumentSettings() {\n    return this.store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLDOCUMENT_ID);\n  }\n  /**\n   * Update the global document settings that apply to all users.\n   *\n   * @public\n   **/\n  updateDocumentSettings(settings) {\n    this.history.ignore(() => {\n      this.store.put([{ ...this.getDocumentSettings(), ...settings }]);\n    });\n    return this;\n  }\n  getInstanceState() {\n    return this.store.get(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n  }\n  /**\n   * Update the instance's state.\n   *\n   * @param partial - A partial object to update the instance state with.\n   *\n   * @public\n   */\n  updateInstanceState(partial, historyOptions) {\n    this._updateInstanceState(partial, { history: \"ignore\", ...historyOptions });\n    if (partial.isChangingStyle !== void 0) {\n      clearTimeout(this._isChangingStyleTimeout);\n      if (partial.isChangingStyle === true) {\n        this._isChangingStyleTimeout = this.timers.setTimeout(() => {\n          this._updateInstanceState({ isChangingStyle: false }, { history: \"ignore\" });\n        }, 2e3);\n      }\n    }\n    return this;\n  }\n  /** @internal */\n  _updateInstanceState = (partial, opts) => {\n    this.batch(() => {\n      this.store.put([\n        {\n          ...this.getInstanceState(),\n          ...partial\n        }\n      ]);\n    }, opts);\n  };\n  /** @internal */\n  _isChangingStyleTimeout = -1;\n  getOpenMenus() {\n    return this.getInstanceState().openMenus;\n  }\n  /**\n   * Add an open menu.\n   *\n   * @example\n   * ```ts\n   * editor.addOpenMenu('menu-id')\n   * ```\n   *\n   * @public\n   */\n  addOpenMenu(id) {\n    const menus = new Set(this.getOpenMenus());\n    if (!menus.has(id)) {\n      menus.add(id);\n      this.updateInstanceState({ openMenus: [...menus] });\n    }\n    return this;\n  }\n  /**\n   * Delete an open menu.\n   *\n   * @example\n   * ```ts\n   * editor.deleteOpenMenu('menu-id')\n   * ```\n   *\n   * @public\n   */\n  deleteOpenMenu(id) {\n    const menus = new Set(this.getOpenMenus());\n    if (menus.has(id)) {\n      menus.delete(id);\n      this.updateInstanceState({ openMenus: [...menus] });\n    }\n    return this;\n  }\n  /**\n   * Clear all open menus.\n   *\n   * @example\n   * ```ts\n   * editor.clearOpenMenus()\n   * ```\n   *\n   * @public\n   */\n  clearOpenMenus() {\n    if (this.getOpenMenus().length) {\n      this.updateInstanceState({ openMenus: [] });\n    }\n    return this;\n  }\n  getIsMenuOpen() {\n    return this.getOpenMenus().length > 0;\n  }\n  /* --------------------- Cursor --------------------- */\n  /**\n   * Set the cursor.\n   *\n   * @param type - The cursor type.\n   * @param rotation - The cursor rotation.\n   *\n   * @public\n   */\n  setCursor = (cursor) => {\n    this.updateInstanceState({ cursor: { ...this.getInstanceState().cursor, ...cursor } });\n    return this;\n  };\n  getPageStates() {\n    return this._getPageStatesQuery().get();\n  }\n  _getPageStatesQuery() {\n    return this.store.query.records(\"instance_page_state\");\n  }\n  getCurrentPageState() {\n    return this.store.get(this._getCurrentPageStateId());\n  }\n  _getCurrentPageStateId() {\n    return _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.InstancePageStateRecordType.createId(this.getCurrentPageId());\n  }\n  /**\n   * Update this instance's page state.\n   *\n   * @example\n   * ```ts\n   * editor.updateCurrentPageState({ id: 'page1', editingShapeId: 'shape:123' })\n   * editor.updateCurrentPageState({ id: 'page1', editingShapeId: 'shape:123' }, { ephemeral: true })\n   * ```\n   *\n   * @param partial - The partial of the page state object containing the changes.\n   * @param historyOptions - The history options for the change.\n   *\n   * @public\n   */\n  updateCurrentPageState(partial, historyOptions) {\n    this._updateCurrentPageState(partial, historyOptions);\n    return this;\n  }\n  _updateCurrentPageState = (partial, historyOptions) => {\n    this.batch(\n      () => {\n        this.store.update(partial.id ?? this.getCurrentPageState().id, (state) => ({\n          ...state,\n          ...partial\n        }));\n      },\n      {\n        history: \"ignore\",\n        ...historyOptions\n      }\n    );\n  };\n  getSelectedShapeIds() {\n    return this.getCurrentPageState().selectedShapeIds;\n  }\n  getSelectedShapes() {\n    const { selectedShapeIds } = this.getCurrentPageState();\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(selectedShapeIds.map((id) => this.store.get(id)));\n  }\n  /**\n   * Select one or more shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setSelectedShapes(['id1'])\n   * editor.setSelectedShapes(['id1', 'id2'])\n   * ```\n   *\n   * @param ids - The ids to select.\n   *\n   * @public\n   */\n  setSelectedShapes(shapes) {\n    return this.batch(\n      () => {\n        const ids = shapes.map((shape) => typeof shape === \"string\" ? shape : shape.id);\n        const { selectedShapeIds: prevSelectedShapeIds } = this.getCurrentPageState();\n        const prevSet = new Set(prevSelectedShapeIds);\n        if (ids.length === prevSet.size && ids.every((id) => prevSet.has(id)))\n          return null;\n        this.store.put([{ ...this.getCurrentPageState(), selectedShapeIds: ids }]);\n      },\n      { history: \"record-preserveRedoStack\" }\n    );\n  }\n  /**\n   * Determine whether or not any of a shape's ancestors are selected.\n   *\n   * @param id - The id of the shape to check.\n   *\n   * @public\n   */\n  isAncestorSelected(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id ?? null;\n    const _shape = this.getShape(id);\n    if (!_shape)\n      return false;\n    const selectedShapeIds = this.getSelectedShapeIds();\n    return !!this.findShapeAncestor(_shape, (parent) => selectedShapeIds.includes(parent.id));\n  }\n  /**\n   * Select one or more shapes.\n   *\n   * @example\n   * ```ts\n   * editor.select('id1')\n   * editor.select('id1', 'id2')\n   * ```\n   *\n   * @param ids - The ids to select.\n   *\n   * @public\n   */\n  select(...shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((shape) => shape.id);\n    this.setSelectedShapes(ids);\n    return this;\n  }\n  /**\n   * Remove a shape from the existing set of selected shapes.\n   *\n   * @example\n   * ```ts\n   * editor.deselect(shape.id)\n   * ```\n   *\n   * @public\n   */\n  deselect(...shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((shape) => shape.id);\n    const selectedShapeIds = this.getSelectedShapeIds();\n    if (selectedShapeIds.length > 0 && ids.length > 0) {\n      this.setSelectedShapes(selectedShapeIds.filter((id) => !ids.includes(id)));\n    }\n    return this;\n  }\n  /**\n   * Select all direct children of the current page.\n   *\n   * @example\n   * ```ts\n   * editor.selectAll()\n   * ```\n   *\n   * @public\n   */\n  selectAll() {\n    const ids = this.getSortedChildIdsForParent(this.getCurrentPageId());\n    if (ids.length <= 0)\n      return this;\n    this.setSelectedShapes(this._getUnlockedShapeIds(ids));\n    return this;\n  }\n  /**\n   * Clear the selection.\n   *\n   * @example\n   * ```ts\n   * editor.selectNone()\n   * ```\n   *\n   * @public\n   */\n  selectNone() {\n    if (this.getSelectedShapeIds().length > 0) {\n      this.setSelectedShapes([]);\n    }\n    return this;\n  }\n  getOnlySelectedShapeId() {\n    return this.getOnlySelectedShape()?.id ?? null;\n  }\n  getOnlySelectedShape() {\n    const selectedShapes = this.getSelectedShapes();\n    return selectedShapes.length === 1 ? selectedShapes[0] : null;\n  }\n  getSelectionPageBounds() {\n    const selectedShapeIds = this.getCurrentPageState().selectedShapeIds;\n    if (selectedShapeIds.length === 0)\n      return null;\n    return _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.Common((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(selectedShapeIds.map((id) => this.getShapePageBounds(id))));\n  }\n  getSelectionRotation() {\n    const selectedShapeIds = this.getSelectedShapeIds();\n    let foundFirst = false;\n    let rotation = 0;\n    for (let i = 0, n = selectedShapeIds.length; i < n; i++) {\n      const pageTransform = this.getShapePageTransform(selectedShapeIds[i]);\n      if (!pageTransform)\n        continue;\n      if (foundFirst) {\n        if (pageTransform.rotation() !== rotation) {\n          return 0;\n        }\n      } else {\n        foundFirst = true;\n        rotation = pageTransform.rotation();\n      }\n    }\n    return rotation;\n  }\n  getSelectionRotatedPageBounds() {\n    const selectedShapeIds = this.getSelectedShapeIds();\n    if (selectedShapeIds.length === 0) {\n      return void 0;\n    }\n    const selectionRotation = this.getSelectionRotation();\n    if (selectionRotation === 0) {\n      return this.getSelectionPageBounds();\n    }\n    if (selectedShapeIds.length === 1) {\n      const bounds = this.getShapeGeometry(selectedShapeIds[0]).bounds.clone();\n      const pageTransform = this.getShapePageTransform(selectedShapeIds[0]);\n      bounds.point = pageTransform.applyToPoint(bounds.point);\n      return bounds;\n    }\n    const boxFromRotatedVertices = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.FromPoints(\n      this.getSelectedShapeIds().flatMap((id) => {\n        const pageTransform = this.getShapePageTransform(id);\n        if (!pageTransform)\n          return [];\n        return pageTransform.applyToPoints(this.getShapeGeometry(id).bounds.corners);\n      }).map((p) => p.rot(-selectionRotation))\n    );\n    boxFromRotatedVertices.point = boxFromRotatedVertices.point.rot(selectionRotation);\n    return boxFromRotatedVertices;\n  }\n  getSelectionRotatedScreenBounds() {\n    const bounds = this.getSelectionRotatedPageBounds();\n    if (!bounds)\n      return void 0;\n    const { x, y } = this.pageToScreen(bounds.point);\n    const zoom = this.getZoomLevel();\n    return new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box(x, y, bounds.width * zoom, bounds.height * zoom);\n  }\n  getFocusedGroupId() {\n    return this.getCurrentPageState().focusedGroupId ?? this.getCurrentPageId();\n  }\n  getFocusedGroup() {\n    const focusedGroupId = this.getFocusedGroupId();\n    return focusedGroupId ? this.getShape(focusedGroupId) : void 0;\n  }\n  /**\n   * Set the current focused group shape.\n   *\n   * @param shape - The group shape id (or group shape's id) to set as the focused group shape.\n   *\n   * @public\n   */\n  setFocusedGroup(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id ?? null;\n    if (id !== null) {\n      const shape2 = this.getShape(id);\n      if (!shape2) {\n        throw Error(`Editor.setFocusedGroup: Shape with id ${id} does not exist`);\n      }\n      if (!this.isShapeOfType(shape2, \"group\")) {\n        throw Error(\n          `Editor.setFocusedGroup: Cannot set focused group to shape of type ${shape2.type}`\n        );\n      }\n    }\n    if (id === this.getFocusedGroupId())\n      return this;\n    return this.batch(\n      () => {\n        this.store.update(this.getCurrentPageState().id, (s) => ({ ...s, focusedGroupId: id }));\n      },\n      { history: \"record-preserveRedoStack\" }\n    );\n  }\n  /**\n   * Exit the current focused group, moving up to the next parent group if there is one.\n   *\n   * @public\n   */\n  popFocusedGroupId() {\n    const focusedGroup = this.getFocusedGroup();\n    if (focusedGroup) {\n      const match = this.findShapeAncestor(\n        focusedGroup,\n        (shape) => this.isShapeOfType(shape, \"group\")\n      );\n      this.setFocusedGroup(match?.id ?? null);\n      this.select(focusedGroup.id);\n    } else {\n      this.setFocusedGroup(null);\n      this.selectNone();\n    }\n    return this;\n  }\n  getEditingShapeId() {\n    return this.getCurrentPageState().editingShapeId;\n  }\n  getEditingShape() {\n    const editingShapeId = this.getEditingShapeId();\n    return editingShapeId ? this.getShape(editingShapeId) : void 0;\n  }\n  /**\n   * Set the current editing shape.\n   *\n   * @example\n   * ```ts\n   * editor.setEditingShape(myShape)\n   * editor.setEditingShape(myShape.id)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to set as editing.\n   *\n   * @public\n   */\n  setEditingShape(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id ?? null;\n    if (id !== this.getEditingShapeId()) {\n      if (id) {\n        const shape2 = this.getShape(id);\n        if (shape2 && this.getShapeUtil(shape2).canEdit(shape2)) {\n          this._updateCurrentPageState({ editingShapeId: id });\n          return this;\n        }\n      }\n      this._updateCurrentPageState({ editingShapeId: null });\n    }\n    return this;\n  }\n  getHoveredShapeId() {\n    return this.getCurrentPageState().hoveredShapeId;\n  }\n  getHoveredShape() {\n    const hoveredShapeId = this.getHoveredShapeId();\n    return hoveredShapeId ? this.getShape(hoveredShapeId) : void 0;\n  }\n  /**\n   * Set the editor's current hovered shape.\n   *\n   * @example\n   * ```ts\n   * editor.setHoveredShape(myShape)\n   * editor.setHoveredShape(myShape.id)\n   * ```\n   *\n   * @param shapes - The shape (or shape id) to set as hovered.\n   *\n   * @public\n   */\n  setHoveredShape(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id ?? null;\n    if (id === this.getHoveredShapeId())\n      return this;\n    this.updateCurrentPageState({ hoveredShapeId: id }, { history: \"ignore\" });\n    return this;\n  }\n  getHintingShapeIds() {\n    return this.getCurrentPageState().hintingShapeIds;\n  }\n  getHintingShape() {\n    const hintingShapeIds = this.getHintingShapeIds();\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(hintingShapeIds.map((id) => this.getShape(id)));\n  }\n  /**\n   * Set the editor's current hinting shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setHintingShapes([myShape])\n   * editor.setHintingShapes([myShape.id])\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to set as hinting.\n   *\n   * @public\n   */\n  setHintingShapes(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((shape) => shape.id);\n    this.updateCurrentPageState({ hintingShapeIds: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.dedupe)(ids) }, { history: \"ignore\" });\n    return this;\n  }\n  getErasingShapeIds() {\n    return this.getCurrentPageState().erasingShapeIds;\n  }\n  getErasingShapes() {\n    const erasingShapeIds = this.getErasingShapeIds();\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(erasingShapeIds.map((id) => this.getShape(id)));\n  }\n  /**\n   * Set the editor's current erasing shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setErasingShapes([myShape])\n   * editor.setErasingShapes([myShape.id])\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to set as hinting.\n   *\n   * @public\n   */\n  setErasingShapes(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((shape) => shape.id);\n    ids.sort();\n    const erasingShapeIds = this.getErasingShapeIds();\n    this.history.ignore(() => {\n      if (ids.length === erasingShapeIds.length) {\n        for (let i = 0; i < ids.length; i++) {\n          if (ids[i] !== erasingShapeIds[i]) {\n            this._updateCurrentPageState({ erasingShapeIds: ids });\n            break;\n          }\n        }\n      } else {\n        this._updateCurrentPageState({ erasingShapeIds: ids });\n      }\n    });\n    return this;\n  }\n  // Cropping\n  /**\n   * The current cropping shape's id.\n   *\n   * @public\n   */\n  getCroppingShapeId() {\n    return this.getCurrentPageState().croppingShapeId;\n  }\n  /**\n   * Set the current cropping shape.\n   *\n   * @example\n   * ```ts\n   * editor.setCroppingShape(myShape)\n   * editor.setCroppingShape(myShape.id)\n   * ```\n   *\n   *\n   * @param shape - The shape (or shape id) to set as cropping.\n   *\n   * @public\n   */\n  setCroppingShape(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id ?? null;\n    if (id !== this.getCroppingShapeId()) {\n      if (!id) {\n        this.updateCurrentPageState({ croppingShapeId: null });\n      } else {\n        const shape2 = this.getShape(id);\n        const util = this.getShapeUtil(shape2);\n        if (shape2 && util.canCrop(shape2)) {\n          this.updateCurrentPageState({ croppingShapeId: id });\n        }\n      }\n    }\n    return this;\n  }\n  getCameraId() {\n    return _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.CameraRecordType.createId(this.getCurrentPageId());\n  }\n  getCamera() {\n    const baseCamera = this.store.get(this.getCameraId());\n    if (this._isLockedOnFollowingUser.get()) {\n      const followingCamera = this.getCameraForFollowing();\n      if (followingCamera) {\n        return { ...baseCamera, ...followingCamera };\n      }\n    }\n    return baseCamera;\n  }\n  getViewportPageBoundsForFollowing() {\n    const followingUserId = this.getInstanceState().followingUserId;\n    if (!followingUserId)\n      return null;\n    const leaderPresence = this.getCollaborators().find((c) => c.userId === followingUserId);\n    if (!leaderPresence)\n      return null;\n    const { w: lw, h: lh } = leaderPresence.screenBounds;\n    const { x: lx, y: ly, z: lz } = leaderPresence.camera;\n    const theirViewport = new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box(-lx, -ly, lw / lz, lh / lz);\n    const ourViewport = this.getViewportScreenBounds().clone();\n    const ourAspectRatio = ourViewport.width / ourViewport.height;\n    ourViewport.width = theirViewport.width;\n    ourViewport.height = ourViewport.width / ourAspectRatio;\n    if (ourViewport.height < theirViewport.height) {\n      ourViewport.height = theirViewport.height;\n      ourViewport.width = ourViewport.height * ourAspectRatio;\n    }\n    ourViewport.center = theirViewport.center;\n    return ourViewport;\n  }\n  getCameraForFollowing() {\n    const viewport = this.getViewportPageBoundsForFollowing();\n    if (!viewport)\n      return null;\n    return {\n      x: -viewport.x,\n      y: -viewport.y,\n      z: this.getViewportScreenBounds().w / viewport.width\n    };\n  }\n  getZoomLevel() {\n    return this.getCamera().z;\n  }\n  /**\n   * Get the camera's initial or reset zoom level.\n   *\n   * @example\n   * ```ts\n   * editor.getInitialZoom()\n   * ```\n   *\n   * @public */\n  getInitialZoom() {\n    const cameraOptions = this.getCameraOptions();\n    if (!cameraOptions.constraints)\n      return 1;\n    if (cameraOptions.constraints.initialZoom === \"default\")\n      return 1;\n    const { zx, zy } = getCameraFitXFitY(this, cameraOptions);\n    switch (cameraOptions.constraints.initialZoom) {\n      case \"fit-min\": {\n        return Math.max(zx, zy);\n      }\n      case \"fit-max\": {\n        return Math.min(zx, zy);\n      }\n      case \"fit-x\": {\n        return zx;\n      }\n      case \"fit-y\": {\n        return zy;\n      }\n      case \"fit-min-100\": {\n        return Math.min(1, Math.max(zx, zy));\n      }\n      case \"fit-max-100\": {\n        return Math.min(1, Math.min(zx, zy));\n      }\n      case \"fit-x-100\": {\n        return Math.min(1, zx);\n      }\n      case \"fit-y-100\": {\n        return Math.min(1, zy);\n      }\n      default: {\n        throw (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.exhaustiveSwitchError)(cameraOptions.constraints.initialZoom);\n      }\n    }\n  }\n  /**\n   * Get the camera's base level for calculating actual zoom levels based on the zoom steps.\n   *\n   * @example\n   * ```ts\n   * editor.getBaseZoom()\n   * ```\n   *\n   * @public */\n  getBaseZoom() {\n    const cameraOptions = this.getCameraOptions();\n    if (!cameraOptions.constraints)\n      return 1;\n    if (cameraOptions.constraints.baseZoom === \"default\")\n      return 1;\n    const { zx, zy } = getCameraFitXFitY(this, cameraOptions);\n    switch (cameraOptions.constraints.baseZoom) {\n      case \"fit-min\": {\n        return Math.max(zx, zy);\n      }\n      case \"fit-max\": {\n        return Math.min(zx, zy);\n      }\n      case \"fit-x\": {\n        return zx;\n      }\n      case \"fit-y\": {\n        return zy;\n      }\n      case \"fit-min-100\": {\n        return Math.min(1, Math.max(zx, zy));\n      }\n      case \"fit-max-100\": {\n        return Math.min(1, Math.min(zx, zy));\n      }\n      case \"fit-x-100\": {\n        return Math.min(1, zx);\n      }\n      case \"fit-y-100\": {\n        return Math.min(1, zy);\n      }\n      default: {\n        throw (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.exhaustiveSwitchError)(cameraOptions.constraints.baseZoom);\n      }\n    }\n  }\n  _cameraOptions = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"camera options\", _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_CAMERA_OPTIONS);\n  /**\n   * Get the current camera options.\n   *\n   * @example\n   * ```ts\n   * editor.getCameraOptions()\n   * ```\n   *\n   *  @public */\n  getCameraOptions() {\n    return this._cameraOptions.get();\n  }\n  /**\n   * Set the camera options. Changing the options won't immediately change the camera itself, so you may want to call `setCamera` after changing the options.\n   *\n   * @example\n   * ```ts\n   * editor.setCameraOptions(myCameraOptions)\n   * editor.setCamera(editor.getCamera())\n   * ```\n   *\n   * @param options - The camera options to set.\n   *\n   * @public */\n  setCameraOptions(options) {\n    const next = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.structuredClone)({\n      ...this._cameraOptions.__unsafe__getWithoutCapture(),\n      ...options\n    });\n    if (next.zoomSteps?.length < 1)\n      next.zoomSteps = [1];\n    this._cameraOptions.set(next);\n    return this;\n  }\n  /** @internal */\n  getConstrainedCamera(point, opts) {\n    const currentCamera = this.getCamera();\n    let { x, y, z = currentCamera.z } = point;\n    if (!opts?.force) {\n      const cameraOptions = this.getCameraOptions();\n      const zoomMin = cameraOptions.zoomSteps[0];\n      const zoomMax = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.last)(cameraOptions.zoomSteps);\n      const vsb = this.getViewportScreenBounds();\n      if (cameraOptions.constraints) {\n        const { constraints } = cameraOptions;\n        const py = Math.min(constraints.padding.y, vsb.w / 2);\n        const px = Math.min(constraints.padding.x, vsb.h / 2);\n        const bounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.From(cameraOptions.constraints.bounds);\n        const zx = (vsb.w - px * 2) / bounds.w;\n        const zy = (vsb.h - py * 2) / bounds.h;\n        const baseZoom = this.getBaseZoom();\n        const maxZ = zoomMax * baseZoom;\n        const minZ = zoomMin * baseZoom;\n        if (opts?.reset) {\n          z = this.getInitialZoom();\n        }\n        if (z < minZ || z > maxZ) {\n          const { x: cx, y: cy, z: cz } = currentCamera;\n          const cxA = -cx + vsb.w / cz / 2;\n          const cyA = -cy + vsb.h / cz / 2;\n          z = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.clamp)(z, minZ, maxZ);\n          const cxB = -cx + vsb.w / z / 2;\n          const cyB = -cy + vsb.h / z / 2;\n          x = cx + cxB - cxA;\n          y = cy + cyB - cyA;\n        }\n        const minX = px / z - bounds.x;\n        const minY = py / z - bounds.y;\n        const freeW = (vsb.w - px * 2) / z - bounds.w;\n        const freeH = (vsb.h - py * 2) / z - bounds.h;\n        const originX = minX + freeW * constraints.origin.x;\n        const originY = minY + freeH * constraints.origin.y;\n        const behaviorX = typeof constraints.behavior === \"string\" ? constraints.behavior : constraints.behavior.x;\n        const behaviorY = typeof constraints.behavior === \"string\" ? constraints.behavior : constraints.behavior.y;\n        if (opts?.reset) {\n          x = originX;\n          y = originY;\n        } else {\n          switch (behaviorX) {\n            case \"fixed\": {\n              x = originX;\n              break;\n            }\n            case \"contain\": {\n              if (z < zx)\n                x = originX;\n              else\n                x = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.clamp)(x, minX + freeW, minX);\n              break;\n            }\n            case \"inside\": {\n              if (z < zx)\n                x = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.clamp)(x, minX, (vsb.w - px) / z - bounds.w);\n              else\n                x = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.clamp)(x, minX + freeW, minX);\n              break;\n            }\n            case \"outside\": {\n              x = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.clamp)(x, px / z - bounds.w, (vsb.w - px) / z);\n              break;\n            }\n            case \"free\": {\n              break;\n            }\n            default: {\n              throw (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.exhaustiveSwitchError)(behaviorX);\n            }\n          }\n          switch (behaviorY) {\n            case \"fixed\": {\n              y = originY;\n              break;\n            }\n            case \"contain\": {\n              if (z < zy)\n                y = originY;\n              else\n                y = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.clamp)(y, minY + freeH, minY);\n              break;\n            }\n            case \"inside\": {\n              if (z < zy)\n                y = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.clamp)(y, minY, (vsb.h - py) / z - bounds.h);\n              else\n                y = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.clamp)(y, minY + freeH, minY);\n              break;\n            }\n            case \"outside\": {\n              y = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.clamp)(y, py / z - bounds.h, (vsb.h - py) / z);\n              break;\n            }\n            case \"free\": {\n              break;\n            }\n            default: {\n              throw (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.exhaustiveSwitchError)(behaviorY);\n            }\n          }\n        }\n      } else {\n        if (z > zoomMax || z < zoomMin) {\n          const { x: cx, y: cy, z: cz } = currentCamera;\n          z = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.clamp)(z, zoomMin, zoomMax);\n          x = cx + (-cx + vsb.w / z / 2) - (-cx + vsb.w / cz / 2);\n          y = cy + (-cy + vsb.h / z / 2) - (-cy + vsb.h / cz / 2);\n        }\n      }\n    }\n    return { x, y, z };\n  }\n  /** @internal */\n  _setCamera(point, opts) {\n    const currentCamera = this.getCamera();\n    const { x, y, z } = this.getConstrainedCamera(point, opts);\n    if (currentCamera.x === x && currentCamera.y === y && currentCamera.z === z) {\n      return this;\n    }\n    this.batch(() => {\n      const camera = { ...currentCamera, x, y, z };\n      this.history.ignore(() => {\n        this.store.put([camera]);\n      });\n      const { currentScreenPoint, currentPagePoint } = this.inputs;\n      const { screenBounds } = this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n      if (currentScreenPoint.x / z - x !== currentPagePoint.x || currentScreenPoint.y / z - y !== currentPagePoint.y) {\n        const event = {\n          type: \"pointer\",\n          target: \"canvas\",\n          name: \"pointer_move\",\n          // weird but true: we need to put the screen point back into client space\n          point: _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.AddXY(currentScreenPoint, screenBounds.x, screenBounds.y),\n          pointerId: _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.INTERNAL_POINTER_IDS.CAMERA_MOVE,\n          ctrlKey: this.inputs.ctrlKey,\n          altKey: this.inputs.altKey,\n          shiftKey: this.inputs.shiftKey,\n          button: 0,\n          isPen: this.getInstanceState().isPenMode ?? false\n        };\n        if (opts?.immediate) {\n          this._flushEventForTick(event);\n        } else {\n          this.dispatch(event);\n        }\n      }\n      this._tickCameraState();\n    });\n    return this;\n  }\n  /**\n   * Set the current camera.\n   *\n   * @example\n   * ```ts\n   * editor.setCamera({ x: 0, y: 0})\n   * editor.setCamera({ x: 0, y: 0, z: 1.5})\n   * editor.setCamera({ x: 0, y: 0, z: 1.5}, { animation: { duration: 1000, easing: (t) => t * t } })\n   * ```\n   *\n   * @param point - The new camera position.\n   * @param opts - The camera move options.\n   *\n   * @public\n   */\n  setCamera(point, opts) {\n    const { isLocked } = this._cameraOptions.__unsafe__getWithoutCapture();\n    if (isLocked && !opts?.force)\n      return this;\n    this.stopCameraAnimation();\n    if (this.getInstanceState().followingUserId) {\n      this.stopFollowingUser();\n    }\n    const _point = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Cast(point);\n    if (!Number.isFinite(_point.x))\n      _point.x = 0;\n    if (!Number.isFinite(_point.y))\n      _point.y = 0;\n    if (_point.z === void 0 || !Number.isFinite(_point.z))\n      point.z = this.getZoomLevel();\n    const camera = this.getConstrainedCamera(_point, opts);\n    if (opts?.animation) {\n      const { width, height } = this.getViewportScreenBounds();\n      this._animateToViewport(\n        new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box(-camera.x, -camera.y, width / camera.z, height / camera.z),\n        opts\n      );\n    } else {\n      this._setCamera(camera, {\n        ...opts,\n        // we already did the constraining, so we don't need to do it again\n        force: true\n      });\n    }\n    return this;\n  }\n  /**\n   * Center the camera on a point (in the current page space).\n   *\n   * @example\n   * ```ts\n   * editor.centerOnPoint({ x: 100, y: 100 })\n   * editor.centerOnPoint({ x: 100, y: 100 }, { animation: { duration: 200 } })\n   * ```\n   *\n   * @param point - The point in the current page space to center on.\n   * @param animation - The camera move options.\n   *\n   * @public\n   */\n  centerOnPoint(point, opts) {\n    if (this.getCameraOptions().isLocked)\n      return this;\n    const { width: pw, height: ph } = this.getViewportPageBounds();\n    this.setCamera(new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(-(point.x - pw / 2), -(point.y - ph / 2), this.getCamera().z), opts);\n    return this;\n  }\n  /**\n   * Zoom the camera to fit the current page's content in the viewport.\n   *\n   * @example\n   * ```ts\n   * editor.zoomToFit()\n   * editor.zoomToFit({ animation: { duration: 200 } })\n   * ```\n   *\n   * @param opts - The camera move options.\n   *\n   * @public\n   */\n  zoomToFit(opts) {\n    const ids = [...this.getCurrentPageShapeIds()];\n    if (ids.length <= 0)\n      return this;\n    const pageBounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.Common((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShapePageBounds(id))));\n    this.zoomToBounds(pageBounds, opts);\n    return this;\n  }\n  /**\n   * Set the zoom back to 100%.\n   *\n   * @example\n   * ```ts\n   * editor.resetZoom()\n   * editor.resetZoom(editor.getViewportScreenCenter(), { animation: { duration: 200 } })\n   * editor.resetZoom(editor.getViewportScreenCenter(), { animation: { duration: 200 } })\n   * ```\n   *\n   * @param point - The screen point to zoom out on. Defaults to the viewport screen center.\n   * @param opts - The camera move options.\n   *\n   * @public\n   */\n  resetZoom(point = this.getViewportScreenCenter(), opts) {\n    const { isLocked, constraints } = this.getCameraOptions();\n    if (isLocked)\n      return this;\n    const currentCamera = this.getCamera();\n    const { x: cx, y: cy, z: cz } = currentCamera;\n    const { x, y } = point;\n    let z = 1;\n    if (constraints) {\n      const initialZoom = this.getInitialZoom();\n      if (cz !== initialZoom) {\n        z = initialZoom;\n      }\n    }\n    this.setCamera(\n      new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(cx + (x / z - x) - (x / cz - x), cy + (y / z - y) - (y / cz - y), z),\n      opts\n    );\n    return this;\n  }\n  /**\n   * Zoom the camera in.\n   *\n   * @example\n   * ```ts\n   * editor.zoomIn()\n   * editor.zoomIn(editor.getViewportScreenCenter(), { animation: { duration: 200 } })\n   * editor.zoomIn(editor.inputs.currentScreenPoint, { animation: { duration: 200 } })\n   * ```\n   *\n   * @param point - The screen point to zoom in on. Defaults to the screen center\n   * @param opts - The camera move options.\n   *\n   * @public\n   */\n  zoomIn(point = this.getViewportScreenCenter(), opts) {\n    if (this.getCameraOptions().isLocked)\n      return this;\n    const { x: cx, y: cy, z: cz } = this.getCamera();\n    const { zoomSteps } = this.getCameraOptions();\n    if (zoomSteps !== null && zoomSteps.length > 1) {\n      const baseZoom = this.getBaseZoom();\n      let zoom = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.last)(zoomSteps) * baseZoom;\n      for (let i = 1; i < zoomSteps.length; i++) {\n        const z1 = zoomSteps[i - 1] * baseZoom;\n        const z2 = zoomSteps[i] * baseZoom;\n        if (z2 - cz <= (z2 - z1) / 2)\n          continue;\n        zoom = z2;\n        break;\n      }\n      this.setCamera(\n        new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(\n          cx + (point.x / zoom - point.x) - (point.x / cz - point.x),\n          cy + (point.y / zoom - point.y) - (point.y / cz - point.y),\n          zoom\n        ),\n        opts\n      );\n    }\n    return this;\n  }\n  /**\n   * Zoom the camera out.\n   *\n   * @example\n   * ```ts\n   * editor.zoomOut()\n   * editor.zoomOut(editor.getViewportScreenCenter(), { animation: { duration: 120 } })\n   * editor.zoomOut(editor.inputs.currentScreenPoint, { animation: { duration: 120 } })\n   * ```\n   *\n   * @param point - The point to zoom out on. Defaults to the viewport screen center.\n   * @param opts - The camera move options.\n   *\n   * @public\n   */\n  zoomOut(point = this.getViewportScreenCenter(), opts) {\n    if (this.getCameraOptions().isLocked)\n      return this;\n    const { zoomSteps } = this.getCameraOptions();\n    if (zoomSteps !== null && zoomSteps.length > 1) {\n      const baseZoom = this.getBaseZoom();\n      const { x: cx, y: cy, z: cz } = this.getCamera();\n      let zoom = zoomSteps[0] * baseZoom;\n      for (let i = zoomSteps.length - 1; i > 0; i--) {\n        const z1 = zoomSteps[i - 1] * baseZoom;\n        const z2 = zoomSteps[i] * baseZoom;\n        if (z2 - cz >= (z2 - z1) / 2)\n          continue;\n        zoom = z1;\n        break;\n      }\n      this.setCamera(\n        new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(\n          cx + (point.x / zoom - point.x) - (point.x / cz - point.x),\n          cy + (point.y / zoom - point.y) - (point.y / cz - point.y),\n          zoom\n        ),\n        opts\n      );\n    }\n    return this;\n  }\n  /**\n   * Zoom the camera to fit the current selection in the viewport.\n   *\n   * @example\n   * ```ts\n   * editor.zoomToSelection()\n   * editor.zoomToSelection({ animation: { duration: 200 } })\n   * ```\n   *\n   * @param animation - The camera move options.\n   *\n   * @public\n   */\n  zoomToSelection(opts) {\n    if (this.getCameraOptions().isLocked)\n      return this;\n    const selectionPageBounds = this.getSelectionPageBounds();\n    if (selectionPageBounds) {\n      this.zoomToBounds(selectionPageBounds, {\n        targetZoom: Math.max(1, this.getZoomLevel()),\n        ...opts\n      });\n    }\n    return this;\n  }\n  /**\n   * Zoom the camera to fit a bounding box (in the current page space).\n   *\n   * @example\n   * ```ts\n   * editor.zoomToBounds(myBounds)\n   * editor.zoomToBounds(myBounds, { animation: { duration: 200 } })\n   * editor.zoomToBounds(myBounds, { animation: { duration: 200 }, inset: 0, targetZoom: 1 })\n   * ```\n   *\n   * @param bounds - The bounding box.\n   * @param opts - The camera move options, target zoom, or custom inset amount.\n   *\n   * @public\n   */\n  zoomToBounds(bounds, opts) {\n    const cameraOptions = this._cameraOptions.__unsafe__getWithoutCapture();\n    if (cameraOptions.isLocked)\n      return this;\n    const viewportScreenBounds = this.getViewportScreenBounds();\n    const inset = opts?.inset ?? Math.min(_constants_mjs__WEBPACK_IMPORTED_MODULE_11__.ZOOM_TO_FIT_PADDING, viewportScreenBounds.width * 0.28);\n    const baseZoom = this.getBaseZoom();\n    const zoomMin = cameraOptions.zoomSteps[0];\n    const zoomMax = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.last)(cameraOptions.zoomSteps);\n    let zoom = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.clamp)(\n      Math.min(\n        (viewportScreenBounds.width - inset) / bounds.w,\n        (viewportScreenBounds.height - inset) / bounds.h\n      ),\n      zoomMin * baseZoom,\n      zoomMax * baseZoom\n    );\n    if (opts?.targetZoom !== void 0) {\n      zoom = Math.min(opts.targetZoom, zoom);\n    }\n    this.setCamera(\n      new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(\n        -bounds.x + (viewportScreenBounds.width - bounds.w * zoom) / 2 / zoom,\n        -bounds.y + (viewportScreenBounds.height - bounds.h * zoom) / 2 / zoom,\n        zoom\n      ),\n      opts\n    );\n    return this;\n  }\n  /**\n   * Stop the current camera animation, if any.\n   *\n   * @example\n   * ```ts\n   * editor.stopCameraAnimation()\n   * ```\n   *\n   * @public\n   */\n  stopCameraAnimation() {\n    this.emit(\"stop-camera-animation\");\n    return this;\n  }\n  /** @internal */\n  _viewportAnimation = null;\n  /** @internal */\n  _animateViewport(ms) {\n    if (!this._viewportAnimation)\n      return;\n    this._viewportAnimation.elapsed += ms;\n    const { elapsed, easing, duration, start, end } = this._viewportAnimation;\n    if (elapsed > duration) {\n      this.off(\"tick\", this._animateViewport);\n      this._viewportAnimation = null;\n      this._setCamera(new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(-end.x, -end.y, this.getViewportScreenBounds().width / end.width));\n      return;\n    }\n    const remaining = duration - elapsed;\n    const t = easing(1 - remaining / duration);\n    const left = start.minX + (end.minX - start.minX) * t;\n    const top = start.minY + (end.minY - start.minY) * t;\n    const right = start.maxX + (end.maxX - start.maxX) * t;\n    this._setCamera(new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(-left, -top, this.getViewportScreenBounds().width / (right - left)), {\n      force: true\n    });\n  }\n  /** @internal */\n  _animateToViewport(targetViewportPage, opts = { animation: _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_ANIMATION_OPTIONS }) {\n    const { animation, ...rest } = opts;\n    if (!animation)\n      return;\n    const { duration = 0, easing = _primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_16__.EASINGS.easeInOutCubic } = animation;\n    const animationSpeed = this.user.getAnimationSpeed();\n    const viewportPageBounds = this.getViewportPageBounds();\n    this.stopCameraAnimation();\n    if (this.getInstanceState().followingUserId) {\n      this.stopFollowingUser();\n    }\n    if (duration === 0 || animationSpeed === 0) {\n      return this._setCamera(\n        new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(\n          -targetViewportPage.x,\n          -targetViewportPage.y,\n          this.getViewportScreenBounds().width / targetViewportPage.width\n        ),\n        { ...rest }\n      );\n    }\n    this._viewportAnimation = {\n      elapsed: 0,\n      duration: duration / animationSpeed,\n      easing,\n      start: viewportPageBounds.clone(),\n      end: targetViewportPage.clone()\n    };\n    this.once(\"stop-camera-animation\", () => {\n      this.off(\"tick\", this._animateViewport);\n      this._viewportAnimation = null;\n    });\n    this.on(\"tick\", this._animateViewport);\n    return this;\n  }\n  /**\n   * Slide the camera in a certain direction.\n   *\n   * @example\n   * ```ts\n   * editor.slideCamera({ speed: 1, direction: { x: 1, y: 0 }, friction: 0.1 })\n   * ```\n   *\n   * @param opts - Options for the slide\n   * @public\n   */\n  slideCamera(opts = {}) {\n    if (this.getCameraOptions().isLocked)\n      return this;\n    const animationSpeed = this.user.getAnimationSpeed();\n    if (animationSpeed === 0)\n      return this;\n    this.stopCameraAnimation();\n    const {\n      speed,\n      friction = this.options.cameraSlideFriction,\n      direction,\n      speedThreshold = 0.01\n    } = opts;\n    let currentSpeed = Math.min(speed, 1);\n    const cancel = () => {\n      this.off(\"tick\", moveCamera);\n      this.off(\"stop-camera-animation\", cancel);\n    };\n    this.once(\"stop-camera-animation\", cancel);\n    const moveCamera = (elapsed) => {\n      const { x: cx, y: cy, z: cz } = this.getCamera();\n      const movementVec = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Mul(direction, currentSpeed * elapsed / cz);\n      currentSpeed *= 1 - friction;\n      if (currentSpeed < speedThreshold) {\n        cancel();\n      } else {\n        this._setCamera(new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(cx + movementVec.x, cy + movementVec.y, cz));\n      }\n    };\n    this.on(\"tick\", moveCamera);\n    return this;\n  }\n  /**\n   * Animate the camera to a user's cursor position. This also briefly show the user's cursor if it's not currently visible.\n   *\n   * @example\n   * ```ts\n   * editor.zoomToUser(myUserId)\n   * editor.zoomToUser(myUserId, { animation: { duration: 200 } })\n   * ```\n   *\n   * @param userId - The id of the user to animate to.\n   * @param opts - The camera move options.\n   * @public\n   */\n  zoomToUser(userId, opts = { animation: { duration: 500 } }) {\n    const presence = this.getCollaborators().find((c) => c.userId === userId);\n    if (!presence)\n      return this;\n    this.batch(() => {\n      if (this.getInstanceState().followingUserId !== null) {\n        this.stopFollowingUser();\n      }\n      const isOnSamePage = presence.currentPageId === this.getCurrentPageId();\n      if (!isOnSamePage) {\n        this.setCurrentPage(presence.currentPageId);\n      }\n      if (opts && opts.animation && !isOnSamePage) {\n        opts.animation = void 0;\n      }\n      this.centerOnPoint(presence.cursor, opts);\n      const { highlightedUserIds } = this.getInstanceState();\n      this.updateInstanceState({ highlightedUserIds: [...highlightedUserIds, userId] });\n      this.timers.setTimeout(() => {\n        const highlightedUserIds2 = [...this.getInstanceState().highlightedUserIds];\n        const index = highlightedUserIds2.indexOf(userId);\n        if (index < 0)\n          return;\n        highlightedUserIds2.splice(index, 1);\n        this.updateInstanceState({ highlightedUserIds: highlightedUserIds2 });\n      }, this.options.collaboratorIdleTimeoutMs);\n    });\n    return this;\n  }\n  // Viewport\n  /** @internal */\n  _willSetInitialBounds = true;\n  /**\n   * Update the viewport. The viewport will measure the size and screen position of its container\n   * element. This should be done whenever the container's position on the screen changes.\n   *\n   * @example\n   * ```ts\n   * editor.updateViewportScreenBounds(new Box(0, 0, 1280, 1024))\n   * editor.updateViewportScreenBounds(new Box(0, 0, 1280, 1024), true)\n   * ```\n   *\n   * @param center - Whether to preserve the viewport page center as the viewport changes.\n   *\n   * @public\n   */\n  updateViewportScreenBounds(screenBounds, center = false) {\n    screenBounds.width = Math.max(screenBounds.width, 1);\n    screenBounds.height = Math.max(screenBounds.height, 1);\n    const insets = [\n      // top\n      screenBounds.minY !== 0,\n      // right\n      document.body.scrollWidth !== screenBounds.maxX,\n      // bottom\n      document.body.scrollHeight !== screenBounds.maxY,\n      // left\n      screenBounds.minX !== 0\n    ];\n    const { screenBounds: prevScreenBounds, insets: prevInsets } = this.getInstanceState();\n    if (screenBounds.equals(prevScreenBounds) && insets.every((v, i) => v === prevInsets[i])) {\n      return this;\n    }\n    const { _willSetInitialBounds } = this;\n    this._willSetInitialBounds = false;\n    if (_willSetInitialBounds) {\n      this.updateInstanceState({ screenBounds: screenBounds.toJson(), insets });\n      this.setCamera(this.getCamera());\n    } else {\n      if (center && !this.getInstanceState().followingUserId) {\n        const before = this.getViewportPageBounds().center;\n        this.updateInstanceState({ screenBounds: screenBounds.toJson(), insets });\n        this.centerOnPoint(before);\n      } else {\n        this.updateInstanceState({ screenBounds: screenBounds.toJson(), insets });\n        this._setCamera(_primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.From({ ...this.getCamera() }));\n      }\n    }\n    this._tickCameraState();\n    return this;\n  }\n  getViewportScreenBounds() {\n    const { x, y, w, h } = this.getInstanceState().screenBounds;\n    return new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box(x, y, w, h);\n  }\n  getViewportScreenCenter() {\n    const viewportScreenBounds = this.getViewportScreenBounds();\n    return new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(\n      viewportScreenBounds.midX - viewportScreenBounds.minX,\n      viewportScreenBounds.midY - viewportScreenBounds.minY\n    );\n  }\n  getViewportPageBounds() {\n    const { w, h } = this.getViewportScreenBounds();\n    const { x: cx, y: cy, z: cz } = this.getCamera();\n    return new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box(-cx, -cy, w / cz, h / cz);\n  }\n  /**\n   * Convert a point in screen space to a point in the current page space.\n   *\n   * @example\n   * ```ts\n   * editor.screenToPage({ x: 100, y: 100 })\n   * ```\n   *\n   * @param point - The point in screen space.\n   *\n   * @public\n   */\n  screenToPage(point) {\n    const { screenBounds } = this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n    const { x: cx, y: cy, z: cz = 1 } = this.getCamera();\n    return new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(\n      (point.x - screenBounds.x) / cz - cx,\n      (point.y - screenBounds.y) / cz - cy,\n      point.z ?? 0.5\n    );\n  }\n  /**\n   * Convert a point in the current page space to a point in current screen space.\n   *\n   * @example\n   * ```ts\n   * editor.pageToScreen({ x: 100, y: 100 })\n   * ```\n   *\n   * @param point - The point in page space.\n   *\n   * @public\n   */\n  pageToScreen(point) {\n    const { screenBounds } = this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n    const { x: cx, y: cy, z: cz = 1 } = this.getCamera();\n    return new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(\n      (point.x + cx) * cz + screenBounds.x,\n      (point.y + cy) * cz + screenBounds.y,\n      point.z ?? 0.5\n    );\n  }\n  /**\n   * Convert a point in the current page space to a point in current viewport space.\n   *\n   * @example\n   * ```ts\n   * editor.pageToViewport({ x: 100, y: 100 })\n   * ```\n   *\n   * @param point - The point in page space.\n   *\n   * @public\n   */\n  pageToViewport(point) {\n    const { x: cx, y: cy, z: cz = 1 } = this.getCamera();\n    return new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec((point.x + cx) * cz, (point.y + cy) * cz, point.z ?? 0.5);\n  }\n  _getCollaboratorsQuery() {\n    return this.store.query.records(\"instance_presence\", () => ({\n      userId: { neq: this.user.getId() }\n    }));\n  }\n  getCollaborators() {\n    const allPresenceRecords = this._getCollaboratorsQuery().get();\n    if (!allPresenceRecords.length)\n      return _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY;\n    const userIds = [...new Set(allPresenceRecords.map((c) => c.userId))].sort();\n    return userIds.map((id) => {\n      const latestPresence = allPresenceRecords.filter((c) => c.userId === id).sort((a, b) => b.lastActivityTimestamp - a.lastActivityTimestamp)[0];\n      return latestPresence;\n    });\n  }\n  getCollaboratorsOnCurrentPage() {\n    const currentPageId = this.getCurrentPageId();\n    return this.getCollaborators().filter((c) => c.currentPageId === currentPageId);\n  }\n  // Following\n  // When we are 'locked on' to a user, our camera is derived from their camera.\n  _isLockedOnFollowingUser = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"isLockedOnFollowingUser\", false);\n  /**\n   * Start viewport-following a user.\n   *\n   * @example\n   * ```ts\n   * editor.startFollowingUser(myUserId)\n   * ```\n   *\n   * @param userId - The id of the user to follow.\n   * @param opts - Options for starting to follow a user.\n   *\n   * @public\n   */\n  startFollowingUser(userId) {\n    this.stopFollowingUser();\n    const leaderPresences = this._getCollaboratorsQuery().get().filter((p) => p.userId === userId);\n    if (!leaderPresences.length) {\n      console.warn(\"User not found\");\n      return this;\n    }\n    const thisUserId = this.user.getId();\n    if (!thisUserId) {\n      console.warn(\"You should set the userId for the current instance before following a user\");\n    }\n    if (leaderPresences.some((p) => p.followingUserId === thisUserId)) {\n      return this;\n    }\n    const latestLeaderPresence = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"latestLeaderPresence\", () => {\n      return this.getCollaborators().find((p) => p.userId === userId);\n    });\n    (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(() => {\n      this.updateInstanceState({ followingUserId: userId }, { history: \"ignore\" });\n      const dispose = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.react)(\"update current page\", () => {\n        const leaderPresence = latestLeaderPresence.get();\n        if (!leaderPresence) {\n          this.stopFollowingUser();\n          return;\n        }\n        if (leaderPresence.currentPageId !== this.getCurrentPageId() && this.getPage(leaderPresence.currentPageId)) {\n          this.history.ignore(() => {\n            this.store.put([\n              { ...this.getInstanceState(), currentPageId: leaderPresence.currentPageId }\n            ]);\n            this._isLockedOnFollowingUser.set(true);\n          });\n        }\n      });\n      const cancel = () => {\n        dispose();\n        this._isLockedOnFollowingUser.set(false);\n        this.off(\"frame\", moveTowardsUser);\n        this.off(\"stop-following\", cancel);\n      };\n      const moveTowardsUser = () => {\n        const leaderPresence = latestLeaderPresence.get();\n        if (!leaderPresence) {\n          this.stopFollowingUser();\n          return;\n        }\n        if (this._isLockedOnFollowingUser.get())\n          return;\n        const animationSpeed = this.user.getAnimationSpeed();\n        if (animationSpeed === 0) {\n          this._isLockedOnFollowingUser.set(true);\n          return;\n        }\n        const targetViewport = this.getViewportPageBoundsForFollowing();\n        if (!targetViewport) {\n          this.stopFollowingUser();\n          return;\n        }\n        const currentViewport = this.getViewportPageBounds();\n        const diffX = Math.abs(targetViewport.minX - currentViewport.minX) + Math.abs(targetViewport.maxX - currentViewport.maxX);\n        const diffY = Math.abs(targetViewport.minY - currentViewport.minY) + Math.abs(targetViewport.maxY - currentViewport.maxY);\n        if (diffX < this.options.followChaseViewportSnap && diffY < this.options.followChaseViewportSnap) {\n          this._isLockedOnFollowingUser.set(true);\n          return;\n        }\n        const t = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.clamp)(animationSpeed * 0.5, 0.1, 0.8);\n        const nextViewport = new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box(\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.lerp)(currentViewport.minX, targetViewport.minX, t),\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.lerp)(currentViewport.minY, targetViewport.minY, t),\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.lerp)(currentViewport.width, targetViewport.width, t),\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.lerp)(currentViewport.height, targetViewport.height, t)\n        );\n        const nextCamera = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(\n          -nextViewport.x,\n          -nextViewport.y,\n          this.getViewportScreenBounds().width / nextViewport.width\n        );\n        this.stopCameraAnimation();\n        this._setCamera(nextCamera);\n      };\n      this.once(\"stop-following\", cancel);\n      this.addListener(\"frame\", moveTowardsUser);\n      moveTowardsUser();\n    });\n    return this;\n  }\n  /**\n   * Stop viewport-following a user.\n   *\n   * @example\n   * ```ts\n   * editor.stopFollowingUser()\n   * ```\n   * @public\n   */\n  stopFollowingUser() {\n    this.history.ignore(() => {\n      this.store.put([this.getCamera()]);\n      this._isLockedOnFollowingUser.set(false);\n      this.updateInstanceState({ followingUserId: null });\n      this.emit(\"stop-following\");\n    });\n    return this;\n  }\n  /** @internal */\n  getUnorderedRenderingShapes(useEditorState) {\n    const renderingShapes = [];\n    let nextIndex = this.options.maxShapesPerPage * 2;\n    let nextBackgroundIndex = this.options.maxShapesPerPage;\n    const erasingShapeIds = this.getErasingShapeIds();\n    const addShapeById = (id, opacity, isAncestorErasing) => {\n      const shape = this.getShape(id);\n      if (!shape)\n        return;\n      opacity *= shape.opacity;\n      let isShapeErasing = false;\n      const util = this.getShapeUtil(shape);\n      if (useEditorState) {\n        isShapeErasing = !isAncestorErasing && erasingShapeIds.includes(id);\n        if (isShapeErasing) {\n          opacity *= 0.32;\n        }\n      }\n      renderingShapes.push({\n        id,\n        shape,\n        util,\n        index: nextIndex,\n        backgroundIndex: nextBackgroundIndex,\n        opacity\n      });\n      nextIndex += 1;\n      nextBackgroundIndex += 1;\n      const childIds = this.getSortedChildIdsForParent(id);\n      if (!childIds.length)\n        return;\n      let backgroundIndexToRestore = null;\n      if (util.providesBackgroundForChildren(shape)) {\n        backgroundIndexToRestore = nextBackgroundIndex;\n        nextBackgroundIndex = nextIndex;\n        nextIndex += this.options.maxShapesPerPage;\n      }\n      for (const childId of childIds) {\n        addShapeById(childId, opacity, isAncestorErasing || isShapeErasing);\n      }\n      if (backgroundIndexToRestore !== null) {\n        nextBackgroundIndex = backgroundIndexToRestore;\n      }\n    };\n    const pages = useEditorState ? [this.getCurrentPage()] : this.getPages();\n    for (const page of pages) {\n      for (const childId of this.getSortedChildIdsForParent(page.id)) {\n        addShapeById(childId, 1, false);\n      }\n    }\n    return renderingShapes;\n  }\n  // Camera state\n  // Camera state does two things: first, it allows us to subscribe to whether\n  // the camera is moving or not; and second, it allows us to update the rendering\n  // shapes on the canvas. Changing the rendering shapes may cause shapes to\n  // unmount / remount in the DOM, which is expensive; and computing visibility is\n  // also expensive in large projects. For this reason, we use a second bounding\n  // box just for rendering, and we only update after the camera stops moving.\n  _cameraState = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"camera state\", \"idle\");\n  _cameraStateTimeoutRemaining = 0;\n  _decayCameraStateTimeout = (elapsed) => {\n    this._cameraStateTimeoutRemaining -= elapsed;\n    if (this._cameraStateTimeoutRemaining > 0)\n      return;\n    this.off(\"tick\", this._decayCameraStateTimeout);\n    this._cameraState.set(\"idle\");\n  };\n  _tickCameraState = () => {\n    this._cameraStateTimeoutRemaining = this.options.cameraMovingTimeoutMs;\n    if (this._cameraState.__unsafe__getWithoutCapture() !== \"idle\")\n      return;\n    this._cameraState.set(\"moving\");\n    this.on(\"tick\", this._decayCameraStateTimeout);\n  };\n  /**\n   * Whether the camera is moving or idle.\n   *\n   * @example\n   * ```ts\n   * editor.getCameraState()\n   * ```\n   *\n   * @public\n   */\n  getCameraState() {\n    return this._cameraState.get();\n  }\n  getRenderingShapes() {\n    const renderingShapes = this.getUnorderedRenderingShapes(true);\n    return renderingShapes.sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.sortById);\n  }\n  _getAllPagesQuery() {\n    return this.store.query.records(\"page\");\n  }\n  getPages() {\n    return this._getAllPagesQuery().get().sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.sortByIndex);\n  }\n  /**\n   * The current page.\n   *\n   * @example\n   * ```ts\n   * editor.getCurrentPage()\n   * ```\n   *\n   * @public\n   */\n  getCurrentPage() {\n    return this.getPage(this.getCurrentPageId());\n  }\n  getCurrentPageId() {\n    return this.getInstanceState().currentPageId;\n  }\n  /**\n   * Get a page.\n   *\n   * @example\n   * ```ts\n   * editor.getPage(myPage.id)\n   * editor.getPage(myPage)\n   * ```\n   *\n   * @param page - The page (or page id) to get.\n   *\n   * @public\n   */\n  getPage(page) {\n    return this.store.get(typeof page === \"string\" ? page : page.id);\n  }\n  /* @internal */\n  _currentPageShapeIds;\n  /**\n   * An array of all of the shapes on the current page.\n   *\n   * @example\n   * ```ts\n   * editor.getCurrentPageIds()\n   * ```\n   *\n   * @public\n   */\n  getCurrentPageShapeIds() {\n    return this._currentPageShapeIds.get();\n  }\n  getCurrentPageShapeIdsSorted() {\n    return Array.from(this.getCurrentPageShapeIds()).sort();\n  }\n  /**\n   * Get the ids of shapes on a page.\n   *\n   * @example\n   * ```ts\n   * const idsOnPage1 = editor.getPageShapeIds('page1')\n   * const idsOnPage2 = editor.getPageShapeIds(myPage2)\n   * ```\n   *\n   * @param page - The page (or page id) to get.\n   *\n   * @public\n   **/\n  getPageShapeIds(page) {\n    const pageId = typeof page === \"string\" ? page : page.id;\n    const result = this.store.query.exec(\"shape\", { parentId: { eq: pageId } });\n    return this.getShapeAndDescendantIds(result.map((s) => s.id));\n  }\n  /**\n   * Set the current page.\n   *\n   * @example\n   * ```ts\n   * editor.setCurrentPage('page1')\n   * editor.setCurrentPage(myPage1)\n   * ```\n   *\n   * @param page - The page (or page id) to set as the current page.\n   *\n   * @public\n   */\n  setCurrentPage(page) {\n    const pageId = typeof page === \"string\" ? page : page.id;\n    if (!this.store.has(pageId)) {\n      console.error(\"Tried to set the current page id to a page that doesn't exist.\");\n      return this;\n    }\n    this.stopFollowingUser();\n    this.complete();\n    return this.batch(\n      () => this.store.put([{ ...this.getInstanceState(), currentPageId: pageId }]),\n      { history: \"record-preserveRedoStack\" }\n    );\n  }\n  /**\n   * Update a page.\n   *\n   * @example\n   * ```ts\n   * editor.updatePage({ id: 'page2', name: 'Page 2' })\n   * ```\n   *\n   * @param partial - The partial of the shape to update.\n   *\n   * @public\n   */\n  updatePage(partial) {\n    if (this.getInstanceState().isReadonly)\n      return this;\n    const prev = this.getPage(partial.id);\n    if (!prev)\n      return this;\n    return this.batch(() => this.store.update(partial.id, (page) => ({ ...page, ...partial })));\n  }\n  /**\n   * Create a page.\n   *\n   * @example\n   * ```ts\n   * editor.createPage(myPage)\n   * editor.createPage({ name: 'Page 2' })\n   * ```\n   *\n   * @param page - The page (or page partial) to create.\n   *\n   * @public\n   */\n  createPage(page) {\n    this.history.batch(() => {\n      if (this.getInstanceState().isReadonly)\n        return;\n      if (this.getPages().length >= this.options.maxPages)\n        return;\n      const pages = this.getPages();\n      const name = (0,_utils_getIncrementedName_mjs__WEBPACK_IMPORTED_MODULE_23__.getIncrementedName)(\n        page.name ?? \"Page 1\",\n        pages.map((p) => p.name)\n      );\n      let index = page.index;\n      if (!index || pages.some((p) => p.index === index)) {\n        index = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexAbove)(pages[pages.length - 1].index);\n      }\n      const newPage = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.PageRecordType.create({\n        meta: {},\n        ...page,\n        name,\n        index\n      });\n      this.store.put([newPage]);\n    });\n    return this;\n  }\n  /**\n   * Delete a page.\n   *\n   * @example\n   * ```ts\n   * editor.deletePage('page1')\n   * ```\n   *\n   * @param id - The id of the page to delete.\n   *\n   * @public\n   */\n  deletePage(page) {\n    const id = typeof page === \"string\" ? page : page.id;\n    this.batch(() => {\n      if (this.getInstanceState().isReadonly)\n        return;\n      const pages = this.getPages();\n      if (pages.length === 1)\n        return;\n      const deletedPage = this.getPage(id);\n      if (!deletedPage)\n        return;\n      if (id === this.getCurrentPageId()) {\n        const index = pages.findIndex((page2) => page2.id === id);\n        const next = pages[index - 1] ?? pages[index + 1];\n        this.setCurrentPage(next.id);\n      }\n      this.store.remove([deletedPage.id]);\n    });\n    return this;\n  }\n  /**\n   * Duplicate a page.\n   *\n   * @param id - The id of the page to duplicate. Defaults to the current page.\n   * @param createId - The id of the new page. Defaults to a new id.\n   *\n   * @public\n   */\n  duplicatePage(page, createId = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.PageRecordType.createId()) {\n    if (this.getPages().length >= this.options.maxPages)\n      return this;\n    const id = typeof page === \"string\" ? page : page.id;\n    const freshPage = this.getPage(id);\n    if (!freshPage)\n      return this;\n    const prevCamera = { ...this.getCamera() };\n    const content = this.getContentFromCurrentPage(this.getSortedChildIdsForParent(freshPage.id));\n    this.batch(() => {\n      const pages = this.getPages();\n      const index = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexBetween)(freshPage.index, pages[pages.indexOf(freshPage) + 1]?.index);\n      this.createPage({ name: freshPage.name + \" Copy\", id: createId, index });\n      this.setCurrentPage(createId);\n      this.setCamera(prevCamera);\n      if (content) {\n        return this.putContentOntoCurrentPage(content);\n      }\n    });\n    return this;\n  }\n  /**\n   * Rename a page.\n   *\n   * @example\n   * ```ts\n   * editor.renamePage('page1', 'My Page')\n   * ```\n   *\n   * @param id - The id of the page to rename.\n   * @param name - The new name.\n   *\n   * @public\n   */\n  renamePage(page, name) {\n    const id = typeof page === \"string\" ? page : page.id;\n    if (this.getInstanceState().isReadonly)\n      return this;\n    this.updatePage({ id, name });\n    return this;\n  }\n  _getAllAssetsQuery() {\n    return this.store.query.records(\"asset\");\n  }\n  /**\n   * Get all assets in the editor.\n   *\n   * @public\n   */\n  getAssets() {\n    return this._getAllAssetsQuery().get();\n  }\n  /**\n   * Create one or more assets.\n   *\n   * @example\n   * ```ts\n   * editor.createAssets([...myAssets])\n   * ```\n   *\n   * @param assets - The assets to create.\n   *\n   * @public\n   */\n  createAssets(assets) {\n    if (this.getInstanceState().isReadonly)\n      return this;\n    if (assets.length <= 0)\n      return this;\n    this.history.ignore(() => this.store.put(assets));\n    return this;\n  }\n  /**\n   * Update one or more assets.\n   *\n   * @example\n   * ```ts\n   * editor.updateAssets([{ id: 'asset1', name: 'New name' }])\n   * ```\n   *\n   * @param assets - The assets to update.\n   *\n   * @public\n   */\n  updateAssets(assets) {\n    if (this.getInstanceState().isReadonly)\n      return this;\n    if (assets.length <= 0)\n      return this;\n    this.history.ignore(() => {\n      this.store.put(\n        assets.map((partial) => ({\n          ...this.store.get(partial.id),\n          ...partial\n        }))\n      );\n    });\n    return this;\n  }\n  /**\n   * Delete one or more assets.\n   *\n   * @example\n   * ```ts\n   * editor.deleteAssets(['asset1', 'asset2'])\n   * ```\n   *\n   * @param ids - The assets to delete.\n   *\n   * @public\n   */\n  deleteAssets(assets) {\n    if (this.getInstanceState().isReadonly)\n      return this;\n    const ids = typeof assets[0] === \"string\" ? assets : assets.map((a) => a.id);\n    if (ids.length <= 0)\n      return this;\n    this.history.ignore(() => this.store.remove(ids));\n    return this;\n  }\n  /**\n   * Get an asset by its id.\n   *\n   * @example\n   * ```ts\n   * editor.getAsset('asset1')\n   * ```\n   *\n   * @param asset - The asset (or asset id) to get.\n   *\n   * @public\n   */\n  getAsset(asset) {\n    return this.store.get(typeof asset === \"string\" ? asset : asset.id);\n  }\n  _getShapeGeometryCache() {\n    return this.store.createComputedCache(\n      \"bounds\",\n      (shape) => this.getShapeUtil(shape).getGeometry(shape),\n      (a, b) => a.props === b.props\n    );\n  }\n  /**\n   * Get the geometry of a shape.\n   *\n   * @example\n   * ```ts\n   * editor.getShapeGeometry(myShape)\n   * editor.getShapeGeometry(myShapeId)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the geometry for.\n   *\n   * @public\n   */\n  getShapeGeometry(shape) {\n    return this._getShapeGeometryCache().get(typeof shape === \"string\" ? shape : shape.id);\n  }\n  _getShapeHandlesCache() {\n    return this.store.createComputedCache(\"handles\", (shape) => {\n      return this.getShapeUtil(shape).getHandles?.(shape);\n    });\n  }\n  /**\n   * Get the handles (if any) for a shape.\n   *\n   * @example\n   * ```ts\n   * editor.getShapeHandles(myShape)\n   * editor.getShapeHandles(myShapeId)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the handles for.\n   * @public\n   */\n  getShapeHandles(shape) {\n    return this._getShapeHandlesCache().get(typeof shape === \"string\" ? shape : shape.id);\n  }\n  /**\n   * Get the local transform for a shape as a matrix model. This transform reflects both its\n   * translation (x, y) from from either its parent's top left corner, if the shape's parent is\n   * another shape, or else from the 0,0 of the page, if the shape's parent is the page; and the\n   * shape's rotation.\n   *\n   * @example\n   * ```ts\n   * editor.getShapeLocalTransform(myShape)\n   * ```\n   *\n   * @param shape - The shape to get the local transform for.\n   *\n   * @public\n   */\n  getShapeLocalTransform(shape) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const freshShape = this.getShape(id);\n    if (!freshShape)\n      throw Error(\"Editor.getTransform: shape not found\");\n    return _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.Identity().translate(freshShape.x, freshShape.y).rotate(freshShape.rotation);\n  }\n  _getShapePageTransformCache() {\n    return this.store.createComputedCache(\"pageTransformCache\", (shape) => {\n      if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(shape.parentId)) {\n        return this.getShapeLocalTransform(shape);\n      }\n      const parentTransform = this._getShapePageTransformCache().get(shape.parentId) ?? _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.Identity();\n      return _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.Compose(parentTransform, this.getShapeLocalTransform(shape));\n    });\n  }\n  /**\n   * Get the local transform of a shape's parent as a matrix model.\n   *\n   * @example\n   * ```ts\n   * editor.getShapeParentTransform(myShape)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the parent transform for.\n   *\n   * @public\n   */\n  getShapeParentTransform(shape) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const freshShape = this.getShape(id);\n    if (!freshShape || (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(freshShape.parentId))\n      return _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.Identity();\n    return this._getShapePageTransformCache().get(freshShape.parentId) ?? _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.Identity();\n  }\n  /**\n   * Get the transform of a shape in the current page space.\n   *\n   * @example\n   * ```ts\n   * editor.getShapePageTransform(myShape)\n   * editor.getShapePageTransform(myShapeId)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the page transform for.\n   *\n   * @public\n   */\n  getShapePageTransform(shape) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    return this._getShapePageTransformCache().get(id) ?? _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.Identity();\n  }\n  _getShapePageBoundsCache() {\n    return this.store.createComputedCache(\"pageBoundsCache\", (shape) => {\n      const pageTransform = this._getShapePageTransformCache().get(shape.id);\n      if (!pageTransform)\n        return new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box();\n      const result = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.FromPoints(\n        _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.applyToPoints(pageTransform, this.getShapeGeometry(shape).vertices)\n      );\n      return result;\n    });\n  }\n  /**\n   * Get the bounds of a shape in the current page space.\n   *\n   * @example\n   * ```ts\n   * editor.getShapePageBounds(myShape)\n   * editor.getShapePageBounds(myShapeId)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the bounds for.\n   *\n   * @public\n   */\n  getShapePageBounds(shape) {\n    return this._getShapePageBoundsCache().get(typeof shape === \"string\" ? shape : shape.id);\n  }\n  _getShapeClipPathCache() {\n    return this.store.createComputedCache(\"clipPathCache\", (shape) => {\n      const pageMask = this._getShapeMaskCache().get(shape.id);\n      if (!pageMask)\n        return void 0;\n      if (pageMask.length === 0) {\n        return `polygon(0px 0px, 0px 0px, 0px 0px)`;\n      }\n      const pageTransform = this._getShapePageTransformCache().get(shape.id);\n      if (!pageTransform)\n        return void 0;\n      const localMask = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.applyToPoints(_primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.Inverse(pageTransform), pageMask);\n      return `polygon(${localMask.map((p) => `${p.x}px ${p.y}px`).join(\",\")})`;\n    });\n  }\n  /**\n   * Get the clip path for a shape.\n   *\n   * @example\n   * ```ts\n   * const clipPath = editor.getShapeClipPath(shape)\n   * const clipPath = editor.getShapeClipPath(shape.id)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the clip path for.\n   *\n   * @returns The clip path or undefined.\n   *\n   * @public\n   */\n  getShapeClipPath(shape) {\n    return this._getShapeClipPathCache().get(typeof shape === \"string\" ? shape : shape.id);\n  }\n  _getShapeMaskCache() {\n    return this.store.createComputedCache(\"pageMaskCache\", (shape) => {\n      if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(shape.parentId))\n        return void 0;\n      const frameAncestors = this.getShapeAncestors(shape.id).filter(\n        (shape2) => this.isShapeOfType(shape2, \"frame\")\n      );\n      if (frameAncestors.length === 0)\n        return void 0;\n      const pageMask = frameAncestors.map(\n        (s) => (\n          // Apply the frame transform to the frame outline to get the frame outline in the current page space\n          (this._getShapePageTransformCache().get(s.id).applyToPoints(this.getShapeGeometry(s).vertices))\n        )\n      ).reduce((acc, b) => {\n        if (!(b && acc))\n          return void 0;\n        const intersection = (0,_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_18__.intersectPolygonPolygon)(acc, b);\n        if (intersection) {\n          return intersection.map(_primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Cast);\n        }\n        return [];\n      });\n      return pageMask;\n    });\n  }\n  /**\n   * Get the mask (in the current page space) for a shape.\n   *\n   * @example\n   * ```ts\n   * const pageMask = editor.getShapeMask(shape.id)\n   * ```\n   *\n   * @param id - The id of the shape to get the mask for.\n   *\n   * @returns The mask for the shape.\n   *\n   * @public\n   */\n  getShapeMask(shape) {\n    return this._getShapeMaskCache().get(typeof shape === \"string\" ? shape : shape.id);\n  }\n  /**\n   * Get the bounds of a shape in the current page space, incorporating any masks. For example, if the\n   * shape were the child of a frame and was half way out of the frame, the bounds would be the half\n   * of the shape that was in the frame.\n   *\n   * @example\n   * ```ts\n   * editor.getShapeMaskedPageBounds(myShape)\n   * editor.getShapeMaskedPageBounds(myShapeId)\n   * ```\n   *\n   * @param shape - The shape to get the masked bounds for.\n   *\n   * @public\n   */\n  getShapeMaskedPageBounds(shape) {\n    if (typeof shape !== \"string\")\n      shape = shape.id;\n    return this._getShapeMaskedPageBoundsCache().get(shape);\n  }\n  _getShapeMaskedPageBoundsCache() {\n    return this.store.createComputedCache(\"shapeMaskedPageBoundsCache\", (shape) => {\n      const pageBounds = this._getShapePageBoundsCache().get(shape.id);\n      if (!pageBounds)\n        return;\n      const pageMask = this._getShapeMaskCache().get(shape.id);\n      if (pageMask) {\n        if (pageMask.length === 0)\n          return void 0;\n        const { corners } = pageBounds;\n        if (corners.every((p, i) => p && _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Equals(p, pageMask[i])))\n          return pageBounds.clone();\n        const intersection = (0,_primitives_intersect_mjs__WEBPACK_IMPORTED_MODULE_18__.intersectPolygonPolygon)(pageMask, corners);\n        if (!intersection)\n          return;\n        return _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.FromPoints(intersection);\n      }\n      return pageBounds;\n    });\n  }\n  /**\n   * Get the ancestors of a shape.\n   *\n   * @example\n   * ```ts\n   * const ancestors = editor.getShapeAncestors(myShape)\n   * const ancestors = editor.getShapeAncestors(myShapeId)\n   * ```\n   *\n   * @param shape - The shape (or shape id) to get the ancestors for.\n   *\n   * @public\n   */\n  getShapeAncestors(shape, acc = []) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const freshShape = this.getShape(id);\n    if (!freshShape)\n      return acc;\n    const parentId = freshShape.parentId;\n    if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(parentId)) {\n      acc.reverse();\n      return acc;\n    }\n    const parent = this.store.get(parentId);\n    if (!parent)\n      return acc;\n    acc.push(parent);\n    return this.getShapeAncestors(parent, acc);\n  }\n  /**\n   * Find the first ancestor matching the given predicate\n   *\n   * @example\n   * ```ts\n   * const ancestor = editor.findShapeAncestor(myShape)\n   * const ancestor = editor.findShapeAncestor(myShape.id)\n   * const ancestor = editor.findShapeAncestor(myShape.id, (shape) => shape.type === 'frame')\n   * ```\n   *\n   * @param shape - The shape to check the ancestors for.\n   *\n   * @public\n   */\n  findShapeAncestor(shape, predicate) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const freshShape = this.getShape(id);\n    if (!freshShape)\n      return;\n    const parentId = freshShape.parentId;\n    if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(parentId))\n      return;\n    const parent = this.getShape(parentId);\n    if (!parent)\n      return;\n    return predicate(parent) ? parent : this.findShapeAncestor(parent, predicate);\n  }\n  /**\n   * Returns true if the the given shape has the given ancestor.\n   *\n   * @param shape - The shape.\n   * @param ancestorId - The id of the ancestor.\n   *\n   * @public\n   */\n  hasAncestor(shape, ancestorId) {\n    const id = typeof shape === \"string\" ? shape : shape?.id;\n    const freshShape = id && this.getShape(id);\n    if (!freshShape)\n      return false;\n    if (freshShape.parentId === ancestorId)\n      return true;\n    return this.hasAncestor(this.getShapeParent(freshShape), ancestorId);\n  }\n  /**\n   * Get the common ancestor of two or more shapes that matches a predicate.\n   *\n   * @param shapes - The shapes (or shape ids) to check.\n   * @param predicate - The predicate to match.\n   */\n  findCommonAncestor(shapes, predicate) {\n    if (shapes.length === 0) {\n      return;\n    }\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    const freshShapes = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id)));\n    if (freshShapes.length === 1) {\n      const parentId = freshShapes[0].parentId;\n      if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(parentId)) {\n        return;\n      }\n      return predicate ? this.findShapeAncestor(freshShapes[0], predicate)?.id : parentId;\n    }\n    const [nodeA, ...others] = freshShapes;\n    let ancestor = this.getShapeParent(nodeA);\n    while (ancestor) {\n      if (predicate && !predicate(ancestor)) {\n        ancestor = this.getShapeParent(ancestor);\n        continue;\n      }\n      if (others.every((shape) => this.hasAncestor(shape, ancestor.id))) {\n        return ancestor.id;\n      }\n      ancestor = this.getShapeParent(ancestor);\n    }\n    return void 0;\n  }\n  isShapeOrAncestorLocked(arg) {\n    const shape = typeof arg === \"string\" ? this.getShape(arg) : arg;\n    if (shape === void 0)\n      return false;\n    if (shape.isLocked)\n      return true;\n    return this.isShapeOrAncestorLocked(this.getShapeParent(shape));\n  }\n  _notVisibleShapes() {\n    return (0,_derivations_notVisibleShapes_mjs__WEBPACK_IMPORTED_MODULE_28__.notVisibleShapes)(this);\n  }\n  getCulledShapes() {\n    const notVisibleShapes2 = this._notVisibleShapes().get();\n    const selectedShapeIds = this.getSelectedShapeIds();\n    const editingId = this.getEditingShapeId();\n    const culledShapes = new Set(notVisibleShapes2);\n    if (editingId) {\n      culledShapes.delete(editingId);\n    }\n    selectedShapeIds.forEach((id) => {\n      culledShapes.delete(id);\n    });\n    return culledShapes;\n  }\n  getCurrentPageBounds() {\n    let commonBounds;\n    this.getCurrentPageShapeIdsSorted().forEach((shapeId) => {\n      const bounds = this.getShapeMaskedPageBounds(shapeId);\n      if (!bounds)\n        return;\n      if (!commonBounds) {\n        commonBounds = bounds.clone();\n      } else {\n        commonBounds = commonBounds.expand(bounds);\n      }\n    });\n    return commonBounds;\n  }\n  /**\n   * Get the top-most selected shape at the given point, ignoring groups.\n   *\n   * @param point - The point to check.\n   *\n   * @returns The top-most selected shape at the given point, or undefined if there is no shape at the point.\n   */\n  getSelectedShapeAtPoint(point) {\n    const selectedShapeIds = this.getSelectedShapeIds();\n    return this.getCurrentPageShapesSorted().filter((shape) => shape.type !== \"group\" && selectedShapeIds.includes(shape.id)).reverse().find((shape) => this.isPointInShape(shape, point, { hitInside: true, margin: 0 }));\n  }\n  /**\n   * Get the shape at the current point.\n   *\n   * @param point - The point to check.\n   * @param opts - Options for the check: `hitInside` to check if the point is inside the shape, `margin` to check if the point is within a margin of the shape, `hitFrameInside` to check if the point is inside the frame, and `filter` to filter the shapes to check.\n   *\n   * @returns The shape at the given point, or undefined if there is no shape at the point.\n   */\n  getShapeAtPoint(point, opts = {}) {\n    const zoomLevel = this.getZoomLevel();\n    const viewportPageBounds = this.getViewportPageBounds();\n    const {\n      filter,\n      margin = 0,\n      hitLocked = false,\n      hitLabels = false,\n      hitInside = false,\n      hitFrameInside = false\n    } = opts;\n    let inHollowSmallestArea = Infinity;\n    let inHollowSmallestAreaHit = null;\n    let inMarginClosestToEdgeDistance = Infinity;\n    let inMarginClosestToEdgeHit = null;\n    const shapesToCheck = (opts.renderingOnly ? this.getCurrentPageRenderingShapesSorted() : this.getCurrentPageShapesSorted()).filter((shape) => {\n      if (shape.isLocked && !hitLocked || this.isShapeOfType(shape, \"group\"))\n        return false;\n      const pageMask = this.getShapeMask(shape);\n      if (pageMask && !(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.pointInPolygon)(point, pageMask))\n        return false;\n      if (filter)\n        return filter(shape);\n      return true;\n    });\n    for (let i = shapesToCheck.length - 1; i >= 0; i--) {\n      const shape = shapesToCheck[i];\n      const geometry = this.getShapeGeometry(shape);\n      const isGroup = geometry instanceof _primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_17__.Group2d;\n      const pointInShapeSpace = this.getPointInShapeSpace(shape, point);\n      if (this.isShapeOfType(shape, \"arrow\") || this.isShapeOfType(shape, \"geo\") && shape.props.fill === \"none\") {\n        if (shape.props.text.trim()) {\n          for (const childGeometry of geometry.children) {\n            if (childGeometry.isLabel && childGeometry.isPointInBounds(pointInShapeSpace)) {\n              return shape;\n            }\n          }\n        }\n      }\n      if (this.isShapeOfType(shape, \"frame\")) {\n        const distance2 = geometry.distanceToPoint(pointInShapeSpace, hitInside);\n        if (Math.abs(distance2) <= margin) {\n          return inMarginClosestToEdgeHit || shape;\n        }\n        if (geometry.hitTestPoint(pointInShapeSpace, 0, true)) {\n          return inMarginClosestToEdgeHit || inHollowSmallestAreaHit || (hitFrameInside ? shape : void 0);\n        }\n        continue;\n      }\n      let distance;\n      if (isGroup) {\n        let minDistance = Infinity;\n        for (const childGeometry of geometry.children) {\n          if (childGeometry.isLabel && !hitLabels)\n            continue;\n          const tDistance = childGeometry.distanceToPoint(pointInShapeSpace, hitInside);\n          if (tDistance < minDistance) {\n            minDistance = tDistance;\n          }\n        }\n        distance = minDistance;\n      } else {\n        if (margin === 0 && (geometry.bounds.w < 1 || geometry.bounds.h < 1)) {\n          distance = geometry.distanceToPoint(pointInShapeSpace, hitInside);\n        } else {\n          if (geometry.bounds.containsPoint(pointInShapeSpace, margin)) {\n            distance = geometry.distanceToPoint(pointInShapeSpace, hitInside);\n          } else {\n            distance = Infinity;\n          }\n        }\n      }\n      if (geometry.isClosed) {\n        if (distance <= margin) {\n          if (geometry.isFilled || isGroup && geometry.children[0].isFilled) {\n            return inMarginClosestToEdgeHit || shape;\n          } else {\n            if (this.getShapePageBounds(shape).contains(viewportPageBounds))\n              continue;\n            if (Math.abs(distance) < margin) {\n              if (Math.abs(distance) < inMarginClosestToEdgeDistance) {\n                inMarginClosestToEdgeDistance = Math.abs(distance);\n                inMarginClosestToEdgeHit = shape;\n              }\n            } else if (!inMarginClosestToEdgeHit) {\n              const { area } = geometry;\n              if (area < inHollowSmallestArea) {\n                inHollowSmallestArea = area;\n                inHollowSmallestAreaHit = shape;\n              }\n            }\n          }\n        }\n      } else {\n        if (distance < this.options.hitTestMargin / zoomLevel) {\n          return shape;\n        }\n      }\n    }\n    return inMarginClosestToEdgeHit || inHollowSmallestAreaHit || void 0;\n  }\n  /**\n   * Get the shapes, if any, at a given page point.\n   *\n   * @example\n   * ```ts\n   * editor.getShapesAtPoint({ x: 100, y: 100 })\n   * editor.getShapesAtPoint({ x: 100, y: 100 }, { hitInside: true, exact: true })\n   * ```\n   *\n   * @param point - The page point to test.\n   *\n   * @public\n   */\n  getShapesAtPoint(point, opts = {}) {\n    return this.getCurrentPageShapes().filter((shape) => this.isPointInShape(shape, point, opts));\n  }\n  /**\n   * Test whether a point (in the current page space) will will a shape. This method takes into account masks,\n   * such as when a shape is the child of a frame and is partially clipped by the frame.\n   *\n   * @example\n   * ```ts\n   * editor.isPointInShape({ x: 100, y: 100 }, myShape)\n   * ```\n   *\n   * @param shape - The shape to test against.\n   * @param point - The page point to test (in the current page space).\n   * @param hitInside - Whether to count as a hit if the point is inside of a closed shape.\n   *\n   * @public\n   */\n  isPointInShape(shape, point, opts = {}) {\n    const { hitInside = false, margin = 0 } = opts;\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const pageMask = this.getShapeMask(id);\n    if (pageMask && !(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.pointInPolygon)(point, pageMask))\n      return false;\n    return this.getShapeGeometry(id).hitTestPoint(\n      this.getPointInShapeSpace(shape, point),\n      margin,\n      hitInside\n    );\n  }\n  /**\n   * Convert a point in the current page space to a point in the local space of a shape. For example, if a\n   * shape's page point were `{ x: 100, y: 100 }`, a page point at `{ x: 110, y: 110 }` would be at\n   * `{ x: 10, y: 10 }` in the shape's local space.\n   *\n   * @example\n   * ```ts\n   * editor.getPointInShapeSpace(myShape, { x: 100, y: 100 })\n   * ```\n   *\n   * @param shape - The shape to get the point in the local space of.\n   * @param point - The page point to get in the local space of the shape.\n   *\n   * @public\n   */\n  getPointInShapeSpace(shape, point) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    return this._getShapePageTransformCache().get(id).clone().invert().applyToPoint(point);\n  }\n  /**\n   * Convert a delta in the current page space to a point in the local space of a shape's parent.\n   *\n   * @example\n   * ```ts\n   * editor.getPointInParentSpace(myShape.id, { x: 100, y: 100 })\n   * ```\n   *\n   * @param shape - The shape to get the point in the local space of.\n   * @param point - The page point to get in the local space of the shape.\n   *\n   * @public\n   */\n  getPointInParentSpace(shape, point) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const freshShape = this.getShape(id);\n    if (!freshShape)\n      return new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(0, 0);\n    if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(freshShape.parentId))\n      return _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.From(point);\n    const parentTransform = this.getShapePageTransform(freshShape.parentId);\n    if (!parentTransform)\n      return _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.From(point);\n    return parentTransform.clone().invert().applyToPoint(point);\n  }\n  getCurrentPageShapes() {\n    return Array.from(this.getCurrentPageShapeIds(), (id) => this.store.get(id));\n  }\n  getCurrentPageShapesSorted() {\n    const result = [];\n    const topLevelShapes = this.getSortedChildIdsForParent(this.getCurrentPageId());\n    for (let i = 0, n = topLevelShapes.length; i < n; i++) {\n      pushShapeWithDescendants(this, topLevelShapes[i], result);\n    }\n    return result;\n  }\n  getCurrentPageRenderingShapesSorted() {\n    const culledShapes = this.getCulledShapes();\n    return this.getCurrentPageShapesSorted().filter(({ id }) => !culledShapes.has(id));\n  }\n  isShapeOfType(arg, type) {\n    const shape = typeof arg === \"string\" ? this.getShape(arg) : arg;\n    if (!shape)\n      return false;\n    return shape.type === type;\n  }\n  /**\n   * Get a shape by its id.\n   *\n   * @example\n   * ```ts\n   * editor.getShape('box1')\n   * ```\n   *\n   * @param id - The id of the shape to get.\n   *\n   * @public\n   */\n  getShape(shape) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(id))\n      return void 0;\n    return this.store.get(id);\n  }\n  /**\n   * Get the parent shape for a given shape. Returns undefined if the shape is the direct child of\n   * the page.\n   *\n   * @example\n   * ```ts\n   * editor.getShapeParent(myShape)\n   * ```\n   *\n   * @public\n   */\n  getShapeParent(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id;\n    if (!id)\n      return void 0;\n    const freshShape = this.getShape(id);\n    if (freshShape === void 0 || !(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(freshShape.parentId))\n      return void 0;\n    return this.store.get(freshShape.parentId);\n  }\n  /**\n   * If siblingShape and targetShape are siblings, this returns targetShape. If targetShape has an\n   * ancestor who is a sibling of siblingShape, this returns that ancestor. Otherwise, this returns\n   * undefined.\n   *\n   * @internal\n   */\n  getShapeNearestSibling(siblingShape, targetShape) {\n    if (!targetShape) {\n      return void 0;\n    }\n    if (targetShape.parentId === siblingShape.parentId) {\n      return targetShape;\n    }\n    const ancestor = this.findShapeAncestor(\n      targetShape,\n      (ancestor2) => ancestor2.parentId === siblingShape.parentId\n    );\n    return ancestor;\n  }\n  /**\n   * Get whether the given shape is the descendant of the given page.\n   *\n   * @example\n   * ```ts\n   * editor.isShapeInPage(myShape)\n   * editor.isShapeInPage(myShape, 'page1')\n   * ```\n   *\n   * @param shape - The shape to check.\n   * @param pageId - The id of the page to check against. Defaults to the current page.\n   *\n   * @public\n   */\n  isShapeInPage(shape, pageId = this.getCurrentPageId()) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const shapeToCheck = this.getShape(id);\n    if (!shapeToCheck)\n      return false;\n    let shapeIsInPage = false;\n    if (shapeToCheck.parentId === pageId) {\n      shapeIsInPage = true;\n    } else {\n      let parent = this.getShape(shapeToCheck.parentId);\n      isInPageSearch:\n        while (parent) {\n          if (parent.parentId === pageId) {\n            shapeIsInPage = true;\n            break isInPageSearch;\n          }\n          parent = this.getShape(parent.parentId);\n        }\n    }\n    return shapeIsInPage;\n  }\n  /**\n   * Get the id of the containing page for a given shape.\n   *\n   * @param shape - The shape to get the page id for.\n   *\n   * @returns The id of the page that contains the shape, or undefined if the shape is undefined.\n   *\n   * @public\n   */\n  getAncestorPageId(shape) {\n    const id = typeof shape === \"string\" ? shape : shape?.id;\n    const _shape = id && this.getShape(id);\n    if (!_shape)\n      return void 0;\n    if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(_shape.parentId)) {\n      return _shape.parentId;\n    } else {\n      return this.getAncestorPageId(this.getShape(_shape.parentId));\n    }\n  }\n  // Parents and children\n  /**\n   * A cache of parents to children.\n   *\n   * @internal\n   */\n  _parentIdsToChildIds;\n  /**\n   * Reparent shapes to a new parent. This operation preserves the shape's current page positions /\n   * rotations.\n   *\n   * @example\n   * ```ts\n   * editor.reparentShapes([box1, box2], 'frame1')\n   * editor.reparentShapes([box1.id, box2.id], 'frame1')\n   * editor.reparentShapes([box1.id, box2.id], 'frame1', 4)\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) of the shapes to reparent.\n   * @param parentId - The id of the new parent shape.\n   * @param insertIndex - The index to insert the children.\n   *\n   * @public\n   */\n  reparentShapes(shapes, parentId, insertIndex) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (ids.length === 0)\n      return this;\n    const changes = [];\n    const parentTransform = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(parentId) ? _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.Identity() : this.getShapePageTransform(parentId);\n    const parentPageRotation = parentTransform.rotation();\n    let indices = [];\n    const sibs = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(this.getSortedChildIdsForParent(parentId).map((id) => this.getShape(id)));\n    if (insertIndex) {\n      const sibWithInsertIndex = sibs.find((s) => s.index === insertIndex);\n      if (sibWithInsertIndex) {\n        const sibAbove = sibs[sibs.indexOf(sibWithInsertIndex) + 1];\n        if (sibAbove) {\n          indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndicesBetween)(insertIndex, sibAbove.index, ids.length);\n        } else {\n          indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndicesAbove)(insertIndex, ids.length);\n        }\n      } else {\n        const sibAbove = sibs.sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.sortByIndex).find((s) => s.index > insertIndex);\n        if (sibAbove) {\n          indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndicesBetween)(insertIndex, sibAbove.index, ids.length);\n        } else {\n          indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndicesAbove)(insertIndex, ids.length);\n        }\n      }\n    } else {\n      const sib = sibs.length && sibs[sibs.length - 1];\n      indices = sib ? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndicesAbove)(sib.index, ids.length) : (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndices)(ids.length);\n    }\n    const invertedParentTransform = parentTransform.clone().invert();\n    const shapesToReparent = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id)));\n    const lockedShapes = shapesToReparent.filter((shape) => shape.isLocked);\n    if (lockedShapes.length) {\n      this.updateShapes(lockedShapes.map(({ id, type }) => ({ id, type, isLocked: false })));\n    }\n    for (let i = 0; i < shapesToReparent.length; i++) {\n      const shape = shapesToReparent[i];\n      const pageTransform = this.getShapePageTransform(shape);\n      if (!pageTransform)\n        continue;\n      const pagePoint = pageTransform.point();\n      if (!pagePoint)\n        continue;\n      const newPoint = invertedParentTransform.applyToPoint(pagePoint);\n      const newRotation = pageTransform.rotation() - parentPageRotation;\n      changes.push({\n        id: shape.id,\n        type: shape.type,\n        parentId,\n        x: newPoint.x,\n        y: newPoint.y,\n        rotation: newRotation,\n        index: indices[i],\n        isLocked: shape.isLocked\n        // this will re-lock locked shapes\n      });\n    }\n    this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Get the index above the highest child of a given parent.\n   *\n   * @param parentId - The id of the parent.\n   *\n   * @returns The index.\n   *\n   * @public\n   */\n  getHighestIndexForParent(parent) {\n    const parentId = typeof parent === \"string\" ? parent : parent.id;\n    const children = this._parentIdsToChildIds.get()[parentId];\n    if (!children || children.length === 0) {\n      return \"a1\";\n    }\n    const shape = this.getShape(children[children.length - 1]);\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexAbove)(shape.index);\n  }\n  /**\n   * Get an array of all the children of a shape.\n   *\n   * @example\n   * ```ts\n   * editor.getSortedChildIdsForParent('frame1')\n   * ```\n   *\n   * @param parentId - The id of the parent shape.\n   *\n   * @public\n   */\n  getSortedChildIdsForParent(parent) {\n    const parentId = typeof parent === \"string\" ? parent : parent.id;\n    const ids = this._parentIdsToChildIds.get()[parentId];\n    if (!ids)\n      return _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY;\n    return ids;\n  }\n  /**\n   * Run a visitor function for all descendants of a shape.\n   *\n   * @example\n   * ```ts\n   * editor.visitDescendants('frame1', myCallback)\n   * ```\n   *\n   * @param parentId - The id of the parent shape.\n   * @param visitor - The visitor function.\n   *\n   * @public\n   */\n  visitDescendants(parent, visitor) {\n    const parentId = typeof parent === \"string\" ? parent : parent.id;\n    const children = this.getSortedChildIdsForParent(parentId);\n    for (const id of children) {\n      if (visitor(id) === false)\n        continue;\n      this.visitDescendants(id, visitor);\n    }\n    return this;\n  }\n  /**\n   * Get the shape ids of all descendants of the given shapes (including the shapes themselves). IDs are returned in z-index order.\n   *\n   * @param ids - The ids of the shapes to get descendants of.\n   *\n   * @returns The descendant ids.\n   *\n   * @public\n   */\n  getShapeAndDescendantIds(ids) {\n    const shapeIds = /* @__PURE__ */ new Set();\n    for (const shape of ids.map((id) => this.getShape(id)).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.sortByIndex)) {\n      shapeIds.add(shape.id);\n      this.visitDescendants(shape, (descendantId) => {\n        shapeIds.add(descendantId);\n      });\n    }\n    return shapeIds;\n  }\n  /**\n   * Get the shape that some shapes should be dropped on at a given point.\n   *\n   * @param point - The point to find the parent for.\n   * @param droppingShapes - The shapes that are being dropped.\n   *\n   * @returns The shape to drop on.\n   *\n   * @public\n   */\n  getDroppingOverShape(point, droppingShapes = []) {\n    const currentPageShapesSorted = this.getCurrentPageShapesSorted();\n    for (let i = currentPageShapesSorted.length - 1; i >= 0; i--) {\n      const shape = currentPageShapesSorted[i];\n      if (\n        // don't allow dropping on selected shapes\n        this.getSelectedShapeIds().includes(shape.id) || // only allow shapes that can receive children\n        !this.getShapeUtil(shape).canDropShapes(shape, droppingShapes) || // don't allow dropping a shape on itself or one of it's children\n        droppingShapes.find((s) => s.id === shape.id || this.hasAncestor(shape, s.id))\n      ) {\n        continue;\n      }\n      const maskedPageBounds = this.getShapeMaskedPageBounds(shape.id);\n      if (maskedPageBounds && maskedPageBounds.containsPoint(point) && this.getShapeGeometry(shape).hitTestPoint(this.getPointInShapeSpace(shape, point), 0, true)) {\n        return shape;\n      }\n    }\n  }\n  /**\n   * Get the shape that should be selected when you click on a given shape, assuming there is\n   * nothing already selected. It will not return anything higher than or including the current\n   * focus layer.\n   *\n   * @param shape - The shape to get the outermost selectable shape for.\n   * @param filter - A function to filter the selectable shapes.\n   *\n   * @returns The outermost selectable shape.\n   *\n   * @public\n   */\n  getOutermostSelectableShape(shape, filter) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const freshShape = this.getShape(id);\n    let match = freshShape;\n    let node = freshShape;\n    const focusedGroup = this.getFocusedGroup();\n    while (node) {\n      if (this.isShapeOfType(node, \"group\") && focusedGroup?.id !== node.id && !this.hasAncestor(focusedGroup, node.id) && (filter?.(node) ?? true)) {\n        match = node;\n      } else if (focusedGroup?.id === node.id) {\n        break;\n      }\n      node = this.getShapeParent(node);\n    }\n    return match;\n  }\n  _getBindingsIndexCache() {\n    const index = (0,_derivations_bindingsIndex_mjs__WEBPACK_IMPORTED_MODULE_27__.bindingsIndex)(this);\n    return this.store.createComputedCache(\"bindingsIndex\", (shape) => {\n      return index.get().get(shape.id);\n    });\n  }\n  /**\n   * Get a binding from the store by its ID if it exists.\n   */\n  getBinding(id) {\n    return this.store.get(id);\n  }\n  /**\n   * Get all bindings of a certain type _from_ a particular shape. These are the bindings whose\n   * `fromId` matched the shape's ID.\n   */\n  getBindingsFromShape(shape, type) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    return this.getBindingsInvolvingShape(id).filter(\n      (b) => b.fromId === id && b.type === type\n    );\n  }\n  /**\n   * Get all bindings of a certain type _to_ a particular shape. These are the bindings whose\n   * `toId` matches the shape's ID.\n   */\n  getBindingsToShape(shape, type) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    return this.getBindingsInvolvingShape(id).filter(\n      (b) => b.toId === id && b.type === type\n    );\n  }\n  /**\n   * Get all bindings involving a particular shape. This includes bindings where the shape is the\n   * `fromId` or `toId`. If a type is provided, only bindings of that type are returned.\n   */\n  getBindingsInvolvingShape(shape, type) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    const result = this._getBindingsIndexCache().get(id) ?? _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY;\n    if (!type)\n      return result;\n    return result.filter((b) => b.type === type);\n  }\n  /**\n   * Create bindings from a list of partial bindings. You can omit the ID and most props of a\n   * binding, but the `type`, `toId`, and `fromId` must all be provided.\n   */\n  createBindings(partials) {\n    const bindings = [];\n    for (const partial of partials) {\n      const fromShape = this.getShape(partial.fromId);\n      const toShape = this.getShape(partial.toId);\n      if (!fromShape || !toShape)\n        continue;\n      if (!this.canBindShapes({ fromShape, toShape, binding: partial }))\n        continue;\n      const util = this.getBindingUtil(partial.type);\n      const defaultProps = util.getDefaultProps();\n      const binding = this.store.schema.types.binding.create({\n        ...partial,\n        id: partial.id ?? (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createBindingId)(),\n        props: {\n          ...defaultProps,\n          ...partial.props\n        }\n      });\n      bindings.push(binding);\n    }\n    this.store.put(bindings);\n    return this;\n  }\n  /**\n   * Create a single binding from a partial. You can omit the ID and most props of a binding, but\n   * the `type`, `toId`, and `fromId` must all be provided.\n   */\n  createBinding(partial) {\n    return this.createBindings([partial]);\n  }\n  /**\n   * Update bindings from a list of partial bindings. Each partial must include an ID, which will\n   * be used to match the binding to it's existing record. If there is no existing record, that\n   * binding is skipped. The changes from the partial are merged into the existing record.\n   */\n  updateBindings(partials) {\n    const updated = [];\n    for (const partial of partials) {\n      if (!partial)\n        continue;\n      const current = this.getBinding(partial.id);\n      if (!current)\n        continue;\n      const updatedBinding = applyPartialToRecordWithProps(current, partial);\n      if (updatedBinding === current)\n        continue;\n      const fromShape = this.getShape(updatedBinding.fromId);\n      const toShape = this.getShape(updatedBinding.toId);\n      if (!fromShape || !toShape)\n        continue;\n      if (!this.canBindShapes({ fromShape, toShape, binding: updatedBinding }))\n        continue;\n      updated.push(updatedBinding);\n    }\n    this.store.put(updated);\n    return this;\n  }\n  /**\n   * Update a binding from a partial binding. Each partial must include an ID, which will be used\n   * to match the binding to it's existing record. If there is no existing record, that binding is\n   * skipped. The changes from the partial are merged into the existing record.\n   */\n  updateBinding(partial) {\n    return this.updateBindings([partial]);\n  }\n  /**\n   * Delete several bindings by their IDs. If a binding ID doesn't exist, it's ignored.\n   */\n  deleteBindings(bindings, { isolateShapes = false } = {}) {\n    const ids = bindings.map((binding) => typeof binding === \"string\" ? binding : binding.id);\n    if (isolateShapes) {\n      this.store.atomic(() => {\n        for (const id of ids) {\n          const binding = this.getBinding(id);\n          if (!binding)\n            continue;\n          const util = this.getBindingUtil(binding);\n          util.onBeforeIsolateFromShape?.({ binding, removedShape: this.getShape(binding.toId) });\n          util.onBeforeIsolateToShape?.({ binding, removedShape: this.getShape(binding.fromId) });\n          this.store.remove([id]);\n        }\n      });\n    } else {\n      this.store.remove(ids);\n    }\n    return this;\n  }\n  /**\n   * Delete a binding by its ID. If the binding doesn't exist, it's ignored.\n   */\n  deleteBinding(binding, opts) {\n    return this.deleteBindings([binding], opts);\n  }\n  canBindShapes({\n    fromShape,\n    toShape,\n    binding\n  }) {\n    const fromShapeType = typeof fromShape === \"string\" ? fromShape : fromShape.type;\n    const toShapeType = typeof toShape === \"string\" ? toShape : toShape.type;\n    const bindingType = typeof binding === \"string\" ? binding : binding.type;\n    const canBindOpts = { fromShapeType, toShapeType, bindingType };\n    if (fromShapeType === toShapeType) {\n      return this.getShapeUtil(fromShapeType).canBind(canBindOpts);\n    }\n    return this.getShapeUtil(fromShapeType).canBind(canBindOpts) && this.getShapeUtil(toShapeType).canBind(canBindOpts);\n  }\n  /* -------------------- Commands -------------------- */\n  /**\n   * Rotate shapes by a delta in radians.\n   * Note: Currently, this assumes that the shapes are your currently selected shapes.\n   *\n   * @example\n   * ```ts\n   * editor.rotateShapesBy(editor.getSelectedShapeIds(), Math.PI)\n   * editor.rotateShapesBy(editor.getSelectedShapeIds(), Math.PI / 2)\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) of the shapes to move.\n   * @param delta - The delta in radians to apply to the selection rotation.\n   */\n  rotateShapesBy(shapes, delta) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (ids.length <= 0)\n      return this;\n    const snapshot = (0,_utils_rotation_mjs__WEBPACK_IMPORTED_MODULE_25__.getRotationSnapshot)({ editor: this });\n    if (!snapshot)\n      return this;\n    (0,_utils_rotation_mjs__WEBPACK_IMPORTED_MODULE_25__.applyRotationToSnapshotShapes)({ delta, snapshot, editor: this, stage: \"one-off\" });\n    return this;\n  }\n  getChangesToTranslateShape(initialShape, newShapeCoords) {\n    let workingShape = initialShape;\n    const util = this.getShapeUtil(initialShape);\n    workingShape = applyPartialToRecordWithProps(\n      workingShape,\n      util.onTranslateStart?.(workingShape) ?? void 0\n    );\n    workingShape = applyPartialToRecordWithProps(workingShape, {\n      id: initialShape.id,\n      type: initialShape.type,\n      x: newShapeCoords.x,\n      y: newShapeCoords.y\n    });\n    workingShape = applyPartialToRecordWithProps(\n      workingShape,\n      util.onTranslate?.(initialShape, workingShape) ?? void 0\n    );\n    workingShape = applyPartialToRecordWithProps(\n      workingShape,\n      util.onTranslateEnd?.(initialShape, workingShape) ?? void 0\n    );\n    return workingShape;\n  }\n  /**\n   * Move shapes by a delta.\n   *\n   * @example\n   * ```ts\n   * editor.nudgeShapes(['box1', 'box2'], { x: 8, y: 8 })\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to move.\n   * @param direction - The direction in which to move the shapes.\n   * @param historyOptions - The history options for the change.\n   */\n  nudgeShapes(shapes, offset) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (ids.length <= 0)\n      return this;\n    const changes = [];\n    for (const id of ids) {\n      const shape = this.getShape(id);\n      const localDelta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.From(offset);\n      const parentTransform = this.getShapeParentTransform(shape);\n      if (parentTransform)\n        localDelta.rot(-parentTransform.rotation());\n      changes.push(this.getChangesToTranslateShape(shape, localDelta.add(shape)));\n    }\n    this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Duplicate shapes.\n   *\n   * @example\n   * ```ts\n   * editor.duplicateShapes(['box1', 'box2'], { x: 8, y: 8 })\n   * editor.duplicateShapes(editor.getSelectedShapes(), { x: 8, y: 8 })\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to duplicate.\n   * @param offset - The offset (in pixels) to apply to the duplicated shapes.\n   *\n   * @public\n   */\n  duplicateShapes(shapes, offset) {\n    this.history.batch(() => {\n      const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n      if (ids.length <= 0)\n        return this;\n      const initialIds = new Set(ids);\n      const shapeIdSet = this.getShapeAndDescendantIds(ids);\n      const orderedShapeIds = [...shapeIdSet].reverse();\n      const shapeIds = /* @__PURE__ */ new Map();\n      for (const shapeId of shapeIdSet) {\n        shapeIds.set(shapeId, (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createShapeId)());\n      }\n      const { shapesToCreate, bindingsToCreate } = withIsolatedShapes(\n        this,\n        shapeIdSet,\n        (bindingIdsToMaintain) => {\n          const bindingsToCreate2 = [];\n          for (const originalId of bindingIdsToMaintain) {\n            const originalBinding = this.getBinding(originalId);\n            if (!originalBinding)\n              continue;\n            const duplicatedId = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createBindingId)();\n            bindingsToCreate2.push({\n              ...originalBinding,\n              id: duplicatedId,\n              fromId: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)(shapeIds.get(originalBinding.fromId)),\n              toId: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)(shapeIds.get(originalBinding.toId))\n            });\n          }\n          const shapesToCreate2 = [];\n          for (const originalId of orderedShapeIds) {\n            const duplicatedId = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)(shapeIds.get(originalId));\n            const originalShape = this.getShape(originalId);\n            if (!originalShape)\n              continue;\n            let ox = 0;\n            let oy = 0;\n            if (offset && initialIds.has(originalId)) {\n              const parentTransform = this.getShapeParentTransform(originalShape);\n              const vec = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(offset.x, offset.y).rot(-parentTransform.rotation());\n              ox = vec.x;\n              oy = vec.y;\n            }\n            const parentId = originalShape.parentId;\n            const siblings = this.getSortedChildIdsForParent(parentId);\n            const currentIndex = siblings.indexOf(originalShape.id);\n            const siblingAboveId = siblings[currentIndex + 1];\n            const siblingAbove = siblingAboveId ? this.getShape(siblingAboveId) : null;\n            const index = siblingAbove ? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexBetween)(originalShape.index, siblingAbove.index) : (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexAbove)(originalShape.index);\n            shapesToCreate2.push({\n              ...originalShape,\n              id: duplicatedId,\n              x: originalShape.x + ox,\n              y: originalShape.y + oy,\n              index,\n              parentId: shapeIds.get(originalShape.parentId) ?? originalShape.parentId\n            });\n          }\n          return { shapesToCreate: shapesToCreate2, bindingsToCreate: bindingsToCreate2 };\n        }\n      );\n      const maxShapesReached = shapesToCreate.length + this.getCurrentPageShapeIds().size > this.options.maxShapesPerPage;\n      if (maxShapesReached) {\n        alertMaxShapes(this);\n        return;\n      }\n      this.createShapes(shapesToCreate);\n      this.createBindings(bindingsToCreate);\n      this.setSelectedShapes((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => shapeIds.get(id))));\n      if (offset !== void 0) {\n        const selectionPageBounds = this.getSelectionPageBounds();\n        const viewportPageBounds = this.getViewportPageBounds();\n        if (selectionPageBounds && !viewportPageBounds.contains(selectionPageBounds)) {\n          this.centerOnPoint(selectionPageBounds.center, {\n            animation: { duration: this.options.animationMediumMs }\n          });\n        }\n      }\n    });\n    return this;\n  }\n  /**\n   * Move shapes to page.\n   *\n   * @example\n   * ```ts\n   * editor.moveShapesToPage(['box1', 'box2'], 'page1')\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) of the shapes to move.\n   * @param pageId - The id of the page where the shapes will be moved.\n   *\n   * @public\n   */\n  moveShapesToPage(shapes, pageId) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (ids.length === 0)\n      return this;\n    if (this.getInstanceState().isReadonly)\n      return this;\n    const currentPageId = this.getCurrentPageId();\n    if (pageId === currentPageId)\n      return this;\n    if (!this.store.has(pageId))\n      return this;\n    const content = this.getContentFromCurrentPage(ids);\n    if (!content)\n      return this;\n    if (this.getPageShapeIds(pageId).size + content.shapes.length > this.options.maxShapesPerPage) {\n      alertMaxShapes(this, pageId);\n      return this;\n    }\n    const fromPageZ = this.getCamera().z;\n    this.history.batch(() => {\n      this.deleteShapes(ids);\n      this.setCurrentPage(pageId);\n      this.setFocusedGroup(null);\n      this.selectNone();\n      this.putContentOntoCurrentPage(content, {\n        select: true,\n        preserveIds: true,\n        preservePosition: true\n      });\n      this.setCamera({ ...this.getCamera(), z: fromPageZ });\n      this.centerOnPoint(this.getSelectionRotatedPageBounds().center);\n    });\n    return this;\n  }\n  /**\n   * Toggle the lock state of one or more shapes. If there is a mix of locked and unlocked shapes, all shapes will be locked.\n   *\n   * @param shapes - The shapes (or shape ids) to toggle.\n   *\n   * @public\n   */\n  toggleLock(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getInstanceState().isReadonly || ids.length === 0)\n      return this;\n    let allLocked = true, allUnlocked = true;\n    const shapesToToggle = [];\n    for (const id of ids) {\n      const shape = this.getShape(id);\n      if (shape) {\n        shapesToToggle.push(shape);\n        if (shape.isLocked) {\n          allUnlocked = false;\n        } else {\n          allLocked = false;\n        }\n      }\n    }\n    this.batch(() => {\n      if (allUnlocked) {\n        this.updateShapes(\n          shapesToToggle.map((shape) => ({ id: shape.id, type: shape.type, isLocked: true }))\n        );\n        this.setSelectedShapes([]);\n      } else if (allLocked) {\n        this.updateShapes(\n          shapesToToggle.map((shape) => ({ id: shape.id, type: shape.type, isLocked: false }))\n        );\n      } else {\n        this.updateShapes(\n          shapesToToggle.map((shape) => ({ id: shape.id, type: shape.type, isLocked: true }))\n        );\n      }\n    });\n    return this;\n  }\n  /**\n   * Send shapes to the back of the page's object list.\n   *\n   * @example\n   * ```ts\n   * editor.sendToBack(['id1', 'id2'])\n   * editor.sendToBack(box1, box2)\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to move.\n   *\n   * @public\n   */\n  sendToBack(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    const changes = (0,_utils_reorderShapes_mjs__WEBPACK_IMPORTED_MODULE_24__.getReorderingShapesChanges)(this, \"toBack\", ids);\n    if (changes)\n      this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Send shapes backward in the page's object list.\n   *\n   * @example\n   * ```ts\n   * editor.sendBackward(['id1', 'id2'])\n   * editor.sendBackward([box1, box2])\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to move.\n   *\n   * @public\n   */\n  sendBackward(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    const changes = (0,_utils_reorderShapes_mjs__WEBPACK_IMPORTED_MODULE_24__.getReorderingShapesChanges)(this, \"backward\", ids);\n    if (changes)\n      this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Bring shapes forward in the page's object list.\n   *\n   * @example\n   * ```ts\n   * editor.bringForward(['id1', 'id2'])\n   * editor.bringForward(box1,  box2)\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to move.\n   *\n   * @public\n   */\n  bringForward(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    const changes = (0,_utils_reorderShapes_mjs__WEBPACK_IMPORTED_MODULE_24__.getReorderingShapesChanges)(this, \"forward\", ids);\n    if (changes)\n      this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Bring shapes to the front of the page's object list.\n   *\n   * @example\n   * ```ts\n   * editor.bringToFront(['id1', 'id2'])\n   * editor.bringToFront([box1, box2])\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to move.\n   *\n   * @public\n   */\n  bringToFront(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    const changes = (0,_utils_reorderShapes_mjs__WEBPACK_IMPORTED_MODULE_24__.getReorderingShapesChanges)(this, \"toFront\", ids);\n    if (changes)\n      this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Flip shape positions.\n   *\n   * @example\n   * ```ts\n   * editor.flipShapes([box1, box2], 'horizontal', 32)\n   * editor.flipShapes(editor.getSelectedShapeIds(), 'horizontal', 32)\n   * ```\n   *\n   * @param shapes - The ids of the shapes to flip.\n   * @param operation - Whether to flip horizontally or vertically.\n   *\n   * @public\n   */\n  flipShapes(shapes, operation) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getInstanceState().isReadonly)\n      return this;\n    let shapesToFlip = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id)));\n    if (!shapesToFlip.length)\n      return this;\n    shapesToFlip = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(\n      shapesToFlip.map((shape) => {\n        if (this.isShapeOfType(shape, \"group\")) {\n          return this.getSortedChildIdsForParent(shape.id).map((id) => this.getShape(id));\n        }\n        return shape;\n      }).flat()\n    );\n    const scaleOriginPage = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.Common(\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(shapesToFlip.map((id) => this.getShapePageBounds(id)))\n    ).center;\n    this.batch(() => {\n      for (const shape of shapesToFlip) {\n        const bounds = this.getShapeGeometry(shape).bounds;\n        const initialPageTransform = this.getShapePageTransform(shape.id);\n        if (!initialPageTransform)\n          continue;\n        this.resizeShape(\n          shape.id,\n          { x: operation === \"horizontal\" ? -1 : 1, y: operation === \"vertical\" ? -1 : 1 },\n          {\n            initialBounds: bounds,\n            initialPageTransform,\n            initialShape: shape,\n            mode: \"scale_shape\",\n            isAspectRatioLocked: this.getShapeUtil(shape).isAspectRatioLocked(shape),\n            scaleOrigin: scaleOriginPage,\n            scaleAxisRotation: 0\n          }\n        );\n      }\n    });\n    return this;\n  }\n  /**\n   * Stack shape.\n   *\n   * @example\n   * ```ts\n   * editor.stackShapes([box1, box2], 'horizontal', 32)\n   * editor.stackShapes(editor.getSelectedShapeIds(), 'horizontal', 32)\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to stack.\n   * @param operation - Whether to stack horizontally or vertically.\n   * @param gap - The gap to leave between shapes.\n   *\n   * @public\n   */\n  stackShapes(shapes, operation, gap) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getInstanceState().isReadonly)\n      return this;\n    const shapesToStack = ids.map((id) => this.getShape(id)).filter((shape) => {\n      if (!shape)\n        return false;\n      return this.getShapeUtil(shape).canBeLaidOut(shape);\n    });\n    const len = shapesToStack.length;\n    if (gap === 0 && len < 3 || len < 2)\n      return this;\n    const pageBounds = Object.fromEntries(\n      shapesToStack.map((shape) => [shape.id, this.getShapePageBounds(shape)])\n    );\n    let val;\n    let min;\n    let max;\n    let dim;\n    if (operation === \"horizontal\") {\n      val = \"x\";\n      min = \"minX\";\n      max = \"maxX\";\n      dim = \"width\";\n    } else {\n      val = \"y\";\n      min = \"minY\";\n      max = \"maxY\";\n      dim = \"height\";\n    }\n    let shapeGap;\n    if (gap === 0) {\n      const gaps = [];\n      shapesToStack.sort((a, b) => pageBounds[a.id][min] - pageBounds[b.id][min]);\n      for (let i = 0; i < len - 1; i++) {\n        const shape = shapesToStack[i];\n        const nextShape = shapesToStack[i + 1];\n        const bounds = pageBounds[shape.id];\n        const nextBounds = pageBounds[nextShape.id];\n        const gap2 = nextBounds[min] - bounds[max];\n        const current = gaps.find((g) => g.gap === gap2);\n        if (current) {\n          current.count++;\n        } else {\n          gaps.push({ gap: gap2, count: 1 });\n        }\n      }\n      let maxCount = 0;\n      gaps.forEach((g) => {\n        if (g.count > maxCount) {\n          maxCount = g.count;\n          shapeGap = g.gap;\n        }\n      });\n      if (maxCount === 1) {\n        shapeGap = Math.max(0, gaps.reduce((a, c) => a + c.gap * c.count, 0) / (len - 1));\n      }\n    } else {\n      shapeGap = gap;\n    }\n    const changes = [];\n    let v = pageBounds[shapesToStack[0].id][max];\n    shapesToStack.forEach((shape, i) => {\n      if (i === 0)\n        return;\n      const delta = { x: 0, y: 0 };\n      delta[val] = v + shapeGap - pageBounds[shape.id][val];\n      const parent = this.getShapeParent(shape);\n      const localDelta = parent ? _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Rot(delta, -this.getShapePageTransform(parent).decompose().rotation) : delta;\n      const translateStartChanges = this.getShapeUtil(shape).onTranslateStart?.(shape);\n      changes.push(\n        translateStartChanges ? {\n          ...translateStartChanges,\n          [val]: shape[val] + localDelta[val]\n        } : {\n          id: shape.id,\n          type: shape.type,\n          [val]: shape[val] + localDelta[val]\n        }\n      );\n      v += pageBounds[shape.id][dim] + shapeGap;\n    });\n    this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Pack shapes into a grid centered on their current position. Based on potpack (https://github.com/mapbox/potpack).\n   *\n   * @example\n   * ```ts\n   * editor.packShapes([box1, box2], 32)\n   * editor.packShapes(editor.getSelectedShapeIds(), 32)\n   * ```\n   *\n   *\n   * @param shapes - The shapes (or shape ids) to pack.\n   * @param gap - The padding to apply to the packed shapes. Defaults to 16.\n   */\n  packShapes(shapes, gap) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getInstanceState().isReadonly)\n      return this;\n    if (ids.length < 2)\n      return this;\n    const shapesToPack = ids.map((id) => this.getShape(id)).filter((shape2) => {\n      if (!shape2)\n        return false;\n      return this.getShapeUtil(shape2).canBeLaidOut(shape2);\n    });\n    const shapePageBounds = {};\n    const nextShapePageBounds = {};\n    let shape, bounds, area = 0;\n    for (let i = 0; i < shapesToPack.length; i++) {\n      shape = shapesToPack[i];\n      bounds = this.getShapePageBounds(shape);\n      shapePageBounds[shape.id] = bounds;\n      nextShapePageBounds[shape.id] = bounds.clone();\n      area += bounds.width * bounds.height;\n    }\n    const commonBounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.Common((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(Object.values(shapePageBounds)));\n    const maxWidth = commonBounds.width;\n    shapesToPack.sort((a, b) => shapePageBounds[b.id].height - shapePageBounds[a.id].height);\n    const startWidth = Math.max(Math.ceil(Math.sqrt(area / 0.95)), maxWidth);\n    const spaces = [new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box(commonBounds.x, commonBounds.y, startWidth, Infinity)];\n    let width = 0;\n    let height = 0;\n    let space;\n    let last2;\n    for (let i = 0; i < shapesToPack.length; i++) {\n      shape = shapesToPack[i];\n      bounds = nextShapePageBounds[shape.id];\n      for (let i2 = spaces.length - 1; i2 >= 0; i2--) {\n        space = spaces[i2];\n        if (bounds.width > space.width || bounds.height > space.height)\n          continue;\n        bounds.x = space.x;\n        bounds.y = space.y;\n        height = Math.max(height, bounds.maxY);\n        width = Math.max(width, bounds.maxX);\n        if (bounds.width === space.width && bounds.height === space.height) {\n          last2 = spaces.pop();\n          if (i2 < spaces.length)\n            spaces[i2] = last2;\n        } else if (bounds.height === space.height) {\n          space.x += bounds.width + gap;\n          space.width -= bounds.width + gap;\n        } else if (bounds.width === space.width) {\n          space.y += bounds.height + gap;\n          space.height -= bounds.height + gap;\n        } else {\n          spaces.push(\n            new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box(\n              space.x + (bounds.width + gap),\n              space.y,\n              space.width - (bounds.width + gap),\n              bounds.height\n            )\n          );\n          space.y += bounds.height + gap;\n          space.height -= bounds.height + gap;\n        }\n        break;\n      }\n    }\n    const commonAfter = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.Common(Object.values(nextShapePageBounds));\n    const centerDelta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Sub(commonBounds.center, commonAfter.center);\n    let nextBounds;\n    const changes = [];\n    for (let i = 0; i < shapesToPack.length; i++) {\n      shape = shapesToPack[i];\n      bounds = shapePageBounds[shape.id];\n      nextBounds = nextShapePageBounds[shape.id];\n      const delta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Sub(nextBounds.point, bounds.point).add(centerDelta);\n      const parentTransform = this.getShapeParentTransform(shape);\n      if (parentTransform)\n        delta.rot(-parentTransform.rotation());\n      const change = {\n        id: shape.id,\n        type: shape.type,\n        x: shape.x + delta.x,\n        y: shape.y + delta.y\n      };\n      const translateStartChange = this.getShapeUtil(shape).onTranslateStart?.({\n        ...shape,\n        ...change\n      });\n      if (translateStartChange) {\n        changes.push({ ...change, ...translateStartChange });\n      } else {\n        changes.push(change);\n      }\n    }\n    if (changes.length) {\n      this.updateShapes(changes);\n    }\n    return this;\n  }\n  /**\n   * Align shape positions.\n   *\n   * @example\n   * ```ts\n   * editor.alignShapes([box1, box2], 'left')\n   * editor.alignShapes(editor.getSelectedShapeIds(), 'left')\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to align.\n   * @param operation - The align operation to apply.\n   *\n   * @public\n   */\n  alignShapes(shapes, operation) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getInstanceState().isReadonly)\n      return this;\n    if (ids.length < 2)\n      return this;\n    const shapesToAlign = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id)));\n    const shapePageBounds = Object.fromEntries(\n      shapesToAlign.map((shape) => [shape.id, this.getShapePageBounds(shape)])\n    );\n    const commonBounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.Common((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(Object.values(shapePageBounds)));\n    const changes = [];\n    shapesToAlign.forEach((shape) => {\n      const pageBounds = shapePageBounds[shape.id];\n      if (!pageBounds)\n        return;\n      const delta = { x: 0, y: 0 };\n      switch (operation) {\n        case \"top\": {\n          delta.y = commonBounds.minY - pageBounds.minY;\n          break;\n        }\n        case \"center-vertical\": {\n          delta.y = commonBounds.midY - pageBounds.minY - pageBounds.height / 2;\n          break;\n        }\n        case \"bottom\": {\n          delta.y = commonBounds.maxY - pageBounds.minY - pageBounds.height;\n          break;\n        }\n        case \"left\": {\n          delta.x = commonBounds.minX - pageBounds.minX;\n          break;\n        }\n        case \"center-horizontal\": {\n          delta.x = commonBounds.midX - pageBounds.minX - pageBounds.width / 2;\n          break;\n        }\n        case \"right\": {\n          delta.x = commonBounds.maxX - pageBounds.minX - pageBounds.width;\n          break;\n        }\n      }\n      const parent = this.getShapeParent(shape);\n      const localDelta = parent ? _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Rot(delta, -this.getShapePageTransform(parent).decompose().rotation) : delta;\n      changes.push(this.getChangesToTranslateShape(shape, _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Add(shape, localDelta)));\n    });\n    this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Distribute shape positions.\n   *\n   * @example\n   * ```ts\n   * editor.distributeShapes([box1, box2], 'horizontal')\n   * editor.distributeShapes(editor.getSelectedShapeIds(), 'horizontal')\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to distribute.\n   * @param operation - Whether to distribute shapes horizontally or vertically.\n   *\n   * @public\n   */\n  distributeShapes(shapes, operation) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getInstanceState().isReadonly)\n      return this;\n    if (ids.length < 3)\n      return this;\n    const len = ids.length;\n    const shapesToDistribute = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id)));\n    const pageBounds = Object.fromEntries(\n      shapesToDistribute.map((shape) => [shape.id, this.getShapePageBounds(shape)])\n    );\n    let val;\n    let min;\n    let max;\n    let mid;\n    let dim;\n    if (operation === \"horizontal\") {\n      val = \"x\";\n      min = \"minX\";\n      max = \"maxX\";\n      mid = \"midX\";\n      dim = \"width\";\n    } else {\n      val = \"y\";\n      min = \"minY\";\n      max = \"maxY\";\n      mid = \"midY\";\n      dim = \"height\";\n    }\n    const changes = [];\n    const first = shapesToDistribute.sort(\n      (a, b) => pageBounds[a.id][min] - pageBounds[b.id][min]\n    )[0];\n    const last2 = shapesToDistribute.sort((a, b) => pageBounds[b.id][max] - pageBounds[a.id][max])[0];\n    const midFirst = pageBounds[first.id][mid];\n    const step = (pageBounds[last2.id][mid] - midFirst) / (len - 1);\n    const v = midFirst + step;\n    shapesToDistribute.filter((shape) => shape !== first && shape !== last2).sort((a, b) => pageBounds[a.id][mid] - pageBounds[b.id][mid]).forEach((shape, i) => {\n      const delta = { x: 0, y: 0 };\n      delta[val] = v + step * i - pageBounds[shape.id][dim] / 2 - pageBounds[shape.id][val];\n      const parent = this.getShapeParent(shape);\n      const localDelta = parent ? _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Rot(delta, -this.getShapePageTransform(parent).rotation()) : delta;\n      changes.push(this.getChangesToTranslateShape(shape, _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Add(shape, localDelta)));\n    });\n    this.updateShapes(changes);\n    return this;\n  }\n  /**\n   * Stretch shape sizes and positions to fill their common bounding box.\n   *\n   * @example\n   * ```ts\n   * editor.stretchShapes([box1, box2], 'horizontal')\n   * editor.stretchShapes(editor.getSelectedShapeIds(), 'horizontal')\n   * ```\n   *\n   * @param shapes - The shapes (or shape ids) to stretch.\n   * @param operation - Whether to stretch shapes horizontally or vertically.\n   *\n   * @public\n   */\n  stretchShapes(shapes, operation) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getInstanceState().isReadonly)\n      return this;\n    if (ids.length < 2)\n      return this;\n    const shapesToStretch = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id)));\n    const shapeBounds = Object.fromEntries(ids.map((id) => [id, this.getShapeGeometry(id).bounds]));\n    const shapePageBounds = Object.fromEntries(ids.map((id) => [id, this.getShapePageBounds(id)]));\n    const commonBounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.Common((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(Object.values(shapePageBounds)));\n    switch (operation) {\n      case \"vertical\": {\n        this.batch(() => {\n          for (const shape of shapesToStretch) {\n            const pageRotation = this.getShapePageTransform(shape).rotation();\n            if (pageRotation % _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.PI2)\n              continue;\n            const bounds = shapeBounds[shape.id];\n            const pageBounds = shapePageBounds[shape.id];\n            const localOffset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(0, commonBounds.minY - pageBounds.minY);\n            const parentTransform = this.getShapeParentTransform(shape);\n            if (parentTransform)\n              localOffset.rot(-parentTransform.rotation());\n            const { x, y } = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Add(localOffset, shape);\n            this.updateShapes([{ id: shape.id, type: shape.type, x, y }]);\n            const scale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(1, commonBounds.height / pageBounds.height);\n            this.resizeShape(shape.id, scale, {\n              initialBounds: bounds,\n              scaleOrigin: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(pageBounds.center.x, commonBounds.minY),\n              isAspectRatioLocked: this.getShapeUtil(shape).isAspectRatioLocked(shape),\n              scaleAxisRotation: 0\n            });\n          }\n        });\n        break;\n      }\n      case \"horizontal\": {\n        this.batch(() => {\n          for (const shape of shapesToStretch) {\n            const bounds = shapeBounds[shape.id];\n            const pageBounds = shapePageBounds[shape.id];\n            const pageRotation = this.getShapePageTransform(shape).rotation();\n            if (pageRotation % _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.PI2)\n              continue;\n            const localOffset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(commonBounds.minX - pageBounds.minX, 0);\n            const parentTransform = this.getShapeParentTransform(shape);\n            if (parentTransform)\n              localOffset.rot(-parentTransform.rotation());\n            const { x, y } = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Add(localOffset, shape);\n            this.updateShapes([{ id: shape.id, type: shape.type, x, y }]);\n            const scale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(commonBounds.width / pageBounds.width, 1);\n            this.resizeShape(shape.id, scale, {\n              initialBounds: bounds,\n              scaleOrigin: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(commonBounds.minX, pageBounds.center.y),\n              isAspectRatioLocked: this.getShapeUtil(shape).isAspectRatioLocked(shape),\n              scaleAxisRotation: 0\n            });\n          }\n        });\n        break;\n      }\n    }\n    return this;\n  }\n  /**\n   * Resize a shape.\n   *\n   * @param id - The id of the shape to resize.\n   * @param scale - The scale factor to apply to the shape.\n   * @param options - Additional options.\n   *\n   * @public\n   */\n  resizeShape(shape, scale, options = {}) {\n    const id = typeof shape === \"string\" ? shape : shape.id;\n    if (this.getInstanceState().isReadonly)\n      return this;\n    if (!Number.isFinite(scale.x))\n      scale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(1, scale.y);\n    if (!Number.isFinite(scale.y))\n      scale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(scale.x, 1);\n    const initialShape = options.initialShape ?? this.getShape(id);\n    if (!initialShape)\n      return this;\n    const scaleOrigin = options.scaleOrigin ?? this.getShapePageBounds(id)?.center;\n    if (!scaleOrigin)\n      return this;\n    const pageTransform = options.initialPageTransform ? _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.Cast(options.initialPageTransform) : this.getShapePageTransform(id);\n    if (!pageTransform)\n      return this;\n    const pageRotation = pageTransform.rotation();\n    if (pageRotation == null)\n      return this;\n    const scaleAxisRotation = options.scaleAxisRotation ?? pageRotation;\n    const initialBounds = options.initialBounds ?? this.getShapeGeometry(id).bounds;\n    if (!initialBounds)\n      return this;\n    const isAspectRatioLocked = options.isAspectRatioLocked ?? this.getShapeUtil(initialShape).isAspectRatioLocked(initialShape);\n    if (!(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.areAnglesCompatible)(pageRotation, scaleAxisRotation)) {\n      return this._resizeUnalignedShape(id, scale, {\n        ...options,\n        initialBounds,\n        scaleOrigin,\n        scaleAxisRotation,\n        initialPageTransform: pageTransform,\n        isAspectRatioLocked,\n        initialShape\n      });\n    }\n    const util = this.getShapeUtil(initialShape);\n    if (isAspectRatioLocked) {\n      if (Math.abs(scale.x) > Math.abs(scale.y)) {\n        scale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(scale.x, Math.sign(scale.y) * Math.abs(scale.x));\n      } else {\n        scale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(Math.sign(scale.x) * Math.abs(scale.y), scale.y);\n      }\n    }\n    if (util.onResize && util.canResize(initialShape)) {\n      const newPagePoint = this._scalePagePoint(\n        _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.applyToPoint(pageTransform, new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(0, 0)),\n        scaleOrigin,\n        scale,\n        scaleAxisRotation\n      );\n      const newLocalPoint = this.getPointInParentSpace(initialShape.id, newPagePoint);\n      const myScale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(scale.x, scale.y);\n      const areWidthAndHeightAlignedWithCorrectAxis = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_19__.approximately)(\n        (pageRotation - scaleAxisRotation) % Math.PI,\n        0\n      );\n      myScale.x = areWidthAndHeightAlignedWithCorrectAxis ? scale.x : scale.y;\n      myScale.y = areWidthAndHeightAlignedWithCorrectAxis ? scale.y : scale.x;\n      const initialPagePoint = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.applyToPoint(pageTransform, new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec());\n      const { x, y } = this.getPointInParentSpace(initialShape.id, initialPagePoint);\n      let workingShape = initialShape;\n      if (!options.skipStartAndEndCallbacks) {\n        workingShape = applyPartialToRecordWithProps(\n          initialShape,\n          util.onResizeStart?.(initialShape) ?? void 0\n        );\n      }\n      workingShape = applyPartialToRecordWithProps(workingShape, {\n        id,\n        type: initialShape.type,\n        x: newLocalPoint.x,\n        y: newLocalPoint.y,\n        ...util.onResize(\n          { ...initialShape, x, y },\n          {\n            newPoint: newLocalPoint,\n            handle: options.dragHandle ?? \"bottom_right\",\n            // don't set isSingle to true for children\n            mode: options.mode ?? \"scale_shape\",\n            scaleX: myScale.x,\n            scaleY: myScale.y,\n            initialBounds,\n            initialShape\n          }\n        )\n      });\n      if (!options.skipStartAndEndCallbacks) {\n        workingShape = applyPartialToRecordWithProps(\n          workingShape,\n          util.onResizeEnd?.(initialShape, workingShape) ?? void 0\n        );\n      }\n      this.updateShapes([workingShape]);\n    } else {\n      const initialPageCenter = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.applyToPoint(pageTransform, initialBounds.center);\n      const newPageCenter = this._scalePagePoint(\n        initialPageCenter,\n        scaleOrigin,\n        scale,\n        scaleAxisRotation\n      );\n      const initialPageCenterInParentSpace = this.getPointInParentSpace(\n        initialShape.id,\n        initialPageCenter\n      );\n      const newPageCenterInParentSpace = this.getPointInParentSpace(initialShape.id, newPageCenter);\n      const delta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Sub(newPageCenterInParentSpace, initialPageCenterInParentSpace);\n      this.updateShapes([\n        {\n          id,\n          type: initialShape.type,\n          x: initialShape.x + delta.x,\n          y: initialShape.y + delta.y\n        }\n      ]);\n    }\n    return this;\n  }\n  /** @internal */\n  _scalePagePoint(point, scaleOrigin, scale, scaleAxisRotation) {\n    const relativePoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.RotWith(point, scaleOrigin, -scaleAxisRotation).sub(scaleOrigin);\n    const newRelativePagePoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.MulV(relativePoint, scale);\n    const destination = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Add(newRelativePagePoint, scaleOrigin).rotWith(\n      scaleOrigin,\n      scaleAxisRotation\n    );\n    return destination;\n  }\n  /** @internal */\n  _resizeUnalignedShape(id, scale, options) {\n    const { type } = options.initialShape;\n    const shapeScale = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(scale.x, scale.y);\n    if (Math.abs(scale.x) > Math.abs(scale.y)) {\n      shapeScale.x = Math.sign(scale.x) * Math.abs(scale.y);\n    } else {\n      shapeScale.y = Math.sign(scale.y) * Math.abs(scale.x);\n    }\n    this.resizeShape(id, shapeScale, {\n      initialShape: options.initialShape,\n      initialBounds: options.initialBounds,\n      isAspectRatioLocked: options.isAspectRatioLocked\n    });\n    if (Math.sign(scale.x) * Math.sign(scale.y) < 0) {\n      let { rotation } = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.Decompose(options.initialPageTransform);\n      rotation -= 2 * rotation;\n      this.updateShapes([{ id, type, rotation }]);\n    }\n    const preScaleShapePageCenter = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.applyToPoint(\n      options.initialPageTransform,\n      options.initialBounds.center\n    );\n    const postScaleShapePageCenter = this._scalePagePoint(\n      preScaleShapePageCenter,\n      options.scaleOrigin,\n      scale,\n      options.scaleAxisRotation\n    );\n    const pageBounds = this.getShapePageBounds(id);\n    const pageTransform = this.getShapePageTransform(id);\n    const currentPageCenter = pageBounds.center;\n    const shapePageTransformOrigin = pageTransform.point();\n    if (!currentPageCenter || !shapePageTransformOrigin)\n      return this;\n    const pageDelta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Sub(postScaleShapePageCenter, currentPageCenter);\n    const postScaleShapePagePoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Add(shapePageTransformOrigin, pageDelta);\n    const { x, y } = this.getPointInParentSpace(id, postScaleShapePagePoint);\n    this.updateShapes([{ id, type, x, y }]);\n    return this;\n  }\n  /**\n   * Get the initial meta value for a shape.\n   *\n   * @example\n   * ```ts\n   * editor.getInitialMetaForShape = (shape) => {\n   *   if (shape.type === 'note') {\n   *     return { createdBy: myCurrentUser.id }\n   *   }\n   * }\n   * ```\n   *\n   * @param shape - The shape to get the initial meta for.\n   *\n   * @public\n   */\n  getInitialMetaForShape(_shape) {\n    return {};\n  }\n  /**\n   * Create a single shape.\n   *\n   * @example\n   * ```ts\n   * editor.createShape(myShape)\n   * editor.createShape({ id: 'box1', type: 'text', props: { text: \"ok\" } })\n   * ```\n   *\n   * @param shape - The shape (or shape partial) to create.\n   *\n   * @public\n   */\n  createShape(shape) {\n    this.createShapes([shape]);\n    return this;\n  }\n  /**\n   * Create shapes.\n   *\n   * @example\n   * ```ts\n   * editor.createShapes([myShape])\n   * editor.createShapes([{ id: 'box1', type: 'text', props: { text: \"ok\" } }])\n   * ```\n   *\n   * @param shapes - The shapes (or shape partials) to create.\n   * @param select - Whether to select the created shapes. Defaults to false.\n   *\n   * @public\n   */\n  createShapes(shapes) {\n    if (!Array.isArray(shapes)) {\n      throw Error(\"Editor.createShapes: must provide an array of shapes or shape partials\");\n    }\n    if (this.getInstanceState().isReadonly)\n      return this;\n    if (shapes.length <= 0)\n      return this;\n    const currentPageShapeIds = this.getCurrentPageShapeIds();\n    const maxShapesReached = shapes.length + currentPageShapeIds.size > this.options.maxShapesPerPage;\n    if (maxShapesReached) {\n      alertMaxShapes(this);\n      return this;\n    }\n    const focusedGroupId = this.getFocusedGroupId();\n    return this.batch(() => {\n      const currentPageShapesSorted = this.getCurrentPageShapesSorted();\n      const partials = shapes.map((partial) => {\n        if (!partial.id) {\n          partial = { id: (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createShapeId)(), ...partial };\n        }\n        if (!partial.parentId || !(this.store.has(partial.parentId) || shapes.some((p) => p.id === partial.parentId))) {\n          let parentId = this.getFocusedGroupId();\n          for (let i = currentPageShapesSorted.length - 1; i >= 0; i--) {\n            const parent = currentPageShapesSorted[i];\n            if (\n              // parent.type === 'frame'\n              this.getShapeUtil(parent).canReceiveNewChildrenOfType(parent, partial.type) && this.isPointInShape(\n                parent,\n                // If no parent is provided, then we can treat the\n                // shape's provided x/y as being in the page's space.\n                { x: partial.x ?? 0, y: partial.y ?? 0 },\n                {\n                  margin: 0,\n                  hitInside: true\n                }\n              )\n            ) {\n              parentId = parent.id;\n              break;\n            }\n          }\n          const prevParentId = partial.parentId;\n          if (parentId === partial.id) {\n            parentId = focusedGroupId;\n          }\n          if (parentId !== prevParentId) {\n            partial = { ...partial };\n            partial.parentId = parentId;\n            if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(parentId)) {\n              const point = this.getPointInShapeSpace(this.getShape(parentId), {\n                x: partial.x ?? 0,\n                y: partial.y ?? 0\n              });\n              partial.x = point.x;\n              partial.y = point.y;\n              partial.rotation = -this.getShapePageTransform(parentId).rotation() + (partial.rotation ?? 0);\n            }\n          }\n        }\n        return partial;\n      });\n      const parentIndices = /* @__PURE__ */ new Map();\n      const shapeRecordsToCreate = [];\n      const { opacityForNextShape } = this.getInstanceState();\n      for (const partial of partials) {\n        const util = this.getShapeUtil(partial);\n        let index = partial.index;\n        if (!index) {\n          const parentId = partial.parentId ?? focusedGroupId;\n          if (!parentIndices.has(parentId)) {\n            parentIndices.set(parentId, this.getHighestIndexForParent(parentId));\n          }\n          index = parentIndices.get(parentId);\n          parentIndices.set(parentId, (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexAbove)(index));\n        }\n        const initialProps = util.getDefaultProps();\n        for (const [style, propKey] of this.styleProps[partial.type]) {\n          ;\n          initialProps[propKey] = this.getStyleForNextShape(style);\n        }\n        let shapeRecordToCreate = this.store.schema.types.shape.create({\n          ...partial,\n          index,\n          opacity: partial.opacity ?? opacityForNextShape,\n          parentId: partial.parentId ?? focusedGroupId,\n          props: \"props\" in partial ? { ...initialProps, ...partial.props } : initialProps\n        });\n        if (shapeRecordToCreate.index === void 0) {\n          throw Error(\"no index!\");\n        }\n        const next = this.getShapeUtil(shapeRecordToCreate).onBeforeCreate?.(shapeRecordToCreate);\n        if (next) {\n          shapeRecordToCreate = next;\n        }\n        shapeRecordsToCreate.push(shapeRecordToCreate);\n      }\n      shapeRecordsToCreate.forEach((shape) => {\n        shape.meta = {\n          ...this.getInitialMetaForShape(shape),\n          ...shape.meta\n        };\n      });\n      this.store.put(shapeRecordsToCreate);\n    });\n  }\n  animatingShapes = /* @__PURE__ */ new Map();\n  /**\n   * Animate a shape.\n   *\n   * @example\n   * ```ts\n   * editor.animateShape({ id: 'box1', type: 'box', x: 100, y: 100 })\n   * editor.animateShape({ id: 'box1', type: 'box', x: 100, y: 100 }, { animation: { duration: 100, ease: t => t*t } })\n   * ```\n   *\n   * @param partial - The shape partial to update.\n   * @param options - The animation's options.\n   *\n   * @public\n   */\n  animateShape(partial, opts = { animation: _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_ANIMATION_OPTIONS }) {\n    return this.animateShapes([partial], opts);\n  }\n  /**\n   * Animate shapes.\n   *\n   * @example\n   * ```ts\n   * editor.animateShapes([{ id: 'box1', type: 'box', x: 100, y: 100 }])\n   * editor.animateShapes([{ id: 'box1', type: 'box', x: 100, y: 100 }], { animation: { duration: 100, ease: t => t*t } })\n   * ```\n   *\n   * @param partials - The shape partials to update.\n   * @param options - The animation's options.\n   *\n   * @public\n   */\n  animateShapes(partials, opts = { animation: _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_ANIMATION_OPTIONS }) {\n    if (!opts.animation)\n      return this;\n    const { duration = 500, easing = _primitives_easings_mjs__WEBPACK_IMPORTED_MODULE_16__.EASINGS.linear } = opts.animation;\n    const animationId = (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_26__.uniqueId)();\n    let remaining = duration;\n    let t;\n    const animations = [];\n    let partial, result;\n    for (let i = 0, n = partials.length; i < n; i++) {\n      partial = partials[i];\n      if (!partial)\n        continue;\n      result = {\n        partial,\n        values: []\n      };\n      const shape = this.getShape(partial.id);\n      if (!shape)\n        continue;\n      for (const key of [\"x\", \"y\", \"rotation\"]) {\n        if (partial[key] !== void 0 && shape[key] !== partial[key]) {\n          result.values.push({ prop: key, from: shape[key], to: partial[key] });\n        }\n      }\n      animations.push(result);\n      this.animatingShapes.set(shape.id, animationId);\n    }\n    let value;\n    const handleTick = (elapsed) => {\n      remaining -= elapsed;\n      if (remaining < 0) {\n        const { animatingShapes: animatingShapes2 } = this;\n        const partialsToUpdate = partials.filter(\n          (p) => p && animatingShapes2.get(p.id) === animationId\n        );\n        if (partialsToUpdate.length) {\n          this.updateShapes(partialsToUpdate);\n        }\n        this.off(\"tick\", handleTick);\n        return;\n      }\n      t = easing(1 - remaining / duration);\n      const { animatingShapes } = this;\n      const updates = [];\n      let animationIdForShape;\n      for (let i = 0, n = animations.length; i < n; i++) {\n        value = animations[i];\n        animationIdForShape = animatingShapes.get(value.partial.id);\n        if (animationIdForShape !== animationId)\n          continue;\n        updates.push({\n          id: value.partial.id,\n          type: value.partial.type,\n          ...value.values.reduce((acc, { prop, from, to }) => {\n            acc[prop] = from + (to - from) * t;\n            return acc;\n          }, {})\n        });\n      }\n      this._updateShapes(updates);\n    };\n    this.on(\"tick\", handleTick);\n    return this;\n  }\n  groupShapes(shapes, options = {}) {\n    const { groupId = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createShapeId)(), select = true } = options;\n    if (!Array.isArray(shapes)) {\n      throw Error(\"Editor.groupShapes: must provide an array of shapes or shape ids\");\n    }\n    if (this.getInstanceState().isReadonly)\n      return this;\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (ids.length <= 1)\n      return this;\n    const shapesToGroup = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(this._getUnlockedShapeIds(ids).map((id) => this.getShape(id)));\n    const sortedShapeIds = shapesToGroup.sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.sortByIndex).map((s) => s.id);\n    const pageBounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.Common((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(shapesToGroup.map((id) => this.getShapePageBounds(id))));\n    const { x, y } = pageBounds.point;\n    const parentId = this.findCommonAncestor(shapesToGroup) ?? this.getCurrentPageId();\n    if (this.getCurrentToolId() !== \"select\")\n      return this;\n    if (!this.isIn(\"select.idle\")) {\n      this.cancel();\n    }\n    const shapesWithRootParent = shapesToGroup.filter((shape) => shape.parentId === parentId).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.sortByIndex);\n    const highestIndex = shapesWithRootParent[shapesWithRootParent.length - 1]?.index;\n    this.batch(() => {\n      this.createShapes([\n        {\n          id: groupId,\n          type: \"group\",\n          parentId,\n          index: highestIndex,\n          x,\n          y,\n          opacity: 1,\n          props: {}\n        }\n      ]);\n      this.reparentShapes(sortedShapeIds, groupId);\n      if (select) {\n        this.select(groupId);\n      }\n    });\n    return this;\n  }\n  ungroupShapes(shapes, options = {}) {\n    const { select = true } = options;\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (this.getInstanceState().isReadonly)\n      return this;\n    if (ids.length === 0)\n      return this;\n    if (this.getCurrentToolId() !== \"select\")\n      return this;\n    if (!this.isIn(\"select.idle\")) {\n      this.cancel();\n    }\n    const idsToSelect = /* @__PURE__ */ new Set();\n    const groups = [];\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(ids.map((id) => this.getShape(id))).forEach((shape) => {\n      if (this.isShapeOfType(shape, \"group\")) {\n        groups.push(shape);\n      } else {\n        idsToSelect.add(shape.id);\n      }\n    });\n    if (groups.length === 0)\n      return this;\n    this.batch(() => {\n      let group;\n      for (let i = 0, n = groups.length; i < n; i++) {\n        group = groups[i];\n        const childIds = this.getSortedChildIdsForParent(group.id);\n        for (let j = 0, n2 = childIds.length; j < n2; j++) {\n          idsToSelect.add(childIds[j]);\n        }\n        this.reparentShapes(childIds, group.parentId, group.index);\n      }\n      this.deleteShapes(groups.map((group2) => group2.id));\n      if (select) {\n        this.select(...idsToSelect);\n      }\n    });\n    return this;\n  }\n  /**\n   * Update a shape using a partial of the shape.\n   *\n   * @example\n   * ```ts\n   * editor.updateShape({ id: 'box1', type: 'geo', props: { w: 100, h: 100 } })\n   * ```\n   *\n   * @param partial - The shape partial to update.\n   *\n   * @public\n   */\n  updateShape(partial) {\n    this.updateShapes([partial]);\n    return this;\n  }\n  /**\n   * Update shapes using partials of each shape.\n   *\n   * @example\n   * ```ts\n   * editor.updateShapes([{ id: 'box1', type: 'geo', props: { w: 100, h: 100 } }])\n   * ```\n   *\n   * @param partials - The shape partials to update.\n   *\n   * @public\n   */\n  updateShapes(partials) {\n    const compactedPartials = Array(partials.length);\n    for (let i = 0, n = partials.length; i < n; i++) {\n      const partial = partials[i];\n      if (!partial)\n        continue;\n      const shape = this.getShape(partial.id);\n      if (!shape)\n        continue;\n      if (this.isShapeOrAncestorLocked(shape) && !Object.hasOwn(partial, \"isLocked\"))\n        continue;\n      this.animatingShapes.delete(partial.id);\n      compactedPartials.push(partial);\n    }\n    this._updateShapes(compactedPartials);\n    return this;\n  }\n  /** @internal */\n  _updateShapes = (_partials) => {\n    if (this.getInstanceState().isReadonly)\n      return;\n    this.batch(() => {\n      const updates = [];\n      let shape;\n      let updated;\n      for (let i = 0, n = _partials.length; i < n; i++) {\n        const partial = _partials[i];\n        if (!partial)\n          continue;\n        shape = this.getShape(partial.id);\n        if (!shape)\n          continue;\n        updated = applyPartialToRecordWithProps(shape, partial);\n        if (updated === shape)\n          continue;\n        updated = this.getShapeUtil(shape).onBeforeUpdate?.(shape, updated) ?? updated;\n        updates.push(updated);\n      }\n      this.store.put(updates);\n    });\n  };\n  /** @internal */\n  _getUnlockedShapeIds(ids) {\n    return ids.filter((id) => !this.getShape(id)?.isLocked);\n  }\n  deleteShapes(_ids) {\n    if (!Array.isArray(_ids)) {\n      throw Error(\"Editor.deleteShapes: must provide an array of shapes or shapeIds\");\n    }\n    const ids = this._getUnlockedShapeIds(\n      typeof _ids[0] === \"string\" ? _ids : _ids.map((s) => s.id)\n    );\n    if (this.getInstanceState().isReadonly)\n      return this;\n    if (ids.length === 0)\n      return this;\n    const allIds = new Set(ids);\n    for (const id of ids) {\n      this.visitDescendants(id, (childId) => {\n        allIds.add(childId);\n      });\n    }\n    const deletedIds = [...allIds];\n    return this.batch(() => this.store.remove(deletedIds));\n  }\n  deleteShape(_id) {\n    this.deleteShapes([typeof _id === \"string\" ? _id : _id.id]);\n    return this;\n  }\n  /* --------------------- Styles --------------------- */\n  /**\n   * Get all the current styles among the users selected shapes\n   *\n   * @internal\n   */\n  _extractSharedStyles(shape, sharedStyleMap) {\n    if (this.isShapeOfType(shape, \"group\")) {\n      const childIds = this._parentIdsToChildIds.get()[shape.id];\n      if (!childIds)\n        return;\n      for (let i = 0, n = childIds.length; i < n; i++) {\n        this._extractSharedStyles(this.getShape(childIds[i]), sharedStyleMap);\n      }\n    } else {\n      for (const [style, propKey] of this.styleProps[shape.type]) {\n        sharedStyleMap.applyValue(style, (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getOwnProperty)(shape.props, propKey));\n      }\n    }\n  }\n  _getSelectionSharedStyles() {\n    const selectedShapes = this.getSelectedShapes();\n    const sharedStyles = new _utils_SharedStylesMap_mjs__WEBPACK_IMPORTED_MODULE_20__.SharedStyleMap();\n    for (const selectedShape of selectedShapes) {\n      this._extractSharedStyles(selectedShape, sharedStyles);\n    }\n    return sharedStyles;\n  }\n  /**\n   * Get the style for the next shape.\n   *\n   * @example\n   * ```ts\n   * const color = editor.getStyleForNextShape(DefaultColorStyle)\n   * ```\n   *\n   * @param style - The style to get.\n   *\n   * @public */\n  getStyleForNextShape(style) {\n    const value = this.getInstanceState().stylesForNextShape[style.id];\n    return value === void 0 ? style.defaultValue : value;\n  }\n  getShapeStyleIfExists(shape, style) {\n    const styleKey = this.styleProps[shape.type].get(style);\n    if (styleKey === void 0)\n      return void 0;\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getOwnProperty)(shape.props, styleKey);\n  }\n  getSharedStyles() {\n    if (this.isIn(\"select\") && this.getSelectedShapeIds().length > 0) {\n      return this._getSelectionSharedStyles();\n    }\n    const currentTool = this.root.getCurrent();\n    const styles = new _utils_SharedStylesMap_mjs__WEBPACK_IMPORTED_MODULE_20__.SharedStyleMap();\n    if (!currentTool)\n      return styles;\n    if (currentTool.shapeType) {\n      for (const style of this.styleProps[currentTool.shapeType].keys()) {\n        styles.applyValue(style, this.getStyleForNextShape(style));\n      }\n    }\n    return styles;\n  }\n  getSharedOpacity() {\n    if (this.isIn(\"select\") && this.getSelectedShapeIds().length > 0) {\n      const shapesToCheck = [];\n      const addShape = (shapeId) => {\n        const shape = this.getShape(shapeId);\n        if (!shape)\n          return;\n        if (this.isShapeOfType(shape, \"group\")) {\n          for (const childId of this.getSortedChildIdsForParent(shape.id)) {\n            addShape(childId);\n          }\n        } else {\n          shapesToCheck.push(shape);\n        }\n      };\n      for (const shapeId of this.getSelectedShapeIds()) {\n        addShape(shapeId);\n      }\n      let opacity = null;\n      for (const shape of shapesToCheck) {\n        if (opacity === null) {\n          opacity = shape.opacity;\n        } else if (opacity !== shape.opacity) {\n          return { type: \"mixed\" };\n        }\n      }\n      if (opacity !== null)\n        return { type: \"shared\", value: opacity };\n    }\n    return { type: \"shared\", value: this.getInstanceState().opacityForNextShape };\n  }\n  /**\n   * Set the opacity for the next shapes. This will effect subsequently created shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setOpacityForNextShapes(0.5)\n   * ```\n   *\n   * @param opacity - The opacity to set. Must be a number between 0 and 1 inclusive.\n   * @param historyOptions - The history options for the change.\n   */\n  setOpacityForNextShapes(opacity, historyOptions) {\n    this.updateInstanceState({ opacityForNextShape: opacity }, historyOptions);\n    return this;\n  }\n  /**\n   * Set the current opacity. This will effect any selected shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setOpacityForSelectedShapes(0.5)\n   * ```\n   *\n   * @param opacity - The opacity to set. Must be a number between 0 and 1 inclusive.\n   */\n  setOpacityForSelectedShapes(opacity) {\n    const selectedShapes = this.getSelectedShapes();\n    if (selectedShapes.length > 0) {\n      const shapesToUpdate = [];\n      const addShapeById = (shape) => {\n        if (this.isShapeOfType(shape, \"group\")) {\n          const childIds = this.getSortedChildIdsForParent(shape);\n          for (const childId of childIds) {\n            addShapeById(this.getShape(childId));\n          }\n        } else {\n          shapesToUpdate.push(shape);\n        }\n      };\n      for (const id of selectedShapes) {\n        addShapeById(id);\n      }\n      this.updateShapes(\n        shapesToUpdate.map((shape) => {\n          return {\n            id: shape.id,\n            type: shape.type,\n            opacity\n          };\n        })\n      );\n    }\n    return this;\n  }\n  /**\n   * Set the value of a {@link @tldraw/tlschema#StyleProp} for the next shapes. This change will be applied to subsequently created shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setStyleForNextShapes(DefaultColorStyle, 'red')\n   * editor.setStyleForNextShapes(DefaultColorStyle, 'red', { ephemeral: true })\n   * ```\n   *\n   * @param style - The style to set.\n   * @param value - The value to set.\n   * @param historyOptions - The history options for the change.\n   *\n   * @public\n   */\n  setStyleForNextShapes(style, value, historyOptions) {\n    const stylesForNextShape = this.getInstanceState().stylesForNextShape;\n    this.updateInstanceState(\n      { stylesForNextShape: { ...stylesForNextShape, [style.id]: value } },\n      historyOptions\n    );\n    return this;\n  }\n  /**\n   * Set the value of a {@link @tldraw/tlschema#StyleProp}. This change will be applied to the currently selected shapes.\n   *\n   * @example\n   * ```ts\n   * editor.setStyleForSelectedShapes(DefaultColorStyle, 'red')\n   * ```\n   *\n   * @param style - The style to set.\n   * @param value - The value to set.\n   * @param historyOptions - The history options for the change.\n   *\n   * @public\n   */\n  setStyleForSelectedShapes(style, value) {\n    const selectedShapes = this.getSelectedShapes();\n    if (selectedShapes.length > 0) {\n      const updates = [];\n      const addShapeById = (shape) => {\n        if (this.isShapeOfType(shape, \"group\")) {\n          const childIds = this.getSortedChildIdsForParent(shape.id);\n          for (const childId of childIds) {\n            addShapeById(this.getShape(childId));\n          }\n        } else {\n          const util = this.getShapeUtil(shape);\n          const stylePropKey = this.styleProps[shape.type].get(style);\n          if (stylePropKey) {\n            const shapePartial = {\n              id: shape.id,\n              type: shape.type,\n              props: { [stylePropKey]: value }\n            };\n            updates.push({\n              util,\n              originalShape: shape,\n              updatePartial: shapePartial\n            });\n          }\n        }\n      };\n      for (const shape of selectedShapes) {\n        addShapeById(shape);\n      }\n      this.updateShapes(updates.map(({ updatePartial }) => updatePartial));\n    }\n    return this;\n  }\n  /* --------------------- Content -------------------- */\n  /** @internal */\n  externalAssetContentHandlers = {\n    file: null,\n    url: null\n  };\n  /**\n   * Register an external content handler. This handler will be called when the editor receives\n   * external content of the provided type. For example, the 'image' type handler will be called\n   * when a user drops an image onto the canvas.\n   *\n   * @example\n   * ```ts\n   * editor.registerExternalAssetHandler('text', myHandler)\n   * ```\n   *\n   * @param type - The type of external content.\n   * @param handler - The handler to use for this content type.\n   *\n   * @public\n   */\n  registerExternalAssetHandler(type, handler) {\n    this.externalAssetContentHandlers[type] = handler;\n    return this;\n  }\n  /**\n   * Get an asset for an external asset content type.\n   *\n   * @example\n   * ```ts\n   * const asset = await editor.getAssetForExternalContent({ type: 'file', file: myFile })\n   * const asset = await editor.getAssetForExternalContent({ type: 'url', url: myUrl })\n   * ```\n   *\n   * @param info - Info about the external content.\n   * @returns The asset.\n   */\n  async getAssetForExternalContent(info) {\n    return await this.externalAssetContentHandlers[info.type]?.(info);\n  }\n  /** @internal */\n  externalContentHandlers = {\n    text: null,\n    files: null,\n    embed: null,\n    \"svg-text\": null,\n    url: null\n  };\n  /**\n   * Register an external content handler. This handler will be called when the editor receives\n   * external content of the provided type. For example, the 'image' type handler will be called\n   * when a user drops an image onto the canvas.\n   *\n   * @example\n   * ```ts\n   * editor.registerExternalContentHandler('text', myHandler)\n   * ```\n   *\n   * @param type - The type of external content.\n   * @param handler - The handler to use for this content type.\n   *\n   * @public\n   */\n  registerExternalContentHandler(type, handler) {\n    this.externalContentHandlers[type] = handler;\n    return this;\n  }\n  /**\n   * Handle external content, such as files, urls, embeds, or plain text which has been put into the app, for example by pasting external text or dropping external images onto canvas.\n   *\n   * @param info - Info about the external content.\n   */\n  async putExternalContent(info) {\n    return this.externalContentHandlers[info.type]?.(info);\n  }\n  /**\n   * Get content that can be exported for the given shape ids.\n   *\n   * @param shapes - The shapes (or shape ids) to get content for.\n   *\n   * @returns The exported content.\n   *\n   * @public\n   */\n  getContentFromCurrentPage(shapes) {\n    const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n    if (!ids)\n      return;\n    if (ids.length === 0)\n      return;\n    const shapeIds = this.getShapeAndDescendantIds(ids);\n    return withIsolatedShapes(this, shapeIds, (bindingIdsToKeep) => {\n      const bindings = [];\n      for (const id of bindingIdsToKeep) {\n        const binding = this.getBinding(id);\n        if (!binding)\n          continue;\n        bindings.push(binding);\n      }\n      const rootShapeIds = [];\n      const shapes2 = [];\n      for (const shapeId of shapeIds) {\n        const shape = this.getShape(shapeId);\n        if (!shape)\n          continue;\n        const isRootShape = !shapeIds.has(shape.parentId);\n        if (isRootShape) {\n          const pageTransform = this.getShapePageTransform(shape.id);\n          const pagePoint = pageTransform.point();\n          shapes2.push({\n            ...shape,\n            x: pagePoint.x,\n            y: pagePoint.y,\n            rotation: pageTransform.rotation(),\n            parentId: this.getCurrentPageId()\n          });\n          rootShapeIds.push(shape.id);\n        } else {\n          shapes2.push(shape);\n        }\n      }\n      const assets = [];\n      const seenAssetIds = /* @__PURE__ */ new Set();\n      for (const shape of shapes2) {\n        if (!(\"assetId\" in shape.props))\n          continue;\n        const assetId = shape.props.assetId;\n        if (!assetId || seenAssetIds.has(assetId))\n          continue;\n        seenAssetIds.add(assetId);\n        const asset = this.getAsset(assetId);\n        if (!asset)\n          continue;\n        assets.push(asset);\n      }\n      return {\n        schema: this.store.schema.serialize(),\n        shapes: shapes2,\n        rootShapeIds,\n        bindings,\n        assets\n      };\n    });\n  }\n  /**\n   * Place content into the editor.\n   *\n   * @param content - The content.\n   * @param options - Options for placing the content.\n   *\n   * @public\n   */\n  putContentOntoCurrentPage(content, options = {}) {\n    if (this.getInstanceState().isReadonly)\n      return this;\n    if (!content.schema) {\n      throw Error(\"Could not put content:\\ncontent is missing a schema.\");\n    }\n    const { select = false, preserveIds = false, preservePosition = false } = options;\n    let { point = void 0 } = options;\n    const currentPageId = this.getCurrentPageId();\n    const { rootShapeIds } = content;\n    const assets = [];\n    const shapes = [];\n    const bindings = [];\n    const store = {\n      store: {\n        ...Object.fromEntries(content.assets.map((asset) => [asset.id, asset])),\n        ...Object.fromEntries(content.shapes.map((shape) => [shape.id, shape])),\n        ...Object.fromEntries(\n          content.bindings?.map((bindings2) => [bindings2.id, bindings2]) ?? []\n        )\n      },\n      schema: content.schema\n    };\n    const result = this.store.schema.migrateStoreSnapshot(store);\n    if (result.type === \"error\") {\n      throw Error(\"Could not put content: could not migrate content\");\n    }\n    for (const record of Object.values(result.value)) {\n      switch (record.typeName) {\n        case \"asset\": {\n          assets.push(record);\n          break;\n        }\n        case \"shape\": {\n          shapes.push(record);\n          break;\n        }\n        case \"binding\": {\n          bindings.push(record);\n          break;\n        }\n      }\n    }\n    const shapeIdMap = new Map(\n      preserveIds ? shapes.map((shape) => [shape.id, shape.id]) : shapes.map((shape) => [shape.id, (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createShapeId)()])\n    );\n    const bindingIdMap = new Map(\n      preserveIds ? bindings.map((binding) => [binding.id, binding.id]) : bindings.map((binding) => [binding.id, (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.createBindingId)()])\n    );\n    let pasteParentId = this.getCurrentPageId();\n    let lowestDepth = Infinity;\n    let lowestAncestors = [];\n    for (const shape of this.getSelectedShapes()) {\n      if (lowestDepth === 0)\n        break;\n      const isFrame = this.isShapeOfType(shape, \"frame\");\n      const ancestors = this.getShapeAncestors(shape);\n      if (isFrame)\n        ancestors.push(shape);\n      const depth = isFrame ? ancestors.length + 1 : ancestors.length;\n      if (depth < lowestDepth) {\n        lowestDepth = depth;\n        lowestAncestors = ancestors;\n        pasteParentId = isFrame ? shape.id : shape.parentId;\n      } else if (depth === lowestDepth) {\n        if (lowestAncestors.length !== ancestors.length) {\n          throw Error(`Ancestors: ${lowestAncestors.length} !== ${ancestors.length}`);\n        }\n        if (lowestAncestors.length === 0) {\n          pasteParentId = currentPageId;\n          break;\n        } else {\n          pasteParentId = currentPageId;\n          for (let i = 0; i < lowestAncestors.length; i++) {\n            if (ancestors[i] !== lowestAncestors[i])\n              break;\n            pasteParentId = ancestors[i].id;\n          }\n        }\n      }\n    }\n    let isDuplicating = false;\n    if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(pasteParentId)) {\n      const parent = this.getShape(pasteParentId);\n      if (parent) {\n        if (!this.getViewportPageBounds().includes(this.getShapePageBounds(parent))) {\n          pasteParentId = currentPageId;\n        } else {\n          if (rootShapeIds.length === 1) {\n            const rootShape = shapes.find((s) => s.id === rootShapeIds[0]);\n            if (this.isShapeOfType(parent, \"frame\") && this.isShapeOfType(rootShape, \"frame\") && rootShape.props.w === parent?.props.w && rootShape.props.h === parent?.props.h) {\n              isDuplicating = true;\n            }\n          }\n        }\n      } else {\n        pasteParentId = currentPageId;\n      }\n    }\n    if (!isDuplicating) {\n      isDuplicating = shapeIdMap.has(pasteParentId);\n    }\n    if (isDuplicating) {\n      pasteParentId = this.getShape(pasteParentId).parentId;\n    }\n    let index = this.getHighestIndexForParent(pasteParentId);\n    const rootShapes = [];\n    const newShapes = shapes.map((oldShape) => {\n      const newId = shapeIdMap.get(oldShape.id);\n      const newShape = { ...oldShape, id: newId };\n      if (rootShapeIds.includes(oldShape.id)) {\n        newShape.parentId = currentPageId;\n        rootShapes.push(newShape);\n      }\n      if (shapeIdMap.has(newShape.parentId)) {\n        newShape.parentId = shapeIdMap.get(oldShape.parentId);\n      } else {\n        rootShapeIds.push(newShape.id);\n        newShape.index = index;\n        index = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.getIndexAbove)(index);\n      }\n      return newShape;\n    });\n    if (newShapes.length + this.getCurrentPageShapeIds().size > this.options.maxShapesPerPage) {\n      alertMaxShapes(this);\n      return this;\n    }\n    const newBindings = bindings.map(\n      (oldBinding) => ({\n        ...oldBinding,\n        id: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)(bindingIdMap.get(oldBinding.id)),\n        fromId: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)(shapeIdMap.get(oldBinding.fromId)),\n        toId: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assertExists)(shapeIdMap.get(oldBinding.toId))\n      })\n    );\n    const assetsToCreate = [];\n    const assetsToUpdate = [];\n    for (const asset of assets) {\n      if (this.store.has(asset.id)) {\n        continue;\n      }\n      if ((asset.type === \"image\" || asset.type === \"video\") && asset.props.src?.startsWith(\"data:image\")) {\n        assetsToUpdate.push((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.structuredClone)(asset));\n        asset.props.src = null;\n      }\n      assetsToCreate.push(asset);\n    }\n    Promise.allSettled(\n      assetsToUpdate.map(async (asset) => {\n        const file = await (0,_utils_assets_mjs__WEBPACK_IMPORTED_MODULE_21__.dataUrlToFile)(\n          asset.props.src,\n          asset.props.name,\n          asset.props.mimeType ?? \"image/png\"\n        );\n        const newAsset = await this.getAssetForExternalContent({ type: \"file\", file });\n        if (!newAsset) {\n          this.deleteAssets([asset.id]);\n          return;\n        }\n        this.updateAssets([{ ...newAsset, id: asset.id }]);\n      })\n    );\n    this.batch(() => {\n      if (assetsToCreate.length > 0) {\n        this.createAssets(assetsToCreate);\n      }\n      this.createShapes(newShapes);\n      this.createBindings(newBindings);\n      if (select) {\n        this.select(...rootShapes.map((s) => s.id));\n      }\n      if (pasteParentId !== currentPageId) {\n        this.reparentShapes(\n          rootShapes.map((s) => s.id),\n          pasteParentId\n        );\n      }\n      const newCreatedShapes = newShapes.map((s) => this.getShape(s.id));\n      const bounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.Common(newCreatedShapes.map((s) => this.getShapePageBounds(s)));\n      if (point === void 0) {\n        if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(pasteParentId)) {\n          const shape = this.getShape(pasteParentId);\n          point = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_14__.Mat.applyToPoint(\n            this.getShapePageTransform(shape),\n            this.getShapeGeometry(shape).bounds.center\n          );\n        } else {\n          const viewportPageBounds = this.getViewportPageBounds();\n          if (preservePosition || viewportPageBounds.includes(_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.From(bounds))) {\n            point = bounds.center;\n          } else {\n            point = viewportPageBounds.center;\n          }\n        }\n      }\n      if (rootShapes.length === 1) {\n        const onlyRoot = rootShapes[0];\n        if (this.isShapeOfType(onlyRoot, \"frame\")) {\n          while (this.getShapesAtPoint(point).some(\n            (shape) => this.isShapeOfType(shape, \"frame\") && shape.props.w === onlyRoot.props.w && shape.props.h === onlyRoot.props.h\n          )) {\n            point.x += bounds.w + 16;\n          }\n        }\n      }\n      const pageCenter = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.Common(\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.compact)(rootShapes.map(({ id }) => this.getShapePageBounds(id)))\n      ).center;\n      const offset = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Sub(point, pageCenter);\n      this.updateShapes(\n        rootShapes.map(({ id }) => {\n          const s = this.getShape(id);\n          const localRotation = this.getShapeParentTransform(id).decompose().rotation;\n          const localDelta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Rot(offset, -localRotation);\n          return { id: s.id, type: s.type, x: s.x + localDelta.x, y: s.y + localDelta.y };\n        })\n      );\n    });\n    return this;\n  }\n  /**\n   * Get an exported SVG element of the given shapes.\n   *\n   * @param ids - The shapes (or shape ids) to export.\n   * @param opts - Options for the export.\n   *\n   * @returns The SVG element.\n   *\n   * @public\n   */\n  async getSvgElement(shapes, opts = {}) {\n    const result = await (0,_getSvgJsx_mjs__WEBPACK_IMPORTED_MODULE_31__.getSvgJsx)(this, shapes, opts);\n    if (!result)\n      return void 0;\n    const fragment = document.createDocumentFragment();\n    const root = (0,react_dom_client__WEBPACK_IMPORTED_MODULE_6__.createRoot)(fragment);\n    (0,react_dom__WEBPACK_IMPORTED_MODULE_5__.flushSync)(() => {\n      root.render(result.jsx);\n    });\n    const svg = fragment.firstElementChild;\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.assert)(svg instanceof SVGSVGElement, \"Expected an SVG element\");\n    root.unmount();\n    return { svg, width: result.width, height: result.height };\n  }\n  /**\n   * Get an exported SVG string of the given shapes.\n   *\n   * @param ids - The shapes (or shape ids) to export.\n   * @param opts - Options for the export.\n   *\n   * @returns The SVG element.\n   *\n   * @public\n   */\n  async getSvgString(shapes, opts = {}) {\n    const result = await this.getSvgElement(shapes, opts);\n    if (!result)\n      return void 0;\n    const serializer = new XMLSerializer();\n    return {\n      svg: serializer.serializeToString(result.svg),\n      width: result.width,\n      height: result.height\n    };\n  }\n  /** @deprecated Use {@link Editor.getSvgString} or {@link Editor.getSvgElement} instead. */\n  async getSvg(shapes, opts = {}) {\n    const result = await this.getSvgElement(shapes, opts);\n    if (!result)\n      return void 0;\n    return result.svg;\n  }\n  /* --------------------- Events --------------------- */\n  /**\n   * The app's current input state.\n   *\n   * @public\n   */\n  inputs = {\n    /** The most recent pointer down's position in the current page space. */\n    originPagePoint: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(),\n    /** The most recent pointer down's position in screen space. */\n    originScreenPoint: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(),\n    /** The previous pointer position in the current page space. */\n    previousPagePoint: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(),\n    /** The previous pointer position in screen space. */\n    previousScreenPoint: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(),\n    /** The most recent pointer position in the current page space. */\n    currentPagePoint: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(),\n    /** The most recent pointer position in screen space. */\n    currentScreenPoint: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(),\n    /** A set containing the currently pressed keys. */\n    keys: /* @__PURE__ */ new Set(),\n    /** A set containing the currently pressed buttons. */\n    buttons: /* @__PURE__ */ new Set(),\n    /** Whether the input is from a pe. */\n    isPen: false,\n    /** Whether the shift key is currently pressed. */\n    shiftKey: false,\n    /** Whether the control or command key is currently pressed. */\n    ctrlKey: false,\n    /** Whether the alt or option key is currently pressed. */\n    altKey: false,\n    /** Whether the user is dragging. */\n    isDragging: false,\n    /** Whether the user is pointing. */\n    isPointing: false,\n    /** Whether the user is pinching. */\n    isPinching: false,\n    /** Whether the user is editing. */\n    isEditing: false,\n    /** Whether the user is panning. */\n    isPanning: false,\n    /** Velocity of mouse pointer, in pixels per millisecond */\n    pointerVelocity: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec()\n  };\n  /**\n   * Update the input points from a pointer, pinch, or wheel event.\n   *\n   * @param info - The event info.\n   */\n  _updateInputsFromEvent(info) {\n    const {\n      pointerVelocity,\n      previousScreenPoint,\n      previousPagePoint,\n      currentScreenPoint,\n      currentPagePoint\n    } = this.inputs;\n    const { screenBounds } = this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n    const { x: cx, y: cy, z: cz } = this.store.unsafeGetWithoutCapture(this.getCameraId());\n    const sx = info.point.x - screenBounds.x;\n    const sy = info.point.y - screenBounds.y;\n    const sz = info.point.z ?? 0.5;\n    previousScreenPoint.setTo(currentScreenPoint);\n    previousPagePoint.setTo(currentPagePoint);\n    currentScreenPoint.set(sx, sy);\n    const nx = sx / cz - cx;\n    const ny = sy / cz - cy;\n    if (isFinite(nx) && isFinite(ny)) {\n      currentPagePoint.set(nx, ny, sz);\n    }\n    this.inputs.isPen = info.type === \"pointer\" && info.isPen;\n    if (info.name === \"pointer_down\" || this.inputs.isPinching) {\n      pointerVelocity.set(0, 0);\n      this.inputs.originScreenPoint.setTo(currentScreenPoint);\n      this.inputs.originPagePoint.setTo(currentPagePoint);\n    }\n    this.history.ignore(() => {\n      this.store.put([\n        {\n          id: _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLPOINTER_ID,\n          typeName: \"pointer\",\n          x: currentPagePoint.x,\n          y: currentPagePoint.y,\n          lastActivityTimestamp: (\n            // If our pointer moved only because we're following some other user, then don't\n            // update our last activity timestamp; otherwise, update it to the current timestamp.\n            (info.type === \"pointer\" && info.pointerId === _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.INTERNAL_POINTER_IDS.CAMERA_MOVE ? this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLPOINTER_ID)?.lastActivityTimestamp ?? this._tickManager.now : this._tickManager.now)\n          ),\n          meta: {}\n        }\n      ]);\n    });\n  }\n  /**\n   * Dispatch a cancel event.\n   *\n   * @example\n   * ```ts\n   * editor.cancel()\n   * ```\n   *\n   * @public\n   */\n  cancel() {\n    this.dispatch({ type: \"misc\", name: \"cancel\" });\n    return this;\n  }\n  /**\n   * Dispatch an interrupt event.\n   *\n   * @example\n   * ```ts\n   * editor.interrupt()\n   * ```\n   *\n   * @public\n   */\n  interrupt() {\n    this.dispatch({ type: \"misc\", name: \"interrupt\" });\n    return this;\n  }\n  /**\n   * Dispatch a complete event.\n   *\n   * @example\n   * ```ts\n   * editor.complete()\n   * ```\n   *\n   * @public\n   */\n  complete() {\n    this.dispatch({ type: \"misc\", name: \"complete\" });\n    return this;\n  }\n  /**\n   * Puts the editor into focused mode.\n   *\n   * This makes the editor eligible to receive keyboard events and some pointer events (move, wheel).\n   *\n   * @example\n   * ```ts\n   * editor.focus()\n   * ```\n   *\n   * By default this also dispatches a 'focus' event to the container element. To prevent this, pass `focusContainer: false`.\n   *\n   * @example\n   * ```ts\n   * editor.focus({ focusContainer: false })\n   * ```\n   *\n   * @public\n   */\n  focus({ focusContainer = true } = {}) {\n    if (focusContainer) {\n      this.focusManager.focus();\n    }\n    this.updateInstanceState({ isFocused: true });\n    return this;\n  }\n  /**\n   * Switches off the editor's focused mode.\n   *\n   * This makes the editor ignore keyboard events and some pointer events (move, wheel).\n   *\n   * @example\n   * ```ts\n   * editor.blur()\n   * ```\n   * By default this also dispatches a 'blur' event to the container element. To prevent this, pass `blurContainer: false`.\n   *\n   * @example\n   * ```ts\n   * editor.blur({ blurContainer: false })\n   * ```\n   *\n   * @public\n   */\n  blur({ blurContainer = true } = {}) {\n    if (!this.getIsFocused())\n      return this;\n    if (blurContainer) {\n      this.focusManager.blur();\n    } else {\n      this.complete();\n    }\n    this.updateInstanceState({ isFocused: false });\n    return this;\n  }\n  getIsFocused() {\n    return this.getInstanceState().isFocused;\n  }\n  /**\n   * @public\n   * @returns a snapshot of the store's UI and document state\n   */\n  getSnapshot() {\n    return (0,_config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_7__.getSnapshot)(this.store);\n  }\n  /**\n   * Loads a snapshot into the editor.\n   * @param snapshot - the snapshot to load\n   * @returns\n   */\n  loadSnapshot(snapshot) {\n    (0,_config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_7__.loadSnapshot)(this.store, snapshot);\n    return this;\n  }\n  /**\n   * A manager for recording multiple click events.\n   *\n   * @internal\n   */\n  _clickManager = new _managers_ClickManager_mjs__WEBPACK_IMPORTED_MODULE_32__.ClickManager(this);\n  /**\n   * Prevent a double click event from firing the next time the user clicks\n   *\n   * @public\n   */\n  cancelDoubleClick() {\n    this._clickManager.cancelDoubleClickTimeout();\n  }\n  /**\n   * The previous cursor. Used for restoring the cursor after pan events.\n   *\n   * @internal\n   */\n  _prevCursor = \"default\";\n  /** @internal */\n  _shiftKeyTimeout = -1;\n  /** @internal */\n  _setShiftKeyTimeout = () => {\n    this.inputs.shiftKey = false;\n    this.dispatch({\n      type: \"keyboard\",\n      name: \"key_up\",\n      key: \"Shift\",\n      shiftKey: this.inputs.shiftKey,\n      ctrlKey: this.inputs.ctrlKey,\n      altKey: this.inputs.altKey,\n      code: \"ShiftLeft\"\n    });\n  };\n  /** @internal */\n  _altKeyTimeout = -1;\n  /** @internal */\n  _setAltKeyTimeout = () => {\n    this.inputs.altKey = false;\n    this.dispatch({\n      type: \"keyboard\",\n      name: \"key_up\",\n      key: \"Alt\",\n      shiftKey: this.inputs.shiftKey,\n      ctrlKey: this.inputs.ctrlKey,\n      altKey: this.inputs.altKey,\n      code: \"AltLeft\"\n    });\n  };\n  /** @internal */\n  _ctrlKeyTimeout = -1;\n  /** @internal */\n  _setCtrlKeyTimeout = () => {\n    this.inputs.ctrlKey = false;\n    this.dispatch({\n      type: \"keyboard\",\n      name: \"key_up\",\n      key: \"Ctrl\",\n      shiftKey: this.inputs.shiftKey,\n      ctrlKey: this.inputs.ctrlKey,\n      altKey: this.inputs.altKey,\n      code: \"ControlLeft\"\n    });\n  };\n  /** @internal */\n  _restoreToolId = \"select\";\n  /** @internal */\n  _pinchStart = 1;\n  /** @internal */\n  _didPinch = false;\n  /** @internal */\n  _selectedShapeIdsAtPointerDown = [];\n  /** @internal */\n  _longPressTimeout = -1;\n  /** @internal */\n  capturedPointerId = null;\n  /** @internal */\n  performanceTracker;\n  /** @internal */\n  performanceTrackerTimeout = -1;\n  /**\n   * Dispatch an event to the editor.\n   *\n   * @example\n   * ```ts\n   * editor.dispatch(myPointerEvent)\n   * ```\n   *\n   * @param info - The event info.\n   *\n   * @public\n   */\n  dispatch = (info) => {\n    this._pendingEventsForNextTick.push(info);\n    if (!(info.type === \"pointer\" && info.name === \"pointer_move\" || info.type === \"wheel\" || info.type === \"pinch\")) {\n      this._flushEventsForTick(0);\n    }\n    return this;\n  };\n  _pendingEventsForNextTick = [];\n  _flushEventsForTick(elapsed) {\n    this.batch(() => {\n      if (this._pendingEventsForNextTick.length > 0) {\n        const events = [...this._pendingEventsForNextTick];\n        this._pendingEventsForNextTick.length = 0;\n        for (const info of events) {\n          this._flushEventForTick(info);\n        }\n      }\n      if (elapsed > 0) {\n        this.root.handleEvent({ type: \"misc\", name: \"tick\", elapsed });\n      }\n      this.scribbles.tick(elapsed);\n    });\n  }\n  _flushEventForTick = (info) => {\n    if (this.getCrashingError())\n      return this;\n    const { inputs } = this;\n    const { type } = info;\n    if (info.type === \"misc\") {\n      if (info.name === \"cancel\" || info.name === \"complete\") {\n        this.inputs.isDragging = false;\n        if (this.inputs.isPanning) {\n          this.inputs.isPanning = false;\n          this.setCursor({ type: this._prevCursor, rotation: 0 });\n        }\n      }\n      this.root.handleEvent(info);\n      return;\n    }\n    if (info.shiftKey) {\n      clearTimeout(this._shiftKeyTimeout);\n      this._shiftKeyTimeout = -1;\n      inputs.shiftKey = true;\n    } else if (!info.shiftKey && inputs.shiftKey && this._shiftKeyTimeout === -1) {\n      this._shiftKeyTimeout = this.timers.setTimeout(this._setShiftKeyTimeout, 150);\n    }\n    if (info.altKey) {\n      clearTimeout(this._altKeyTimeout);\n      this._altKeyTimeout = -1;\n      inputs.altKey = true;\n    } else if (!info.altKey && inputs.altKey && this._altKeyTimeout === -1) {\n      this._altKeyTimeout = this.timers.setTimeout(this._setAltKeyTimeout, 150);\n    }\n    if (info.ctrlKey) {\n      clearTimeout(this._ctrlKeyTimeout);\n      this._ctrlKeyTimeout = -1;\n      inputs.ctrlKey = true;\n    } else if (!info.ctrlKey && inputs.ctrlKey && this._ctrlKeyTimeout === -1) {\n      this._ctrlKeyTimeout = this.timers.setTimeout(this._setCtrlKeyTimeout, 150);\n    }\n    const { originPagePoint, currentPagePoint } = inputs;\n    if (!inputs.isPointing) {\n      inputs.isDragging = false;\n    }\n    const instanceState = this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n    const pageState = this.store.get(this._getCurrentPageStateId());\n    const cameraOptions = this._cameraOptions.__unsafe__getWithoutCapture();\n    switch (type) {\n      case \"pinch\": {\n        if (cameraOptions.isLocked)\n          return;\n        clearTimeout(this._longPressTimeout);\n        this._updateInputsFromEvent(info);\n        switch (info.name) {\n          case \"pinch_start\": {\n            if (inputs.isPinching)\n              return;\n            if (!inputs.isEditing) {\n              this._pinchStart = this.getCamera().z;\n              if (!this._selectedShapeIdsAtPointerDown.length) {\n                this._selectedShapeIdsAtPointerDown = [...pageState.selectedShapeIds];\n              }\n              this._didPinch = true;\n              inputs.isPinching = true;\n              this.interrupt();\n            }\n            return;\n          }\n          case \"pinch\": {\n            if (!inputs.isPinching)\n              return;\n            const {\n              point: { z = 1 },\n              delta: { x: dx, y: dy }\n            } = info;\n            const { x, y } = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.SubXY(\n              info.point,\n              instanceState.screenBounds.x,\n              instanceState.screenBounds.y\n            );\n            this.stopCameraAnimation();\n            if (instanceState.followingUserId) {\n              this.stopFollowingUser();\n            }\n            const { x: cx, y: cy, z: cz } = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.unsafe__withoutCapture)(() => this.getCamera());\n            const { panSpeed, zoomSpeed } = cameraOptions;\n            this._setCamera(\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(\n                cx + dx * panSpeed / cz - x / cz + x / (z * zoomSpeed),\n                cy + dy * panSpeed / cz - y / cz + y / (z * zoomSpeed),\n                z * zoomSpeed\n              ),\n              { immediate: true }\n            );\n            return;\n          }\n          case \"pinch_end\": {\n            if (!inputs.isPinching)\n              return this;\n            inputs.isPinching = false;\n            const { _selectedShapeIdsAtPointerDown: shapesToReselect } = this;\n            this.setSelectedShapes(this._selectedShapeIdsAtPointerDown);\n            this._selectedShapeIdsAtPointerDown = [];\n            if (this._didPinch) {\n              this._didPinch = false;\n              if (shapesToReselect.length > 0) {\n                this.once(\"tick\", () => {\n                  if (!this._didPinch) {\n                    this.setSelectedShapes(shapesToReselect);\n                  }\n                });\n              }\n            }\n            return;\n          }\n        }\n      }\n      case \"wheel\": {\n        if (cameraOptions.isLocked)\n          return;\n        this._updateInputsFromEvent(info);\n        if (this.getIsMenuOpen()) {\n        } else {\n          const { panSpeed, zoomSpeed, wheelBehavior } = cameraOptions;\n          if (wheelBehavior !== \"none\") {\n            this.stopCameraAnimation();\n            if (instanceState.followingUserId) {\n              this.stopFollowingUser();\n            }\n            const { x: cx, y: cy, z: cz } = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.unsafe__withoutCapture)(() => this.getCamera());\n            const { x: dx, y: dy, z: dz = 0 } = info.delta;\n            let behavior = wheelBehavior;\n            if (inputs.ctrlKey)\n              behavior = wheelBehavior === \"pan\" ? \"zoom\" : \"pan\";\n            switch (behavior) {\n              case \"zoom\": {\n                const { x, y } = this.inputs.currentScreenPoint;\n                let delta = dz;\n                if (wheelBehavior === \"zoom\") {\n                  if (Math.abs(dy) > 10) {\n                    delta = 10 * Math.sign(dy) / 100;\n                  } else {\n                    delta = dy / 100;\n                  }\n                }\n                const zoom = cz + (delta ?? 0) * zoomSpeed * cz;\n                this._setCamera(\n                  new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(\n                    cx + (x / zoom - x) - (x / cz - x),\n                    cy + (y / zoom - y) - (y / cz - y),\n                    zoom\n                  ),\n                  { immediate: true }\n                );\n                this.maybeTrackPerformance(\"Zooming\");\n                return;\n              }\n              case \"pan\": {\n                this._setCamera(new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(cx + dx * panSpeed / cz, cy + dy * panSpeed / cz, cz), {\n                  immediate: true\n                });\n                this.maybeTrackPerformance(\"Panning\");\n                return;\n              }\n            }\n          }\n        }\n        break;\n      }\n      case \"pointer\": {\n        if (inputs.isPinching)\n          return;\n        this._updateInputsFromEvent(info);\n        const { isPen } = info;\n        const { isPenMode } = instanceState;\n        switch (info.name) {\n          case \"pointer_down\": {\n            if (isPenMode && !isPen)\n              return;\n            this.clearOpenMenus();\n            if (!this.inputs.isPanning) {\n              this._longPressTimeout = this.timers.setTimeout(() => {\n                this.dispatch({\n                  ...info,\n                  point: this.inputs.currentScreenPoint,\n                  name: \"long_press\"\n                });\n              }, this.options.longPressDurationMs);\n            }\n            this._selectedShapeIdsAtPointerDown = this.getSelectedShapeIds();\n            if (info.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.LEFT_MOUSE_BUTTON)\n              this.capturedPointerId = info.pointerId;\n            inputs.buttons.add(info.button);\n            inputs.isPointing = true;\n            inputs.isDragging = false;\n            if (!isPenMode && isPen)\n              this.updateInstanceState({ isPenMode: true });\n            if (info.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.STYLUS_ERASER_BUTTON) {\n              this._restoreToolId = this.getCurrentToolId();\n              this.complete();\n              this.setCurrentTool(\"eraser\");\n            } else if (info.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.MIDDLE_MOUSE_BUTTON) {\n              if (!this.inputs.isPanning) {\n                this._prevCursor = this.getInstanceState().cursor.type;\n              }\n              this.inputs.isPanning = true;\n              clearTimeout(this._longPressTimeout);\n            }\n            if (this.inputs.isPanning) {\n              this.stopCameraAnimation();\n              this.setCursor({ type: \"grabbing\", rotation: 0 });\n              return this;\n            }\n            break;\n          }\n          case \"pointer_move\": {\n            if (!isPen && isPenMode)\n              return;\n            const { x: cx, y: cy, z: cz } = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.unsafe__withoutCapture)(() => this.getCamera());\n            if (this.inputs.isPanning && this.inputs.isPointing) {\n              const { currentScreenPoint, previousScreenPoint } = this.inputs;\n              const { panSpeed } = cameraOptions;\n              const offset = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Sub(currentScreenPoint, previousScreenPoint);\n              this.setCamera(\n                new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec(cx + offset.x * panSpeed / cz, cy + offset.y * panSpeed / cz, cz),\n                { immediate: true }\n              );\n              this.maybeTrackPerformance(\"Panning\");\n              return;\n            }\n            if (inputs.isPointing && !inputs.isDragging && _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_15__.Vec.Dist2(originPagePoint, currentPagePoint) * this.getZoomLevel() > (instanceState.isCoarsePointer ? this.options.coarseDragDistanceSquared : this.options.dragDistanceSquared) / cz) {\n              inputs.isDragging = true;\n              clearTimeout(this._longPressTimeout);\n            }\n            break;\n          }\n          case \"pointer_up\": {\n            inputs.isDragging = false;\n            inputs.isPointing = false;\n            clearTimeout(this._longPressTimeout);\n            inputs.buttons.delete(info.button);\n            if (this.getIsMenuOpen())\n              return;\n            if (instanceState.isPenMode && !isPen)\n              return;\n            if (this.capturedPointerId === info.pointerId) {\n              this.capturedPointerId = null;\n              info.button = 0;\n            }\n            if (inputs.isPanning) {\n              if (!inputs.keys.has(\"Space\")) {\n                inputs.isPanning = false;\n              }\n              const slideDirection = this.inputs.pointerVelocity;\n              const slideSpeed = Math.min(2, slideDirection.len());\n              switch (info.button) {\n                case _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.LEFT_MOUSE_BUTTON: {\n                  this.setCursor({ type: \"grab\", rotation: 0 });\n                  break;\n                }\n                case _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.MIDDLE_MOUSE_BUTTON: {\n                  if (this.inputs.keys.has(\" \")) {\n                    this.setCursor({ type: \"grab\", rotation: 0 });\n                  } else {\n                    this.setCursor({ type: this._prevCursor, rotation: 0 });\n                  }\n                }\n              }\n              if (slideSpeed > 0) {\n                this.slideCamera({ speed: slideSpeed, direction: slideDirection });\n              }\n            } else {\n              if (info.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.STYLUS_ERASER_BUTTON) {\n                this.complete();\n                this.setCurrentTool(this._restoreToolId);\n              }\n            }\n            break;\n          }\n        }\n        break;\n      }\n      case \"keyboard\": {\n        if (info.key === \"ShiftRight\")\n          info.key = \"ShiftLeft\";\n        if (info.key === \"AltRight\")\n          info.key = \"AltLeft\";\n        if (info.code === \"ControlRight\")\n          info.code = \"ControlLeft\";\n        switch (info.name) {\n          case \"key_down\": {\n            inputs.keys.add(info.code);\n            if (info.code === \"Space\" && !info.ctrlKey) {\n              if (!this.inputs.isPanning) {\n                this._prevCursor = instanceState.cursor.type;\n              }\n              this.inputs.isPanning = true;\n              clearTimeout(this._longPressTimeout);\n              this.setCursor({ type: this.inputs.isPointing ? \"grabbing\" : \"grab\", rotation: 0 });\n            }\n            break;\n          }\n          case \"key_up\": {\n            inputs.keys.delete(info.code);\n            if (info.code === \"Space\") {\n              if (this.inputs.buttons.has(_constants_mjs__WEBPACK_IMPORTED_MODULE_11__.MIDDLE_MOUSE_BUTTON)) {\n              } else {\n                this.inputs.isPanning = false;\n                this.setCursor({ type: this._prevCursor, rotation: 0 });\n              }\n            }\n            break;\n          }\n          case \"key_repeat\": {\n            break;\n          }\n        }\n        break;\n      }\n    }\n    if (info.type === \"pointer\") {\n      if (info.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.MIDDLE_MOUSE_BUTTON) {\n        info.name = \"middle_click\";\n      } else if (info.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_11__.RIGHT_MOUSE_BUTTON) {\n        info.name = \"right_click\";\n      }\n      const { isPenMode } = this.store.unsafeGetWithoutCapture(_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n      if (info.isPen === isPenMode) {\n        const clickInfo = this._clickManager.handlePointerEvent(info);\n        if (info.name !== clickInfo.name) {\n          this.root.handleEvent(info);\n          this.emit(\"event\", info);\n          this.root.handleEvent(clickInfo);\n          this.emit(\"event\", clickInfo);\n          return;\n        }\n      }\n    }\n    this.root.handleEvent(info);\n    this.emit(\"event\", info);\n    return this;\n  };\n  /** @internal */\n  maybeTrackPerformance(name) {\n    if (_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_22__.debugFlags.measurePerformance.get()) {\n      if (this.performanceTracker.isStarted()) {\n        clearTimeout(this.performanceTrackerTimeout);\n      } else {\n        this.performanceTracker.start(name);\n      }\n      this.performanceTrackerTimeout = this.timers.setTimeout(() => {\n        this.performanceTracker.stop();\n      }, 50);\n    }\n  }\n}\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCanUndo\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCanRedo\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getPath\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCurrentTool\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCurrentToolId\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getDocumentSettings\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getInstanceState\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getOpenMenus\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getIsMenuOpen\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getPageStates\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getPageStatesQuery\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCurrentPageState\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getCurrentPageStateId\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getSelectedShapeIds\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getSelectedShapes\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getOnlySelectedShapeId\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getOnlySelectedShape\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getSelectionPageBounds\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getSelectionRotation\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getSelectionRotatedPageBounds\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getSelectionRotatedScreenBounds\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getFocusedGroupId\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getFocusedGroup\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getEditingShapeId\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getEditingShape\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getHoveredShapeId\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getHoveredShape\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getHintingShapeIds\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getHintingShape\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getErasingShapeIds\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getErasingShapes\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCameraId\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCamera\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getViewportPageBoundsForFollowing\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCameraForFollowing\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getZoomLevel\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getViewportScreenBounds\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getViewportScreenCenter\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getViewportPageBounds\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getCollaboratorsQuery\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCollaborators\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCollaboratorsOnCurrentPage\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getRenderingShapes\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getAllPagesQuery\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getPages\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCurrentPageId\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCurrentPageShapeIdsSorted\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getAllAssetsQuery\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getShapeGeometryCache\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getShapeHandlesCache\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getShapePageTransformCache\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getShapePageBoundsCache\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getShapeClipPathCache\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getShapeMaskCache\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getShapeMaskedPageBoundsCache\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_notVisibleShapes\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCulledShapes\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCurrentPageBounds\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCurrentPageShapes\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCurrentPageShapesSorted\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getCurrentPageRenderingShapesSorted\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getBindingsIndexCache\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"_getSelectionSharedStyles\", 1);\n__decorateClass([\n  (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)({ isEqual: (a, b) => a.equals(b) })\n], Editor.prototype, \"getSharedStyles\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getSharedOpacity\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], Editor.prototype, \"getIsFocused\", 1);\nfunction alertMaxShapes(editor, pageId = editor.getCurrentPageId()) {\n  const name = editor.getPage(pageId).name;\n  editor.emit(\"max-shapes\", { name, pageId, count: editor.options.maxShapesPerPage });\n}\nfunction applyPartialToRecordWithProps(prev, partial) {\n  if (!partial)\n    return prev;\n  let next = null;\n  const entries = Object.entries(partial);\n  for (let i = 0, n = entries.length; i < n; i++) {\n    const [k, v] = entries[i];\n    if (v === void 0)\n      continue;\n    if (k === \"id\" || k === \"type\" || k === \"typeName\")\n      continue;\n    if (v === prev[k])\n      continue;\n    if (!next)\n      next = { ...prev };\n    if (k === \"props\" || k === \"meta\") {\n      next[k] = { ...prev[k] };\n      for (const [nextKey, nextValue] of Object.entries(v)) {\n        if (nextValue !== void 0) {\n          ;\n          next[k][nextKey] = nextValue;\n        }\n      }\n      continue;\n    }\n    ;\n    next[k] = v;\n  }\n  if (!next)\n    return prev;\n  return next;\n}\nfunction pushShapeWithDescendants(editor, id, result) {\n  const shape = editor.getShape(id);\n  if (!shape)\n    return;\n  result.push(shape);\n  const childIds = editor.getSortedChildIdsForParent(id);\n  for (let i = 0, n = childIds.length; i < n; i++) {\n    pushShapeWithDescendants(editor, childIds[i], result);\n  }\n}\nfunction withIsolatedShapes(editor, shapeIds, callback) {\n  let result;\n  editor.history.ignore(() => {\n    const changes = editor.store.extractingChanges(() => {\n      const bindingsWithBoth = /* @__PURE__ */ new Set();\n      const bindingsToRemove = /* @__PURE__ */ new Set();\n      for (const shapeId of shapeIds) {\n        const shape = editor.getShape(shapeId);\n        if (!shape)\n          continue;\n        for (const binding of editor.getBindingsInvolvingShape(shapeId)) {\n          const hasFrom = shapeIds.has(binding.fromId);\n          const hasTo = shapeIds.has(binding.toId);\n          if (hasFrom && hasTo) {\n            bindingsWithBoth.add(binding.id);\n            continue;\n          }\n          if (!hasFrom || !hasTo) {\n            bindingsToRemove.add(binding.id);\n          }\n        }\n      }\n      editor.deleteBindings([...bindingsToRemove], { isolateShapes: true });\n      try {\n        result = _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.ok(callback(bindingsWithBoth));\n      } catch (error) {\n        result = _tldraw_utils__WEBPACK_IMPORTED_MODULE_3__.Result.err(error);\n      }\n    });\n    editor.store.applyDiff((0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.reverseRecordsDiff)(changes));\n  });\n  if (result.ok) {\n    return result.value;\n  } else {\n    throw result.error;\n  }\n}\nfunction getCameraFitXFitY(editor, cameraOptions) {\n  if (!cameraOptions.constraints)\n    throw Error(\"Should have constraints here\");\n  const {\n    padding: { x: px, y: py }\n  } = cameraOptions.constraints;\n  const vsb = editor.getViewportScreenBounds();\n  const bounds = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_13__.Box.From(cameraOptions.constraints.bounds);\n  const zx = (vsb.w - px * 2) / bounds.w;\n  const zy = (vsb.h - py * 2) / bounds.h;\n  return { zx, zy };\n}\n\n//# sourceMappingURL=Editor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9FZGl0b3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxRQUFRO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNxRztBQUc5RTtBQWFHO0FBdUJIO0FBQ2tCO0FBQ0g7QUFDUTtBQUM2QjtBQUNqQjtBQUNJO0FBQ007QUFVMUM7QUFDNEI7QUFDVjtBQUNBO0FBQ0E7QUFDUTtBQUNTO0FBQ1M7QUFDbUM7QUFDM0M7QUFDVjtBQUNFO0FBQ2U7QUFDRztBQUNtQjtBQUMxQztBQUNlO0FBQ007QUFDRTtBQUNjO0FBQzFDO0FBQ2U7QUFDWTtBQUNaO0FBQ0k7QUFDRTtBQUNJO0FBQ1o7QUFDQTtBQUNzQjtBQUM3QjtBQUNsRCxxQkFBcUIsMENBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EscUJBQXFCLEdBQUcsK0RBQW9CO0FBQzVDO0FBQ0EsdUJBQXVCLHlFQUFjO0FBQ3JDO0FBQ0E7QUFDQSxvQ0FBb0MsNkNBQTZDO0FBQ2pGO0FBQ0E7QUFDQSxLQUFLO0FBQ0wscUJBQXFCLCtFQUFXO0FBQ2hDLHNCQUFzQixpREFBTTtBQUM1QjtBQUNBLDhCQUE4QixHQUFHLG1FQUFzQixvQkFBb0I7QUFDM0Usb0JBQW9CLHlGQUFzQixTQUFTLHNFQUFZO0FBQy9EO0FBQ0EsMkJBQTJCLG1FQUFXO0FBQ3RDLDRCQUE0QixtRUFBVztBQUN2QywwQkFBMEIsNERBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsaUZBQXFCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qix5RUFBdUIsaUJBQWlCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsNkNBQTZDLFNBQVM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBFQUFhO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw2REFBYztBQUN4QixvREFBb0QsUUFBUTtBQUM1RDtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsaUZBQWtCO0FBQzdDLHlCQUF5QiwyRUFBZTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsMERBQVE7QUFDeEU7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywyREFBUztBQUNqRDtBQUNBO0FBQ0EsZ0VBQWdFLDJEQUFTO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJEQUFTO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCw4QkFBOEI7QUFDOUUsaURBQWlELGdCQUFnQjtBQUNqRSxnQkFBZ0I7QUFDaEIsa0RBQWtELDhCQUE4QjtBQUNoRiwrQ0FBK0MsZ0JBQWdCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzREFBTztBQUNuQztBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlFQUF5RSxTQUFTO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsMkRBQTJELFNBQVM7QUFDcEUsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsZ0VBQWdFLDZCQUE2QjtBQUM3RixXQUFXO0FBQ1g7QUFDQSw0REFBNEQsU0FBUztBQUNyRSxXQUFXO0FBQ1g7QUFDQSwyREFBMkQsU0FBUztBQUNwRTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSw2QkFBNkIsOERBQWdCO0FBQzdDLGlDQUFpQyx5RUFBMkI7QUFDNUQ7QUFDQSw4QkFBOEIsOERBQWdCLFVBQVUsY0FBYztBQUN0RTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseUVBQTJCLFVBQVUscUNBQXFDO0FBQzFGO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MseURBQXlEO0FBQzNGLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsOERBQWdCO0FBQzdDLHlDQUF5Qyx5RUFBMkI7QUFDcEU7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJEQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0RBQU87QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLGdDQUFnQyxvR0FBMkI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHNGQUFpQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxzREFBc0QsYUFBYTtBQUNuRTtBQUNBO0FBQ0EsNEJBQTRCLHFFQUFZO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGtDQUFrQyw2REFBa0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLHNDQUFzQztBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2REFBYztBQUNwQyxJQUFJLHFEQUFNLDZDQUE2QyxLQUFLO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkRBQWM7QUFDdEMsSUFBSSxxREFBTSxpREFBaUQsS0FBSztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLElBQUksNERBQWE7QUFDakIsY0FBYyxxQ0FBcUM7QUFDbkQsZ0JBQWdCO0FBQ2hCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixPQUFPO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxrQkFBa0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMkRBQWE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw0Q0FBNEM7QUFDcEUsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyREFBYTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsc0NBQXNDO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHdCQUF3QixJQUFJLG1CQUFtQjtBQUNyRixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx1QkFBdUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx1QkFBdUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGVBQWU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsVUFBVSxnREFBZ0Q7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5RUFBMkI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDBDQUEwQztBQUMvRSxxQ0FBcUMsMENBQTBDLElBQUksaUJBQWlCO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtQkFBbUI7QUFDL0IsV0FBVyxzREFBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseUNBQXlDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzREFBc0Q7QUFDaEYsT0FBTztBQUNQLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQUcsUUFBUSxzREFBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELE9BQU87QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHFEQUFHO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBLGVBQWUscURBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxJQUFJO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSxZQUFZO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLDBCQUEwQjtBQUM3RixPQUFPO0FBQ1AsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLG9CQUFvQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsc0JBQXNCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxvQkFBb0IsSUFBSSxtQkFBbUI7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHNEQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlCQUFpQixxREFBTSxPQUFPLElBQUksbUJBQW1CO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxzREFBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QztBQUNBLDJDQUEyQyxzQkFBc0I7QUFDakU7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLHVDQUF1QyxzQkFBc0I7QUFDN0Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyx1QkFBdUI7QUFDN0QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxxQkFBcUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4REFBZ0I7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGVBQWU7QUFDM0IsWUFBWSxzQkFBc0I7QUFDbEMsOEJBQThCLHFEQUFHO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxvRUFBcUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLG9FQUFxQjtBQUNuQztBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsbURBQUksbUJBQW1CLG1FQUFzQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw4REFBZTtBQUNoQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDRCQUE0QjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsbURBQUk7QUFDMUI7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQSx1QkFBdUIscURBQUc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNCQUFzQjtBQUN4QztBQUNBO0FBQ0EsY0FBYyw2REFBSztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNkRBQUs7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNkRBQUs7QUFDekI7QUFDQSxvQkFBb0IsNkRBQUs7QUFDekI7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZEQUFLO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvRUFBcUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2REFBSztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2REFBSztBQUN6QjtBQUNBLG9CQUFvQiw2REFBSztBQUN6QjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNkRBQUs7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9FQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxrQkFBa0Isc0JBQXNCO0FBQ3hDLGNBQWMsNkRBQUs7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksVUFBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0EsT0FBTztBQUNQLGNBQWMsdUNBQXVDO0FBQ3JELGNBQWMsZUFBZSxxQ0FBcUMsMkRBQWE7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHFEQUFHO0FBQ3BCLHFCQUFxQixpRUFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixXQUFXO0FBQ25DLHdCQUF3QixtQkFBbUI7QUFDM0Msd0JBQXdCLG1CQUFtQixJQUFJLGFBQWEsd0NBQXdDO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFEQUFHO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGdCQUFnQjtBQUM5QjtBQUNBLFlBQVkscURBQUc7QUFDZjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0JBQWdCO0FBQzVDLDRCQUE0QixnQkFBZ0IsSUFBSSxhQUFhLGlCQUFpQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDLHVCQUF1QixxREFBRztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGFBQWEsaUJBQWlCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHFEQUFHLFFBQVEsc0RBQU87QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGFBQWEsaUJBQWlCO0FBQ3hGLDBEQUEwRCxhQUFhLGlCQUFpQjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3QkFBd0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzQkFBc0I7QUFDbEMsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFEQUFHO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsYUFBYSxpQkFBaUI7QUFDckYsdURBQXVELGFBQWEsaUJBQWlCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzQkFBc0I7QUFDbEMsWUFBWSxZQUFZO0FBQ3hCO0FBQ0E7QUFDQSxpQkFBaUIsbURBQUk7QUFDckIsc0JBQXNCLHNCQUFzQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxREFBRztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxhQUFhLGlCQUFpQjtBQUN0Rix3REFBd0QsYUFBYSxpQkFBaUI7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFlBQVk7QUFDeEI7QUFDQTtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0EseUNBQXlDLE9BQU87QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscURBQUc7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsYUFBYSxpQkFBaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsYUFBYSxpQkFBaUI7QUFDbkUscUNBQXFDLGFBQWEsZUFBZSwyQkFBMkI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdFQUFtQjtBQUM3RDtBQUNBO0FBQ0Esb0JBQW9CLG1EQUFJO0FBQ3hCLGVBQWUsNkRBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscURBQUc7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3Q0FBd0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHFEQUFHO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFEQUFHO0FBQzNCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxrREFBa0QsV0FBVyxzRUFBeUIsRUFBRTtBQUN4RixZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0EsWUFBWSx1QkFBdUIsNkRBQU8sa0JBQWtCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFEQUFHO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsdUJBQXVCLFlBQVksaUJBQWlCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDLDBCQUEwQixxREFBRztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsNEJBQTRCLHFEQUFHO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsYUFBYSxpQkFBaUI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGFBQWEsaUJBQWlCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMscUJBQXFCO0FBQ25DLGlDQUFpQyxxREFBcUQ7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHlDQUF5QztBQUM1RSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFEQUFxRDtBQUNqRTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdCQUF3QjtBQUNwQztBQUNBO0FBQ0EsaUNBQWlDLDZDQUE2QztBQUM5RTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsbUNBQW1DLDZDQUE2QztBQUNoRjtBQUNBLFFBQVE7QUFDUixtQ0FBbUMsNkNBQTZDO0FBQ2hGLHdCQUF3QixxREFBRyxRQUFRLHFCQUFxQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGFBQWE7QUFDekIsZUFBZSxxREFBRztBQUNsQjtBQUNBO0FBQ0E7QUFDQSxlQUFlLHFEQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIsWUFBWSxzQkFBc0I7QUFDbEMsZUFBZSxxREFBRztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0JBQWdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxlQUFlLHFDQUFxQywyREFBYTtBQUM3RSxZQUFZLDBCQUEwQjtBQUN0QyxlQUFlLHFEQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGdCQUFnQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZUFBZSxxQ0FBcUMsMkRBQWE7QUFDN0UsWUFBWSwwQkFBMEI7QUFDdEMsZUFBZSxxREFBRztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixnQkFBZ0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBCQUEwQjtBQUN0QyxlQUFlLHFEQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHNEQUFXO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1EQUFJO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx1REFBUTtBQUN6QztBQUNBLEtBQUs7QUFDTCxJQUFJLHVEQUFRO0FBQ1osaUNBQWlDLHlCQUF5QixJQUFJLG1CQUFtQjtBQUNqRixzQkFBc0Isb0RBQUs7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZEQUFLO0FBQ3ZCLGlDQUFpQyxxREFBRztBQUNwQyxVQUFVLG1EQUFJO0FBQ2QsVUFBVSxtREFBSTtBQUNkLFVBQVUsbURBQUk7QUFDZCxVQUFVLG1EQUFJO0FBQ2Q7QUFDQSwrQkFBK0IscURBQUc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHVCQUF1QjtBQUN4RDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBLHVEQUF1RDtBQUN2RDtBQUNBO0FBQ0EsaUJBQWlCLG1EQUFJO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxtREFBUTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLHNEQUFXO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxZQUFZLGNBQWM7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLG1EQUFtRDtBQUNqRixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNkJBQTZCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxxQkFBcUI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsZ0JBQWdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtGQUFrQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDREQUFhO0FBQzdCO0FBQ0Esc0JBQXNCLDREQUFjO0FBQ3BDLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNERBQWM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw4REFBZTtBQUNuQyx3QkFBd0IscURBQXFEO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsVUFBVTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdDQUFnQztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlGQUF5RjtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQUc7QUFDZDtBQUNBO0FBQ0E7QUFDQSxVQUFVLDBEQUFRO0FBQ2xCO0FBQ0E7QUFDQSx3RkFBd0YscURBQUc7QUFDM0YsYUFBYSxxREFBRztBQUNoQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMERBQVE7QUFDL0IsYUFBYSxxREFBRztBQUNoQiwwRUFBMEUscURBQUc7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQscURBQUc7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixxREFBRztBQUN0QixxQkFBcUIscURBQUc7QUFDeEIsUUFBUSxxREFBRztBQUNYO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscURBQUcsZUFBZSxxREFBRztBQUM3Qyx3QkFBd0Isd0JBQXdCLElBQUksS0FBSyxJQUFJLGVBQWU7QUFDNUUsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMERBQVE7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixtRkFBdUI7QUFDcEQ7QUFDQSxrQ0FBa0MscURBQUc7QUFDckM7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFVBQVU7QUFDMUIseUNBQXlDLHFEQUFHO0FBQzVDO0FBQ0EsNkJBQTZCLG1GQUF1QjtBQUNwRDtBQUNBO0FBQ0EsZUFBZSxxREFBRztBQUNsQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBEQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBEQUFRO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFPO0FBQy9CO0FBQ0E7QUFDQSxVQUFVLDBEQUFRO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsb0ZBQWdCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNExBQTRMLDRCQUE0QjtBQUN4TjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0VBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMkNBQTJDLFFBQVE7QUFDbkQ7QUFDQTtBQUNBLDBDQUEwQyxzRUFBTztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixnQkFBZ0I7QUFDL0MsK0JBQStCLGdCQUFnQixJQUFJLDhCQUE4QjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixnQkFBZ0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxZQUFZLGdDQUFnQztBQUM1QztBQUNBO0FBQ0EscUJBQXFCLHNFQUFjO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxnQkFBZ0Isc0JBQXNCLGdCQUFnQjtBQUN0RixRQUFRLGNBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGdCQUFnQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxnQkFBZ0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixxREFBRztBQUNwQixRQUFRLDBEQUFRO0FBQ2hCLGFBQWEscURBQUc7QUFDaEI7QUFDQTtBQUNBLGFBQWEscURBQUc7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxPQUFPO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxJQUFJO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMkRBQVM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkRBQVM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBEQUFRO0FBQ2hCO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsMERBQVEsYUFBYSxxREFBRztBQUNwRDtBQUNBO0FBQ0EsaUJBQWlCLHNEQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0VBQWlCO0FBQ3JDLFVBQVU7QUFDVixvQkFBb0IsOERBQWU7QUFDbkM7QUFDQSxRQUFRO0FBQ1IsbUNBQW1DLHNEQUFXO0FBQzlDO0FBQ0Esb0JBQW9CLGdFQUFpQjtBQUNyQyxVQUFVO0FBQ1Ysb0JBQW9CLDhEQUFlO0FBQ25DO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxzQkFBc0IsOERBQWUsMEJBQTBCLHlEQUFVO0FBQ3pFO0FBQ0E7QUFDQSw2QkFBNkIsc0RBQU87QUFDcEM7QUFDQTtBQUNBLDRDQUE0QyxVQUFVLFFBQVEsMkJBQTJCO0FBQ3pGO0FBQ0Esb0JBQW9CLDZCQUE2QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw0REFBYTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxzREFBVztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0Usc0RBQVc7QUFDM0U7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxRQUFRO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw4RUFBYTtBQUMvQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxzREFBVztBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msc0NBQXNDO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsaUVBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw2Q0FBNkM7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix3QkFBd0IsSUFBSTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLG9EQUFvRDtBQUNoRywwQ0FBMEMsc0RBQXNEO0FBQ2hHO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIseUVBQW1CLEdBQUcsY0FBYztBQUN6RDtBQUNBO0FBQ0EsSUFBSSxtRkFBNkIsR0FBRyxpREFBaUQ7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsWUFBWTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixxREFBRztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxZQUFZO0FBQzVELDBEQUEwRCxZQUFZO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0RBQWE7QUFDM0M7QUFDQSxjQUFjLG1DQUFtQztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlFQUFlO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyREFBWTtBQUNsQyxvQkFBb0IsMkRBQVk7QUFDaEMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywyREFBWTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixxREFBRztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDhEQUFlLDRDQUE0Qyw0REFBYTtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsc0RBQU87QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixXQUFXO0FBQ1g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCx1QkFBdUIsbUNBQW1DO0FBQzFEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxnREFBZ0Q7QUFDM0Y7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLDJDQUEyQyxpREFBaUQ7QUFDNUY7QUFDQSxRQUFRO0FBQ1I7QUFDQSwyQ0FBMkMsZ0RBQWdEO0FBQzNGO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxRkFBMEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUZBQTBCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFGQUEwQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxRkFBMEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0RBQU87QUFDOUI7QUFDQTtBQUNBLG1CQUFtQixzREFBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsNEJBQTRCLHFEQUFHO0FBQy9CLE1BQU0sc0RBQU87QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDhFQUE4RTtBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsYUFBYTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLHNCQUFzQixxQkFBcUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLGtDQUFrQyxxREFBRztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix5QkFBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFEQUFHLFFBQVEsc0RBQU87QUFDM0M7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFEQUFHO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHlCQUF5QjtBQUM3QztBQUNBO0FBQ0EsdUNBQXVDLFNBQVM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxnQkFBZ0IscURBQUc7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFEQUFHO0FBQzNCLHdCQUF3QixxREFBRztBQUMzQjtBQUNBO0FBQ0Esb0JBQW9CLHlCQUF5QjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscURBQUc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsdUJBQXVCLG9DQUFvQztBQUMzRCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQU87QUFDakM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFEQUFHLFFBQVEsc0RBQU87QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MscURBQUc7QUFDckMsMERBQTBELHFEQUFHO0FBQzdELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isc0RBQU87QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLGtDQUFrQyxxREFBRztBQUNyQywwREFBMEQscURBQUc7QUFDN0QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsc0RBQU87QUFDbkM7QUFDQTtBQUNBLHlCQUF5QixxREFBRyxRQUFRLHNEQUFPO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsdURBQUc7QUFDbEM7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHFEQUFHO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPLEVBQUUscURBQUc7QUFDaEMsaUNBQWlDLHNDQUFzQztBQUN2RSw4QkFBOEIscURBQUc7QUFDakM7QUFDQTtBQUNBLCtCQUErQixxREFBRztBQUNsQztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsdURBQUc7QUFDbEM7QUFDQSxvQ0FBb0MscURBQUc7QUFDdkM7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU8sRUFBRSxxREFBRztBQUNoQyxpQ0FBaUMsc0NBQXNDO0FBQ3ZFLDhCQUE4QixxREFBRztBQUNqQztBQUNBO0FBQ0EsK0JBQStCLHFEQUFHO0FBQ2xDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixxREFBRztBQUNyQjtBQUNBLGtCQUFrQixxREFBRztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQscURBQUc7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDJFQUFtQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFEQUFHO0FBQ3ZCLFFBQVE7QUFDUixvQkFBb0IscURBQUc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFEQUFHLGlDQUFpQyxxREFBRztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHFEQUFHO0FBQzdCLHNEQUFzRCxxRUFBYTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHFEQUFHLGlDQUFpQyxxREFBRztBQUN0RSxjQUFjLE9BQU87QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVCQUF1QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLGdDQUFnQyxxREFBRztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFEQUFHO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHFEQUFHO0FBQzdCLGlDQUFpQyxxREFBRztBQUNwQyx3QkFBd0IscURBQUc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIsMkJBQTJCLHFEQUFHO0FBQzlCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsWUFBWSxXQUFXLEVBQUUscURBQUc7QUFDNUI7QUFDQSwyQkFBMkIsb0JBQW9CO0FBQy9DO0FBQ0Esb0NBQW9DLHFEQUFHO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixxREFBRztBQUN6QixvQ0FBb0MscURBQUc7QUFDdkMsWUFBWSxPQUFPO0FBQ25CLHlCQUF5QixnQkFBZ0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsbUNBQW1DLGNBQWM7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsbUNBQW1DLGNBQWM7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixJQUFJLCtEQUFhO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxRQUFRO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNDQUFzQztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQSxnQkFBZ0IsMkRBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsNERBQWE7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxvQ0FBb0M7QUFDNUUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIseUNBQXlDO0FBQ3BFLDJCQUEyQix5Q0FBeUMsSUFBSSxhQUFhLGlDQUFpQztBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxXQUFXLHNFQUF5QixFQUFFO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHlDQUF5QztBQUN0RSw2QkFBNkIseUNBQXlDLEtBQUssYUFBYSxpQ0FBaUM7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsV0FBVyxzRUFBeUIsRUFBRTtBQUN6RTtBQUNBO0FBQ0EsWUFBWSx5QkFBeUIsNkRBQU8sVUFBVTtBQUN0RCx3QkFBd0IsOERBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsT0FBTztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsK0NBQStDO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvQ0FBb0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGtCQUFrQjtBQUNoQztBQUNBO0FBQ0EsNkNBQTZDLE9BQU87QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsZ0JBQWdCO0FBQ3pEO0FBQ0E7QUFDQSxXQUFXLElBQUk7QUFDZixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLFlBQVksVUFBVSwrREFBYSxvQkFBb0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzREFBTztBQUNqQyw4Q0FBOEMsc0RBQVc7QUFDekQsdUJBQXVCLHFEQUFHLFFBQVEsc0RBQU87QUFDekMsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRyxzREFBVztBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG9DQUFvQztBQUNwQyxZQUFZLGdCQUFnQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNEQUFPO0FBQ1g7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLE9BQU87QUFDaEQ7QUFDQTtBQUNBLDhDQUE4QyxRQUFRO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsa0NBQWtDLGtCQUFrQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0NBQWtDLGtCQUFrQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLE9BQU87QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsT0FBTztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLE9BQU87QUFDbEQ7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLHlDQUF5Qyw2REFBYztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVFQUFjO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNkRBQWM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVFQUFjO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4QkFBOEI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixrQ0FBa0M7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsaUJBQWlCO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNCQUFzQiw0Q0FBNEM7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixpQ0FBaUM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLGVBQWU7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELDRCQUE0QjtBQUN6Riw2REFBNkQseUJBQXlCO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnRUFBZ0U7QUFDNUUsVUFBVSxpQkFBaUI7QUFDM0I7QUFDQSxZQUFZLGVBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRywrREFBYTtBQUNoSDtBQUNBO0FBQ0EsaUhBQWlILGlFQUFlO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0Esb0NBQW9DLHdCQUF3QixNQUFNLGlCQUFpQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLDBCQUEwQiw0QkFBNEI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMERBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxnQkFBZ0IsNERBQWE7QUFDN0I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMkRBQVk7QUFDeEIsZ0JBQWdCLDJEQUFZO0FBQzVCLGNBQWMsMkRBQVk7QUFDMUIsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQWU7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlFQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLG9CQUFvQjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwyQkFBMkI7QUFDeEQsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIscURBQUc7QUFDeEI7QUFDQSxhQUFhLDBEQUFRO0FBQ3JCO0FBQ0Esa0JBQWtCLHFEQUFHO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLDhEQUE4RCxxREFBRztBQUNqRTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFEQUFHO0FBQzVCLFFBQVEsc0RBQU8sbUJBQW1CLElBQUk7QUFDdEM7QUFDQSxxQkFBcUIscURBQUc7QUFDeEI7QUFDQSwwQkFBMEIsSUFBSTtBQUM5QjtBQUNBO0FBQ0EsNkJBQTZCLHFEQUFHO0FBQ2hDLG1CQUFtQjtBQUNuQixTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDLHlCQUF5QiwwREFBUztBQUNsQztBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNERBQVU7QUFDM0IsSUFBSSxvREFBUztBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSSxxREFBTTtBQUNWO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMkJBQTJCLElBQUksNEJBQTRCO0FBQ2xGLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixxREFBRztBQUM1QjtBQUNBLDJCQUEyQixxREFBRztBQUM5QjtBQUNBLDJCQUEyQixxREFBRztBQUM5QjtBQUNBLDZCQUE2QixxREFBRztBQUNoQztBQUNBLDBCQUEwQixxREFBRztBQUM3QjtBQUNBLDRCQUE0QixxREFBRztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFEQUFHO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLFlBQVksZUFBZSxxQ0FBcUMsMkRBQWE7QUFDN0UsWUFBWSxzQkFBc0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMERBQVk7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRCwyREFBMkQsaUVBQW9CLGtEQUFrRCwwREFBWTtBQUM3STtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOEJBQThCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlDQUFpQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQ0FBZ0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdUJBQXVCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx3QkFBd0IsSUFBSTtBQUN0QztBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaUJBQWlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixzQkFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVCQUF1QixJQUFJO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSwrQkFBK0Isa0JBQWtCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5RUFBVztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksMEVBQVk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IscUVBQVk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHFDQUFxQztBQUNyRTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFDQUFxQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsWUFBWSxvQ0FBb0M7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELDJEQUFhO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixPQUFPO0FBQzlCLHVCQUF1QjtBQUN2QixjQUFjO0FBQ2Qsb0JBQW9CLE9BQU8sRUFBRSxxREFBRztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFzQixFQUFFLHFFQUFzQjtBQUNsRSxvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0Esa0JBQWtCLHFEQUFHO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1EQUFtRDtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixrQkFBa0IscUNBQXFDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0JBQXNCLEVBQUUscUVBQXNCO0FBQ2xFLG9CQUFvQiwwQkFBMEI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixPQUFPO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IscURBQUc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxxREFBRztBQUN2QztBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QixnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGVBQWU7QUFDZjtBQUNBO0FBQ0EsZ0NBQWdDLDhEQUFpQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGlCQUFpQjtBQUMxRCxnQ0FBZ0MsaUVBQW9CO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLGNBQWMseUJBQXlCLGdFQUFtQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLCtCQUErQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixzQkFBc0IsRUFBRSxxRUFBc0I7QUFDbEU7QUFDQSxzQkFBc0IsMENBQTBDO0FBQ2hFLHNCQUFzQixXQUFXO0FBQ2pDLDZCQUE2QixxREFBRztBQUNoQztBQUNBLG9CQUFvQixxREFBRztBQUN2QixrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQscURBQUc7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsOERBQWlCO0FBQ3RDLG1DQUFtQywyQkFBMkI7QUFDOUQ7QUFDQTtBQUNBLHFCQUFxQixnRUFBbUI7QUFDeEM7QUFDQSxxQ0FBcUMsMkJBQTJCO0FBQ2hFLG9CQUFvQjtBQUNwQixxQ0FBcUMscUNBQXFDO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDhDQUE4QztBQUNqRjtBQUNBLGNBQWM7QUFDZCxrQ0FBa0MsaUVBQW9CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGlFQUFpRTtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsZ0VBQW1CO0FBQzdELGdCQUFnQjtBQUNoQjtBQUNBLGlDQUFpQyxxQ0FBcUM7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGdFQUFtQjtBQUM3QztBQUNBLFFBQVEseUJBQXlCLCtEQUFrQjtBQUNuRDtBQUNBO0FBQ0EsY0FBYyxZQUFZLHFDQUFxQywyREFBYTtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrREFBVTtBQUNsQjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSx1REFBUSxHQUFHLGdDQUFnQztBQUM3QztBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHNEQUFzRDtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsT0FBTztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxPQUFPO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELHFCQUFxQjtBQUMxRTtBQUNBLGlCQUFpQixpREFBTTtBQUN2QixRQUFRO0FBQ1IsaUJBQWlCLGlEQUFNO0FBQ3ZCO0FBQ0EsS0FBSztBQUNMLDJCQUEyQixpRUFBa0I7QUFDN0MsR0FBRztBQUNIO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsSUFBSTtBQUNKO0FBQ0EsaUJBQWlCLHFEQUFHO0FBQ3BCO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvRWRpdG9yLm1qcz9lMjQ5Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19kZWNvcmF0ZUNsYXNzID0gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBraW5kKSA9PiB7XG4gIHZhciByZXN1bHQgPSBraW5kID4gMSA/IHZvaWQgMCA6IGtpbmQgPyBfX2dldE93blByb3BEZXNjKHRhcmdldCwga2V5KSA6IHRhcmdldDtcbiAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMSwgZGVjb3JhdG9yOyBpID49IDA7IGktLSlcbiAgICBpZiAoZGVjb3JhdG9yID0gZGVjb3JhdG9yc1tpXSlcbiAgICAgIHJlc3VsdCA9IChraW5kID8gZGVjb3JhdG9yKHRhcmdldCwga2V5LCByZXN1bHQpIDogZGVjb3JhdG9yKHJlc3VsdCkpIHx8IHJlc3VsdDtcbiAgaWYgKGtpbmQgJiYgcmVzdWx0KVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIGtleSwgcmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5pbXBvcnQgeyBFTVBUWV9BUlJBWSwgYXRvbSwgY29tcHV0ZWQsIHJlYWN0LCB0cmFuc2FjdCwgdW5zYWZlX193aXRob3V0Q2FwdHVyZSB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQge1xuICByZXZlcnNlUmVjb3Jkc0RpZmZcbn0gZnJvbSBcIkB0bGRyYXcvc3RvcmVcIjtcbmltcG9ydCB7XG4gIENhbWVyYVJlY29yZFR5cGUsXG4gIEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZSxcbiAgUGFnZVJlY29yZFR5cGUsXG4gIFRMRE9DVU1FTlRfSUQsXG4gIFRMSU5TVEFOQ0VfSUQsXG4gIFRMUE9JTlRFUl9JRCxcbiAgY3JlYXRlQmluZGluZ0lkLFxuICBjcmVhdGVTaGFwZUlkLFxuICBnZXRTaGFwZVByb3BLZXlzQnlTdHlsZSxcbiAgaXNQYWdlSWQsXG4gIGlzU2hhcGVJZFxufSBmcm9tIFwiQHRsZHJhdy90bHNjaGVtYVwiO1xuaW1wb3J0IHtcbiAgUGVyZm9ybWFuY2VUcmFja2VyLFxuICBSZXN1bHQsXG4gIFRpbWVycyxcbiAgYW5ub3RhdGVFcnJvcixcbiAgYXNzZXJ0LFxuICBhc3NlcnRFeGlzdHMsXG4gIGNvbXBhY3QsXG4gIGRlZHVwZSxcbiAgZXhoYXVzdGl2ZVN3aXRjaEVycm9yLFxuICBnZXRJbmRleEFib3ZlLFxuICBnZXRJbmRleEJldHdlZW4sXG4gIGdldEluZGljZXMsXG4gIGdldEluZGljZXNBYm92ZSxcbiAgZ2V0SW5kaWNlc0JldHdlZW4sXG4gIGdldE93blByb3BlcnR5LFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgbGFzdCxcbiAgbGVycCxcbiAgc29ydEJ5SWQsXG4gIHNvcnRCeUluZGV4LFxuICBzdHJ1Y3R1cmVkQ2xvbmVcbn0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSBcImV2ZW50ZW1pdHRlcjNcIjtcbmltcG9ydCB7IGZsdXNoU3luYyB9IGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCB7IGNyZWF0ZVJvb3QgfSBmcm9tIFwicmVhY3QtZG9tL2NsaWVudFwiO1xuaW1wb3J0IHsgZ2V0U25hcHNob3QsIGxvYWRTbmFwc2hvdCB9IGZyb20gXCIuLi9jb25maWcvVExFZGl0b3JTbmFwc2hvdC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVRMVXNlciB9IGZyb20gXCIuLi9jb25maWcvY3JlYXRlVExVc2VyLm1qc1wiO1xuaW1wb3J0IHsgY2hlY2tCaW5kaW5ncyB9IGZyb20gXCIuLi9jb25maWcvZGVmYXVsdEJpbmRpbmdzLm1qc1wiO1xuaW1wb3J0IHsgY2hlY2tTaGFwZXNBbmRBZGRDb3JlIH0gZnJvbSBcIi4uL2NvbmZpZy9kZWZhdWx0U2hhcGVzLm1qc1wiO1xuaW1wb3J0IHtcbiAgREVGQVVMVF9BTklNQVRJT05fT1BUSU9OUyxcbiAgREVGQVVMVF9DQU1FUkFfT1BUSU9OUyxcbiAgSU5URVJOQUxfUE9JTlRFUl9JRFMsXG4gIExFRlRfTU9VU0VfQlVUVE9OLFxuICBNSURETEVfTU9VU0VfQlVUVE9OLFxuICBSSUdIVF9NT1VTRV9CVVRUT04sXG4gIFNUWUxVU19FUkFTRVJfQlVUVE9OLFxuICBaT09NX1RPX0ZJVF9QQURESU5HXG59IGZyb20gXCIuLi9jb25zdGFudHMubWpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0VGxkcmF3T3B0aW9ucyB9IGZyb20gXCIuLi9vcHRpb25zLm1qc1wiO1xuaW1wb3J0IHsgQm94IH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvQm94Lm1qc1wiO1xuaW1wb3J0IHsgTWF0IH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvTWF0Lm1qc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvVmVjLm1qc1wiO1xuaW1wb3J0IHsgRUFTSU5HUyB9IGZyb20gXCIuLi9wcmltaXRpdmVzL2Vhc2luZ3MubWpzXCI7XG5pbXBvcnQgeyBHcm91cDJkIH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvR3JvdXAyZC5tanNcIjtcbmltcG9ydCB7IGludGVyc2VjdFBvbHlnb25Qb2x5Z29uIH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvaW50ZXJzZWN0Lm1qc1wiO1xuaW1wb3J0IHsgUEkyLCBhcHByb3hpbWF0ZWx5LCBhcmVBbmdsZXNDb21wYXRpYmxlLCBjbGFtcCwgcG9pbnRJblBvbHlnb24gfSBmcm9tIFwiLi4vcHJpbWl0aXZlcy91dGlscy5tanNcIjtcbmltcG9ydCB7IFNoYXJlZFN0eWxlTWFwIH0gZnJvbSBcIi4uL3V0aWxzL1NoYXJlZFN0eWxlc01hcC5tanNcIjtcbmltcG9ydCB7IGRhdGFVcmxUb0ZpbGUgfSBmcm9tIFwiLi4vdXRpbHMvYXNzZXRzLm1qc1wiO1xuaW1wb3J0IHsgZGVidWdGbGFncyB9IGZyb20gXCIuLi91dGlscy9kZWJ1Zy1mbGFncy5tanNcIjtcbmltcG9ydCB7IGdldEluY3JlbWVudGVkTmFtZSB9IGZyb20gXCIuLi91dGlscy9nZXRJbmNyZW1lbnRlZE5hbWUubWpzXCI7XG5pbXBvcnQgeyBnZXRSZW9yZGVyaW5nU2hhcGVzQ2hhbmdlcyB9IGZyb20gXCIuLi91dGlscy9yZW9yZGVyU2hhcGVzLm1qc1wiO1xuaW1wb3J0IHsgYXBwbHlSb3RhdGlvblRvU25hcHNob3RTaGFwZXMsIGdldFJvdGF0aW9uU25hcHNob3QgfSBmcm9tIFwiLi4vdXRpbHMvcm90YXRpb24ubWpzXCI7XG5pbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gXCIuLi91dGlscy91bmlxdWVJZC5tanNcIjtcbmltcG9ydCB7IGJpbmRpbmdzSW5kZXggfSBmcm9tIFwiLi9kZXJpdmF0aW9ucy9iaW5kaW5nc0luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgbm90VmlzaWJsZVNoYXBlcyB9IGZyb20gXCIuL2Rlcml2YXRpb25zL25vdFZpc2libGVTaGFwZXMubWpzXCI7XG5pbXBvcnQgeyBwYXJlbnRzVG9DaGlsZHJlbiB9IGZyb20gXCIuL2Rlcml2YXRpb25zL3BhcmVudHNUb0NoaWxkcmVuLm1qc1wiO1xuaW1wb3J0IHsgZGVyaXZlU2hhcGVJZHNJbkN1cnJlbnRQYWdlIH0gZnJvbSBcIi4vZGVyaXZhdGlvbnMvc2hhcGVJZHNJbkN1cnJlbnRQYWdlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U3ZnSnN4IH0gZnJvbSBcIi4vZ2V0U3ZnSnN4Lm1qc1wiO1xuaW1wb3J0IHsgQ2xpY2tNYW5hZ2VyIH0gZnJvbSBcIi4vbWFuYWdlcnMvQ2xpY2tNYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHsgRW52aXJvbm1lbnRNYW5hZ2VyIH0gZnJvbSBcIi4vbWFuYWdlcnMvRW52aXJvbm1lbnRNYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHsgRm9jdXNNYW5hZ2VyIH0gZnJvbSBcIi4vbWFuYWdlcnMvRm9jdXNNYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHsgSGlzdG9yeU1hbmFnZXIgfSBmcm9tIFwiLi9tYW5hZ2Vycy9IaXN0b3J5TWFuYWdlci5tanNcIjtcbmltcG9ydCB7IFNjcmliYmxlTWFuYWdlciB9IGZyb20gXCIuL21hbmFnZXJzL1NjcmliYmxlTWFuYWdlci5tanNcIjtcbmltcG9ydCB7IFNuYXBNYW5hZ2VyIH0gZnJvbSBcIi4vbWFuYWdlcnMvU25hcE1hbmFnZXIvU25hcE1hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBUZXh0TWFuYWdlciB9IGZyb20gXCIuL21hbmFnZXJzL1RleHRNYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHsgVGlja01hbmFnZXIgfSBmcm9tIFwiLi9tYW5hZ2Vycy9UaWNrTWFuYWdlci5tanNcIjtcbmltcG9ydCB7IFVzZXJQcmVmZXJlbmNlc01hbmFnZXIgfSBmcm9tIFwiLi9tYW5hZ2Vycy9Vc2VyUHJlZmVyZW5jZXNNYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHsgUm9vdFN0YXRlIH0gZnJvbSBcIi4vdG9vbHMvUm9vdFN0YXRlLm1qc1wiO1xuY2xhc3MgRWRpdG9yIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHN0b3JlLFxuICAgIHVzZXIsXG4gICAgc2hhcGVVdGlscyxcbiAgICBiaW5kaW5nVXRpbHMsXG4gICAgdG9vbHMsXG4gICAgZ2V0Q29udGFpbmVyLFxuICAgIGNhbWVyYU9wdGlvbnMsXG4gICAgaW5pdGlhbFN0YXRlLFxuICAgIGF1dG9Gb2N1cyxcbiAgICBpbmZlckRhcmtNb2RlLFxuICAgIG9wdGlvbnNcbiAgfSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5vcHRpb25zID0geyAuLi5kZWZhdWx0VGxkcmF3T3B0aW9ucywgLi4ub3B0aW9ucyB9O1xuICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeU1hbmFnZXIoe1xuICAgICAgc3RvcmUsXG4gICAgICBhbm5vdGF0ZUVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgdGhpcy5hbm5vdGF0ZUVycm9yKGVycm9yLCB7IG9yaWdpbjogXCJoaXN0b3J5LmJhdGNoXCIsIHdpbGxDcmFzaEFwcDogdHJ1ZSB9KTtcbiAgICAgICAgdGhpcy5jcmFzaChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5zbmFwcyA9IG5ldyBTbmFwTWFuYWdlcih0aGlzKTtcbiAgICB0aGlzLnRpbWVycyA9IG5ldyBUaW1lcnMoKTtcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZCh0aGlzLnRpbWVycy5kaXNwb3NlLmJpbmQodGhpcy50aW1lcnMpKTtcbiAgICB0aGlzLl9jYW1lcmFPcHRpb25zLnNldCh7IC4uLkRFRkFVTFRfQ0FNRVJBX09QVElPTlMsIC4uLmNhbWVyYU9wdGlvbnMgfSk7XG4gICAgdGhpcy51c2VyID0gbmV3IFVzZXJQcmVmZXJlbmNlc01hbmFnZXIodXNlciA/PyBjcmVhdGVUTFVzZXIoKSwgaW5mZXJEYXJrTW9kZSA/PyBmYWxzZSk7XG4gICAgdGhpcy5nZXRDb250YWluZXIgPSBnZXRDb250YWluZXIgPz8gKCgpID0+IGRvY3VtZW50LmJvZHkpO1xuICAgIHRoaXMudGV4dE1lYXN1cmUgPSBuZXcgVGV4dE1hbmFnZXIodGhpcyk7XG4gICAgdGhpcy5fdGlja01hbmFnZXIgPSBuZXcgVGlja01hbmFnZXIodGhpcyk7XG4gICAgY2xhc3MgTmV3Um9vdCBleHRlbmRzIFJvb3RTdGF0ZSB7XG4gICAgICBzdGF0aWMgaW5pdGlhbCA9IGluaXRpYWxTdGF0ZSA/PyBcIlwiO1xuICAgIH1cbiAgICB0aGlzLnJvb3QgPSBuZXcgTmV3Um9vdCh0aGlzKTtcbiAgICB0aGlzLnJvb3QuY2hpbGRyZW4gPSB7fTtcbiAgICBjb25zdCBhbGxTaGFwZVV0aWxzID0gY2hlY2tTaGFwZXNBbmRBZGRDb3JlKHNoYXBlVXRpbHMpO1xuICAgIGNvbnN0IF9zaGFwZVV0aWxzID0ge307XG4gICAgY29uc3QgX3N0eWxlUHJvcHMgPSB7fTtcbiAgICBjb25zdCBhbGxTdHlsZXNCeUlkID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IFV0aWwgb2YgYWxsU2hhcGVVdGlscykge1xuICAgICAgY29uc3QgdXRpbCA9IG5ldyBVdGlsKHRoaXMpO1xuICAgICAgX3NoYXBlVXRpbHNbVXRpbC50eXBlXSA9IHV0aWw7XG4gICAgICBjb25zdCBwcm9wS2V5c0J5U3R5bGUgPSBnZXRTaGFwZVByb3BLZXlzQnlTdHlsZShVdGlsLnByb3BzID8/IHt9KTtcbiAgICAgIF9zdHlsZVByb3BzW1V0aWwudHlwZV0gPSBwcm9wS2V5c0J5U3R5bGU7XG4gICAgICBmb3IgKGNvbnN0IHN0eWxlIG9mIHByb3BLZXlzQnlTdHlsZS5rZXlzKCkpIHtcbiAgICAgICAgaWYgKCFhbGxTdHlsZXNCeUlkLmhhcyhzdHlsZS5pZCkpIHtcbiAgICAgICAgICBhbGxTdHlsZXNCeUlkLnNldChzdHlsZS5pZCwgc3R5bGUpO1xuICAgICAgICB9IGVsc2UgaWYgKGFsbFN0eWxlc0J5SWQuZ2V0KHN0eWxlLmlkKSAhPT0gc3R5bGUpIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgICAgIGBNdWx0aXBsZSBzdHlsZSBwcm9wcyB3aXRoIGlkIFwiJHtzdHlsZS5pZH1cIiBpbiB1c2UuIFN0eWxlIHByb3AgSURzIG11c3QgYmUgdW5pcXVlLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuc2hhcGVVdGlscyA9IF9zaGFwZVV0aWxzO1xuICAgIHRoaXMuc3R5bGVQcm9wcyA9IF9zdHlsZVByb3BzO1xuICAgIGNvbnN0IGFsbEJpbmRpbmdVdGlscyA9IGNoZWNrQmluZGluZ3MoYmluZGluZ1V0aWxzKTtcbiAgICBjb25zdCBfYmluZGluZ1V0aWxzID0ge307XG4gICAgZm9yIChjb25zdCBVdGlsIG9mIGFsbEJpbmRpbmdVdGlscykge1xuICAgICAgY29uc3QgdXRpbCA9IG5ldyBVdGlsKHRoaXMpO1xuICAgICAgX2JpbmRpbmdVdGlsc1tVdGlsLnR5cGVdID0gdXRpbDtcbiAgICB9XG4gICAgdGhpcy5iaW5kaW5nVXRpbHMgPSBfYmluZGluZ1V0aWxzO1xuICAgIGZvciAoY29uc3QgVG9vbCBvZiBbLi4udG9vbHNdKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkodGhpcy5yb290LmNoaWxkcmVuLCBUb29sLmlkKSkge1xuICAgICAgICB0aHJvdyBFcnJvcihgQ2FuJ3Qgb3ZlcnJpZGUgdG9vbCB3aXRoIGlkIFwiJHtUb29sLmlkfVwiYCk7XG4gICAgICB9XG4gICAgICB0aGlzLnJvb3QuY2hpbGRyZW5bVG9vbC5pZF0gPSBuZXcgVG9vbCh0aGlzLCB0aGlzLnJvb3QpO1xuICAgIH1cbiAgICB0aGlzLmVudmlyb25tZW50ID0gbmV3IEVudmlyb25tZW50TWFuYWdlcih0aGlzKTtcbiAgICB0aGlzLnNjcmliYmxlcyA9IG5ldyBTY3JpYmJsZU1hbmFnZXIodGhpcyk7XG4gICAgY29uc3QgY2xlYW51cEluc3RhbmNlUGFnZVN0YXRlID0gKHByZXZQYWdlU3RhdGUsIHNoYXBlc05vTG9uZ2VySW5QYWdlKSA9PiB7XG4gICAgICBsZXQgbmV4dFBhZ2VTdGF0ZSA9IG51bGw7XG4gICAgICBjb25zdCBzZWxlY3RlZFNoYXBlSWRzID0gcHJldlBhZ2VTdGF0ZS5zZWxlY3RlZFNoYXBlSWRzLmZpbHRlcihcbiAgICAgICAgKGlkKSA9PiAhc2hhcGVzTm9Mb25nZXJJblBhZ2UuaGFzKGlkKVxuICAgICAgKTtcbiAgICAgIGlmIChzZWxlY3RlZFNoYXBlSWRzLmxlbmd0aCAhPT0gcHJldlBhZ2VTdGF0ZS5zZWxlY3RlZFNoYXBlSWRzLmxlbmd0aCkge1xuICAgICAgICBpZiAoIW5leHRQYWdlU3RhdGUpXG4gICAgICAgICAgbmV4dFBhZ2VTdGF0ZSA9IHsgLi4ucHJldlBhZ2VTdGF0ZSB9O1xuICAgICAgICBuZXh0UGFnZVN0YXRlLnNlbGVjdGVkU2hhcGVJZHMgPSBzZWxlY3RlZFNoYXBlSWRzO1xuICAgICAgfVxuICAgICAgY29uc3QgZXJhc2luZ1NoYXBlSWRzID0gcHJldlBhZ2VTdGF0ZS5lcmFzaW5nU2hhcGVJZHMuZmlsdGVyKFxuICAgICAgICAoaWQpID0+ICFzaGFwZXNOb0xvbmdlckluUGFnZS5oYXMoaWQpXG4gICAgICApO1xuICAgICAgaWYgKGVyYXNpbmdTaGFwZUlkcy5sZW5ndGggIT09IHByZXZQYWdlU3RhdGUuZXJhc2luZ1NoYXBlSWRzLmxlbmd0aCkge1xuICAgICAgICBpZiAoIW5leHRQYWdlU3RhdGUpXG4gICAgICAgICAgbmV4dFBhZ2VTdGF0ZSA9IHsgLi4ucHJldlBhZ2VTdGF0ZSB9O1xuICAgICAgICBuZXh0UGFnZVN0YXRlLmVyYXNpbmdTaGFwZUlkcyA9IGVyYXNpbmdTaGFwZUlkcztcbiAgICAgIH1cbiAgICAgIGlmIChwcmV2UGFnZVN0YXRlLmhvdmVyZWRTaGFwZUlkICYmIHNoYXBlc05vTG9uZ2VySW5QYWdlLmhhcyhwcmV2UGFnZVN0YXRlLmhvdmVyZWRTaGFwZUlkKSkge1xuICAgICAgICBpZiAoIW5leHRQYWdlU3RhdGUpXG4gICAgICAgICAgbmV4dFBhZ2VTdGF0ZSA9IHsgLi4ucHJldlBhZ2VTdGF0ZSB9O1xuICAgICAgICBuZXh0UGFnZVN0YXRlLmhvdmVyZWRTaGFwZUlkID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChwcmV2UGFnZVN0YXRlLmVkaXRpbmdTaGFwZUlkICYmIHNoYXBlc05vTG9uZ2VySW5QYWdlLmhhcyhwcmV2UGFnZVN0YXRlLmVkaXRpbmdTaGFwZUlkKSkge1xuICAgICAgICBpZiAoIW5leHRQYWdlU3RhdGUpXG4gICAgICAgICAgbmV4dFBhZ2VTdGF0ZSA9IHsgLi4ucHJldlBhZ2VTdGF0ZSB9O1xuICAgICAgICBuZXh0UGFnZVN0YXRlLmVkaXRpbmdTaGFwZUlkID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGhpbnRpbmdTaGFwZUlkcyA9IHByZXZQYWdlU3RhdGUuaGludGluZ1NoYXBlSWRzLmZpbHRlcihcbiAgICAgICAgKGlkKSA9PiAhc2hhcGVzTm9Mb25nZXJJblBhZ2UuaGFzKGlkKVxuICAgICAgKTtcbiAgICAgIGlmIChoaW50aW5nU2hhcGVJZHMubGVuZ3RoICE9PSBwcmV2UGFnZVN0YXRlLmhpbnRpbmdTaGFwZUlkcy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFuZXh0UGFnZVN0YXRlKVxuICAgICAgICAgIG5leHRQYWdlU3RhdGUgPSB7IC4uLnByZXZQYWdlU3RhdGUgfTtcbiAgICAgICAgbmV4dFBhZ2VTdGF0ZS5oaW50aW5nU2hhcGVJZHMgPSBoaW50aW5nU2hhcGVJZHM7XG4gICAgICB9XG4gICAgICBpZiAocHJldlBhZ2VTdGF0ZS5mb2N1c2VkR3JvdXBJZCAmJiBzaGFwZXNOb0xvbmdlckluUGFnZS5oYXMocHJldlBhZ2VTdGF0ZS5mb2N1c2VkR3JvdXBJZCkpIHtcbiAgICAgICAgaWYgKCFuZXh0UGFnZVN0YXRlKVxuICAgICAgICAgIG5leHRQYWdlU3RhdGUgPSB7IC4uLnByZXZQYWdlU3RhdGUgfTtcbiAgICAgICAgbmV4dFBhZ2VTdGF0ZS5mb2N1c2VkR3JvdXBJZCA9IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV4dFBhZ2VTdGF0ZTtcbiAgICB9O1xuICAgIHRoaXMuc2lkZUVmZmVjdHMgPSB0aGlzLnN0b3JlLnNpZGVFZmZlY3RzO1xuICAgIGxldCBkZWxldGVkQmluZGluZ3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIGNvbnN0IGRlbGV0ZWRTaGFwZUlkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgY29uc3QgaW52YWxpZFBhcmVudHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIGxldCBpbnZhbGlkQmluZGluZ1R5cGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZChcbiAgICAgIHRoaXMuc2lkZUVmZmVjdHMucmVnaXN0ZXJPcGVyYXRpb25Db21wbGV0ZUhhbmRsZXIoKCkgPT4ge1xuICAgICAgICBkZWxldGVkU2hhcGVJZHMuY2xlYXIoKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJlbnRJZCBvZiBpbnZhbGlkUGFyZW50cykge1xuICAgICAgICAgIGludmFsaWRQYXJlbnRzLmRlbGV0ZShwYXJlbnRJZCk7XG4gICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXRTaGFwZShwYXJlbnRJZCk7XG4gICAgICAgICAgaWYgKCFwYXJlbnQpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICBjb25zdCB1dGlsID0gdGhpcy5nZXRTaGFwZVV0aWwocGFyZW50KTtcbiAgICAgICAgICBjb25zdCBjaGFuZ2VzID0gdXRpbC5vbkNoaWxkcmVuQ2hhbmdlPy4ocGFyZW50KTtcbiAgICAgICAgICBpZiAoY2hhbmdlcz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNoYXBlcyhjaGFuZ2VzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludmFsaWRCaW5kaW5nVHlwZXMuc2l6ZSkge1xuICAgICAgICAgIGNvbnN0IHQgPSBpbnZhbGlkQmluZGluZ1R5cGVzO1xuICAgICAgICAgIGludmFsaWRCaW5kaW5nVHlwZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiB0KSB7XG4gICAgICAgICAgICBjb25zdCB1dGlsID0gdGhpcy5nZXRCaW5kaW5nVXRpbCh0eXBlKTtcbiAgICAgICAgICAgIHV0aWwub25PcGVyYXRpb25Db21wbGV0ZT8uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWxldGVkQmluZGluZ3Muc2l6ZSkge1xuICAgICAgICAgIGNvbnN0IHQgPSBkZWxldGVkQmluZGluZ3M7XG4gICAgICAgICAgZGVsZXRlZEJpbmRpbmdzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IG9wdHMgb2YgdC52YWx1ZXMoKSkge1xuICAgICAgICAgICAgdGhpcy5nZXRCaW5kaW5nVXRpbChvcHRzLmJpbmRpbmcpLm9uQWZ0ZXJEZWxldGU/LihvcHRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0KFwidXBkYXRlXCIpO1xuICAgICAgfSlcbiAgICApO1xuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKFxuICAgICAgdGhpcy5zaWRlRWZmZWN0cy5yZWdpc3Rlcih7XG4gICAgICAgIHNoYXBlOiB7XG4gICAgICAgICAgYWZ0ZXJDaGFuZ2U6IChzaGFwZUJlZm9yZSwgc2hhcGVBZnRlcikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBiaW5kaW5nIG9mIHRoaXMuZ2V0QmluZGluZ3NJbnZvbHZpbmdTaGFwZShzaGFwZUFmdGVyKSkge1xuICAgICAgICAgICAgICBpbnZhbGlkQmluZGluZ1R5cGVzLmFkZChiaW5kaW5nLnR5cGUpO1xuICAgICAgICAgICAgICBpZiAoYmluZGluZy5mcm9tSWQgPT09IHNoYXBlQWZ0ZXIuaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldEJpbmRpbmdVdGlsKGJpbmRpbmcpLm9uQWZ0ZXJDaGFuZ2VGcm9tU2hhcGU/Lih7XG4gICAgICAgICAgICAgICAgICBiaW5kaW5nLFxuICAgICAgICAgICAgICAgICAgc2hhcGVCZWZvcmUsXG4gICAgICAgICAgICAgICAgICBzaGFwZUFmdGVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGJpbmRpbmcudG9JZCA9PT0gc2hhcGVBZnRlci5pZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0QmluZGluZ1V0aWwoYmluZGluZykub25BZnRlckNoYW5nZVRvU2hhcGU/Lih7XG4gICAgICAgICAgICAgICAgICBiaW5kaW5nLFxuICAgICAgICAgICAgICAgICAgc2hhcGVCZWZvcmUsXG4gICAgICAgICAgICAgICAgICBzaGFwZUFmdGVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaGFwZUJlZm9yZS5wYXJlbnRJZCAhPT0gc2hhcGVBZnRlci5wYXJlbnRJZCkge1xuICAgICAgICAgICAgICBjb25zdCBub3RpZnlCaW5kaW5nQW5jZXN0cnlDaGFuZ2UgPSAoaWQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXNjZW5kYW50U2hhcGUgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRlc2NlbmRhbnRTaGFwZSlcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJpbmRpbmcgb2YgdGhpcy5nZXRCaW5kaW5nc0ludm9sdmluZ1NoYXBlKGRlc2NlbmRhbnRTaGFwZSkpIHtcbiAgICAgICAgICAgICAgICAgIGludmFsaWRCaW5kaW5nVHlwZXMuYWRkKGJpbmRpbmcudHlwZSk7XG4gICAgICAgICAgICAgICAgICBpZiAoYmluZGluZy5mcm9tSWQgPT09IGRlc2NlbmRhbnRTaGFwZS5pZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEJpbmRpbmdVdGlsKGJpbmRpbmcpLm9uQWZ0ZXJDaGFuZ2VGcm9tU2hhcGU/Lih7XG4gICAgICAgICAgICAgICAgICAgICAgYmluZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICBzaGFwZUJlZm9yZTogZGVzY2VuZGFudFNoYXBlLFxuICAgICAgICAgICAgICAgICAgICAgIHNoYXBlQWZ0ZXI6IGRlc2NlbmRhbnRTaGFwZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nLnRvSWQgPT09IGRlc2NlbmRhbnRTaGFwZS5pZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEJpbmRpbmdVdGlsKGJpbmRpbmcpLm9uQWZ0ZXJDaGFuZ2VUb1NoYXBlPy4oe1xuICAgICAgICAgICAgICAgICAgICAgIGJpbmRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgc2hhcGVCZWZvcmU6IGRlc2NlbmRhbnRTaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgICBzaGFwZUFmdGVyOiBkZXNjZW5kYW50U2hhcGVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBub3RpZnlCaW5kaW5nQW5jZXN0cnlDaGFuZ2Uoc2hhcGVBZnRlci5pZCk7XG4gICAgICAgICAgICAgIHRoaXMudmlzaXREZXNjZW5kYW50cyhzaGFwZUFmdGVyLmlkLCBub3RpZnlCaW5kaW5nQW5jZXN0cnlDaGFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNoYXBlQmVmb3JlLnBhcmVudElkICE9PSBzaGFwZUFmdGVyLnBhcmVudElkICYmIGlzUGFnZUlkKHNoYXBlQWZ0ZXIucGFyZW50SWQpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGFsbE1vdmluZ0lkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtzaGFwZUJlZm9yZS5pZF0pO1xuICAgICAgICAgICAgICB0aGlzLnZpc2l0RGVzY2VuZGFudHMoc2hhcGVCZWZvcmUuaWQsIChpZCkgPT4ge1xuICAgICAgICAgICAgICAgIGFsbE1vdmluZ0lkcy5hZGQoaWQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBpbnN0YW5jZVBhZ2VTdGF0ZSBvZiB0aGlzLmdldFBhZ2VTdGF0ZXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZVBhZ2VTdGF0ZS5wYWdlSWQgPT09IHNoYXBlQWZ0ZXIucGFyZW50SWQpXG4gICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0UGFnZVN0YXRlID0gY2xlYW51cEluc3RhbmNlUGFnZVN0YXRlKGluc3RhbmNlUGFnZVN0YXRlLCBhbGxNb3ZpbmdJZHMpO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0UGFnZVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLnB1dChbbmV4dFBhZ2VTdGF0ZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNoYXBlQmVmb3JlLnBhcmVudElkICYmIGlzU2hhcGVJZChzaGFwZUJlZm9yZS5wYXJlbnRJZCkpIHtcbiAgICAgICAgICAgICAgaW52YWxpZFBhcmVudHMuYWRkKHNoYXBlQmVmb3JlLnBhcmVudElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaGFwZUFmdGVyLnBhcmVudElkICE9PSBzaGFwZUJlZm9yZS5wYXJlbnRJZCAmJiBpc1NoYXBlSWQoc2hhcGVBZnRlci5wYXJlbnRJZCkpIHtcbiAgICAgICAgICAgICAgaW52YWxpZFBhcmVudHMuYWRkKHNoYXBlQWZ0ZXIucGFyZW50SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYmVmb3JlRGVsZXRlOiAoc2hhcGUpID0+IHtcbiAgICAgICAgICAgIGlmIChkZWxldGVkU2hhcGVJZHMuaGFzKHNoYXBlLmlkKSlcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHNoYXBlLnBhcmVudElkICYmIGlzU2hhcGVJZChzaGFwZS5wYXJlbnRJZCkpIHtcbiAgICAgICAgICAgICAgaW52YWxpZFBhcmVudHMuYWRkKHNoYXBlLnBhcmVudElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlbGV0ZWRTaGFwZUlkcy5hZGQoc2hhcGUuaWQpO1xuICAgICAgICAgICAgY29uc3QgZGVsZXRlQmluZGluZ0lkcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBiaW5kaW5nIG9mIHRoaXMuZ2V0QmluZGluZ3NJbnZvbHZpbmdTaGFwZShzaGFwZSkpIHtcbiAgICAgICAgICAgICAgaW52YWxpZEJpbmRpbmdUeXBlcy5hZGQoYmluZGluZy50eXBlKTtcbiAgICAgICAgICAgICAgZGVsZXRlQmluZGluZ0lkcy5wdXNoKGJpbmRpbmcuaWQpO1xuICAgICAgICAgICAgICBjb25zdCB1dGlsID0gdGhpcy5nZXRCaW5kaW5nVXRpbChiaW5kaW5nKTtcbiAgICAgICAgICAgICAgaWYgKGJpbmRpbmcuZnJvbUlkID09PSBzaGFwZS5pZCkge1xuICAgICAgICAgICAgICAgIHV0aWwub25CZWZvcmVJc29sYXRlVG9TaGFwZT8uKHsgYmluZGluZywgcmVtb3ZlZFNoYXBlOiBzaGFwZSB9KTtcbiAgICAgICAgICAgICAgICB1dGlsLm9uQmVmb3JlRGVsZXRlRnJvbVNoYXBlPy4oeyBiaW5kaW5nLCBzaGFwZSB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLm9uQmVmb3JlSXNvbGF0ZUZyb21TaGFwZT8uKHsgYmluZGluZywgcmVtb3ZlZFNoYXBlOiBzaGFwZSB9KTtcbiAgICAgICAgICAgICAgICB1dGlsLm9uQmVmb3JlRGVsZXRlVG9TaGFwZT8uKHsgYmluZGluZywgc2hhcGUgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZWxldGVCaW5kaW5nSWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUJpbmRpbmdzKGRlbGV0ZUJpbmRpbmdJZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGVsZXRlZElkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtzaGFwZS5pZF0pO1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlcyA9IGNvbXBhY3QoXG4gICAgICAgICAgICAgIHRoaXMuZ2V0UGFnZVN0YXRlcygpLm1hcCgocGFnZVN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsZWFudXBJbnN0YW5jZVBhZ2VTdGF0ZShwYWdlU3RhdGUsIGRlbGV0ZWRJZHMpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICh1cGRhdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICB0aGlzLnN0b3JlLnB1dCh1cGRhdGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGJpbmRpbmc6IHtcbiAgICAgICAgICBiZWZvcmVDcmVhdGU6IChiaW5kaW5nKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5nZXRCaW5kaW5nVXRpbChiaW5kaW5nKS5vbkJlZm9yZUNyZWF0ZT8uKHsgYmluZGluZyB9KTtcbiAgICAgICAgICAgIGlmIChuZXh0KVxuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIHJldHVybiBiaW5kaW5nO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWZ0ZXJDcmVhdGU6IChiaW5kaW5nKSA9PiB7XG4gICAgICAgICAgICBpbnZhbGlkQmluZGluZ1R5cGVzLmFkZChiaW5kaW5nLnR5cGUpO1xuICAgICAgICAgICAgdGhpcy5nZXRCaW5kaW5nVXRpbChiaW5kaW5nKS5vbkFmdGVyQ3JlYXRlPy4oeyBiaW5kaW5nIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYmVmb3JlQ2hhbmdlOiAoYmluZGluZ0JlZm9yZSwgYmluZGluZ0FmdGVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gdGhpcy5nZXRCaW5kaW5nVXRpbChiaW5kaW5nQWZ0ZXIpLm9uQmVmb3JlQ2hhbmdlPy4oe1xuICAgICAgICAgICAgICBiaW5kaW5nQmVmb3JlLFxuICAgICAgICAgICAgICBiaW5kaW5nQWZ0ZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHVwZGF0ZWQpXG4gICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgICAgICAgcmV0dXJuIGJpbmRpbmdBZnRlcjtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFmdGVyQ2hhbmdlOiAoYmluZGluZ0JlZm9yZSwgYmluZGluZ0FmdGVyKSA9PiB7XG4gICAgICAgICAgICBpbnZhbGlkQmluZGluZ1R5cGVzLmFkZChiaW5kaW5nQWZ0ZXIudHlwZSk7XG4gICAgICAgICAgICB0aGlzLmdldEJpbmRpbmdVdGlsKGJpbmRpbmdBZnRlcikub25BZnRlckNoYW5nZT8uKHsgYmluZGluZ0JlZm9yZSwgYmluZGluZ0FmdGVyIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYmVmb3JlRGVsZXRlOiAoYmluZGluZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZXRCaW5kaW5nVXRpbChiaW5kaW5nKS5vbkJlZm9yZURlbGV0ZT8uKHsgYmluZGluZyB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFmdGVyRGVsZXRlOiAoYmluZGluZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZXRCaW5kaW5nVXRpbChiaW5kaW5nKS5vbkFmdGVyRGVsZXRlPy4oeyBiaW5kaW5nIH0pO1xuICAgICAgICAgICAgaW52YWxpZEJpbmRpbmdUeXBlcy5hZGQoYmluZGluZy50eXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBhZ2U6IHtcbiAgICAgICAgICBhZnRlckNyZWF0ZTogKHJlY29yZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FtZXJhSWQgPSBDYW1lcmFSZWNvcmRUeXBlLmNyZWF0ZUlkKHJlY29yZC5pZCk7XG4gICAgICAgICAgICBjb25zdCBfcGFnZVN0YXRlSWQgPSBJbnN0YW5jZVBhZ2VTdGF0ZVJlY29yZFR5cGUuY3JlYXRlSWQocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdG9yZS5oYXMoY2FtZXJhSWQpKSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RvcmUucHV0KFtDYW1lcmFSZWNvcmRUeXBlLmNyZWF0ZSh7IGlkOiBjYW1lcmFJZCB9KV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnN0b3JlLmhhcyhfcGFnZVN0YXRlSWQpKSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RvcmUucHV0KFtcbiAgICAgICAgICAgICAgICBJbnN0YW5jZVBhZ2VTdGF0ZVJlY29yZFR5cGUuY3JlYXRlKHsgaWQ6IF9wYWdlU3RhdGVJZCwgcGFnZUlkOiByZWNvcmQuaWQgfSlcbiAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhZnRlckRlbGV0ZTogKHJlY29yZCwgc291cmNlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRJbnN0YW5jZVN0YXRlKCk/LmN1cnJlbnRQYWdlSWQgPT09IHJlY29yZC5pZCkge1xuICAgICAgICAgICAgICBjb25zdCBiYWNrdXBQYWdlSWQgPSB0aGlzLmdldFBhZ2VzKCkuZmluZCgocCkgPT4gcC5pZCAhPT0gcmVjb3JkLmlkKT8uaWQ7XG4gICAgICAgICAgICAgIGlmIChiYWNrdXBQYWdlSWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLnB1dChbeyAuLi50aGlzLmdldEluc3RhbmNlU3RhdGUoKSwgY3VycmVudFBhZ2VJZDogYmFja3VwUGFnZUlkIH1dKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2UgPT09IFwidXNlclwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZS5lbnN1cmVTdG9yZUlzVXNhYmxlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNhbWVyYUlkID0gQ2FtZXJhUmVjb3JkVHlwZS5jcmVhdGVJZChyZWNvcmQuaWQpO1xuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2VfUGFnZVN0YXRlSWQgPSBJbnN0YW5jZVBhZ2VTdGF0ZVJlY29yZFR5cGUuY3JlYXRlSWQocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcmUucmVtb3ZlKFtjYW1lcmFJZCwgaW5zdGFuY2VfUGFnZVN0YXRlSWRdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGluc3RhbmNlOiB7XG4gICAgICAgICAgYWZ0ZXJDaGFuZ2U6IChwcmV2LCBuZXh0LCBzb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdG9yZS5oYXMobmV4dC5jdXJyZW50UGFnZUlkKSkge1xuICAgICAgICAgICAgICBjb25zdCBiYWNrdXBQYWdlSWQgPSB0aGlzLnN0b3JlLmhhcyhwcmV2LmN1cnJlbnRQYWdlSWQpID8gcHJldi5jdXJyZW50UGFnZUlkIDogdGhpcy5nZXRQYWdlcygpWzBdPy5pZDtcbiAgICAgICAgICAgICAgaWYgKGJhY2t1cFBhZ2VJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmUudXBkYXRlKG5leHQuaWQsIChpbnN0YW5jZSkgPT4gKHtcbiAgICAgICAgICAgICAgICAgIC4uLmluc3RhbmNlLFxuICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2VJZDogYmFja3VwUGFnZUlkXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZSA9PT0gXCJ1c2VyXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLmVuc3VyZVN0b3JlSXNVc2FibGUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5zdGFuY2VfcGFnZV9zdGF0ZToge1xuICAgICAgICAgIGFmdGVyQ2hhbmdlOiAocHJldiwgbmV4dCkgPT4ge1xuICAgICAgICAgICAgaWYgKHByZXY/LnNlbGVjdGVkU2hhcGVJZHMgIT09IG5leHQ/LnNlbGVjdGVkU2hhcGVJZHMpIHtcbiAgICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBuZXh0LnNlbGVjdGVkU2hhcGVJZHMuZmlsdGVyKChpZCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBwYXJlbnRJZCA9IHRoaXMuZ2V0U2hhcGUoaWQpPy5wYXJlbnRJZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaXNTaGFwZUlkKHBhcmVudElkKSkge1xuICAgICAgICAgICAgICAgICAgaWYgKG5leHQuc2VsZWN0ZWRTaGFwZUlkcy5pbmNsdWRlcyhwYXJlbnRJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcGFyZW50SWQgPSB0aGlzLmdldFNoYXBlKHBhcmVudElkKT8ucGFyZW50SWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgbGV0IG5leHRGb2N1c2VkR3JvdXBJZCA9IG51bGw7XG4gICAgICAgICAgICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tbW9uR3JvdXBBbmNlc3RvciA9IHRoaXMuZmluZENvbW1vbkFuY2VzdG9yKFxuICAgICAgICAgICAgICAgICAgY29tcGFjdChmaWx0ZXJlZC5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlKGlkKSkpLFxuICAgICAgICAgICAgICAgICAgKHNoYXBlKSA9PiB0aGlzLmlzU2hhcGVPZlR5cGUoc2hhcGUsIFwiZ3JvdXBcIilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChjb21tb25Hcm91cEFuY2VzdG9yKSB7XG4gICAgICAgICAgICAgICAgICBuZXh0Rm9jdXNlZEdyb3VwSWQgPSBjb21tb25Hcm91cEFuY2VzdG9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobmV4dD8uZm9jdXNlZEdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICAgIG5leHRGb2N1c2VkR3JvdXBJZCA9IG5leHQuZm9jdXNlZEdyb3VwSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggIT09IG5leHQuc2VsZWN0ZWRTaGFwZUlkcy5sZW5ndGggfHwgbmV4dEZvY3VzZWRHcm91cElkICE9PSBuZXh0LmZvY3VzZWRHcm91cElkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZS5wdXQoW1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAuLi5uZXh0LFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFNoYXBlSWRzOiBmaWx0ZXJlZCxcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNlZEdyb3VwSWQ6IG5leHRGb2N1c2VkR3JvdXBJZCA/PyBudWxsXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcbiAgICB0aGlzLl9jdXJyZW50UGFnZVNoYXBlSWRzID0gZGVyaXZlU2hhcGVJZHNJbkN1cnJlbnRQYWdlKFxuICAgICAgdGhpcy5zdG9yZSxcbiAgICAgICgpID0+IHRoaXMuZ2V0Q3VycmVudFBhZ2VJZCgpXG4gICAgKTtcbiAgICB0aGlzLl9wYXJlbnRJZHNUb0NoaWxkSWRzID0gcGFyZW50c1RvQ2hpbGRyZW4odGhpcy5zdG9yZSk7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5hZGQoXG4gICAgICB0aGlzLnN0b3JlLmxpc3RlbigoY2hhbmdlcykgPT4ge1xuICAgICAgICB0aGlzLmVtaXQoXCJjaGFuZ2VcIiwgY2hhbmdlcyk7XG4gICAgICB9KVxuICAgICk7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5hZGQodGhpcy5oaXN0b3J5LmRpc3Bvc2UpO1xuICAgIHRoaXMuaGlzdG9yeS5pZ25vcmUoKCkgPT4ge1xuICAgICAgdGhpcy5zdG9yZS5lbnN1cmVTdG9yZUlzVXNhYmxlKCk7XG4gICAgICB0aGlzLl91cGRhdGVDdXJyZW50UGFnZVN0YXRlKHtcbiAgICAgICAgZWRpdGluZ1NoYXBlSWQ6IG51bGwsXG4gICAgICAgIGhvdmVyZWRTaGFwZUlkOiBudWxsLFxuICAgICAgICBlcmFzaW5nU2hhcGVJZHM6IFtdXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBpZiAoaW5pdGlhbFN0YXRlICYmIHRoaXMucm9vdC5jaGlsZHJlbltpbml0aWFsU3RhdGVdID09PSB2b2lkIDApIHtcbiAgICAgIHRocm93IEVycm9yKGBObyBzdGF0ZSBmb3VuZCBmb3IgaW5pdGlhbFN0YXRlIFwiJHtpbml0aWFsU3RhdGV9XCIuYCk7XG4gICAgfVxuICAgIHRoaXMucm9vdC5lbnRlcih2b2lkIDAsIFwiaW5pdGlhbFwiKTtcbiAgICB0aGlzLmZvY3VzTWFuYWdlciA9IG5ldyBGb2N1c01hbmFnZXIodGhpcywgYXV0b0ZvY3VzKTtcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZCh0aGlzLmZvY3VzTWFuYWdlci5kaXNwb3NlLmJpbmQodGhpcy5mb2N1c01hbmFnZXIpKTtcbiAgICBpZiAodGhpcy5nZXRJbnN0YW5jZVN0YXRlKCkuZm9sbG93aW5nVXNlcklkKSB7XG4gICAgICB0aGlzLnN0b3BGb2xsb3dpbmdVc2VyKCk7XG4gICAgfVxuICAgIHRoaXMub24oXCJ0aWNrXCIsIHRoaXMuX2ZsdXNoRXZlbnRzRm9yVGljayk7XG4gICAgdGhpcy50aW1lcnMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHRoaXMuX3RpY2tNYW5hZ2VyLnN0YXJ0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5wZXJmb3JtYW5jZVRyYWNrZXIgPSBuZXcgUGVyZm9ybWFuY2VUcmFja2VyKCk7XG4gIH1cbiAgb3B0aW9ucztcbiAgLyoqXG4gICAqIFRoZSBlZGl0b3IncyBzdG9yZVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzdG9yZTtcbiAgLyoqXG4gICAqIFRoZSByb290IHN0YXRlIG9mIHRoZSBzdGF0ZWNoYXJ0LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByb290O1xuICAvKipcbiAgICogQSBzZXQgb2YgZnVuY3Rpb25zIHRvIGNhbGwgd2hlbiB0aGUgYXBwIGlzIGRpc3Bvc2VkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBkaXNwb3NhYmxlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3RpY2tNYW5hZ2VyO1xuICAvKipcbiAgICogQSBtYW5hZ2VyIGZvciB0aGUgYXBwJ3Mgc25hcHBpbmcgZmVhdHVyZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc25hcHM7XG4gIC8qKlxuICAgKiBBIG1hbmFnZXIgZm9yIHRoZSBhbnkgYXN5bmNocm9ub3VzIGV2ZW50cyBhbmQgbWFraW5nIHN1cmUgdGhleSdyZVxuICAgKiBjbGVhbmVkIHVwIHVwb24gZGlzcG9zYWwuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHRpbWVycztcbiAgLyoqXG4gICAqIEEgbWFuYWdlciBmb3IgdGhlIHVzZXIgYW5kIHRoZWlyIHByZWZlcmVuY2VzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICB1c2VyO1xuICAvKipcbiAgICogQSBoZWxwZXIgZm9yIG1lYXN1cmluZyB0ZXh0LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICB0ZXh0TWVhc3VyZTtcbiAgLyoqXG4gICAqIEEgbWFuYWdlciBmb3IgdGhlIGVkaXRvcidzIGVudmlyb25tZW50LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBlbnZpcm9ubWVudDtcbiAgLyoqXG4gICAqIEEgbWFuYWdlciBmb3IgdGhlIGVkaXRvcidzIHNjcmliYmxlcy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2NyaWJibGVzO1xuICAvKipcbiAgICogQSBtYW5hZ2VyIGZvciBzaWRlIGVmZmVjdHMgYW5kIGNvcnJlY3Qgc3RhdGUgZW5mb3JjZW1lbnQuIFNlZSB7QGxpbmsgQHRsZHJhdy9zdG9yZSNTdG9yZVNpZGVFZmZlY3RzfSBmb3IgZGV0YWlscy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2lkZUVmZmVjdHM7XG4gIC8qKlxuICAgKiBBIG1hbmFnZXIgZm9yIGVuc3VyaW5nIGNvcnJlY3QgZm9jdXMuIFNlZSBGb2N1c01hbmFnZXIgZm9yIGRldGFpbHMuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZm9jdXNNYW5hZ2VyO1xuICAvKipcbiAgICogVGhlIGN1cnJlbnQgSFRNTCBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGVkaXRvci5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogY29uc3QgY29udGFpbmVyID0gZWRpdG9yLmdldENvbnRhaW5lcigpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRDb250YWluZXI7XG4gIC8qKlxuICAgKiBEaXNwb3NlIHRoZSBlZGl0b3IuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5mb3JFYWNoKChkaXNwb3NlKSA9PiBkaXNwb3NlKCkpO1xuICAgIHRoaXMuZGlzcG9zYWJsZXMuY2xlYXIoKTtcbiAgfVxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tIFNoYXBlIFV0aWxzIC0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKipcbiAgICogQSBtYXAgb2Ygc2hhcGUgdXRpbGl0eSBjbGFzc2VzIChUTFNoYXBlVXRpbHMpIGJ5IHNoYXBlIHR5cGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNoYXBlVXRpbHM7XG4gIHN0eWxlUHJvcHM7XG4gIGdldFNoYXBlVXRpbChhcmcpIHtcbiAgICBjb25zdCB0eXBlID0gdHlwZW9mIGFyZyA9PT0gXCJzdHJpbmdcIiA/IGFyZyA6IGFyZy50eXBlO1xuICAgIGNvbnN0IHNoYXBlVXRpbCA9IGdldE93blByb3BlcnR5KHRoaXMuc2hhcGVVdGlscywgdHlwZSk7XG4gICAgYXNzZXJ0KHNoYXBlVXRpbCwgYE5vIHNoYXBlIHV0aWwgZm91bmQgZm9yIHR5cGUgXCIke3R5cGV9XCJgKTtcbiAgICByZXR1cm4gc2hhcGVVdGlsO1xuICB9XG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0gQmluZGluZyBVdGlscyAtLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyoqXG4gICAqIEEgbWFwIG9mIHNoYXBlIHV0aWxpdHkgY2xhc3NlcyAoVExTaGFwZVV0aWxzKSBieSBzaGFwZSB0eXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBiaW5kaW5nVXRpbHM7XG4gIGdldEJpbmRpbmdVdGlsKGFyZykge1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgYXJnID09PSBcInN0cmluZ1wiID8gYXJnIDogYXJnLnR5cGU7XG4gICAgY29uc3QgYmluZGluZ1V0aWwgPSBnZXRPd25Qcm9wZXJ0eSh0aGlzLmJpbmRpbmdVdGlscywgdHlwZSk7XG4gICAgYXNzZXJ0KGJpbmRpbmdVdGlsLCBgTm8gYmluZGluZyB1dGlsIGZvdW5kIGZvciB0eXBlIFwiJHt0eXBlfVwiYCk7XG4gICAgcmV0dXJuIGJpbmRpbmdVdGlsO1xuICB9XG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLSBIaXN0b3J5IC0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qKlxuICAgKiBBIG1hbmFnZXIgZm9yIHRoZSBhcHAncyBoaXN0b3J5LlxuICAgKlxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGhpc3Rvcnk7XG4gIC8qKlxuICAgKiBVbmRvIHRvIHRoZSBsYXN0IG1hcmsuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci51bmRvKClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHVuZG8oKSB7XG4gICAgdGhpcy5fZmx1c2hFdmVudHNGb3JUaWNrKDApO1xuICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICB0aGlzLmhpc3RvcnkudW5kbygpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldENhblVuZG8oKSB7XG4gICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5nZXROdW1VbmRvcygpID4gMDtcbiAgfVxuICAvKipcbiAgICogUmVkbyB0byB0aGUgbmV4dCBtYXJrLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IucmVkbygpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZWRvKCkge1xuICAgIHRoaXMuX2ZsdXNoRXZlbnRzRm9yVGljaygwKTtcbiAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgdGhpcy5oaXN0b3J5LnJlZG8oKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBnZXRDYW5SZWRvKCkge1xuICAgIHJldHVybiB0aGlzLmhpc3RvcnkuZ2V0TnVtUmVkb3MoKSA+IDA7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBcIm1hcmtcIiwgb3Igc3RvcHBpbmcgcG9pbnQsIGluIHRoZSB1bmRvIHJlZG8gaGlzdG9yeS4gQ3JlYXRpbmcgYSBtYXJrIHdpbGwgY2xlYXJcbiAgICogYW55IHJlZG9zLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IubWFyaygpXG4gICAqIGVkaXRvci5tYXJrKCdmbGlwIHNoYXBlcycpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gbWFya0lkIC0gVGhlIG1hcmsncyBpZCwgdXN1YWxseSB0aGUgcmVhc29uIGZvciBhZGRpbmcgdGhlIG1hcmsuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG1hcmsobWFya0lkKSB7XG4gICAgdGhpcy5oaXN0b3J5Lm1hcmsobWFya0lkKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ2xlYXIgYWxsIG1hcmtzIGluIHRoZSB1bmRvIHN0YWNrIGJhY2sgdG8gdGhlIG5leHQgbWFyay5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmJhaWwoKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYmFpbCgpIHtcbiAgICB0aGlzLmhpc3RvcnkuYmFpbCgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDbGVhciBhbGwgbWFya3MgaW4gdGhlIHVuZG8gc3RhY2sgYmFjayB0byB0aGUgbWFyayB3aXRoIHRoZSBwcm92aWRlZCBtYXJrIGlkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuYmFpbFRvTWFyaygnZHJhZ2dpbmcnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYmFpbFRvTWFyayhpZCkge1xuICAgIHRoaXMuaGlzdG9yeS5iYWlsVG9NYXJrKGlkKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUnVuIGEgZnVuY3Rpb24gaW4gYSBiYXRjaC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYmF0Y2goZm4sIG9wdHMpIHtcbiAgICB0aGlzLmhpc3RvcnkuYmF0Y2goZm4sIG9wdHMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFcnJvcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgYW5ub3RhdGVFcnJvcihlcnJvciwge1xuICAgIG9yaWdpbixcbiAgICB3aWxsQ3Jhc2hBcHAsXG4gICAgdGFncyxcbiAgICBleHRyYXNcbiAgfSkge1xuICAgIGNvbnN0IGRlZmF1bHRBbm5vdGF0aW9ucyA9IHRoaXMuY3JlYXRlRXJyb3JBbm5vdGF0aW9ucyhvcmlnaW4sIHdpbGxDcmFzaEFwcCk7XG4gICAgYW5ub3RhdGVFcnJvcihlcnJvciwge1xuICAgICAgdGFnczogeyAuLi5kZWZhdWx0QW5ub3RhdGlvbnMudGFncywgLi4udGFncyB9LFxuICAgICAgZXh0cmFzOiB7IC4uLmRlZmF1bHRBbm5vdGF0aW9ucy5leHRyYXMsIC4uLmV4dHJhcyB9XG4gICAgfSk7XG4gICAgaWYgKHdpbGxDcmFzaEFwcCkge1xuICAgICAgdGhpcy5zdG9yZS5tYXJrQXNQb3NzaWJseUNvcnJ1cHRlZCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGNyZWF0ZUVycm9yQW5ub3RhdGlvbnMob3JpZ2luLCB3aWxsQ3Jhc2hBcHApIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZWRpdGluZ1NoYXBlSWQgPSB0aGlzLmdldEVkaXRpbmdTaGFwZUlkKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0YWdzOiB7XG4gICAgICAgICAgb3JpZ2luLFxuICAgICAgICAgIHdpbGxDcmFzaEFwcFxuICAgICAgICB9LFxuICAgICAgICBleHRyYXM6IHtcbiAgICAgICAgICBhY3RpdmVTdGF0ZU5vZGU6IHRoaXMucm9vdC5nZXRQYXRoKCksXG4gICAgICAgICAgc2VsZWN0ZWRTaGFwZXM6IHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZXMoKSxcbiAgICAgICAgICBlZGl0aW5nU2hhcGU6IGVkaXRpbmdTaGFwZUlkID8gdGhpcy5nZXRTaGFwZShlZGl0aW5nU2hhcGVJZCkgOiB2b2lkIDAsXG4gICAgICAgICAgaW5wdXRzOiB0aGlzLmlucHV0c1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGFnczoge1xuICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICB3aWxsQ3Jhc2hBcHBcbiAgICAgICAgfSxcbiAgICAgICAgZXh0cmFzOiB7fVxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfY3Jhc2hpbmdFcnJvciA9IG51bGw7XG4gIC8qKlxuICAgKiBXZSBjYW4ndCB1c2UgYW4gYGF0b21gIGhlcmUgYmVjYXVzZSB0aGVyZSdzIGEgY2hhbmNlIHRoYXQgd2hlbiBgY3Jhc2hBbmRSZXBvcnRFcnJvcmAgaXMgY2FsbGVkLFxuICAgKiB3ZSdyZSBpbiBhIHRyYW5zYWN0aW9uIHRoYXQncyBhYm91dCB0byBiZSByb2xsZWQgYmFjayBkdWUgdG8gdGhlIHNhbWUgZXJyb3Igd2UncmUgY3VycmVudGx5XG4gICAqIHJlcG9ydGluZy5cbiAgICpcbiAgICogSW5zdGVhZCwgdG8gbGlzdGVuIHRvIGNoYW5nZXMgdG8gdGhpcyB2YWx1ZSwgeW91IG5lZWQgdG8gbGlzdGVuIHRvIGFwcCdzIGBjcmFzaGAgZXZlbnQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0Q3Jhc2hpbmdFcnJvcigpIHtcbiAgICByZXR1cm4gdGhpcy5fY3Jhc2hpbmdFcnJvcjtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGNyYXNoKGVycm9yKSB7XG4gICAgdGhpcy5fY3Jhc2hpbmdFcnJvciA9IGVycm9yO1xuICAgIHRoaXMuc3RvcmUubWFya0FzUG9zc2libHlDb3JydXB0ZWQoKTtcbiAgICB0aGlzLmVtaXQoXCJjcmFzaFwiLCB7IGVycm9yIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldFBhdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMucm9vdC5nZXRQYXRoKCkuc3BsaXQoXCJyb290LlwiKVsxXTtcbiAgfVxuICAvKipcbiAgICogR2V0IHdoZXRoZXIgYSBjZXJ0YWluIHRvb2wgKG9yIG90aGVyIHN0YXRlIG5vZGUpIGlzIGN1cnJlbnRseSBhY3RpdmUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5pc0luKCdzZWxlY3QnKVxuICAgKiBlZGl0b3IuaXNJbignc2VsZWN0LmJydXNoaW5nJylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwYXRoIC0gVGhlIHBhdGggb2YgYWN0aXZlIHN0YXRlcywgc2VwYXJhdGVkIGJ5IHBlcmlvZHMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGlzSW4ocGF0aCkge1xuICAgIGNvbnN0IGlkcyA9IHBhdGguc3BsaXQoXCIuXCIpLnJldmVyc2UoKTtcbiAgICBsZXQgc3RhdGUgPSB0aGlzLnJvb3Q7XG4gICAgd2hpbGUgKGlkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpZCA9IGlkcy5wb3AoKTtcbiAgICAgIGlmICghaWQpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgY29uc3QgY3VycmVudCA9IHN0YXRlLmdldEN1cnJlbnQoKTtcbiAgICAgIGlmIChjdXJyZW50Py5pZCA9PT0gaWQpIHtcbiAgICAgICAgaWYgKGlkcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHN0YXRlID0gY3VycmVudDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2VcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB3aGV0aGVyIHRoZSBzdGF0ZSBub2RlIGlzIGluIGFueSBvZiB0aGUgZ2l2ZW4gYWN0aXZlIHBhdGhzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBzdGF0ZS5pc0luQW55KCdzZWxlY3QnLCAnZXJhc2UnKVxuICAgKiBzdGF0ZS5pc0luQW55KCdzZWxlY3QuYnJ1c2hpbmcnLCAnZXJhc2UuaWRsZScpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBpc0luQW55KC4uLnBhdGhzKSB7XG4gICAgcmV0dXJuIHBhdGhzLnNvbWUoKHBhdGgpID0+IHRoaXMuaXNJbihwYXRoKSk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgc2VsZWN0ZWQgdG9vbC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNldEN1cnJlbnRUb29sKCdoYW5kJylcbiAgICogZWRpdG9yLnNldEN1cnJlbnRUb29sKCdoYW5kJywgeyBkYXRlOiBEYXRlLm5vdygpIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIHRvb2wgdG8gc2VsZWN0LlxuICAgKiBAcGFyYW0gaW5mbyAtIEFyYml0cmFyeSBkYXRhIHRvIHBhc3MgYWxvbmcgaW50byB0aGUgdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2V0Q3VycmVudFRvb2woaWQsIGluZm8gPSB7fSkge1xuICAgIHRoaXMucm9vdC50cmFuc2l0aW9uKGlkLCBpbmZvKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBnZXRDdXJyZW50VG9vbCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb290LmdldEN1cnJlbnQoKTtcbiAgfVxuICBnZXRDdXJyZW50VG9vbElkKCkge1xuICAgIGNvbnN0IGN1cnJlbnRUb29sID0gdGhpcy5nZXRDdXJyZW50VG9vbCgpO1xuICAgIGlmICghY3VycmVudFRvb2wpXG4gICAgICByZXR1cm4gXCJcIjtcbiAgICByZXR1cm4gY3VycmVudFRvb2wuZ2V0Q3VycmVudFRvb2xJZE1hc2soKSA/PyBjdXJyZW50VG9vbC5pZDtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgZGVzY2VuZGFudCBieSBpdHMgcGF0aC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogc3RhdGUuZ2V0U3RhdGVEZXNjZW5kYW50KCdzZWxlY3QnKVxuICAgKiBzdGF0ZS5nZXRTdGF0ZURlc2NlbmRhbnQoJ3NlbGVjdC5icnVzaGluZycpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBkZXNjZW5kYW50J3MgcGF0aCBvZiBzdGF0ZSBpZHMsIHNlcGFyYXRlZCBieSBwZXJpb2RzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTdGF0ZURlc2NlbmRhbnQocGF0aCkge1xuICAgIGNvbnN0IGlkcyA9IHBhdGguc3BsaXQoXCIuXCIpLnJldmVyc2UoKTtcbiAgICBsZXQgc3RhdGUgPSB0aGlzLnJvb3Q7XG4gICAgd2hpbGUgKGlkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpZCA9IGlkcy5wb3AoKTtcbiAgICAgIGlmICghaWQpXG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIGNvbnN0IGNoaWxkU3RhdGUgPSBzdGF0ZS5jaGlsZHJlbj8uW2lkXTtcbiAgICAgIGlmICghY2hpbGRTdGF0ZSlcbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgIHN0YXRlID0gY2hpbGRTdGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG4gIGdldERvY3VtZW50U2V0dGluZ3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0KFRMRE9DVU1FTlRfSUQpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGdsb2JhbCBkb2N1bWVudCBzZXR0aW5ncyB0aGF0IGFwcGx5IHRvIGFsbCB1c2Vycy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiovXG4gIHVwZGF0ZURvY3VtZW50U2V0dGluZ3Moc2V0dGluZ3MpIHtcbiAgICB0aGlzLmhpc3RvcnkuaWdub3JlKCgpID0+IHtcbiAgICAgIHRoaXMuc3RvcmUucHV0KFt7IC4uLnRoaXMuZ2V0RG9jdW1lbnRTZXR0aW5ncygpLCAuLi5zZXR0aW5ncyB9XSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ2V0SW5zdGFuY2VTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5nZXQoVExJTlNUQU5DRV9JRCk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgaW5zdGFuY2UncyBzdGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHBhcnRpYWwgLSBBIHBhcnRpYWwgb2JqZWN0IHRvIHVwZGF0ZSB0aGUgaW5zdGFuY2Ugc3RhdGUgd2l0aC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgdXBkYXRlSW5zdGFuY2VTdGF0ZShwYXJ0aWFsLCBoaXN0b3J5T3B0aW9ucykge1xuICAgIHRoaXMuX3VwZGF0ZUluc3RhbmNlU3RhdGUocGFydGlhbCwgeyBoaXN0b3J5OiBcImlnbm9yZVwiLCAuLi5oaXN0b3J5T3B0aW9ucyB9KTtcbiAgICBpZiAocGFydGlhbC5pc0NoYW5naW5nU3R5bGUgIT09IHZvaWQgMCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2lzQ2hhbmdpbmdTdHlsZVRpbWVvdXQpO1xuICAgICAgaWYgKHBhcnRpYWwuaXNDaGFuZ2luZ1N0eWxlID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuX2lzQ2hhbmdpbmdTdHlsZVRpbWVvdXQgPSB0aGlzLnRpbWVycy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLl91cGRhdGVJbnN0YW5jZVN0YXRlKHsgaXNDaGFuZ2luZ1N0eWxlOiBmYWxzZSB9LCB7IGhpc3Rvcnk6IFwiaWdub3JlXCIgfSk7XG4gICAgICAgIH0sIDJlMyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3VwZGF0ZUluc3RhbmNlU3RhdGUgPSAocGFydGlhbCwgb3B0cykgPT4ge1xuICAgIHRoaXMuYmF0Y2goKCkgPT4ge1xuICAgICAgdGhpcy5zdG9yZS5wdXQoW1xuICAgICAgICB7XG4gICAgICAgICAgLi4udGhpcy5nZXRJbnN0YW5jZVN0YXRlKCksXG4gICAgICAgICAgLi4ucGFydGlhbFxuICAgICAgICB9XG4gICAgICBdKTtcbiAgICB9LCBvcHRzKTtcbiAgfTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfaXNDaGFuZ2luZ1N0eWxlVGltZW91dCA9IC0xO1xuICBnZXRPcGVuTWVudXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLm9wZW5NZW51cztcbiAgfVxuICAvKipcbiAgICogQWRkIGFuIG9wZW4gbWVudS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmFkZE9wZW5NZW51KCdtZW51LWlkJylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFkZE9wZW5NZW51KGlkKSB7XG4gICAgY29uc3QgbWVudXMgPSBuZXcgU2V0KHRoaXMuZ2V0T3Blbk1lbnVzKCkpO1xuICAgIGlmICghbWVudXMuaGFzKGlkKSkge1xuICAgICAgbWVudXMuYWRkKGlkKTtcbiAgICAgIHRoaXMudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IG9wZW5NZW51czogWy4uLm1lbnVzXSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIERlbGV0ZSBhbiBvcGVuIG1lbnUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5kZWxldGVPcGVuTWVudSgnbWVudS1pZCcpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBkZWxldGVPcGVuTWVudShpZCkge1xuICAgIGNvbnN0IG1lbnVzID0gbmV3IFNldCh0aGlzLmdldE9wZW5NZW51cygpKTtcbiAgICBpZiAobWVudXMuaGFzKGlkKSkge1xuICAgICAgbWVudXMuZGVsZXRlKGlkKTtcbiAgICAgIHRoaXMudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IG9wZW5NZW51czogWy4uLm1lbnVzXSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENsZWFyIGFsbCBvcGVuIG1lbnVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuY2xlYXJPcGVuTWVudXMoKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2xlYXJPcGVuTWVudXMoKSB7XG4gICAgaWYgKHRoaXMuZ2V0T3Blbk1lbnVzKCkubGVuZ3RoKSB7XG4gICAgICB0aGlzLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBvcGVuTWVudXM6IFtdIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBnZXRJc01lbnVPcGVuKCkge1xuICAgIHJldHVybiB0aGlzLmdldE9wZW5NZW51cygpLmxlbmd0aCA+IDA7XG4gIH1cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEN1cnNvciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyoqXG4gICAqIFNldCB0aGUgY3Vyc29yLlxuICAgKlxuICAgKiBAcGFyYW0gdHlwZSAtIFRoZSBjdXJzb3IgdHlwZS5cbiAgICogQHBhcmFtIHJvdGF0aW9uIC0gVGhlIGN1cnNvciByb3RhdGlvbi5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2V0Q3Vyc29yID0gKGN1cnNvcikgPT4ge1xuICAgIHRoaXMudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IGN1cnNvcjogeyAuLi50aGlzLmdldEluc3RhbmNlU3RhdGUoKS5jdXJzb3IsIC4uLmN1cnNvciB9IH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBnZXRQYWdlU3RhdGVzKCkge1xuICAgIHJldHVybiB0aGlzLl9nZXRQYWdlU3RhdGVzUXVlcnkoKS5nZXQoKTtcbiAgfVxuICBfZ2V0UGFnZVN0YXRlc1F1ZXJ5KCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLnF1ZXJ5LnJlY29yZHMoXCJpbnN0YW5jZV9wYWdlX3N0YXRlXCIpO1xuICB9XG4gIGdldEN1cnJlbnRQYWdlU3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0KHRoaXMuX2dldEN1cnJlbnRQYWdlU3RhdGVJZCgpKTtcbiAgfVxuICBfZ2V0Q3VycmVudFBhZ2VTdGF0ZUlkKCkge1xuICAgIHJldHVybiBJbnN0YW5jZVBhZ2VTdGF0ZVJlY29yZFR5cGUuY3JlYXRlSWQodGhpcy5nZXRDdXJyZW50UGFnZUlkKCkpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhpcyBpbnN0YW5jZSdzIHBhZ2Ugc3RhdGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci51cGRhdGVDdXJyZW50UGFnZVN0YXRlKHsgaWQ6ICdwYWdlMScsIGVkaXRpbmdTaGFwZUlkOiAnc2hhcGU6MTIzJyB9KVxuICAgKiBlZGl0b3IudXBkYXRlQ3VycmVudFBhZ2VTdGF0ZSh7IGlkOiAncGFnZTEnLCBlZGl0aW5nU2hhcGVJZDogJ3NoYXBlOjEyMycgfSwgeyBlcGhlbWVyYWw6IHRydWUgfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwYXJ0aWFsIC0gVGhlIHBhcnRpYWwgb2YgdGhlIHBhZ2Ugc3RhdGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNoYW5nZXMuXG4gICAqIEBwYXJhbSBoaXN0b3J5T3B0aW9ucyAtIFRoZSBoaXN0b3J5IG9wdGlvbnMgZm9yIHRoZSBjaGFuZ2UuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHVwZGF0ZUN1cnJlbnRQYWdlU3RhdGUocGFydGlhbCwgaGlzdG9yeU9wdGlvbnMpIHtcbiAgICB0aGlzLl91cGRhdGVDdXJyZW50UGFnZVN0YXRlKHBhcnRpYWwsIGhpc3RvcnlPcHRpb25zKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBfdXBkYXRlQ3VycmVudFBhZ2VTdGF0ZSA9IChwYXJ0aWFsLCBoaXN0b3J5T3B0aW9ucykgPT4ge1xuICAgIHRoaXMuYmF0Y2goXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMuc3RvcmUudXBkYXRlKHBhcnRpYWwuaWQgPz8gdGhpcy5nZXRDdXJyZW50UGFnZVN0YXRlKCkuaWQsIChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAuLi5wYXJ0aWFsXG4gICAgICAgIH0pKTtcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGhpc3Rvcnk6IFwiaWdub3JlXCIsXG4gICAgICAgIC4uLmhpc3RvcnlPcHRpb25zXG4gICAgICB9XG4gICAgKTtcbiAgfTtcbiAgZ2V0U2VsZWN0ZWRTaGFwZUlkcygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50UGFnZVN0YXRlKCkuc2VsZWN0ZWRTaGFwZUlkcztcbiAgfVxuICBnZXRTZWxlY3RlZFNoYXBlcygpIHtcbiAgICBjb25zdCB7IHNlbGVjdGVkU2hhcGVJZHMgfSA9IHRoaXMuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpO1xuICAgIHJldHVybiBjb21wYWN0KHNlbGVjdGVkU2hhcGVJZHMubWFwKChpZCkgPT4gdGhpcy5zdG9yZS5nZXQoaWQpKSk7XG4gIH1cbiAgLyoqXG4gICAqIFNlbGVjdCBvbmUgb3IgbW9yZSBzaGFwZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zZXRTZWxlY3RlZFNoYXBlcyhbJ2lkMSddKVxuICAgKiBlZGl0b3Iuc2V0U2VsZWN0ZWRTaGFwZXMoWydpZDEnLCAnaWQyJ10pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gaWRzIC0gVGhlIGlkcyB0byBzZWxlY3QuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldFNlbGVjdGVkU2hhcGVzKHNoYXBlcykge1xuICAgIHJldHVybiB0aGlzLmJhdGNoKFxuICAgICAgKCkgPT4ge1xuICAgICAgICBjb25zdCBpZHMgPSBzaGFwZXMubWFwKChzaGFwZSkgPT4gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZCk7XG4gICAgICAgIGNvbnN0IHsgc2VsZWN0ZWRTaGFwZUlkczogcHJldlNlbGVjdGVkU2hhcGVJZHMgfSA9IHRoaXMuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwcmV2U2V0ID0gbmV3IFNldChwcmV2U2VsZWN0ZWRTaGFwZUlkcyk7XG4gICAgICAgIGlmIChpZHMubGVuZ3RoID09PSBwcmV2U2V0LnNpemUgJiYgaWRzLmV2ZXJ5KChpZCkgPT4gcHJldlNldC5oYXMoaWQpKSlcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdGhpcy5zdG9yZS5wdXQoW3sgLi4udGhpcy5nZXRDdXJyZW50UGFnZVN0YXRlKCksIHNlbGVjdGVkU2hhcGVJZHM6IGlkcyB9XSk7XG4gICAgICB9LFxuICAgICAgeyBoaXN0b3J5OiBcInJlY29yZC1wcmVzZXJ2ZVJlZG9TdGFja1wiIH1cbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgd2hldGhlciBvciBub3QgYW55IG9mIGEgc2hhcGUncyBhbmNlc3RvcnMgYXJlIHNlbGVjdGVkLlxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIHNoYXBlIHRvIGNoZWNrLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBpc0FuY2VzdG9yU2VsZWN0ZWQoc2hhcGUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGU/LmlkID8/IG51bGw7XG4gICAgY29uc3QgX3NoYXBlID0gdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgaWYgKCFfc2hhcGUpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgY29uc3Qgc2VsZWN0ZWRTaGFwZUlkcyA9IHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpO1xuICAgIHJldHVybiAhIXRoaXMuZmluZFNoYXBlQW5jZXN0b3IoX3NoYXBlLCAocGFyZW50KSA9PiBzZWxlY3RlZFNoYXBlSWRzLmluY2x1ZGVzKHBhcmVudC5pZCkpO1xuICB9XG4gIC8qKlxuICAgKiBTZWxlY3Qgb25lIG9yIG1vcmUgc2hhcGVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2VsZWN0KCdpZDEnKVxuICAgKiBlZGl0b3Iuc2VsZWN0KCdpZDEnLCAnaWQyJylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBpZHMgLSBUaGUgaWRzIHRvIHNlbGVjdC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2VsZWN0KC4uLnNoYXBlcykge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzaGFwZSkgPT4gc2hhcGUuaWQpO1xuICAgIHRoaXMuc2V0U2VsZWN0ZWRTaGFwZXMoaWRzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGEgc2hhcGUgZnJvbSB0aGUgZXhpc3Rpbmcgc2V0IG9mIHNlbGVjdGVkIHNoYXBlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmRlc2VsZWN0KHNoYXBlLmlkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZGVzZWxlY3QoLi4uc2hhcGVzKSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHNoYXBlKSA9PiBzaGFwZS5pZCk7XG4gICAgY29uc3Qgc2VsZWN0ZWRTaGFwZUlkcyA9IHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpO1xuICAgIGlmIChzZWxlY3RlZFNoYXBlSWRzLmxlbmd0aCA+IDAgJiYgaWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRTaGFwZXMoc2VsZWN0ZWRTaGFwZUlkcy5maWx0ZXIoKGlkKSA9PiAhaWRzLmluY2x1ZGVzKGlkKSkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogU2VsZWN0IGFsbCBkaXJlY3QgY2hpbGRyZW4gb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNlbGVjdEFsbCgpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZWxlY3RBbGwoKSB7XG4gICAgY29uc3QgaWRzID0gdGhpcy5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudCh0aGlzLmdldEN1cnJlbnRQYWdlSWQoKSk7XG4gICAgaWYgKGlkcy5sZW5ndGggPD0gMClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIHRoaXMuc2V0U2VsZWN0ZWRTaGFwZXModGhpcy5fZ2V0VW5sb2NrZWRTaGFwZUlkcyhpZHMpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ2xlYXIgdGhlIHNlbGVjdGlvbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNlbGVjdE5vbmUoKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2VsZWN0Tm9uZSgpIHtcbiAgICBpZiAodGhpcy5nZXRTZWxlY3RlZFNoYXBlSWRzKCkubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZXRTZWxlY3RlZFNoYXBlcyhbXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldE9ubHlTZWxlY3RlZFNoYXBlSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0T25seVNlbGVjdGVkU2hhcGUoKT8uaWQgPz8gbnVsbDtcbiAgfVxuICBnZXRPbmx5U2VsZWN0ZWRTaGFwZSgpIHtcbiAgICBjb25zdCBzZWxlY3RlZFNoYXBlcyA9IHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZXMoKTtcbiAgICByZXR1cm4gc2VsZWN0ZWRTaGFwZXMubGVuZ3RoID09PSAxID8gc2VsZWN0ZWRTaGFwZXNbMF0gOiBudWxsO1xuICB9XG4gIGdldFNlbGVjdGlvblBhZ2VCb3VuZHMoKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRTaGFwZUlkcyA9IHRoaXMuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLnNlbGVjdGVkU2hhcGVJZHM7XG4gICAgaWYgKHNlbGVjdGVkU2hhcGVJZHMubGVuZ3RoID09PSAwKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIEJveC5Db21tb24oY29tcGFjdChzZWxlY3RlZFNoYXBlSWRzLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGVQYWdlQm91bmRzKGlkKSkpKTtcbiAgfVxuICBnZXRTZWxlY3Rpb25Sb3RhdGlvbigpIHtcbiAgICBjb25zdCBzZWxlY3RlZFNoYXBlSWRzID0gdGhpcy5nZXRTZWxlY3RlZFNoYXBlSWRzKCk7XG4gICAgbGV0IGZvdW5kRmlyc3QgPSBmYWxzZTtcbiAgICBsZXQgcm90YXRpb24gPSAwO1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gc2VsZWN0ZWRTaGFwZUlkcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIGNvbnN0IHBhZ2VUcmFuc2Zvcm0gPSB0aGlzLmdldFNoYXBlUGFnZVRyYW5zZm9ybShzZWxlY3RlZFNoYXBlSWRzW2ldKTtcbiAgICAgIGlmICghcGFnZVRyYW5zZm9ybSlcbiAgICAgICAgY29udGludWU7XG4gICAgICBpZiAoZm91bmRGaXJzdCkge1xuICAgICAgICBpZiAocGFnZVRyYW5zZm9ybS5yb3RhdGlvbigpICE9PSByb3RhdGlvbikge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3VuZEZpcnN0ID0gdHJ1ZTtcbiAgICAgICAgcm90YXRpb24gPSBwYWdlVHJhbnNmb3JtLnJvdGF0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByb3RhdGlvbjtcbiAgfVxuICBnZXRTZWxlY3Rpb25Sb3RhdGVkUGFnZUJvdW5kcygpIHtcbiAgICBjb25zdCBzZWxlY3RlZFNoYXBlSWRzID0gdGhpcy5nZXRTZWxlY3RlZFNoYXBlSWRzKCk7XG4gICAgaWYgKHNlbGVjdGVkU2hhcGVJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBjb25zdCBzZWxlY3Rpb25Sb3RhdGlvbiA9IHRoaXMuZ2V0U2VsZWN0aW9uUm90YXRpb24oKTtcbiAgICBpZiAoc2VsZWN0aW9uUm90YXRpb24gPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFNlbGVjdGlvblBhZ2VCb3VuZHMoKTtcbiAgICB9XG4gICAgaWYgKHNlbGVjdGVkU2hhcGVJZHMubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBib3VuZHMgPSB0aGlzLmdldFNoYXBlR2VvbWV0cnkoc2VsZWN0ZWRTaGFwZUlkc1swXSkuYm91bmRzLmNsb25lKCk7XG4gICAgICBjb25zdCBwYWdlVHJhbnNmb3JtID0gdGhpcy5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2VsZWN0ZWRTaGFwZUlkc1swXSk7XG4gICAgICBib3VuZHMucG9pbnQgPSBwYWdlVHJhbnNmb3JtLmFwcGx5VG9Qb2ludChib3VuZHMucG9pbnQpO1xuICAgICAgcmV0dXJuIGJvdW5kcztcbiAgICB9XG4gICAgY29uc3QgYm94RnJvbVJvdGF0ZWRWZXJ0aWNlcyA9IEJveC5Gcm9tUG9pbnRzKFxuICAgICAgdGhpcy5nZXRTZWxlY3RlZFNoYXBlSWRzKCkuZmxhdE1hcCgoaWQpID0+IHtcbiAgICAgICAgY29uc3QgcGFnZVRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKGlkKTtcbiAgICAgICAgaWYgKCFwYWdlVHJhbnNmb3JtKVxuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgcmV0dXJuIHBhZ2VUcmFuc2Zvcm0uYXBwbHlUb1BvaW50cyh0aGlzLmdldFNoYXBlR2VvbWV0cnkoaWQpLmJvdW5kcy5jb3JuZXJzKTtcbiAgICAgIH0pLm1hcCgocCkgPT4gcC5yb3QoLXNlbGVjdGlvblJvdGF0aW9uKSlcbiAgICApO1xuICAgIGJveEZyb21Sb3RhdGVkVmVydGljZXMucG9pbnQgPSBib3hGcm9tUm90YXRlZFZlcnRpY2VzLnBvaW50LnJvdChzZWxlY3Rpb25Sb3RhdGlvbik7XG4gICAgcmV0dXJuIGJveEZyb21Sb3RhdGVkVmVydGljZXM7XG4gIH1cbiAgZ2V0U2VsZWN0aW9uUm90YXRlZFNjcmVlbkJvdW5kcygpIHtcbiAgICBjb25zdCBib3VuZHMgPSB0aGlzLmdldFNlbGVjdGlvblJvdGF0ZWRQYWdlQm91bmRzKCk7XG4gICAgaWYgKCFib3VuZHMpXG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5wYWdlVG9TY3JlZW4oYm91bmRzLnBvaW50KTtcbiAgICBjb25zdCB6b29tID0gdGhpcy5nZXRab29tTGV2ZWwoKTtcbiAgICByZXR1cm4gbmV3IEJveCh4LCB5LCBib3VuZHMud2lkdGggKiB6b29tLCBib3VuZHMuaGVpZ2h0ICogem9vbSk7XG4gIH1cbiAgZ2V0Rm9jdXNlZEdyb3VwSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLmZvY3VzZWRHcm91cElkID8/IHRoaXMuZ2V0Q3VycmVudFBhZ2VJZCgpO1xuICB9XG4gIGdldEZvY3VzZWRHcm91cCgpIHtcbiAgICBjb25zdCBmb2N1c2VkR3JvdXBJZCA9IHRoaXMuZ2V0Rm9jdXNlZEdyb3VwSWQoKTtcbiAgICByZXR1cm4gZm9jdXNlZEdyb3VwSWQgPyB0aGlzLmdldFNoYXBlKGZvY3VzZWRHcm91cElkKSA6IHZvaWQgMDtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBjdXJyZW50IGZvY3VzZWQgZ3JvdXAgc2hhcGUuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBncm91cCBzaGFwZSBpZCAob3IgZ3JvdXAgc2hhcGUncyBpZCkgdG8gc2V0IGFzIHRoZSBmb2N1c2VkIGdyb3VwIHNoYXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRGb2N1c2VkR3JvdXAoc2hhcGUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGU/LmlkID8/IG51bGw7XG4gICAgaWYgKGlkICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBzaGFwZTIgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICAgIGlmICghc2hhcGUyKSB7XG4gICAgICAgIHRocm93IEVycm9yKGBFZGl0b3Iuc2V0Rm9jdXNlZEdyb3VwOiBTaGFwZSB3aXRoIGlkICR7aWR9IGRvZXMgbm90IGV4aXN0YCk7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuaXNTaGFwZU9mVHlwZShzaGFwZTIsIFwiZ3JvdXBcIikpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgYEVkaXRvci5zZXRGb2N1c2VkR3JvdXA6IENhbm5vdCBzZXQgZm9jdXNlZCBncm91cCB0byBzaGFwZSBvZiB0eXBlICR7c2hhcGUyLnR5cGV9YFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaWQgPT09IHRoaXMuZ2V0Rm9jdXNlZEdyb3VwSWQoKSlcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIHJldHVybiB0aGlzLmJhdGNoKFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLnN0b3JlLnVwZGF0ZSh0aGlzLmdldEN1cnJlbnRQYWdlU3RhdGUoKS5pZCwgKHMpID0+ICh7IC4uLnMsIGZvY3VzZWRHcm91cElkOiBpZCB9KSk7XG4gICAgICB9LFxuICAgICAgeyBoaXN0b3J5OiBcInJlY29yZC1wcmVzZXJ2ZVJlZG9TdGFja1wiIH1cbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBFeGl0IHRoZSBjdXJyZW50IGZvY3VzZWQgZ3JvdXAsIG1vdmluZyB1cCB0byB0aGUgbmV4dCBwYXJlbnQgZ3JvdXAgaWYgdGhlcmUgaXMgb25lLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBwb3BGb2N1c2VkR3JvdXBJZCgpIHtcbiAgICBjb25zdCBmb2N1c2VkR3JvdXAgPSB0aGlzLmdldEZvY3VzZWRHcm91cCgpO1xuICAgIGlmIChmb2N1c2VkR3JvdXApIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5maW5kU2hhcGVBbmNlc3RvcihcbiAgICAgICAgZm9jdXNlZEdyb3VwLFxuICAgICAgICAoc2hhcGUpID0+IHRoaXMuaXNTaGFwZU9mVHlwZShzaGFwZSwgXCJncm91cFwiKVxuICAgICAgKTtcbiAgICAgIHRoaXMuc2V0Rm9jdXNlZEdyb3VwKG1hdGNoPy5pZCA/PyBudWxsKTtcbiAgICAgIHRoaXMuc2VsZWN0KGZvY3VzZWRHcm91cC5pZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0Rm9jdXNlZEdyb3VwKG51bGwpO1xuICAgICAgdGhpcy5zZWxlY3ROb25lKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldEVkaXRpbmdTaGFwZUlkKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRQYWdlU3RhdGUoKS5lZGl0aW5nU2hhcGVJZDtcbiAgfVxuICBnZXRFZGl0aW5nU2hhcGUoKSB7XG4gICAgY29uc3QgZWRpdGluZ1NoYXBlSWQgPSB0aGlzLmdldEVkaXRpbmdTaGFwZUlkKCk7XG4gICAgcmV0dXJuIGVkaXRpbmdTaGFwZUlkID8gdGhpcy5nZXRTaGFwZShlZGl0aW5nU2hhcGVJZCkgOiB2b2lkIDA7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgY3VycmVudCBlZGl0aW5nIHNoYXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2V0RWRpdGluZ1NoYXBlKG15U2hhcGUpXG4gICAqIGVkaXRvci5zZXRFZGl0aW5nU2hhcGUobXlTaGFwZS5pZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSAob3Igc2hhcGUgaWQpIHRvIHNldCBhcyBlZGl0aW5nLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRFZGl0aW5nU2hhcGUoc2hhcGUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGU/LmlkID8/IG51bGw7XG4gICAgaWYgKGlkICE9PSB0aGlzLmdldEVkaXRpbmdTaGFwZUlkKCkpIHtcbiAgICAgIGlmIChpZCkge1xuICAgICAgICBjb25zdCBzaGFwZTIgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICAgICAgaWYgKHNoYXBlMiAmJiB0aGlzLmdldFNoYXBlVXRpbChzaGFwZTIpLmNhbkVkaXQoc2hhcGUyKSkge1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUN1cnJlbnRQYWdlU3RhdGUoeyBlZGl0aW5nU2hhcGVJZDogaWQgfSk7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX3VwZGF0ZUN1cnJlbnRQYWdlU3RhdGUoeyBlZGl0aW5nU2hhcGVJZDogbnVsbCB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ2V0SG92ZXJlZFNoYXBlSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLmhvdmVyZWRTaGFwZUlkO1xuICB9XG4gIGdldEhvdmVyZWRTaGFwZSgpIHtcbiAgICBjb25zdCBob3ZlcmVkU2hhcGVJZCA9IHRoaXMuZ2V0SG92ZXJlZFNoYXBlSWQoKTtcbiAgICByZXR1cm4gaG92ZXJlZFNoYXBlSWQgPyB0aGlzLmdldFNoYXBlKGhvdmVyZWRTaGFwZUlkKSA6IHZvaWQgMDtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBlZGl0b3IncyBjdXJyZW50IGhvdmVyZWQgc2hhcGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zZXRIb3ZlcmVkU2hhcGUobXlTaGFwZSlcbiAgICogZWRpdG9yLnNldEhvdmVyZWRTaGFwZShteVNoYXBlLmlkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZSAob3Igc2hhcGUgaWQpIHRvIHNldCBhcyBob3ZlcmVkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRIb3ZlcmVkU2hhcGUoc2hhcGUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGU/LmlkID8/IG51bGw7XG4gICAgaWYgKGlkID09PSB0aGlzLmdldEhvdmVyZWRTaGFwZUlkKCkpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB0aGlzLnVwZGF0ZUN1cnJlbnRQYWdlU3RhdGUoeyBob3ZlcmVkU2hhcGVJZDogaWQgfSwgeyBoaXN0b3J5OiBcImlnbm9yZVwiIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldEhpbnRpbmdTaGFwZUlkcygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50UGFnZVN0YXRlKCkuaGludGluZ1NoYXBlSWRzO1xuICB9XG4gIGdldEhpbnRpbmdTaGFwZSgpIHtcbiAgICBjb25zdCBoaW50aW5nU2hhcGVJZHMgPSB0aGlzLmdldEhpbnRpbmdTaGFwZUlkcygpO1xuICAgIHJldHVybiBjb21wYWN0KGhpbnRpbmdTaGFwZUlkcy5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlKGlkKSkpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGVkaXRvcidzIGN1cnJlbnQgaGludGluZyBzaGFwZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zZXRIaW50aW5nU2hhcGVzKFtteVNoYXBlXSlcbiAgICogZWRpdG9yLnNldEhpbnRpbmdTaGFwZXMoW215U2hhcGUuaWRdKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gc2V0IGFzIGhpbnRpbmcuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldEhpbnRpbmdTaGFwZXMoc2hhcGVzKSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHNoYXBlKSA9PiBzaGFwZS5pZCk7XG4gICAgdGhpcy51cGRhdGVDdXJyZW50UGFnZVN0YXRlKHsgaGludGluZ1NoYXBlSWRzOiBkZWR1cGUoaWRzKSB9LCB7IGhpc3Rvcnk6IFwiaWdub3JlXCIgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ2V0RXJhc2luZ1NoYXBlSWRzKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRQYWdlU3RhdGUoKS5lcmFzaW5nU2hhcGVJZHM7XG4gIH1cbiAgZ2V0RXJhc2luZ1NoYXBlcygpIHtcbiAgICBjb25zdCBlcmFzaW5nU2hhcGVJZHMgPSB0aGlzLmdldEVyYXNpbmdTaGFwZUlkcygpO1xuICAgIHJldHVybiBjb21wYWN0KGVyYXNpbmdTaGFwZUlkcy5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlKGlkKSkpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGVkaXRvcidzIGN1cnJlbnQgZXJhc2luZyBzaGFwZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zZXRFcmFzaW5nU2hhcGVzKFtteVNoYXBlXSlcbiAgICogZWRpdG9yLnNldEVyYXNpbmdTaGFwZXMoW215U2hhcGUuaWRdKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gc2V0IGFzIGhpbnRpbmcuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldEVyYXNpbmdTaGFwZXMoc2hhcGVzKSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHNoYXBlKSA9PiBzaGFwZS5pZCk7XG4gICAgaWRzLnNvcnQoKTtcbiAgICBjb25zdCBlcmFzaW5nU2hhcGVJZHMgPSB0aGlzLmdldEVyYXNpbmdTaGFwZUlkcygpO1xuICAgIHRoaXMuaGlzdG9yeS5pZ25vcmUoKCkgPT4ge1xuICAgICAgaWYgKGlkcy5sZW5ndGggPT09IGVyYXNpbmdTaGFwZUlkcy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoaWRzW2ldICE9PSBlcmFzaW5nU2hhcGVJZHNbaV0pIHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUN1cnJlbnRQYWdlU3RhdGUoeyBlcmFzaW5nU2hhcGVJZHM6IGlkcyB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ3VycmVudFBhZ2VTdGF0ZSh7IGVyYXNpbmdTaGFwZUlkczogaWRzIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8vIENyb3BwaW5nXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBjcm9wcGluZyBzaGFwZSdzIGlkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRDcm9wcGluZ1NoYXBlSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLmNyb3BwaW5nU2hhcGVJZDtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBjdXJyZW50IGNyb3BwaW5nIHNoYXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2V0Q3JvcHBpbmdTaGFwZShteVNoYXBlKVxuICAgKiBlZGl0b3Iuc2V0Q3JvcHBpbmdTaGFwZShteVNoYXBlLmlkKVxuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIChvciBzaGFwZSBpZCkgdG8gc2V0IGFzIGNyb3BwaW5nLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRDcm9wcGluZ1NoYXBlKHNoYXBlKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlPy5pZCA/PyBudWxsO1xuICAgIGlmIChpZCAhPT0gdGhpcy5nZXRDcm9wcGluZ1NoYXBlSWQoKSkge1xuICAgICAgaWYgKCFpZCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRQYWdlU3RhdGUoeyBjcm9wcGluZ1NoYXBlSWQ6IG51bGwgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzaGFwZTIgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICAgICAgY29uc3QgdXRpbCA9IHRoaXMuZ2V0U2hhcGVVdGlsKHNoYXBlMik7XG4gICAgICAgIGlmIChzaGFwZTIgJiYgdXRpbC5jYW5Dcm9wKHNoYXBlMikpIHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRQYWdlU3RhdGUoeyBjcm9wcGluZ1NoYXBlSWQ6IGlkIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldENhbWVyYUlkKCkge1xuICAgIHJldHVybiBDYW1lcmFSZWNvcmRUeXBlLmNyZWF0ZUlkKHRoaXMuZ2V0Q3VycmVudFBhZ2VJZCgpKTtcbiAgfVxuICBnZXRDYW1lcmEoKSB7XG4gICAgY29uc3QgYmFzZUNhbWVyYSA9IHRoaXMuc3RvcmUuZ2V0KHRoaXMuZ2V0Q2FtZXJhSWQoKSk7XG4gICAgaWYgKHRoaXMuX2lzTG9ja2VkT25Gb2xsb3dpbmdVc2VyLmdldCgpKSB7XG4gICAgICBjb25zdCBmb2xsb3dpbmdDYW1lcmEgPSB0aGlzLmdldENhbWVyYUZvckZvbGxvd2luZygpO1xuICAgICAgaWYgKGZvbGxvd2luZ0NhbWVyYSkge1xuICAgICAgICByZXR1cm4geyAuLi5iYXNlQ2FtZXJhLCAuLi5mb2xsb3dpbmdDYW1lcmEgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJhc2VDYW1lcmE7XG4gIH1cbiAgZ2V0Vmlld3BvcnRQYWdlQm91bmRzRm9yRm9sbG93aW5nKCkge1xuICAgIGNvbnN0IGZvbGxvd2luZ1VzZXJJZCA9IHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmZvbGxvd2luZ1VzZXJJZDtcbiAgICBpZiAoIWZvbGxvd2luZ1VzZXJJZClcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGxlYWRlclByZXNlbmNlID0gdGhpcy5nZXRDb2xsYWJvcmF0b3JzKCkuZmluZCgoYykgPT4gYy51c2VySWQgPT09IGZvbGxvd2luZ1VzZXJJZCk7XG4gICAgaWYgKCFsZWFkZXJQcmVzZW5jZSlcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHsgdzogbHcsIGg6IGxoIH0gPSBsZWFkZXJQcmVzZW5jZS5zY3JlZW5Cb3VuZHM7XG4gICAgY29uc3QgeyB4OiBseCwgeTogbHksIHo6IGx6IH0gPSBsZWFkZXJQcmVzZW5jZS5jYW1lcmE7XG4gICAgY29uc3QgdGhlaXJWaWV3cG9ydCA9IG5ldyBCb3goLWx4LCAtbHksIGx3IC8gbHosIGxoIC8gbHopO1xuICAgIGNvbnN0IG91clZpZXdwb3J0ID0gdGhpcy5nZXRWaWV3cG9ydFNjcmVlbkJvdW5kcygpLmNsb25lKCk7XG4gICAgY29uc3Qgb3VyQXNwZWN0UmF0aW8gPSBvdXJWaWV3cG9ydC53aWR0aCAvIG91clZpZXdwb3J0LmhlaWdodDtcbiAgICBvdXJWaWV3cG9ydC53aWR0aCA9IHRoZWlyVmlld3BvcnQud2lkdGg7XG4gICAgb3VyVmlld3BvcnQuaGVpZ2h0ID0gb3VyVmlld3BvcnQud2lkdGggLyBvdXJBc3BlY3RSYXRpbztcbiAgICBpZiAob3VyVmlld3BvcnQuaGVpZ2h0IDwgdGhlaXJWaWV3cG9ydC5oZWlnaHQpIHtcbiAgICAgIG91clZpZXdwb3J0LmhlaWdodCA9IHRoZWlyVmlld3BvcnQuaGVpZ2h0O1xuICAgICAgb3VyVmlld3BvcnQud2lkdGggPSBvdXJWaWV3cG9ydC5oZWlnaHQgKiBvdXJBc3BlY3RSYXRpbztcbiAgICB9XG4gICAgb3VyVmlld3BvcnQuY2VudGVyID0gdGhlaXJWaWV3cG9ydC5jZW50ZXI7XG4gICAgcmV0dXJuIG91clZpZXdwb3J0O1xuICB9XG4gIGdldENhbWVyYUZvckZvbGxvd2luZygpIHtcbiAgICBjb25zdCB2aWV3cG9ydCA9IHRoaXMuZ2V0Vmlld3BvcnRQYWdlQm91bmRzRm9yRm9sbG93aW5nKCk7XG4gICAgaWYgKCF2aWV3cG9ydClcbiAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICB4OiAtdmlld3BvcnQueCxcbiAgICAgIHk6IC12aWV3cG9ydC55LFxuICAgICAgejogdGhpcy5nZXRWaWV3cG9ydFNjcmVlbkJvdW5kcygpLncgLyB2aWV3cG9ydC53aWR0aFxuICAgIH07XG4gIH1cbiAgZ2V0Wm9vbUxldmVsKCkge1xuICAgIHJldHVybiB0aGlzLmdldENhbWVyYSgpLno7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY2FtZXJhJ3MgaW5pdGlhbCBvciByZXNldCB6b29tIGxldmVsLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0SW5pdGlhbFpvb20oKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpYyAqL1xuICBnZXRJbml0aWFsWm9vbSgpIHtcbiAgICBjb25zdCBjYW1lcmFPcHRpb25zID0gdGhpcy5nZXRDYW1lcmFPcHRpb25zKCk7XG4gICAgaWYgKCFjYW1lcmFPcHRpb25zLmNvbnN0cmFpbnRzKVxuICAgICAgcmV0dXJuIDE7XG4gICAgaWYgKGNhbWVyYU9wdGlvbnMuY29uc3RyYWludHMuaW5pdGlhbFpvb20gPT09IFwiZGVmYXVsdFwiKVxuICAgICAgcmV0dXJuIDE7XG4gICAgY29uc3QgeyB6eCwgenkgfSA9IGdldENhbWVyYUZpdFhGaXRZKHRoaXMsIGNhbWVyYU9wdGlvbnMpO1xuICAgIHN3aXRjaCAoY2FtZXJhT3B0aW9ucy5jb25zdHJhaW50cy5pbml0aWFsWm9vbSkge1xuICAgICAgY2FzZSBcImZpdC1taW5cIjoge1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoengsIHp5KTtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJmaXQtbWF4XCI6IHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHp4LCB6eSk7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LXhcIjoge1xuICAgICAgICByZXR1cm4geng7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LXlcIjoge1xuICAgICAgICByZXR1cm4genk7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LW1pbi0xMDBcIjoge1xuICAgICAgICByZXR1cm4gTWF0aC5taW4oMSwgTWF0aC5tYXgoengsIHp5KSk7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LW1heC0xMDBcIjoge1xuICAgICAgICByZXR1cm4gTWF0aC5taW4oMSwgTWF0aC5taW4oengsIHp5KSk7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LXgtMTAwXCI6IHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKDEsIHp4KTtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJmaXQteS0xMDBcIjoge1xuICAgICAgICByZXR1cm4gTWF0aC5taW4oMSwgenkpO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICB0aHJvdyBleGhhdXN0aXZlU3dpdGNoRXJyb3IoY2FtZXJhT3B0aW9ucy5jb25zdHJhaW50cy5pbml0aWFsWm9vbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGNhbWVyYSdzIGJhc2UgbGV2ZWwgZm9yIGNhbGN1bGF0aW5nIGFjdHVhbCB6b29tIGxldmVscyBiYXNlZCBvbiB0aGUgem9vbSBzdGVwcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldEJhc2Vab29tKClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwdWJsaWMgKi9cbiAgZ2V0QmFzZVpvb20oKSB7XG4gICAgY29uc3QgY2FtZXJhT3B0aW9ucyA9IHRoaXMuZ2V0Q2FtZXJhT3B0aW9ucygpO1xuICAgIGlmICghY2FtZXJhT3B0aW9ucy5jb25zdHJhaW50cylcbiAgICAgIHJldHVybiAxO1xuICAgIGlmIChjYW1lcmFPcHRpb25zLmNvbnN0cmFpbnRzLmJhc2Vab29tID09PSBcImRlZmF1bHRcIilcbiAgICAgIHJldHVybiAxO1xuICAgIGNvbnN0IHsgengsIHp5IH0gPSBnZXRDYW1lcmFGaXRYRml0WSh0aGlzLCBjYW1lcmFPcHRpb25zKTtcbiAgICBzd2l0Y2ggKGNhbWVyYU9wdGlvbnMuY29uc3RyYWludHMuYmFzZVpvb20pIHtcbiAgICAgIGNhc2UgXCJmaXQtbWluXCI6IHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHp4LCB6eSk7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LW1heFwiOiB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbih6eCwgenkpO1xuICAgICAgfVxuICAgICAgY2FzZSBcImZpdC14XCI6IHtcbiAgICAgICAgcmV0dXJuIHp4O1xuICAgICAgfVxuICAgICAgY2FzZSBcImZpdC15XCI6IHtcbiAgICAgICAgcmV0dXJuIHp5O1xuICAgICAgfVxuICAgICAgY2FzZSBcImZpdC1taW4tMTAwXCI6IHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKDEsIE1hdGgubWF4KHp4LCB6eSkpO1xuICAgICAgfVxuICAgICAgY2FzZSBcImZpdC1tYXgtMTAwXCI6IHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKDEsIE1hdGgubWluKHp4LCB6eSkpO1xuICAgICAgfVxuICAgICAgY2FzZSBcImZpdC14LTEwMFwiOiB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbigxLCB6eCk7XG4gICAgICB9XG4gICAgICBjYXNlIFwiZml0LXktMTAwXCI6IHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKDEsIHp5KTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGhyb3cgZXhoYXVzdGl2ZVN3aXRjaEVycm9yKGNhbWVyYU9wdGlvbnMuY29uc3RyYWludHMuYmFzZVpvb20pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBfY2FtZXJhT3B0aW9ucyA9IGF0b20oXCJjYW1lcmEgb3B0aW9uc1wiLCBERUZBVUxUX0NBTUVSQV9PUFRJT05TKTtcbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCBjYW1lcmEgb3B0aW9ucy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldENhbWVyYU9wdGlvbnMoKVxuICAgKiBgYGBcbiAgICpcbiAgICogIEBwdWJsaWMgKi9cbiAgZ2V0Q2FtZXJhT3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FtZXJhT3B0aW9ucy5nZXQoKTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBjYW1lcmEgb3B0aW9ucy4gQ2hhbmdpbmcgdGhlIG9wdGlvbnMgd29uJ3QgaW1tZWRpYXRlbHkgY2hhbmdlIHRoZSBjYW1lcmEgaXRzZWxmLCBzbyB5b3UgbWF5IHdhbnQgdG8gY2FsbCBgc2V0Q2FtZXJhYCBhZnRlciBjaGFuZ2luZyB0aGUgb3B0aW9ucy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNldENhbWVyYU9wdGlvbnMobXlDYW1lcmFPcHRpb25zKVxuICAgKiBlZGl0b3Iuc2V0Q2FtZXJhKGVkaXRvci5nZXRDYW1lcmEoKSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIGNhbWVyYSBvcHRpb25zIHRvIHNldC5cbiAgICpcbiAgICogQHB1YmxpYyAqL1xuICBzZXRDYW1lcmFPcHRpb25zKG9wdGlvbnMpIHtcbiAgICBjb25zdCBuZXh0ID0gc3RydWN0dXJlZENsb25lKHtcbiAgICAgIC4uLnRoaXMuX2NhbWVyYU9wdGlvbnMuX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKCksXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSk7XG4gICAgaWYgKG5leHQuem9vbVN0ZXBzPy5sZW5ndGggPCAxKVxuICAgICAgbmV4dC56b29tU3RlcHMgPSBbMV07XG4gICAgdGhpcy5fY2FtZXJhT3B0aW9ucy5zZXQobmV4dCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXRDb25zdHJhaW5lZENhbWVyYShwb2ludCwgb3B0cykge1xuICAgIGNvbnN0IGN1cnJlbnRDYW1lcmEgPSB0aGlzLmdldENhbWVyYSgpO1xuICAgIGxldCB7IHgsIHksIHogPSBjdXJyZW50Q2FtZXJhLnogfSA9IHBvaW50O1xuICAgIGlmICghb3B0cz8uZm9yY2UpIHtcbiAgICAgIGNvbnN0IGNhbWVyYU9wdGlvbnMgPSB0aGlzLmdldENhbWVyYU9wdGlvbnMoKTtcbiAgICAgIGNvbnN0IHpvb21NaW4gPSBjYW1lcmFPcHRpb25zLnpvb21TdGVwc1swXTtcbiAgICAgIGNvbnN0IHpvb21NYXggPSBsYXN0KGNhbWVyYU9wdGlvbnMuem9vbVN0ZXBzKTtcbiAgICAgIGNvbnN0IHZzYiA9IHRoaXMuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKTtcbiAgICAgIGlmIChjYW1lcmFPcHRpb25zLmNvbnN0cmFpbnRzKSB7XG4gICAgICAgIGNvbnN0IHsgY29uc3RyYWludHMgfSA9IGNhbWVyYU9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHB5ID0gTWF0aC5taW4oY29uc3RyYWludHMucGFkZGluZy55LCB2c2IudyAvIDIpO1xuICAgICAgICBjb25zdCBweCA9IE1hdGgubWluKGNvbnN0cmFpbnRzLnBhZGRpbmcueCwgdnNiLmggLyAyKTtcbiAgICAgICAgY29uc3QgYm91bmRzID0gQm94LkZyb20oY2FtZXJhT3B0aW9ucy5jb25zdHJhaW50cy5ib3VuZHMpO1xuICAgICAgICBjb25zdCB6eCA9ICh2c2IudyAtIHB4ICogMikgLyBib3VuZHMudztcbiAgICAgICAgY29uc3QgenkgPSAodnNiLmggLSBweSAqIDIpIC8gYm91bmRzLmg7XG4gICAgICAgIGNvbnN0IGJhc2Vab29tID0gdGhpcy5nZXRCYXNlWm9vbSgpO1xuICAgICAgICBjb25zdCBtYXhaID0gem9vbU1heCAqIGJhc2Vab29tO1xuICAgICAgICBjb25zdCBtaW5aID0gem9vbU1pbiAqIGJhc2Vab29tO1xuICAgICAgICBpZiAob3B0cz8ucmVzZXQpIHtcbiAgICAgICAgICB6ID0gdGhpcy5nZXRJbml0aWFsWm9vbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh6IDwgbWluWiB8fCB6ID4gbWF4Wikge1xuICAgICAgICAgIGNvbnN0IHsgeDogY3gsIHk6IGN5LCB6OiBjeiB9ID0gY3VycmVudENhbWVyYTtcbiAgICAgICAgICBjb25zdCBjeEEgPSAtY3ggKyB2c2IudyAvIGN6IC8gMjtcbiAgICAgICAgICBjb25zdCBjeUEgPSAtY3kgKyB2c2IuaCAvIGN6IC8gMjtcbiAgICAgICAgICB6ID0gY2xhbXAoeiwgbWluWiwgbWF4Wik7XG4gICAgICAgICAgY29uc3QgY3hCID0gLWN4ICsgdnNiLncgLyB6IC8gMjtcbiAgICAgICAgICBjb25zdCBjeUIgPSAtY3kgKyB2c2IuaCAvIHogLyAyO1xuICAgICAgICAgIHggPSBjeCArIGN4QiAtIGN4QTtcbiAgICAgICAgICB5ID0gY3kgKyBjeUIgLSBjeUE7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWluWCA9IHB4IC8geiAtIGJvdW5kcy54O1xuICAgICAgICBjb25zdCBtaW5ZID0gcHkgLyB6IC0gYm91bmRzLnk7XG4gICAgICAgIGNvbnN0IGZyZWVXID0gKHZzYi53IC0gcHggKiAyKSAvIHogLSBib3VuZHMudztcbiAgICAgICAgY29uc3QgZnJlZUggPSAodnNiLmggLSBweSAqIDIpIC8geiAtIGJvdW5kcy5oO1xuICAgICAgICBjb25zdCBvcmlnaW5YID0gbWluWCArIGZyZWVXICogY29uc3RyYWludHMub3JpZ2luLng7XG4gICAgICAgIGNvbnN0IG9yaWdpblkgPSBtaW5ZICsgZnJlZUggKiBjb25zdHJhaW50cy5vcmlnaW4ueTtcbiAgICAgICAgY29uc3QgYmVoYXZpb3JYID0gdHlwZW9mIGNvbnN0cmFpbnRzLmJlaGF2aW9yID09PSBcInN0cmluZ1wiID8gY29uc3RyYWludHMuYmVoYXZpb3IgOiBjb25zdHJhaW50cy5iZWhhdmlvci54O1xuICAgICAgICBjb25zdCBiZWhhdmlvclkgPSB0eXBlb2YgY29uc3RyYWludHMuYmVoYXZpb3IgPT09IFwic3RyaW5nXCIgPyBjb25zdHJhaW50cy5iZWhhdmlvciA6IGNvbnN0cmFpbnRzLmJlaGF2aW9yLnk7XG4gICAgICAgIGlmIChvcHRzPy5yZXNldCkge1xuICAgICAgICAgIHggPSBvcmlnaW5YO1xuICAgICAgICAgIHkgPSBvcmlnaW5ZO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN3aXRjaCAoYmVoYXZpb3JYKSB7XG4gICAgICAgICAgICBjYXNlIFwiZml4ZWRcIjoge1xuICAgICAgICAgICAgICB4ID0gb3JpZ2luWDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiY29udGFpblwiOiB7XG4gICAgICAgICAgICAgIGlmICh6IDwgengpXG4gICAgICAgICAgICAgICAgeCA9IG9yaWdpblg7XG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB4ID0gY2xhbXAoeCwgbWluWCArIGZyZWVXLCBtaW5YKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiaW5zaWRlXCI6IHtcbiAgICAgICAgICAgICAgaWYgKHogPCB6eClcbiAgICAgICAgICAgICAgICB4ID0gY2xhbXAoeCwgbWluWCwgKHZzYi53IC0gcHgpIC8geiAtIGJvdW5kcy53KTtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHggPSBjbGFtcCh4LCBtaW5YICsgZnJlZVcsIG1pblgpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJvdXRzaWRlXCI6IHtcbiAgICAgICAgICAgICAgeCA9IGNsYW1wKHgsIHB4IC8geiAtIGJvdW5kcy53LCAodnNiLncgLSBweCkgLyB6KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiZnJlZVwiOiB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICB0aHJvdyBleGhhdXN0aXZlU3dpdGNoRXJyb3IoYmVoYXZpb3JYKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc3dpdGNoIChiZWhhdmlvclkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJmaXhlZFwiOiB7XG4gICAgICAgICAgICAgIHkgPSBvcmlnaW5ZO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJjb250YWluXCI6IHtcbiAgICAgICAgICAgICAgaWYgKHogPCB6eSlcbiAgICAgICAgICAgICAgICB5ID0gb3JpZ2luWTtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHkgPSBjbGFtcCh5LCBtaW5ZICsgZnJlZUgsIG1pblkpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJpbnNpZGVcIjoge1xuICAgICAgICAgICAgICBpZiAoeiA8IHp5KVxuICAgICAgICAgICAgICAgIHkgPSBjbGFtcCh5LCBtaW5ZLCAodnNiLmggLSBweSkgLyB6IC0gYm91bmRzLmgpO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgeSA9IGNsYW1wKHksIG1pblkgKyBmcmVlSCwgbWluWSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcIm91dHNpZGVcIjoge1xuICAgICAgICAgICAgICB5ID0gY2xhbXAoeSwgcHkgLyB6IC0gYm91bmRzLmgsICh2c2IuaCAtIHB5KSAvIHopO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJmcmVlXCI6IHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgIHRocm93IGV4aGF1c3RpdmVTd2l0Y2hFcnJvcihiZWhhdmlvclkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHogPiB6b29tTWF4IHx8IHogPCB6b29tTWluKSB7XG4gICAgICAgICAgY29uc3QgeyB4OiBjeCwgeTogY3ksIHo6IGN6IH0gPSBjdXJyZW50Q2FtZXJhO1xuICAgICAgICAgIHogPSBjbGFtcCh6LCB6b29tTWluLCB6b29tTWF4KTtcbiAgICAgICAgICB4ID0gY3ggKyAoLWN4ICsgdnNiLncgLyB6IC8gMikgLSAoLWN4ICsgdnNiLncgLyBjeiAvIDIpO1xuICAgICAgICAgIHkgPSBjeSArICgtY3kgKyB2c2IuaCAvIHogLyAyKSAtICgtY3kgKyB2c2IuaCAvIGN6IC8gMik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgeCwgeSwgeiB9O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3NldENhbWVyYShwb2ludCwgb3B0cykge1xuICAgIGNvbnN0IGN1cnJlbnRDYW1lcmEgPSB0aGlzLmdldENhbWVyYSgpO1xuICAgIGNvbnN0IHsgeCwgeSwgeiB9ID0gdGhpcy5nZXRDb25zdHJhaW5lZENhbWVyYShwb2ludCwgb3B0cyk7XG4gICAgaWYgKGN1cnJlbnRDYW1lcmEueCA9PT0geCAmJiBjdXJyZW50Q2FtZXJhLnkgPT09IHkgJiYgY3VycmVudENhbWVyYS56ID09PSB6KSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdGhpcy5iYXRjaCgoKSA9PiB7XG4gICAgICBjb25zdCBjYW1lcmEgPSB7IC4uLmN1cnJlbnRDYW1lcmEsIHgsIHksIHogfTtcbiAgICAgIHRoaXMuaGlzdG9yeS5pZ25vcmUoKCkgPT4ge1xuICAgICAgICB0aGlzLnN0b3JlLnB1dChbY2FtZXJhXSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHsgY3VycmVudFNjcmVlblBvaW50LCBjdXJyZW50UGFnZVBvaW50IH0gPSB0aGlzLmlucHV0cztcbiAgICAgIGNvbnN0IHsgc2NyZWVuQm91bmRzIH0gPSB0aGlzLnN0b3JlLnVuc2FmZUdldFdpdGhvdXRDYXB0dXJlKFRMSU5TVEFOQ0VfSUQpO1xuICAgICAgaWYgKGN1cnJlbnRTY3JlZW5Qb2ludC54IC8geiAtIHggIT09IGN1cnJlbnRQYWdlUG9pbnQueCB8fCBjdXJyZW50U2NyZWVuUG9pbnQueSAvIHogLSB5ICE9PSBjdXJyZW50UGFnZVBvaW50LnkpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogXCJwb2ludGVyXCIsXG4gICAgICAgICAgdGFyZ2V0OiBcImNhbnZhc1wiLFxuICAgICAgICAgIG5hbWU6IFwicG9pbnRlcl9tb3ZlXCIsXG4gICAgICAgICAgLy8gd2VpcmQgYnV0IHRydWU6IHdlIG5lZWQgdG8gcHV0IHRoZSBzY3JlZW4gcG9pbnQgYmFjayBpbnRvIGNsaWVudCBzcGFjZVxuICAgICAgICAgIHBvaW50OiBWZWMuQWRkWFkoY3VycmVudFNjcmVlblBvaW50LCBzY3JlZW5Cb3VuZHMueCwgc2NyZWVuQm91bmRzLnkpLFxuICAgICAgICAgIHBvaW50ZXJJZDogSU5URVJOQUxfUE9JTlRFUl9JRFMuQ0FNRVJBX01PVkUsXG4gICAgICAgICAgY3RybEtleTogdGhpcy5pbnB1dHMuY3RybEtleSxcbiAgICAgICAgICBhbHRLZXk6IHRoaXMuaW5wdXRzLmFsdEtleSxcbiAgICAgICAgICBzaGlmdEtleTogdGhpcy5pbnB1dHMuc2hpZnRLZXksXG4gICAgICAgICAgYnV0dG9uOiAwLFxuICAgICAgICAgIGlzUGVuOiB0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5pc1Blbk1vZGUgPz8gZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG9wdHM/LmltbWVkaWF0ZSkge1xuICAgICAgICAgIHRoaXMuX2ZsdXNoRXZlbnRGb3JUaWNrKGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fdGlja0NhbWVyYVN0YXRlKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgY3VycmVudCBjYW1lcmEuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zZXRDYW1lcmEoeyB4OiAwLCB5OiAwfSlcbiAgICogZWRpdG9yLnNldENhbWVyYSh7IHg6IDAsIHk6IDAsIHo6IDEuNX0pXG4gICAqIGVkaXRvci5zZXRDYW1lcmEoeyB4OiAwLCB5OiAwLCB6OiAxLjV9LCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMTAwMCwgZWFzaW5nOiAodCkgPT4gdCAqIHQgfSB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBvaW50IC0gVGhlIG5ldyBjYW1lcmEgcG9zaXRpb24uXG4gICAqIEBwYXJhbSBvcHRzIC0gVGhlIGNhbWVyYSBtb3ZlIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldENhbWVyYShwb2ludCwgb3B0cykge1xuICAgIGNvbnN0IHsgaXNMb2NrZWQgfSA9IHRoaXMuX2NhbWVyYU9wdGlvbnMuX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKCk7XG4gICAgaWYgKGlzTG9ja2VkICYmICFvcHRzPy5mb3JjZSlcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIHRoaXMuc3RvcENhbWVyYUFuaW1hdGlvbigpO1xuICAgIGlmICh0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5mb2xsb3dpbmdVc2VySWQpIHtcbiAgICAgIHRoaXMuc3RvcEZvbGxvd2luZ1VzZXIoKTtcbiAgICB9XG4gICAgY29uc3QgX3BvaW50ID0gVmVjLkNhc3QocG9pbnQpO1xuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKF9wb2ludC54KSlcbiAgICAgIF9wb2ludC54ID0gMDtcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShfcG9pbnQueSkpXG4gICAgICBfcG9pbnQueSA9IDA7XG4gICAgaWYgKF9wb2ludC56ID09PSB2b2lkIDAgfHwgIU51bWJlci5pc0Zpbml0ZShfcG9pbnQueikpXG4gICAgICBwb2ludC56ID0gdGhpcy5nZXRab29tTGV2ZWwoKTtcbiAgICBjb25zdCBjYW1lcmEgPSB0aGlzLmdldENvbnN0cmFpbmVkQ2FtZXJhKF9wb2ludCwgb3B0cyk7XG4gICAgaWYgKG9wdHM/LmFuaW1hdGlvbikge1xuICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLmdldFZpZXdwb3J0U2NyZWVuQm91bmRzKCk7XG4gICAgICB0aGlzLl9hbmltYXRlVG9WaWV3cG9ydChcbiAgICAgICAgbmV3IEJveCgtY2FtZXJhLngsIC1jYW1lcmEueSwgd2lkdGggLyBjYW1lcmEueiwgaGVpZ2h0IC8gY2FtZXJhLnopLFxuICAgICAgICBvcHRzXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zZXRDYW1lcmEoY2FtZXJhLCB7XG4gICAgICAgIC4uLm9wdHMsXG4gICAgICAgIC8vIHdlIGFscmVhZHkgZGlkIHRoZSBjb25zdHJhaW5pbmcsIHNvIHdlIGRvbid0IG5lZWQgdG8gZG8gaXQgYWdhaW5cbiAgICAgICAgZm9yY2U6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ2VudGVyIHRoZSBjYW1lcmEgb24gYSBwb2ludCAoaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZSkuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5jZW50ZXJPblBvaW50KHsgeDogMTAwLCB5OiAxMDAgfSlcbiAgICogZWRpdG9yLmNlbnRlck9uUG9pbnQoeyB4OiAxMDAsIHk6IDEwMCB9LCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMjAwIH0gfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwb2ludCAtIFRoZSBwb2ludCBpbiB0aGUgY3VycmVudCBwYWdlIHNwYWNlIHRvIGNlbnRlciBvbi5cbiAgICogQHBhcmFtIGFuaW1hdGlvbiAtIFRoZSBjYW1lcmEgbW92ZSBvcHRpb25zLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjZW50ZXJPblBvaW50KHBvaW50LCBvcHRzKSB7XG4gICAgaWYgKHRoaXMuZ2V0Q2FtZXJhT3B0aW9ucygpLmlzTG9ja2VkKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgeyB3aWR0aDogcHcsIGhlaWdodDogcGggfSA9IHRoaXMuZ2V0Vmlld3BvcnRQYWdlQm91bmRzKCk7XG4gICAgdGhpcy5zZXRDYW1lcmEobmV3IFZlYygtKHBvaW50LnggLSBwdyAvIDIpLCAtKHBvaW50LnkgLSBwaCAvIDIpLCB0aGlzLmdldENhbWVyYSgpLnopLCBvcHRzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogWm9vbSB0aGUgY2FtZXJhIHRvIGZpdCB0aGUgY3VycmVudCBwYWdlJ3MgY29udGVudCBpbiB0aGUgdmlld3BvcnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci56b29tVG9GaXQoKVxuICAgKiBlZGl0b3Iuem9vbVRvRml0KHsgYW5pbWF0aW9uOiB7IGR1cmF0aW9uOiAyMDAgfSB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIG9wdHMgLSBUaGUgY2FtZXJhIG1vdmUgb3B0aW9ucy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgem9vbVRvRml0KG9wdHMpIHtcbiAgICBjb25zdCBpZHMgPSBbLi4udGhpcy5nZXRDdXJyZW50UGFnZVNoYXBlSWRzKCldO1xuICAgIGlmIChpZHMubGVuZ3RoIDw9IDApXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBjb25zdCBwYWdlQm91bmRzID0gQm94LkNvbW1vbihjb21wYWN0KGlkcy5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlUGFnZUJvdW5kcyhpZCkpKSk7XG4gICAgdGhpcy56b29tVG9Cb3VuZHMocGFnZUJvdW5kcywgb3B0cyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgem9vbSBiYWNrIHRvIDEwMCUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5yZXNldFpvb20oKVxuICAgKiBlZGl0b3IucmVzZXRab29tKGVkaXRvci5nZXRWaWV3cG9ydFNjcmVlbkNlbnRlcigpLCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMjAwIH0gfSlcbiAgICogZWRpdG9yLnJlc2V0Wm9vbShlZGl0b3IuZ2V0Vmlld3BvcnRTY3JlZW5DZW50ZXIoKSwgeyBhbmltYXRpb246IHsgZHVyYXRpb246IDIwMCB9IH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcG9pbnQgLSBUaGUgc2NyZWVuIHBvaW50IHRvIHpvb20gb3V0IG9uLiBEZWZhdWx0cyB0byB0aGUgdmlld3BvcnQgc2NyZWVuIGNlbnRlci5cbiAgICogQHBhcmFtIG9wdHMgLSBUaGUgY2FtZXJhIG1vdmUgb3B0aW9ucy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVzZXRab29tKHBvaW50ID0gdGhpcy5nZXRWaWV3cG9ydFNjcmVlbkNlbnRlcigpLCBvcHRzKSB7XG4gICAgY29uc3QgeyBpc0xvY2tlZCwgY29uc3RyYWludHMgfSA9IHRoaXMuZ2V0Q2FtZXJhT3B0aW9ucygpO1xuICAgIGlmIChpc0xvY2tlZClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGN1cnJlbnRDYW1lcmEgPSB0aGlzLmdldENhbWVyYSgpO1xuICAgIGNvbnN0IHsgeDogY3gsIHk6IGN5LCB6OiBjeiB9ID0gY3VycmVudENhbWVyYTtcbiAgICBjb25zdCB7IHgsIHkgfSA9IHBvaW50O1xuICAgIGxldCB6ID0gMTtcbiAgICBpZiAoY29uc3RyYWludHMpIHtcbiAgICAgIGNvbnN0IGluaXRpYWxab29tID0gdGhpcy5nZXRJbml0aWFsWm9vbSgpO1xuICAgICAgaWYgKGN6ICE9PSBpbml0aWFsWm9vbSkge1xuICAgICAgICB6ID0gaW5pdGlhbFpvb207XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuc2V0Q2FtZXJhKFxuICAgICAgbmV3IFZlYyhjeCArICh4IC8geiAtIHgpIC0gKHggLyBjeiAtIHgpLCBjeSArICh5IC8geiAtIHkpIC0gKHkgLyBjeiAtIHkpLCB6KSxcbiAgICAgIG9wdHNcbiAgICApO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBab29tIHRoZSBjYW1lcmEgaW4uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci56b29tSW4oKVxuICAgKiBlZGl0b3Iuem9vbUluKGVkaXRvci5nZXRWaWV3cG9ydFNjcmVlbkNlbnRlcigpLCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMjAwIH0gfSlcbiAgICogZWRpdG9yLnpvb21JbihlZGl0b3IuaW5wdXRzLmN1cnJlbnRTY3JlZW5Qb2ludCwgeyBhbmltYXRpb246IHsgZHVyYXRpb246IDIwMCB9IH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcG9pbnQgLSBUaGUgc2NyZWVuIHBvaW50IHRvIHpvb20gaW4gb24uIERlZmF1bHRzIHRvIHRoZSBzY3JlZW4gY2VudGVyXG4gICAqIEBwYXJhbSBvcHRzIC0gVGhlIGNhbWVyYSBtb3ZlIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHpvb21Jbihwb2ludCA9IHRoaXMuZ2V0Vmlld3BvcnRTY3JlZW5DZW50ZXIoKSwgb3B0cykge1xuICAgIGlmICh0aGlzLmdldENhbWVyYU9wdGlvbnMoKS5pc0xvY2tlZClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHsgeDogY3gsIHk6IGN5LCB6OiBjeiB9ID0gdGhpcy5nZXRDYW1lcmEoKTtcbiAgICBjb25zdCB7IHpvb21TdGVwcyB9ID0gdGhpcy5nZXRDYW1lcmFPcHRpb25zKCk7XG4gICAgaWYgKHpvb21TdGVwcyAhPT0gbnVsbCAmJiB6b29tU3RlcHMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgYmFzZVpvb20gPSB0aGlzLmdldEJhc2Vab29tKCk7XG4gICAgICBsZXQgem9vbSA9IGxhc3Qoem9vbVN0ZXBzKSAqIGJhc2Vab29tO1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB6b29tU3RlcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgejEgPSB6b29tU3RlcHNbaSAtIDFdICogYmFzZVpvb207XG4gICAgICAgIGNvbnN0IHoyID0gem9vbVN0ZXBzW2ldICogYmFzZVpvb207XG4gICAgICAgIGlmICh6MiAtIGN6IDw9ICh6MiAtIHoxKSAvIDIpXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIHpvb20gPSB6MjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICB0aGlzLnNldENhbWVyYShcbiAgICAgICAgbmV3IFZlYyhcbiAgICAgICAgICBjeCArIChwb2ludC54IC8gem9vbSAtIHBvaW50LngpIC0gKHBvaW50LnggLyBjeiAtIHBvaW50LngpLFxuICAgICAgICAgIGN5ICsgKHBvaW50LnkgLyB6b29tIC0gcG9pbnQueSkgLSAocG9pbnQueSAvIGN6IC0gcG9pbnQueSksXG4gICAgICAgICAgem9vbVxuICAgICAgICApLFxuICAgICAgICBvcHRzXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogWm9vbSB0aGUgY2FtZXJhIG91dC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnpvb21PdXQoKVxuICAgKiBlZGl0b3Iuem9vbU91dChlZGl0b3IuZ2V0Vmlld3BvcnRTY3JlZW5DZW50ZXIoKSwgeyBhbmltYXRpb246IHsgZHVyYXRpb246IDEyMCB9IH0pXG4gICAqIGVkaXRvci56b29tT3V0KGVkaXRvci5pbnB1dHMuY3VycmVudFNjcmVlblBvaW50LCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMTIwIH0gfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwb2ludCAtIFRoZSBwb2ludCB0byB6b29tIG91dCBvbi4gRGVmYXVsdHMgdG8gdGhlIHZpZXdwb3J0IHNjcmVlbiBjZW50ZXIuXG4gICAqIEBwYXJhbSBvcHRzIC0gVGhlIGNhbWVyYSBtb3ZlIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHpvb21PdXQocG9pbnQgPSB0aGlzLmdldFZpZXdwb3J0U2NyZWVuQ2VudGVyKCksIG9wdHMpIHtcbiAgICBpZiAodGhpcy5nZXRDYW1lcmFPcHRpb25zKCkuaXNMb2NrZWQpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBjb25zdCB7IHpvb21TdGVwcyB9ID0gdGhpcy5nZXRDYW1lcmFPcHRpb25zKCk7XG4gICAgaWYgKHpvb21TdGVwcyAhPT0gbnVsbCAmJiB6b29tU3RlcHMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgYmFzZVpvb20gPSB0aGlzLmdldEJhc2Vab29tKCk7XG4gICAgICBjb25zdCB7IHg6IGN4LCB5OiBjeSwgejogY3ogfSA9IHRoaXMuZ2V0Q2FtZXJhKCk7XG4gICAgICBsZXQgem9vbSA9IHpvb21TdGVwc1swXSAqIGJhc2Vab29tO1xuICAgICAgZm9yIChsZXQgaSA9IHpvb21TdGVwcy5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgICAgIGNvbnN0IHoxID0gem9vbVN0ZXBzW2kgLSAxXSAqIGJhc2Vab29tO1xuICAgICAgICBjb25zdCB6MiA9IHpvb21TdGVwc1tpXSAqIGJhc2Vab29tO1xuICAgICAgICBpZiAoejIgLSBjeiA+PSAoejIgLSB6MSkgLyAyKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB6b29tID0gejE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRDYW1lcmEoXG4gICAgICAgIG5ldyBWZWMoXG4gICAgICAgICAgY3ggKyAocG9pbnQueCAvIHpvb20gLSBwb2ludC54KSAtIChwb2ludC54IC8gY3ogLSBwb2ludC54KSxcbiAgICAgICAgICBjeSArIChwb2ludC55IC8gem9vbSAtIHBvaW50LnkpIC0gKHBvaW50LnkgLyBjeiAtIHBvaW50LnkpLFxuICAgICAgICAgIHpvb21cbiAgICAgICAgKSxcbiAgICAgICAgb3B0c1xuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFpvb20gdGhlIGNhbWVyYSB0byBmaXQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIGluIHRoZSB2aWV3cG9ydC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnpvb21Ub1NlbGVjdGlvbigpXG4gICAqIGVkaXRvci56b29tVG9TZWxlY3Rpb24oeyBhbmltYXRpb246IHsgZHVyYXRpb246IDIwMCB9IH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gYW5pbWF0aW9uIC0gVGhlIGNhbWVyYSBtb3ZlIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHpvb21Ub1NlbGVjdGlvbihvcHRzKSB7XG4gICAgaWYgKHRoaXMuZ2V0Q2FtZXJhT3B0aW9ucygpLmlzTG9ja2VkKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgY29uc3Qgc2VsZWN0aW9uUGFnZUJvdW5kcyA9IHRoaXMuZ2V0U2VsZWN0aW9uUGFnZUJvdW5kcygpO1xuICAgIGlmIChzZWxlY3Rpb25QYWdlQm91bmRzKSB7XG4gICAgICB0aGlzLnpvb21Ub0JvdW5kcyhzZWxlY3Rpb25QYWdlQm91bmRzLCB7XG4gICAgICAgIHRhcmdldFpvb206IE1hdGgubWF4KDEsIHRoaXMuZ2V0Wm9vbUxldmVsKCkpLFxuICAgICAgICAuLi5vcHRzXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFpvb20gdGhlIGNhbWVyYSB0byBmaXQgYSBib3VuZGluZyBib3ggKGluIHRoZSBjdXJyZW50IHBhZ2Ugc3BhY2UpLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuem9vbVRvQm91bmRzKG15Qm91bmRzKVxuICAgKiBlZGl0b3Iuem9vbVRvQm91bmRzKG15Qm91bmRzLCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMjAwIH0gfSlcbiAgICogZWRpdG9yLnpvb21Ub0JvdW5kcyhteUJvdW5kcywgeyBhbmltYXRpb246IHsgZHVyYXRpb246IDIwMCB9LCBpbnNldDogMCwgdGFyZ2V0Wm9vbTogMSB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGJvdW5kcyAtIFRoZSBib3VuZGluZyBib3guXG4gICAqIEBwYXJhbSBvcHRzIC0gVGhlIGNhbWVyYSBtb3ZlIG9wdGlvbnMsIHRhcmdldCB6b29tLCBvciBjdXN0b20gaW5zZXQgYW1vdW50LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICB6b29tVG9Cb3VuZHMoYm91bmRzLCBvcHRzKSB7XG4gICAgY29uc3QgY2FtZXJhT3B0aW9ucyA9IHRoaXMuX2NhbWVyYU9wdGlvbnMuX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKCk7XG4gICAgaWYgKGNhbWVyYU9wdGlvbnMuaXNMb2NrZWQpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBjb25zdCB2aWV3cG9ydFNjcmVlbkJvdW5kcyA9IHRoaXMuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKTtcbiAgICBjb25zdCBpbnNldCA9IG9wdHM/Lmluc2V0ID8/IE1hdGgubWluKFpPT01fVE9fRklUX1BBRERJTkcsIHZpZXdwb3J0U2NyZWVuQm91bmRzLndpZHRoICogMC4yOCk7XG4gICAgY29uc3QgYmFzZVpvb20gPSB0aGlzLmdldEJhc2Vab29tKCk7XG4gICAgY29uc3Qgem9vbU1pbiA9IGNhbWVyYU9wdGlvbnMuem9vbVN0ZXBzWzBdO1xuICAgIGNvbnN0IHpvb21NYXggPSBsYXN0KGNhbWVyYU9wdGlvbnMuem9vbVN0ZXBzKTtcbiAgICBsZXQgem9vbSA9IGNsYW1wKFxuICAgICAgTWF0aC5taW4oXG4gICAgICAgICh2aWV3cG9ydFNjcmVlbkJvdW5kcy53aWR0aCAtIGluc2V0KSAvIGJvdW5kcy53LFxuICAgICAgICAodmlld3BvcnRTY3JlZW5Cb3VuZHMuaGVpZ2h0IC0gaW5zZXQpIC8gYm91bmRzLmhcbiAgICAgICksXG4gICAgICB6b29tTWluICogYmFzZVpvb20sXG4gICAgICB6b29tTWF4ICogYmFzZVpvb21cbiAgICApO1xuICAgIGlmIChvcHRzPy50YXJnZXRab29tICE9PSB2b2lkIDApIHtcbiAgICAgIHpvb20gPSBNYXRoLm1pbihvcHRzLnRhcmdldFpvb20sIHpvb20pO1xuICAgIH1cbiAgICB0aGlzLnNldENhbWVyYShcbiAgICAgIG5ldyBWZWMoXG4gICAgICAgIC1ib3VuZHMueCArICh2aWV3cG9ydFNjcmVlbkJvdW5kcy53aWR0aCAtIGJvdW5kcy53ICogem9vbSkgLyAyIC8gem9vbSxcbiAgICAgICAgLWJvdW5kcy55ICsgKHZpZXdwb3J0U2NyZWVuQm91bmRzLmhlaWdodCAtIGJvdW5kcy5oICogem9vbSkgLyAyIC8gem9vbSxcbiAgICAgICAgem9vbVxuICAgICAgKSxcbiAgICAgIG9wdHNcbiAgICApO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTdG9wIHRoZSBjdXJyZW50IGNhbWVyYSBhbmltYXRpb24sIGlmIGFueS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnN0b3BDYW1lcmFBbmltYXRpb24oKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc3RvcENhbWVyYUFuaW1hdGlvbigpIHtcbiAgICB0aGlzLmVtaXQoXCJzdG9wLWNhbWVyYS1hbmltYXRpb25cIik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfdmlld3BvcnRBbmltYXRpb24gPSBudWxsO1xuICAvKiogQGludGVybmFsICovXG4gIF9hbmltYXRlVmlld3BvcnQobXMpIHtcbiAgICBpZiAoIXRoaXMuX3ZpZXdwb3J0QW5pbWF0aW9uKVxuICAgICAgcmV0dXJuO1xuICAgIHRoaXMuX3ZpZXdwb3J0QW5pbWF0aW9uLmVsYXBzZWQgKz0gbXM7XG4gICAgY29uc3QgeyBlbGFwc2VkLCBlYXNpbmcsIGR1cmF0aW9uLCBzdGFydCwgZW5kIH0gPSB0aGlzLl92aWV3cG9ydEFuaW1hdGlvbjtcbiAgICBpZiAoZWxhcHNlZCA+IGR1cmF0aW9uKSB7XG4gICAgICB0aGlzLm9mZihcInRpY2tcIiwgdGhpcy5fYW5pbWF0ZVZpZXdwb3J0KTtcbiAgICAgIHRoaXMuX3ZpZXdwb3J0QW5pbWF0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMuX3NldENhbWVyYShuZXcgVmVjKC1lbmQueCwgLWVuZC55LCB0aGlzLmdldFZpZXdwb3J0U2NyZWVuQm91bmRzKCkud2lkdGggLyBlbmQud2lkdGgpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcmVtYWluaW5nID0gZHVyYXRpb24gLSBlbGFwc2VkO1xuICAgIGNvbnN0IHQgPSBlYXNpbmcoMSAtIHJlbWFpbmluZyAvIGR1cmF0aW9uKTtcbiAgICBjb25zdCBsZWZ0ID0gc3RhcnQubWluWCArIChlbmQubWluWCAtIHN0YXJ0Lm1pblgpICogdDtcbiAgICBjb25zdCB0b3AgPSBzdGFydC5taW5ZICsgKGVuZC5taW5ZIC0gc3RhcnQubWluWSkgKiB0O1xuICAgIGNvbnN0IHJpZ2h0ID0gc3RhcnQubWF4WCArIChlbmQubWF4WCAtIHN0YXJ0Lm1heFgpICogdDtcbiAgICB0aGlzLl9zZXRDYW1lcmEobmV3IFZlYygtbGVmdCwgLXRvcCwgdGhpcy5nZXRWaWV3cG9ydFNjcmVlbkJvdW5kcygpLndpZHRoIC8gKHJpZ2h0IC0gbGVmdCkpLCB7XG4gICAgICBmb3JjZTogdHJ1ZVxuICAgIH0pO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2FuaW1hdGVUb1ZpZXdwb3J0KHRhcmdldFZpZXdwb3J0UGFnZSwgb3B0cyA9IHsgYW5pbWF0aW9uOiBERUZBVUxUX0FOSU1BVElPTl9PUFRJT05TIH0pIHtcbiAgICBjb25zdCB7IGFuaW1hdGlvbiwgLi4ucmVzdCB9ID0gb3B0cztcbiAgICBpZiAoIWFuaW1hdGlvbilcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCB7IGR1cmF0aW9uID0gMCwgZWFzaW5nID0gRUFTSU5HUy5lYXNlSW5PdXRDdWJpYyB9ID0gYW5pbWF0aW9uO1xuICAgIGNvbnN0IGFuaW1hdGlvblNwZWVkID0gdGhpcy51c2VyLmdldEFuaW1hdGlvblNwZWVkKCk7XG4gICAgY29uc3Qgdmlld3BvcnRQYWdlQm91bmRzID0gdGhpcy5nZXRWaWV3cG9ydFBhZ2VCb3VuZHMoKTtcbiAgICB0aGlzLnN0b3BDYW1lcmFBbmltYXRpb24oKTtcbiAgICBpZiAodGhpcy5nZXRJbnN0YW5jZVN0YXRlKCkuZm9sbG93aW5nVXNlcklkKSB7XG4gICAgICB0aGlzLnN0b3BGb2xsb3dpbmdVc2VyKCk7XG4gICAgfVxuICAgIGlmIChkdXJhdGlvbiA9PT0gMCB8fCBhbmltYXRpb25TcGVlZCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3NldENhbWVyYShcbiAgICAgICAgbmV3IFZlYyhcbiAgICAgICAgICAtdGFyZ2V0Vmlld3BvcnRQYWdlLngsXG4gICAgICAgICAgLXRhcmdldFZpZXdwb3J0UGFnZS55LFxuICAgICAgICAgIHRoaXMuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKS53aWR0aCAvIHRhcmdldFZpZXdwb3J0UGFnZS53aWR0aFxuICAgICAgICApLFxuICAgICAgICB7IC4uLnJlc3QgfVxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5fdmlld3BvcnRBbmltYXRpb24gPSB7XG4gICAgICBlbGFwc2VkOiAwLFxuICAgICAgZHVyYXRpb246IGR1cmF0aW9uIC8gYW5pbWF0aW9uU3BlZWQsXG4gICAgICBlYXNpbmcsXG4gICAgICBzdGFydDogdmlld3BvcnRQYWdlQm91bmRzLmNsb25lKCksXG4gICAgICBlbmQ6IHRhcmdldFZpZXdwb3J0UGFnZS5jbG9uZSgpXG4gICAgfTtcbiAgICB0aGlzLm9uY2UoXCJzdG9wLWNhbWVyYS1hbmltYXRpb25cIiwgKCkgPT4ge1xuICAgICAgdGhpcy5vZmYoXCJ0aWNrXCIsIHRoaXMuX2FuaW1hdGVWaWV3cG9ydCk7XG4gICAgICB0aGlzLl92aWV3cG9ydEFuaW1hdGlvbiA9IG51bGw7XG4gICAgfSk7XG4gICAgdGhpcy5vbihcInRpY2tcIiwgdGhpcy5fYW5pbWF0ZVZpZXdwb3J0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogU2xpZGUgdGhlIGNhbWVyYSBpbiBhIGNlcnRhaW4gZGlyZWN0aW9uLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2xpZGVDYW1lcmEoeyBzcGVlZDogMSwgZGlyZWN0aW9uOiB7IHg6IDEsIHk6IDAgfSwgZnJpY3Rpb246IDAuMSB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIG9wdHMgLSBPcHRpb25zIGZvciB0aGUgc2xpZGVcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2xpZGVDYW1lcmEob3B0cyA9IHt9KSB7XG4gICAgaWYgKHRoaXMuZ2V0Q2FtZXJhT3B0aW9ucygpLmlzTG9ja2VkKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgYW5pbWF0aW9uU3BlZWQgPSB0aGlzLnVzZXIuZ2V0QW5pbWF0aW9uU3BlZWQoKTtcbiAgICBpZiAoYW5pbWF0aW9uU3BlZWQgPT09IDApXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB0aGlzLnN0b3BDYW1lcmFBbmltYXRpb24oKTtcbiAgICBjb25zdCB7XG4gICAgICBzcGVlZCxcbiAgICAgIGZyaWN0aW9uID0gdGhpcy5vcHRpb25zLmNhbWVyYVNsaWRlRnJpY3Rpb24sXG4gICAgICBkaXJlY3Rpb24sXG4gICAgICBzcGVlZFRocmVzaG9sZCA9IDAuMDFcbiAgICB9ID0gb3B0cztcbiAgICBsZXQgY3VycmVudFNwZWVkID0gTWF0aC5taW4oc3BlZWQsIDEpO1xuICAgIGNvbnN0IGNhbmNlbCA9ICgpID0+IHtcbiAgICAgIHRoaXMub2ZmKFwidGlja1wiLCBtb3ZlQ2FtZXJhKTtcbiAgICAgIHRoaXMub2ZmKFwic3RvcC1jYW1lcmEtYW5pbWF0aW9uXCIsIGNhbmNlbCk7XG4gICAgfTtcbiAgICB0aGlzLm9uY2UoXCJzdG9wLWNhbWVyYS1hbmltYXRpb25cIiwgY2FuY2VsKTtcbiAgICBjb25zdCBtb3ZlQ2FtZXJhID0gKGVsYXBzZWQpID0+IHtcbiAgICAgIGNvbnN0IHsgeDogY3gsIHk6IGN5LCB6OiBjeiB9ID0gdGhpcy5nZXRDYW1lcmEoKTtcbiAgICAgIGNvbnN0IG1vdmVtZW50VmVjID0gVmVjLk11bChkaXJlY3Rpb24sIGN1cnJlbnRTcGVlZCAqIGVsYXBzZWQgLyBjeik7XG4gICAgICBjdXJyZW50U3BlZWQgKj0gMSAtIGZyaWN0aW9uO1xuICAgICAgaWYgKGN1cnJlbnRTcGVlZCA8IHNwZWVkVGhyZXNob2xkKSB7XG4gICAgICAgIGNhbmNlbCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc2V0Q2FtZXJhKG5ldyBWZWMoY3ggKyBtb3ZlbWVudFZlYy54LCBjeSArIG1vdmVtZW50VmVjLnksIGN6KSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLm9uKFwidGlja1wiLCBtb3ZlQ2FtZXJhKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQW5pbWF0ZSB0aGUgY2FtZXJhIHRvIGEgdXNlcidzIGN1cnNvciBwb3NpdGlvbi4gVGhpcyBhbHNvIGJyaWVmbHkgc2hvdyB0aGUgdXNlcidzIGN1cnNvciBpZiBpdCdzIG5vdCBjdXJyZW50bHkgdmlzaWJsZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnpvb21Ub1VzZXIobXlVc2VySWQpXG4gICAqIGVkaXRvci56b29tVG9Vc2VyKG15VXNlcklkLCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMjAwIH0gfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB1c2VySWQgLSBUaGUgaWQgb2YgdGhlIHVzZXIgdG8gYW5pbWF0ZSB0by5cbiAgICogQHBhcmFtIG9wdHMgLSBUaGUgY2FtZXJhIG1vdmUgb3B0aW9ucy5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgem9vbVRvVXNlcih1c2VySWQsIG9wdHMgPSB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogNTAwIH0gfSkge1xuICAgIGNvbnN0IHByZXNlbmNlID0gdGhpcy5nZXRDb2xsYWJvcmF0b3JzKCkuZmluZCgoYykgPT4gYy51c2VySWQgPT09IHVzZXJJZCk7XG4gICAgaWYgKCFwcmVzZW5jZSlcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIHRoaXMuYmF0Y2goKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmZvbGxvd2luZ1VzZXJJZCAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnN0b3BGb2xsb3dpbmdVc2VyKCk7XG4gICAgICB9XG4gICAgICBjb25zdCBpc09uU2FtZVBhZ2UgPSBwcmVzZW5jZS5jdXJyZW50UGFnZUlkID09PSB0aGlzLmdldEN1cnJlbnRQYWdlSWQoKTtcbiAgICAgIGlmICghaXNPblNhbWVQYWdlKSB7XG4gICAgICAgIHRoaXMuc2V0Q3VycmVudFBhZ2UocHJlc2VuY2UuY3VycmVudFBhZ2VJZCk7XG4gICAgICB9XG4gICAgICBpZiAob3B0cyAmJiBvcHRzLmFuaW1hdGlvbiAmJiAhaXNPblNhbWVQYWdlKSB7XG4gICAgICAgIG9wdHMuYW5pbWF0aW9uID0gdm9pZCAwO1xuICAgICAgfVxuICAgICAgdGhpcy5jZW50ZXJPblBvaW50KHByZXNlbmNlLmN1cnNvciwgb3B0cyk7XG4gICAgICBjb25zdCB7IGhpZ2hsaWdodGVkVXNlcklkcyB9ID0gdGhpcy5nZXRJbnN0YW5jZVN0YXRlKCk7XG4gICAgICB0aGlzLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBoaWdobGlnaHRlZFVzZXJJZHM6IFsuLi5oaWdobGlnaHRlZFVzZXJJZHMsIHVzZXJJZF0gfSk7XG4gICAgICB0aGlzLnRpbWVycy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgaGlnaGxpZ2h0ZWRVc2VySWRzMiA9IFsuLi50aGlzLmdldEluc3RhbmNlU3RhdGUoKS5oaWdobGlnaHRlZFVzZXJJZHNdO1xuICAgICAgICBjb25zdCBpbmRleCA9IGhpZ2hsaWdodGVkVXNlcklkczIuaW5kZXhPZih1c2VySWQpO1xuICAgICAgICBpZiAoaW5kZXggPCAwKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaGlnaGxpZ2h0ZWRVc2VySWRzMi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBoaWdobGlnaHRlZFVzZXJJZHM6IGhpZ2hsaWdodGVkVXNlcklkczIgfSk7XG4gICAgICB9LCB0aGlzLm9wdGlvbnMuY29sbGFib3JhdG9ySWRsZVRpbWVvdXRNcyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLy8gVmlld3BvcnRcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfd2lsbFNldEluaXRpYWxCb3VuZHMgPSB0cnVlO1xuICAvKipcbiAgICogVXBkYXRlIHRoZSB2aWV3cG9ydC4gVGhlIHZpZXdwb3J0IHdpbGwgbWVhc3VyZSB0aGUgc2l6ZSBhbmQgc2NyZWVuIHBvc2l0aW9uIG9mIGl0cyBjb250YWluZXJcbiAgICogZWxlbWVudC4gVGhpcyBzaG91bGQgYmUgZG9uZSB3aGVuZXZlciB0aGUgY29udGFpbmVyJ3MgcG9zaXRpb24gb24gdGhlIHNjcmVlbiBjaGFuZ2VzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IudXBkYXRlVmlld3BvcnRTY3JlZW5Cb3VuZHMobmV3IEJveCgwLCAwLCAxMjgwLCAxMDI0KSlcbiAgICogZWRpdG9yLnVwZGF0ZVZpZXdwb3J0U2NyZWVuQm91bmRzKG5ldyBCb3goMCwgMCwgMTI4MCwgMTAyNCksIHRydWUpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gY2VudGVyIC0gV2hldGhlciB0byBwcmVzZXJ2ZSB0aGUgdmlld3BvcnQgcGFnZSBjZW50ZXIgYXMgdGhlIHZpZXdwb3J0IGNoYW5nZXMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHVwZGF0ZVZpZXdwb3J0U2NyZWVuQm91bmRzKHNjcmVlbkJvdW5kcywgY2VudGVyID0gZmFsc2UpIHtcbiAgICBzY3JlZW5Cb3VuZHMud2lkdGggPSBNYXRoLm1heChzY3JlZW5Cb3VuZHMud2lkdGgsIDEpO1xuICAgIHNjcmVlbkJvdW5kcy5oZWlnaHQgPSBNYXRoLm1heChzY3JlZW5Cb3VuZHMuaGVpZ2h0LCAxKTtcbiAgICBjb25zdCBpbnNldHMgPSBbXG4gICAgICAvLyB0b3BcbiAgICAgIHNjcmVlbkJvdW5kcy5taW5ZICE9PSAwLFxuICAgICAgLy8gcmlnaHRcbiAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsV2lkdGggIT09IHNjcmVlbkJvdW5kcy5tYXhYLFxuICAgICAgLy8gYm90dG9tXG4gICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCAhPT0gc2NyZWVuQm91bmRzLm1heFksXG4gICAgICAvLyBsZWZ0XG4gICAgICBzY3JlZW5Cb3VuZHMubWluWCAhPT0gMFxuICAgIF07XG4gICAgY29uc3QgeyBzY3JlZW5Cb3VuZHM6IHByZXZTY3JlZW5Cb3VuZHMsIGluc2V0czogcHJldkluc2V0cyB9ID0gdGhpcy5nZXRJbnN0YW5jZVN0YXRlKCk7XG4gICAgaWYgKHNjcmVlbkJvdW5kcy5lcXVhbHMocHJldlNjcmVlbkJvdW5kcykgJiYgaW5zZXRzLmV2ZXJ5KCh2LCBpKSA9PiB2ID09PSBwcmV2SW5zZXRzW2ldKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNvbnN0IHsgX3dpbGxTZXRJbml0aWFsQm91bmRzIH0gPSB0aGlzO1xuICAgIHRoaXMuX3dpbGxTZXRJbml0aWFsQm91bmRzID0gZmFsc2U7XG4gICAgaWYgKF93aWxsU2V0SW5pdGlhbEJvdW5kcykge1xuICAgICAgdGhpcy51cGRhdGVJbnN0YW5jZVN0YXRlKHsgc2NyZWVuQm91bmRzOiBzY3JlZW5Cb3VuZHMudG9Kc29uKCksIGluc2V0cyB9KTtcbiAgICAgIHRoaXMuc2V0Q2FtZXJhKHRoaXMuZ2V0Q2FtZXJhKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY2VudGVyICYmICF0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5mb2xsb3dpbmdVc2VySWQpIHtcbiAgICAgICAgY29uc3QgYmVmb3JlID0gdGhpcy5nZXRWaWV3cG9ydFBhZ2VCb3VuZHMoKS5jZW50ZXI7XG4gICAgICAgIHRoaXMudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IHNjcmVlbkJvdW5kczogc2NyZWVuQm91bmRzLnRvSnNvbigpLCBpbnNldHMgfSk7XG4gICAgICAgIHRoaXMuY2VudGVyT25Qb2ludChiZWZvcmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy51cGRhdGVJbnN0YW5jZVN0YXRlKHsgc2NyZWVuQm91bmRzOiBzY3JlZW5Cb3VuZHMudG9Kc29uKCksIGluc2V0cyB9KTtcbiAgICAgICAgdGhpcy5fc2V0Q2FtZXJhKFZlYy5Gcm9tKHsgLi4udGhpcy5nZXRDYW1lcmEoKSB9KSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3RpY2tDYW1lcmFTdGF0ZSgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldFZpZXdwb3J0U2NyZWVuQm91bmRzKCkge1xuICAgIGNvbnN0IHsgeCwgeSwgdywgaCB9ID0gdGhpcy5nZXRJbnN0YW5jZVN0YXRlKCkuc2NyZWVuQm91bmRzO1xuICAgIHJldHVybiBuZXcgQm94KHgsIHksIHcsIGgpO1xuICB9XG4gIGdldFZpZXdwb3J0U2NyZWVuQ2VudGVyKCkge1xuICAgIGNvbnN0IHZpZXdwb3J0U2NyZWVuQm91bmRzID0gdGhpcy5nZXRWaWV3cG9ydFNjcmVlbkJvdW5kcygpO1xuICAgIHJldHVybiBuZXcgVmVjKFxuICAgICAgdmlld3BvcnRTY3JlZW5Cb3VuZHMubWlkWCAtIHZpZXdwb3J0U2NyZWVuQm91bmRzLm1pblgsXG4gICAgICB2aWV3cG9ydFNjcmVlbkJvdW5kcy5taWRZIC0gdmlld3BvcnRTY3JlZW5Cb3VuZHMubWluWVxuICAgICk7XG4gIH1cbiAgZ2V0Vmlld3BvcnRQYWdlQm91bmRzKCkge1xuICAgIGNvbnN0IHsgdywgaCB9ID0gdGhpcy5nZXRWaWV3cG9ydFNjcmVlbkJvdW5kcygpO1xuICAgIGNvbnN0IHsgeDogY3gsIHk6IGN5LCB6OiBjeiB9ID0gdGhpcy5nZXRDYW1lcmEoKTtcbiAgICByZXR1cm4gbmV3IEJveCgtY3gsIC1jeSwgdyAvIGN6LCBoIC8gY3opO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgcG9pbnQgaW4gc2NyZWVuIHNwYWNlIHRvIGEgcG9pbnQgaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNjcmVlblRvUGFnZSh7IHg6IDEwMCwgeTogMTAwIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcG9pbnQgLSBUaGUgcG9pbnQgaW4gc2NyZWVuIHNwYWNlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzY3JlZW5Ub1BhZ2UocG9pbnQpIHtcbiAgICBjb25zdCB7IHNjcmVlbkJvdW5kcyB9ID0gdGhpcy5zdG9yZS51bnNhZmVHZXRXaXRob3V0Q2FwdHVyZShUTElOU1RBTkNFX0lEKTtcbiAgICBjb25zdCB7IHg6IGN4LCB5OiBjeSwgejogY3ogPSAxIH0gPSB0aGlzLmdldENhbWVyYSgpO1xuICAgIHJldHVybiBuZXcgVmVjKFxuICAgICAgKHBvaW50LnggLSBzY3JlZW5Cb3VuZHMueCkgLyBjeiAtIGN4LFxuICAgICAgKHBvaW50LnkgLSBzY3JlZW5Cb3VuZHMueSkgLyBjeiAtIGN5LFxuICAgICAgcG9pbnQueiA/PyAwLjVcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgcG9pbnQgaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZSB0byBhIHBvaW50IGluIGN1cnJlbnQgc2NyZWVuIHNwYWNlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IucGFnZVRvU2NyZWVuKHsgeDogMTAwLCB5OiAxMDAgfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwb2ludCAtIFRoZSBwb2ludCBpbiBwYWdlIHNwYWNlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBwYWdlVG9TY3JlZW4ocG9pbnQpIHtcbiAgICBjb25zdCB7IHNjcmVlbkJvdW5kcyB9ID0gdGhpcy5zdG9yZS51bnNhZmVHZXRXaXRob3V0Q2FwdHVyZShUTElOU1RBTkNFX0lEKTtcbiAgICBjb25zdCB7IHg6IGN4LCB5OiBjeSwgejogY3ogPSAxIH0gPSB0aGlzLmdldENhbWVyYSgpO1xuICAgIHJldHVybiBuZXcgVmVjKFxuICAgICAgKHBvaW50LnggKyBjeCkgKiBjeiArIHNjcmVlbkJvdW5kcy54LFxuICAgICAgKHBvaW50LnkgKyBjeSkgKiBjeiArIHNjcmVlbkJvdW5kcy55LFxuICAgICAgcG9pbnQueiA/PyAwLjVcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgcG9pbnQgaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZSB0byBhIHBvaW50IGluIGN1cnJlbnQgdmlld3BvcnQgc3BhY2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5wYWdlVG9WaWV3cG9ydCh7IHg6IDEwMCwgeTogMTAwIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcG9pbnQgLSBUaGUgcG9pbnQgaW4gcGFnZSBzcGFjZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcGFnZVRvVmlld3BvcnQocG9pbnQpIHtcbiAgICBjb25zdCB7IHg6IGN4LCB5OiBjeSwgejogY3ogPSAxIH0gPSB0aGlzLmdldENhbWVyYSgpO1xuICAgIHJldHVybiBuZXcgVmVjKChwb2ludC54ICsgY3gpICogY3osIChwb2ludC55ICsgY3kpICogY3osIHBvaW50LnogPz8gMC41KTtcbiAgfVxuICBfZ2V0Q29sbGFib3JhdG9yc1F1ZXJ5KCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLnF1ZXJ5LnJlY29yZHMoXCJpbnN0YW5jZV9wcmVzZW5jZVwiLCAoKSA9PiAoe1xuICAgICAgdXNlcklkOiB7IG5lcTogdGhpcy51c2VyLmdldElkKCkgfVxuICAgIH0pKTtcbiAgfVxuICBnZXRDb2xsYWJvcmF0b3JzKCkge1xuICAgIGNvbnN0IGFsbFByZXNlbmNlUmVjb3JkcyA9IHRoaXMuX2dldENvbGxhYm9yYXRvcnNRdWVyeSgpLmdldCgpO1xuICAgIGlmICghYWxsUHJlc2VuY2VSZWNvcmRzLmxlbmd0aClcbiAgICAgIHJldHVybiBFTVBUWV9BUlJBWTtcbiAgICBjb25zdCB1c2VySWRzID0gWy4uLm5ldyBTZXQoYWxsUHJlc2VuY2VSZWNvcmRzLm1hcCgoYykgPT4gYy51c2VySWQpKV0uc29ydCgpO1xuICAgIHJldHVybiB1c2VySWRzLm1hcCgoaWQpID0+IHtcbiAgICAgIGNvbnN0IGxhdGVzdFByZXNlbmNlID0gYWxsUHJlc2VuY2VSZWNvcmRzLmZpbHRlcigoYykgPT4gYy51c2VySWQgPT09IGlkKS5zb3J0KChhLCBiKSA9PiBiLmxhc3RBY3Rpdml0eVRpbWVzdGFtcCAtIGEubGFzdEFjdGl2aXR5VGltZXN0YW1wKVswXTtcbiAgICAgIHJldHVybiBsYXRlc3RQcmVzZW5jZTtcbiAgICB9KTtcbiAgfVxuICBnZXRDb2xsYWJvcmF0b3JzT25DdXJyZW50UGFnZSgpIHtcbiAgICBjb25zdCBjdXJyZW50UGFnZUlkID0gdGhpcy5nZXRDdXJyZW50UGFnZUlkKCk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29sbGFib3JhdG9ycygpLmZpbHRlcigoYykgPT4gYy5jdXJyZW50UGFnZUlkID09PSBjdXJyZW50UGFnZUlkKTtcbiAgfVxuICAvLyBGb2xsb3dpbmdcbiAgLy8gV2hlbiB3ZSBhcmUgJ2xvY2tlZCBvbicgdG8gYSB1c2VyLCBvdXIgY2FtZXJhIGlzIGRlcml2ZWQgZnJvbSB0aGVpciBjYW1lcmEuXG4gIF9pc0xvY2tlZE9uRm9sbG93aW5nVXNlciA9IGF0b20oXCJpc0xvY2tlZE9uRm9sbG93aW5nVXNlclwiLCBmYWxzZSk7XG4gIC8qKlxuICAgKiBTdGFydCB2aWV3cG9ydC1mb2xsb3dpbmcgYSB1c2VyLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc3RhcnRGb2xsb3dpbmdVc2VyKG15VXNlcklkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHVzZXJJZCAtIFRoZSBpZCBvZiB0aGUgdXNlciB0byBmb2xsb3cuXG4gICAqIEBwYXJhbSBvcHRzIC0gT3B0aW9ucyBmb3Igc3RhcnRpbmcgdG8gZm9sbG93IGEgdXNlci5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc3RhcnRGb2xsb3dpbmdVc2VyKHVzZXJJZCkge1xuICAgIHRoaXMuc3RvcEZvbGxvd2luZ1VzZXIoKTtcbiAgICBjb25zdCBsZWFkZXJQcmVzZW5jZXMgPSB0aGlzLl9nZXRDb2xsYWJvcmF0b3JzUXVlcnkoKS5nZXQoKS5maWx0ZXIoKHApID0+IHAudXNlcklkID09PSB1c2VySWQpO1xuICAgIGlmICghbGVhZGVyUHJlc2VuY2VzLmxlbmd0aCkge1xuICAgICAgY29uc29sZS53YXJuKFwiVXNlciBub3QgZm91bmRcIik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgY29uc3QgdGhpc1VzZXJJZCA9IHRoaXMudXNlci5nZXRJZCgpO1xuICAgIGlmICghdGhpc1VzZXJJZCkge1xuICAgICAgY29uc29sZS53YXJuKFwiWW91IHNob3VsZCBzZXQgdGhlIHVzZXJJZCBmb3IgdGhlIGN1cnJlbnQgaW5zdGFuY2UgYmVmb3JlIGZvbGxvd2luZyBhIHVzZXJcIik7XG4gICAgfVxuICAgIGlmIChsZWFkZXJQcmVzZW5jZXMuc29tZSgocCkgPT4gcC5mb2xsb3dpbmdVc2VySWQgPT09IHRoaXNVc2VySWQpKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgY29uc3QgbGF0ZXN0TGVhZGVyUHJlc2VuY2UgPSBjb21wdXRlZChcImxhdGVzdExlYWRlclByZXNlbmNlXCIsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmdldENvbGxhYm9yYXRvcnMoKS5maW5kKChwKSA9PiBwLnVzZXJJZCA9PT0gdXNlcklkKTtcbiAgICB9KTtcbiAgICB0cmFuc2FjdCgoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBmb2xsb3dpbmdVc2VySWQ6IHVzZXJJZCB9LCB7IGhpc3Rvcnk6IFwiaWdub3JlXCIgfSk7XG4gICAgICBjb25zdCBkaXNwb3NlID0gcmVhY3QoXCJ1cGRhdGUgY3VycmVudCBwYWdlXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgbGVhZGVyUHJlc2VuY2UgPSBsYXRlc3RMZWFkZXJQcmVzZW5jZS5nZXQoKTtcbiAgICAgICAgaWYgKCFsZWFkZXJQcmVzZW5jZSkge1xuICAgICAgICAgIHRoaXMuc3RvcEZvbGxvd2luZ1VzZXIoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlYWRlclByZXNlbmNlLmN1cnJlbnRQYWdlSWQgIT09IHRoaXMuZ2V0Q3VycmVudFBhZ2VJZCgpICYmIHRoaXMuZ2V0UGFnZShsZWFkZXJQcmVzZW5jZS5jdXJyZW50UGFnZUlkKSkge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeS5pZ25vcmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdG9yZS5wdXQoW1xuICAgICAgICAgICAgICB7IC4uLnRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLCBjdXJyZW50UGFnZUlkOiBsZWFkZXJQcmVzZW5jZS5jdXJyZW50UGFnZUlkIH1cbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdGhpcy5faXNMb2NrZWRPbkZvbGxvd2luZ1VzZXIuc2V0KHRydWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGNhbmNlbCA9ICgpID0+IHtcbiAgICAgICAgZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLl9pc0xvY2tlZE9uRm9sbG93aW5nVXNlci5zZXQoZmFsc2UpO1xuICAgICAgICB0aGlzLm9mZihcImZyYW1lXCIsIG1vdmVUb3dhcmRzVXNlcik7XG4gICAgICAgIHRoaXMub2ZmKFwic3RvcC1mb2xsb3dpbmdcIiwgY2FuY2VsKTtcbiAgICAgIH07XG4gICAgICBjb25zdCBtb3ZlVG93YXJkc1VzZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGxlYWRlclByZXNlbmNlID0gbGF0ZXN0TGVhZGVyUHJlc2VuY2UuZ2V0KCk7XG4gICAgICAgIGlmICghbGVhZGVyUHJlc2VuY2UpIHtcbiAgICAgICAgICB0aGlzLnN0b3BGb2xsb3dpbmdVc2VyKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9pc0xvY2tlZE9uRm9sbG93aW5nVXNlci5nZXQoKSlcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGFuaW1hdGlvblNwZWVkID0gdGhpcy51c2VyLmdldEFuaW1hdGlvblNwZWVkKCk7XG4gICAgICAgIGlmIChhbmltYXRpb25TcGVlZCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2lzTG9ja2VkT25Gb2xsb3dpbmdVc2VyLnNldCh0cnVlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0Vmlld3BvcnQgPSB0aGlzLmdldFZpZXdwb3J0UGFnZUJvdW5kc0ZvckZvbGxvd2luZygpO1xuICAgICAgICBpZiAoIXRhcmdldFZpZXdwb3J0KSB7XG4gICAgICAgICAgdGhpcy5zdG9wRm9sbG93aW5nVXNlcigpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50Vmlld3BvcnQgPSB0aGlzLmdldFZpZXdwb3J0UGFnZUJvdW5kcygpO1xuICAgICAgICBjb25zdCBkaWZmWCA9IE1hdGguYWJzKHRhcmdldFZpZXdwb3J0Lm1pblggLSBjdXJyZW50Vmlld3BvcnQubWluWCkgKyBNYXRoLmFicyh0YXJnZXRWaWV3cG9ydC5tYXhYIC0gY3VycmVudFZpZXdwb3J0Lm1heFgpO1xuICAgICAgICBjb25zdCBkaWZmWSA9IE1hdGguYWJzKHRhcmdldFZpZXdwb3J0Lm1pblkgLSBjdXJyZW50Vmlld3BvcnQubWluWSkgKyBNYXRoLmFicyh0YXJnZXRWaWV3cG9ydC5tYXhZIC0gY3VycmVudFZpZXdwb3J0Lm1heFkpO1xuICAgICAgICBpZiAoZGlmZlggPCB0aGlzLm9wdGlvbnMuZm9sbG93Q2hhc2VWaWV3cG9ydFNuYXAgJiYgZGlmZlkgPCB0aGlzLm9wdGlvbnMuZm9sbG93Q2hhc2VWaWV3cG9ydFNuYXApIHtcbiAgICAgICAgICB0aGlzLl9pc0xvY2tlZE9uRm9sbG93aW5nVXNlci5zZXQodHJ1ZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHQgPSBjbGFtcChhbmltYXRpb25TcGVlZCAqIDAuNSwgMC4xLCAwLjgpO1xuICAgICAgICBjb25zdCBuZXh0Vmlld3BvcnQgPSBuZXcgQm94KFxuICAgICAgICAgIGxlcnAoY3VycmVudFZpZXdwb3J0Lm1pblgsIHRhcmdldFZpZXdwb3J0Lm1pblgsIHQpLFxuICAgICAgICAgIGxlcnAoY3VycmVudFZpZXdwb3J0Lm1pblksIHRhcmdldFZpZXdwb3J0Lm1pblksIHQpLFxuICAgICAgICAgIGxlcnAoY3VycmVudFZpZXdwb3J0LndpZHRoLCB0YXJnZXRWaWV3cG9ydC53aWR0aCwgdCksXG4gICAgICAgICAgbGVycChjdXJyZW50Vmlld3BvcnQuaGVpZ2h0LCB0YXJnZXRWaWV3cG9ydC5oZWlnaHQsIHQpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IG5leHRDYW1lcmEgPSBuZXcgVmVjKFxuICAgICAgICAgIC1uZXh0Vmlld3BvcnQueCxcbiAgICAgICAgICAtbmV4dFZpZXdwb3J0LnksXG4gICAgICAgICAgdGhpcy5nZXRWaWV3cG9ydFNjcmVlbkJvdW5kcygpLndpZHRoIC8gbmV4dFZpZXdwb3J0LndpZHRoXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuc3RvcENhbWVyYUFuaW1hdGlvbigpO1xuICAgICAgICB0aGlzLl9zZXRDYW1lcmEobmV4dENhbWVyYSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5vbmNlKFwic3RvcC1mb2xsb3dpbmdcIiwgY2FuY2VsKTtcbiAgICAgIHRoaXMuYWRkTGlzdGVuZXIoXCJmcmFtZVwiLCBtb3ZlVG93YXJkc1VzZXIpO1xuICAgICAgbW92ZVRvd2FyZHNVc2VyKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFN0b3Agdmlld3BvcnQtZm9sbG93aW5nIGEgdXNlci5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnN0b3BGb2xsb3dpbmdVc2VyKClcbiAgICogYGBgXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0b3BGb2xsb3dpbmdVc2VyKCkge1xuICAgIHRoaXMuaGlzdG9yeS5pZ25vcmUoKCkgPT4ge1xuICAgICAgdGhpcy5zdG9yZS5wdXQoW3RoaXMuZ2V0Q2FtZXJhKCldKTtcbiAgICAgIHRoaXMuX2lzTG9ja2VkT25Gb2xsb3dpbmdVc2VyLnNldChmYWxzZSk7XG4gICAgICB0aGlzLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBmb2xsb3dpbmdVc2VySWQ6IG51bGwgfSk7XG4gICAgICB0aGlzLmVtaXQoXCJzdG9wLWZvbGxvd2luZ1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGdldFVub3JkZXJlZFJlbmRlcmluZ1NoYXBlcyh1c2VFZGl0b3JTdGF0ZSkge1xuICAgIGNvbnN0IHJlbmRlcmluZ1NoYXBlcyA9IFtdO1xuICAgIGxldCBuZXh0SW5kZXggPSB0aGlzLm9wdGlvbnMubWF4U2hhcGVzUGVyUGFnZSAqIDI7XG4gICAgbGV0IG5leHRCYWNrZ3JvdW5kSW5kZXggPSB0aGlzLm9wdGlvbnMubWF4U2hhcGVzUGVyUGFnZTtcbiAgICBjb25zdCBlcmFzaW5nU2hhcGVJZHMgPSB0aGlzLmdldEVyYXNpbmdTaGFwZUlkcygpO1xuICAgIGNvbnN0IGFkZFNoYXBlQnlJZCA9IChpZCwgb3BhY2l0eSwgaXNBbmNlc3RvckVyYXNpbmcpID0+IHtcbiAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgICBpZiAoIXNoYXBlKVxuICAgICAgICByZXR1cm47XG4gICAgICBvcGFjaXR5ICo9IHNoYXBlLm9wYWNpdHk7XG4gICAgICBsZXQgaXNTaGFwZUVyYXNpbmcgPSBmYWxzZTtcbiAgICAgIGNvbnN0IHV0aWwgPSB0aGlzLmdldFNoYXBlVXRpbChzaGFwZSk7XG4gICAgICBpZiAodXNlRWRpdG9yU3RhdGUpIHtcbiAgICAgICAgaXNTaGFwZUVyYXNpbmcgPSAhaXNBbmNlc3RvckVyYXNpbmcgJiYgZXJhc2luZ1NoYXBlSWRzLmluY2x1ZGVzKGlkKTtcbiAgICAgICAgaWYgKGlzU2hhcGVFcmFzaW5nKSB7XG4gICAgICAgICAgb3BhY2l0eSAqPSAwLjMyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZW5kZXJpbmdTaGFwZXMucHVzaCh7XG4gICAgICAgIGlkLFxuICAgICAgICBzaGFwZSxcbiAgICAgICAgdXRpbCxcbiAgICAgICAgaW5kZXg6IG5leHRJbmRleCxcbiAgICAgICAgYmFja2dyb3VuZEluZGV4OiBuZXh0QmFja2dyb3VuZEluZGV4LFxuICAgICAgICBvcGFjaXR5XG4gICAgICB9KTtcbiAgICAgIG5leHRJbmRleCArPSAxO1xuICAgICAgbmV4dEJhY2tncm91bmRJbmRleCArPSAxO1xuICAgICAgY29uc3QgY2hpbGRJZHMgPSB0aGlzLmdldFNvcnRlZENoaWxkSWRzRm9yUGFyZW50KGlkKTtcbiAgICAgIGlmICghY2hpbGRJZHMubGVuZ3RoKVxuICAgICAgICByZXR1cm47XG4gICAgICBsZXQgYmFja2dyb3VuZEluZGV4VG9SZXN0b3JlID0gbnVsbDtcbiAgICAgIGlmICh1dGlsLnByb3ZpZGVzQmFja2dyb3VuZEZvckNoaWxkcmVuKHNoYXBlKSkge1xuICAgICAgICBiYWNrZ3JvdW5kSW5kZXhUb1Jlc3RvcmUgPSBuZXh0QmFja2dyb3VuZEluZGV4O1xuICAgICAgICBuZXh0QmFja2dyb3VuZEluZGV4ID0gbmV4dEluZGV4O1xuICAgICAgICBuZXh0SW5kZXggKz0gdGhpcy5vcHRpb25zLm1heFNoYXBlc1BlclBhZ2U7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGNoaWxkSWQgb2YgY2hpbGRJZHMpIHtcbiAgICAgICAgYWRkU2hhcGVCeUlkKGNoaWxkSWQsIG9wYWNpdHksIGlzQW5jZXN0b3JFcmFzaW5nIHx8IGlzU2hhcGVFcmFzaW5nKTtcbiAgICAgIH1cbiAgICAgIGlmIChiYWNrZ3JvdW5kSW5kZXhUb1Jlc3RvcmUgIT09IG51bGwpIHtcbiAgICAgICAgbmV4dEJhY2tncm91bmRJbmRleCA9IGJhY2tncm91bmRJbmRleFRvUmVzdG9yZTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHBhZ2VzID0gdXNlRWRpdG9yU3RhdGUgPyBbdGhpcy5nZXRDdXJyZW50UGFnZSgpXSA6IHRoaXMuZ2V0UGFnZXMoKTtcbiAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgcGFnZXMpIHtcbiAgICAgIGZvciAoY29uc3QgY2hpbGRJZCBvZiB0aGlzLmdldFNvcnRlZENoaWxkSWRzRm9yUGFyZW50KHBhZ2UuaWQpKSB7XG4gICAgICAgIGFkZFNoYXBlQnlJZChjaGlsZElkLCAxLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZW5kZXJpbmdTaGFwZXM7XG4gIH1cbiAgLy8gQ2FtZXJhIHN0YXRlXG4gIC8vIENhbWVyYSBzdGF0ZSBkb2VzIHR3byB0aGluZ3M6IGZpcnN0LCBpdCBhbGxvd3MgdXMgdG8gc3Vic2NyaWJlIHRvIHdoZXRoZXJcbiAgLy8gdGhlIGNhbWVyYSBpcyBtb3Zpbmcgb3Igbm90OyBhbmQgc2Vjb25kLCBpdCBhbGxvd3MgdXMgdG8gdXBkYXRlIHRoZSByZW5kZXJpbmdcbiAgLy8gc2hhcGVzIG9uIHRoZSBjYW52YXMuIENoYW5naW5nIHRoZSByZW5kZXJpbmcgc2hhcGVzIG1heSBjYXVzZSBzaGFwZXMgdG9cbiAgLy8gdW5tb3VudCAvIHJlbW91bnQgaW4gdGhlIERPTSwgd2hpY2ggaXMgZXhwZW5zaXZlOyBhbmQgY29tcHV0aW5nIHZpc2liaWxpdHkgaXNcbiAgLy8gYWxzbyBleHBlbnNpdmUgaW4gbGFyZ2UgcHJvamVjdHMuIEZvciB0aGlzIHJlYXNvbiwgd2UgdXNlIGEgc2Vjb25kIGJvdW5kaW5nXG4gIC8vIGJveCBqdXN0IGZvciByZW5kZXJpbmcsIGFuZCB3ZSBvbmx5IHVwZGF0ZSBhZnRlciB0aGUgY2FtZXJhIHN0b3BzIG1vdmluZy5cbiAgX2NhbWVyYVN0YXRlID0gYXRvbShcImNhbWVyYSBzdGF0ZVwiLCBcImlkbGVcIik7XG4gIF9jYW1lcmFTdGF0ZVRpbWVvdXRSZW1haW5pbmcgPSAwO1xuICBfZGVjYXlDYW1lcmFTdGF0ZVRpbWVvdXQgPSAoZWxhcHNlZCkgPT4ge1xuICAgIHRoaXMuX2NhbWVyYVN0YXRlVGltZW91dFJlbWFpbmluZyAtPSBlbGFwc2VkO1xuICAgIGlmICh0aGlzLl9jYW1lcmFTdGF0ZVRpbWVvdXRSZW1haW5pbmcgPiAwKVxuICAgICAgcmV0dXJuO1xuICAgIHRoaXMub2ZmKFwidGlja1wiLCB0aGlzLl9kZWNheUNhbWVyYVN0YXRlVGltZW91dCk7XG4gICAgdGhpcy5fY2FtZXJhU3RhdGUuc2V0KFwiaWRsZVwiKTtcbiAgfTtcbiAgX3RpY2tDYW1lcmFTdGF0ZSA9ICgpID0+IHtcbiAgICB0aGlzLl9jYW1lcmFTdGF0ZVRpbWVvdXRSZW1haW5pbmcgPSB0aGlzLm9wdGlvbnMuY2FtZXJhTW92aW5nVGltZW91dE1zO1xuICAgIGlmICh0aGlzLl9jYW1lcmFTdGF0ZS5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUoKSAhPT0gXCJpZGxlXCIpXG4gICAgICByZXR1cm47XG4gICAgdGhpcy5fY2FtZXJhU3RhdGUuc2V0KFwibW92aW5nXCIpO1xuICAgIHRoaXMub24oXCJ0aWNrXCIsIHRoaXMuX2RlY2F5Q2FtZXJhU3RhdGVUaW1lb3V0KTtcbiAgfTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGNhbWVyYSBpcyBtb3Zpbmcgb3IgaWRsZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldENhbWVyYVN0YXRlKClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldENhbWVyYVN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9jYW1lcmFTdGF0ZS5nZXQoKTtcbiAgfVxuICBnZXRSZW5kZXJpbmdTaGFwZXMoKSB7XG4gICAgY29uc3QgcmVuZGVyaW5nU2hhcGVzID0gdGhpcy5nZXRVbm9yZGVyZWRSZW5kZXJpbmdTaGFwZXModHJ1ZSk7XG4gICAgcmV0dXJuIHJlbmRlcmluZ1NoYXBlcy5zb3J0KHNvcnRCeUlkKTtcbiAgfVxuICBfZ2V0QWxsUGFnZXNRdWVyeSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5xdWVyeS5yZWNvcmRzKFwicGFnZVwiKTtcbiAgfVxuICBnZXRQYWdlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0QWxsUGFnZXNRdWVyeSgpLmdldCgpLnNvcnQoc29ydEJ5SW5kZXgpO1xuICB9XG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBwYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0Q3VycmVudFBhZ2UoKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0Q3VycmVudFBhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UGFnZSh0aGlzLmdldEN1cnJlbnRQYWdlSWQoKSk7XG4gIH1cbiAgZ2V0Q3VycmVudFBhZ2VJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJbnN0YW5jZVN0YXRlKCkuY3VycmVudFBhZ2VJZDtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgcGFnZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFBhZ2UobXlQYWdlLmlkKVxuICAgKiBlZGl0b3IuZ2V0UGFnZShteVBhZ2UpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGFnZSAtIFRoZSBwYWdlIChvciBwYWdlIGlkKSB0byBnZXQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFBhZ2UocGFnZSkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLmdldCh0eXBlb2YgcGFnZSA9PT0gXCJzdHJpbmdcIiA/IHBhZ2UgOiBwYWdlLmlkKTtcbiAgfVxuICAvKiBAaW50ZXJuYWwgKi9cbiAgX2N1cnJlbnRQYWdlU2hhcGVJZHM7XG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBhbGwgb2YgdGhlIHNoYXBlcyBvbiB0aGUgY3VycmVudCBwYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0Q3VycmVudFBhZ2VJZHMoKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0Q3VycmVudFBhZ2VTaGFwZUlkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFBhZ2VTaGFwZUlkcy5nZXQoKTtcbiAgfVxuICBnZXRDdXJyZW50UGFnZVNoYXBlSWRzU29ydGVkKCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZ2V0Q3VycmVudFBhZ2VTaGFwZUlkcygpKS5zb3J0KCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgaWRzIG9mIHNoYXBlcyBvbiBhIHBhZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IGlkc09uUGFnZTEgPSBlZGl0b3IuZ2V0UGFnZVNoYXBlSWRzKCdwYWdlMScpXG4gICAqIGNvbnN0IGlkc09uUGFnZTIgPSBlZGl0b3IuZ2V0UGFnZVNoYXBlSWRzKG15UGFnZTIpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGFnZSAtIFRoZSBwYWdlIChvciBwYWdlIGlkKSB0byBnZXQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICoqL1xuICBnZXRQYWdlU2hhcGVJZHMocGFnZSkge1xuICAgIGNvbnN0IHBhZ2VJZCA9IHR5cGVvZiBwYWdlID09PSBcInN0cmluZ1wiID8gcGFnZSA6IHBhZ2UuaWQ7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zdG9yZS5xdWVyeS5leGVjKFwic2hhcGVcIiwgeyBwYXJlbnRJZDogeyBlcTogcGFnZUlkIH0gfSk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2hhcGVBbmREZXNjZW5kYW50SWRzKHJlc3VsdC5tYXAoKHMpID0+IHMuaWQpKTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBjdXJyZW50IHBhZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zZXRDdXJyZW50UGFnZSgncGFnZTEnKVxuICAgKiBlZGl0b3Iuc2V0Q3VycmVudFBhZ2UobXlQYWdlMSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwYWdlIC0gVGhlIHBhZ2UgKG9yIHBhZ2UgaWQpIHRvIHNldCBhcyB0aGUgY3VycmVudCBwYWdlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRDdXJyZW50UGFnZShwYWdlKSB7XG4gICAgY29uc3QgcGFnZUlkID0gdHlwZW9mIHBhZ2UgPT09IFwic3RyaW5nXCIgPyBwYWdlIDogcGFnZS5pZDtcbiAgICBpZiAoIXRoaXMuc3RvcmUuaGFzKHBhZ2VJZCkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJUcmllZCB0byBzZXQgdGhlIGN1cnJlbnQgcGFnZSBpZCB0byBhIHBhZ2UgdGhhdCBkb2Vzbid0IGV4aXN0LlwiKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0aGlzLnN0b3BGb2xsb3dpbmdVc2VyKCk7XG4gICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgIHJldHVybiB0aGlzLmJhdGNoKFxuICAgICAgKCkgPT4gdGhpcy5zdG9yZS5wdXQoW3sgLi4udGhpcy5nZXRJbnN0YW5jZVN0YXRlKCksIGN1cnJlbnRQYWdlSWQ6IHBhZ2VJZCB9XSksXG4gICAgICB7IGhpc3Rvcnk6IFwicmVjb3JkLXByZXNlcnZlUmVkb1N0YWNrXCIgfVxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIHBhZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci51cGRhdGVQYWdlKHsgaWQ6ICdwYWdlMicsIG5hbWU6ICdQYWdlIDInIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGFydGlhbCAtIFRoZSBwYXJ0aWFsIG9mIHRoZSBzaGFwZSB0byB1cGRhdGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHVwZGF0ZVBhZ2UocGFydGlhbCkge1xuICAgIGlmICh0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5pc1JlYWRvbmx5KVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgcHJldiA9IHRoaXMuZ2V0UGFnZShwYXJ0aWFsLmlkKTtcbiAgICBpZiAoIXByZXYpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICByZXR1cm4gdGhpcy5iYXRjaCgoKSA9PiB0aGlzLnN0b3JlLnVwZGF0ZShwYXJ0aWFsLmlkLCAocGFnZSkgPT4gKHsgLi4ucGFnZSwgLi4ucGFydGlhbCB9KSkpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBwYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuY3JlYXRlUGFnZShteVBhZ2UpXG4gICAqIGVkaXRvci5jcmVhdGVQYWdlKHsgbmFtZTogJ1BhZ2UgMicgfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwYWdlIC0gVGhlIHBhZ2UgKG9yIHBhZ2UgcGFydGlhbCkgdG8gY3JlYXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjcmVhdGVQYWdlKHBhZ2UpIHtcbiAgICB0aGlzLmhpc3RvcnkuYmF0Y2goKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzUmVhZG9ubHkpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmICh0aGlzLmdldFBhZ2VzKCkubGVuZ3RoID49IHRoaXMub3B0aW9ucy5tYXhQYWdlcylcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY29uc3QgcGFnZXMgPSB0aGlzLmdldFBhZ2VzKCk7XG4gICAgICBjb25zdCBuYW1lID0gZ2V0SW5jcmVtZW50ZWROYW1lKFxuICAgICAgICBwYWdlLm5hbWUgPz8gXCJQYWdlIDFcIixcbiAgICAgICAgcGFnZXMubWFwKChwKSA9PiBwLm5hbWUpXG4gICAgICApO1xuICAgICAgbGV0IGluZGV4ID0gcGFnZS5pbmRleDtcbiAgICAgIGlmICghaW5kZXggfHwgcGFnZXMuc29tZSgocCkgPT4gcC5pbmRleCA9PT0gaW5kZXgpKSB7XG4gICAgICAgIGluZGV4ID0gZ2V0SW5kZXhBYm92ZShwYWdlc1twYWdlcy5sZW5ndGggLSAxXS5pbmRleCk7XG4gICAgICB9XG4gICAgICBjb25zdCBuZXdQYWdlID0gUGFnZVJlY29yZFR5cGUuY3JlYXRlKHtcbiAgICAgICAgbWV0YToge30sXG4gICAgICAgIC4uLnBhZ2UsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGluZGV4XG4gICAgICB9KTtcbiAgICAgIHRoaXMuc3RvcmUucHV0KFtuZXdQYWdlXSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIERlbGV0ZSBhIHBhZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5kZWxldGVQYWdlKCdwYWdlMScpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIHBhZ2UgdG8gZGVsZXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBkZWxldGVQYWdlKHBhZ2UpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBwYWdlID09PSBcInN0cmluZ1wiID8gcGFnZSA6IHBhZ2UuaWQ7XG4gICAgdGhpcy5iYXRjaCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5nZXRJbnN0YW5jZVN0YXRlKCkuaXNSZWFkb25seSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY29uc3QgcGFnZXMgPSB0aGlzLmdldFBhZ2VzKCk7XG4gICAgICBpZiAocGFnZXMubGVuZ3RoID09PSAxKVxuICAgICAgICByZXR1cm47XG4gICAgICBjb25zdCBkZWxldGVkUGFnZSA9IHRoaXMuZ2V0UGFnZShpZCk7XG4gICAgICBpZiAoIWRlbGV0ZWRQYWdlKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoaWQgPT09IHRoaXMuZ2V0Q3VycmVudFBhZ2VJZCgpKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcGFnZXMuZmluZEluZGV4KChwYWdlMikgPT4gcGFnZTIuaWQgPT09IGlkKTtcbiAgICAgICAgY29uc3QgbmV4dCA9IHBhZ2VzW2luZGV4IC0gMV0gPz8gcGFnZXNbaW5kZXggKyAxXTtcbiAgICAgICAgdGhpcy5zZXRDdXJyZW50UGFnZShuZXh0LmlkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RvcmUucmVtb3ZlKFtkZWxldGVkUGFnZS5pZF0pO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEdXBsaWNhdGUgYSBwYWdlLlxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIHBhZ2UgdG8gZHVwbGljYXRlLiBEZWZhdWx0cyB0byB0aGUgY3VycmVudCBwYWdlLlxuICAgKiBAcGFyYW0gY3JlYXRlSWQgLSBUaGUgaWQgb2YgdGhlIG5ldyBwYWdlLiBEZWZhdWx0cyB0byBhIG5ldyBpZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZHVwbGljYXRlUGFnZShwYWdlLCBjcmVhdGVJZCA9IFBhZ2VSZWNvcmRUeXBlLmNyZWF0ZUlkKCkpIHtcbiAgICBpZiAodGhpcy5nZXRQYWdlcygpLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWF4UGFnZXMpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBwYWdlID09PSBcInN0cmluZ1wiID8gcGFnZSA6IHBhZ2UuaWQ7XG4gICAgY29uc3QgZnJlc2hQYWdlID0gdGhpcy5nZXRQYWdlKGlkKTtcbiAgICBpZiAoIWZyZXNoUGFnZSlcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHByZXZDYW1lcmEgPSB7IC4uLnRoaXMuZ2V0Q2FtZXJhKCkgfTtcbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5nZXRDb250ZW50RnJvbUN1cnJlbnRQYWdlKHRoaXMuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQoZnJlc2hQYWdlLmlkKSk7XG4gICAgdGhpcy5iYXRjaCgoKSA9PiB7XG4gICAgICBjb25zdCBwYWdlcyA9IHRoaXMuZ2V0UGFnZXMoKTtcbiAgICAgIGNvbnN0IGluZGV4ID0gZ2V0SW5kZXhCZXR3ZWVuKGZyZXNoUGFnZS5pbmRleCwgcGFnZXNbcGFnZXMuaW5kZXhPZihmcmVzaFBhZ2UpICsgMV0/LmluZGV4KTtcbiAgICAgIHRoaXMuY3JlYXRlUGFnZSh7IG5hbWU6IGZyZXNoUGFnZS5uYW1lICsgXCIgQ29weVwiLCBpZDogY3JlYXRlSWQsIGluZGV4IH0pO1xuICAgICAgdGhpcy5zZXRDdXJyZW50UGFnZShjcmVhdGVJZCk7XG4gICAgICB0aGlzLnNldENhbWVyYShwcmV2Q2FtZXJhKTtcbiAgICAgIGlmIChjb250ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnB1dENvbnRlbnRPbnRvQ3VycmVudFBhZ2UoY29udGVudCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFJlbmFtZSBhIHBhZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5yZW5hbWVQYWdlKCdwYWdlMScsICdNeSBQYWdlJylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBpZCAtIFRoZSBpZCBvZiB0aGUgcGFnZSB0byByZW5hbWUuXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5ldyBuYW1lLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZW5hbWVQYWdlKHBhZ2UsIG5hbWUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBwYWdlID09PSBcInN0cmluZ1wiID8gcGFnZSA6IHBhZ2UuaWQ7XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzUmVhZG9ubHkpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB0aGlzLnVwZGF0ZVBhZ2UoeyBpZCwgbmFtZSB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBfZ2V0QWxsQXNzZXRzUXVlcnkoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUucXVlcnkucmVjb3JkcyhcImFzc2V0XCIpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYWxsIGFzc2V0cyBpbiB0aGUgZWRpdG9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRBc3NldHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldEFsbEFzc2V0c1F1ZXJ5KCkuZ2V0KCk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBvbmUgb3IgbW9yZSBhc3NldHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5jcmVhdGVBc3NldHMoWy4uLm15QXNzZXRzXSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBhc3NldHMgLSBUaGUgYXNzZXRzIHRvIGNyZWF0ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY3JlYXRlQXNzZXRzKGFzc2V0cykge1xuICAgIGlmICh0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5pc1JlYWRvbmx5KVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgaWYgKGFzc2V0cy5sZW5ndGggPD0gMClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIHRoaXMuaGlzdG9yeS5pZ25vcmUoKCkgPT4gdGhpcy5zdG9yZS5wdXQoYXNzZXRzKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBvbmUgb3IgbW9yZSBhc3NldHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci51cGRhdGVBc3NldHMoW3sgaWQ6ICdhc3NldDEnLCBuYW1lOiAnTmV3IG5hbWUnIH1dKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGFzc2V0cyAtIFRoZSBhc3NldHMgdG8gdXBkYXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICB1cGRhdGVBc3NldHMoYXNzZXRzKSB7XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzUmVhZG9ubHkpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBpZiAoYXNzZXRzLmxlbmd0aCA8PSAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgdGhpcy5oaXN0b3J5Lmlnbm9yZSgoKSA9PiB7XG4gICAgICB0aGlzLnN0b3JlLnB1dChcbiAgICAgICAgYXNzZXRzLm1hcCgocGFydGlhbCkgPT4gKHtcbiAgICAgICAgICAuLi50aGlzLnN0b3JlLmdldChwYXJ0aWFsLmlkKSxcbiAgICAgICAgICAuLi5wYXJ0aWFsXG4gICAgICAgIH0pKVxuICAgICAgKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIG9uZSBvciBtb3JlIGFzc2V0cy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmRlbGV0ZUFzc2V0cyhbJ2Fzc2V0MScsICdhc3NldDInXSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBpZHMgLSBUaGUgYXNzZXRzIHRvIGRlbGV0ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZGVsZXRlQXNzZXRzKGFzc2V0cykge1xuICAgIGlmICh0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5pc1JlYWRvbmx5KVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIGFzc2V0c1swXSA9PT0gXCJzdHJpbmdcIiA/IGFzc2V0cyA6IGFzc2V0cy5tYXAoKGEpID0+IGEuaWQpO1xuICAgIGlmIChpZHMubGVuZ3RoIDw9IDApXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB0aGlzLmhpc3RvcnkuaWdub3JlKCgpID0+IHRoaXMuc3RvcmUucmVtb3ZlKGlkcykpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gYXNzZXQgYnkgaXRzIGlkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0QXNzZXQoJ2Fzc2V0MScpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gYXNzZXQgLSBUaGUgYXNzZXQgKG9yIGFzc2V0IGlkKSB0byBnZXQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldEFzc2V0KGFzc2V0KSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0KHR5cGVvZiBhc3NldCA9PT0gXCJzdHJpbmdcIiA/IGFzc2V0IDogYXNzZXQuaWQpO1xuICB9XG4gIF9nZXRTaGFwZUdlb21ldHJ5Q2FjaGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuY3JlYXRlQ29tcHV0ZWRDYWNoZShcbiAgICAgIFwiYm91bmRzXCIsXG4gICAgICAoc2hhcGUpID0+IHRoaXMuZ2V0U2hhcGVVdGlsKHNoYXBlKS5nZXRHZW9tZXRyeShzaGFwZSksXG4gICAgICAoYSwgYikgPT4gYS5wcm9wcyA9PT0gYi5wcm9wc1xuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgZ2VvbWV0cnkgb2YgYSBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFNoYXBlR2VvbWV0cnkobXlTaGFwZSlcbiAgICogZWRpdG9yLmdldFNoYXBlR2VvbWV0cnkobXlTaGFwZUlkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIChvciBzaGFwZSBpZCkgdG8gZ2V0IHRoZSBnZW9tZXRyeSBmb3IuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFNoYXBlR2VvbWV0cnkoc2hhcGUpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0U2hhcGVHZW9tZXRyeUNhY2hlKCkuZ2V0KHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQpO1xuICB9XG4gIF9nZXRTaGFwZUhhbmRsZXNDYWNoZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5jcmVhdGVDb21wdXRlZENhY2hlKFwiaGFuZGxlc1wiLCAoc2hhcGUpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmdldFNoYXBlVXRpbChzaGFwZSkuZ2V0SGFuZGxlcz8uKHNoYXBlKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBoYW5kbGVzIChpZiBhbnkpIGZvciBhIHNoYXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0U2hhcGVIYW5kbGVzKG15U2hhcGUpXG4gICAqIGVkaXRvci5nZXRTaGFwZUhhbmRsZXMobXlTaGFwZUlkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIChvciBzaGFwZSBpZCkgdG8gZ2V0IHRoZSBoYW5kbGVzIGZvci5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0U2hhcGVIYW5kbGVzKHNoYXBlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldFNoYXBlSGFuZGxlc0NhY2hlKCkuZ2V0KHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGxvY2FsIHRyYW5zZm9ybSBmb3IgYSBzaGFwZSBhcyBhIG1hdHJpeCBtb2RlbC4gVGhpcyB0cmFuc2Zvcm0gcmVmbGVjdHMgYm90aCBpdHNcbiAgICogdHJhbnNsYXRpb24gKHgsIHkpIGZyb20gZnJvbSBlaXRoZXIgaXRzIHBhcmVudCdzIHRvcCBsZWZ0IGNvcm5lciwgaWYgdGhlIHNoYXBlJ3MgcGFyZW50IGlzXG4gICAqIGFub3RoZXIgc2hhcGUsIG9yIGVsc2UgZnJvbSB0aGUgMCwwIG9mIHRoZSBwYWdlLCBpZiB0aGUgc2hhcGUncyBwYXJlbnQgaXMgdGhlIHBhZ2U7IGFuZCB0aGVcbiAgICogc2hhcGUncyByb3RhdGlvbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFNoYXBlTG9jYWxUcmFuc2Zvcm0obXlTaGFwZSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB0byBnZXQgdGhlIGxvY2FsIHRyYW5zZm9ybSBmb3IuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFNoYXBlTG9jYWxUcmFuc2Zvcm0oc2hhcGUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQ7XG4gICAgY29uc3QgZnJlc2hTaGFwZSA9IHRoaXMuZ2V0U2hhcGUoaWQpO1xuICAgIGlmICghZnJlc2hTaGFwZSlcbiAgICAgIHRocm93IEVycm9yKFwiRWRpdG9yLmdldFRyYW5zZm9ybTogc2hhcGUgbm90IGZvdW5kXCIpO1xuICAgIHJldHVybiBNYXQuSWRlbnRpdHkoKS50cmFuc2xhdGUoZnJlc2hTaGFwZS54LCBmcmVzaFNoYXBlLnkpLnJvdGF0ZShmcmVzaFNoYXBlLnJvdGF0aW9uKTtcbiAgfVxuICBfZ2V0U2hhcGVQYWdlVHJhbnNmb3JtQ2FjaGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuY3JlYXRlQ29tcHV0ZWRDYWNoZShcInBhZ2VUcmFuc2Zvcm1DYWNoZVwiLCAoc2hhcGUpID0+IHtcbiAgICAgIGlmIChpc1BhZ2VJZChzaGFwZS5wYXJlbnRJZCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2hhcGVMb2NhbFRyYW5zZm9ybShzaGFwZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSB0aGlzLl9nZXRTaGFwZVBhZ2VUcmFuc2Zvcm1DYWNoZSgpLmdldChzaGFwZS5wYXJlbnRJZCkgPz8gTWF0LklkZW50aXR5KCk7XG4gICAgICByZXR1cm4gTWF0LkNvbXBvc2UocGFyZW50VHJhbnNmb3JtLCB0aGlzLmdldFNoYXBlTG9jYWxUcmFuc2Zvcm0oc2hhcGUpKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBsb2NhbCB0cmFuc2Zvcm0gb2YgYSBzaGFwZSdzIHBhcmVudCBhcyBhIG1hdHJpeCBtb2RlbC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFNoYXBlUGFyZW50VHJhbnNmb3JtKG15U2hhcGUpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgKG9yIHNoYXBlIGlkKSB0byBnZXQgdGhlIHBhcmVudCB0cmFuc2Zvcm0gZm9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTaGFwZVBhcmVudFRyYW5zZm9ybShzaGFwZSkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICBjb25zdCBmcmVzaFNoYXBlID0gdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgaWYgKCFmcmVzaFNoYXBlIHx8IGlzUGFnZUlkKGZyZXNoU2hhcGUucGFyZW50SWQpKVxuICAgICAgcmV0dXJuIE1hdC5JZGVudGl0eSgpO1xuICAgIHJldHVybiB0aGlzLl9nZXRTaGFwZVBhZ2VUcmFuc2Zvcm1DYWNoZSgpLmdldChmcmVzaFNoYXBlLnBhcmVudElkKSA/PyBNYXQuSWRlbnRpdHkoKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSB0cmFuc2Zvcm0gb2YgYSBzaGFwZSBpbiB0aGUgY3VycmVudCBwYWdlIHNwYWNlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKG15U2hhcGUpXG4gICAqIGVkaXRvci5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0obXlTaGFwZUlkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIChvciBzaGFwZSBpZCkgdG8gZ2V0IHRoZSBwYWdlIHRyYW5zZm9ybSBmb3IuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFNoYXBlUGFnZVRyYW5zZm9ybShzaGFwZSkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICByZXR1cm4gdGhpcy5fZ2V0U2hhcGVQYWdlVHJhbnNmb3JtQ2FjaGUoKS5nZXQoaWQpID8/IE1hdC5JZGVudGl0eSgpO1xuICB9XG4gIF9nZXRTaGFwZVBhZ2VCb3VuZHNDYWNoZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5jcmVhdGVDb21wdXRlZENhY2hlKFwicGFnZUJvdW5kc0NhY2hlXCIsIChzaGFwZSkgPT4ge1xuICAgICAgY29uc3QgcGFnZVRyYW5zZm9ybSA9IHRoaXMuX2dldFNoYXBlUGFnZVRyYW5zZm9ybUNhY2hlKCkuZ2V0KHNoYXBlLmlkKTtcbiAgICAgIGlmICghcGFnZVRyYW5zZm9ybSlcbiAgICAgICAgcmV0dXJuIG5ldyBCb3goKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IEJveC5Gcm9tUG9pbnRzKFxuICAgICAgICBNYXQuYXBwbHlUb1BvaW50cyhwYWdlVHJhbnNmb3JtLCB0aGlzLmdldFNoYXBlR2VvbWV0cnkoc2hhcGUpLnZlcnRpY2VzKVxuICAgICAgKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgYm91bmRzIG9mIGEgc2hhcGUgaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFNoYXBlUGFnZUJvdW5kcyhteVNoYXBlKVxuICAgKiBlZGl0b3IuZ2V0U2hhcGVQYWdlQm91bmRzKG15U2hhcGVJZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSAob3Igc2hhcGUgaWQpIHRvIGdldCB0aGUgYm91bmRzIGZvci5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0U2hhcGVQYWdlQm91bmRzKHNoYXBlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldFNoYXBlUGFnZUJvdW5kc0NhY2hlKCkuZ2V0KHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQpO1xuICB9XG4gIF9nZXRTaGFwZUNsaXBQYXRoQ2FjaGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuY3JlYXRlQ29tcHV0ZWRDYWNoZShcImNsaXBQYXRoQ2FjaGVcIiwgKHNoYXBlKSA9PiB7XG4gICAgICBjb25zdCBwYWdlTWFzayA9IHRoaXMuX2dldFNoYXBlTWFza0NhY2hlKCkuZ2V0KHNoYXBlLmlkKTtcbiAgICAgIGlmICghcGFnZU1hc2spXG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICBpZiAocGFnZU1hc2subGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBgcG9seWdvbigwcHggMHB4LCAwcHggMHB4LCAwcHggMHB4KWA7XG4gICAgICB9XG4gICAgICBjb25zdCBwYWdlVHJhbnNmb3JtID0gdGhpcy5fZ2V0U2hhcGVQYWdlVHJhbnNmb3JtQ2FjaGUoKS5nZXQoc2hhcGUuaWQpO1xuICAgICAgaWYgKCFwYWdlVHJhbnNmb3JtKVxuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgY29uc3QgbG9jYWxNYXNrID0gTWF0LmFwcGx5VG9Qb2ludHMoTWF0LkludmVyc2UocGFnZVRyYW5zZm9ybSksIHBhZ2VNYXNrKTtcbiAgICAgIHJldHVybiBgcG9seWdvbigke2xvY2FsTWFzay5tYXAoKHApID0+IGAke3AueH1weCAke3AueX1weGApLmpvaW4oXCIsXCIpfSlgO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGNsaXAgcGF0aCBmb3IgYSBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogY29uc3QgY2xpcFBhdGggPSBlZGl0b3IuZ2V0U2hhcGVDbGlwUGF0aChzaGFwZSlcbiAgICogY29uc3QgY2xpcFBhdGggPSBlZGl0b3IuZ2V0U2hhcGVDbGlwUGF0aChzaGFwZS5pZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSAob3Igc2hhcGUgaWQpIHRvIGdldCB0aGUgY2xpcCBwYXRoIGZvci5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIGNsaXAgcGF0aCBvciB1bmRlZmluZWQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFNoYXBlQ2xpcFBhdGgoc2hhcGUpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0U2hhcGVDbGlwUGF0aENhY2hlKCkuZ2V0KHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQpO1xuICB9XG4gIF9nZXRTaGFwZU1hc2tDYWNoZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5jcmVhdGVDb21wdXRlZENhY2hlKFwicGFnZU1hc2tDYWNoZVwiLCAoc2hhcGUpID0+IHtcbiAgICAgIGlmIChpc1BhZ2VJZChzaGFwZS5wYXJlbnRJZCkpXG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICBjb25zdCBmcmFtZUFuY2VzdG9ycyA9IHRoaXMuZ2V0U2hhcGVBbmNlc3RvcnMoc2hhcGUuaWQpLmZpbHRlcihcbiAgICAgICAgKHNoYXBlMikgPT4gdGhpcy5pc1NoYXBlT2ZUeXBlKHNoYXBlMiwgXCJmcmFtZVwiKVxuICAgICAgKTtcbiAgICAgIGlmIChmcmFtZUFuY2VzdG9ycy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICBjb25zdCBwYWdlTWFzayA9IGZyYW1lQW5jZXN0b3JzLm1hcChcbiAgICAgICAgKHMpID0+IChcbiAgICAgICAgICAvLyBBcHBseSB0aGUgZnJhbWUgdHJhbnNmb3JtIHRvIHRoZSBmcmFtZSBvdXRsaW5lIHRvIGdldCB0aGUgZnJhbWUgb3V0bGluZSBpbiB0aGUgY3VycmVudCBwYWdlIHNwYWNlXG4gICAgICAgICAgKHRoaXMuX2dldFNoYXBlUGFnZVRyYW5zZm9ybUNhY2hlKCkuZ2V0KHMuaWQpLmFwcGx5VG9Qb2ludHModGhpcy5nZXRTaGFwZUdlb21ldHJ5KHMpLnZlcnRpY2VzKSlcbiAgICAgICAgKVxuICAgICAgKS5yZWR1Y2UoKGFjYywgYikgPT4ge1xuICAgICAgICBpZiAoIShiICYmIGFjYykpXG4gICAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0UG9seWdvblBvbHlnb24oYWNjLCBiKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvbikge1xuICAgICAgICAgIHJldHVybiBpbnRlcnNlY3Rpb24ubWFwKFZlYy5DYXN0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwYWdlTWFzaztcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBtYXNrIChpbiB0aGUgY3VycmVudCBwYWdlIHNwYWNlKSBmb3IgYSBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogY29uc3QgcGFnZU1hc2sgPSBlZGl0b3IuZ2V0U2hhcGVNYXNrKHNoYXBlLmlkKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGlkIC0gVGhlIGlkIG9mIHRoZSBzaGFwZSB0byBnZXQgdGhlIG1hc2sgZm9yLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgbWFzayBmb3IgdGhlIHNoYXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTaGFwZU1hc2soc2hhcGUpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0U2hhcGVNYXNrQ2FjaGUoKS5nZXQodHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgYm91bmRzIG9mIGEgc2hhcGUgaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZSwgaW5jb3Jwb3JhdGluZyBhbnkgbWFza3MuIEZvciBleGFtcGxlLCBpZiB0aGVcbiAgICogc2hhcGUgd2VyZSB0aGUgY2hpbGQgb2YgYSBmcmFtZSBhbmQgd2FzIGhhbGYgd2F5IG91dCBvZiB0aGUgZnJhbWUsIHRoZSBib3VuZHMgd291bGQgYmUgdGhlIGhhbGZcbiAgICogb2YgdGhlIHNoYXBlIHRoYXQgd2FzIGluIHRoZSBmcmFtZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFNoYXBlTWFza2VkUGFnZUJvdW5kcyhteVNoYXBlKVxuICAgKiBlZGl0b3IuZ2V0U2hhcGVNYXNrZWRQYWdlQm91bmRzKG15U2hhcGVJZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB0byBnZXQgdGhlIG1hc2tlZCBib3VuZHMgZm9yLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTaGFwZU1hc2tlZFBhZ2VCb3VuZHMoc2hhcGUpIHtcbiAgICBpZiAodHlwZW9mIHNoYXBlICE9PSBcInN0cmluZ1wiKVxuICAgICAgc2hhcGUgPSBzaGFwZS5pZDtcbiAgICByZXR1cm4gdGhpcy5fZ2V0U2hhcGVNYXNrZWRQYWdlQm91bmRzQ2FjaGUoKS5nZXQoc2hhcGUpO1xuICB9XG4gIF9nZXRTaGFwZU1hc2tlZFBhZ2VCb3VuZHNDYWNoZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5jcmVhdGVDb21wdXRlZENhY2hlKFwic2hhcGVNYXNrZWRQYWdlQm91bmRzQ2FjaGVcIiwgKHNoYXBlKSA9PiB7XG4gICAgICBjb25zdCBwYWdlQm91bmRzID0gdGhpcy5fZ2V0U2hhcGVQYWdlQm91bmRzQ2FjaGUoKS5nZXQoc2hhcGUuaWQpO1xuICAgICAgaWYgKCFwYWdlQm91bmRzKVxuICAgICAgICByZXR1cm47XG4gICAgICBjb25zdCBwYWdlTWFzayA9IHRoaXMuX2dldFNoYXBlTWFza0NhY2hlKCkuZ2V0KHNoYXBlLmlkKTtcbiAgICAgIGlmIChwYWdlTWFzaykge1xuICAgICAgICBpZiAocGFnZU1hc2subGVuZ3RoID09PSAwKVxuICAgICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICAgIGNvbnN0IHsgY29ybmVycyB9ID0gcGFnZUJvdW5kcztcbiAgICAgICAgaWYgKGNvcm5lcnMuZXZlcnkoKHAsIGkpID0+IHAgJiYgVmVjLkVxdWFscyhwLCBwYWdlTWFza1tpXSkpKVxuICAgICAgICAgIHJldHVybiBwYWdlQm91bmRzLmNsb25lKCk7XG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvbiA9IGludGVyc2VjdFBvbHlnb25Qb2x5Z29uKHBhZ2VNYXNrLCBjb3JuZXJzKTtcbiAgICAgICAgaWYgKCFpbnRlcnNlY3Rpb24pXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gQm94LkZyb21Qb2ludHMoaW50ZXJzZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYWdlQm91bmRzO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGFuY2VzdG9ycyBvZiBhIHNoYXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBjb25zdCBhbmNlc3RvcnMgPSBlZGl0b3IuZ2V0U2hhcGVBbmNlc3RvcnMobXlTaGFwZSlcbiAgICogY29uc3QgYW5jZXN0b3JzID0gZWRpdG9yLmdldFNoYXBlQW5jZXN0b3JzKG15U2hhcGVJZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSAob3Igc2hhcGUgaWQpIHRvIGdldCB0aGUgYW5jZXN0b3JzIGZvci5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0U2hhcGVBbmNlc3RvcnMoc2hhcGUsIGFjYyA9IFtdKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlLmlkO1xuICAgIGNvbnN0IGZyZXNoU2hhcGUgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICBpZiAoIWZyZXNoU2hhcGUpXG4gICAgICByZXR1cm4gYWNjO1xuICAgIGNvbnN0IHBhcmVudElkID0gZnJlc2hTaGFwZS5wYXJlbnRJZDtcbiAgICBpZiAoaXNQYWdlSWQocGFyZW50SWQpKSB7XG4gICAgICBhY2MucmV2ZXJzZSgpO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5zdG9yZS5nZXQocGFyZW50SWQpO1xuICAgIGlmICghcGFyZW50KVxuICAgICAgcmV0dXJuIGFjYztcbiAgICBhY2MucHVzaChwYXJlbnQpO1xuICAgIHJldHVybiB0aGlzLmdldFNoYXBlQW5jZXN0b3JzKHBhcmVudCwgYWNjKTtcbiAgfVxuICAvKipcbiAgICogRmluZCB0aGUgZmlyc3QgYW5jZXN0b3IgbWF0Y2hpbmcgdGhlIGdpdmVuIHByZWRpY2F0ZVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBjb25zdCBhbmNlc3RvciA9IGVkaXRvci5maW5kU2hhcGVBbmNlc3RvcihteVNoYXBlKVxuICAgKiBjb25zdCBhbmNlc3RvciA9IGVkaXRvci5maW5kU2hhcGVBbmNlc3RvcihteVNoYXBlLmlkKVxuICAgKiBjb25zdCBhbmNlc3RvciA9IGVkaXRvci5maW5kU2hhcGVBbmNlc3RvcihteVNoYXBlLmlkLCAoc2hhcGUpID0+IHNoYXBlLnR5cGUgPT09ICdmcmFtZScpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgdG8gY2hlY2sgdGhlIGFuY2VzdG9ycyBmb3IuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGZpbmRTaGFwZUFuY2VzdG9yKHNoYXBlLCBwcmVkaWNhdGUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQ7XG4gICAgY29uc3QgZnJlc2hTaGFwZSA9IHRoaXMuZ2V0U2hhcGUoaWQpO1xuICAgIGlmICghZnJlc2hTaGFwZSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBwYXJlbnRJZCA9IGZyZXNoU2hhcGUucGFyZW50SWQ7XG4gICAgaWYgKGlzUGFnZUlkKHBhcmVudElkKSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmdldFNoYXBlKHBhcmVudElkKTtcbiAgICBpZiAoIXBhcmVudClcbiAgICAgIHJldHVybjtcbiAgICByZXR1cm4gcHJlZGljYXRlKHBhcmVudCkgPyBwYXJlbnQgOiB0aGlzLmZpbmRTaGFwZUFuY2VzdG9yKHBhcmVudCwgcHJlZGljYXRlKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB0aGUgZ2l2ZW4gc2hhcGUgaGFzIHRoZSBnaXZlbiBhbmNlc3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlLlxuICAgKiBAcGFyYW0gYW5jZXN0b3JJZCAtIFRoZSBpZCBvZiB0aGUgYW5jZXN0b3IuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGhhc0FuY2VzdG9yKHNoYXBlLCBhbmNlc3RvcklkKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlPy5pZDtcbiAgICBjb25zdCBmcmVzaFNoYXBlID0gaWQgJiYgdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgaWYgKCFmcmVzaFNoYXBlKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChmcmVzaFNoYXBlLnBhcmVudElkID09PSBhbmNlc3RvcklkKVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIHRoaXMuaGFzQW5jZXN0b3IodGhpcy5nZXRTaGFwZVBhcmVudChmcmVzaFNoYXBlKSwgYW5jZXN0b3JJZCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY29tbW9uIGFuY2VzdG9yIG9mIHR3byBvciBtb3JlIHNoYXBlcyB0aGF0IG1hdGNoZXMgYSBwcmVkaWNhdGUuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIGNoZWNrLlxuICAgKiBAcGFyYW0gcHJlZGljYXRlIC0gVGhlIHByZWRpY2F0ZSB0byBtYXRjaC5cbiAgICovXG4gIGZpbmRDb21tb25BbmNlc3RvcihzaGFwZXMsIHByZWRpY2F0ZSkge1xuICAgIGlmIChzaGFwZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzKSA9PiBzLmlkKTtcbiAgICBjb25zdCBmcmVzaFNoYXBlcyA9IGNvbXBhY3QoaWRzLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGUoaWQpKSk7XG4gICAgaWYgKGZyZXNoU2hhcGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3QgcGFyZW50SWQgPSBmcmVzaFNoYXBlc1swXS5wYXJlbnRJZDtcbiAgICAgIGlmIChpc1BhZ2VJZChwYXJlbnRJZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByZWRpY2F0ZSA/IHRoaXMuZmluZFNoYXBlQW5jZXN0b3IoZnJlc2hTaGFwZXNbMF0sIHByZWRpY2F0ZSk/LmlkIDogcGFyZW50SWQ7XG4gICAgfVxuICAgIGNvbnN0IFtub2RlQSwgLi4ub3RoZXJzXSA9IGZyZXNoU2hhcGVzO1xuICAgIGxldCBhbmNlc3RvciA9IHRoaXMuZ2V0U2hhcGVQYXJlbnQobm9kZUEpO1xuICAgIHdoaWxlIChhbmNlc3Rvcikge1xuICAgICAgaWYgKHByZWRpY2F0ZSAmJiAhcHJlZGljYXRlKGFuY2VzdG9yKSkge1xuICAgICAgICBhbmNlc3RvciA9IHRoaXMuZ2V0U2hhcGVQYXJlbnQoYW5jZXN0b3IpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChvdGhlcnMuZXZlcnkoKHNoYXBlKSA9PiB0aGlzLmhhc0FuY2VzdG9yKHNoYXBlLCBhbmNlc3Rvci5pZCkpKSB7XG4gICAgICAgIHJldHVybiBhbmNlc3Rvci5pZDtcbiAgICAgIH1cbiAgICAgIGFuY2VzdG9yID0gdGhpcy5nZXRTaGFwZVBhcmVudChhbmNlc3Rvcik7XG4gICAgfVxuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgaXNTaGFwZU9yQW5jZXN0b3JMb2NrZWQoYXJnKSB7XG4gICAgY29uc3Qgc2hhcGUgPSB0eXBlb2YgYXJnID09PSBcInN0cmluZ1wiID8gdGhpcy5nZXRTaGFwZShhcmcpIDogYXJnO1xuICAgIGlmIChzaGFwZSA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChzaGFwZS5pc0xvY2tlZClcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIHJldHVybiB0aGlzLmlzU2hhcGVPckFuY2VzdG9yTG9ja2VkKHRoaXMuZ2V0U2hhcGVQYXJlbnQoc2hhcGUpKTtcbiAgfVxuICBfbm90VmlzaWJsZVNoYXBlcygpIHtcbiAgICByZXR1cm4gbm90VmlzaWJsZVNoYXBlcyh0aGlzKTtcbiAgfVxuICBnZXRDdWxsZWRTaGFwZXMoKSB7XG4gICAgY29uc3Qgbm90VmlzaWJsZVNoYXBlczIgPSB0aGlzLl9ub3RWaXNpYmxlU2hhcGVzKCkuZ2V0KCk7XG4gICAgY29uc3Qgc2VsZWN0ZWRTaGFwZUlkcyA9IHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpO1xuICAgIGNvbnN0IGVkaXRpbmdJZCA9IHRoaXMuZ2V0RWRpdGluZ1NoYXBlSWQoKTtcbiAgICBjb25zdCBjdWxsZWRTaGFwZXMgPSBuZXcgU2V0KG5vdFZpc2libGVTaGFwZXMyKTtcbiAgICBpZiAoZWRpdGluZ0lkKSB7XG4gICAgICBjdWxsZWRTaGFwZXMuZGVsZXRlKGVkaXRpbmdJZCk7XG4gICAgfVxuICAgIHNlbGVjdGVkU2hhcGVJZHMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgIGN1bGxlZFNoYXBlcy5kZWxldGUoaWQpO1xuICAgIH0pO1xuICAgIHJldHVybiBjdWxsZWRTaGFwZXM7XG4gIH1cbiAgZ2V0Q3VycmVudFBhZ2VCb3VuZHMoKSB7XG4gICAgbGV0IGNvbW1vbkJvdW5kcztcbiAgICB0aGlzLmdldEN1cnJlbnRQYWdlU2hhcGVJZHNTb3J0ZWQoKS5mb3JFYWNoKChzaGFwZUlkKSA9PiB7XG4gICAgICBjb25zdCBib3VuZHMgPSB0aGlzLmdldFNoYXBlTWFza2VkUGFnZUJvdW5kcyhzaGFwZUlkKTtcbiAgICAgIGlmICghYm91bmRzKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoIWNvbW1vbkJvdW5kcykge1xuICAgICAgICBjb21tb25Cb3VuZHMgPSBib3VuZHMuY2xvbmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbW1vbkJvdW5kcyA9IGNvbW1vbkJvdW5kcy5leHBhbmQoYm91bmRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gY29tbW9uQm91bmRzO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHRvcC1tb3N0IHNlbGVjdGVkIHNoYXBlIGF0IHRoZSBnaXZlbiBwb2ludCwgaWdub3JpbmcgZ3JvdXBzLlxuICAgKlxuICAgKiBAcGFyYW0gcG9pbnQgLSBUaGUgcG9pbnQgdG8gY2hlY2suXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSB0b3AtbW9zdCBzZWxlY3RlZCBzaGFwZSBhdCB0aGUgZ2l2ZW4gcG9pbnQsIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBpcyBubyBzaGFwZSBhdCB0aGUgcG9pbnQuXG4gICAqL1xuICBnZXRTZWxlY3RlZFNoYXBlQXRQb2ludChwb2ludCkge1xuICAgIGNvbnN0IHNlbGVjdGVkU2hhcGVJZHMgPSB0aGlzLmdldFNlbGVjdGVkU2hhcGVJZHMoKTtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50UGFnZVNoYXBlc1NvcnRlZCgpLmZpbHRlcigoc2hhcGUpID0+IHNoYXBlLnR5cGUgIT09IFwiZ3JvdXBcIiAmJiBzZWxlY3RlZFNoYXBlSWRzLmluY2x1ZGVzKHNoYXBlLmlkKSkucmV2ZXJzZSgpLmZpbmQoKHNoYXBlKSA9PiB0aGlzLmlzUG9pbnRJblNoYXBlKHNoYXBlLCBwb2ludCwgeyBoaXRJbnNpZGU6IHRydWUsIG1hcmdpbjogMCB9KSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgc2hhcGUgYXQgdGhlIGN1cnJlbnQgcG9pbnQuXG4gICAqXG4gICAqIEBwYXJhbSBwb2ludCAtIFRoZSBwb2ludCB0byBjaGVjay5cbiAgICogQHBhcmFtIG9wdHMgLSBPcHRpb25zIGZvciB0aGUgY2hlY2s6IGBoaXRJbnNpZGVgIHRvIGNoZWNrIGlmIHRoZSBwb2ludCBpcyBpbnNpZGUgdGhlIHNoYXBlLCBgbWFyZ2luYCB0byBjaGVjayBpZiB0aGUgcG9pbnQgaXMgd2l0aGluIGEgbWFyZ2luIG9mIHRoZSBzaGFwZSwgYGhpdEZyYW1lSW5zaWRlYCB0byBjaGVjayBpZiB0aGUgcG9pbnQgaXMgaW5zaWRlIHRoZSBmcmFtZSwgYW5kIGBmaWx0ZXJgIHRvIGZpbHRlciB0aGUgc2hhcGVzIHRvIGNoZWNrLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgc2hhcGUgYXQgdGhlIGdpdmVuIHBvaW50LCBvciB1bmRlZmluZWQgaWYgdGhlcmUgaXMgbm8gc2hhcGUgYXQgdGhlIHBvaW50LlxuICAgKi9cbiAgZ2V0U2hhcGVBdFBvaW50KHBvaW50LCBvcHRzID0ge30pIHtcbiAgICBjb25zdCB6b29tTGV2ZWwgPSB0aGlzLmdldFpvb21MZXZlbCgpO1xuICAgIGNvbnN0IHZpZXdwb3J0UGFnZUJvdW5kcyA9IHRoaXMuZ2V0Vmlld3BvcnRQYWdlQm91bmRzKCk7XG4gICAgY29uc3Qge1xuICAgICAgZmlsdGVyLFxuICAgICAgbWFyZ2luID0gMCxcbiAgICAgIGhpdExvY2tlZCA9IGZhbHNlLFxuICAgICAgaGl0TGFiZWxzID0gZmFsc2UsXG4gICAgICBoaXRJbnNpZGUgPSBmYWxzZSxcbiAgICAgIGhpdEZyYW1lSW5zaWRlID0gZmFsc2VcbiAgICB9ID0gb3B0cztcbiAgICBsZXQgaW5Ib2xsb3dTbWFsbGVzdEFyZWEgPSBJbmZpbml0eTtcbiAgICBsZXQgaW5Ib2xsb3dTbWFsbGVzdEFyZWFIaXQgPSBudWxsO1xuICAgIGxldCBpbk1hcmdpbkNsb3Nlc3RUb0VkZ2VEaXN0YW5jZSA9IEluZmluaXR5O1xuICAgIGxldCBpbk1hcmdpbkNsb3Nlc3RUb0VkZ2VIaXQgPSBudWxsO1xuICAgIGNvbnN0IHNoYXBlc1RvQ2hlY2sgPSAob3B0cy5yZW5kZXJpbmdPbmx5ID8gdGhpcy5nZXRDdXJyZW50UGFnZVJlbmRlcmluZ1NoYXBlc1NvcnRlZCgpIDogdGhpcy5nZXRDdXJyZW50UGFnZVNoYXBlc1NvcnRlZCgpKS5maWx0ZXIoKHNoYXBlKSA9PiB7XG4gICAgICBpZiAoc2hhcGUuaXNMb2NrZWQgJiYgIWhpdExvY2tlZCB8fCB0aGlzLmlzU2hhcGVPZlR5cGUoc2hhcGUsIFwiZ3JvdXBcIikpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIGNvbnN0IHBhZ2VNYXNrID0gdGhpcy5nZXRTaGFwZU1hc2soc2hhcGUpO1xuICAgICAgaWYgKHBhZ2VNYXNrICYmICFwb2ludEluUG9seWdvbihwb2ludCwgcGFnZU1hc2spKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoZmlsdGVyKVxuICAgICAgICByZXR1cm4gZmlsdGVyKHNoYXBlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIGZvciAobGV0IGkgPSBzaGFwZXNUb0NoZWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1RvQ2hlY2tbaV07XG4gICAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuZ2V0U2hhcGVHZW9tZXRyeShzaGFwZSk7XG4gICAgICBjb25zdCBpc0dyb3VwID0gZ2VvbWV0cnkgaW5zdGFuY2VvZiBHcm91cDJkO1xuICAgICAgY29uc3QgcG9pbnRJblNoYXBlU3BhY2UgPSB0aGlzLmdldFBvaW50SW5TaGFwZVNwYWNlKHNoYXBlLCBwb2ludCk7XG4gICAgICBpZiAodGhpcy5pc1NoYXBlT2ZUeXBlKHNoYXBlLCBcImFycm93XCIpIHx8IHRoaXMuaXNTaGFwZU9mVHlwZShzaGFwZSwgXCJnZW9cIikgJiYgc2hhcGUucHJvcHMuZmlsbCA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgaWYgKHNoYXBlLnByb3BzLnRleHQudHJpbSgpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBjaGlsZEdlb21ldHJ5IG9mIGdlb21ldHJ5LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGRHZW9tZXRyeS5pc0xhYmVsICYmIGNoaWxkR2VvbWV0cnkuaXNQb2ludEluQm91bmRzKHBvaW50SW5TaGFwZVNwYWNlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gc2hhcGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc1NoYXBlT2ZUeXBlKHNoYXBlLCBcImZyYW1lXCIpKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlMiA9IGdlb21ldHJ5LmRpc3RhbmNlVG9Qb2ludChwb2ludEluU2hhcGVTcGFjZSwgaGl0SW5zaWRlKTtcbiAgICAgICAgaWYgKE1hdGguYWJzKGRpc3RhbmNlMikgPD0gbWFyZ2luKSB7XG4gICAgICAgICAgcmV0dXJuIGluTWFyZ2luQ2xvc2VzdFRvRWRnZUhpdCB8fCBzaGFwZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2VvbWV0cnkuaGl0VGVzdFBvaW50KHBvaW50SW5TaGFwZVNwYWNlLCAwLCB0cnVlKSkge1xuICAgICAgICAgIHJldHVybiBpbk1hcmdpbkNsb3Nlc3RUb0VkZ2VIaXQgfHwgaW5Ib2xsb3dTbWFsbGVzdEFyZWFIaXQgfHwgKGhpdEZyYW1lSW5zaWRlID8gc2hhcGUgOiB2b2lkIDApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgbGV0IGRpc3RhbmNlO1xuICAgICAgaWYgKGlzR3JvdXApIHtcbiAgICAgICAgbGV0IG1pbkRpc3RhbmNlID0gSW5maW5pdHk7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGRHZW9tZXRyeSBvZiBnZW9tZXRyeS5jaGlsZHJlbikge1xuICAgICAgICAgIGlmIChjaGlsZEdlb21ldHJ5LmlzTGFiZWwgJiYgIWhpdExhYmVscylcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIGNvbnN0IHREaXN0YW5jZSA9IGNoaWxkR2VvbWV0cnkuZGlzdGFuY2VUb1BvaW50KHBvaW50SW5TaGFwZVNwYWNlLCBoaXRJbnNpZGUpO1xuICAgICAgICAgIGlmICh0RGlzdGFuY2UgPCBtaW5EaXN0YW5jZSkge1xuICAgICAgICAgICAgbWluRGlzdGFuY2UgPSB0RGlzdGFuY2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRpc3RhbmNlID0gbWluRGlzdGFuY2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobWFyZ2luID09PSAwICYmIChnZW9tZXRyeS5ib3VuZHMudyA8IDEgfHwgZ2VvbWV0cnkuYm91bmRzLmggPCAxKSkge1xuICAgICAgICAgIGRpc3RhbmNlID0gZ2VvbWV0cnkuZGlzdGFuY2VUb1BvaW50KHBvaW50SW5TaGFwZVNwYWNlLCBoaXRJbnNpZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChnZW9tZXRyeS5ib3VuZHMuY29udGFpbnNQb2ludChwb2ludEluU2hhcGVTcGFjZSwgbWFyZ2luKSkge1xuICAgICAgICAgICAgZGlzdGFuY2UgPSBnZW9tZXRyeS5kaXN0YW5jZVRvUG9pbnQocG9pbnRJblNoYXBlU3BhY2UsIGhpdEluc2lkZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRpc3RhbmNlID0gSW5maW5pdHk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZ2VvbWV0cnkuaXNDbG9zZWQpIHtcbiAgICAgICAgaWYgKGRpc3RhbmNlIDw9IG1hcmdpbikge1xuICAgICAgICAgIGlmIChnZW9tZXRyeS5pc0ZpbGxlZCB8fCBpc0dyb3VwICYmIGdlb21ldHJ5LmNoaWxkcmVuWzBdLmlzRmlsbGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5NYXJnaW5DbG9zZXN0VG9FZGdlSGl0IHx8IHNoYXBlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRTaGFwZVBhZ2VCb3VuZHMoc2hhcGUpLmNvbnRhaW5zKHZpZXdwb3J0UGFnZUJvdW5kcykpXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpc3RhbmNlKSA8IG1hcmdpbikge1xuICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGlzdGFuY2UpIDwgaW5NYXJnaW5DbG9zZXN0VG9FZGdlRGlzdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBpbk1hcmdpbkNsb3Nlc3RUb0VkZ2VEaXN0YW5jZSA9IE1hdGguYWJzKGRpc3RhbmNlKTtcbiAgICAgICAgICAgICAgICBpbk1hcmdpbkNsb3Nlc3RUb0VkZ2VIaXQgPSBzaGFwZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICghaW5NYXJnaW5DbG9zZXN0VG9FZGdlSGl0KSB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgYXJlYSB9ID0gZ2VvbWV0cnk7XG4gICAgICAgICAgICAgIGlmIChhcmVhIDwgaW5Ib2xsb3dTbWFsbGVzdEFyZWEpIHtcbiAgICAgICAgICAgICAgICBpbkhvbGxvd1NtYWxsZXN0QXJlYSA9IGFyZWE7XG4gICAgICAgICAgICAgICAgaW5Ib2xsb3dTbWFsbGVzdEFyZWFIaXQgPSBzaGFwZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRpc3RhbmNlIDwgdGhpcy5vcHRpb25zLmhpdFRlc3RNYXJnaW4gLyB6b29tTGV2ZWwpIHtcbiAgICAgICAgICByZXR1cm4gc2hhcGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGluTWFyZ2luQ2xvc2VzdFRvRWRnZUhpdCB8fCBpbkhvbGxvd1NtYWxsZXN0QXJlYUhpdCB8fCB2b2lkIDA7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgc2hhcGVzLCBpZiBhbnksIGF0IGEgZ2l2ZW4gcGFnZSBwb2ludC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFNoYXBlc0F0UG9pbnQoeyB4OiAxMDAsIHk6IDEwMCB9KVxuICAgKiBlZGl0b3IuZ2V0U2hhcGVzQXRQb2ludCh7IHg6IDEwMCwgeTogMTAwIH0sIHsgaGl0SW5zaWRlOiB0cnVlLCBleGFjdDogdHJ1ZSB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHBvaW50IC0gVGhlIHBhZ2UgcG9pbnQgdG8gdGVzdC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0U2hhcGVzQXRQb2ludChwb2ludCwgb3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFBhZ2VTaGFwZXMoKS5maWx0ZXIoKHNoYXBlKSA9PiB0aGlzLmlzUG9pbnRJblNoYXBlKHNoYXBlLCBwb2ludCwgb3B0cykpO1xuICB9XG4gIC8qKlxuICAgKiBUZXN0IHdoZXRoZXIgYSBwb2ludCAoaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZSkgd2lsbCB3aWxsIGEgc2hhcGUuIFRoaXMgbWV0aG9kIHRha2VzIGludG8gYWNjb3VudCBtYXNrcyxcbiAgICogc3VjaCBhcyB3aGVuIGEgc2hhcGUgaXMgdGhlIGNoaWxkIG9mIGEgZnJhbWUgYW5kIGlzIHBhcnRpYWxseSBjbGlwcGVkIGJ5IHRoZSBmcmFtZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmlzUG9pbnRJblNoYXBlKHsgeDogMTAwLCB5OiAxMDAgfSwgbXlTaGFwZSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB0byB0ZXN0IGFnYWluc3QuXG4gICAqIEBwYXJhbSBwb2ludCAtIFRoZSBwYWdlIHBvaW50IHRvIHRlc3QgKGluIHRoZSBjdXJyZW50IHBhZ2Ugc3BhY2UpLlxuICAgKiBAcGFyYW0gaGl0SW5zaWRlIC0gV2hldGhlciB0byBjb3VudCBhcyBhIGhpdCBpZiB0aGUgcG9pbnQgaXMgaW5zaWRlIG9mIGEgY2xvc2VkIHNoYXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBpc1BvaW50SW5TaGFwZShzaGFwZSwgcG9pbnQsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IHsgaGl0SW5zaWRlID0gZmFsc2UsIG1hcmdpbiA9IDAgfSA9IG9wdHM7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlLmlkO1xuICAgIGNvbnN0IHBhZ2VNYXNrID0gdGhpcy5nZXRTaGFwZU1hc2soaWQpO1xuICAgIGlmIChwYWdlTWFzayAmJiAhcG9pbnRJblBvbHlnb24ocG9pbnQsIHBhZ2VNYXNrKSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5nZXRTaGFwZUdlb21ldHJ5KGlkKS5oaXRUZXN0UG9pbnQoXG4gICAgICB0aGlzLmdldFBvaW50SW5TaGFwZVNwYWNlKHNoYXBlLCBwb2ludCksXG4gICAgICBtYXJnaW4sXG4gICAgICBoaXRJbnNpZGVcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgcG9pbnQgaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZSB0byBhIHBvaW50IGluIHRoZSBsb2NhbCBzcGFjZSBvZiBhIHNoYXBlLiBGb3IgZXhhbXBsZSwgaWYgYVxuICAgKiBzaGFwZSdzIHBhZ2UgcG9pbnQgd2VyZSBgeyB4OiAxMDAsIHk6IDEwMCB9YCwgYSBwYWdlIHBvaW50IGF0IGB7IHg6IDExMCwgeTogMTEwIH1gIHdvdWxkIGJlIGF0XG4gICAqIGB7IHg6IDEwLCB5OiAxMCB9YCBpbiB0aGUgc2hhcGUncyBsb2NhbCBzcGFjZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFBvaW50SW5TaGFwZVNwYWNlKG15U2hhcGUsIHsgeDogMTAwLCB5OiAxMDAgfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB0byBnZXQgdGhlIHBvaW50IGluIHRoZSBsb2NhbCBzcGFjZSBvZi5cbiAgICogQHBhcmFtIHBvaW50IC0gVGhlIHBhZ2UgcG9pbnQgdG8gZ2V0IGluIHRoZSBsb2NhbCBzcGFjZSBvZiB0aGUgc2hhcGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFBvaW50SW5TaGFwZVNwYWNlKHNoYXBlLCBwb2ludCkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICByZXR1cm4gdGhpcy5fZ2V0U2hhcGVQYWdlVHJhbnNmb3JtQ2FjaGUoKS5nZXQoaWQpLmNsb25lKCkuaW52ZXJ0KCkuYXBwbHlUb1BvaW50KHBvaW50KTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIGRlbHRhIGluIHRoZSBjdXJyZW50IHBhZ2Ugc3BhY2UgdG8gYSBwb2ludCBpbiB0aGUgbG9jYWwgc3BhY2Ugb2YgYSBzaGFwZSdzIHBhcmVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmdldFBvaW50SW5QYXJlbnRTcGFjZShteVNoYXBlLmlkLCB7IHg6IDEwMCwgeTogMTAwIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgdG8gZ2V0IHRoZSBwb2ludCBpbiB0aGUgbG9jYWwgc3BhY2Ugb2YuXG4gICAqIEBwYXJhbSBwb2ludCAtIFRoZSBwYWdlIHBvaW50IHRvIGdldCBpbiB0aGUgbG9jYWwgc3BhY2Ugb2YgdGhlIHNoYXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRQb2ludEluUGFyZW50U3BhY2Uoc2hhcGUsIHBvaW50KSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlLmlkO1xuICAgIGNvbnN0IGZyZXNoU2hhcGUgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICBpZiAoIWZyZXNoU2hhcGUpXG4gICAgICByZXR1cm4gbmV3IFZlYygwLCAwKTtcbiAgICBpZiAoaXNQYWdlSWQoZnJlc2hTaGFwZS5wYXJlbnRJZCkpXG4gICAgICByZXR1cm4gVmVjLkZyb20ocG9pbnQpO1xuICAgIGNvbnN0IHBhcmVudFRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKGZyZXNoU2hhcGUucGFyZW50SWQpO1xuICAgIGlmICghcGFyZW50VHJhbnNmb3JtKVxuICAgICAgcmV0dXJuIFZlYy5Gcm9tKHBvaW50KTtcbiAgICByZXR1cm4gcGFyZW50VHJhbnNmb3JtLmNsb25lKCkuaW52ZXJ0KCkuYXBwbHlUb1BvaW50KHBvaW50KTtcbiAgfVxuICBnZXRDdXJyZW50UGFnZVNoYXBlcygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmdldEN1cnJlbnRQYWdlU2hhcGVJZHMoKSwgKGlkKSA9PiB0aGlzLnN0b3JlLmdldChpZCkpO1xuICB9XG4gIGdldEN1cnJlbnRQYWdlU2hhcGVzU29ydGVkKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGNvbnN0IHRvcExldmVsU2hhcGVzID0gdGhpcy5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudCh0aGlzLmdldEN1cnJlbnRQYWdlSWQoKSk7XG4gICAgZm9yIChsZXQgaSA9IDAsIG4gPSB0b3BMZXZlbFNoYXBlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIHB1c2hTaGFwZVdpdGhEZXNjZW5kYW50cyh0aGlzLCB0b3BMZXZlbFNoYXBlc1tpXSwgcmVzdWx0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBnZXRDdXJyZW50UGFnZVJlbmRlcmluZ1NoYXBlc1NvcnRlZCgpIHtcbiAgICBjb25zdCBjdWxsZWRTaGFwZXMgPSB0aGlzLmdldEN1bGxlZFNoYXBlcygpO1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRQYWdlU2hhcGVzU29ydGVkKCkuZmlsdGVyKCh7IGlkIH0pID0+ICFjdWxsZWRTaGFwZXMuaGFzKGlkKSk7XG4gIH1cbiAgaXNTaGFwZU9mVHlwZShhcmcsIHR5cGUpIHtcbiAgICBjb25zdCBzaGFwZSA9IHR5cGVvZiBhcmcgPT09IFwic3RyaW5nXCIgPyB0aGlzLmdldFNoYXBlKGFyZykgOiBhcmc7XG4gICAgaWYgKCFzaGFwZSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gc2hhcGUudHlwZSA9PT0gdHlwZTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgc2hhcGUgYnkgaXRzIGlkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0U2hhcGUoJ2JveDEnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGlkIC0gVGhlIGlkIG9mIHRoZSBzaGFwZSB0byBnZXQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFNoYXBlKHNoYXBlKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlLmlkO1xuICAgIGlmICghaXNTaGFwZUlkKGlkKSlcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0KGlkKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBwYXJlbnQgc2hhcGUgZm9yIGEgZ2l2ZW4gc2hhcGUuIFJldHVybnMgdW5kZWZpbmVkIGlmIHRoZSBzaGFwZSBpcyB0aGUgZGlyZWN0IGNoaWxkIG9mXG4gICAqIHRoZSBwYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0U2hhcGVQYXJlbnQobXlTaGFwZSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldFNoYXBlUGFyZW50KHNoYXBlKSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlPy5pZDtcbiAgICBpZiAoIWlkKVxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICBjb25zdCBmcmVzaFNoYXBlID0gdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgaWYgKGZyZXNoU2hhcGUgPT09IHZvaWQgMCB8fCAhaXNTaGFwZUlkKGZyZXNoU2hhcGUucGFyZW50SWQpKVxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5nZXQoZnJlc2hTaGFwZS5wYXJlbnRJZCk7XG4gIH1cbiAgLyoqXG4gICAqIElmIHNpYmxpbmdTaGFwZSBhbmQgdGFyZ2V0U2hhcGUgYXJlIHNpYmxpbmdzLCB0aGlzIHJldHVybnMgdGFyZ2V0U2hhcGUuIElmIHRhcmdldFNoYXBlIGhhcyBhblxuICAgKiBhbmNlc3RvciB3aG8gaXMgYSBzaWJsaW5nIG9mIHNpYmxpbmdTaGFwZSwgdGhpcyByZXR1cm5zIHRoYXQgYW5jZXN0b3IuIE90aGVyd2lzZSwgdGhpcyByZXR1cm5zXG4gICAqIHVuZGVmaW5lZC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXRTaGFwZU5lYXJlc3RTaWJsaW5nKHNpYmxpbmdTaGFwZSwgdGFyZ2V0U2hhcGUpIHtcbiAgICBpZiAoIXRhcmdldFNoYXBlKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBpZiAodGFyZ2V0U2hhcGUucGFyZW50SWQgPT09IHNpYmxpbmdTaGFwZS5wYXJlbnRJZCkge1xuICAgICAgcmV0dXJuIHRhcmdldFNoYXBlO1xuICAgIH1cbiAgICBjb25zdCBhbmNlc3RvciA9IHRoaXMuZmluZFNoYXBlQW5jZXN0b3IoXG4gICAgICB0YXJnZXRTaGFwZSxcbiAgICAgIChhbmNlc3RvcjIpID0+IGFuY2VzdG9yMi5wYXJlbnRJZCA9PT0gc2libGluZ1NoYXBlLnBhcmVudElkXG4gICAgKTtcbiAgICByZXR1cm4gYW5jZXN0b3I7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB3aGV0aGVyIHRoZSBnaXZlbiBzaGFwZSBpcyB0aGUgZGVzY2VuZGFudCBvZiB0aGUgZ2l2ZW4gcGFnZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmlzU2hhcGVJblBhZ2UobXlTaGFwZSlcbiAgICogZWRpdG9yLmlzU2hhcGVJblBhZ2UobXlTaGFwZSwgJ3BhZ2UxJylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB0byBjaGVjay5cbiAgICogQHBhcmFtIHBhZ2VJZCAtIFRoZSBpZCBvZiB0aGUgcGFnZSB0byBjaGVjayBhZ2FpbnN0LiBEZWZhdWx0cyB0byB0aGUgY3VycmVudCBwYWdlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBpc1NoYXBlSW5QYWdlKHNoYXBlLCBwYWdlSWQgPSB0aGlzLmdldEN1cnJlbnRQYWdlSWQoKSkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICBjb25zdCBzaGFwZVRvQ2hlY2sgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICBpZiAoIXNoYXBlVG9DaGVjaylcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc2hhcGVJc0luUGFnZSA9IGZhbHNlO1xuICAgIGlmIChzaGFwZVRvQ2hlY2sucGFyZW50SWQgPT09IHBhZ2VJZCkge1xuICAgICAgc2hhcGVJc0luUGFnZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmdldFNoYXBlKHNoYXBlVG9DaGVjay5wYXJlbnRJZCk7XG4gICAgICBpc0luUGFnZVNlYXJjaDpcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgIGlmIChwYXJlbnQucGFyZW50SWQgPT09IHBhZ2VJZCkge1xuICAgICAgICAgICAgc2hhcGVJc0luUGFnZSA9IHRydWU7XG4gICAgICAgICAgICBicmVhayBpc0luUGFnZVNlYXJjaDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFyZW50ID0gdGhpcy5nZXRTaGFwZShwYXJlbnQucGFyZW50SWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaGFwZUlzSW5QYWdlO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGlkIG9mIHRoZSBjb250YWluaW5nIHBhZ2UgZm9yIGEgZ2l2ZW4gc2hhcGUuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB0byBnZXQgdGhlIHBhZ2UgaWQgZm9yLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgaWQgb2YgdGhlIHBhZ2UgdGhhdCBjb250YWlucyB0aGUgc2hhcGUsIG9yIHVuZGVmaW5lZCBpZiB0aGUgc2hhcGUgaXMgdW5kZWZpbmVkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRBbmNlc3RvclBhZ2VJZChzaGFwZSkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZT8uaWQ7XG4gICAgY29uc3QgX3NoYXBlID0gaWQgJiYgdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgaWYgKCFfc2hhcGUpXG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIGlmIChpc1BhZ2VJZChfc2hhcGUucGFyZW50SWQpKSB7XG4gICAgICByZXR1cm4gX3NoYXBlLnBhcmVudElkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRBbmNlc3RvclBhZ2VJZCh0aGlzLmdldFNoYXBlKF9zaGFwZS5wYXJlbnRJZCkpO1xuICAgIH1cbiAgfVxuICAvLyBQYXJlbnRzIGFuZCBjaGlsZHJlblxuICAvKipcbiAgICogQSBjYWNoZSBvZiBwYXJlbnRzIHRvIGNoaWxkcmVuLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9wYXJlbnRJZHNUb0NoaWxkSWRzO1xuICAvKipcbiAgICogUmVwYXJlbnQgc2hhcGVzIHRvIGEgbmV3IHBhcmVudC4gVGhpcyBvcGVyYXRpb24gcHJlc2VydmVzIHRoZSBzaGFwZSdzIGN1cnJlbnQgcGFnZSBwb3NpdGlvbnMgL1xuICAgKiByb3RhdGlvbnMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5yZXBhcmVudFNoYXBlcyhbYm94MSwgYm94Ml0sICdmcmFtZTEnKVxuICAgKiBlZGl0b3IucmVwYXJlbnRTaGFwZXMoW2JveDEuaWQsIGJveDIuaWRdLCAnZnJhbWUxJylcbiAgICogZWRpdG9yLnJlcGFyZW50U2hhcGVzKFtib3gxLmlkLCBib3gyLmlkXSwgJ2ZyYW1lMScsIDQpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGVzIC0gVGhlIHNoYXBlcyAob3Igc2hhcGUgaWRzKSBvZiB0aGUgc2hhcGVzIHRvIHJlcGFyZW50LlxuICAgKiBAcGFyYW0gcGFyZW50SWQgLSBUaGUgaWQgb2YgdGhlIG5ldyBwYXJlbnQgc2hhcGUuXG4gICAqIEBwYXJhbSBpbnNlcnRJbmRleCAtIFRoZSBpbmRleCB0byBpbnNlcnQgdGhlIGNoaWxkcmVuLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZXBhcmVudFNoYXBlcyhzaGFwZXMsIHBhcmVudElkLCBpbnNlcnRJbmRleCkge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzKSA9PiBzLmlkKTtcbiAgICBpZiAoaWRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGNoYW5nZXMgPSBbXTtcbiAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSBpc1BhZ2VJZChwYXJlbnRJZCkgPyBNYXQuSWRlbnRpdHkoKSA6IHRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHBhcmVudElkKTtcbiAgICBjb25zdCBwYXJlbnRQYWdlUm90YXRpb24gPSBwYXJlbnRUcmFuc2Zvcm0ucm90YXRpb24oKTtcbiAgICBsZXQgaW5kaWNlcyA9IFtdO1xuICAgIGNvbnN0IHNpYnMgPSBjb21wYWN0KHRoaXMuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQocGFyZW50SWQpLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGUoaWQpKSk7XG4gICAgaWYgKGluc2VydEluZGV4KSB7XG4gICAgICBjb25zdCBzaWJXaXRoSW5zZXJ0SW5kZXggPSBzaWJzLmZpbmQoKHMpID0+IHMuaW5kZXggPT09IGluc2VydEluZGV4KTtcbiAgICAgIGlmIChzaWJXaXRoSW5zZXJ0SW5kZXgpIHtcbiAgICAgICAgY29uc3Qgc2liQWJvdmUgPSBzaWJzW3NpYnMuaW5kZXhPZihzaWJXaXRoSW5zZXJ0SW5kZXgpICsgMV07XG4gICAgICAgIGlmIChzaWJBYm92ZSkge1xuICAgICAgICAgIGluZGljZXMgPSBnZXRJbmRpY2VzQmV0d2VlbihpbnNlcnRJbmRleCwgc2liQWJvdmUuaW5kZXgsIGlkcy5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluZGljZXMgPSBnZXRJbmRpY2VzQWJvdmUoaW5zZXJ0SW5kZXgsIGlkcy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzaWJBYm92ZSA9IHNpYnMuc29ydChzb3J0QnlJbmRleCkuZmluZCgocykgPT4gcy5pbmRleCA+IGluc2VydEluZGV4KTtcbiAgICAgICAgaWYgKHNpYkFib3ZlKSB7XG4gICAgICAgICAgaW5kaWNlcyA9IGdldEluZGljZXNCZXR3ZWVuKGluc2VydEluZGV4LCBzaWJBYm92ZS5pbmRleCwgaWRzLmxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5kaWNlcyA9IGdldEluZGljZXNBYm92ZShpbnNlcnRJbmRleCwgaWRzLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2liID0gc2licy5sZW5ndGggJiYgc2lic1tzaWJzLmxlbmd0aCAtIDFdO1xuICAgICAgaW5kaWNlcyA9IHNpYiA/IGdldEluZGljZXNBYm92ZShzaWIuaW5kZXgsIGlkcy5sZW5ndGgpIDogZ2V0SW5kaWNlcyhpZHMubGVuZ3RoKTtcbiAgICB9XG4gICAgY29uc3QgaW52ZXJ0ZWRQYXJlbnRUcmFuc2Zvcm0gPSBwYXJlbnRUcmFuc2Zvcm0uY2xvbmUoKS5pbnZlcnQoKTtcbiAgICBjb25zdCBzaGFwZXNUb1JlcGFyZW50ID0gY29tcGFjdChpZHMubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZShpZCkpKTtcbiAgICBjb25zdCBsb2NrZWRTaGFwZXMgPSBzaGFwZXNUb1JlcGFyZW50LmZpbHRlcigoc2hhcGUpID0+IHNoYXBlLmlzTG9ja2VkKTtcbiAgICBpZiAobG9ja2VkU2hhcGVzLmxlbmd0aCkge1xuICAgICAgdGhpcy51cGRhdGVTaGFwZXMobG9ja2VkU2hhcGVzLm1hcCgoeyBpZCwgdHlwZSB9KSA9PiAoeyBpZCwgdHlwZSwgaXNMb2NrZWQ6IGZhbHNlIH0pKSk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hhcGVzVG9SZXBhcmVudC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNUb1JlcGFyZW50W2ldO1xuICAgICAgY29uc3QgcGFnZVRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlKTtcbiAgICAgIGlmICghcGFnZVRyYW5zZm9ybSlcbiAgICAgICAgY29udGludWU7XG4gICAgICBjb25zdCBwYWdlUG9pbnQgPSBwYWdlVHJhbnNmb3JtLnBvaW50KCk7XG4gICAgICBpZiAoIXBhZ2VQb2ludClcbiAgICAgICAgY29udGludWU7XG4gICAgICBjb25zdCBuZXdQb2ludCA9IGludmVydGVkUGFyZW50VHJhbnNmb3JtLmFwcGx5VG9Qb2ludChwYWdlUG9pbnQpO1xuICAgICAgY29uc3QgbmV3Um90YXRpb24gPSBwYWdlVHJhbnNmb3JtLnJvdGF0aW9uKCkgLSBwYXJlbnRQYWdlUm90YXRpb247XG4gICAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgICBpZDogc2hhcGUuaWQsXG4gICAgICAgIHR5cGU6IHNoYXBlLnR5cGUsXG4gICAgICAgIHBhcmVudElkLFxuICAgICAgICB4OiBuZXdQb2ludC54LFxuICAgICAgICB5OiBuZXdQb2ludC55LFxuICAgICAgICByb3RhdGlvbjogbmV3Um90YXRpb24sXG4gICAgICAgIGluZGV4OiBpbmRpY2VzW2ldLFxuICAgICAgICBpc0xvY2tlZDogc2hhcGUuaXNMb2NrZWRcbiAgICAgICAgLy8gdGhpcyB3aWxsIHJlLWxvY2sgbG9ja2VkIHNoYXBlc1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlU2hhcGVzKGNoYW5nZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGluZGV4IGFib3ZlIHRoZSBoaWdoZXN0IGNoaWxkIG9mIGEgZ2l2ZW4gcGFyZW50LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50SWQgLSBUaGUgaWQgb2YgdGhlIHBhcmVudC5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIGluZGV4LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRIaWdoZXN0SW5kZXhGb3JQYXJlbnQocGFyZW50KSB7XG4gICAgY29uc3QgcGFyZW50SWQgPSB0eXBlb2YgcGFyZW50ID09PSBcInN0cmluZ1wiID8gcGFyZW50IDogcGFyZW50LmlkO1xuICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5fcGFyZW50SWRzVG9DaGlsZElkcy5nZXQoKVtwYXJlbnRJZF07XG4gICAgaWYgKCFjaGlsZHJlbiB8fCBjaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBcImExXCI7XG4gICAgfVxuICAgIGNvbnN0IHNoYXBlID0gdGhpcy5nZXRTaGFwZShjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXSk7XG4gICAgcmV0dXJuIGdldEluZGV4QWJvdmUoc2hhcGUuaW5kZXgpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gYXJyYXkgb2YgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIHNoYXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQoJ2ZyYW1lMScpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50SWQgLSBUaGUgaWQgb2YgdGhlIHBhcmVudCBzaGFwZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQocGFyZW50KSB7XG4gICAgY29uc3QgcGFyZW50SWQgPSB0eXBlb2YgcGFyZW50ID09PSBcInN0cmluZ1wiID8gcGFyZW50IDogcGFyZW50LmlkO1xuICAgIGNvbnN0IGlkcyA9IHRoaXMuX3BhcmVudElkc1RvQ2hpbGRJZHMuZ2V0KClbcGFyZW50SWRdO1xuICAgIGlmICghaWRzKVxuICAgICAgcmV0dXJuIEVNUFRZX0FSUkFZO1xuICAgIHJldHVybiBpZHM7XG4gIH1cbiAgLyoqXG4gICAqIFJ1biBhIHZpc2l0b3IgZnVuY3Rpb24gZm9yIGFsbCBkZXNjZW5kYW50cyBvZiBhIHNoYXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IudmlzaXREZXNjZW5kYW50cygnZnJhbWUxJywgbXlDYWxsYmFjaylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnRJZCAtIFRoZSBpZCBvZiB0aGUgcGFyZW50IHNoYXBlLlxuICAgKiBAcGFyYW0gdmlzaXRvciAtIFRoZSB2aXNpdG9yIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICB2aXNpdERlc2NlbmRhbnRzKHBhcmVudCwgdmlzaXRvcikge1xuICAgIGNvbnN0IHBhcmVudElkID0gdHlwZW9mIHBhcmVudCA9PT0gXCJzdHJpbmdcIiA/IHBhcmVudCA6IHBhcmVudC5pZDtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQocGFyZW50SWQpO1xuICAgIGZvciAoY29uc3QgaWQgb2YgY2hpbGRyZW4pIHtcbiAgICAgIGlmICh2aXNpdG9yKGlkKSA9PT0gZmFsc2UpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgdGhpcy52aXNpdERlc2NlbmRhbnRzKGlkLCB2aXNpdG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgc2hhcGUgaWRzIG9mIGFsbCBkZXNjZW5kYW50cyBvZiB0aGUgZ2l2ZW4gc2hhcGVzIChpbmNsdWRpbmcgdGhlIHNoYXBlcyB0aGVtc2VsdmVzKS4gSURzIGFyZSByZXR1cm5lZCBpbiB6LWluZGV4IG9yZGVyLlxuICAgKlxuICAgKiBAcGFyYW0gaWRzIC0gVGhlIGlkcyBvZiB0aGUgc2hhcGVzIHRvIGdldCBkZXNjZW5kYW50cyBvZi5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIGRlc2NlbmRhbnQgaWRzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTaGFwZUFuZERlc2NlbmRhbnRJZHMoaWRzKSB7XG4gICAgY29uc3Qgc2hhcGVJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3Qgc2hhcGUgb2YgaWRzLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGUoaWQpKS5zb3J0KHNvcnRCeUluZGV4KSkge1xuICAgICAgc2hhcGVJZHMuYWRkKHNoYXBlLmlkKTtcbiAgICAgIHRoaXMudmlzaXREZXNjZW5kYW50cyhzaGFwZSwgKGRlc2NlbmRhbnRJZCkgPT4ge1xuICAgICAgICBzaGFwZUlkcy5hZGQoZGVzY2VuZGFudElkKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gc2hhcGVJZHM7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgc2hhcGUgdGhhdCBzb21lIHNoYXBlcyBzaG91bGQgYmUgZHJvcHBlZCBvbiBhdCBhIGdpdmVuIHBvaW50LlxuICAgKlxuICAgKiBAcGFyYW0gcG9pbnQgLSBUaGUgcG9pbnQgdG8gZmluZCB0aGUgcGFyZW50IGZvci5cbiAgICogQHBhcmFtIGRyb3BwaW5nU2hhcGVzIC0gVGhlIHNoYXBlcyB0aGF0IGFyZSBiZWluZyBkcm9wcGVkLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgc2hhcGUgdG8gZHJvcCBvbi5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0RHJvcHBpbmdPdmVyU2hhcGUocG9pbnQsIGRyb3BwaW5nU2hhcGVzID0gW10pIHtcbiAgICBjb25zdCBjdXJyZW50UGFnZVNoYXBlc1NvcnRlZCA9IHRoaXMuZ2V0Q3VycmVudFBhZ2VTaGFwZXNTb3J0ZWQoKTtcbiAgICBmb3IgKGxldCBpID0gY3VycmVudFBhZ2VTaGFwZXNTb3J0ZWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IHNoYXBlID0gY3VycmVudFBhZ2VTaGFwZXNTb3J0ZWRbaV07XG4gICAgICBpZiAoXG4gICAgICAgIC8vIGRvbid0IGFsbG93IGRyb3BwaW5nIG9uIHNlbGVjdGVkIHNoYXBlc1xuICAgICAgICB0aGlzLmdldFNlbGVjdGVkU2hhcGVJZHMoKS5pbmNsdWRlcyhzaGFwZS5pZCkgfHwgLy8gb25seSBhbGxvdyBzaGFwZXMgdGhhdCBjYW4gcmVjZWl2ZSBjaGlsZHJlblxuICAgICAgICAhdGhpcy5nZXRTaGFwZVV0aWwoc2hhcGUpLmNhbkRyb3BTaGFwZXMoc2hhcGUsIGRyb3BwaW5nU2hhcGVzKSB8fCAvLyBkb24ndCBhbGxvdyBkcm9wcGluZyBhIHNoYXBlIG9uIGl0c2VsZiBvciBvbmUgb2YgaXQncyBjaGlsZHJlblxuICAgICAgICBkcm9wcGluZ1NoYXBlcy5maW5kKChzKSA9PiBzLmlkID09PSBzaGFwZS5pZCB8fCB0aGlzLmhhc0FuY2VzdG9yKHNoYXBlLCBzLmlkKSlcbiAgICAgICkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1hc2tlZFBhZ2VCb3VuZHMgPSB0aGlzLmdldFNoYXBlTWFza2VkUGFnZUJvdW5kcyhzaGFwZS5pZCk7XG4gICAgICBpZiAobWFza2VkUGFnZUJvdW5kcyAmJiBtYXNrZWRQYWdlQm91bmRzLmNvbnRhaW5zUG9pbnQocG9pbnQpICYmIHRoaXMuZ2V0U2hhcGVHZW9tZXRyeShzaGFwZSkuaGl0VGVzdFBvaW50KHRoaXMuZ2V0UG9pbnRJblNoYXBlU3BhY2Uoc2hhcGUsIHBvaW50KSwgMCwgdHJ1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHNoYXBlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBzaGFwZSB0aGF0IHNob3VsZCBiZSBzZWxlY3RlZCB3aGVuIHlvdSBjbGljayBvbiBhIGdpdmVuIHNoYXBlLCBhc3N1bWluZyB0aGVyZSBpc1xuICAgKiBub3RoaW5nIGFscmVhZHkgc2VsZWN0ZWQuIEl0IHdpbGwgbm90IHJldHVybiBhbnl0aGluZyBoaWdoZXIgdGhhbiBvciBpbmNsdWRpbmcgdGhlIGN1cnJlbnRcbiAgICogZm9jdXMgbGF5ZXIuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB0byBnZXQgdGhlIG91dGVybW9zdCBzZWxlY3RhYmxlIHNoYXBlIGZvci5cbiAgICogQHBhcmFtIGZpbHRlciAtIEEgZnVuY3Rpb24gdG8gZmlsdGVyIHRoZSBzZWxlY3RhYmxlIHNoYXBlcy5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIG91dGVybW9zdCBzZWxlY3RhYmxlIHNoYXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRPdXRlcm1vc3RTZWxlY3RhYmxlU2hhcGUoc2hhcGUsIGZpbHRlcikge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICBjb25zdCBmcmVzaFNoYXBlID0gdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgbGV0IG1hdGNoID0gZnJlc2hTaGFwZTtcbiAgICBsZXQgbm9kZSA9IGZyZXNoU2hhcGU7XG4gICAgY29uc3QgZm9jdXNlZEdyb3VwID0gdGhpcy5nZXRGb2N1c2VkR3JvdXAoKTtcbiAgICB3aGlsZSAobm9kZSkge1xuICAgICAgaWYgKHRoaXMuaXNTaGFwZU9mVHlwZShub2RlLCBcImdyb3VwXCIpICYmIGZvY3VzZWRHcm91cD8uaWQgIT09IG5vZGUuaWQgJiYgIXRoaXMuaGFzQW5jZXN0b3IoZm9jdXNlZEdyb3VwLCBub2RlLmlkKSAmJiAoZmlsdGVyPy4obm9kZSkgPz8gdHJ1ZSkpIHtcbiAgICAgICAgbWF0Y2ggPSBub2RlO1xuICAgICAgfSBlbHNlIGlmIChmb2N1c2VkR3JvdXA/LmlkID09PSBub2RlLmlkKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbm9kZSA9IHRoaXMuZ2V0U2hhcGVQYXJlbnQobm9kZSk7XG4gICAgfVxuICAgIHJldHVybiBtYXRjaDtcbiAgfVxuICBfZ2V0QmluZGluZ3NJbmRleENhY2hlKCkge1xuICAgIGNvbnN0IGluZGV4ID0gYmluZGluZ3NJbmRleCh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5jcmVhdGVDb21wdXRlZENhY2hlKFwiYmluZGluZ3NJbmRleFwiLCAoc2hhcGUpID0+IHtcbiAgICAgIHJldHVybiBpbmRleC5nZXQoKS5nZXQoc2hhcGUuaWQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBiaW5kaW5nIGZyb20gdGhlIHN0b3JlIGJ5IGl0cyBJRCBpZiBpdCBleGlzdHMuXG4gICAqL1xuICBnZXRCaW5kaW5nKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0KGlkKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFsbCBiaW5kaW5ncyBvZiBhIGNlcnRhaW4gdHlwZSBfZnJvbV8gYSBwYXJ0aWN1bGFyIHNoYXBlLiBUaGVzZSBhcmUgdGhlIGJpbmRpbmdzIHdob3NlXG4gICAqIGBmcm9tSWRgIG1hdGNoZWQgdGhlIHNoYXBlJ3MgSUQuXG4gICAqL1xuICBnZXRCaW5kaW5nc0Zyb21TaGFwZShzaGFwZSwgdHlwZSkge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIHNoYXBlID09PSBcInN0cmluZ1wiID8gc2hhcGUgOiBzaGFwZS5pZDtcbiAgICByZXR1cm4gdGhpcy5nZXRCaW5kaW5nc0ludm9sdmluZ1NoYXBlKGlkKS5maWx0ZXIoXG4gICAgICAoYikgPT4gYi5mcm9tSWQgPT09IGlkICYmIGIudHlwZSA9PT0gdHlwZVxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbGwgYmluZGluZ3Mgb2YgYSBjZXJ0YWluIHR5cGUgX3RvXyBhIHBhcnRpY3VsYXIgc2hhcGUuIFRoZXNlIGFyZSB0aGUgYmluZGluZ3Mgd2hvc2VcbiAgICogYHRvSWRgIG1hdGNoZXMgdGhlIHNoYXBlJ3MgSUQuXG4gICAqL1xuICBnZXRCaW5kaW5nc1RvU2hhcGUoc2hhcGUsIHR5cGUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQ7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QmluZGluZ3NJbnZvbHZpbmdTaGFwZShpZCkuZmlsdGVyKFxuICAgICAgKGIpID0+IGIudG9JZCA9PT0gaWQgJiYgYi50eXBlID09PSB0eXBlXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFsbCBiaW5kaW5ncyBpbnZvbHZpbmcgYSBwYXJ0aWN1bGFyIHNoYXBlLiBUaGlzIGluY2x1ZGVzIGJpbmRpbmdzIHdoZXJlIHRoZSBzaGFwZSBpcyB0aGVcbiAgICogYGZyb21JZGAgb3IgYHRvSWRgLiBJZiBhIHR5cGUgaXMgcHJvdmlkZWQsIG9ubHkgYmluZGluZ3Mgb2YgdGhhdCB0eXBlIGFyZSByZXR1cm5lZC5cbiAgICovXG4gIGdldEJpbmRpbmdzSW52b2x2aW5nU2hhcGUoc2hhcGUsIHR5cGUpIHtcbiAgICBjb25zdCBpZCA9IHR5cGVvZiBzaGFwZSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlIDogc2hhcGUuaWQ7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZ2V0QmluZGluZ3NJbmRleENhY2hlKCkuZ2V0KGlkKSA/PyBFTVBUWV9BUlJBWTtcbiAgICBpZiAoIXR5cGUpXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIHJldHVybiByZXN1bHQuZmlsdGVyKChiKSA9PiBiLnR5cGUgPT09IHR5cGUpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYmluZGluZ3MgZnJvbSBhIGxpc3Qgb2YgcGFydGlhbCBiaW5kaW5ncy4gWW91IGNhbiBvbWl0IHRoZSBJRCBhbmQgbW9zdCBwcm9wcyBvZiBhXG4gICAqIGJpbmRpbmcsIGJ1dCB0aGUgYHR5cGVgLCBgdG9JZGAsIGFuZCBgZnJvbUlkYCBtdXN0IGFsbCBiZSBwcm92aWRlZC5cbiAgICovXG4gIGNyZWF0ZUJpbmRpbmdzKHBhcnRpYWxzKSB7XG4gICAgY29uc3QgYmluZGluZ3MgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHBhcnRpYWwgb2YgcGFydGlhbHMpIHtcbiAgICAgIGNvbnN0IGZyb21TaGFwZSA9IHRoaXMuZ2V0U2hhcGUocGFydGlhbC5mcm9tSWQpO1xuICAgICAgY29uc3QgdG9TaGFwZSA9IHRoaXMuZ2V0U2hhcGUocGFydGlhbC50b0lkKTtcbiAgICAgIGlmICghZnJvbVNoYXBlIHx8ICF0b1NoYXBlKVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIGlmICghdGhpcy5jYW5CaW5kU2hhcGVzKHsgZnJvbVNoYXBlLCB0b1NoYXBlLCBiaW5kaW5nOiBwYXJ0aWFsIH0pKVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIGNvbnN0IHV0aWwgPSB0aGlzLmdldEJpbmRpbmdVdGlsKHBhcnRpYWwudHlwZSk7XG4gICAgICBjb25zdCBkZWZhdWx0UHJvcHMgPSB1dGlsLmdldERlZmF1bHRQcm9wcygpO1xuICAgICAgY29uc3QgYmluZGluZyA9IHRoaXMuc3RvcmUuc2NoZW1hLnR5cGVzLmJpbmRpbmcuY3JlYXRlKHtcbiAgICAgICAgLi4ucGFydGlhbCxcbiAgICAgICAgaWQ6IHBhcnRpYWwuaWQgPz8gY3JlYXRlQmluZGluZ0lkKCksXG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgLi4uZGVmYXVsdFByb3BzLFxuICAgICAgICAgIC4uLnBhcnRpYWwucHJvcHNcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBiaW5kaW5ncy5wdXNoKGJpbmRpbmcpO1xuICAgIH1cbiAgICB0aGlzLnN0b3JlLnB1dChiaW5kaW5ncyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHNpbmdsZSBiaW5kaW5nIGZyb20gYSBwYXJ0aWFsLiBZb3UgY2FuIG9taXQgdGhlIElEIGFuZCBtb3N0IHByb3BzIG9mIGEgYmluZGluZywgYnV0XG4gICAqIHRoZSBgdHlwZWAsIGB0b0lkYCwgYW5kIGBmcm9tSWRgIG11c3QgYWxsIGJlIHByb3ZpZGVkLlxuICAgKi9cbiAgY3JlYXRlQmluZGluZyhwYXJ0aWFsKSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlQmluZGluZ3MoW3BhcnRpYWxdKTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIGJpbmRpbmdzIGZyb20gYSBsaXN0IG9mIHBhcnRpYWwgYmluZGluZ3MuIEVhY2ggcGFydGlhbCBtdXN0IGluY2x1ZGUgYW4gSUQsIHdoaWNoIHdpbGxcbiAgICogYmUgdXNlZCB0byBtYXRjaCB0aGUgYmluZGluZyB0byBpdCdzIGV4aXN0aW5nIHJlY29yZC4gSWYgdGhlcmUgaXMgbm8gZXhpc3RpbmcgcmVjb3JkLCB0aGF0XG4gICAqIGJpbmRpbmcgaXMgc2tpcHBlZC4gVGhlIGNoYW5nZXMgZnJvbSB0aGUgcGFydGlhbCBhcmUgbWVyZ2VkIGludG8gdGhlIGV4aXN0aW5nIHJlY29yZC5cbiAgICovXG4gIHVwZGF0ZUJpbmRpbmdzKHBhcnRpYWxzKSB7XG4gICAgY29uc3QgdXBkYXRlZCA9IFtdO1xuICAgIGZvciAoY29uc3QgcGFydGlhbCBvZiBwYXJ0aWFscykge1xuICAgICAgaWYgKCFwYXJ0aWFsKVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmdldEJpbmRpbmcocGFydGlhbC5pZCk7XG4gICAgICBpZiAoIWN1cnJlbnQpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgY29uc3QgdXBkYXRlZEJpbmRpbmcgPSBhcHBseVBhcnRpYWxUb1JlY29yZFdpdGhQcm9wcyhjdXJyZW50LCBwYXJ0aWFsKTtcbiAgICAgIGlmICh1cGRhdGVkQmluZGluZyA9PT0gY3VycmVudClcbiAgICAgICAgY29udGludWU7XG4gICAgICBjb25zdCBmcm9tU2hhcGUgPSB0aGlzLmdldFNoYXBlKHVwZGF0ZWRCaW5kaW5nLmZyb21JZCk7XG4gICAgICBjb25zdCB0b1NoYXBlID0gdGhpcy5nZXRTaGFwZSh1cGRhdGVkQmluZGluZy50b0lkKTtcbiAgICAgIGlmICghZnJvbVNoYXBlIHx8ICF0b1NoYXBlKVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIGlmICghdGhpcy5jYW5CaW5kU2hhcGVzKHsgZnJvbVNoYXBlLCB0b1NoYXBlLCBiaW5kaW5nOiB1cGRhdGVkQmluZGluZyB9KSlcbiAgICAgICAgY29udGludWU7XG4gICAgICB1cGRhdGVkLnB1c2godXBkYXRlZEJpbmRpbmcpO1xuICAgIH1cbiAgICB0aGlzLnN0b3JlLnB1dCh1cGRhdGVkKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIGEgYmluZGluZyBmcm9tIGEgcGFydGlhbCBiaW5kaW5nLiBFYWNoIHBhcnRpYWwgbXVzdCBpbmNsdWRlIGFuIElELCB3aGljaCB3aWxsIGJlIHVzZWRcbiAgICogdG8gbWF0Y2ggdGhlIGJpbmRpbmcgdG8gaXQncyBleGlzdGluZyByZWNvcmQuIElmIHRoZXJlIGlzIG5vIGV4aXN0aW5nIHJlY29yZCwgdGhhdCBiaW5kaW5nIGlzXG4gICAqIHNraXBwZWQuIFRoZSBjaGFuZ2VzIGZyb20gdGhlIHBhcnRpYWwgYXJlIG1lcmdlZCBpbnRvIHRoZSBleGlzdGluZyByZWNvcmQuXG4gICAqL1xuICB1cGRhdGVCaW5kaW5nKHBhcnRpYWwpIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVCaW5kaW5ncyhbcGFydGlhbF0pO1xuICB9XG4gIC8qKlxuICAgKiBEZWxldGUgc2V2ZXJhbCBiaW5kaW5ncyBieSB0aGVpciBJRHMuIElmIGEgYmluZGluZyBJRCBkb2Vzbid0IGV4aXN0LCBpdCdzIGlnbm9yZWQuXG4gICAqL1xuICBkZWxldGVCaW5kaW5ncyhiaW5kaW5ncywgeyBpc29sYXRlU2hhcGVzID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgY29uc3QgaWRzID0gYmluZGluZ3MubWFwKChiaW5kaW5nKSA9PiB0eXBlb2YgYmluZGluZyA9PT0gXCJzdHJpbmdcIiA/IGJpbmRpbmcgOiBiaW5kaW5nLmlkKTtcbiAgICBpZiAoaXNvbGF0ZVNoYXBlcykge1xuICAgICAgdGhpcy5zdG9yZS5hdG9taWMoKCkgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykge1xuICAgICAgICAgIGNvbnN0IGJpbmRpbmcgPSB0aGlzLmdldEJpbmRpbmcoaWQpO1xuICAgICAgICAgIGlmICghYmluZGluZylcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIGNvbnN0IHV0aWwgPSB0aGlzLmdldEJpbmRpbmdVdGlsKGJpbmRpbmcpO1xuICAgICAgICAgIHV0aWwub25CZWZvcmVJc29sYXRlRnJvbVNoYXBlPy4oeyBiaW5kaW5nLCByZW1vdmVkU2hhcGU6IHRoaXMuZ2V0U2hhcGUoYmluZGluZy50b0lkKSB9KTtcbiAgICAgICAgICB1dGlsLm9uQmVmb3JlSXNvbGF0ZVRvU2hhcGU/Lih7IGJpbmRpbmcsIHJlbW92ZWRTaGFwZTogdGhpcy5nZXRTaGFwZShiaW5kaW5nLmZyb21JZCkgfSk7XG4gICAgICAgICAgdGhpcy5zdG9yZS5yZW1vdmUoW2lkXSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0b3JlLnJlbW92ZShpZHMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIGEgYmluZGluZyBieSBpdHMgSUQuIElmIHRoZSBiaW5kaW5nIGRvZXNuJ3QgZXhpc3QsIGl0J3MgaWdub3JlZC5cbiAgICovXG4gIGRlbGV0ZUJpbmRpbmcoYmluZGluZywgb3B0cykge1xuICAgIHJldHVybiB0aGlzLmRlbGV0ZUJpbmRpbmdzKFtiaW5kaW5nXSwgb3B0cyk7XG4gIH1cbiAgY2FuQmluZFNoYXBlcyh7XG4gICAgZnJvbVNoYXBlLFxuICAgIHRvU2hhcGUsXG4gICAgYmluZGluZ1xuICB9KSB7XG4gICAgY29uc3QgZnJvbVNoYXBlVHlwZSA9IHR5cGVvZiBmcm9tU2hhcGUgPT09IFwic3RyaW5nXCIgPyBmcm9tU2hhcGUgOiBmcm9tU2hhcGUudHlwZTtcbiAgICBjb25zdCB0b1NoYXBlVHlwZSA9IHR5cGVvZiB0b1NoYXBlID09PSBcInN0cmluZ1wiID8gdG9TaGFwZSA6IHRvU2hhcGUudHlwZTtcbiAgICBjb25zdCBiaW5kaW5nVHlwZSA9IHR5cGVvZiBiaW5kaW5nID09PSBcInN0cmluZ1wiID8gYmluZGluZyA6IGJpbmRpbmcudHlwZTtcbiAgICBjb25zdCBjYW5CaW5kT3B0cyA9IHsgZnJvbVNoYXBlVHlwZSwgdG9TaGFwZVR5cGUsIGJpbmRpbmdUeXBlIH07XG4gICAgaWYgKGZyb21TaGFwZVR5cGUgPT09IHRvU2hhcGVUeXBlKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRTaGFwZVV0aWwoZnJvbVNoYXBlVHlwZSkuY2FuQmluZChjYW5CaW5kT3B0cyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldFNoYXBlVXRpbChmcm9tU2hhcGVUeXBlKS5jYW5CaW5kKGNhbkJpbmRPcHRzKSAmJiB0aGlzLmdldFNoYXBlVXRpbCh0b1NoYXBlVHlwZSkuY2FuQmluZChjYW5CaW5kT3B0cyk7XG4gIH1cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0gQ29tbWFuZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyoqXG4gICAqIFJvdGF0ZSBzaGFwZXMgYnkgYSBkZWx0YSBpbiByYWRpYW5zLlxuICAgKiBOb3RlOiBDdXJyZW50bHksIHRoaXMgYXNzdW1lcyB0aGF0IHRoZSBzaGFwZXMgYXJlIHlvdXIgY3VycmVudGx5IHNlbGVjdGVkIHNoYXBlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnJvdGF0ZVNoYXBlc0J5KGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKCksIE1hdGguUEkpXG4gICAqIGVkaXRvci5yb3RhdGVTaGFwZXNCeShlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpLCBNYXRoLlBJIC8gMilcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIG9mIHRoZSBzaGFwZXMgdG8gbW92ZS5cbiAgICogQHBhcmFtIGRlbHRhIC0gVGhlIGRlbHRhIGluIHJhZGlhbnMgdG8gYXBwbHkgdG8gdGhlIHNlbGVjdGlvbiByb3RhdGlvbi5cbiAgICovXG4gIHJvdGF0ZVNoYXBlc0J5KHNoYXBlcywgZGVsdGEpIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgaWYgKGlkcy5sZW5ndGggPD0gMClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gZ2V0Um90YXRpb25TbmFwc2hvdCh7IGVkaXRvcjogdGhpcyB9KTtcbiAgICBpZiAoIXNuYXBzaG90KVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgYXBwbHlSb3RhdGlvblRvU25hcHNob3RTaGFwZXMoeyBkZWx0YSwgc25hcHNob3QsIGVkaXRvcjogdGhpcywgc3RhZ2U6IFwib25lLW9mZlwiIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdldENoYW5nZXNUb1RyYW5zbGF0ZVNoYXBlKGluaXRpYWxTaGFwZSwgbmV3U2hhcGVDb29yZHMpIHtcbiAgICBsZXQgd29ya2luZ1NoYXBlID0gaW5pdGlhbFNoYXBlO1xuICAgIGNvbnN0IHV0aWwgPSB0aGlzLmdldFNoYXBlVXRpbChpbml0aWFsU2hhcGUpO1xuICAgIHdvcmtpbmdTaGFwZSA9IGFwcGx5UGFydGlhbFRvUmVjb3JkV2l0aFByb3BzKFxuICAgICAgd29ya2luZ1NoYXBlLFxuICAgICAgdXRpbC5vblRyYW5zbGF0ZVN0YXJ0Py4od29ya2luZ1NoYXBlKSA/PyB2b2lkIDBcbiAgICApO1xuICAgIHdvcmtpbmdTaGFwZSA9IGFwcGx5UGFydGlhbFRvUmVjb3JkV2l0aFByb3BzKHdvcmtpbmdTaGFwZSwge1xuICAgICAgaWQ6IGluaXRpYWxTaGFwZS5pZCxcbiAgICAgIHR5cGU6IGluaXRpYWxTaGFwZS50eXBlLFxuICAgICAgeDogbmV3U2hhcGVDb29yZHMueCxcbiAgICAgIHk6IG5ld1NoYXBlQ29vcmRzLnlcbiAgICB9KTtcbiAgICB3b3JraW5nU2hhcGUgPSBhcHBseVBhcnRpYWxUb1JlY29yZFdpdGhQcm9wcyhcbiAgICAgIHdvcmtpbmdTaGFwZSxcbiAgICAgIHV0aWwub25UcmFuc2xhdGU/Lihpbml0aWFsU2hhcGUsIHdvcmtpbmdTaGFwZSkgPz8gdm9pZCAwXG4gICAgKTtcbiAgICB3b3JraW5nU2hhcGUgPSBhcHBseVBhcnRpYWxUb1JlY29yZFdpdGhQcm9wcyhcbiAgICAgIHdvcmtpbmdTaGFwZSxcbiAgICAgIHV0aWwub25UcmFuc2xhdGVFbmQ/Lihpbml0aWFsU2hhcGUsIHdvcmtpbmdTaGFwZSkgPz8gdm9pZCAwXG4gICAgKTtcbiAgICByZXR1cm4gd29ya2luZ1NoYXBlO1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlIHNoYXBlcyBieSBhIGRlbHRhLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IubnVkZ2VTaGFwZXMoWydib3gxJywgJ2JveDInXSwgeyB4OiA4LCB5OiA4IH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGVzIC0gVGhlIHNoYXBlcyAob3Igc2hhcGUgaWRzKSB0byBtb3ZlLlxuICAgKiBAcGFyYW0gZGlyZWN0aW9uIC0gVGhlIGRpcmVjdGlvbiBpbiB3aGljaCB0byBtb3ZlIHRoZSBzaGFwZXMuXG4gICAqIEBwYXJhbSBoaXN0b3J5T3B0aW9ucyAtIFRoZSBoaXN0b3J5IG9wdGlvbnMgZm9yIHRoZSBjaGFuZ2UuXG4gICAqL1xuICBudWRnZVNoYXBlcyhzaGFwZXMsIG9mZnNldCkge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzKSA9PiBzLmlkKTtcbiAgICBpZiAoaWRzLmxlbmd0aCA8PSAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgY2hhbmdlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgaWQgb2YgaWRzKSB7XG4gICAgICBjb25zdCBzaGFwZSA9IHRoaXMuZ2V0U2hhcGUoaWQpO1xuICAgICAgY29uc3QgbG9jYWxEZWx0YSA9IFZlYy5Gcm9tKG9mZnNldCk7XG4gICAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSB0aGlzLmdldFNoYXBlUGFyZW50VHJhbnNmb3JtKHNoYXBlKTtcbiAgICAgIGlmIChwYXJlbnRUcmFuc2Zvcm0pXG4gICAgICAgIGxvY2FsRGVsdGEucm90KC1wYXJlbnRUcmFuc2Zvcm0ucm90YXRpb24oKSk7XG4gICAgICBjaGFuZ2VzLnB1c2godGhpcy5nZXRDaGFuZ2VzVG9UcmFuc2xhdGVTaGFwZShzaGFwZSwgbG9jYWxEZWx0YS5hZGQoc2hhcGUpKSk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlU2hhcGVzKGNoYW5nZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEdXBsaWNhdGUgc2hhcGVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZHVwbGljYXRlU2hhcGVzKFsnYm94MScsICdib3gyJ10sIHsgeDogOCwgeTogOCB9KVxuICAgKiBlZGl0b3IuZHVwbGljYXRlU2hhcGVzKGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlcygpLCB7IHg6IDgsIHk6IDggfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIGR1cGxpY2F0ZS5cbiAgICogQHBhcmFtIG9mZnNldCAtIFRoZSBvZmZzZXQgKGluIHBpeGVscykgdG8gYXBwbHkgdG8gdGhlIGR1cGxpY2F0ZWQgc2hhcGVzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBkdXBsaWNhdGVTaGFwZXMoc2hhcGVzLCBvZmZzZXQpIHtcbiAgICB0aGlzLmhpc3RvcnkuYmF0Y2goKCkgPT4ge1xuICAgICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgICAgaWYgKGlkcy5sZW5ndGggPD0gMClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICBjb25zdCBpbml0aWFsSWRzID0gbmV3IFNldChpZHMpO1xuICAgICAgY29uc3Qgc2hhcGVJZFNldCA9IHRoaXMuZ2V0U2hhcGVBbmREZXNjZW5kYW50SWRzKGlkcyk7XG4gICAgICBjb25zdCBvcmRlcmVkU2hhcGVJZHMgPSBbLi4uc2hhcGVJZFNldF0ucmV2ZXJzZSgpO1xuICAgICAgY29uc3Qgc2hhcGVJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgZm9yIChjb25zdCBzaGFwZUlkIG9mIHNoYXBlSWRTZXQpIHtcbiAgICAgICAgc2hhcGVJZHMuc2V0KHNoYXBlSWQsIGNyZWF0ZVNoYXBlSWQoKSk7XG4gICAgICB9XG4gICAgICBjb25zdCB7IHNoYXBlc1RvQ3JlYXRlLCBiaW5kaW5nc1RvQ3JlYXRlIH0gPSB3aXRoSXNvbGF0ZWRTaGFwZXMoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHNoYXBlSWRTZXQsXG4gICAgICAgIChiaW5kaW5nSWRzVG9NYWludGFpbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGJpbmRpbmdzVG9DcmVhdGUyID0gW107XG4gICAgICAgICAgZm9yIChjb25zdCBvcmlnaW5hbElkIG9mIGJpbmRpbmdJZHNUb01haW50YWluKSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbEJpbmRpbmcgPSB0aGlzLmdldEJpbmRpbmcob3JpZ2luYWxJZCk7XG4gICAgICAgICAgICBpZiAoIW9yaWdpbmFsQmluZGluZylcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBkdXBsaWNhdGVkSWQgPSBjcmVhdGVCaW5kaW5nSWQoKTtcbiAgICAgICAgICAgIGJpbmRpbmdzVG9DcmVhdGUyLnB1c2goe1xuICAgICAgICAgICAgICAuLi5vcmlnaW5hbEJpbmRpbmcsXG4gICAgICAgICAgICAgIGlkOiBkdXBsaWNhdGVkSWQsXG4gICAgICAgICAgICAgIGZyb21JZDogYXNzZXJ0RXhpc3RzKHNoYXBlSWRzLmdldChvcmlnaW5hbEJpbmRpbmcuZnJvbUlkKSksXG4gICAgICAgICAgICAgIHRvSWQ6IGFzc2VydEV4aXN0cyhzaGFwZUlkcy5nZXQob3JpZ2luYWxCaW5kaW5nLnRvSWQpKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHNoYXBlc1RvQ3JlYXRlMiA9IFtdO1xuICAgICAgICAgIGZvciAoY29uc3Qgb3JpZ2luYWxJZCBvZiBvcmRlcmVkU2hhcGVJZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGR1cGxpY2F0ZWRJZCA9IGFzc2VydEV4aXN0cyhzaGFwZUlkcy5nZXQob3JpZ2luYWxJZCkpO1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxTaGFwZSA9IHRoaXMuZ2V0U2hhcGUob3JpZ2luYWxJZCk7XG4gICAgICAgICAgICBpZiAoIW9yaWdpbmFsU2hhcGUpXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IG94ID0gMDtcbiAgICAgICAgICAgIGxldCBveSA9IDA7XG4gICAgICAgICAgICBpZiAob2Zmc2V0ICYmIGluaXRpYWxJZHMuaGFzKG9yaWdpbmFsSWQpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHBhcmVudFRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYXJlbnRUcmFuc2Zvcm0ob3JpZ2luYWxTaGFwZSk7XG4gICAgICAgICAgICAgIGNvbnN0IHZlYyA9IG5ldyBWZWMob2Zmc2V0LngsIG9mZnNldC55KS5yb3QoLXBhcmVudFRyYW5zZm9ybS5yb3RhdGlvbigpKTtcbiAgICAgICAgICAgICAgb3ggPSB2ZWMueDtcbiAgICAgICAgICAgICAgb3kgPSB2ZWMueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhcmVudElkID0gb3JpZ2luYWxTaGFwZS5wYXJlbnRJZDtcbiAgICAgICAgICAgIGNvbnN0IHNpYmxpbmdzID0gdGhpcy5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudChwYXJlbnRJZCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBzaWJsaW5ncy5pbmRleE9mKG9yaWdpbmFsU2hhcGUuaWQpO1xuICAgICAgICAgICAgY29uc3Qgc2libGluZ0Fib3ZlSWQgPSBzaWJsaW5nc1tjdXJyZW50SW5kZXggKyAxXTtcbiAgICAgICAgICAgIGNvbnN0IHNpYmxpbmdBYm92ZSA9IHNpYmxpbmdBYm92ZUlkID8gdGhpcy5nZXRTaGFwZShzaWJsaW5nQWJvdmVJZCkgOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBzaWJsaW5nQWJvdmUgPyBnZXRJbmRleEJldHdlZW4ob3JpZ2luYWxTaGFwZS5pbmRleCwgc2libGluZ0Fib3ZlLmluZGV4KSA6IGdldEluZGV4QWJvdmUob3JpZ2luYWxTaGFwZS5pbmRleCk7XG4gICAgICAgICAgICBzaGFwZXNUb0NyZWF0ZTIucHVzaCh7XG4gICAgICAgICAgICAgIC4uLm9yaWdpbmFsU2hhcGUsXG4gICAgICAgICAgICAgIGlkOiBkdXBsaWNhdGVkSWQsXG4gICAgICAgICAgICAgIHg6IG9yaWdpbmFsU2hhcGUueCArIG94LFxuICAgICAgICAgICAgICB5OiBvcmlnaW5hbFNoYXBlLnkgKyBveSxcbiAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgIHBhcmVudElkOiBzaGFwZUlkcy5nZXQob3JpZ2luYWxTaGFwZS5wYXJlbnRJZCkgPz8gb3JpZ2luYWxTaGFwZS5wYXJlbnRJZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7IHNoYXBlc1RvQ3JlYXRlOiBzaGFwZXNUb0NyZWF0ZTIsIGJpbmRpbmdzVG9DcmVhdGU6IGJpbmRpbmdzVG9DcmVhdGUyIH07XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBjb25zdCBtYXhTaGFwZXNSZWFjaGVkID0gc2hhcGVzVG9DcmVhdGUubGVuZ3RoICsgdGhpcy5nZXRDdXJyZW50UGFnZVNoYXBlSWRzKCkuc2l6ZSA+IHRoaXMub3B0aW9ucy5tYXhTaGFwZXNQZXJQYWdlO1xuICAgICAgaWYgKG1heFNoYXBlc1JlYWNoZWQpIHtcbiAgICAgICAgYWxlcnRNYXhTaGFwZXModGhpcyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuY3JlYXRlU2hhcGVzKHNoYXBlc1RvQ3JlYXRlKTtcbiAgICAgIHRoaXMuY3JlYXRlQmluZGluZ3MoYmluZGluZ3NUb0NyZWF0ZSk7XG4gICAgICB0aGlzLnNldFNlbGVjdGVkU2hhcGVzKGNvbXBhY3QoaWRzLm1hcCgoaWQpID0+IHNoYXBlSWRzLmdldChpZCkpKSk7XG4gICAgICBpZiAob2Zmc2V0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uUGFnZUJvdW5kcyA9IHRoaXMuZ2V0U2VsZWN0aW9uUGFnZUJvdW5kcygpO1xuICAgICAgICBjb25zdCB2aWV3cG9ydFBhZ2VCb3VuZHMgPSB0aGlzLmdldFZpZXdwb3J0UGFnZUJvdW5kcygpO1xuICAgICAgICBpZiAoc2VsZWN0aW9uUGFnZUJvdW5kcyAmJiAhdmlld3BvcnRQYWdlQm91bmRzLmNvbnRhaW5zKHNlbGVjdGlvblBhZ2VCb3VuZHMpKSB7XG4gICAgICAgICAgdGhpcy5jZW50ZXJPblBvaW50KHNlbGVjdGlvblBhZ2VCb3VuZHMuY2VudGVyLCB7XG4gICAgICAgICAgICBhbmltYXRpb246IHsgZHVyYXRpb246IHRoaXMub3B0aW9ucy5hbmltYXRpb25NZWRpdW1NcyB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogTW92ZSBzaGFwZXMgdG8gcGFnZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLm1vdmVTaGFwZXNUb1BhZ2UoWydib3gxJywgJ2JveDInXSwgJ3BhZ2UxJylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIG9mIHRoZSBzaGFwZXMgdG8gbW92ZS5cbiAgICogQHBhcmFtIHBhZ2VJZCAtIFRoZSBpZCBvZiB0aGUgcGFnZSB3aGVyZSB0aGUgc2hhcGVzIHdpbGwgYmUgbW92ZWQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG1vdmVTaGFwZXNUb1BhZ2Uoc2hhcGVzLCBwYWdlSWQpIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgaWYgKGlkcy5sZW5ndGggPT09IDApXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBpZiAodGhpcy5nZXRJbnN0YW5jZVN0YXRlKCkuaXNSZWFkb25seSlcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGN1cnJlbnRQYWdlSWQgPSB0aGlzLmdldEN1cnJlbnRQYWdlSWQoKTtcbiAgICBpZiAocGFnZUlkID09PSBjdXJyZW50UGFnZUlkKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgaWYgKCF0aGlzLnN0b3JlLmhhcyhwYWdlSWQpKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuZ2V0Q29udGVudEZyb21DdXJyZW50UGFnZShpZHMpO1xuICAgIGlmICghY29udGVudClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGlmICh0aGlzLmdldFBhZ2VTaGFwZUlkcyhwYWdlSWQpLnNpemUgKyBjb250ZW50LnNoYXBlcy5sZW5ndGggPiB0aGlzLm9wdGlvbnMubWF4U2hhcGVzUGVyUGFnZSkge1xuICAgICAgYWxlcnRNYXhTaGFwZXModGhpcywgcGFnZUlkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjb25zdCBmcm9tUGFnZVogPSB0aGlzLmdldENhbWVyYSgpLno7XG4gICAgdGhpcy5oaXN0b3J5LmJhdGNoKCgpID0+IHtcbiAgICAgIHRoaXMuZGVsZXRlU2hhcGVzKGlkcyk7XG4gICAgICB0aGlzLnNldEN1cnJlbnRQYWdlKHBhZ2VJZCk7XG4gICAgICB0aGlzLnNldEZvY3VzZWRHcm91cChudWxsKTtcbiAgICAgIHRoaXMuc2VsZWN0Tm9uZSgpO1xuICAgICAgdGhpcy5wdXRDb250ZW50T250b0N1cnJlbnRQYWdlKGNvbnRlbnQsIHtcbiAgICAgICAgc2VsZWN0OiB0cnVlLFxuICAgICAgICBwcmVzZXJ2ZUlkczogdHJ1ZSxcbiAgICAgICAgcHJlc2VydmVQb3NpdGlvbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgICB0aGlzLnNldENhbWVyYSh7IC4uLnRoaXMuZ2V0Q2FtZXJhKCksIHo6IGZyb21QYWdlWiB9KTtcbiAgICAgIHRoaXMuY2VudGVyT25Qb2ludCh0aGlzLmdldFNlbGVjdGlvblJvdGF0ZWRQYWdlQm91bmRzKCkuY2VudGVyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBsb2NrIHN0YXRlIG9mIG9uZSBvciBtb3JlIHNoYXBlcy4gSWYgdGhlcmUgaXMgYSBtaXggb2YgbG9ja2VkIGFuZCB1bmxvY2tlZCBzaGFwZXMsIGFsbCBzaGFwZXMgd2lsbCBiZSBsb2NrZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIHRvZ2dsZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgdG9nZ2xlTG9jayhzaGFwZXMpIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzUmVhZG9ubHkgfHwgaWRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGxldCBhbGxMb2NrZWQgPSB0cnVlLCBhbGxVbmxvY2tlZCA9IHRydWU7XG4gICAgY29uc3Qgc2hhcGVzVG9Ub2dnbGUgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykge1xuICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLmdldFNoYXBlKGlkKTtcbiAgICAgIGlmIChzaGFwZSkge1xuICAgICAgICBzaGFwZXNUb1RvZ2dsZS5wdXNoKHNoYXBlKTtcbiAgICAgICAgaWYgKHNoYXBlLmlzTG9ja2VkKSB7XG4gICAgICAgICAgYWxsVW5sb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbGxMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmJhdGNoKCgpID0+IHtcbiAgICAgIGlmIChhbGxVbmxvY2tlZCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVNoYXBlcyhcbiAgICAgICAgICBzaGFwZXNUb1RvZ2dsZS5tYXAoKHNoYXBlKSA9PiAoeyBpZDogc2hhcGUuaWQsIHR5cGU6IHNoYXBlLnR5cGUsIGlzTG9ja2VkOiB0cnVlIH0pKVxuICAgICAgICApO1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkU2hhcGVzKFtdKTtcbiAgICAgIH0gZWxzZSBpZiAoYWxsTG9ja2VkKSB7XG4gICAgICAgIHRoaXMudXBkYXRlU2hhcGVzKFxuICAgICAgICAgIHNoYXBlc1RvVG9nZ2xlLm1hcCgoc2hhcGUpID0+ICh7IGlkOiBzaGFwZS5pZCwgdHlwZTogc2hhcGUudHlwZSwgaXNMb2NrZWQ6IGZhbHNlIH0pKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy51cGRhdGVTaGFwZXMoXG4gICAgICAgICAgc2hhcGVzVG9Ub2dnbGUubWFwKChzaGFwZSkgPT4gKHsgaWQ6IHNoYXBlLmlkLCB0eXBlOiBzaGFwZS50eXBlLCBpc0xvY2tlZDogdHJ1ZSB9KSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogU2VuZCBzaGFwZXMgdG8gdGhlIGJhY2sgb2YgdGhlIHBhZ2UncyBvYmplY3QgbGlzdC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNlbmRUb0JhY2soWydpZDEnLCAnaWQyJ10pXG4gICAqIGVkaXRvci5zZW5kVG9CYWNrKGJveDEsIGJveDIpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGVzIC0gVGhlIHNoYXBlcyAob3Igc2hhcGUgaWRzKSB0byBtb3ZlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZW5kVG9CYWNrKHNoYXBlcykge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzKSA9PiBzLmlkKTtcbiAgICBjb25zdCBjaGFuZ2VzID0gZ2V0UmVvcmRlcmluZ1NoYXBlc0NoYW5nZXModGhpcywgXCJ0b0JhY2tcIiwgaWRzKTtcbiAgICBpZiAoY2hhbmdlcylcbiAgICAgIHRoaXMudXBkYXRlU2hhcGVzKGNoYW5nZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTZW5kIHNoYXBlcyBiYWNrd2FyZCBpbiB0aGUgcGFnZSdzIG9iamVjdCBsaXN0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2VuZEJhY2t3YXJkKFsnaWQxJywgJ2lkMiddKVxuICAgKiBlZGl0b3Iuc2VuZEJhY2t3YXJkKFtib3gxLCBib3gyXSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIG1vdmUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNlbmRCYWNrd2FyZChzaGFwZXMpIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgY29uc3QgY2hhbmdlcyA9IGdldFJlb3JkZXJpbmdTaGFwZXNDaGFuZ2VzKHRoaXMsIFwiYmFja3dhcmRcIiwgaWRzKTtcbiAgICBpZiAoY2hhbmdlcylcbiAgICAgIHRoaXMudXBkYXRlU2hhcGVzKGNoYW5nZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBCcmluZyBzaGFwZXMgZm9yd2FyZCBpbiB0aGUgcGFnZSdzIG9iamVjdCBsaXN0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuYnJpbmdGb3J3YXJkKFsnaWQxJywgJ2lkMiddKVxuICAgKiBlZGl0b3IuYnJpbmdGb3J3YXJkKGJveDEsICBib3gyKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gbW92ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYnJpbmdGb3J3YXJkKHNoYXBlcykge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzKSA9PiBzLmlkKTtcbiAgICBjb25zdCBjaGFuZ2VzID0gZ2V0UmVvcmRlcmluZ1NoYXBlc0NoYW5nZXModGhpcywgXCJmb3J3YXJkXCIsIGlkcyk7XG4gICAgaWYgKGNoYW5nZXMpXG4gICAgICB0aGlzLnVwZGF0ZVNoYXBlcyhjaGFuZ2VzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQnJpbmcgc2hhcGVzIHRvIHRoZSBmcm9udCBvZiB0aGUgcGFnZSdzIG9iamVjdCBsaXN0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuYnJpbmdUb0Zyb250KFsnaWQxJywgJ2lkMiddKVxuICAgKiBlZGl0b3IuYnJpbmdUb0Zyb250KFtib3gxLCBib3gyXSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIG1vdmUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGJyaW5nVG9Gcm9udChzaGFwZXMpIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgY29uc3QgY2hhbmdlcyA9IGdldFJlb3JkZXJpbmdTaGFwZXNDaGFuZ2VzKHRoaXMsIFwidG9Gcm9udFwiLCBpZHMpO1xuICAgIGlmIChjaGFuZ2VzKVxuICAgICAgdGhpcy51cGRhdGVTaGFwZXMoY2hhbmdlcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEZsaXAgc2hhcGUgcG9zaXRpb25zLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZmxpcFNoYXBlcyhbYm94MSwgYm94Ml0sICdob3Jpem9udGFsJywgMzIpXG4gICAqIGVkaXRvci5mbGlwU2hhcGVzKGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKCksICdob3Jpem9udGFsJywgMzIpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGVzIC0gVGhlIGlkcyBvZiB0aGUgc2hhcGVzIHRvIGZsaXAuXG4gICAqIEBwYXJhbSBvcGVyYXRpb24gLSBXaGV0aGVyIHRvIGZsaXAgaG9yaXpvbnRhbGx5IG9yIHZlcnRpY2FsbHkuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGZsaXBTaGFwZXMoc2hhcGVzLCBvcGVyYXRpb24pIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzUmVhZG9ubHkpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBsZXQgc2hhcGVzVG9GbGlwID0gY29tcGFjdChpZHMubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZShpZCkpKTtcbiAgICBpZiAoIXNoYXBlc1RvRmxpcC5sZW5ndGgpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBzaGFwZXNUb0ZsaXAgPSBjb21wYWN0KFxuICAgICAgc2hhcGVzVG9GbGlwLm1hcCgoc2hhcGUpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNTaGFwZU9mVHlwZShzaGFwZSwgXCJncm91cFwiKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmdldFNvcnRlZENoaWxkSWRzRm9yUGFyZW50KHNoYXBlLmlkKS5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlKGlkKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNoYXBlO1xuICAgICAgfSkuZmxhdCgpXG4gICAgKTtcbiAgICBjb25zdCBzY2FsZU9yaWdpblBhZ2UgPSBCb3guQ29tbW9uKFxuICAgICAgY29tcGFjdChzaGFwZXNUb0ZsaXAubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZVBhZ2VCb3VuZHMoaWQpKSlcbiAgICApLmNlbnRlcjtcbiAgICB0aGlzLmJhdGNoKCgpID0+IHtcbiAgICAgIGZvciAoY29uc3Qgc2hhcGUgb2Ygc2hhcGVzVG9GbGlwKSB7XG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZ2V0U2hhcGVHZW9tZXRyeShzaGFwZSkuYm91bmRzO1xuICAgICAgICBjb25zdCBpbml0aWFsUGFnZVRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlLmlkKTtcbiAgICAgICAgaWYgKCFpbml0aWFsUGFnZVRyYW5zZm9ybSlcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgdGhpcy5yZXNpemVTaGFwZShcbiAgICAgICAgICBzaGFwZS5pZCxcbiAgICAgICAgICB7IHg6IG9wZXJhdGlvbiA9PT0gXCJob3Jpem9udGFsXCIgPyAtMSA6IDEsIHk6IG9wZXJhdGlvbiA9PT0gXCJ2ZXJ0aWNhbFwiID8gLTEgOiAxIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgaW5pdGlhbEJvdW5kczogYm91bmRzLFxuICAgICAgICAgICAgaW5pdGlhbFBhZ2VUcmFuc2Zvcm0sXG4gICAgICAgICAgICBpbml0aWFsU2hhcGU6IHNoYXBlLFxuICAgICAgICAgICAgbW9kZTogXCJzY2FsZV9zaGFwZVwiLFxuICAgICAgICAgICAgaXNBc3BlY3RSYXRpb0xvY2tlZDogdGhpcy5nZXRTaGFwZVV0aWwoc2hhcGUpLmlzQXNwZWN0UmF0aW9Mb2NrZWQoc2hhcGUpLFxuICAgICAgICAgICAgc2NhbGVPcmlnaW46IHNjYWxlT3JpZ2luUGFnZSxcbiAgICAgICAgICAgIHNjYWxlQXhpc1JvdGF0aW9uOiAwXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTdGFjayBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnN0YWNrU2hhcGVzKFtib3gxLCBib3gyXSwgJ2hvcml6b250YWwnLCAzMilcbiAgICogZWRpdG9yLnN0YWNrU2hhcGVzKGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKCksICdob3Jpem9udGFsJywgMzIpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGVzIC0gVGhlIHNoYXBlcyAob3Igc2hhcGUgaWRzKSB0byBzdGFjay5cbiAgICogQHBhcmFtIG9wZXJhdGlvbiAtIFdoZXRoZXIgdG8gc3RhY2sgaG9yaXpvbnRhbGx5IG9yIHZlcnRpY2FsbHkuXG4gICAqIEBwYXJhbSBnYXAgLSBUaGUgZ2FwIHRvIGxlYXZlIGJldHdlZW4gc2hhcGVzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzdGFja1NoYXBlcyhzaGFwZXMsIG9wZXJhdGlvbiwgZ2FwKSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGlmICh0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5pc1JlYWRvbmx5KVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgY29uc3Qgc2hhcGVzVG9TdGFjayA9IGlkcy5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlKGlkKSkuZmlsdGVyKChzaGFwZSkgPT4ge1xuICAgICAgaWYgKCFzaGFwZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0U2hhcGVVdGlsKHNoYXBlKS5jYW5CZUxhaWRPdXQoc2hhcGUpO1xuICAgIH0pO1xuICAgIGNvbnN0IGxlbiA9IHNoYXBlc1RvU3RhY2subGVuZ3RoO1xuICAgIGlmIChnYXAgPT09IDAgJiYgbGVuIDwgMyB8fCBsZW4gPCAyKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgcGFnZUJvdW5kcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIHNoYXBlc1RvU3RhY2subWFwKChzaGFwZSkgPT4gW3NoYXBlLmlkLCB0aGlzLmdldFNoYXBlUGFnZUJvdW5kcyhzaGFwZSldKVxuICAgICk7XG4gICAgbGV0IHZhbDtcbiAgICBsZXQgbWluO1xuICAgIGxldCBtYXg7XG4gICAgbGV0IGRpbTtcbiAgICBpZiAob3BlcmF0aW9uID09PSBcImhvcml6b250YWxcIikge1xuICAgICAgdmFsID0gXCJ4XCI7XG4gICAgICBtaW4gPSBcIm1pblhcIjtcbiAgICAgIG1heCA9IFwibWF4WFwiO1xuICAgICAgZGltID0gXCJ3aWR0aFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWwgPSBcInlcIjtcbiAgICAgIG1pbiA9IFwibWluWVwiO1xuICAgICAgbWF4ID0gXCJtYXhZXCI7XG4gICAgICBkaW0gPSBcImhlaWdodFwiO1xuICAgIH1cbiAgICBsZXQgc2hhcGVHYXA7XG4gICAgaWYgKGdhcCA9PT0gMCkge1xuICAgICAgY29uc3QgZ2FwcyA9IFtdO1xuICAgICAgc2hhcGVzVG9TdGFjay5zb3J0KChhLCBiKSA9PiBwYWdlQm91bmRzW2EuaWRdW21pbl0gLSBwYWdlQm91bmRzW2IuaWRdW21pbl0pO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW4gLSAxOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNUb1N0YWNrW2ldO1xuICAgICAgICBjb25zdCBuZXh0U2hhcGUgPSBzaGFwZXNUb1N0YWNrW2kgKyAxXTtcbiAgICAgICAgY29uc3QgYm91bmRzID0gcGFnZUJvdW5kc1tzaGFwZS5pZF07XG4gICAgICAgIGNvbnN0IG5leHRCb3VuZHMgPSBwYWdlQm91bmRzW25leHRTaGFwZS5pZF07XG4gICAgICAgIGNvbnN0IGdhcDIgPSBuZXh0Qm91bmRzW21pbl0gLSBib3VuZHNbbWF4XTtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IGdhcHMuZmluZCgoZykgPT4gZy5nYXAgPT09IGdhcDIpO1xuICAgICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICAgIGN1cnJlbnQuY291bnQrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnYXBzLnB1c2goeyBnYXA6IGdhcDIsIGNvdW50OiAxIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgbWF4Q291bnQgPSAwO1xuICAgICAgZ2Fwcy5mb3JFYWNoKChnKSA9PiB7XG4gICAgICAgIGlmIChnLmNvdW50ID4gbWF4Q291bnQpIHtcbiAgICAgICAgICBtYXhDb3VudCA9IGcuY291bnQ7XG4gICAgICAgICAgc2hhcGVHYXAgPSBnLmdhcDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAobWF4Q291bnQgPT09IDEpIHtcbiAgICAgICAgc2hhcGVHYXAgPSBNYXRoLm1heCgwLCBnYXBzLnJlZHVjZSgoYSwgYykgPT4gYSArIGMuZ2FwICogYy5jb3VudCwgMCkgLyAobGVuIC0gMSkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzaGFwZUdhcCA9IGdhcDtcbiAgICB9XG4gICAgY29uc3QgY2hhbmdlcyA9IFtdO1xuICAgIGxldCB2ID0gcGFnZUJvdW5kc1tzaGFwZXNUb1N0YWNrWzBdLmlkXVttYXhdO1xuICAgIHNoYXBlc1RvU3RhY2suZm9yRWFjaCgoc2hhcGUsIGkpID0+IHtcbiAgICAgIGlmIChpID09PSAwKVxuICAgICAgICByZXR1cm47XG4gICAgICBjb25zdCBkZWx0YSA9IHsgeDogMCwgeTogMCB9O1xuICAgICAgZGVsdGFbdmFsXSA9IHYgKyBzaGFwZUdhcCAtIHBhZ2VCb3VuZHNbc2hhcGUuaWRdW3ZhbF07XG4gICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmdldFNoYXBlUGFyZW50KHNoYXBlKTtcbiAgICAgIGNvbnN0IGxvY2FsRGVsdGEgPSBwYXJlbnQgPyBWZWMuUm90KGRlbHRhLCAtdGhpcy5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0ocGFyZW50KS5kZWNvbXBvc2UoKS5yb3RhdGlvbikgOiBkZWx0YTtcbiAgICAgIGNvbnN0IHRyYW5zbGF0ZVN0YXJ0Q2hhbmdlcyA9IHRoaXMuZ2V0U2hhcGVVdGlsKHNoYXBlKS5vblRyYW5zbGF0ZVN0YXJ0Py4oc2hhcGUpO1xuICAgICAgY2hhbmdlcy5wdXNoKFxuICAgICAgICB0cmFuc2xhdGVTdGFydENoYW5nZXMgPyB7XG4gICAgICAgICAgLi4udHJhbnNsYXRlU3RhcnRDaGFuZ2VzLFxuICAgICAgICAgIFt2YWxdOiBzaGFwZVt2YWxdICsgbG9jYWxEZWx0YVt2YWxdXG4gICAgICAgIH0gOiB7XG4gICAgICAgICAgaWQ6IHNoYXBlLmlkLFxuICAgICAgICAgIHR5cGU6IHNoYXBlLnR5cGUsXG4gICAgICAgICAgW3ZhbF06IHNoYXBlW3ZhbF0gKyBsb2NhbERlbHRhW3ZhbF1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHYgKz0gcGFnZUJvdW5kc1tzaGFwZS5pZF1bZGltXSArIHNoYXBlR2FwO1xuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlU2hhcGVzKGNoYW5nZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBQYWNrIHNoYXBlcyBpbnRvIGEgZ3JpZCBjZW50ZXJlZCBvbiB0aGVpciBjdXJyZW50IHBvc2l0aW9uLiBCYXNlZCBvbiBwb3RwYWNrIChodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L3BvdHBhY2spLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IucGFja1NoYXBlcyhbYm94MSwgYm94Ml0sIDMyKVxuICAgKiBlZGl0b3IucGFja1NoYXBlcyhlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpLCAzMilcbiAgICogYGBgXG4gICAqXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIHBhY2suXG4gICAqIEBwYXJhbSBnYXAgLSBUaGUgcGFkZGluZyB0byBhcHBseSB0byB0aGUgcGFja2VkIHNoYXBlcy4gRGVmYXVsdHMgdG8gMTYuXG4gICAqL1xuICBwYWNrU2hhcGVzKHNoYXBlcywgZ2FwKSB7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGlmICh0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5pc1JlYWRvbmx5KVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgaWYgKGlkcy5sZW5ndGggPCAyKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgY29uc3Qgc2hhcGVzVG9QYWNrID0gaWRzLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGUoaWQpKS5maWx0ZXIoKHNoYXBlMikgPT4ge1xuICAgICAgaWYgKCFzaGFwZTIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiB0aGlzLmdldFNoYXBlVXRpbChzaGFwZTIpLmNhbkJlTGFpZE91dChzaGFwZTIpO1xuICAgIH0pO1xuICAgIGNvbnN0IHNoYXBlUGFnZUJvdW5kcyA9IHt9O1xuICAgIGNvbnN0IG5leHRTaGFwZVBhZ2VCb3VuZHMgPSB7fTtcbiAgICBsZXQgc2hhcGUsIGJvdW5kcywgYXJlYSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGFwZXNUb1BhY2subGVuZ3RoOyBpKyspIHtcbiAgICAgIHNoYXBlID0gc2hhcGVzVG9QYWNrW2ldO1xuICAgICAgYm91bmRzID0gdGhpcy5nZXRTaGFwZVBhZ2VCb3VuZHMoc2hhcGUpO1xuICAgICAgc2hhcGVQYWdlQm91bmRzW3NoYXBlLmlkXSA9IGJvdW5kcztcbiAgICAgIG5leHRTaGFwZVBhZ2VCb3VuZHNbc2hhcGUuaWRdID0gYm91bmRzLmNsb25lKCk7XG4gICAgICBhcmVhICs9IGJvdW5kcy53aWR0aCAqIGJvdW5kcy5oZWlnaHQ7XG4gICAgfVxuICAgIGNvbnN0IGNvbW1vbkJvdW5kcyA9IEJveC5Db21tb24oY29tcGFjdChPYmplY3QudmFsdWVzKHNoYXBlUGFnZUJvdW5kcykpKTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IGNvbW1vbkJvdW5kcy53aWR0aDtcbiAgICBzaGFwZXNUb1BhY2suc29ydCgoYSwgYikgPT4gc2hhcGVQYWdlQm91bmRzW2IuaWRdLmhlaWdodCAtIHNoYXBlUGFnZUJvdW5kc1thLmlkXS5oZWlnaHQpO1xuICAgIGNvbnN0IHN0YXJ0V2lkdGggPSBNYXRoLm1heChNYXRoLmNlaWwoTWF0aC5zcXJ0KGFyZWEgLyAwLjk1KSksIG1heFdpZHRoKTtcbiAgICBjb25zdCBzcGFjZXMgPSBbbmV3IEJveChjb21tb25Cb3VuZHMueCwgY29tbW9uQm91bmRzLnksIHN0YXJ0V2lkdGgsIEluZmluaXR5KV07XG4gICAgbGV0IHdpZHRoID0gMDtcbiAgICBsZXQgaGVpZ2h0ID0gMDtcbiAgICBsZXQgc3BhY2U7XG4gICAgbGV0IGxhc3QyO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hhcGVzVG9QYWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzaGFwZSA9IHNoYXBlc1RvUGFja1tpXTtcbiAgICAgIGJvdW5kcyA9IG5leHRTaGFwZVBhZ2VCb3VuZHNbc2hhcGUuaWRdO1xuICAgICAgZm9yIChsZXQgaTIgPSBzcGFjZXMubGVuZ3RoIC0gMTsgaTIgPj0gMDsgaTItLSkge1xuICAgICAgICBzcGFjZSA9IHNwYWNlc1tpMl07XG4gICAgICAgIGlmIChib3VuZHMud2lkdGggPiBzcGFjZS53aWR0aCB8fCBib3VuZHMuaGVpZ2h0ID4gc3BhY2UuaGVpZ2h0KVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBib3VuZHMueCA9IHNwYWNlLng7XG4gICAgICAgIGJvdW5kcy55ID0gc3BhY2UueTtcbiAgICAgICAgaGVpZ2h0ID0gTWF0aC5tYXgoaGVpZ2h0LCBib3VuZHMubWF4WSk7XG4gICAgICAgIHdpZHRoID0gTWF0aC5tYXgod2lkdGgsIGJvdW5kcy5tYXhYKTtcbiAgICAgICAgaWYgKGJvdW5kcy53aWR0aCA9PT0gc3BhY2Uud2lkdGggJiYgYm91bmRzLmhlaWdodCA9PT0gc3BhY2UuaGVpZ2h0KSB7XG4gICAgICAgICAgbGFzdDIgPSBzcGFjZXMucG9wKCk7XG4gICAgICAgICAgaWYgKGkyIDwgc3BhY2VzLmxlbmd0aClcbiAgICAgICAgICAgIHNwYWNlc1tpMl0gPSBsYXN0MjtcbiAgICAgICAgfSBlbHNlIGlmIChib3VuZHMuaGVpZ2h0ID09PSBzcGFjZS5oZWlnaHQpIHtcbiAgICAgICAgICBzcGFjZS54ICs9IGJvdW5kcy53aWR0aCArIGdhcDtcbiAgICAgICAgICBzcGFjZS53aWR0aCAtPSBib3VuZHMud2lkdGggKyBnYXA7XG4gICAgICAgIH0gZWxzZSBpZiAoYm91bmRzLndpZHRoID09PSBzcGFjZS53aWR0aCkge1xuICAgICAgICAgIHNwYWNlLnkgKz0gYm91bmRzLmhlaWdodCArIGdhcDtcbiAgICAgICAgICBzcGFjZS5oZWlnaHQgLT0gYm91bmRzLmhlaWdodCArIGdhcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzcGFjZXMucHVzaChcbiAgICAgICAgICAgIG5ldyBCb3goXG4gICAgICAgICAgICAgIHNwYWNlLnggKyAoYm91bmRzLndpZHRoICsgZ2FwKSxcbiAgICAgICAgICAgICAgc3BhY2UueSxcbiAgICAgICAgICAgICAgc3BhY2Uud2lkdGggLSAoYm91bmRzLndpZHRoICsgZ2FwKSxcbiAgICAgICAgICAgICAgYm91bmRzLmhlaWdodFxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgICAgc3BhY2UueSArPSBib3VuZHMuaGVpZ2h0ICsgZ2FwO1xuICAgICAgICAgIHNwYWNlLmhlaWdodCAtPSBib3VuZHMuaGVpZ2h0ICsgZ2FwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjb21tb25BZnRlciA9IEJveC5Db21tb24oT2JqZWN0LnZhbHVlcyhuZXh0U2hhcGVQYWdlQm91bmRzKSk7XG4gICAgY29uc3QgY2VudGVyRGVsdGEgPSBWZWMuU3ViKGNvbW1vbkJvdW5kcy5jZW50ZXIsIGNvbW1vbkFmdGVyLmNlbnRlcik7XG4gICAgbGV0IG5leHRCb3VuZHM7XG4gICAgY29uc3QgY2hhbmdlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hhcGVzVG9QYWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzaGFwZSA9IHNoYXBlc1RvUGFja1tpXTtcbiAgICAgIGJvdW5kcyA9IHNoYXBlUGFnZUJvdW5kc1tzaGFwZS5pZF07XG4gICAgICBuZXh0Qm91bmRzID0gbmV4dFNoYXBlUGFnZUJvdW5kc1tzaGFwZS5pZF07XG4gICAgICBjb25zdCBkZWx0YSA9IFZlYy5TdWIobmV4dEJvdW5kcy5wb2ludCwgYm91bmRzLnBvaW50KS5hZGQoY2VudGVyRGVsdGEpO1xuICAgICAgY29uc3QgcGFyZW50VHJhbnNmb3JtID0gdGhpcy5nZXRTaGFwZVBhcmVudFRyYW5zZm9ybShzaGFwZSk7XG4gICAgICBpZiAocGFyZW50VHJhbnNmb3JtKVxuICAgICAgICBkZWx0YS5yb3QoLXBhcmVudFRyYW5zZm9ybS5yb3RhdGlvbigpKTtcbiAgICAgIGNvbnN0IGNoYW5nZSA9IHtcbiAgICAgICAgaWQ6IHNoYXBlLmlkLFxuICAgICAgICB0eXBlOiBzaGFwZS50eXBlLFxuICAgICAgICB4OiBzaGFwZS54ICsgZGVsdGEueCxcbiAgICAgICAgeTogc2hhcGUueSArIGRlbHRhLnlcbiAgICAgIH07XG4gICAgICBjb25zdCB0cmFuc2xhdGVTdGFydENoYW5nZSA9IHRoaXMuZ2V0U2hhcGVVdGlsKHNoYXBlKS5vblRyYW5zbGF0ZVN0YXJ0Py4oe1xuICAgICAgICAuLi5zaGFwZSxcbiAgICAgICAgLi4uY2hhbmdlXG4gICAgICB9KTtcbiAgICAgIGlmICh0cmFuc2xhdGVTdGFydENoYW5nZSkge1xuICAgICAgICBjaGFuZ2VzLnB1c2goeyAuLi5jaGFuZ2UsIC4uLnRyYW5zbGF0ZVN0YXJ0Q2hhbmdlIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhbmdlcy5wdXNoKGNoYW5nZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzLmxlbmd0aCkge1xuICAgICAgdGhpcy51cGRhdGVTaGFwZXMoY2hhbmdlcyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBBbGlnbiBzaGFwZSBwb3NpdGlvbnMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5hbGlnblNoYXBlcyhbYm94MSwgYm94Ml0sICdsZWZ0JylcbiAgICogZWRpdG9yLmFsaWduU2hhcGVzKGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKCksICdsZWZ0JylcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIGFsaWduLlxuICAgKiBAcGFyYW0gb3BlcmF0aW9uIC0gVGhlIGFsaWduIG9wZXJhdGlvbiB0byBhcHBseS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYWxpZ25TaGFwZXMoc2hhcGVzLCBvcGVyYXRpb24pIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzUmVhZG9ubHkpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBpZiAoaWRzLmxlbmd0aCA8IDIpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBjb25zdCBzaGFwZXNUb0FsaWduID0gY29tcGFjdChpZHMubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZShpZCkpKTtcbiAgICBjb25zdCBzaGFwZVBhZ2VCb3VuZHMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICBzaGFwZXNUb0FsaWduLm1hcCgoc2hhcGUpID0+IFtzaGFwZS5pZCwgdGhpcy5nZXRTaGFwZVBhZ2VCb3VuZHMoc2hhcGUpXSlcbiAgICApO1xuICAgIGNvbnN0IGNvbW1vbkJvdW5kcyA9IEJveC5Db21tb24oY29tcGFjdChPYmplY3QudmFsdWVzKHNoYXBlUGFnZUJvdW5kcykpKTtcbiAgICBjb25zdCBjaGFuZ2VzID0gW107XG4gICAgc2hhcGVzVG9BbGlnbi5mb3JFYWNoKChzaGFwZSkgPT4ge1xuICAgICAgY29uc3QgcGFnZUJvdW5kcyA9IHNoYXBlUGFnZUJvdW5kc1tzaGFwZS5pZF07XG4gICAgICBpZiAoIXBhZ2VCb3VuZHMpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IGRlbHRhID0geyB4OiAwLCB5OiAwIH07XG4gICAgICBzd2l0Y2ggKG9wZXJhdGlvbikge1xuICAgICAgICBjYXNlIFwidG9wXCI6IHtcbiAgICAgICAgICBkZWx0YS55ID0gY29tbW9uQm91bmRzLm1pblkgLSBwYWdlQm91bmRzLm1pblk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImNlbnRlci12ZXJ0aWNhbFwiOiB7XG4gICAgICAgICAgZGVsdGEueSA9IGNvbW1vbkJvdW5kcy5taWRZIC0gcGFnZUJvdW5kcy5taW5ZIC0gcGFnZUJvdW5kcy5oZWlnaHQgLyAyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJib3R0b21cIjoge1xuICAgICAgICAgIGRlbHRhLnkgPSBjb21tb25Cb3VuZHMubWF4WSAtIHBhZ2VCb3VuZHMubWluWSAtIHBhZ2VCb3VuZHMuaGVpZ2h0O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJsZWZ0XCI6IHtcbiAgICAgICAgICBkZWx0YS54ID0gY29tbW9uQm91bmRzLm1pblggLSBwYWdlQm91bmRzLm1pblg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImNlbnRlci1ob3Jpem9udGFsXCI6IHtcbiAgICAgICAgICBkZWx0YS54ID0gY29tbW9uQm91bmRzLm1pZFggLSBwYWdlQm91bmRzLm1pblggLSBwYWdlQm91bmRzLndpZHRoIC8gMjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicmlnaHRcIjoge1xuICAgICAgICAgIGRlbHRhLnggPSBjb21tb25Cb3VuZHMubWF4WCAtIHBhZ2VCb3VuZHMubWluWCAtIHBhZ2VCb3VuZHMud2lkdGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0U2hhcGVQYXJlbnQoc2hhcGUpO1xuICAgICAgY29uc3QgbG9jYWxEZWx0YSA9IHBhcmVudCA/IFZlYy5Sb3QoZGVsdGEsIC10aGlzLmdldFNoYXBlUGFnZVRyYW5zZm9ybShwYXJlbnQpLmRlY29tcG9zZSgpLnJvdGF0aW9uKSA6IGRlbHRhO1xuICAgICAgY2hhbmdlcy5wdXNoKHRoaXMuZ2V0Q2hhbmdlc1RvVHJhbnNsYXRlU2hhcGUoc2hhcGUsIFZlYy5BZGQoc2hhcGUsIGxvY2FsRGVsdGEpKSk7XG4gICAgfSk7XG4gICAgdGhpcy51cGRhdGVTaGFwZXMoY2hhbmdlcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIERpc3RyaWJ1dGUgc2hhcGUgcG9zaXRpb25zLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuZGlzdHJpYnV0ZVNoYXBlcyhbYm94MSwgYm94Ml0sICdob3Jpem9udGFsJylcbiAgICogZWRpdG9yLmRpc3RyaWJ1dGVTaGFwZXMoZWRpdG9yLmdldFNlbGVjdGVkU2hhcGVJZHMoKSwgJ2hvcml6b250YWwnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gZGlzdHJpYnV0ZS5cbiAgICogQHBhcmFtIG9wZXJhdGlvbiAtIFdoZXRoZXIgdG8gZGlzdHJpYnV0ZSBzaGFwZXMgaG9yaXpvbnRhbGx5IG9yIHZlcnRpY2FsbHkuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGRpc3RyaWJ1dGVTaGFwZXMoc2hhcGVzLCBvcGVyYXRpb24pIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzUmVhZG9ubHkpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBpZiAoaWRzLmxlbmd0aCA8IDMpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBjb25zdCBsZW4gPSBpZHMubGVuZ3RoO1xuICAgIGNvbnN0IHNoYXBlc1RvRGlzdHJpYnV0ZSA9IGNvbXBhY3QoaWRzLm1hcCgoaWQpID0+IHRoaXMuZ2V0U2hhcGUoaWQpKSk7XG4gICAgY29uc3QgcGFnZUJvdW5kcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIHNoYXBlc1RvRGlzdHJpYnV0ZS5tYXAoKHNoYXBlKSA9PiBbc2hhcGUuaWQsIHRoaXMuZ2V0U2hhcGVQYWdlQm91bmRzKHNoYXBlKV0pXG4gICAgKTtcbiAgICBsZXQgdmFsO1xuICAgIGxldCBtaW47XG4gICAgbGV0IG1heDtcbiAgICBsZXQgbWlkO1xuICAgIGxldCBkaW07XG4gICAgaWYgKG9wZXJhdGlvbiA9PT0gXCJob3Jpem9udGFsXCIpIHtcbiAgICAgIHZhbCA9IFwieFwiO1xuICAgICAgbWluID0gXCJtaW5YXCI7XG4gICAgICBtYXggPSBcIm1heFhcIjtcbiAgICAgIG1pZCA9IFwibWlkWFwiO1xuICAgICAgZGltID0gXCJ3aWR0aFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWwgPSBcInlcIjtcbiAgICAgIG1pbiA9IFwibWluWVwiO1xuICAgICAgbWF4ID0gXCJtYXhZXCI7XG4gICAgICBtaWQgPSBcIm1pZFlcIjtcbiAgICAgIGRpbSA9IFwiaGVpZ2h0XCI7XG4gICAgfVxuICAgIGNvbnN0IGNoYW5nZXMgPSBbXTtcbiAgICBjb25zdCBmaXJzdCA9IHNoYXBlc1RvRGlzdHJpYnV0ZS5zb3J0KFxuICAgICAgKGEsIGIpID0+IHBhZ2VCb3VuZHNbYS5pZF1bbWluXSAtIHBhZ2VCb3VuZHNbYi5pZF1bbWluXVxuICAgIClbMF07XG4gICAgY29uc3QgbGFzdDIgPSBzaGFwZXNUb0Rpc3RyaWJ1dGUuc29ydCgoYSwgYikgPT4gcGFnZUJvdW5kc1tiLmlkXVttYXhdIC0gcGFnZUJvdW5kc1thLmlkXVttYXhdKVswXTtcbiAgICBjb25zdCBtaWRGaXJzdCA9IHBhZ2VCb3VuZHNbZmlyc3QuaWRdW21pZF07XG4gICAgY29uc3Qgc3RlcCA9IChwYWdlQm91bmRzW2xhc3QyLmlkXVttaWRdIC0gbWlkRmlyc3QpIC8gKGxlbiAtIDEpO1xuICAgIGNvbnN0IHYgPSBtaWRGaXJzdCArIHN0ZXA7XG4gICAgc2hhcGVzVG9EaXN0cmlidXRlLmZpbHRlcigoc2hhcGUpID0+IHNoYXBlICE9PSBmaXJzdCAmJiBzaGFwZSAhPT0gbGFzdDIpLnNvcnQoKGEsIGIpID0+IHBhZ2VCb3VuZHNbYS5pZF1bbWlkXSAtIHBhZ2VCb3VuZHNbYi5pZF1bbWlkXSkuZm9yRWFjaCgoc2hhcGUsIGkpID0+IHtcbiAgICAgIGNvbnN0IGRlbHRhID0geyB4OiAwLCB5OiAwIH07XG4gICAgICBkZWx0YVt2YWxdID0gdiArIHN0ZXAgKiBpIC0gcGFnZUJvdW5kc1tzaGFwZS5pZF1bZGltXSAvIDIgLSBwYWdlQm91bmRzW3NoYXBlLmlkXVt2YWxdO1xuICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5nZXRTaGFwZVBhcmVudChzaGFwZSk7XG4gICAgICBjb25zdCBsb2NhbERlbHRhID0gcGFyZW50ID8gVmVjLlJvdChkZWx0YSwgLXRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHBhcmVudCkucm90YXRpb24oKSkgOiBkZWx0YTtcbiAgICAgIGNoYW5nZXMucHVzaCh0aGlzLmdldENoYW5nZXNUb1RyYW5zbGF0ZVNoYXBlKHNoYXBlLCBWZWMuQWRkKHNoYXBlLCBsb2NhbERlbHRhKSkpO1xuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlU2hhcGVzKGNoYW5nZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTdHJldGNoIHNoYXBlIHNpemVzIGFuZCBwb3NpdGlvbnMgdG8gZmlsbCB0aGVpciBjb21tb24gYm91bmRpbmcgYm94LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc3RyZXRjaFNoYXBlcyhbYm94MSwgYm94Ml0sICdob3Jpem9udGFsJylcbiAgICogZWRpdG9yLnN0cmV0Y2hTaGFwZXMoZWRpdG9yLmdldFNlbGVjdGVkU2hhcGVJZHMoKSwgJ2hvcml6b250YWwnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gc3RyZXRjaC5cbiAgICogQHBhcmFtIG9wZXJhdGlvbiAtIFdoZXRoZXIgdG8gc3RyZXRjaCBzaGFwZXMgaG9yaXpvbnRhbGx5IG9yIHZlcnRpY2FsbHkuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0cmV0Y2hTaGFwZXMoc2hhcGVzLCBvcGVyYXRpb24pIHtcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzUmVhZG9ubHkpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBpZiAoaWRzLmxlbmd0aCA8IDIpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBjb25zdCBzaGFwZXNUb1N0cmV0Y2ggPSBjb21wYWN0KGlkcy5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlKGlkKSkpO1xuICAgIGNvbnN0IHNoYXBlQm91bmRzID0gT2JqZWN0LmZyb21FbnRyaWVzKGlkcy5tYXAoKGlkKSA9PiBbaWQsIHRoaXMuZ2V0U2hhcGVHZW9tZXRyeShpZCkuYm91bmRzXSkpO1xuICAgIGNvbnN0IHNoYXBlUGFnZUJvdW5kcyA9IE9iamVjdC5mcm9tRW50cmllcyhpZHMubWFwKChpZCkgPT4gW2lkLCB0aGlzLmdldFNoYXBlUGFnZUJvdW5kcyhpZCldKSk7XG4gICAgY29uc3QgY29tbW9uQm91bmRzID0gQm94LkNvbW1vbihjb21wYWN0KE9iamVjdC52YWx1ZXMoc2hhcGVQYWdlQm91bmRzKSkpO1xuICAgIHN3aXRjaCAob3BlcmF0aW9uKSB7XG4gICAgICBjYXNlIFwidmVydGljYWxcIjoge1xuICAgICAgICB0aGlzLmJhdGNoKCgpID0+IHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHNoYXBlIG9mIHNoYXBlc1RvU3RyZXRjaCkge1xuICAgICAgICAgICAgY29uc3QgcGFnZVJvdGF0aW9uID0gdGhpcy5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGUpLnJvdGF0aW9uKCk7XG4gICAgICAgICAgICBpZiAocGFnZVJvdGF0aW9uICUgUEkyKVxuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IHNoYXBlQm91bmRzW3NoYXBlLmlkXTtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VCb3VuZHMgPSBzaGFwZVBhZ2VCb3VuZHNbc2hhcGUuaWRdO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxPZmZzZXQgPSBuZXcgVmVjKDAsIGNvbW1vbkJvdW5kcy5taW5ZIC0gcGFnZUJvdW5kcy5taW5ZKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYXJlbnRUcmFuc2Zvcm0oc2hhcGUpO1xuICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zZm9ybSlcbiAgICAgICAgICAgICAgbG9jYWxPZmZzZXQucm90KC1wYXJlbnRUcmFuc2Zvcm0ucm90YXRpb24oKSk7XG4gICAgICAgICAgICBjb25zdCB7IHgsIHkgfSA9IFZlYy5BZGQobG9jYWxPZmZzZXQsIHNoYXBlKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2hhcGVzKFt7IGlkOiBzaGFwZS5pZCwgdHlwZTogc2hhcGUudHlwZSwgeCwgeSB9XSk7XG4gICAgICAgICAgICBjb25zdCBzY2FsZSA9IG5ldyBWZWMoMSwgY29tbW9uQm91bmRzLmhlaWdodCAvIHBhZ2VCb3VuZHMuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMucmVzaXplU2hhcGUoc2hhcGUuaWQsIHNjYWxlLCB7XG4gICAgICAgICAgICAgIGluaXRpYWxCb3VuZHM6IGJvdW5kcyxcbiAgICAgICAgICAgICAgc2NhbGVPcmlnaW46IG5ldyBWZWMocGFnZUJvdW5kcy5jZW50ZXIueCwgY29tbW9uQm91bmRzLm1pblkpLFxuICAgICAgICAgICAgICBpc0FzcGVjdFJhdGlvTG9ja2VkOiB0aGlzLmdldFNoYXBlVXRpbChzaGFwZSkuaXNBc3BlY3RSYXRpb0xvY2tlZChzaGFwZSksXG4gICAgICAgICAgICAgIHNjYWxlQXhpc1JvdGF0aW9uOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJob3Jpem9udGFsXCI6IHtcbiAgICAgICAgdGhpcy5iYXRjaCgoKSA9PiB7XG4gICAgICAgICAgZm9yIChjb25zdCBzaGFwZSBvZiBzaGFwZXNUb1N0cmV0Y2gpIHtcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IHNoYXBlQm91bmRzW3NoYXBlLmlkXTtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VCb3VuZHMgPSBzaGFwZVBhZ2VCb3VuZHNbc2hhcGUuaWRdO1xuICAgICAgICAgICAgY29uc3QgcGFnZVJvdGF0aW9uID0gdGhpcy5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGUpLnJvdGF0aW9uKCk7XG4gICAgICAgICAgICBpZiAocGFnZVJvdGF0aW9uICUgUEkyKVxuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsT2Zmc2V0ID0gbmV3IFZlYyhjb21tb25Cb3VuZHMubWluWCAtIHBhZ2VCb3VuZHMubWluWCwgMCk7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSB0aGlzLmdldFNoYXBlUGFyZW50VHJhbnNmb3JtKHNoYXBlKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2Zvcm0pXG4gICAgICAgICAgICAgIGxvY2FsT2Zmc2V0LnJvdCgtcGFyZW50VHJhbnNmb3JtLnJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgY29uc3QgeyB4LCB5IH0gPSBWZWMuQWRkKGxvY2FsT2Zmc2V0LCBzaGFwZSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNoYXBlcyhbeyBpZDogc2hhcGUuaWQsIHR5cGU6IHNoYXBlLnR5cGUsIHgsIHkgfV0pO1xuICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSBuZXcgVmVjKGNvbW1vbkJvdW5kcy53aWR0aCAvIHBhZ2VCb3VuZHMud2lkdGgsIDEpO1xuICAgICAgICAgICAgdGhpcy5yZXNpemVTaGFwZShzaGFwZS5pZCwgc2NhbGUsIHtcbiAgICAgICAgICAgICAgaW5pdGlhbEJvdW5kczogYm91bmRzLFxuICAgICAgICAgICAgICBzY2FsZU9yaWdpbjogbmV3IFZlYyhjb21tb25Cb3VuZHMubWluWCwgcGFnZUJvdW5kcy5jZW50ZXIueSksXG4gICAgICAgICAgICAgIGlzQXNwZWN0UmF0aW9Mb2NrZWQ6IHRoaXMuZ2V0U2hhcGVVdGlsKHNoYXBlKS5pc0FzcGVjdFJhdGlvTG9ja2VkKHNoYXBlKSxcbiAgICAgICAgICAgICAgc2NhbGVBeGlzUm90YXRpb246IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmVzaXplIGEgc2hhcGUuXG4gICAqXG4gICAqIEBwYXJhbSBpZCAtIFRoZSBpZCBvZiB0aGUgc2hhcGUgdG8gcmVzaXplLlxuICAgKiBAcGFyYW0gc2NhbGUgLSBUaGUgc2NhbGUgZmFjdG9yIHRvIGFwcGx5IHRvIHRoZSBzaGFwZS5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHJlc2l6ZVNoYXBlKHNoYXBlLCBzY2FsZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgaWQgPSB0eXBlb2Ygc2hhcGUgPT09IFwic3RyaW5nXCIgPyBzaGFwZSA6IHNoYXBlLmlkO1xuICAgIGlmICh0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5pc1JlYWRvbmx5KVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoc2NhbGUueCkpXG4gICAgICBzY2FsZSA9IG5ldyBWZWMoMSwgc2NhbGUueSk7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoc2NhbGUueSkpXG4gICAgICBzY2FsZSA9IG5ldyBWZWMoc2NhbGUueCwgMSk7XG4gICAgY29uc3QgaW5pdGlhbFNoYXBlID0gb3B0aW9ucy5pbml0aWFsU2hhcGUgPz8gdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgaWYgKCFpbml0aWFsU2hhcGUpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBjb25zdCBzY2FsZU9yaWdpbiA9IG9wdGlvbnMuc2NhbGVPcmlnaW4gPz8gdGhpcy5nZXRTaGFwZVBhZ2VCb3VuZHMoaWQpPy5jZW50ZXI7XG4gICAgaWYgKCFzY2FsZU9yaWdpbilcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHBhZ2VUcmFuc2Zvcm0gPSBvcHRpb25zLmluaXRpYWxQYWdlVHJhbnNmb3JtID8gTWF0LkNhc3Qob3B0aW9ucy5pbml0aWFsUGFnZVRyYW5zZm9ybSkgOiB0aGlzLmdldFNoYXBlUGFnZVRyYW5zZm9ybShpZCk7XG4gICAgaWYgKCFwYWdlVHJhbnNmb3JtKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgcGFnZVJvdGF0aW9uID0gcGFnZVRyYW5zZm9ybS5yb3RhdGlvbigpO1xuICAgIGlmIChwYWdlUm90YXRpb24gPT0gbnVsbClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHNjYWxlQXhpc1JvdGF0aW9uID0gb3B0aW9ucy5zY2FsZUF4aXNSb3RhdGlvbiA/PyBwYWdlUm90YXRpb247XG4gICAgY29uc3QgaW5pdGlhbEJvdW5kcyA9IG9wdGlvbnMuaW5pdGlhbEJvdW5kcyA/PyB0aGlzLmdldFNoYXBlR2VvbWV0cnkoaWQpLmJvdW5kcztcbiAgICBpZiAoIWluaXRpYWxCb3VuZHMpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBjb25zdCBpc0FzcGVjdFJhdGlvTG9ja2VkID0gb3B0aW9ucy5pc0FzcGVjdFJhdGlvTG9ja2VkID8/IHRoaXMuZ2V0U2hhcGVVdGlsKGluaXRpYWxTaGFwZSkuaXNBc3BlY3RSYXRpb0xvY2tlZChpbml0aWFsU2hhcGUpO1xuICAgIGlmICghYXJlQW5nbGVzQ29tcGF0aWJsZShwYWdlUm90YXRpb24sIHNjYWxlQXhpc1JvdGF0aW9uKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Jlc2l6ZVVuYWxpZ25lZFNoYXBlKGlkLCBzY2FsZSwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBpbml0aWFsQm91bmRzLFxuICAgICAgICBzY2FsZU9yaWdpbixcbiAgICAgICAgc2NhbGVBeGlzUm90YXRpb24sXG4gICAgICAgIGluaXRpYWxQYWdlVHJhbnNmb3JtOiBwYWdlVHJhbnNmb3JtLFxuICAgICAgICBpc0FzcGVjdFJhdGlvTG9ja2VkLFxuICAgICAgICBpbml0aWFsU2hhcGVcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB1dGlsID0gdGhpcy5nZXRTaGFwZVV0aWwoaW5pdGlhbFNoYXBlKTtcbiAgICBpZiAoaXNBc3BlY3RSYXRpb0xvY2tlZCkge1xuICAgICAgaWYgKE1hdGguYWJzKHNjYWxlLngpID4gTWF0aC5hYnMoc2NhbGUueSkpIHtcbiAgICAgICAgc2NhbGUgPSBuZXcgVmVjKHNjYWxlLngsIE1hdGguc2lnbihzY2FsZS55KSAqIE1hdGguYWJzKHNjYWxlLngpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNjYWxlID0gbmV3IFZlYyhNYXRoLnNpZ24oc2NhbGUueCkgKiBNYXRoLmFicyhzY2FsZS55KSwgc2NhbGUueSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh1dGlsLm9uUmVzaXplICYmIHV0aWwuY2FuUmVzaXplKGluaXRpYWxTaGFwZSkpIHtcbiAgICAgIGNvbnN0IG5ld1BhZ2VQb2ludCA9IHRoaXMuX3NjYWxlUGFnZVBvaW50KFxuICAgICAgICBNYXQuYXBwbHlUb1BvaW50KHBhZ2VUcmFuc2Zvcm0sIG5ldyBWZWMoMCwgMCkpLFxuICAgICAgICBzY2FsZU9yaWdpbixcbiAgICAgICAgc2NhbGUsXG4gICAgICAgIHNjYWxlQXhpc1JvdGF0aW9uXG4gICAgICApO1xuICAgICAgY29uc3QgbmV3TG9jYWxQb2ludCA9IHRoaXMuZ2V0UG9pbnRJblBhcmVudFNwYWNlKGluaXRpYWxTaGFwZS5pZCwgbmV3UGFnZVBvaW50KTtcbiAgICAgIGNvbnN0IG15U2NhbGUgPSBuZXcgVmVjKHNjYWxlLngsIHNjYWxlLnkpO1xuICAgICAgY29uc3QgYXJlV2lkdGhBbmRIZWlnaHRBbGlnbmVkV2l0aENvcnJlY3RBeGlzID0gYXBwcm94aW1hdGVseShcbiAgICAgICAgKHBhZ2VSb3RhdGlvbiAtIHNjYWxlQXhpc1JvdGF0aW9uKSAlIE1hdGguUEksXG4gICAgICAgIDBcbiAgICAgICk7XG4gICAgICBteVNjYWxlLnggPSBhcmVXaWR0aEFuZEhlaWdodEFsaWduZWRXaXRoQ29ycmVjdEF4aXMgPyBzY2FsZS54IDogc2NhbGUueTtcbiAgICAgIG15U2NhbGUueSA9IGFyZVdpZHRoQW5kSGVpZ2h0QWxpZ25lZFdpdGhDb3JyZWN0QXhpcyA/IHNjYWxlLnkgOiBzY2FsZS54O1xuICAgICAgY29uc3QgaW5pdGlhbFBhZ2VQb2ludCA9IE1hdC5hcHBseVRvUG9pbnQocGFnZVRyYW5zZm9ybSwgbmV3IFZlYygpKTtcbiAgICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5nZXRQb2ludEluUGFyZW50U3BhY2UoaW5pdGlhbFNoYXBlLmlkLCBpbml0aWFsUGFnZVBvaW50KTtcbiAgICAgIGxldCB3b3JraW5nU2hhcGUgPSBpbml0aWFsU2hhcGU7XG4gICAgICBpZiAoIW9wdGlvbnMuc2tpcFN0YXJ0QW5kRW5kQ2FsbGJhY2tzKSB7XG4gICAgICAgIHdvcmtpbmdTaGFwZSA9IGFwcGx5UGFydGlhbFRvUmVjb3JkV2l0aFByb3BzKFxuICAgICAgICAgIGluaXRpYWxTaGFwZSxcbiAgICAgICAgICB1dGlsLm9uUmVzaXplU3RhcnQ/Lihpbml0aWFsU2hhcGUpID8/IHZvaWQgMFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgd29ya2luZ1NoYXBlID0gYXBwbHlQYXJ0aWFsVG9SZWNvcmRXaXRoUHJvcHMod29ya2luZ1NoYXBlLCB7XG4gICAgICAgIGlkLFxuICAgICAgICB0eXBlOiBpbml0aWFsU2hhcGUudHlwZSxcbiAgICAgICAgeDogbmV3TG9jYWxQb2ludC54LFxuICAgICAgICB5OiBuZXdMb2NhbFBvaW50LnksXG4gICAgICAgIC4uLnV0aWwub25SZXNpemUoXG4gICAgICAgICAgeyAuLi5pbml0aWFsU2hhcGUsIHgsIHkgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuZXdQb2ludDogbmV3TG9jYWxQb2ludCxcbiAgICAgICAgICAgIGhhbmRsZTogb3B0aW9ucy5kcmFnSGFuZGxlID8/IFwiYm90dG9tX3JpZ2h0XCIsXG4gICAgICAgICAgICAvLyBkb24ndCBzZXQgaXNTaW5nbGUgdG8gdHJ1ZSBmb3IgY2hpbGRyZW5cbiAgICAgICAgICAgIG1vZGU6IG9wdGlvbnMubW9kZSA/PyBcInNjYWxlX3NoYXBlXCIsXG4gICAgICAgICAgICBzY2FsZVg6IG15U2NhbGUueCxcbiAgICAgICAgICAgIHNjYWxlWTogbXlTY2FsZS55LFxuICAgICAgICAgICAgaW5pdGlhbEJvdW5kcyxcbiAgICAgICAgICAgIGluaXRpYWxTaGFwZVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgfSk7XG4gICAgICBpZiAoIW9wdGlvbnMuc2tpcFN0YXJ0QW5kRW5kQ2FsbGJhY2tzKSB7XG4gICAgICAgIHdvcmtpbmdTaGFwZSA9IGFwcGx5UGFydGlhbFRvUmVjb3JkV2l0aFByb3BzKFxuICAgICAgICAgIHdvcmtpbmdTaGFwZSxcbiAgICAgICAgICB1dGlsLm9uUmVzaXplRW5kPy4oaW5pdGlhbFNoYXBlLCB3b3JraW5nU2hhcGUpID8/IHZvaWQgMFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVTaGFwZXMoW3dvcmtpbmdTaGFwZV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpbml0aWFsUGFnZUNlbnRlciA9IE1hdC5hcHBseVRvUG9pbnQocGFnZVRyYW5zZm9ybSwgaW5pdGlhbEJvdW5kcy5jZW50ZXIpO1xuICAgICAgY29uc3QgbmV3UGFnZUNlbnRlciA9IHRoaXMuX3NjYWxlUGFnZVBvaW50KFxuICAgICAgICBpbml0aWFsUGFnZUNlbnRlcixcbiAgICAgICAgc2NhbGVPcmlnaW4sXG4gICAgICAgIHNjYWxlLFxuICAgICAgICBzY2FsZUF4aXNSb3RhdGlvblxuICAgICAgKTtcbiAgICAgIGNvbnN0IGluaXRpYWxQYWdlQ2VudGVySW5QYXJlbnRTcGFjZSA9IHRoaXMuZ2V0UG9pbnRJblBhcmVudFNwYWNlKFxuICAgICAgICBpbml0aWFsU2hhcGUuaWQsXG4gICAgICAgIGluaXRpYWxQYWdlQ2VudGVyXG4gICAgICApO1xuICAgICAgY29uc3QgbmV3UGFnZUNlbnRlckluUGFyZW50U3BhY2UgPSB0aGlzLmdldFBvaW50SW5QYXJlbnRTcGFjZShpbml0aWFsU2hhcGUuaWQsIG5ld1BhZ2VDZW50ZXIpO1xuICAgICAgY29uc3QgZGVsdGEgPSBWZWMuU3ViKG5ld1BhZ2VDZW50ZXJJblBhcmVudFNwYWNlLCBpbml0aWFsUGFnZUNlbnRlckluUGFyZW50U3BhY2UpO1xuICAgICAgdGhpcy51cGRhdGVTaGFwZXMoW1xuICAgICAgICB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdHlwZTogaW5pdGlhbFNoYXBlLnR5cGUsXG4gICAgICAgICAgeDogaW5pdGlhbFNoYXBlLnggKyBkZWx0YS54LFxuICAgICAgICAgIHk6IGluaXRpYWxTaGFwZS55ICsgZGVsdGEueVxuICAgICAgICB9XG4gICAgICBdKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfc2NhbGVQYWdlUG9pbnQocG9pbnQsIHNjYWxlT3JpZ2luLCBzY2FsZSwgc2NhbGVBeGlzUm90YXRpb24pIHtcbiAgICBjb25zdCByZWxhdGl2ZVBvaW50ID0gVmVjLlJvdFdpdGgocG9pbnQsIHNjYWxlT3JpZ2luLCAtc2NhbGVBeGlzUm90YXRpb24pLnN1YihzY2FsZU9yaWdpbik7XG4gICAgY29uc3QgbmV3UmVsYXRpdmVQYWdlUG9pbnQgPSBWZWMuTXVsVihyZWxhdGl2ZVBvaW50LCBzY2FsZSk7XG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBWZWMuQWRkKG5ld1JlbGF0aXZlUGFnZVBvaW50LCBzY2FsZU9yaWdpbikucm90V2l0aChcbiAgICAgIHNjYWxlT3JpZ2luLFxuICAgICAgc2NhbGVBeGlzUm90YXRpb25cbiAgICApO1xuICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIF9yZXNpemVVbmFsaWduZWRTaGFwZShpZCwgc2NhbGUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHR5cGUgfSA9IG9wdGlvbnMuaW5pdGlhbFNoYXBlO1xuICAgIGNvbnN0IHNoYXBlU2NhbGUgPSBuZXcgVmVjKHNjYWxlLngsIHNjYWxlLnkpO1xuICAgIGlmIChNYXRoLmFicyhzY2FsZS54KSA+IE1hdGguYWJzKHNjYWxlLnkpKSB7XG4gICAgICBzaGFwZVNjYWxlLnggPSBNYXRoLnNpZ24oc2NhbGUueCkgKiBNYXRoLmFicyhzY2FsZS55KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hhcGVTY2FsZS55ID0gTWF0aC5zaWduKHNjYWxlLnkpICogTWF0aC5hYnMoc2NhbGUueCk7XG4gICAgfVxuICAgIHRoaXMucmVzaXplU2hhcGUoaWQsIHNoYXBlU2NhbGUsIHtcbiAgICAgIGluaXRpYWxTaGFwZTogb3B0aW9ucy5pbml0aWFsU2hhcGUsXG4gICAgICBpbml0aWFsQm91bmRzOiBvcHRpb25zLmluaXRpYWxCb3VuZHMsXG4gICAgICBpc0FzcGVjdFJhdGlvTG9ja2VkOiBvcHRpb25zLmlzQXNwZWN0UmF0aW9Mb2NrZWRcbiAgICB9KTtcbiAgICBpZiAoTWF0aC5zaWduKHNjYWxlLngpICogTWF0aC5zaWduKHNjYWxlLnkpIDwgMCkge1xuICAgICAgbGV0IHsgcm90YXRpb24gfSA9IE1hdC5EZWNvbXBvc2Uob3B0aW9ucy5pbml0aWFsUGFnZVRyYW5zZm9ybSk7XG4gICAgICByb3RhdGlvbiAtPSAyICogcm90YXRpb247XG4gICAgICB0aGlzLnVwZGF0ZVNoYXBlcyhbeyBpZCwgdHlwZSwgcm90YXRpb24gfV0pO1xuICAgIH1cbiAgICBjb25zdCBwcmVTY2FsZVNoYXBlUGFnZUNlbnRlciA9IE1hdC5hcHBseVRvUG9pbnQoXG4gICAgICBvcHRpb25zLmluaXRpYWxQYWdlVHJhbnNmb3JtLFxuICAgICAgb3B0aW9ucy5pbml0aWFsQm91bmRzLmNlbnRlclxuICAgICk7XG4gICAgY29uc3QgcG9zdFNjYWxlU2hhcGVQYWdlQ2VudGVyID0gdGhpcy5fc2NhbGVQYWdlUG9pbnQoXG4gICAgICBwcmVTY2FsZVNoYXBlUGFnZUNlbnRlcixcbiAgICAgIG9wdGlvbnMuc2NhbGVPcmlnaW4sXG4gICAgICBzY2FsZSxcbiAgICAgIG9wdGlvbnMuc2NhbGVBeGlzUm90YXRpb25cbiAgICApO1xuICAgIGNvbnN0IHBhZ2VCb3VuZHMgPSB0aGlzLmdldFNoYXBlUGFnZUJvdW5kcyhpZCk7XG4gICAgY29uc3QgcGFnZVRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKGlkKTtcbiAgICBjb25zdCBjdXJyZW50UGFnZUNlbnRlciA9IHBhZ2VCb3VuZHMuY2VudGVyO1xuICAgIGNvbnN0IHNoYXBlUGFnZVRyYW5zZm9ybU9yaWdpbiA9IHBhZ2VUcmFuc2Zvcm0ucG9pbnQoKTtcbiAgICBpZiAoIWN1cnJlbnRQYWdlQ2VudGVyIHx8ICFzaGFwZVBhZ2VUcmFuc2Zvcm1PcmlnaW4pXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBjb25zdCBwYWdlRGVsdGEgPSBWZWMuU3ViKHBvc3RTY2FsZVNoYXBlUGFnZUNlbnRlciwgY3VycmVudFBhZ2VDZW50ZXIpO1xuICAgIGNvbnN0IHBvc3RTY2FsZVNoYXBlUGFnZVBvaW50ID0gVmVjLkFkZChzaGFwZVBhZ2VUcmFuc2Zvcm1PcmlnaW4sIHBhZ2VEZWx0YSk7XG4gICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLmdldFBvaW50SW5QYXJlbnRTcGFjZShpZCwgcG9zdFNjYWxlU2hhcGVQYWdlUG9pbnQpO1xuICAgIHRoaXMudXBkYXRlU2hhcGVzKFt7IGlkLCB0eXBlLCB4LCB5IH1dKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBpbml0aWFsIG1ldGEgdmFsdWUgZm9yIGEgc2hhcGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5nZXRJbml0aWFsTWV0YUZvclNoYXBlID0gKHNoYXBlKSA9PiB7XG4gICAqICAgaWYgKHNoYXBlLnR5cGUgPT09ICdub3RlJykge1xuICAgKiAgICAgcmV0dXJuIHsgY3JlYXRlZEJ5OiBteUN1cnJlbnRVc2VyLmlkIH1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZSB0byBnZXQgdGhlIGluaXRpYWwgbWV0YSBmb3IuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldEluaXRpYWxNZXRhRm9yU2hhcGUoX3NoYXBlKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBzaW5nbGUgc2hhcGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5jcmVhdGVTaGFwZShteVNoYXBlKVxuICAgKiBlZGl0b3IuY3JlYXRlU2hhcGUoeyBpZDogJ2JveDEnLCB0eXBlOiAndGV4dCcsIHByb3BzOiB7IHRleHQ6IFwib2tcIiB9IH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgKG9yIHNoYXBlIHBhcnRpYWwpIHRvIGNyZWF0ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY3JlYXRlU2hhcGUoc2hhcGUpIHtcbiAgICB0aGlzLmNyZWF0ZVNoYXBlcyhbc2hhcGVdKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIHNoYXBlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmNyZWF0ZVNoYXBlcyhbbXlTaGFwZV0pXG4gICAqIGVkaXRvci5jcmVhdGVTaGFwZXMoW3sgaWQ6ICdib3gxJywgdHlwZTogJ3RleHQnLCBwcm9wczogeyB0ZXh0OiBcIm9rXCIgfSB9XSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZXMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBwYXJ0aWFscykgdG8gY3JlYXRlLlxuICAgKiBAcGFyYW0gc2VsZWN0IC0gV2hldGhlciB0byBzZWxlY3QgdGhlIGNyZWF0ZWQgc2hhcGVzLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY3JlYXRlU2hhcGVzKHNoYXBlcykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShzaGFwZXMpKSB7XG4gICAgICB0aHJvdyBFcnJvcihcIkVkaXRvci5jcmVhdGVTaGFwZXM6IG11c3QgcHJvdmlkZSBhbiBhcnJheSBvZiBzaGFwZXMgb3Igc2hhcGUgcGFydGlhbHNcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5pc1JlYWRvbmx5KVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgaWYgKHNoYXBlcy5sZW5ndGggPD0gMClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGN1cnJlbnRQYWdlU2hhcGVJZHMgPSB0aGlzLmdldEN1cnJlbnRQYWdlU2hhcGVJZHMoKTtcbiAgICBjb25zdCBtYXhTaGFwZXNSZWFjaGVkID0gc2hhcGVzLmxlbmd0aCArIGN1cnJlbnRQYWdlU2hhcGVJZHMuc2l6ZSA+IHRoaXMub3B0aW9ucy5tYXhTaGFwZXNQZXJQYWdlO1xuICAgIGlmIChtYXhTaGFwZXNSZWFjaGVkKSB7XG4gICAgICBhbGVydE1heFNoYXBlcyh0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjb25zdCBmb2N1c2VkR3JvdXBJZCA9IHRoaXMuZ2V0Rm9jdXNlZEdyb3VwSWQoKTtcbiAgICByZXR1cm4gdGhpcy5iYXRjaCgoKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50UGFnZVNoYXBlc1NvcnRlZCA9IHRoaXMuZ2V0Q3VycmVudFBhZ2VTaGFwZXNTb3J0ZWQoKTtcbiAgICAgIGNvbnN0IHBhcnRpYWxzID0gc2hhcGVzLm1hcCgocGFydGlhbCkgPT4ge1xuICAgICAgICBpZiAoIXBhcnRpYWwuaWQpIHtcbiAgICAgICAgICBwYXJ0aWFsID0geyBpZDogY3JlYXRlU2hhcGVJZCgpLCAuLi5wYXJ0aWFsIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwYXJ0aWFsLnBhcmVudElkIHx8ICEodGhpcy5zdG9yZS5oYXMocGFydGlhbC5wYXJlbnRJZCkgfHwgc2hhcGVzLnNvbWUoKHApID0+IHAuaWQgPT09IHBhcnRpYWwucGFyZW50SWQpKSkge1xuICAgICAgICAgIGxldCBwYXJlbnRJZCA9IHRoaXMuZ2V0Rm9jdXNlZEdyb3VwSWQoKTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gY3VycmVudFBhZ2VTaGFwZXNTb3J0ZWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGN1cnJlbnRQYWdlU2hhcGVzU29ydGVkW2ldO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAvLyBwYXJlbnQudHlwZSA9PT0gJ2ZyYW1lJ1xuICAgICAgICAgICAgICB0aGlzLmdldFNoYXBlVXRpbChwYXJlbnQpLmNhblJlY2VpdmVOZXdDaGlsZHJlbk9mVHlwZShwYXJlbnQsIHBhcnRpYWwudHlwZSkgJiYgdGhpcy5pc1BvaW50SW5TaGFwZShcbiAgICAgICAgICAgICAgICBwYXJlbnQsXG4gICAgICAgICAgICAgICAgLy8gSWYgbm8gcGFyZW50IGlzIHByb3ZpZGVkLCB0aGVuIHdlIGNhbiB0cmVhdCB0aGVcbiAgICAgICAgICAgICAgICAvLyBzaGFwZSdzIHByb3ZpZGVkIHgveSBhcyBiZWluZyBpbiB0aGUgcGFnZSdzIHNwYWNlLlxuICAgICAgICAgICAgICAgIHsgeDogcGFydGlhbC54ID8/IDAsIHk6IHBhcnRpYWwueSA/PyAwIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICAgICAgICAgICAgaGl0SW5zaWRlOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcGFyZW50SWQgPSBwYXJlbnQuaWQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwcmV2UGFyZW50SWQgPSBwYXJ0aWFsLnBhcmVudElkO1xuICAgICAgICAgIGlmIChwYXJlbnRJZCA9PT0gcGFydGlhbC5pZCkge1xuICAgICAgICAgICAgcGFyZW50SWQgPSBmb2N1c2VkR3JvdXBJZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHBhcmVudElkICE9PSBwcmV2UGFyZW50SWQpIHtcbiAgICAgICAgICAgIHBhcnRpYWwgPSB7IC4uLnBhcnRpYWwgfTtcbiAgICAgICAgICAgIHBhcnRpYWwucGFyZW50SWQgPSBwYXJlbnRJZDtcbiAgICAgICAgICAgIGlmIChpc1NoYXBlSWQocGFyZW50SWQpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gdGhpcy5nZXRQb2ludEluU2hhcGVTcGFjZSh0aGlzLmdldFNoYXBlKHBhcmVudElkKSwge1xuICAgICAgICAgICAgICAgIHg6IHBhcnRpYWwueCA/PyAwLFxuICAgICAgICAgICAgICAgIHk6IHBhcnRpYWwueSA/PyAwXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBwYXJ0aWFsLnggPSBwb2ludC54O1xuICAgICAgICAgICAgICBwYXJ0aWFsLnkgPSBwb2ludC55O1xuICAgICAgICAgICAgICBwYXJ0aWFsLnJvdGF0aW9uID0gLXRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHBhcmVudElkKS5yb3RhdGlvbigpICsgKHBhcnRpYWwucm90YXRpb24gPz8gMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJ0aWFsO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBwYXJlbnRJbmRpY2VzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgIGNvbnN0IHNoYXBlUmVjb3Jkc1RvQ3JlYXRlID0gW107XG4gICAgICBjb25zdCB7IG9wYWNpdHlGb3JOZXh0U2hhcGUgfSA9IHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpO1xuICAgICAgZm9yIChjb25zdCBwYXJ0aWFsIG9mIHBhcnRpYWxzKSB7XG4gICAgICAgIGNvbnN0IHV0aWwgPSB0aGlzLmdldFNoYXBlVXRpbChwYXJ0aWFsKTtcbiAgICAgICAgbGV0IGluZGV4ID0gcGFydGlhbC5pbmRleDtcbiAgICAgICAgaWYgKCFpbmRleCkge1xuICAgICAgICAgIGNvbnN0IHBhcmVudElkID0gcGFydGlhbC5wYXJlbnRJZCA/PyBmb2N1c2VkR3JvdXBJZDtcbiAgICAgICAgICBpZiAoIXBhcmVudEluZGljZXMuaGFzKHBhcmVudElkKSkge1xuICAgICAgICAgICAgcGFyZW50SW5kaWNlcy5zZXQocGFyZW50SWQsIHRoaXMuZ2V0SGlnaGVzdEluZGV4Rm9yUGFyZW50KHBhcmVudElkKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGluZGV4ID0gcGFyZW50SW5kaWNlcy5nZXQocGFyZW50SWQpO1xuICAgICAgICAgIHBhcmVudEluZGljZXMuc2V0KHBhcmVudElkLCBnZXRJbmRleEFib3ZlKGluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5pdGlhbFByb3BzID0gdXRpbC5nZXREZWZhdWx0UHJvcHMoKTtcbiAgICAgICAgZm9yIChjb25zdCBbc3R5bGUsIHByb3BLZXldIG9mIHRoaXMuc3R5bGVQcm9wc1twYXJ0aWFsLnR5cGVdKSB7XG4gICAgICAgICAgO1xuICAgICAgICAgIGluaXRpYWxQcm9wc1twcm9wS2V5XSA9IHRoaXMuZ2V0U3R5bGVGb3JOZXh0U2hhcGUoc3R5bGUpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzaGFwZVJlY29yZFRvQ3JlYXRlID0gdGhpcy5zdG9yZS5zY2hlbWEudHlwZXMuc2hhcGUuY3JlYXRlKHtcbiAgICAgICAgICAuLi5wYXJ0aWFsLFxuICAgICAgICAgIGluZGV4LFxuICAgICAgICAgIG9wYWNpdHk6IHBhcnRpYWwub3BhY2l0eSA/PyBvcGFjaXR5Rm9yTmV4dFNoYXBlLFxuICAgICAgICAgIHBhcmVudElkOiBwYXJ0aWFsLnBhcmVudElkID8/IGZvY3VzZWRHcm91cElkLFxuICAgICAgICAgIHByb3BzOiBcInByb3BzXCIgaW4gcGFydGlhbCA/IHsgLi4uaW5pdGlhbFByb3BzLCAuLi5wYXJ0aWFsLnByb3BzIH0gOiBpbml0aWFsUHJvcHNcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzaGFwZVJlY29yZFRvQ3JlYXRlLmluZGV4ID09PSB2b2lkIDApIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcihcIm5vIGluZGV4IVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5nZXRTaGFwZVV0aWwoc2hhcGVSZWNvcmRUb0NyZWF0ZSkub25CZWZvcmVDcmVhdGU/LihzaGFwZVJlY29yZFRvQ3JlYXRlKTtcbiAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICBzaGFwZVJlY29yZFRvQ3JlYXRlID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBzaGFwZVJlY29yZHNUb0NyZWF0ZS5wdXNoKHNoYXBlUmVjb3JkVG9DcmVhdGUpO1xuICAgICAgfVxuICAgICAgc2hhcGVSZWNvcmRzVG9DcmVhdGUuZm9yRWFjaCgoc2hhcGUpID0+IHtcbiAgICAgICAgc2hhcGUubWV0YSA9IHtcbiAgICAgICAgICAuLi50aGlzLmdldEluaXRpYWxNZXRhRm9yU2hhcGUoc2hhcGUpLFxuICAgICAgICAgIC4uLnNoYXBlLm1ldGFcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zdG9yZS5wdXQoc2hhcGVSZWNvcmRzVG9DcmVhdGUpO1xuICAgIH0pO1xuICB9XG4gIGFuaW1hdGluZ1NoYXBlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8qKlxuICAgKiBBbmltYXRlIGEgc2hhcGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5hbmltYXRlU2hhcGUoeyBpZDogJ2JveDEnLCB0eXBlOiAnYm94JywgeDogMTAwLCB5OiAxMDAgfSlcbiAgICogZWRpdG9yLmFuaW1hdGVTaGFwZSh7IGlkOiAnYm94MScsIHR5cGU6ICdib3gnLCB4OiAxMDAsIHk6IDEwMCB9LCB7IGFuaW1hdGlvbjogeyBkdXJhdGlvbjogMTAwLCBlYXNlOiB0ID0+IHQqdCB9IH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGFydGlhbCAtIFRoZSBzaGFwZSBwYXJ0aWFsIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgYW5pbWF0aW9uJ3Mgb3B0aW9ucy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYW5pbWF0ZVNoYXBlKHBhcnRpYWwsIG9wdHMgPSB7IGFuaW1hdGlvbjogREVGQVVMVF9BTklNQVRJT05fT1BUSU9OUyB9KSB7XG4gICAgcmV0dXJuIHRoaXMuYW5pbWF0ZVNoYXBlcyhbcGFydGlhbF0sIG9wdHMpO1xuICB9XG4gIC8qKlxuICAgKiBBbmltYXRlIHNoYXBlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmFuaW1hdGVTaGFwZXMoW3sgaWQ6ICdib3gxJywgdHlwZTogJ2JveCcsIHg6IDEwMCwgeTogMTAwIH1dKVxuICAgKiBlZGl0b3IuYW5pbWF0ZVNoYXBlcyhbeyBpZDogJ2JveDEnLCB0eXBlOiAnYm94JywgeDogMTAwLCB5OiAxMDAgfV0sIHsgYW5pbWF0aW9uOiB7IGR1cmF0aW9uOiAxMDAsIGVhc2U6IHQgPT4gdCp0IH0gfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwYXJ0aWFscyAtIFRoZSBzaGFwZSBwYXJ0aWFscyB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIGFuaW1hdGlvbidzIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFuaW1hdGVTaGFwZXMocGFydGlhbHMsIG9wdHMgPSB7IGFuaW1hdGlvbjogREVGQVVMVF9BTklNQVRJT05fT1BUSU9OUyB9KSB7XG4gICAgaWYgKCFvcHRzLmFuaW1hdGlvbilcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHsgZHVyYXRpb24gPSA1MDAsIGVhc2luZyA9IEVBU0lOR1MubGluZWFyIH0gPSBvcHRzLmFuaW1hdGlvbjtcbiAgICBjb25zdCBhbmltYXRpb25JZCA9IHVuaXF1ZUlkKCk7XG4gICAgbGV0IHJlbWFpbmluZyA9IGR1cmF0aW9uO1xuICAgIGxldCB0O1xuICAgIGNvbnN0IGFuaW1hdGlvbnMgPSBbXTtcbiAgICBsZXQgcGFydGlhbCwgcmVzdWx0O1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gcGFydGlhbHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBwYXJ0aWFsID0gcGFydGlhbHNbaV07XG4gICAgICBpZiAoIXBhcnRpYWwpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBwYXJ0aWFsLFxuICAgICAgICB2YWx1ZXM6IFtdXG4gICAgICB9O1xuICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLmdldFNoYXBlKHBhcnRpYWwuaWQpO1xuICAgICAgaWYgKCFzaGFwZSlcbiAgICAgICAgY29udGludWU7XG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBbXCJ4XCIsIFwieVwiLCBcInJvdGF0aW9uXCJdKSB7XG4gICAgICAgIGlmIChwYXJ0aWFsW2tleV0gIT09IHZvaWQgMCAmJiBzaGFwZVtrZXldICE9PSBwYXJ0aWFsW2tleV0pIHtcbiAgICAgICAgICByZXN1bHQudmFsdWVzLnB1c2goeyBwcm9wOiBrZXksIGZyb206IHNoYXBlW2tleV0sIHRvOiBwYXJ0aWFsW2tleV0gfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGFuaW1hdGlvbnMucHVzaChyZXN1bHQpO1xuICAgICAgdGhpcy5hbmltYXRpbmdTaGFwZXMuc2V0KHNoYXBlLmlkLCBhbmltYXRpb25JZCk7XG4gICAgfVxuICAgIGxldCB2YWx1ZTtcbiAgICBjb25zdCBoYW5kbGVUaWNrID0gKGVsYXBzZWQpID0+IHtcbiAgICAgIHJlbWFpbmluZyAtPSBlbGFwc2VkO1xuICAgICAgaWYgKHJlbWFpbmluZyA8IDApIHtcbiAgICAgICAgY29uc3QgeyBhbmltYXRpbmdTaGFwZXM6IGFuaW1hdGluZ1NoYXBlczIgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHBhcnRpYWxzVG9VcGRhdGUgPSBwYXJ0aWFscy5maWx0ZXIoXG4gICAgICAgICAgKHApID0+IHAgJiYgYW5pbWF0aW5nU2hhcGVzMi5nZXQocC5pZCkgPT09IGFuaW1hdGlvbklkXG4gICAgICAgICk7XG4gICAgICAgIGlmIChwYXJ0aWFsc1RvVXBkYXRlLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMudXBkYXRlU2hhcGVzKHBhcnRpYWxzVG9VcGRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2ZmKFwidGlja1wiLCBoYW5kbGVUaWNrKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdCA9IGVhc2luZygxIC0gcmVtYWluaW5nIC8gZHVyYXRpb24pO1xuICAgICAgY29uc3QgeyBhbmltYXRpbmdTaGFwZXMgfSA9IHRoaXM7XG4gICAgICBjb25zdCB1cGRhdGVzID0gW107XG4gICAgICBsZXQgYW5pbWF0aW9uSWRGb3JTaGFwZTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gYW5pbWF0aW9ucy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBhbmltYXRpb25zW2ldO1xuICAgICAgICBhbmltYXRpb25JZEZvclNoYXBlID0gYW5pbWF0aW5nU2hhcGVzLmdldCh2YWx1ZS5wYXJ0aWFsLmlkKTtcbiAgICAgICAgaWYgKGFuaW1hdGlvbklkRm9yU2hhcGUgIT09IGFuaW1hdGlvbklkKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB1cGRhdGVzLnB1c2goe1xuICAgICAgICAgIGlkOiB2YWx1ZS5wYXJ0aWFsLmlkLFxuICAgICAgICAgIHR5cGU6IHZhbHVlLnBhcnRpYWwudHlwZSxcbiAgICAgICAgICAuLi52YWx1ZS52YWx1ZXMucmVkdWNlKChhY2MsIHsgcHJvcCwgZnJvbSwgdG8gfSkgPT4ge1xuICAgICAgICAgICAgYWNjW3Byb3BdID0gZnJvbSArICh0byAtIGZyb20pICogdDtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgfSwge30pXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5fdXBkYXRlU2hhcGVzKHVwZGF0ZXMpO1xuICAgIH07XG4gICAgdGhpcy5vbihcInRpY2tcIiwgaGFuZGxlVGljayk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ3JvdXBTaGFwZXMoc2hhcGVzLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7IGdyb3VwSWQgPSBjcmVhdGVTaGFwZUlkKCksIHNlbGVjdCA9IHRydWUgfSA9IG9wdGlvbnM7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNoYXBlcykpIHtcbiAgICAgIHRocm93IEVycm9yKFwiRWRpdG9yLmdyb3VwU2hhcGVzOiBtdXN0IHByb3ZpZGUgYW4gYXJyYXkgb2Ygc2hhcGVzIG9yIHNoYXBlIGlkc1wiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzUmVhZG9ubHkpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBjb25zdCBpZHMgPSB0eXBlb2Ygc2hhcGVzWzBdID09PSBcInN0cmluZ1wiID8gc2hhcGVzIDogc2hhcGVzLm1hcCgocykgPT4gcy5pZCk7XG4gICAgaWYgKGlkcy5sZW5ndGggPD0gMSlcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHNoYXBlc1RvR3JvdXAgPSBjb21wYWN0KHRoaXMuX2dldFVubG9ja2VkU2hhcGVJZHMoaWRzKS5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlKGlkKSkpO1xuICAgIGNvbnN0IHNvcnRlZFNoYXBlSWRzID0gc2hhcGVzVG9Hcm91cC5zb3J0KHNvcnRCeUluZGV4KS5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGNvbnN0IHBhZ2VCb3VuZHMgPSBCb3guQ29tbW9uKGNvbXBhY3Qoc2hhcGVzVG9Hcm91cC5tYXAoKGlkKSA9PiB0aGlzLmdldFNoYXBlUGFnZUJvdW5kcyhpZCkpKSk7XG4gICAgY29uc3QgeyB4LCB5IH0gPSBwYWdlQm91bmRzLnBvaW50O1xuICAgIGNvbnN0IHBhcmVudElkID0gdGhpcy5maW5kQ29tbW9uQW5jZXN0b3Ioc2hhcGVzVG9Hcm91cCkgPz8gdGhpcy5nZXRDdXJyZW50UGFnZUlkKCk7XG4gICAgaWYgKHRoaXMuZ2V0Q3VycmVudFRvb2xJZCgpICE9PSBcInNlbGVjdFwiKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgaWYgKCF0aGlzLmlzSW4oXCJzZWxlY3QuaWRsZVwiKSkge1xuICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICB9XG4gICAgY29uc3Qgc2hhcGVzV2l0aFJvb3RQYXJlbnQgPSBzaGFwZXNUb0dyb3VwLmZpbHRlcigoc2hhcGUpID0+IHNoYXBlLnBhcmVudElkID09PSBwYXJlbnRJZCkuc29ydChzb3J0QnlJbmRleCk7XG4gICAgY29uc3QgaGlnaGVzdEluZGV4ID0gc2hhcGVzV2l0aFJvb3RQYXJlbnRbc2hhcGVzV2l0aFJvb3RQYXJlbnQubGVuZ3RoIC0gMV0/LmluZGV4O1xuICAgIHRoaXMuYmF0Y2goKCkgPT4ge1xuICAgICAgdGhpcy5jcmVhdGVTaGFwZXMoW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6IGdyb3VwSWQsXG4gICAgICAgICAgdHlwZTogXCJncm91cFwiLFxuICAgICAgICAgIHBhcmVudElkLFxuICAgICAgICAgIGluZGV4OiBoaWdoZXN0SW5kZXgsXG4gICAgICAgICAgeCxcbiAgICAgICAgICB5LFxuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgcHJvcHM6IHt9XG4gICAgICAgIH1cbiAgICAgIF0pO1xuICAgICAgdGhpcy5yZXBhcmVudFNoYXBlcyhzb3J0ZWRTaGFwZUlkcywgZ3JvdXBJZCk7XG4gICAgICBpZiAoc2VsZWN0KSB7XG4gICAgICAgIHRoaXMuc2VsZWN0KGdyb3VwSWQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHVuZ3JvdXBTaGFwZXMoc2hhcGVzLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7IHNlbGVjdCA9IHRydWUgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICAgIGlmICh0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5pc1JlYWRvbmx5KVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgaWYgKGlkcy5sZW5ndGggPT09IDApXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBpZiAodGhpcy5nZXRDdXJyZW50VG9vbElkKCkgIT09IFwic2VsZWN0XCIpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBpZiAoIXRoaXMuaXNJbihcInNlbGVjdC5pZGxlXCIpKSB7XG4gICAgICB0aGlzLmNhbmNlbCgpO1xuICAgIH1cbiAgICBjb25zdCBpZHNUb1NlbGVjdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgY29uc3QgZ3JvdXBzID0gW107XG4gICAgY29tcGFjdChpZHMubWFwKChpZCkgPT4gdGhpcy5nZXRTaGFwZShpZCkpKS5mb3JFYWNoKChzaGFwZSkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNTaGFwZU9mVHlwZShzaGFwZSwgXCJncm91cFwiKSkge1xuICAgICAgICBncm91cHMucHVzaChzaGFwZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZHNUb1NlbGVjdC5hZGQoc2hhcGUuaWQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChncm91cHMubGVuZ3RoID09PSAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgdGhpcy5iYXRjaCgoKSA9PiB7XG4gICAgICBsZXQgZ3JvdXA7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbiA9IGdyb3Vwcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgZ3JvdXAgPSBncm91cHNbaV07XG4gICAgICAgIGNvbnN0IGNoaWxkSWRzID0gdGhpcy5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudChncm91cC5pZCk7XG4gICAgICAgIGZvciAobGV0IGogPSAwLCBuMiA9IGNoaWxkSWRzLmxlbmd0aDsgaiA8IG4yOyBqKyspIHtcbiAgICAgICAgICBpZHNUb1NlbGVjdC5hZGQoY2hpbGRJZHNbal0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwYXJlbnRTaGFwZXMoY2hpbGRJZHMsIGdyb3VwLnBhcmVudElkLCBncm91cC5pbmRleCk7XG4gICAgICB9XG4gICAgICB0aGlzLmRlbGV0ZVNoYXBlcyhncm91cHMubWFwKChncm91cDIpID0+IGdyb3VwMi5pZCkpO1xuICAgICAgaWYgKHNlbGVjdCkge1xuICAgICAgICB0aGlzLnNlbGVjdCguLi5pZHNUb1NlbGVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIHNoYXBlIHVzaW5nIGEgcGFydGlhbCBvZiB0aGUgc2hhcGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci51cGRhdGVTaGFwZSh7IGlkOiAnYm94MScsIHR5cGU6ICdnZW8nLCBwcm9wczogeyB3OiAxMDAsIGg6IDEwMCB9IH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcGFydGlhbCAtIFRoZSBzaGFwZSBwYXJ0aWFsIHRvIHVwZGF0ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgdXBkYXRlU2hhcGUocGFydGlhbCkge1xuICAgIHRoaXMudXBkYXRlU2hhcGVzKFtwYXJ0aWFsXSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBzaGFwZXMgdXNpbmcgcGFydGlhbHMgb2YgZWFjaCBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnVwZGF0ZVNoYXBlcyhbeyBpZDogJ2JveDEnLCB0eXBlOiAnZ2VvJywgcHJvcHM6IHsgdzogMTAwLCBoOiAxMDAgfSB9XSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBwYXJ0aWFscyAtIFRoZSBzaGFwZSBwYXJ0aWFscyB0byB1cGRhdGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHVwZGF0ZVNoYXBlcyhwYXJ0aWFscykge1xuICAgIGNvbnN0IGNvbXBhY3RlZFBhcnRpYWxzID0gQXJyYXkocGFydGlhbHMubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IHBhcnRpYWxzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgY29uc3QgcGFydGlhbCA9IHBhcnRpYWxzW2ldO1xuICAgICAgaWYgKCFwYXJ0aWFsKVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5nZXRTaGFwZShwYXJ0aWFsLmlkKTtcbiAgICAgIGlmICghc2hhcGUpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgaWYgKHRoaXMuaXNTaGFwZU9yQW5jZXN0b3JMb2NrZWQoc2hhcGUpICYmICFPYmplY3QuaGFzT3duKHBhcnRpYWwsIFwiaXNMb2NrZWRcIikpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgdGhpcy5hbmltYXRpbmdTaGFwZXMuZGVsZXRlKHBhcnRpYWwuaWQpO1xuICAgICAgY29tcGFjdGVkUGFydGlhbHMucHVzaChwYXJ0aWFsKTtcbiAgICB9XG4gICAgdGhpcy5fdXBkYXRlU2hhcGVzKGNvbXBhY3RlZFBhcnRpYWxzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIF91cGRhdGVTaGFwZXMgPSAoX3BhcnRpYWxzKSA9PiB7XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzUmVhZG9ubHkpXG4gICAgICByZXR1cm47XG4gICAgdGhpcy5iYXRjaCgoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVzID0gW107XG4gICAgICBsZXQgc2hhcGU7XG4gICAgICBsZXQgdXBkYXRlZDtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gX3BhcnRpYWxzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICBjb25zdCBwYXJ0aWFsID0gX3BhcnRpYWxzW2ldO1xuICAgICAgICBpZiAoIXBhcnRpYWwpXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIHNoYXBlID0gdGhpcy5nZXRTaGFwZShwYXJ0aWFsLmlkKTtcbiAgICAgICAgaWYgKCFzaGFwZSlcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgdXBkYXRlZCA9IGFwcGx5UGFydGlhbFRvUmVjb3JkV2l0aFByb3BzKHNoYXBlLCBwYXJ0aWFsKTtcbiAgICAgICAgaWYgKHVwZGF0ZWQgPT09IHNoYXBlKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB1cGRhdGVkID0gdGhpcy5nZXRTaGFwZVV0aWwoc2hhcGUpLm9uQmVmb3JlVXBkYXRlPy4oc2hhcGUsIHVwZGF0ZWQpID8/IHVwZGF0ZWQ7XG4gICAgICAgIHVwZGF0ZXMucHVzaCh1cGRhdGVkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RvcmUucHV0KHVwZGF0ZXMpO1xuICAgIH0pO1xuICB9O1xuICAvKiogQGludGVybmFsICovXG4gIF9nZXRVbmxvY2tlZFNoYXBlSWRzKGlkcykge1xuICAgIHJldHVybiBpZHMuZmlsdGVyKChpZCkgPT4gIXRoaXMuZ2V0U2hhcGUoaWQpPy5pc0xvY2tlZCk7XG4gIH1cbiAgZGVsZXRlU2hhcGVzKF9pZHMpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoX2lkcykpIHtcbiAgICAgIHRocm93IEVycm9yKFwiRWRpdG9yLmRlbGV0ZVNoYXBlczogbXVzdCBwcm92aWRlIGFuIGFycmF5IG9mIHNoYXBlcyBvciBzaGFwZUlkc1wiKTtcbiAgICB9XG4gICAgY29uc3QgaWRzID0gdGhpcy5fZ2V0VW5sb2NrZWRTaGFwZUlkcyhcbiAgICAgIHR5cGVvZiBfaWRzWzBdID09PSBcInN0cmluZ1wiID8gX2lkcyA6IF9pZHMubWFwKChzKSA9PiBzLmlkKVxuICAgICk7XG4gICAgaWYgKHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzUmVhZG9ubHkpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBpZiAoaWRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGFsbElkcyA9IG5ldyBTZXQoaWRzKTtcbiAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykge1xuICAgICAgdGhpcy52aXNpdERlc2NlbmRhbnRzKGlkLCAoY2hpbGRJZCkgPT4ge1xuICAgICAgICBhbGxJZHMuYWRkKGNoaWxkSWQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGRlbGV0ZWRJZHMgPSBbLi4uYWxsSWRzXTtcbiAgICByZXR1cm4gdGhpcy5iYXRjaCgoKSA9PiB0aGlzLnN0b3JlLnJlbW92ZShkZWxldGVkSWRzKSk7XG4gIH1cbiAgZGVsZXRlU2hhcGUoX2lkKSB7XG4gICAgdGhpcy5kZWxldGVTaGFwZXMoW3R5cGVvZiBfaWQgPT09IFwic3RyaW5nXCIgPyBfaWQgOiBfaWQuaWRdKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0gU3R5bGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKipcbiAgICogR2V0IGFsbCB0aGUgY3VycmVudCBzdHlsZXMgYW1vbmcgdGhlIHVzZXJzIHNlbGVjdGVkIHNoYXBlc1xuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9leHRyYWN0U2hhcmVkU3R5bGVzKHNoYXBlLCBzaGFyZWRTdHlsZU1hcCkge1xuICAgIGlmICh0aGlzLmlzU2hhcGVPZlR5cGUoc2hhcGUsIFwiZ3JvdXBcIikpIHtcbiAgICAgIGNvbnN0IGNoaWxkSWRzID0gdGhpcy5fcGFyZW50SWRzVG9DaGlsZElkcy5nZXQoKVtzaGFwZS5pZF07XG4gICAgICBpZiAoIWNoaWxkSWRzKVxuICAgICAgICByZXR1cm47XG4gICAgICBmb3IgKGxldCBpID0gMCwgbiA9IGNoaWxkSWRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICB0aGlzLl9leHRyYWN0U2hhcmVkU3R5bGVzKHRoaXMuZ2V0U2hhcGUoY2hpbGRJZHNbaV0pLCBzaGFyZWRTdHlsZU1hcCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgW3N0eWxlLCBwcm9wS2V5XSBvZiB0aGlzLnN0eWxlUHJvcHNbc2hhcGUudHlwZV0pIHtcbiAgICAgICAgc2hhcmVkU3R5bGVNYXAuYXBwbHlWYWx1ZShzdHlsZSwgZ2V0T3duUHJvcGVydHkoc2hhcGUucHJvcHMsIHByb3BLZXkpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX2dldFNlbGVjdGlvblNoYXJlZFN0eWxlcygpIHtcbiAgICBjb25zdCBzZWxlY3RlZFNoYXBlcyA9IHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZXMoKTtcbiAgICBjb25zdCBzaGFyZWRTdHlsZXMgPSBuZXcgU2hhcmVkU3R5bGVNYXAoKTtcbiAgICBmb3IgKGNvbnN0IHNlbGVjdGVkU2hhcGUgb2Ygc2VsZWN0ZWRTaGFwZXMpIHtcbiAgICAgIHRoaXMuX2V4dHJhY3RTaGFyZWRTdHlsZXMoc2VsZWN0ZWRTaGFwZSwgc2hhcmVkU3R5bGVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHNoYXJlZFN0eWxlcztcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBzdHlsZSBmb3IgdGhlIG5leHQgc2hhcGUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IGNvbG9yID0gZWRpdG9yLmdldFN0eWxlRm9yTmV4dFNoYXBlKERlZmF1bHRDb2xvclN0eWxlKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHN0eWxlIC0gVGhlIHN0eWxlIHRvIGdldC5cbiAgICpcbiAgICogQHB1YmxpYyAqL1xuICBnZXRTdHlsZUZvck5leHRTaGFwZShzdHlsZSkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRJbnN0YW5jZVN0YXRlKCkuc3R5bGVzRm9yTmV4dFNoYXBlW3N0eWxlLmlkXTtcbiAgICByZXR1cm4gdmFsdWUgPT09IHZvaWQgMCA/IHN0eWxlLmRlZmF1bHRWYWx1ZSA6IHZhbHVlO1xuICB9XG4gIGdldFNoYXBlU3R5bGVJZkV4aXN0cyhzaGFwZSwgc3R5bGUpIHtcbiAgICBjb25zdCBzdHlsZUtleSA9IHRoaXMuc3R5bGVQcm9wc1tzaGFwZS50eXBlXS5nZXQoc3R5bGUpO1xuICAgIGlmIChzdHlsZUtleSA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICByZXR1cm4gZ2V0T3duUHJvcGVydHkoc2hhcGUucHJvcHMsIHN0eWxlS2V5KTtcbiAgfVxuICBnZXRTaGFyZWRTdHlsZXMoKSB7XG4gICAgaWYgKHRoaXMuaXNJbihcInNlbGVjdFwiKSAmJiB0aGlzLmdldFNlbGVjdGVkU2hhcGVJZHMoKS5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ2V0U2VsZWN0aW9uU2hhcmVkU3R5bGVzKCk7XG4gICAgfVxuICAgIGNvbnN0IGN1cnJlbnRUb29sID0gdGhpcy5yb290LmdldEN1cnJlbnQoKTtcbiAgICBjb25zdCBzdHlsZXMgPSBuZXcgU2hhcmVkU3R5bGVNYXAoKTtcbiAgICBpZiAoIWN1cnJlbnRUb29sKVxuICAgICAgcmV0dXJuIHN0eWxlcztcbiAgICBpZiAoY3VycmVudFRvb2wuc2hhcGVUeXBlKSB7XG4gICAgICBmb3IgKGNvbnN0IHN0eWxlIG9mIHRoaXMuc3R5bGVQcm9wc1tjdXJyZW50VG9vbC5zaGFwZVR5cGVdLmtleXMoKSkge1xuICAgICAgICBzdHlsZXMuYXBwbHlWYWx1ZShzdHlsZSwgdGhpcy5nZXRTdHlsZUZvck5leHRTaGFwZShzdHlsZSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3R5bGVzO1xuICB9XG4gIGdldFNoYXJlZE9wYWNpdHkoKSB7XG4gICAgaWYgKHRoaXMuaXNJbihcInNlbGVjdFwiKSAmJiB0aGlzLmdldFNlbGVjdGVkU2hhcGVJZHMoKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzaGFwZXNUb0NoZWNrID0gW107XG4gICAgICBjb25zdCBhZGRTaGFwZSA9IChzaGFwZUlkKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5nZXRTaGFwZShzaGFwZUlkKTtcbiAgICAgICAgaWYgKCFzaGFwZSlcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmlzU2hhcGVPZlR5cGUoc2hhcGUsIFwiZ3JvdXBcIikpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkSWQgb2YgdGhpcy5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudChzaGFwZS5pZCkpIHtcbiAgICAgICAgICAgIGFkZFNoYXBlKGNoaWxkSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGFwZXNUb0NoZWNrLnB1c2goc2hhcGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgZm9yIChjb25zdCBzaGFwZUlkIG9mIHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZUlkcygpKSB7XG4gICAgICAgIGFkZFNoYXBlKHNoYXBlSWQpO1xuICAgICAgfVxuICAgICAgbGV0IG9wYWNpdHkgPSBudWxsO1xuICAgICAgZm9yIChjb25zdCBzaGFwZSBvZiBzaGFwZXNUb0NoZWNrKSB7XG4gICAgICAgIGlmIChvcGFjaXR5ID09PSBudWxsKSB7XG4gICAgICAgICAgb3BhY2l0eSA9IHNoYXBlLm9wYWNpdHk7XG4gICAgICAgIH0gZWxzZSBpZiAob3BhY2l0eSAhPT0gc2hhcGUub3BhY2l0eSkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6IFwibWl4ZWRcIiB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob3BhY2l0eSAhPT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJzaGFyZWRcIiwgdmFsdWU6IG9wYWNpdHkgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdHlwZTogXCJzaGFyZWRcIiwgdmFsdWU6IHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLm9wYWNpdHlGb3JOZXh0U2hhcGUgfTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBvcGFjaXR5IGZvciB0aGUgbmV4dCBzaGFwZXMuIFRoaXMgd2lsbCBlZmZlY3Qgc3Vic2VxdWVudGx5IGNyZWF0ZWQgc2hhcGVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2V0T3BhY2l0eUZvck5leHRTaGFwZXMoMC41KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIG9wYWNpdHkgLSBUaGUgb3BhY2l0eSB0byBzZXQuIE11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxIGluY2x1c2l2ZS5cbiAgICogQHBhcmFtIGhpc3RvcnlPcHRpb25zIC0gVGhlIGhpc3Rvcnkgb3B0aW9ucyBmb3IgdGhlIGNoYW5nZS5cbiAgICovXG4gIHNldE9wYWNpdHlGb3JOZXh0U2hhcGVzKG9wYWNpdHksIGhpc3RvcnlPcHRpb25zKSB7XG4gICAgdGhpcy51cGRhdGVJbnN0YW5jZVN0YXRlKHsgb3BhY2l0eUZvck5leHRTaGFwZTogb3BhY2l0eSB9LCBoaXN0b3J5T3B0aW9ucyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgY3VycmVudCBvcGFjaXR5LiBUaGlzIHdpbGwgZWZmZWN0IGFueSBzZWxlY3RlZCBzaGFwZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zZXRPcGFjaXR5Rm9yU2VsZWN0ZWRTaGFwZXMoMC41KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIG9wYWNpdHkgLSBUaGUgb3BhY2l0eSB0byBzZXQuIE11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxIGluY2x1c2l2ZS5cbiAgICovXG4gIHNldE9wYWNpdHlGb3JTZWxlY3RlZFNoYXBlcyhvcGFjaXR5KSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRTaGFwZXMgPSB0aGlzLmdldFNlbGVjdGVkU2hhcGVzKCk7XG4gICAgaWYgKHNlbGVjdGVkU2hhcGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHNoYXBlc1RvVXBkYXRlID0gW107XG4gICAgICBjb25zdCBhZGRTaGFwZUJ5SWQgPSAoc2hhcGUpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNTaGFwZU9mVHlwZShzaGFwZSwgXCJncm91cFwiKSkge1xuICAgICAgICAgIGNvbnN0IGNoaWxkSWRzID0gdGhpcy5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudChzaGFwZSk7XG4gICAgICAgICAgZm9yIChjb25zdCBjaGlsZElkIG9mIGNoaWxkSWRzKSB7XG4gICAgICAgICAgICBhZGRTaGFwZUJ5SWQodGhpcy5nZXRTaGFwZShjaGlsZElkKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNoYXBlc1RvVXBkYXRlLnB1c2goc2hhcGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgZm9yIChjb25zdCBpZCBvZiBzZWxlY3RlZFNoYXBlcykge1xuICAgICAgICBhZGRTaGFwZUJ5SWQoaWQpO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVTaGFwZXMoXG4gICAgICAgIHNoYXBlc1RvVXBkYXRlLm1hcCgoc2hhcGUpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHNoYXBlLmlkLFxuICAgICAgICAgICAgdHlwZTogc2hhcGUudHlwZSxcbiAgICAgICAgICAgIG9wYWNpdHlcbiAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgb2YgYSB7QGxpbmsgQHRsZHJhdy90bHNjaGVtYSNTdHlsZVByb3B9IGZvciB0aGUgbmV4dCBzaGFwZXMuIFRoaXMgY2hhbmdlIHdpbGwgYmUgYXBwbGllZCB0byBzdWJzZXF1ZW50bHkgY3JlYXRlZCBzaGFwZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zZXRTdHlsZUZvck5leHRTaGFwZXMoRGVmYXVsdENvbG9yU3R5bGUsICdyZWQnKVxuICAgKiBlZGl0b3Iuc2V0U3R5bGVGb3JOZXh0U2hhcGVzKERlZmF1bHRDb2xvclN0eWxlLCAncmVkJywgeyBlcGhlbWVyYWw6IHRydWUgfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzdHlsZSAtIFRoZSBzdHlsZSB0byBzZXQuXG4gICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzZXQuXG4gICAqIEBwYXJhbSBoaXN0b3J5T3B0aW9ucyAtIFRoZSBoaXN0b3J5IG9wdGlvbnMgZm9yIHRoZSBjaGFuZ2UuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldFN0eWxlRm9yTmV4dFNoYXBlcyhzdHlsZSwgdmFsdWUsIGhpc3RvcnlPcHRpb25zKSB7XG4gICAgY29uc3Qgc3R5bGVzRm9yTmV4dFNoYXBlID0gdGhpcy5nZXRJbnN0YW5jZVN0YXRlKCkuc3R5bGVzRm9yTmV4dFNoYXBlO1xuICAgIHRoaXMudXBkYXRlSW5zdGFuY2VTdGF0ZShcbiAgICAgIHsgc3R5bGVzRm9yTmV4dFNoYXBlOiB7IC4uLnN0eWxlc0Zvck5leHRTaGFwZSwgW3N0eWxlLmlkXTogdmFsdWUgfSB9LFxuICAgICAgaGlzdG9yeU9wdGlvbnNcbiAgICApO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIGEge0BsaW5rIEB0bGRyYXcvdGxzY2hlbWEjU3R5bGVQcm9wfS4gVGhpcyBjaGFuZ2Ugd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgc2hhcGVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2V0U3R5bGVGb3JTZWxlY3RlZFNoYXBlcyhEZWZhdWx0Q29sb3JTdHlsZSwgJ3JlZCcpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gc3R5bGUgLSBUaGUgc3R5bGUgdG8gc2V0LlxuICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgKiBAcGFyYW0gaGlzdG9yeU9wdGlvbnMgLSBUaGUgaGlzdG9yeSBvcHRpb25zIGZvciB0aGUgY2hhbmdlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRTdHlsZUZvclNlbGVjdGVkU2hhcGVzKHN0eWxlLCB2YWx1ZSkge1xuICAgIGNvbnN0IHNlbGVjdGVkU2hhcGVzID0gdGhpcy5nZXRTZWxlY3RlZFNoYXBlcygpO1xuICAgIGlmIChzZWxlY3RlZFNoYXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB1cGRhdGVzID0gW107XG4gICAgICBjb25zdCBhZGRTaGFwZUJ5SWQgPSAoc2hhcGUpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNTaGFwZU9mVHlwZShzaGFwZSwgXCJncm91cFwiKSkge1xuICAgICAgICAgIGNvbnN0IGNoaWxkSWRzID0gdGhpcy5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudChzaGFwZS5pZCk7XG4gICAgICAgICAgZm9yIChjb25zdCBjaGlsZElkIG9mIGNoaWxkSWRzKSB7XG4gICAgICAgICAgICBhZGRTaGFwZUJ5SWQodGhpcy5nZXRTaGFwZShjaGlsZElkKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHV0aWwgPSB0aGlzLmdldFNoYXBlVXRpbChzaGFwZSk7XG4gICAgICAgICAgY29uc3Qgc3R5bGVQcm9wS2V5ID0gdGhpcy5zdHlsZVByb3BzW3NoYXBlLnR5cGVdLmdldChzdHlsZSk7XG4gICAgICAgICAgaWYgKHN0eWxlUHJvcEtleSkge1xuICAgICAgICAgICAgY29uc3Qgc2hhcGVQYXJ0aWFsID0ge1xuICAgICAgICAgICAgICBpZDogc2hhcGUuaWQsXG4gICAgICAgICAgICAgIHR5cGU6IHNoYXBlLnR5cGUsXG4gICAgICAgICAgICAgIHByb3BzOiB7IFtzdHlsZVByb3BLZXldOiB2YWx1ZSB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdXBkYXRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgdXRpbCxcbiAgICAgICAgICAgICAgb3JpZ2luYWxTaGFwZTogc2hhcGUsXG4gICAgICAgICAgICAgIHVwZGF0ZVBhcnRpYWw6IHNoYXBlUGFydGlhbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgZm9yIChjb25zdCBzaGFwZSBvZiBzZWxlY3RlZFNoYXBlcykge1xuICAgICAgICBhZGRTaGFwZUJ5SWQoc2hhcGUpO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVTaGFwZXModXBkYXRlcy5tYXAoKHsgdXBkYXRlUGFydGlhbCB9KSA9PiB1cGRhdGVQYXJ0aWFsKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLSBDb250ZW50IC0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZXh0ZXJuYWxBc3NldENvbnRlbnRIYW5kbGVycyA9IHtcbiAgICBmaWxlOiBudWxsLFxuICAgIHVybDogbnVsbFxuICB9O1xuICAvKipcbiAgICogUmVnaXN0ZXIgYW4gZXh0ZXJuYWwgY29udGVudCBoYW5kbGVyLiBUaGlzIGhhbmRsZXIgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgZWRpdG9yIHJlY2VpdmVzXG4gICAqIGV4dGVybmFsIGNvbnRlbnQgb2YgdGhlIHByb3ZpZGVkIHR5cGUuIEZvciBleGFtcGxlLCB0aGUgJ2ltYWdlJyB0eXBlIGhhbmRsZXIgd2lsbCBiZSBjYWxsZWRcbiAgICogd2hlbiBhIHVzZXIgZHJvcHMgYW4gaW1hZ2Ugb250byB0aGUgY2FudmFzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IucmVnaXN0ZXJFeHRlcm5hbEFzc2V0SGFuZGxlcigndGV4dCcsIG15SGFuZGxlcilcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlIC0gVGhlIHR5cGUgb2YgZXh0ZXJuYWwgY29udGVudC5cbiAgICogQHBhcmFtIGhhbmRsZXIgLSBUaGUgaGFuZGxlciB0byB1c2UgZm9yIHRoaXMgY29udGVudCB0eXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZWdpc3RlckV4dGVybmFsQXNzZXRIYW5kbGVyKHR5cGUsIGhhbmRsZXIpIHtcbiAgICB0aGlzLmV4dGVybmFsQXNzZXRDb250ZW50SGFuZGxlcnNbdHlwZV0gPSBoYW5kbGVyO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gYXNzZXQgZm9yIGFuIGV4dGVybmFsIGFzc2V0IGNvbnRlbnQgdHlwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogY29uc3QgYXNzZXQgPSBhd2FpdCBlZGl0b3IuZ2V0QXNzZXRGb3JFeHRlcm5hbENvbnRlbnQoeyB0eXBlOiAnZmlsZScsIGZpbGU6IG15RmlsZSB9KVxuICAgKiBjb25zdCBhc3NldCA9IGF3YWl0IGVkaXRvci5nZXRBc3NldEZvckV4dGVybmFsQ29udGVudCh7IHR5cGU6ICd1cmwnLCB1cmw6IG15VXJsIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gaW5mbyAtIEluZm8gYWJvdXQgdGhlIGV4dGVybmFsIGNvbnRlbnQuXG4gICAqIEByZXR1cm5zIFRoZSBhc3NldC5cbiAgICovXG4gIGFzeW5jIGdldEFzc2V0Rm9yRXh0ZXJuYWxDb250ZW50KGluZm8pIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5leHRlcm5hbEFzc2V0Q29udGVudEhhbmRsZXJzW2luZm8udHlwZV0/LihpbmZvKTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGV4dGVybmFsQ29udGVudEhhbmRsZXJzID0ge1xuICAgIHRleHQ6IG51bGwsXG4gICAgZmlsZXM6IG51bGwsXG4gICAgZW1iZWQ6IG51bGwsXG4gICAgXCJzdmctdGV4dFwiOiBudWxsLFxuICAgIHVybDogbnVsbFxuICB9O1xuICAvKipcbiAgICogUmVnaXN0ZXIgYW4gZXh0ZXJuYWwgY29udGVudCBoYW5kbGVyLiBUaGlzIGhhbmRsZXIgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgZWRpdG9yIHJlY2VpdmVzXG4gICAqIGV4dGVybmFsIGNvbnRlbnQgb2YgdGhlIHByb3ZpZGVkIHR5cGUuIEZvciBleGFtcGxlLCB0aGUgJ2ltYWdlJyB0eXBlIGhhbmRsZXIgd2lsbCBiZSBjYWxsZWRcbiAgICogd2hlbiBhIHVzZXIgZHJvcHMgYW4gaW1hZ2Ugb250byB0aGUgY2FudmFzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IucmVnaXN0ZXJFeHRlcm5hbENvbnRlbnRIYW5kbGVyKCd0ZXh0JywgbXlIYW5kbGVyKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHR5cGUgLSBUaGUgdHlwZSBvZiBleHRlcm5hbCBjb250ZW50LlxuICAgKiBAcGFyYW0gaGFuZGxlciAtIFRoZSBoYW5kbGVyIHRvIHVzZSBmb3IgdGhpcyBjb250ZW50IHR5cGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHJlZ2lzdGVyRXh0ZXJuYWxDb250ZW50SGFuZGxlcih0eXBlLCBoYW5kbGVyKSB7XG4gICAgdGhpcy5leHRlcm5hbENvbnRlbnRIYW5kbGVyc1t0eXBlXSA9IGhhbmRsZXI7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBleHRlcm5hbCBjb250ZW50LCBzdWNoIGFzIGZpbGVzLCB1cmxzLCBlbWJlZHMsIG9yIHBsYWluIHRleHQgd2hpY2ggaGFzIGJlZW4gcHV0IGludG8gdGhlIGFwcCwgZm9yIGV4YW1wbGUgYnkgcGFzdGluZyBleHRlcm5hbCB0ZXh0IG9yIGRyb3BwaW5nIGV4dGVybmFsIGltYWdlcyBvbnRvIGNhbnZhcy5cbiAgICpcbiAgICogQHBhcmFtIGluZm8gLSBJbmZvIGFib3V0IHRoZSBleHRlcm5hbCBjb250ZW50LlxuICAgKi9cbiAgYXN5bmMgcHV0RXh0ZXJuYWxDb250ZW50KGluZm8pIHtcbiAgICByZXR1cm4gdGhpcy5leHRlcm5hbENvbnRlbnRIYW5kbGVyc1tpbmZvLnR5cGVdPy4oaW5mbyk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBjb250ZW50IHRoYXQgY2FuIGJlIGV4cG9ydGVkIGZvciB0aGUgZ2l2ZW4gc2hhcGUgaWRzLlxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGVzIC0gVGhlIHNoYXBlcyAob3Igc2hhcGUgaWRzKSB0byBnZXQgY29udGVudCBmb3IuXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBleHBvcnRlZCBjb250ZW50LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRDb250ZW50RnJvbUN1cnJlbnRQYWdlKHNoYXBlcykge1xuICAgIGNvbnN0IGlkcyA9IHR5cGVvZiBzaGFwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBzaGFwZXMgOiBzaGFwZXMubWFwKChzKSA9PiBzLmlkKTtcbiAgICBpZiAoIWlkcylcbiAgICAgIHJldHVybjtcbiAgICBpZiAoaWRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBzaGFwZUlkcyA9IHRoaXMuZ2V0U2hhcGVBbmREZXNjZW5kYW50SWRzKGlkcyk7XG4gICAgcmV0dXJuIHdpdGhJc29sYXRlZFNoYXBlcyh0aGlzLCBzaGFwZUlkcywgKGJpbmRpbmdJZHNUb0tlZXApID0+IHtcbiAgICAgIGNvbnN0IGJpbmRpbmdzID0gW107XG4gICAgICBmb3IgKGNvbnN0IGlkIG9mIGJpbmRpbmdJZHNUb0tlZXApIHtcbiAgICAgICAgY29uc3QgYmluZGluZyA9IHRoaXMuZ2V0QmluZGluZyhpZCk7XG4gICAgICAgIGlmICghYmluZGluZylcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgYmluZGluZ3MucHVzaChiaW5kaW5nKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJvb3RTaGFwZUlkcyA9IFtdO1xuICAgICAgY29uc3Qgc2hhcGVzMiA9IFtdO1xuICAgICAgZm9yIChjb25zdCBzaGFwZUlkIG9mIHNoYXBlSWRzKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5nZXRTaGFwZShzaGFwZUlkKTtcbiAgICAgICAgaWYgKCFzaGFwZSlcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY29uc3QgaXNSb290U2hhcGUgPSAhc2hhcGVJZHMuaGFzKHNoYXBlLnBhcmVudElkKTtcbiAgICAgICAgaWYgKGlzUm9vdFNoYXBlKSB7XG4gICAgICAgICAgY29uc3QgcGFnZVRyYW5zZm9ybSA9IHRoaXMuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlLmlkKTtcbiAgICAgICAgICBjb25zdCBwYWdlUG9pbnQgPSBwYWdlVHJhbnNmb3JtLnBvaW50KCk7XG4gICAgICAgICAgc2hhcGVzMi5wdXNoKHtcbiAgICAgICAgICAgIC4uLnNoYXBlLFxuICAgICAgICAgICAgeDogcGFnZVBvaW50LngsXG4gICAgICAgICAgICB5OiBwYWdlUG9pbnQueSxcbiAgICAgICAgICAgIHJvdGF0aW9uOiBwYWdlVHJhbnNmb3JtLnJvdGF0aW9uKCksXG4gICAgICAgICAgICBwYXJlbnRJZDogdGhpcy5nZXRDdXJyZW50UGFnZUlkKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByb290U2hhcGVJZHMucHVzaChzaGFwZS5pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hhcGVzMi5wdXNoKHNoYXBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgYXNzZXRzID0gW107XG4gICAgICBjb25zdCBzZWVuQXNzZXRJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgZm9yIChjb25zdCBzaGFwZSBvZiBzaGFwZXMyKSB7XG4gICAgICAgIGlmICghKFwiYXNzZXRJZFwiIGluIHNoYXBlLnByb3BzKSlcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY29uc3QgYXNzZXRJZCA9IHNoYXBlLnByb3BzLmFzc2V0SWQ7XG4gICAgICAgIGlmICghYXNzZXRJZCB8fCBzZWVuQXNzZXRJZHMuaGFzKGFzc2V0SWQpKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBzZWVuQXNzZXRJZHMuYWRkKGFzc2V0SWQpO1xuICAgICAgICBjb25zdCBhc3NldCA9IHRoaXMuZ2V0QXNzZXQoYXNzZXRJZCk7XG4gICAgICAgIGlmICghYXNzZXQpXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGFzc2V0cy5wdXNoKGFzc2V0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNjaGVtYTogdGhpcy5zdG9yZS5zY2hlbWEuc2VyaWFsaXplKCksXG4gICAgICAgIHNoYXBlczogc2hhcGVzMixcbiAgICAgICAgcm9vdFNoYXBlSWRzLFxuICAgICAgICBiaW5kaW5ncyxcbiAgICAgICAgYXNzZXRzXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBQbGFjZSBjb250ZW50IGludG8gdGhlIGVkaXRvci5cbiAgICpcbiAgICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgY29udGVudC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciBwbGFjaW5nIHRoZSBjb250ZW50LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBwdXRDb250ZW50T250b0N1cnJlbnRQYWdlKGNvbnRlbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICh0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5pc1JlYWRvbmx5KVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgaWYgKCFjb250ZW50LnNjaGVtYSkge1xuICAgICAgdGhyb3cgRXJyb3IoXCJDb3VsZCBub3QgcHV0IGNvbnRlbnQ6XFxuY29udGVudCBpcyBtaXNzaW5nIGEgc2NoZW1hLlwiKTtcbiAgICB9XG4gICAgY29uc3QgeyBzZWxlY3QgPSBmYWxzZSwgcHJlc2VydmVJZHMgPSBmYWxzZSwgcHJlc2VydmVQb3NpdGlvbiA9IGZhbHNlIH0gPSBvcHRpb25zO1xuICAgIGxldCB7IHBvaW50ID0gdm9pZCAwIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGN1cnJlbnRQYWdlSWQgPSB0aGlzLmdldEN1cnJlbnRQYWdlSWQoKTtcbiAgICBjb25zdCB7IHJvb3RTaGFwZUlkcyB9ID0gY29udGVudDtcbiAgICBjb25zdCBhc3NldHMgPSBbXTtcbiAgICBjb25zdCBzaGFwZXMgPSBbXTtcbiAgICBjb25zdCBiaW5kaW5ncyA9IFtdO1xuICAgIGNvbnN0IHN0b3JlID0ge1xuICAgICAgc3RvcmU6IHtcbiAgICAgICAgLi4uT2JqZWN0LmZyb21FbnRyaWVzKGNvbnRlbnQuYXNzZXRzLm1hcCgoYXNzZXQpID0+IFthc3NldC5pZCwgYXNzZXRdKSksXG4gICAgICAgIC4uLk9iamVjdC5mcm9tRW50cmllcyhjb250ZW50LnNoYXBlcy5tYXAoKHNoYXBlKSA9PiBbc2hhcGUuaWQsIHNoYXBlXSkpLFxuICAgICAgICAuLi5PYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgY29udGVudC5iaW5kaW5ncz8ubWFwKChiaW5kaW5nczIpID0+IFtiaW5kaW5nczIuaWQsIGJpbmRpbmdzMl0pID8/IFtdXG4gICAgICAgIClcbiAgICAgIH0sXG4gICAgICBzY2hlbWE6IGNvbnRlbnQuc2NoZW1hXG4gICAgfTtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnN0b3JlLnNjaGVtYS5taWdyYXRlU3RvcmVTbmFwc2hvdChzdG9yZSk7XG4gICAgaWYgKHJlc3VsdC50eXBlID09PSBcImVycm9yXCIpIHtcbiAgICAgIHRocm93IEVycm9yKFwiQ291bGQgbm90IHB1dCBjb250ZW50OiBjb3VsZCBub3QgbWlncmF0ZSBjb250ZW50XCIpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBPYmplY3QudmFsdWVzKHJlc3VsdC52YWx1ZSkpIHtcbiAgICAgIHN3aXRjaCAocmVjb3JkLnR5cGVOYW1lKSB7XG4gICAgICAgIGNhc2UgXCJhc3NldFwiOiB7XG4gICAgICAgICAgYXNzZXRzLnB1c2gocmVjb3JkKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwic2hhcGVcIjoge1xuICAgICAgICAgIHNoYXBlcy5wdXNoKHJlY29yZCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImJpbmRpbmdcIjoge1xuICAgICAgICAgIGJpbmRpbmdzLnB1c2gocmVjb3JkKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzaGFwZUlkTWFwID0gbmV3IE1hcChcbiAgICAgIHByZXNlcnZlSWRzID8gc2hhcGVzLm1hcCgoc2hhcGUpID0+IFtzaGFwZS5pZCwgc2hhcGUuaWRdKSA6IHNoYXBlcy5tYXAoKHNoYXBlKSA9PiBbc2hhcGUuaWQsIGNyZWF0ZVNoYXBlSWQoKV0pXG4gICAgKTtcbiAgICBjb25zdCBiaW5kaW5nSWRNYXAgPSBuZXcgTWFwKFxuICAgICAgcHJlc2VydmVJZHMgPyBiaW5kaW5ncy5tYXAoKGJpbmRpbmcpID0+IFtiaW5kaW5nLmlkLCBiaW5kaW5nLmlkXSkgOiBiaW5kaW5ncy5tYXAoKGJpbmRpbmcpID0+IFtiaW5kaW5nLmlkLCBjcmVhdGVCaW5kaW5nSWQoKV0pXG4gICAgKTtcbiAgICBsZXQgcGFzdGVQYXJlbnRJZCA9IHRoaXMuZ2V0Q3VycmVudFBhZ2VJZCgpO1xuICAgIGxldCBsb3dlc3REZXB0aCA9IEluZmluaXR5O1xuICAgIGxldCBsb3dlc3RBbmNlc3RvcnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHNoYXBlIG9mIHRoaXMuZ2V0U2VsZWN0ZWRTaGFwZXMoKSkge1xuICAgICAgaWYgKGxvd2VzdERlcHRoID09PSAwKVxuICAgICAgICBicmVhaztcbiAgICAgIGNvbnN0IGlzRnJhbWUgPSB0aGlzLmlzU2hhcGVPZlR5cGUoc2hhcGUsIFwiZnJhbWVcIik7XG4gICAgICBjb25zdCBhbmNlc3RvcnMgPSB0aGlzLmdldFNoYXBlQW5jZXN0b3JzKHNoYXBlKTtcbiAgICAgIGlmIChpc0ZyYW1lKVxuICAgICAgICBhbmNlc3RvcnMucHVzaChzaGFwZSk7XG4gICAgICBjb25zdCBkZXB0aCA9IGlzRnJhbWUgPyBhbmNlc3RvcnMubGVuZ3RoICsgMSA6IGFuY2VzdG9ycy5sZW5ndGg7XG4gICAgICBpZiAoZGVwdGggPCBsb3dlc3REZXB0aCkge1xuICAgICAgICBsb3dlc3REZXB0aCA9IGRlcHRoO1xuICAgICAgICBsb3dlc3RBbmNlc3RvcnMgPSBhbmNlc3RvcnM7XG4gICAgICAgIHBhc3RlUGFyZW50SWQgPSBpc0ZyYW1lID8gc2hhcGUuaWQgOiBzaGFwZS5wYXJlbnRJZDtcbiAgICAgIH0gZWxzZSBpZiAoZGVwdGggPT09IGxvd2VzdERlcHRoKSB7XG4gICAgICAgIGlmIChsb3dlc3RBbmNlc3RvcnMubGVuZ3RoICE9PSBhbmNlc3RvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoYEFuY2VzdG9yczogJHtsb3dlc3RBbmNlc3RvcnMubGVuZ3RofSAhPT0gJHthbmNlc3RvcnMubGVuZ3RofWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb3dlc3RBbmNlc3RvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcGFzdGVQYXJlbnRJZCA9IGN1cnJlbnRQYWdlSWQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFzdGVQYXJlbnRJZCA9IGN1cnJlbnRQYWdlSWQ7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb3dlc3RBbmNlc3RvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhbmNlc3RvcnNbaV0gIT09IGxvd2VzdEFuY2VzdG9yc1tpXSlcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwYXN0ZVBhcmVudElkID0gYW5jZXN0b3JzW2ldLmlkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgaXNEdXBsaWNhdGluZyA9IGZhbHNlO1xuICAgIGlmICghaXNQYWdlSWQocGFzdGVQYXJlbnRJZCkpIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0U2hhcGUocGFzdGVQYXJlbnRJZCk7XG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5nZXRWaWV3cG9ydFBhZ2VCb3VuZHMoKS5pbmNsdWRlcyh0aGlzLmdldFNoYXBlUGFnZUJvdW5kcyhwYXJlbnQpKSkge1xuICAgICAgICAgIHBhc3RlUGFyZW50SWQgPSBjdXJyZW50UGFnZUlkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChyb290U2hhcGVJZHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCByb290U2hhcGUgPSBzaGFwZXMuZmluZCgocykgPT4gcy5pZCA9PT0gcm9vdFNoYXBlSWRzWzBdKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2hhcGVPZlR5cGUocGFyZW50LCBcImZyYW1lXCIpICYmIHRoaXMuaXNTaGFwZU9mVHlwZShyb290U2hhcGUsIFwiZnJhbWVcIikgJiYgcm9vdFNoYXBlLnByb3BzLncgPT09IHBhcmVudD8ucHJvcHMudyAmJiByb290U2hhcGUucHJvcHMuaCA9PT0gcGFyZW50Py5wcm9wcy5oKSB7XG4gICAgICAgICAgICAgIGlzRHVwbGljYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFzdGVQYXJlbnRJZCA9IGN1cnJlbnRQYWdlSWQ7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghaXNEdXBsaWNhdGluZykge1xuICAgICAgaXNEdXBsaWNhdGluZyA9IHNoYXBlSWRNYXAuaGFzKHBhc3RlUGFyZW50SWQpO1xuICAgIH1cbiAgICBpZiAoaXNEdXBsaWNhdGluZykge1xuICAgICAgcGFzdGVQYXJlbnRJZCA9IHRoaXMuZ2V0U2hhcGUocGFzdGVQYXJlbnRJZCkucGFyZW50SWQ7XG4gICAgfVxuICAgIGxldCBpbmRleCA9IHRoaXMuZ2V0SGlnaGVzdEluZGV4Rm9yUGFyZW50KHBhc3RlUGFyZW50SWQpO1xuICAgIGNvbnN0IHJvb3RTaGFwZXMgPSBbXTtcbiAgICBjb25zdCBuZXdTaGFwZXMgPSBzaGFwZXMubWFwKChvbGRTaGFwZSkgPT4ge1xuICAgICAgY29uc3QgbmV3SWQgPSBzaGFwZUlkTWFwLmdldChvbGRTaGFwZS5pZCk7XG4gICAgICBjb25zdCBuZXdTaGFwZSA9IHsgLi4ub2xkU2hhcGUsIGlkOiBuZXdJZCB9O1xuICAgICAgaWYgKHJvb3RTaGFwZUlkcy5pbmNsdWRlcyhvbGRTaGFwZS5pZCkpIHtcbiAgICAgICAgbmV3U2hhcGUucGFyZW50SWQgPSBjdXJyZW50UGFnZUlkO1xuICAgICAgICByb290U2hhcGVzLnB1c2gobmV3U2hhcGUpO1xuICAgICAgfVxuICAgICAgaWYgKHNoYXBlSWRNYXAuaGFzKG5ld1NoYXBlLnBhcmVudElkKSkge1xuICAgICAgICBuZXdTaGFwZS5wYXJlbnRJZCA9IHNoYXBlSWRNYXAuZ2V0KG9sZFNoYXBlLnBhcmVudElkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJvb3RTaGFwZUlkcy5wdXNoKG5ld1NoYXBlLmlkKTtcbiAgICAgICAgbmV3U2hhcGUuaW5kZXggPSBpbmRleDtcbiAgICAgICAgaW5kZXggPSBnZXRJbmRleEFib3ZlKGluZGV4KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdTaGFwZTtcbiAgICB9KTtcbiAgICBpZiAobmV3U2hhcGVzLmxlbmd0aCArIHRoaXMuZ2V0Q3VycmVudFBhZ2VTaGFwZUlkcygpLnNpemUgPiB0aGlzLm9wdGlvbnMubWF4U2hhcGVzUGVyUGFnZSkge1xuICAgICAgYWxlcnRNYXhTaGFwZXModGhpcyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgY29uc3QgbmV3QmluZGluZ3MgPSBiaW5kaW5ncy5tYXAoXG4gICAgICAob2xkQmluZGluZykgPT4gKHtcbiAgICAgICAgLi4ub2xkQmluZGluZyxcbiAgICAgICAgaWQ6IGFzc2VydEV4aXN0cyhiaW5kaW5nSWRNYXAuZ2V0KG9sZEJpbmRpbmcuaWQpKSxcbiAgICAgICAgZnJvbUlkOiBhc3NlcnRFeGlzdHMoc2hhcGVJZE1hcC5nZXQob2xkQmluZGluZy5mcm9tSWQpKSxcbiAgICAgICAgdG9JZDogYXNzZXJ0RXhpc3RzKHNoYXBlSWRNYXAuZ2V0KG9sZEJpbmRpbmcudG9JZCkpXG4gICAgICB9KVxuICAgICk7XG4gICAgY29uc3QgYXNzZXRzVG9DcmVhdGUgPSBbXTtcbiAgICBjb25zdCBhc3NldHNUb1VwZGF0ZSA9IFtdO1xuICAgIGZvciAoY29uc3QgYXNzZXQgb2YgYXNzZXRzKSB7XG4gICAgICBpZiAodGhpcy5zdG9yZS5oYXMoYXNzZXQuaWQpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKChhc3NldC50eXBlID09PSBcImltYWdlXCIgfHwgYXNzZXQudHlwZSA9PT0gXCJ2aWRlb1wiKSAmJiBhc3NldC5wcm9wcy5zcmM/LnN0YXJ0c1dpdGgoXCJkYXRhOmltYWdlXCIpKSB7XG4gICAgICAgIGFzc2V0c1RvVXBkYXRlLnB1c2goc3RydWN0dXJlZENsb25lKGFzc2V0KSk7XG4gICAgICAgIGFzc2V0LnByb3BzLnNyYyA9IG51bGw7XG4gICAgICB9XG4gICAgICBhc3NldHNUb0NyZWF0ZS5wdXNoKGFzc2V0KTtcbiAgICB9XG4gICAgUHJvbWlzZS5hbGxTZXR0bGVkKFxuICAgICAgYXNzZXRzVG9VcGRhdGUubWFwKGFzeW5jIChhc3NldCkgPT4ge1xuICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgZGF0YVVybFRvRmlsZShcbiAgICAgICAgICBhc3NldC5wcm9wcy5zcmMsXG4gICAgICAgICAgYXNzZXQucHJvcHMubmFtZSxcbiAgICAgICAgICBhc3NldC5wcm9wcy5taW1lVHlwZSA/PyBcImltYWdlL3BuZ1wiXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IG5ld0Fzc2V0ID0gYXdhaXQgdGhpcy5nZXRBc3NldEZvckV4dGVybmFsQ29udGVudCh7IHR5cGU6IFwiZmlsZVwiLCBmaWxlIH0pO1xuICAgICAgICBpZiAoIW5ld0Fzc2V0KSB7XG4gICAgICAgICAgdGhpcy5kZWxldGVBc3NldHMoW2Fzc2V0LmlkXSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlQXNzZXRzKFt7IC4uLm5ld0Fzc2V0LCBpZDogYXNzZXQuaWQgfV0pO1xuICAgICAgfSlcbiAgICApO1xuICAgIHRoaXMuYmF0Y2goKCkgPT4ge1xuICAgICAgaWYgKGFzc2V0c1RvQ3JlYXRlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5jcmVhdGVBc3NldHMoYXNzZXRzVG9DcmVhdGUpO1xuICAgICAgfVxuICAgICAgdGhpcy5jcmVhdGVTaGFwZXMobmV3U2hhcGVzKTtcbiAgICAgIHRoaXMuY3JlYXRlQmluZGluZ3MobmV3QmluZGluZ3MpO1xuICAgICAgaWYgKHNlbGVjdCkge1xuICAgICAgICB0aGlzLnNlbGVjdCguLi5yb290U2hhcGVzLm1hcCgocykgPT4gcy5pZCkpO1xuICAgICAgfVxuICAgICAgaWYgKHBhc3RlUGFyZW50SWQgIT09IGN1cnJlbnRQYWdlSWQpIHtcbiAgICAgICAgdGhpcy5yZXBhcmVudFNoYXBlcyhcbiAgICAgICAgICByb290U2hhcGVzLm1hcCgocykgPT4gcy5pZCksXG4gICAgICAgICAgcGFzdGVQYXJlbnRJZFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgbmV3Q3JlYXRlZFNoYXBlcyA9IG5ld1NoYXBlcy5tYXAoKHMpID0+IHRoaXMuZ2V0U2hhcGUocy5pZCkpO1xuICAgICAgY29uc3QgYm91bmRzID0gQm94LkNvbW1vbihuZXdDcmVhdGVkU2hhcGVzLm1hcCgocykgPT4gdGhpcy5nZXRTaGFwZVBhZ2VCb3VuZHMocykpKTtcbiAgICAgIGlmIChwb2ludCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGlmICghaXNQYWdlSWQocGFzdGVQYXJlbnRJZCkpIHtcbiAgICAgICAgICBjb25zdCBzaGFwZSA9IHRoaXMuZ2V0U2hhcGUocGFzdGVQYXJlbnRJZCk7XG4gICAgICAgICAgcG9pbnQgPSBNYXQuYXBwbHlUb1BvaW50KFxuICAgICAgICAgICAgdGhpcy5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGUpLFxuICAgICAgICAgICAgdGhpcy5nZXRTaGFwZUdlb21ldHJ5KHNoYXBlKS5ib3VuZHMuY2VudGVyXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB2aWV3cG9ydFBhZ2VCb3VuZHMgPSB0aGlzLmdldFZpZXdwb3J0UGFnZUJvdW5kcygpO1xuICAgICAgICAgIGlmIChwcmVzZXJ2ZVBvc2l0aW9uIHx8IHZpZXdwb3J0UGFnZUJvdW5kcy5pbmNsdWRlcyhCb3guRnJvbShib3VuZHMpKSkge1xuICAgICAgICAgICAgcG9pbnQgPSBib3VuZHMuY2VudGVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwb2ludCA9IHZpZXdwb3J0UGFnZUJvdW5kcy5jZW50ZXI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocm9vdFNoYXBlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3Qgb25seVJvb3QgPSByb290U2hhcGVzWzBdO1xuICAgICAgICBpZiAodGhpcy5pc1NoYXBlT2ZUeXBlKG9ubHlSb290LCBcImZyYW1lXCIpKSB7XG4gICAgICAgICAgd2hpbGUgKHRoaXMuZ2V0U2hhcGVzQXRQb2ludChwb2ludCkuc29tZShcbiAgICAgICAgICAgIChzaGFwZSkgPT4gdGhpcy5pc1NoYXBlT2ZUeXBlKHNoYXBlLCBcImZyYW1lXCIpICYmIHNoYXBlLnByb3BzLncgPT09IG9ubHlSb290LnByb3BzLncgJiYgc2hhcGUucHJvcHMuaCA9PT0gb25seVJvb3QucHJvcHMuaFxuICAgICAgICAgICkpIHtcbiAgICAgICAgICAgIHBvaW50LnggKz0gYm91bmRzLncgKyAxNjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhZ2VDZW50ZXIgPSBCb3guQ29tbW9uKFxuICAgICAgICBjb21wYWN0KHJvb3RTaGFwZXMubWFwKCh7IGlkIH0pID0+IHRoaXMuZ2V0U2hhcGVQYWdlQm91bmRzKGlkKSkpXG4gICAgICApLmNlbnRlcjtcbiAgICAgIGNvbnN0IG9mZnNldCA9IFZlYy5TdWIocG9pbnQsIHBhZ2VDZW50ZXIpO1xuICAgICAgdGhpcy51cGRhdGVTaGFwZXMoXG4gICAgICAgIHJvb3RTaGFwZXMubWFwKCh7IGlkIH0pID0+IHtcbiAgICAgICAgICBjb25zdCBzID0gdGhpcy5nZXRTaGFwZShpZCk7XG4gICAgICAgICAgY29uc3QgbG9jYWxSb3RhdGlvbiA9IHRoaXMuZ2V0U2hhcGVQYXJlbnRUcmFuc2Zvcm0oaWQpLmRlY29tcG9zZSgpLnJvdGF0aW9uO1xuICAgICAgICAgIGNvbnN0IGxvY2FsRGVsdGEgPSBWZWMuUm90KG9mZnNldCwgLWxvY2FsUm90YXRpb24pO1xuICAgICAgICAgIHJldHVybiB7IGlkOiBzLmlkLCB0eXBlOiBzLnR5cGUsIHg6IHMueCArIGxvY2FsRGVsdGEueCwgeTogcy55ICsgbG9jYWxEZWx0YS55IH07XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gZXhwb3J0ZWQgU1ZHIGVsZW1lbnQgb2YgdGhlIGdpdmVuIHNoYXBlcy5cbiAgICpcbiAgICogQHBhcmFtIGlkcyAtIFRoZSBzaGFwZXMgKG9yIHNoYXBlIGlkcykgdG8gZXhwb3J0LlxuICAgKiBAcGFyYW0gb3B0cyAtIE9wdGlvbnMgZm9yIHRoZSBleHBvcnQuXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBTVkcgZWxlbWVudC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYXN5bmMgZ2V0U3ZnRWxlbWVudChzaGFwZXMsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFN2Z0pzeCh0aGlzLCBzaGFwZXMsIG9wdHMpO1xuICAgIGlmICghcmVzdWx0KVxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBjb25zdCByb290ID0gY3JlYXRlUm9vdChmcmFnbWVudCk7XG4gICAgZmx1c2hTeW5jKCgpID0+IHtcbiAgICAgIHJvb3QucmVuZGVyKHJlc3VsdC5qc3gpO1xuICAgIH0pO1xuICAgIGNvbnN0IHN2ZyA9IGZyYWdtZW50LmZpcnN0RWxlbWVudENoaWxkO1xuICAgIGFzc2VydChzdmcgaW5zdGFuY2VvZiBTVkdTVkdFbGVtZW50LCBcIkV4cGVjdGVkIGFuIFNWRyBlbGVtZW50XCIpO1xuICAgIHJvb3QudW5tb3VudCgpO1xuICAgIHJldHVybiB7IHN2Zywgd2lkdGg6IHJlc3VsdC53aWR0aCwgaGVpZ2h0OiByZXN1bHQuaGVpZ2h0IH07XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBleHBvcnRlZCBTVkcgc3RyaW5nIG9mIHRoZSBnaXZlbiBzaGFwZXMuXG4gICAqXG4gICAqIEBwYXJhbSBpZHMgLSBUaGUgc2hhcGVzIChvciBzaGFwZSBpZHMpIHRvIGV4cG9ydC5cbiAgICogQHBhcmFtIG9wdHMgLSBPcHRpb25zIGZvciB0aGUgZXhwb3J0LlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgU1ZHIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFzeW5jIGdldFN2Z1N0cmluZyhzaGFwZXMsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2V0U3ZnRWxlbWVudChzaGFwZXMsIG9wdHMpO1xuICAgIGlmICghcmVzdWx0KVxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICBjb25zdCBzZXJpYWxpemVyID0gbmV3IFhNTFNlcmlhbGl6ZXIoKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3ZnOiBzZXJpYWxpemVyLnNlcmlhbGl6ZVRvU3RyaW5nKHJlc3VsdC5zdmcpLFxuICAgICAgd2lkdGg6IHJlc3VsdC53aWR0aCxcbiAgICAgIGhlaWdodDogcmVzdWx0LmhlaWdodFxuICAgIH07XG4gIH1cbiAgLyoqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgRWRpdG9yLmdldFN2Z1N0cmluZ30gb3Ige0BsaW5rIEVkaXRvci5nZXRTdmdFbGVtZW50fSBpbnN0ZWFkLiAqL1xuICBhc3luYyBnZXRTdmcoc2hhcGVzLCBvcHRzID0ge30pIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdldFN2Z0VsZW1lbnQoc2hhcGVzLCBvcHRzKTtcbiAgICBpZiAoIXJlc3VsdClcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgcmV0dXJuIHJlc3VsdC5zdmc7XG4gIH1cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEV2ZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyoqXG4gICAqIFRoZSBhcHAncyBjdXJyZW50IGlucHV0IHN0YXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBpbnB1dHMgPSB7XG4gICAgLyoqIFRoZSBtb3N0IHJlY2VudCBwb2ludGVyIGRvd24ncyBwb3NpdGlvbiBpbiB0aGUgY3VycmVudCBwYWdlIHNwYWNlLiAqL1xuICAgIG9yaWdpblBhZ2VQb2ludDogbmV3IFZlYygpLFxuICAgIC8qKiBUaGUgbW9zdCByZWNlbnQgcG9pbnRlciBkb3duJ3MgcG9zaXRpb24gaW4gc2NyZWVuIHNwYWNlLiAqL1xuICAgIG9yaWdpblNjcmVlblBvaW50OiBuZXcgVmVjKCksXG4gICAgLyoqIFRoZSBwcmV2aW91cyBwb2ludGVyIHBvc2l0aW9uIGluIHRoZSBjdXJyZW50IHBhZ2Ugc3BhY2UuICovXG4gICAgcHJldmlvdXNQYWdlUG9pbnQ6IG5ldyBWZWMoKSxcbiAgICAvKiogVGhlIHByZXZpb3VzIHBvaW50ZXIgcG9zaXRpb24gaW4gc2NyZWVuIHNwYWNlLiAqL1xuICAgIHByZXZpb3VzU2NyZWVuUG9pbnQ6IG5ldyBWZWMoKSxcbiAgICAvKiogVGhlIG1vc3QgcmVjZW50IHBvaW50ZXIgcG9zaXRpb24gaW4gdGhlIGN1cnJlbnQgcGFnZSBzcGFjZS4gKi9cbiAgICBjdXJyZW50UGFnZVBvaW50OiBuZXcgVmVjKCksXG4gICAgLyoqIFRoZSBtb3N0IHJlY2VudCBwb2ludGVyIHBvc2l0aW9uIGluIHNjcmVlbiBzcGFjZS4gKi9cbiAgICBjdXJyZW50U2NyZWVuUG9pbnQ6IG5ldyBWZWMoKSxcbiAgICAvKiogQSBzZXQgY29udGFpbmluZyB0aGUgY3VycmVudGx5IHByZXNzZWQga2V5cy4gKi9cbiAgICBrZXlzOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpLFxuICAgIC8qKiBBIHNldCBjb250YWluaW5nIHRoZSBjdXJyZW50bHkgcHJlc3NlZCBidXR0b25zLiAqL1xuICAgIGJ1dHRvbnM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksXG4gICAgLyoqIFdoZXRoZXIgdGhlIGlucHV0IGlzIGZyb20gYSBwZS4gKi9cbiAgICBpc1BlbjogZmFsc2UsXG4gICAgLyoqIFdoZXRoZXIgdGhlIHNoaWZ0IGtleSBpcyBjdXJyZW50bHkgcHJlc3NlZC4gKi9cbiAgICBzaGlmdEtleTogZmFsc2UsXG4gICAgLyoqIFdoZXRoZXIgdGhlIGNvbnRyb2wgb3IgY29tbWFuZCBrZXkgaXMgY3VycmVudGx5IHByZXNzZWQuICovXG4gICAgY3RybEtleTogZmFsc2UsXG4gICAgLyoqIFdoZXRoZXIgdGhlIGFsdCBvciBvcHRpb24ga2V5IGlzIGN1cnJlbnRseSBwcmVzc2VkLiAqL1xuICAgIGFsdEtleTogZmFsc2UsXG4gICAgLyoqIFdoZXRoZXIgdGhlIHVzZXIgaXMgZHJhZ2dpbmcuICovXG4gICAgaXNEcmFnZ2luZzogZmFsc2UsXG4gICAgLyoqIFdoZXRoZXIgdGhlIHVzZXIgaXMgcG9pbnRpbmcuICovXG4gICAgaXNQb2ludGluZzogZmFsc2UsXG4gICAgLyoqIFdoZXRoZXIgdGhlIHVzZXIgaXMgcGluY2hpbmcuICovXG4gICAgaXNQaW5jaGluZzogZmFsc2UsXG4gICAgLyoqIFdoZXRoZXIgdGhlIHVzZXIgaXMgZWRpdGluZy4gKi9cbiAgICBpc0VkaXRpbmc6IGZhbHNlLFxuICAgIC8qKiBXaGV0aGVyIHRoZSB1c2VyIGlzIHBhbm5pbmcuICovXG4gICAgaXNQYW5uaW5nOiBmYWxzZSxcbiAgICAvKiogVmVsb2NpdHkgb2YgbW91c2UgcG9pbnRlciwgaW4gcGl4ZWxzIHBlciBtaWxsaXNlY29uZCAqL1xuICAgIHBvaW50ZXJWZWxvY2l0eTogbmV3IFZlYygpXG4gIH07XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGlucHV0IHBvaW50cyBmcm9tIGEgcG9pbnRlciwgcGluY2gsIG9yIHdoZWVsIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0gaW5mbyAtIFRoZSBldmVudCBpbmZvLlxuICAgKi9cbiAgX3VwZGF0ZUlucHV0c0Zyb21FdmVudChpbmZvKSB7XG4gICAgY29uc3Qge1xuICAgICAgcG9pbnRlclZlbG9jaXR5LFxuICAgICAgcHJldmlvdXNTY3JlZW5Qb2ludCxcbiAgICAgIHByZXZpb3VzUGFnZVBvaW50LFxuICAgICAgY3VycmVudFNjcmVlblBvaW50LFxuICAgICAgY3VycmVudFBhZ2VQb2ludFxuICAgIH0gPSB0aGlzLmlucHV0cztcbiAgICBjb25zdCB7IHNjcmVlbkJvdW5kcyB9ID0gdGhpcy5zdG9yZS51bnNhZmVHZXRXaXRob3V0Q2FwdHVyZShUTElOU1RBTkNFX0lEKTtcbiAgICBjb25zdCB7IHg6IGN4LCB5OiBjeSwgejogY3ogfSA9IHRoaXMuc3RvcmUudW5zYWZlR2V0V2l0aG91dENhcHR1cmUodGhpcy5nZXRDYW1lcmFJZCgpKTtcbiAgICBjb25zdCBzeCA9IGluZm8ucG9pbnQueCAtIHNjcmVlbkJvdW5kcy54O1xuICAgIGNvbnN0IHN5ID0gaW5mby5wb2ludC55IC0gc2NyZWVuQm91bmRzLnk7XG4gICAgY29uc3Qgc3ogPSBpbmZvLnBvaW50LnogPz8gMC41O1xuICAgIHByZXZpb3VzU2NyZWVuUG9pbnQuc2V0VG8oY3VycmVudFNjcmVlblBvaW50KTtcbiAgICBwcmV2aW91c1BhZ2VQb2ludC5zZXRUbyhjdXJyZW50UGFnZVBvaW50KTtcbiAgICBjdXJyZW50U2NyZWVuUG9pbnQuc2V0KHN4LCBzeSk7XG4gICAgY29uc3QgbnggPSBzeCAvIGN6IC0gY3g7XG4gICAgY29uc3QgbnkgPSBzeSAvIGN6IC0gY3k7XG4gICAgaWYgKGlzRmluaXRlKG54KSAmJiBpc0Zpbml0ZShueSkpIHtcbiAgICAgIGN1cnJlbnRQYWdlUG9pbnQuc2V0KG54LCBueSwgc3opO1xuICAgIH1cbiAgICB0aGlzLmlucHV0cy5pc1BlbiA9IGluZm8udHlwZSA9PT0gXCJwb2ludGVyXCIgJiYgaW5mby5pc1BlbjtcbiAgICBpZiAoaW5mby5uYW1lID09PSBcInBvaW50ZXJfZG93blwiIHx8IHRoaXMuaW5wdXRzLmlzUGluY2hpbmcpIHtcbiAgICAgIHBvaW50ZXJWZWxvY2l0eS5zZXQoMCwgMCk7XG4gICAgICB0aGlzLmlucHV0cy5vcmlnaW5TY3JlZW5Qb2ludC5zZXRUbyhjdXJyZW50U2NyZWVuUG9pbnQpO1xuICAgICAgdGhpcy5pbnB1dHMub3JpZ2luUGFnZVBvaW50LnNldFRvKGN1cnJlbnRQYWdlUG9pbnQpO1xuICAgIH1cbiAgICB0aGlzLmhpc3RvcnkuaWdub3JlKCgpID0+IHtcbiAgICAgIHRoaXMuc3RvcmUucHV0KFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBUTFBPSU5URVJfSUQsXG4gICAgICAgICAgdHlwZU5hbWU6IFwicG9pbnRlclwiLFxuICAgICAgICAgIHg6IGN1cnJlbnRQYWdlUG9pbnQueCxcbiAgICAgICAgICB5OiBjdXJyZW50UGFnZVBvaW50LnksXG4gICAgICAgICAgbGFzdEFjdGl2aXR5VGltZXN0YW1wOiAoXG4gICAgICAgICAgICAvLyBJZiBvdXIgcG9pbnRlciBtb3ZlZCBvbmx5IGJlY2F1c2Ugd2UncmUgZm9sbG93aW5nIHNvbWUgb3RoZXIgdXNlciwgdGhlbiBkb24ndFxuICAgICAgICAgICAgLy8gdXBkYXRlIG91ciBsYXN0IGFjdGl2aXR5IHRpbWVzdGFtcDsgb3RoZXJ3aXNlLCB1cGRhdGUgaXQgdG8gdGhlIGN1cnJlbnQgdGltZXN0YW1wLlxuICAgICAgICAgICAgKGluZm8udHlwZSA9PT0gXCJwb2ludGVyXCIgJiYgaW5mby5wb2ludGVySWQgPT09IElOVEVSTkFMX1BPSU5URVJfSURTLkNBTUVSQV9NT1ZFID8gdGhpcy5zdG9yZS51bnNhZmVHZXRXaXRob3V0Q2FwdHVyZShUTFBPSU5URVJfSUQpPy5sYXN0QWN0aXZpdHlUaW1lc3RhbXAgPz8gdGhpcy5fdGlja01hbmFnZXIubm93IDogdGhpcy5fdGlja01hbmFnZXIubm93KVxuICAgICAgICAgICksXG4gICAgICAgICAgbWV0YToge31cbiAgICAgICAgfVxuICAgICAgXSk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIERpc3BhdGNoIGEgY2FuY2VsIGV2ZW50LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuY2FuY2VsKClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNhbmNlbCgpIHtcbiAgICB0aGlzLmRpc3BhdGNoKHsgdHlwZTogXCJtaXNjXCIsIG5hbWU6IFwiY2FuY2VsXCIgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIERpc3BhdGNoIGFuIGludGVycnVwdCBldmVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmludGVycnVwdCgpXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBpbnRlcnJ1cHQoKSB7XG4gICAgdGhpcy5kaXNwYXRjaCh7IHR5cGU6IFwibWlzY1wiLCBuYW1lOiBcImludGVycnVwdFwiIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEaXNwYXRjaCBhIGNvbXBsZXRlIGV2ZW50LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3IuY29tcGxldGUoKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY29tcGxldGUoKSB7XG4gICAgdGhpcy5kaXNwYXRjaCh7IHR5cGU6IFwibWlzY1wiLCBuYW1lOiBcImNvbXBsZXRlXCIgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFB1dHMgdGhlIGVkaXRvciBpbnRvIGZvY3VzZWQgbW9kZS5cbiAgICpcbiAgICogVGhpcyBtYWtlcyB0aGUgZWRpdG9yIGVsaWdpYmxlIHRvIHJlY2VpdmUga2V5Ym9hcmQgZXZlbnRzIGFuZCBzb21lIHBvaW50ZXIgZXZlbnRzIChtb3ZlLCB3aGVlbCkuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5mb2N1cygpXG4gICAqIGBgYFxuICAgKlxuICAgKiBCeSBkZWZhdWx0IHRoaXMgYWxzbyBkaXNwYXRjaGVzIGEgJ2ZvY3VzJyBldmVudCB0byB0aGUgY29udGFpbmVyIGVsZW1lbnQuIFRvIHByZXZlbnQgdGhpcywgcGFzcyBgZm9jdXNDb250YWluZXI6IGZhbHNlYC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmZvY3VzKHsgZm9jdXNDb250YWluZXI6IGZhbHNlIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBmb2N1cyh7IGZvY3VzQ29udGFpbmVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBpZiAoZm9jdXNDb250YWluZXIpIHtcbiAgICAgIHRoaXMuZm9jdXNNYW5hZ2VyLmZvY3VzKCk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlSW5zdGFuY2VTdGF0ZSh7IGlzRm9jdXNlZDogdHJ1ZSB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogU3dpdGNoZXMgb2ZmIHRoZSBlZGl0b3IncyBmb2N1c2VkIG1vZGUuXG4gICAqXG4gICAqIFRoaXMgbWFrZXMgdGhlIGVkaXRvciBpZ25vcmUga2V5Ym9hcmQgZXZlbnRzIGFuZCBzb21lIHBvaW50ZXIgZXZlbnRzIChtb3ZlLCB3aGVlbCkuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5ibHVyKClcbiAgICogYGBgXG4gICAqIEJ5IGRlZmF1bHQgdGhpcyBhbHNvIGRpc3BhdGNoZXMgYSAnYmx1cicgZXZlbnQgdG8gdGhlIGNvbnRhaW5lciBlbGVtZW50LiBUbyBwcmV2ZW50IHRoaXMsIHBhc3MgYGJsdXJDb250YWluZXI6IGZhbHNlYC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmJsdXIoeyBibHVyQ29udGFpbmVyOiBmYWxzZSB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYmx1cih7IGJsdXJDb250YWluZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGlmICghdGhpcy5nZXRJc0ZvY3VzZWQoKSlcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGlmIChibHVyQ29udGFpbmVyKSB7XG4gICAgICB0aGlzLmZvY3VzTWFuYWdlci5ibHVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVJbnN0YW5jZVN0YXRlKHsgaXNGb2N1c2VkOiBmYWxzZSB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBnZXRJc0ZvY3VzZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzRm9jdXNlZDtcbiAgfVxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKiBAcmV0dXJucyBhIHNuYXBzaG90IG9mIHRoZSBzdG9yZSdzIFVJIGFuZCBkb2N1bWVudCBzdGF0ZVxuICAgKi9cbiAgZ2V0U25hcHNob3QoKSB7XG4gICAgcmV0dXJuIGdldFNuYXBzaG90KHRoaXMuc3RvcmUpO1xuICB9XG4gIC8qKlxuICAgKiBMb2FkcyBhIHNuYXBzaG90IGludG8gdGhlIGVkaXRvci5cbiAgICogQHBhcmFtIHNuYXBzaG90IC0gdGhlIHNuYXBzaG90IHRvIGxvYWRcbiAgICogQHJldHVybnNcbiAgICovXG4gIGxvYWRTbmFwc2hvdChzbmFwc2hvdCkge1xuICAgIGxvYWRTbmFwc2hvdCh0aGlzLnN0b3JlLCBzbmFwc2hvdCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEEgbWFuYWdlciBmb3IgcmVjb3JkaW5nIG11bHRpcGxlIGNsaWNrIGV2ZW50cy5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfY2xpY2tNYW5hZ2VyID0gbmV3IENsaWNrTWFuYWdlcih0aGlzKTtcbiAgLyoqXG4gICAqIFByZXZlbnQgYSBkb3VibGUgY2xpY2sgZXZlbnQgZnJvbSBmaXJpbmcgdGhlIG5leHQgdGltZSB0aGUgdXNlciBjbGlja3NcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2FuY2VsRG91YmxlQ2xpY2soKSB7XG4gICAgdGhpcy5fY2xpY2tNYW5hZ2VyLmNhbmNlbERvdWJsZUNsaWNrVGltZW91dCgpO1xuICB9XG4gIC8qKlxuICAgKiBUaGUgcHJldmlvdXMgY3Vyc29yLiBVc2VkIGZvciByZXN0b3JpbmcgdGhlIGN1cnNvciBhZnRlciBwYW4gZXZlbnRzLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9wcmV2Q3Vyc29yID0gXCJkZWZhdWx0XCI7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3NoaWZ0S2V5VGltZW91dCA9IC0xO1xuICAvKiogQGludGVybmFsICovXG4gIF9zZXRTaGlmdEtleVRpbWVvdXQgPSAoKSA9PiB7XG4gICAgdGhpcy5pbnB1dHMuc2hpZnRLZXkgPSBmYWxzZTtcbiAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwia2V5Ym9hcmRcIixcbiAgICAgIG5hbWU6IFwia2V5X3VwXCIsXG4gICAgICBrZXk6IFwiU2hpZnRcIixcbiAgICAgIHNoaWZ0S2V5OiB0aGlzLmlucHV0cy5zaGlmdEtleSxcbiAgICAgIGN0cmxLZXk6IHRoaXMuaW5wdXRzLmN0cmxLZXksXG4gICAgICBhbHRLZXk6IHRoaXMuaW5wdXRzLmFsdEtleSxcbiAgICAgIGNvZGU6IFwiU2hpZnRMZWZ0XCJcbiAgICB9KTtcbiAgfTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfYWx0S2V5VGltZW91dCA9IC0xO1xuICAvKiogQGludGVybmFsICovXG4gIF9zZXRBbHRLZXlUaW1lb3V0ID0gKCkgPT4ge1xuICAgIHRoaXMuaW5wdXRzLmFsdEtleSA9IGZhbHNlO1xuICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgdHlwZTogXCJrZXlib2FyZFwiLFxuICAgICAgbmFtZTogXCJrZXlfdXBcIixcbiAgICAgIGtleTogXCJBbHRcIixcbiAgICAgIHNoaWZ0S2V5OiB0aGlzLmlucHV0cy5zaGlmdEtleSxcbiAgICAgIGN0cmxLZXk6IHRoaXMuaW5wdXRzLmN0cmxLZXksXG4gICAgICBhbHRLZXk6IHRoaXMuaW5wdXRzLmFsdEtleSxcbiAgICAgIGNvZGU6IFwiQWx0TGVmdFwiXG4gICAgfSk7XG4gIH07XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2N0cmxLZXlUaW1lb3V0ID0gLTE7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3NldEN0cmxLZXlUaW1lb3V0ID0gKCkgPT4ge1xuICAgIHRoaXMuaW5wdXRzLmN0cmxLZXkgPSBmYWxzZTtcbiAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwia2V5Ym9hcmRcIixcbiAgICAgIG5hbWU6IFwia2V5X3VwXCIsXG4gICAgICBrZXk6IFwiQ3RybFwiLFxuICAgICAgc2hpZnRLZXk6IHRoaXMuaW5wdXRzLnNoaWZ0S2V5LFxuICAgICAgY3RybEtleTogdGhpcy5pbnB1dHMuY3RybEtleSxcbiAgICAgIGFsdEtleTogdGhpcy5pbnB1dHMuYWx0S2V5LFxuICAgICAgY29kZTogXCJDb250cm9sTGVmdFwiXG4gICAgfSk7XG4gIH07XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3Jlc3RvcmVUb29sSWQgPSBcInNlbGVjdFwiO1xuICAvKiogQGludGVybmFsICovXG4gIF9waW5jaFN0YXJ0ID0gMTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfZGlkUGluY2ggPSBmYWxzZTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfc2VsZWN0ZWRTaGFwZUlkc0F0UG9pbnRlckRvd24gPSBbXTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfbG9uZ1ByZXNzVGltZW91dCA9IC0xO1xuICAvKiogQGludGVybmFsICovXG4gIGNhcHR1cmVkUG9pbnRlcklkID0gbnVsbDtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwZXJmb3JtYW5jZVRyYWNrZXI7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcGVyZm9ybWFuY2VUcmFja2VyVGltZW91dCA9IC0xO1xuICAvKipcbiAgICogRGlzcGF0Y2ggYW4gZXZlbnQgdG8gdGhlIGVkaXRvci5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLmRpc3BhdGNoKG15UG9pbnRlckV2ZW50KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGluZm8gLSBUaGUgZXZlbnQgaW5mby5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZGlzcGF0Y2ggPSAoaW5mbykgPT4ge1xuICAgIHRoaXMuX3BlbmRpbmdFdmVudHNGb3JOZXh0VGljay5wdXNoKGluZm8pO1xuICAgIGlmICghKGluZm8udHlwZSA9PT0gXCJwb2ludGVyXCIgJiYgaW5mby5uYW1lID09PSBcInBvaW50ZXJfbW92ZVwiIHx8IGluZm8udHlwZSA9PT0gXCJ3aGVlbFwiIHx8IGluZm8udHlwZSA9PT0gXCJwaW5jaFwiKSkge1xuICAgICAgdGhpcy5fZmx1c2hFdmVudHNGb3JUaWNrKDApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgX3BlbmRpbmdFdmVudHNGb3JOZXh0VGljayA9IFtdO1xuICBfZmx1c2hFdmVudHNGb3JUaWNrKGVsYXBzZWQpIHtcbiAgICB0aGlzLmJhdGNoKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9wZW5kaW5nRXZlbnRzRm9yTmV4dFRpY2subGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBldmVudHMgPSBbLi4udGhpcy5fcGVuZGluZ0V2ZW50c0Zvck5leHRUaWNrXTtcbiAgICAgICAgdGhpcy5fcGVuZGluZ0V2ZW50c0Zvck5leHRUaWNrLmxlbmd0aCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgaW5mbyBvZiBldmVudHMpIHtcbiAgICAgICAgICB0aGlzLl9mbHVzaEV2ZW50Rm9yVGljayhpbmZvKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGVsYXBzZWQgPiAwKSB7XG4gICAgICAgIHRoaXMucm9vdC5oYW5kbGVFdmVudCh7IHR5cGU6IFwibWlzY1wiLCBuYW1lOiBcInRpY2tcIiwgZWxhcHNlZCB9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2NyaWJibGVzLnRpY2soZWxhcHNlZCk7XG4gICAgfSk7XG4gIH1cbiAgX2ZsdXNoRXZlbnRGb3JUaWNrID0gKGluZm8pID0+IHtcbiAgICBpZiAodGhpcy5nZXRDcmFzaGluZ0Vycm9yKCkpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBjb25zdCB7IGlucHV0cyB9ID0gdGhpcztcbiAgICBjb25zdCB7IHR5cGUgfSA9IGluZm87XG4gICAgaWYgKGluZm8udHlwZSA9PT0gXCJtaXNjXCIpIHtcbiAgICAgIGlmIChpbmZvLm5hbWUgPT09IFwiY2FuY2VsXCIgfHwgaW5mby5uYW1lID09PSBcImNvbXBsZXRlXCIpIHtcbiAgICAgICAgdGhpcy5pbnB1dHMuaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5pbnB1dHMuaXNQYW5uaW5nKSB7XG4gICAgICAgICAgdGhpcy5pbnB1dHMuaXNQYW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5zZXRDdXJzb3IoeyB0eXBlOiB0aGlzLl9wcmV2Q3Vyc29yLCByb3RhdGlvbjogMCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5yb290LmhhbmRsZUV2ZW50KGluZm8pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaW5mby5zaGlmdEtleSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3NoaWZ0S2V5VGltZW91dCk7XG4gICAgICB0aGlzLl9zaGlmdEtleVRpbWVvdXQgPSAtMTtcbiAgICAgIGlucHV0cy5zaGlmdEtleSA9IHRydWU7XG4gICAgfSBlbHNlIGlmICghaW5mby5zaGlmdEtleSAmJiBpbnB1dHMuc2hpZnRLZXkgJiYgdGhpcy5fc2hpZnRLZXlUaW1lb3V0ID09PSAtMSkge1xuICAgICAgdGhpcy5fc2hpZnRLZXlUaW1lb3V0ID0gdGhpcy50aW1lcnMuc2V0VGltZW91dCh0aGlzLl9zZXRTaGlmdEtleVRpbWVvdXQsIDE1MCk7XG4gICAgfVxuICAgIGlmIChpbmZvLmFsdEtleSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2FsdEtleVRpbWVvdXQpO1xuICAgICAgdGhpcy5fYWx0S2V5VGltZW91dCA9IC0xO1xuICAgICAgaW5wdXRzLmFsdEtleSA9IHRydWU7XG4gICAgfSBlbHNlIGlmICghaW5mby5hbHRLZXkgJiYgaW5wdXRzLmFsdEtleSAmJiB0aGlzLl9hbHRLZXlUaW1lb3V0ID09PSAtMSkge1xuICAgICAgdGhpcy5fYWx0S2V5VGltZW91dCA9IHRoaXMudGltZXJzLnNldFRpbWVvdXQodGhpcy5fc2V0QWx0S2V5VGltZW91dCwgMTUwKTtcbiAgICB9XG4gICAgaWYgKGluZm8uY3RybEtleSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2N0cmxLZXlUaW1lb3V0KTtcbiAgICAgIHRoaXMuX2N0cmxLZXlUaW1lb3V0ID0gLTE7XG4gICAgICBpbnB1dHMuY3RybEtleSA9IHRydWU7XG4gICAgfSBlbHNlIGlmICghaW5mby5jdHJsS2V5ICYmIGlucHV0cy5jdHJsS2V5ICYmIHRoaXMuX2N0cmxLZXlUaW1lb3V0ID09PSAtMSkge1xuICAgICAgdGhpcy5fY3RybEtleVRpbWVvdXQgPSB0aGlzLnRpbWVycy5zZXRUaW1lb3V0KHRoaXMuX3NldEN0cmxLZXlUaW1lb3V0LCAxNTApO1xuICAgIH1cbiAgICBjb25zdCB7IG9yaWdpblBhZ2VQb2ludCwgY3VycmVudFBhZ2VQb2ludCB9ID0gaW5wdXRzO1xuICAgIGlmICghaW5wdXRzLmlzUG9pbnRpbmcpIHtcbiAgICAgIGlucHV0cy5pc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGluc3RhbmNlU3RhdGUgPSB0aGlzLnN0b3JlLnVuc2FmZUdldFdpdGhvdXRDYXB0dXJlKFRMSU5TVEFOQ0VfSUQpO1xuICAgIGNvbnN0IHBhZ2VTdGF0ZSA9IHRoaXMuc3RvcmUuZ2V0KHRoaXMuX2dldEN1cnJlbnRQYWdlU3RhdGVJZCgpKTtcbiAgICBjb25zdCBjYW1lcmFPcHRpb25zID0gdGhpcy5fY2FtZXJhT3B0aW9ucy5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUoKTtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJwaW5jaFwiOiB7XG4gICAgICAgIGlmIChjYW1lcmFPcHRpb25zLmlzTG9ja2VkKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2xvbmdQcmVzc1RpbWVvdXQpO1xuICAgICAgICB0aGlzLl91cGRhdGVJbnB1dHNGcm9tRXZlbnQoaW5mbyk7XG4gICAgICAgIHN3aXRjaCAoaW5mby5uYW1lKSB7XG4gICAgICAgICAgY2FzZSBcInBpbmNoX3N0YXJ0XCI6IHtcbiAgICAgICAgICAgIGlmIChpbnB1dHMuaXNQaW5jaGluZylcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCFpbnB1dHMuaXNFZGl0aW5nKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3BpbmNoU3RhcnQgPSB0aGlzLmdldENhbWVyYSgpLno7XG4gICAgICAgICAgICAgIGlmICghdGhpcy5fc2VsZWN0ZWRTaGFwZUlkc0F0UG9pbnRlckRvd24ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRTaGFwZUlkc0F0UG9pbnRlckRvd24gPSBbLi4ucGFnZVN0YXRlLnNlbGVjdGVkU2hhcGVJZHNdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuX2RpZFBpbmNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgaW5wdXRzLmlzUGluY2hpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICB0aGlzLmludGVycnVwdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwicGluY2hcIjoge1xuICAgICAgICAgICAgaWYgKCFpbnB1dHMuaXNQaW5jaGluZylcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICBwb2ludDogeyB6ID0gMSB9LFxuICAgICAgICAgICAgICBkZWx0YTogeyB4OiBkeCwgeTogZHkgfVxuICAgICAgICAgICAgfSA9IGluZm87XG4gICAgICAgICAgICBjb25zdCB7IHgsIHkgfSA9IFZlYy5TdWJYWShcbiAgICAgICAgICAgICAgaW5mby5wb2ludCxcbiAgICAgICAgICAgICAgaW5zdGFuY2VTdGF0ZS5zY3JlZW5Cb3VuZHMueCxcbiAgICAgICAgICAgICAgaW5zdGFuY2VTdGF0ZS5zY3JlZW5Cb3VuZHMueVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcENhbWVyYUFuaW1hdGlvbigpO1xuICAgICAgICAgICAgaWYgKGluc3RhbmNlU3RhdGUuZm9sbG93aW5nVXNlcklkKSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RvcEZvbGxvd2luZ1VzZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgeDogY3gsIHk6IGN5LCB6OiBjeiB9ID0gdW5zYWZlX193aXRob3V0Q2FwdHVyZSgoKSA9PiB0aGlzLmdldENhbWVyYSgpKTtcbiAgICAgICAgICAgIGNvbnN0IHsgcGFuU3BlZWQsIHpvb21TcGVlZCB9ID0gY2FtZXJhT3B0aW9ucztcbiAgICAgICAgICAgIHRoaXMuX3NldENhbWVyYShcbiAgICAgICAgICAgICAgbmV3IFZlYyhcbiAgICAgICAgICAgICAgICBjeCArIGR4ICogcGFuU3BlZWQgLyBjeiAtIHggLyBjeiArIHggLyAoeiAqIHpvb21TcGVlZCksXG4gICAgICAgICAgICAgICAgY3kgKyBkeSAqIHBhblNwZWVkIC8gY3ogLSB5IC8gY3ogKyB5IC8gKHogKiB6b29tU3BlZWQpLFxuICAgICAgICAgICAgICAgIHogKiB6b29tU3BlZWRcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgeyBpbW1lZGlhdGU6IHRydWUgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInBpbmNoX2VuZFwiOiB7XG4gICAgICAgICAgICBpZiAoIWlucHV0cy5pc1BpbmNoaW5nKVxuICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIGlucHV0cy5pc1BpbmNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB7IF9zZWxlY3RlZFNoYXBlSWRzQXRQb2ludGVyRG93bjogc2hhcGVzVG9SZXNlbGVjdCB9ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRTaGFwZXModGhpcy5fc2VsZWN0ZWRTaGFwZUlkc0F0UG9pbnRlckRvd24pO1xuICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRTaGFwZUlkc0F0UG9pbnRlckRvd24gPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9kaWRQaW5jaCkge1xuICAgICAgICAgICAgICB0aGlzLl9kaWRQaW5jaCA9IGZhbHNlO1xuICAgICAgICAgICAgICBpZiAoc2hhcGVzVG9SZXNlbGVjdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbmNlKFwidGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2RpZFBpbmNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRTaGFwZXMoc2hhcGVzVG9SZXNlbGVjdCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ3aGVlbFwiOiB7XG4gICAgICAgIGlmIChjYW1lcmFPcHRpb25zLmlzTG9ja2VkKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5fdXBkYXRlSW5wdXRzRnJvbUV2ZW50KGluZm8pO1xuICAgICAgICBpZiAodGhpcy5nZXRJc01lbnVPcGVuKCkpIHtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB7IHBhblNwZWVkLCB6b29tU3BlZWQsIHdoZWVsQmVoYXZpb3IgfSA9IGNhbWVyYU9wdGlvbnM7XG4gICAgICAgICAgaWYgKHdoZWVsQmVoYXZpb3IgIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BDYW1lcmFBbmltYXRpb24oKTtcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZVN0YXRlLmZvbGxvd2luZ1VzZXJJZCkge1xuICAgICAgICAgICAgICB0aGlzLnN0b3BGb2xsb3dpbmdVc2VyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IHg6IGN4LCB5OiBjeSwgejogY3ogfSA9IHVuc2FmZV9fd2l0aG91dENhcHR1cmUoKCkgPT4gdGhpcy5nZXRDYW1lcmEoKSk7XG4gICAgICAgICAgICBjb25zdCB7IHg6IGR4LCB5OiBkeSwgejogZHogPSAwIH0gPSBpbmZvLmRlbHRhO1xuICAgICAgICAgICAgbGV0IGJlaGF2aW9yID0gd2hlZWxCZWhhdmlvcjtcbiAgICAgICAgICAgIGlmIChpbnB1dHMuY3RybEtleSlcbiAgICAgICAgICAgICAgYmVoYXZpb3IgPSB3aGVlbEJlaGF2aW9yID09PSBcInBhblwiID8gXCJ6b29tXCIgOiBcInBhblwiO1xuICAgICAgICAgICAgc3dpdGNoIChiZWhhdmlvcikge1xuICAgICAgICAgICAgICBjYXNlIFwiem9vbVwiOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLmlucHV0cy5jdXJyZW50U2NyZWVuUG9pbnQ7XG4gICAgICAgICAgICAgICAgbGV0IGRlbHRhID0gZHo7XG4gICAgICAgICAgICAgICAgaWYgKHdoZWVsQmVoYXZpb3IgPT09IFwiem9vbVwiKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoZHkpID4gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgPSAxMCAqIE1hdGguc2lnbihkeSkgLyAxMDA7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YSA9IGR5IC8gMTAwO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB6b29tID0gY3ogKyAoZGVsdGEgPz8gMCkgKiB6b29tU3BlZWQgKiBjejtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRDYW1lcmEoXG4gICAgICAgICAgICAgICAgICBuZXcgVmVjKFxuICAgICAgICAgICAgICAgICAgICBjeCArICh4IC8gem9vbSAtIHgpIC0gKHggLyBjeiAtIHgpLFxuICAgICAgICAgICAgICAgICAgICBjeSArICh5IC8gem9vbSAtIHkpIC0gKHkgLyBjeiAtIHkpLFxuICAgICAgICAgICAgICAgICAgICB6b29tXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgeyBpbW1lZGlhdGU6IHRydWUgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXliZVRyYWNrUGVyZm9ybWFuY2UoXCJab29taW5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwicGFuXCI6IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRDYW1lcmEobmV3IFZlYyhjeCArIGR4ICogcGFuU3BlZWQgLyBjeiwgY3kgKyBkeSAqIHBhblNwZWVkIC8gY3osIGN6KSwge1xuICAgICAgICAgICAgICAgICAgaW1tZWRpYXRlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXliZVRyYWNrUGVyZm9ybWFuY2UoXCJQYW5uaW5nXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJwb2ludGVyXCI6IHtcbiAgICAgICAgaWYgKGlucHV0cy5pc1BpbmNoaW5nKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5fdXBkYXRlSW5wdXRzRnJvbUV2ZW50KGluZm8pO1xuICAgICAgICBjb25zdCB7IGlzUGVuIH0gPSBpbmZvO1xuICAgICAgICBjb25zdCB7IGlzUGVuTW9kZSB9ID0gaW5zdGFuY2VTdGF0ZTtcbiAgICAgICAgc3dpdGNoIChpbmZvLm5hbWUpIHtcbiAgICAgICAgICBjYXNlIFwicG9pbnRlcl9kb3duXCI6IHtcbiAgICAgICAgICAgIGlmIChpc1Blbk1vZGUgJiYgIWlzUGVuKVxuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmNsZWFyT3Blbk1lbnVzKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaW5wdXRzLmlzUGFubmluZykge1xuICAgICAgICAgICAgICB0aGlzLl9sb25nUHJlc3NUaW1lb3V0ID0gdGhpcy50aW1lcnMuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAuLi5pbmZvLFxuICAgICAgICAgICAgICAgICAgcG9pbnQ6IHRoaXMuaW5wdXRzLmN1cnJlbnRTY3JlZW5Qb2ludCxcbiAgICAgICAgICAgICAgICAgIG5hbWU6IFwibG9uZ19wcmVzc1wiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0sIHRoaXMub3B0aW9ucy5sb25nUHJlc3NEdXJhdGlvbk1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkU2hhcGVJZHNBdFBvaW50ZXJEb3duID0gdGhpcy5nZXRTZWxlY3RlZFNoYXBlSWRzKCk7XG4gICAgICAgICAgICBpZiAoaW5mby5idXR0b24gPT09IExFRlRfTU9VU0VfQlVUVE9OKVxuICAgICAgICAgICAgICB0aGlzLmNhcHR1cmVkUG9pbnRlcklkID0gaW5mby5wb2ludGVySWQ7XG4gICAgICAgICAgICBpbnB1dHMuYnV0dG9ucy5hZGQoaW5mby5idXR0b24pO1xuICAgICAgICAgICAgaW5wdXRzLmlzUG9pbnRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgaW5wdXRzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghaXNQZW5Nb2RlICYmIGlzUGVuKVxuICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBpc1Blbk1vZGU6IHRydWUgfSk7XG4gICAgICAgICAgICBpZiAoaW5mby5idXR0b24gPT09IFNUWUxVU19FUkFTRVJfQlVUVE9OKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3Jlc3RvcmVUb29sSWQgPSB0aGlzLmdldEN1cnJlbnRUb29sSWQoKTtcbiAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICB0aGlzLnNldEN1cnJlbnRUb29sKFwiZXJhc2VyXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpbmZvLmJ1dHRvbiA9PT0gTUlERExFX01PVVNFX0JVVFRPTikge1xuICAgICAgICAgICAgICBpZiAoIXRoaXMuaW5wdXRzLmlzUGFubmluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3ByZXZDdXJzb3IgPSB0aGlzLmdldEluc3RhbmNlU3RhdGUoKS5jdXJzb3IudHlwZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLmlucHV0cy5pc1Bhbm5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fbG9uZ1ByZXNzVGltZW91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pbnB1dHMuaXNQYW5uaW5nKSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RvcENhbWVyYUFuaW1hdGlvbigpO1xuICAgICAgICAgICAgICB0aGlzLnNldEN1cnNvcih7IHR5cGU6IFwiZ3JhYmJpbmdcIiwgcm90YXRpb246IDAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJwb2ludGVyX21vdmVcIjoge1xuICAgICAgICAgICAgaWYgKCFpc1BlbiAmJiBpc1Blbk1vZGUpXG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHsgeDogY3gsIHk6IGN5LCB6OiBjeiB9ID0gdW5zYWZlX193aXRob3V0Q2FwdHVyZSgoKSA9PiB0aGlzLmdldENhbWVyYSgpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlucHV0cy5pc1Bhbm5pbmcgJiYgdGhpcy5pbnB1dHMuaXNQb2ludGluZykge1xuICAgICAgICAgICAgICBjb25zdCB7IGN1cnJlbnRTY3JlZW5Qb2ludCwgcHJldmlvdXNTY3JlZW5Qb2ludCB9ID0gdGhpcy5pbnB1dHM7XG4gICAgICAgICAgICAgIGNvbnN0IHsgcGFuU3BlZWQgfSA9IGNhbWVyYU9wdGlvbnM7XG4gICAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IFZlYy5TdWIoY3VycmVudFNjcmVlblBvaW50LCBwcmV2aW91c1NjcmVlblBvaW50KTtcbiAgICAgICAgICAgICAgdGhpcy5zZXRDYW1lcmEoXG4gICAgICAgICAgICAgICAgbmV3IFZlYyhjeCArIG9mZnNldC54ICogcGFuU3BlZWQgLyBjeiwgY3kgKyBvZmZzZXQueSAqIHBhblNwZWVkIC8gY3osIGN6KSxcbiAgICAgICAgICAgICAgICB7IGltbWVkaWF0ZTogdHJ1ZSB9XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHRoaXMubWF5YmVUcmFja1BlcmZvcm1hbmNlKFwiUGFubmluZ1wiKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlucHV0cy5pc1BvaW50aW5nICYmICFpbnB1dHMuaXNEcmFnZ2luZyAmJiBWZWMuRGlzdDIob3JpZ2luUGFnZVBvaW50LCBjdXJyZW50UGFnZVBvaW50KSAqIHRoaXMuZ2V0Wm9vbUxldmVsKCkgPiAoaW5zdGFuY2VTdGF0ZS5pc0NvYXJzZVBvaW50ZXIgPyB0aGlzLm9wdGlvbnMuY29hcnNlRHJhZ0Rpc3RhbmNlU3F1YXJlZCA6IHRoaXMub3B0aW9ucy5kcmFnRGlzdGFuY2VTcXVhcmVkKSAvIGN6KSB7XG4gICAgICAgICAgICAgIGlucHV0cy5pc0RyYWdnaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2xvbmdQcmVzc1RpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJwb2ludGVyX3VwXCI6IHtcbiAgICAgICAgICAgIGlucHV0cy5pc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBpbnB1dHMuaXNQb2ludGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2xvbmdQcmVzc1RpbWVvdXQpO1xuICAgICAgICAgICAgaW5wdXRzLmJ1dHRvbnMuZGVsZXRlKGluZm8uYnV0dG9uKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldElzTWVudU9wZW4oKSlcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGluc3RhbmNlU3RhdGUuaXNQZW5Nb2RlICYmICFpc1BlbilcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FwdHVyZWRQb2ludGVySWQgPT09IGluZm8ucG9pbnRlcklkKSB7XG4gICAgICAgICAgICAgIHRoaXMuY2FwdHVyZWRQb2ludGVySWQgPSBudWxsO1xuICAgICAgICAgICAgICBpbmZvLmJ1dHRvbiA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5wdXRzLmlzUGFubmluZykge1xuICAgICAgICAgICAgICBpZiAoIWlucHV0cy5rZXlzLmhhcyhcIlNwYWNlXCIpKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRzLmlzUGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IHNsaWRlRGlyZWN0aW9uID0gdGhpcy5pbnB1dHMucG9pbnRlclZlbG9jaXR5O1xuICAgICAgICAgICAgICBjb25zdCBzbGlkZVNwZWVkID0gTWF0aC5taW4oMiwgc2xpZGVEaXJlY3Rpb24ubGVuKCkpO1xuICAgICAgICAgICAgICBzd2l0Y2ggKGluZm8uYnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBMRUZUX01PVVNFX0JVVFRPTjoge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJzb3IoeyB0eXBlOiBcImdyYWJcIiwgcm90YXRpb246IDAgfSk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBNSURETEVfTU9VU0VfQlVUVE9OOiB7XG4gICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnB1dHMua2V5cy5oYXMoXCIgXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3Vyc29yKHsgdHlwZTogXCJncmFiXCIsIHJvdGF0aW9uOiAwIH0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJzb3IoeyB0eXBlOiB0aGlzLl9wcmV2Q3Vyc29yLCByb3RhdGlvbjogMCB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHNsaWRlU3BlZWQgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZUNhbWVyYSh7IHNwZWVkOiBzbGlkZVNwZWVkLCBkaXJlY3Rpb246IHNsaWRlRGlyZWN0aW9uIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoaW5mby5idXR0b24gPT09IFNUWUxVU19FUkFTRVJfQlVUVE9OKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3VycmVudFRvb2wodGhpcy5fcmVzdG9yZVRvb2xJZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJrZXlib2FyZFwiOiB7XG4gICAgICAgIGlmIChpbmZvLmtleSA9PT0gXCJTaGlmdFJpZ2h0XCIpXG4gICAgICAgICAgaW5mby5rZXkgPSBcIlNoaWZ0TGVmdFwiO1xuICAgICAgICBpZiAoaW5mby5rZXkgPT09IFwiQWx0UmlnaHRcIilcbiAgICAgICAgICBpbmZvLmtleSA9IFwiQWx0TGVmdFwiO1xuICAgICAgICBpZiAoaW5mby5jb2RlID09PSBcIkNvbnRyb2xSaWdodFwiKVxuICAgICAgICAgIGluZm8uY29kZSA9IFwiQ29udHJvbExlZnRcIjtcbiAgICAgICAgc3dpdGNoIChpbmZvLm5hbWUpIHtcbiAgICAgICAgICBjYXNlIFwia2V5X2Rvd25cIjoge1xuICAgICAgICAgICAgaW5wdXRzLmtleXMuYWRkKGluZm8uY29kZSk7XG4gICAgICAgICAgICBpZiAoaW5mby5jb2RlID09PSBcIlNwYWNlXCIgJiYgIWluZm8uY3RybEtleSkge1xuICAgICAgICAgICAgICBpZiAoIXRoaXMuaW5wdXRzLmlzUGFubmluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3ByZXZDdXJzb3IgPSBpbnN0YW5jZVN0YXRlLmN1cnNvci50eXBlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuaW5wdXRzLmlzUGFubmluZyA9IHRydWU7XG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9sb25nUHJlc3NUaW1lb3V0KTtcbiAgICAgICAgICAgICAgdGhpcy5zZXRDdXJzb3IoeyB0eXBlOiB0aGlzLmlucHV0cy5pc1BvaW50aW5nID8gXCJncmFiYmluZ1wiIDogXCJncmFiXCIsIHJvdGF0aW9uOiAwIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJrZXlfdXBcIjoge1xuICAgICAgICAgICAgaW5wdXRzLmtleXMuZGVsZXRlKGluZm8uY29kZSk7XG4gICAgICAgICAgICBpZiAoaW5mby5jb2RlID09PSBcIlNwYWNlXCIpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXRzLmJ1dHRvbnMuaGFzKE1JRERMRV9NT1VTRV9CVVRUT04pKSB7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dHMuaXNQYW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJzb3IoeyB0eXBlOiB0aGlzLl9wcmV2Q3Vyc29yLCByb3RhdGlvbjogMCB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJrZXlfcmVwZWF0XCI6IHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluZm8udHlwZSA9PT0gXCJwb2ludGVyXCIpIHtcbiAgICAgIGlmIChpbmZvLmJ1dHRvbiA9PT0gTUlERExFX01PVVNFX0JVVFRPTikge1xuICAgICAgICBpbmZvLm5hbWUgPSBcIm1pZGRsZV9jbGlja1wiO1xuICAgICAgfSBlbHNlIGlmIChpbmZvLmJ1dHRvbiA9PT0gUklHSFRfTU9VU0VfQlVUVE9OKSB7XG4gICAgICAgIGluZm8ubmFtZSA9IFwicmlnaHRfY2xpY2tcIjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgaXNQZW5Nb2RlIH0gPSB0aGlzLnN0b3JlLnVuc2FmZUdldFdpdGhvdXRDYXB0dXJlKFRMSU5TVEFOQ0VfSUQpO1xuICAgICAgaWYgKGluZm8uaXNQZW4gPT09IGlzUGVuTW9kZSkge1xuICAgICAgICBjb25zdCBjbGlja0luZm8gPSB0aGlzLl9jbGlja01hbmFnZXIuaGFuZGxlUG9pbnRlckV2ZW50KGluZm8pO1xuICAgICAgICBpZiAoaW5mby5uYW1lICE9PSBjbGlja0luZm8ubmFtZSkge1xuICAgICAgICAgIHRoaXMucm9vdC5oYW5kbGVFdmVudChpbmZvKTtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJldmVudFwiLCBpbmZvKTtcbiAgICAgICAgICB0aGlzLnJvb3QuaGFuZGxlRXZlbnQoY2xpY2tJbmZvKTtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJldmVudFwiLCBjbGlja0luZm8pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJvb3QuaGFuZGxlRXZlbnQoaW5mbyk7XG4gICAgdGhpcy5lbWl0KFwiZXZlbnRcIiwgaW5mbyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgbWF5YmVUcmFja1BlcmZvcm1hbmNlKG5hbWUpIHtcbiAgICBpZiAoZGVidWdGbGFncy5tZWFzdXJlUGVyZm9ybWFuY2UuZ2V0KCkpIHtcbiAgICAgIGlmICh0aGlzLnBlcmZvcm1hbmNlVHJhY2tlci5pc1N0YXJ0ZWQoKSkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wZXJmb3JtYW5jZVRyYWNrZXJUaW1lb3V0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VUcmFja2VyLnN0YXJ0KG5hbWUpO1xuICAgICAgfVxuICAgICAgdGhpcy5wZXJmb3JtYW5jZVRyYWNrZXJUaW1lb3V0ID0gdGhpcy50aW1lcnMuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VUcmFja2VyLnN0b3AoKTtcbiAgICAgIH0sIDUwKTtcbiAgICB9XG4gIH1cbn1cbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcImdldENhblVuZG9cIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRDYW5SZWRvXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0UGF0aFwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcImdldEN1cnJlbnRUb29sXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0Q3VycmVudFRvb2xJZFwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcImdldERvY3VtZW50U2V0dGluZ3NcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRJbnN0YW5jZVN0YXRlXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0T3Blbk1lbnVzXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0SXNNZW51T3BlblwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcImdldFBhZ2VTdGF0ZXNcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJfZ2V0UGFnZVN0YXRlc1F1ZXJ5XCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0Q3VycmVudFBhZ2VTdGF0ZVwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcIl9nZXRDdXJyZW50UGFnZVN0YXRlSWRcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRTZWxlY3RlZFNoYXBlSWRzXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0U2VsZWN0ZWRTaGFwZXNcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRPbmx5U2VsZWN0ZWRTaGFwZUlkXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0T25seVNlbGVjdGVkU2hhcGVcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRTZWxlY3Rpb25QYWdlQm91bmRzXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0U2VsZWN0aW9uUm90YXRpb25cIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRTZWxlY3Rpb25Sb3RhdGVkUGFnZUJvdW5kc1wiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcImdldFNlbGVjdGlvblJvdGF0ZWRTY3JlZW5Cb3VuZHNcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRGb2N1c2VkR3JvdXBJZFwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcImdldEZvY3VzZWRHcm91cFwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcImdldEVkaXRpbmdTaGFwZUlkXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0RWRpdGluZ1NoYXBlXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0SG92ZXJlZFNoYXBlSWRcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRIb3ZlcmVkU2hhcGVcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRIaW50aW5nU2hhcGVJZHNcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRIaW50aW5nU2hhcGVcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRFcmFzaW5nU2hhcGVJZHNcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRFcmFzaW5nU2hhcGVzXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0Q2FtZXJhSWRcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRDYW1lcmFcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRWaWV3cG9ydFBhZ2VCb3VuZHNGb3JGb2xsb3dpbmdcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRDYW1lcmFGb3JGb2xsb3dpbmdcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRab29tTGV2ZWxcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRWaWV3cG9ydFNjcmVlbkJvdW5kc1wiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcImdldFZpZXdwb3J0U2NyZWVuQ2VudGVyXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0Vmlld3BvcnRQYWdlQm91bmRzXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiX2dldENvbGxhYm9yYXRvcnNRdWVyeVwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcImdldENvbGxhYm9yYXRvcnNcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRDb2xsYWJvcmF0b3JzT25DdXJyZW50UGFnZVwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcImdldFJlbmRlcmluZ1NoYXBlc1wiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcIl9nZXRBbGxQYWdlc1F1ZXJ5XCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0UGFnZXNcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRDdXJyZW50UGFnZUlkXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0Q3VycmVudFBhZ2VTaGFwZUlkc1NvcnRlZFwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcIl9nZXRBbGxBc3NldHNRdWVyeVwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcIl9nZXRTaGFwZUdlb21ldHJ5Q2FjaGVcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJfZ2V0U2hhcGVIYW5kbGVzQ2FjaGVcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJfZ2V0U2hhcGVQYWdlVHJhbnNmb3JtQ2FjaGVcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJfZ2V0U2hhcGVQYWdlQm91bmRzQ2FjaGVcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJfZ2V0U2hhcGVDbGlwUGF0aENhY2hlXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiX2dldFNoYXBlTWFza0NhY2hlXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiX2dldFNoYXBlTWFza2VkUGFnZUJvdW5kc0NhY2hlXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiX25vdFZpc2libGVTaGFwZXNcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRDdWxsZWRTaGFwZXNcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRDdXJyZW50UGFnZUJvdW5kc1wiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcImdldEN1cnJlbnRQYWdlU2hhcGVzXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0Q3VycmVudFBhZ2VTaGFwZXNTb3J0ZWRcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJnZXRDdXJyZW50UGFnZVJlbmRlcmluZ1NoYXBlc1NvcnRlZFwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcIl9nZXRCaW5kaW5nc0luZGV4Q2FjaGVcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgRWRpdG9yLnByb3RvdHlwZSwgXCJfZ2V0U2VsZWN0aW9uU2hhcmVkU3R5bGVzXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWQoeyBpc0VxdWFsOiAoYSwgYikgPT4gYS5lcXVhbHMoYikgfSlcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0U2hhcmVkU3R5bGVzXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEVkaXRvci5wcm90b3R5cGUsIFwiZ2V0U2hhcmVkT3BhY2l0eVwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBFZGl0b3IucHJvdG90eXBlLCBcImdldElzRm9jdXNlZFwiLCAxKTtcbmZ1bmN0aW9uIGFsZXJ0TWF4U2hhcGVzKGVkaXRvciwgcGFnZUlkID0gZWRpdG9yLmdldEN1cnJlbnRQYWdlSWQoKSkge1xuICBjb25zdCBuYW1lID0gZWRpdG9yLmdldFBhZ2UocGFnZUlkKS5uYW1lO1xuICBlZGl0b3IuZW1pdChcIm1heC1zaGFwZXNcIiwgeyBuYW1lLCBwYWdlSWQsIGNvdW50OiBlZGl0b3Iub3B0aW9ucy5tYXhTaGFwZXNQZXJQYWdlIH0pO1xufVxuZnVuY3Rpb24gYXBwbHlQYXJ0aWFsVG9SZWNvcmRXaXRoUHJvcHMocHJldiwgcGFydGlhbCkge1xuICBpZiAoIXBhcnRpYWwpXG4gICAgcmV0dXJuIHByZXY7XG4gIGxldCBuZXh0ID0gbnVsbDtcbiAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHBhcnRpYWwpO1xuICBmb3IgKGxldCBpID0gMCwgbiA9IGVudHJpZXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgY29uc3QgW2ssIHZdID0gZW50cmllc1tpXTtcbiAgICBpZiAodiA9PT0gdm9pZCAwKVxuICAgICAgY29udGludWU7XG4gICAgaWYgKGsgPT09IFwiaWRcIiB8fCBrID09PSBcInR5cGVcIiB8fCBrID09PSBcInR5cGVOYW1lXCIpXG4gICAgICBjb250aW51ZTtcbiAgICBpZiAodiA9PT0gcHJldltrXSlcbiAgICAgIGNvbnRpbnVlO1xuICAgIGlmICghbmV4dClcbiAgICAgIG5leHQgPSB7IC4uLnByZXYgfTtcbiAgICBpZiAoayA9PT0gXCJwcm9wc1wiIHx8IGsgPT09IFwibWV0YVwiKSB7XG4gICAgICBuZXh0W2tdID0geyAuLi5wcmV2W2tdIH07XG4gICAgICBmb3IgKGNvbnN0IFtuZXh0S2V5LCBuZXh0VmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHYpKSB7XG4gICAgICAgIGlmIChuZXh0VmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgIDtcbiAgICAgICAgICBuZXh0W2tdW25leHRLZXldID0gbmV4dFZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgO1xuICAgIG5leHRba10gPSB2O1xuICB9XG4gIGlmICghbmV4dClcbiAgICByZXR1cm4gcHJldjtcbiAgcmV0dXJuIG5leHQ7XG59XG5mdW5jdGlvbiBwdXNoU2hhcGVXaXRoRGVzY2VuZGFudHMoZWRpdG9yLCBpZCwgcmVzdWx0KSB7XG4gIGNvbnN0IHNoYXBlID0gZWRpdG9yLmdldFNoYXBlKGlkKTtcbiAgaWYgKCFzaGFwZSlcbiAgICByZXR1cm47XG4gIHJlc3VsdC5wdXNoKHNoYXBlKTtcbiAgY29uc3QgY2hpbGRJZHMgPSBlZGl0b3IuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQoaWQpO1xuICBmb3IgKGxldCBpID0gMCwgbiA9IGNoaWxkSWRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgIHB1c2hTaGFwZVdpdGhEZXNjZW5kYW50cyhlZGl0b3IsIGNoaWxkSWRzW2ldLCByZXN1bHQpO1xuICB9XG59XG5mdW5jdGlvbiB3aXRoSXNvbGF0ZWRTaGFwZXMoZWRpdG9yLCBzaGFwZUlkcywgY2FsbGJhY2spIHtcbiAgbGV0IHJlc3VsdDtcbiAgZWRpdG9yLmhpc3RvcnkuaWdub3JlKCgpID0+IHtcbiAgICBjb25zdCBjaGFuZ2VzID0gZWRpdG9yLnN0b3JlLmV4dHJhY3RpbmdDaGFuZ2VzKCgpID0+IHtcbiAgICAgIGNvbnN0IGJpbmRpbmdzV2l0aEJvdGggPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgY29uc3QgYmluZGluZ3NUb1JlbW92ZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICBmb3IgKGNvbnN0IHNoYXBlSWQgb2Ygc2hhcGVJZHMpIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSBlZGl0b3IuZ2V0U2hhcGUoc2hhcGVJZCk7XG4gICAgICAgIGlmICghc2hhcGUpXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGZvciAoY29uc3QgYmluZGluZyBvZiBlZGl0b3IuZ2V0QmluZGluZ3NJbnZvbHZpbmdTaGFwZShzaGFwZUlkKSkge1xuICAgICAgICAgIGNvbnN0IGhhc0Zyb20gPSBzaGFwZUlkcy5oYXMoYmluZGluZy5mcm9tSWQpO1xuICAgICAgICAgIGNvbnN0IGhhc1RvID0gc2hhcGVJZHMuaGFzKGJpbmRpbmcudG9JZCk7XG4gICAgICAgICAgaWYgKGhhc0Zyb20gJiYgaGFzVG8pIHtcbiAgICAgICAgICAgIGJpbmRpbmdzV2l0aEJvdGguYWRkKGJpbmRpbmcuaWQpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghaGFzRnJvbSB8fCAhaGFzVG8pIHtcbiAgICAgICAgICAgIGJpbmRpbmdzVG9SZW1vdmUuYWRkKGJpbmRpbmcuaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWRpdG9yLmRlbGV0ZUJpbmRpbmdzKFsuLi5iaW5kaW5nc1RvUmVtb3ZlXSwgeyBpc29sYXRlU2hhcGVzOiB0cnVlIH0pO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzdWx0ID0gUmVzdWx0Lm9rKGNhbGxiYWNrKGJpbmRpbmdzV2l0aEJvdGgpKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlc3VsdCA9IFJlc3VsdC5lcnIoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGVkaXRvci5zdG9yZS5hcHBseURpZmYocmV2ZXJzZVJlY29yZHNEaWZmKGNoYW5nZXMpKTtcbiAgfSk7XG4gIGlmIChyZXN1bHQub2spIHtcbiAgICByZXR1cm4gcmVzdWx0LnZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0Q2FtZXJhRml0WEZpdFkoZWRpdG9yLCBjYW1lcmFPcHRpb25zKSB7XG4gIGlmICghY2FtZXJhT3B0aW9ucy5jb25zdHJhaW50cylcbiAgICB0aHJvdyBFcnJvcihcIlNob3VsZCBoYXZlIGNvbnN0cmFpbnRzIGhlcmVcIik7XG4gIGNvbnN0IHtcbiAgICBwYWRkaW5nOiB7IHg6IHB4LCB5OiBweSB9XG4gIH0gPSBjYW1lcmFPcHRpb25zLmNvbnN0cmFpbnRzO1xuICBjb25zdCB2c2IgPSBlZGl0b3IuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKTtcbiAgY29uc3QgYm91bmRzID0gQm94LkZyb20oY2FtZXJhT3B0aW9ucy5jb25zdHJhaW50cy5ib3VuZHMpO1xuICBjb25zdCB6eCA9ICh2c2IudyAtIHB4ICogMikgLyBib3VuZHMudztcbiAgY29uc3QgenkgPSAodnNiLmggLSBweSAqIDIpIC8gYm91bmRzLmg7XG4gIHJldHVybiB7IHp4LCB6eSB9O1xufVxuZXhwb3J0IHtcbiAgRWRpdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RWRpdG9yLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/Editor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/bindings/BindingUtil.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/bindings/BindingUtil.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BindingUtil: () => (/* binding */ BindingUtil)\n/* harmony export */ });\nclass BindingUtil {\n  constructor(editor) {\n    this.editor = editor;\n  }\n  static props;\n  static migrations;\n  /**\n   * The type of the binding util, which should match the binding's type.\n   *\n   * @public\n   */\n  static type;\n}\n\n//# sourceMappingURL=BindingUtil.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9iaW5kaW5ncy9CaW5kaW5nVXRpbC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL2JpbmRpbmdzL0JpbmRpbmdVdGlsLm1qcz82NDNmIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEJpbmRpbmdVdGlsIHtcbiAgY29uc3RydWN0b3IoZWRpdG9yKSB7XG4gICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gIH1cbiAgc3RhdGljIHByb3BzO1xuICBzdGF0aWMgbWlncmF0aW9ucztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIHRoZSBiaW5kaW5nIHV0aWwsIHdoaWNoIHNob3VsZCBtYXRjaCB0aGUgYmluZGluZydzIHR5cGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0YXRpYyB0eXBlO1xufVxuZXhwb3J0IHtcbiAgQmluZGluZ1V0aWxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CaW5kaW5nVXRpbC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/bindings/BindingUtil.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/bindingsIndex.mjs":
/*!***************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/bindingsIndex.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bindingsIndex: () => (/* binding */ bindingsIndex)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\n\nconst bindingsIndex = (editor) => {\n  const { store } = editor;\n  const bindingsHistory = store.query.filterHistory(\"binding\");\n  const bindingsQuery = store.query.records(\"binding\");\n  function fromScratch() {\n    const allBindings = bindingsQuery.get();\n    const shape2Binding = /* @__PURE__ */ new Map();\n    for (const binding of allBindings) {\n      const { fromId, toId } = binding;\n      const bindingsForFromShape = shape2Binding.get(fromId);\n      if (!bindingsForFromShape) {\n        shape2Binding.set(fromId, [binding]);\n      } else {\n        bindingsForFromShape.push(binding);\n      }\n      const bindingsForToShape = shape2Binding.get(toId);\n      if (!bindingsForToShape) {\n        shape2Binding.set(toId, [binding]);\n      } else {\n        bindingsForToShape.push(binding);\n      }\n    }\n    return shape2Binding;\n  }\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"arrowBindingsIndex\", (_lastValue, lastComputedEpoch) => {\n    if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(_lastValue)) {\n      return fromScratch();\n    }\n    const lastValue = _lastValue;\n    const diff = bindingsHistory.getDiffSince(lastComputedEpoch);\n    if (diff === _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) {\n      return fromScratch();\n    }\n    let nextValue = void 0;\n    function removingBinding(binding) {\n      nextValue ??= new Map(lastValue);\n      const prevFrom = nextValue.get(binding.fromId);\n      const nextFrom = prevFrom?.filter((b) => b.id !== binding.id);\n      if (!nextFrom?.length) {\n        nextValue.delete(binding.fromId);\n      } else {\n        nextValue.set(binding.fromId, nextFrom);\n      }\n      const prevTo = nextValue.get(binding.toId);\n      const nextTo = prevTo?.filter((b) => b.id !== binding.id);\n      if (!nextTo?.length) {\n        nextValue.delete(binding.toId);\n      } else {\n        nextValue.set(binding.toId, nextTo);\n      }\n    }\n    function ensureNewArray(shapeId) {\n      nextValue ??= new Map(lastValue);\n      let result = nextValue.get(shapeId);\n      if (!result) {\n        result = [];\n        nextValue.set(shapeId, result);\n      } else if (result === lastValue.get(shapeId)) {\n        result = result.slice(0);\n        nextValue.set(shapeId, result);\n      }\n      return result;\n    }\n    function addBinding(binding) {\n      ensureNewArray(binding.fromId).push(binding);\n      ensureNewArray(binding.toId).push(binding);\n    }\n    for (const changes of diff) {\n      for (const newBinding of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.added)) {\n        addBinding(newBinding);\n      }\n      for (const [prev, next] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.updated)) {\n        removingBinding(prev);\n        addBinding(next);\n      }\n      for (const prev of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.removed)) {\n        removingBinding(prev);\n      }\n    }\n    return nextValue ?? lastValue;\n  });\n};\n\n//# sourceMappingURL=bindingsIndex.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9kZXJpdmF0aW9ucy9iaW5kaW5nc0luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUU7QUFDdkI7QUFDaEQ7QUFDQSxVQUFVLFFBQVE7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxlQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVEQUFRO0FBQ2pCLFFBQVEsOERBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQVc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsOERBQWU7QUFDOUM7QUFDQTtBQUNBLGlDQUFpQyw4REFBZTtBQUNoRDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsOERBQWU7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvZGVyaXZhdGlvbnMvYmluZGluZ3NJbmRleC5tanM/NTgyMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSRVNFVF9WQUxVRSwgY29tcHV0ZWQsIGlzVW5pbml0aWFsaXplZCB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyBvYmplY3RNYXBWYWx1ZXMgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuY29uc3QgYmluZGluZ3NJbmRleCA9IChlZGl0b3IpID0+IHtcbiAgY29uc3QgeyBzdG9yZSB9ID0gZWRpdG9yO1xuICBjb25zdCBiaW5kaW5nc0hpc3RvcnkgPSBzdG9yZS5xdWVyeS5maWx0ZXJIaXN0b3J5KFwiYmluZGluZ1wiKTtcbiAgY29uc3QgYmluZGluZ3NRdWVyeSA9IHN0b3JlLnF1ZXJ5LnJlY29yZHMoXCJiaW5kaW5nXCIpO1xuICBmdW5jdGlvbiBmcm9tU2NyYXRjaCgpIHtcbiAgICBjb25zdCBhbGxCaW5kaW5ncyA9IGJpbmRpbmdzUXVlcnkuZ2V0KCk7XG4gICAgY29uc3Qgc2hhcGUyQmluZGluZyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBiaW5kaW5nIG9mIGFsbEJpbmRpbmdzKSB7XG4gICAgICBjb25zdCB7IGZyb21JZCwgdG9JZCB9ID0gYmluZGluZztcbiAgICAgIGNvbnN0IGJpbmRpbmdzRm9yRnJvbVNoYXBlID0gc2hhcGUyQmluZGluZy5nZXQoZnJvbUlkKTtcbiAgICAgIGlmICghYmluZGluZ3NGb3JGcm9tU2hhcGUpIHtcbiAgICAgICAgc2hhcGUyQmluZGluZy5zZXQoZnJvbUlkLCBbYmluZGluZ10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmluZGluZ3NGb3JGcm9tU2hhcGUucHVzaChiaW5kaW5nKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJpbmRpbmdzRm9yVG9TaGFwZSA9IHNoYXBlMkJpbmRpbmcuZ2V0KHRvSWQpO1xuICAgICAgaWYgKCFiaW5kaW5nc0ZvclRvU2hhcGUpIHtcbiAgICAgICAgc2hhcGUyQmluZGluZy5zZXQodG9JZCwgW2JpbmRpbmddKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJpbmRpbmdzRm9yVG9TaGFwZS5wdXNoKGJpbmRpbmcpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2hhcGUyQmluZGluZztcbiAgfVxuICByZXR1cm4gY29tcHV0ZWQoXCJhcnJvd0JpbmRpbmdzSW5kZXhcIiwgKF9sYXN0VmFsdWUsIGxhc3RDb21wdXRlZEVwb2NoKSA9PiB7XG4gICAgaWYgKGlzVW5pbml0aWFsaXplZChfbGFzdFZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZyb21TY3JhdGNoKCk7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RWYWx1ZSA9IF9sYXN0VmFsdWU7XG4gICAgY29uc3QgZGlmZiA9IGJpbmRpbmdzSGlzdG9yeS5nZXREaWZmU2luY2UobGFzdENvbXB1dGVkRXBvY2gpO1xuICAgIGlmIChkaWZmID09PSBSRVNFVF9WQUxVRSkge1xuICAgICAgcmV0dXJuIGZyb21TY3JhdGNoKCk7XG4gICAgfVxuICAgIGxldCBuZXh0VmFsdWUgPSB2b2lkIDA7XG4gICAgZnVuY3Rpb24gcmVtb3ZpbmdCaW5kaW5nKGJpbmRpbmcpIHtcbiAgICAgIG5leHRWYWx1ZSA/Pz0gbmV3IE1hcChsYXN0VmFsdWUpO1xuICAgICAgY29uc3QgcHJldkZyb20gPSBuZXh0VmFsdWUuZ2V0KGJpbmRpbmcuZnJvbUlkKTtcbiAgICAgIGNvbnN0IG5leHRGcm9tID0gcHJldkZyb20/LmZpbHRlcigoYikgPT4gYi5pZCAhPT0gYmluZGluZy5pZCk7XG4gICAgICBpZiAoIW5leHRGcm9tPy5sZW5ndGgpIHtcbiAgICAgICAgbmV4dFZhbHVlLmRlbGV0ZShiaW5kaW5nLmZyb21JZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0VmFsdWUuc2V0KGJpbmRpbmcuZnJvbUlkLCBuZXh0RnJvbSk7XG4gICAgICB9XG4gICAgICBjb25zdCBwcmV2VG8gPSBuZXh0VmFsdWUuZ2V0KGJpbmRpbmcudG9JZCk7XG4gICAgICBjb25zdCBuZXh0VG8gPSBwcmV2VG8/LmZpbHRlcigoYikgPT4gYi5pZCAhPT0gYmluZGluZy5pZCk7XG4gICAgICBpZiAoIW5leHRUbz8ubGVuZ3RoKSB7XG4gICAgICAgIG5leHRWYWx1ZS5kZWxldGUoYmluZGluZy50b0lkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRWYWx1ZS5zZXQoYmluZGluZy50b0lkLCBuZXh0VG8pO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBlbnN1cmVOZXdBcnJheShzaGFwZUlkKSB7XG4gICAgICBuZXh0VmFsdWUgPz89IG5ldyBNYXAobGFzdFZhbHVlKTtcbiAgICAgIGxldCByZXN1bHQgPSBuZXh0VmFsdWUuZ2V0KHNoYXBlSWQpO1xuICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgcmVzdWx0ID0gW107XG4gICAgICAgIG5leHRWYWx1ZS5zZXQoc2hhcGVJZCwgcmVzdWx0KTtcbiAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSBsYXN0VmFsdWUuZ2V0KHNoYXBlSWQpKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5zbGljZSgwKTtcbiAgICAgICAgbmV4dFZhbHVlLnNldChzaGFwZUlkLCByZXN1bHQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkQmluZGluZyhiaW5kaW5nKSB7XG4gICAgICBlbnN1cmVOZXdBcnJheShiaW5kaW5nLmZyb21JZCkucHVzaChiaW5kaW5nKTtcbiAgICAgIGVuc3VyZU5ld0FycmF5KGJpbmRpbmcudG9JZCkucHVzaChiaW5kaW5nKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBjaGFuZ2VzIG9mIGRpZmYpIHtcbiAgICAgIGZvciAoY29uc3QgbmV3QmluZGluZyBvZiBvYmplY3RNYXBWYWx1ZXMoY2hhbmdlcy5hZGRlZCkpIHtcbiAgICAgICAgYWRkQmluZGluZyhuZXdCaW5kaW5nKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW3ByZXYsIG5leHRdIG9mIG9iamVjdE1hcFZhbHVlcyhjaGFuZ2VzLnVwZGF0ZWQpKSB7XG4gICAgICAgIHJlbW92aW5nQmluZGluZyhwcmV2KTtcbiAgICAgICAgYWRkQmluZGluZyhuZXh0KTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgcHJldiBvZiBvYmplY3RNYXBWYWx1ZXMoY2hhbmdlcy5yZW1vdmVkKSkge1xuICAgICAgICByZW1vdmluZ0JpbmRpbmcocHJldik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXh0VmFsdWUgPz8gbGFzdFZhbHVlO1xuICB9KTtcbn07XG5leHBvcnQge1xuICBiaW5kaW5nc0luZGV4XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZGluZ3NJbmRleC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/bindingsIndex.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/notVisibleShapes.mjs":
/*!******************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/notVisibleShapes.mjs ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   notVisibleShapes: () => (/* binding */ notVisibleShapes)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n\nfunction isShapeNotVisible(editor, id, viewportPageBounds) {\n  const maskedPageBounds = editor.getShapeMaskedPageBounds(id);\n  if (maskedPageBounds === void 0)\n    return true;\n  return !viewportPageBounds.includes(maskedPageBounds);\n}\nconst notVisibleShapes = (editor) => {\n  function fromScratch(editor2) {\n    const shapes = editor2.getCurrentPageShapeIds();\n    const viewportPageBounds = editor2.getViewportPageBounds();\n    const notVisibleShapes2 = /* @__PURE__ */ new Set();\n    shapes.forEach((id) => {\n      if (isShapeNotVisible(editor2, id, viewportPageBounds)) {\n        notVisibleShapes2.add(id);\n      }\n    });\n    return notVisibleShapes2;\n  }\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"getCulledShapes\", (prevValue) => {\n    if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(prevValue)) {\n      return fromScratch(editor);\n    }\n    const nextValue = fromScratch(editor);\n    if (prevValue.size !== nextValue.size)\n      return nextValue;\n    for (const prev of prevValue) {\n      if (!nextValue.has(prev)) {\n        return nextValue;\n      }\n    }\n    return prevValue;\n  });\n};\n\n//# sourceMappingURL=notVisibleShapes.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9kZXJpdmF0aW9ucy9ub3RWaXNpYmxlU2hhcGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEwRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFNBQVMsdURBQVE7QUFDakIsUUFBUSw4REFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL2Rlcml2YXRpb25zL25vdFZpc2libGVTaGFwZXMubWpzPzZhYmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tcHV0ZWQsIGlzVW5pbml0aWFsaXplZCB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5mdW5jdGlvbiBpc1NoYXBlTm90VmlzaWJsZShlZGl0b3IsIGlkLCB2aWV3cG9ydFBhZ2VCb3VuZHMpIHtcbiAgY29uc3QgbWFza2VkUGFnZUJvdW5kcyA9IGVkaXRvci5nZXRTaGFwZU1hc2tlZFBhZ2VCb3VuZHMoaWQpO1xuICBpZiAobWFza2VkUGFnZUJvdW5kcyA9PT0gdm9pZCAwKVxuICAgIHJldHVybiB0cnVlO1xuICByZXR1cm4gIXZpZXdwb3J0UGFnZUJvdW5kcy5pbmNsdWRlcyhtYXNrZWRQYWdlQm91bmRzKTtcbn1cbmNvbnN0IG5vdFZpc2libGVTaGFwZXMgPSAoZWRpdG9yKSA9PiB7XG4gIGZ1bmN0aW9uIGZyb21TY3JhdGNoKGVkaXRvcjIpIHtcbiAgICBjb25zdCBzaGFwZXMgPSBlZGl0b3IyLmdldEN1cnJlbnRQYWdlU2hhcGVJZHMoKTtcbiAgICBjb25zdCB2aWV3cG9ydFBhZ2VCb3VuZHMgPSBlZGl0b3IyLmdldFZpZXdwb3J0UGFnZUJvdW5kcygpO1xuICAgIGNvbnN0IG5vdFZpc2libGVTaGFwZXMyID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBzaGFwZXMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgIGlmIChpc1NoYXBlTm90VmlzaWJsZShlZGl0b3IyLCBpZCwgdmlld3BvcnRQYWdlQm91bmRzKSkge1xuICAgICAgICBub3RWaXNpYmxlU2hhcGVzMi5hZGQoaWQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBub3RWaXNpYmxlU2hhcGVzMjtcbiAgfVxuICByZXR1cm4gY29tcHV0ZWQoXCJnZXRDdWxsZWRTaGFwZXNcIiwgKHByZXZWYWx1ZSkgPT4ge1xuICAgIGlmIChpc1VuaW5pdGlhbGl6ZWQocHJldlZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZyb21TY3JhdGNoKGVkaXRvcik7XG4gICAgfVxuICAgIGNvbnN0IG5leHRWYWx1ZSA9IGZyb21TY3JhdGNoKGVkaXRvcik7XG4gICAgaWYgKHByZXZWYWx1ZS5zaXplICE9PSBuZXh0VmFsdWUuc2l6ZSlcbiAgICAgIHJldHVybiBuZXh0VmFsdWU7XG4gICAgZm9yIChjb25zdCBwcmV2IG9mIHByZXZWYWx1ZSkge1xuICAgICAgaWYgKCFuZXh0VmFsdWUuaGFzKHByZXYpKSB7XG4gICAgICAgIHJldHVybiBuZXh0VmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcmV2VmFsdWU7XG4gIH0pO1xufTtcbmV4cG9ydCB7XG4gIG5vdFZpc2libGVTaGFwZXNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub3RWaXNpYmxlU2hhcGVzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/notVisibleShapes.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/parentsToChildren.mjs":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/parentsToChildren.mjs ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parentsToChildren: () => (/* binding */ parentsToChildren)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\n\n\nconst parentsToChildren = (store) => {\n  const shapeIdsQuery = store.query.ids(\"shape\");\n  const shapeHistory = store.query.filterHistory(\"shape\");\n  function fromScratch() {\n    const result = {};\n    const shapeIds = shapeIdsQuery.get();\n    const shapes = Array(shapeIds.size);\n    shapeIds.forEach((id) => shapes.push(store.get(id)));\n    shapes.sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.sortByIndex);\n    shapes.forEach((shape) => {\n      if (!result[shape.parentId]) {\n        result[shape.parentId] = [];\n      }\n      result[shape.parentId].push(shape.id);\n    });\n    return result;\n  }\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\n    \"parentsToChildrenWithIndexes\",\n    (lastValue, lastComputedEpoch) => {\n      if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(lastValue)) {\n        return fromScratch();\n      }\n      const diff = shapeHistory.getDiffSince(lastComputedEpoch);\n      if (diff === _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) {\n        return fromScratch();\n      }\n      if (diff.length === 0)\n        return lastValue;\n      let newValue = null;\n      const ensureNewArray = (parentId) => {\n        if (!newValue) {\n          newValue = { ...lastValue };\n        }\n        if (!newValue[parentId]) {\n          newValue[parentId] = [];\n        } else if (newValue[parentId] === lastValue[parentId]) {\n          newValue[parentId] = [...newValue[parentId]];\n        }\n      };\n      const toSort = /* @__PURE__ */ new Set();\n      let changes;\n      for (let i = 0, n = diff.length; i < n; i++) {\n        changes = diff[i];\n        for (const record of Object.values(changes.added)) {\n          if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.isShape)(record))\n            continue;\n          ensureNewArray(record.parentId);\n          newValue[record.parentId].push(record.id);\n          toSort.add(newValue[record.parentId]);\n        }\n        for (const [from, to] of Object.values(changes.updated)) {\n          if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.isShape)(to))\n            continue;\n          if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.isShape)(from))\n            continue;\n          if (from.parentId !== to.parentId) {\n            ensureNewArray(from.parentId);\n            ensureNewArray(to.parentId);\n            newValue[from.parentId].splice(newValue[from.parentId].indexOf(to.id), 1);\n            newValue[to.parentId].push(to.id);\n            toSort.add(newValue[to.parentId]);\n          } else if (from.index !== to.index) {\n            ensureNewArray(to.parentId);\n            const idx = newValue[to.parentId].indexOf(to.id);\n            newValue[to.parentId][idx] = to.id;\n            toSort.add(newValue[to.parentId]);\n          }\n        }\n        for (const record of Object.values(changes.removed)) {\n          if (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.isShape)(record))\n            continue;\n          ensureNewArray(record.parentId);\n          newValue[record.parentId].splice(newValue[record.parentId].indexOf(record.id), 1);\n        }\n      }\n      for (const arr of toSort) {\n        const shapesInArr = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.compact)(arr.map((id) => store.get(id)));\n        shapesInArr.sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.sortByIndex);\n        arr.splice(0, arr.length, ...shapesInArr.map((shape) => shape.id));\n      }\n      return newValue ?? lastValue;\n    }\n  );\n};\n\n//# sourceMappingURL=parentsToChildren.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9kZXJpdmF0aW9ucy9wYXJlbnRzVG9DaGlsZHJlbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF1RTtBQUM1QjtBQUNVO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0RBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsU0FBUyx1REFBUTtBQUNqQjtBQUNBO0FBQ0EsVUFBVSw4REFBZTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsT0FBTztBQUM5QztBQUNBO0FBQ0EsZUFBZSx5REFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlEQUFPO0FBQ3RCO0FBQ0EsZUFBZSx5REFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseURBQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNEQUFPO0FBQ25DLHlCQUF5QixzREFBVztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvZGVyaXZhdGlvbnMvcGFyZW50c1RvQ2hpbGRyZW4ubWpzPzQzM2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tcHV0ZWQsIGlzVW5pbml0aWFsaXplZCwgUkVTRVRfVkFMVUUgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgaXNTaGFwZSB9IGZyb20gXCJAdGxkcmF3L3Rsc2NoZW1hXCI7XG5pbXBvcnQgeyBjb21wYWN0LCBzb3J0QnlJbmRleCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5jb25zdCBwYXJlbnRzVG9DaGlsZHJlbiA9IChzdG9yZSkgPT4ge1xuICBjb25zdCBzaGFwZUlkc1F1ZXJ5ID0gc3RvcmUucXVlcnkuaWRzKFwic2hhcGVcIik7XG4gIGNvbnN0IHNoYXBlSGlzdG9yeSA9IHN0b3JlLnF1ZXJ5LmZpbHRlckhpc3RvcnkoXCJzaGFwZVwiKTtcbiAgZnVuY3Rpb24gZnJvbVNjcmF0Y2goKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgY29uc3Qgc2hhcGVJZHMgPSBzaGFwZUlkc1F1ZXJ5LmdldCgpO1xuICAgIGNvbnN0IHNoYXBlcyA9IEFycmF5KHNoYXBlSWRzLnNpemUpO1xuICAgIHNoYXBlSWRzLmZvckVhY2goKGlkKSA9PiBzaGFwZXMucHVzaChzdG9yZS5nZXQoaWQpKSk7XG4gICAgc2hhcGVzLnNvcnQoc29ydEJ5SW5kZXgpO1xuICAgIHNoYXBlcy5mb3JFYWNoKChzaGFwZSkgPT4ge1xuICAgICAgaWYgKCFyZXN1bHRbc2hhcGUucGFyZW50SWRdKSB7XG4gICAgICAgIHJlc3VsdFtzaGFwZS5wYXJlbnRJZF0gPSBbXTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdFtzaGFwZS5wYXJlbnRJZF0ucHVzaChzaGFwZS5pZCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZXR1cm4gY29tcHV0ZWQoXG4gICAgXCJwYXJlbnRzVG9DaGlsZHJlbldpdGhJbmRleGVzXCIsXG4gICAgKGxhc3RWYWx1ZSwgbGFzdENvbXB1dGVkRXBvY2gpID0+IHtcbiAgICAgIGlmIChpc1VuaW5pdGlhbGl6ZWQobGFzdFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZnJvbVNjcmF0Y2goKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRpZmYgPSBzaGFwZUhpc3RvcnkuZ2V0RGlmZlNpbmNlKGxhc3RDb21wdXRlZEVwb2NoKTtcbiAgICAgIGlmIChkaWZmID09PSBSRVNFVF9WQUxVRSkge1xuICAgICAgICByZXR1cm4gZnJvbVNjcmF0Y2goKTtcbiAgICAgIH1cbiAgICAgIGlmIChkaWZmLmxlbmd0aCA9PT0gMClcbiAgICAgICAgcmV0dXJuIGxhc3RWYWx1ZTtcbiAgICAgIGxldCBuZXdWYWx1ZSA9IG51bGw7XG4gICAgICBjb25zdCBlbnN1cmVOZXdBcnJheSA9IChwYXJlbnRJZCkgPT4ge1xuICAgICAgICBpZiAoIW5ld1ZhbHVlKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSB7IC4uLmxhc3RWYWx1ZSB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghbmV3VmFsdWVbcGFyZW50SWRdKSB7XG4gICAgICAgICAgbmV3VmFsdWVbcGFyZW50SWRdID0gW107XG4gICAgICAgIH0gZWxzZSBpZiAobmV3VmFsdWVbcGFyZW50SWRdID09PSBsYXN0VmFsdWVbcGFyZW50SWRdKSB7XG4gICAgICAgICAgbmV3VmFsdWVbcGFyZW50SWRdID0gWy4uLm5ld1ZhbHVlW3BhcmVudElkXV07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25zdCB0b1NvcnQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgbGV0IGNoYW5nZXM7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbiA9IGRpZmYubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGNoYW5nZXMgPSBkaWZmW2ldO1xuICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBPYmplY3QudmFsdWVzKGNoYW5nZXMuYWRkZWQpKSB7XG4gICAgICAgICAgaWYgKCFpc1NoYXBlKHJlY29yZCkpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICBlbnN1cmVOZXdBcnJheShyZWNvcmQucGFyZW50SWQpO1xuICAgICAgICAgIG5ld1ZhbHVlW3JlY29yZC5wYXJlbnRJZF0ucHVzaChyZWNvcmQuaWQpO1xuICAgICAgICAgIHRvU29ydC5hZGQobmV3VmFsdWVbcmVjb3JkLnBhcmVudElkXSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBbZnJvbSwgdG9dIG9mIE9iamVjdC52YWx1ZXMoY2hhbmdlcy51cGRhdGVkKSkge1xuICAgICAgICAgIGlmICghaXNTaGFwZSh0bykpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICBpZiAoIWlzU2hhcGUoZnJvbSkpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICBpZiAoZnJvbS5wYXJlbnRJZCAhPT0gdG8ucGFyZW50SWQpIHtcbiAgICAgICAgICAgIGVuc3VyZU5ld0FycmF5KGZyb20ucGFyZW50SWQpO1xuICAgICAgICAgICAgZW5zdXJlTmV3QXJyYXkodG8ucGFyZW50SWQpO1xuICAgICAgICAgICAgbmV3VmFsdWVbZnJvbS5wYXJlbnRJZF0uc3BsaWNlKG5ld1ZhbHVlW2Zyb20ucGFyZW50SWRdLmluZGV4T2YodG8uaWQpLCAxKTtcbiAgICAgICAgICAgIG5ld1ZhbHVlW3RvLnBhcmVudElkXS5wdXNoKHRvLmlkKTtcbiAgICAgICAgICAgIHRvU29ydC5hZGQobmV3VmFsdWVbdG8ucGFyZW50SWRdKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGZyb20uaW5kZXggIT09IHRvLmluZGV4KSB7XG4gICAgICAgICAgICBlbnN1cmVOZXdBcnJheSh0by5wYXJlbnRJZCk7XG4gICAgICAgICAgICBjb25zdCBpZHggPSBuZXdWYWx1ZVt0by5wYXJlbnRJZF0uaW5kZXhPZih0by5pZCk7XG4gICAgICAgICAgICBuZXdWYWx1ZVt0by5wYXJlbnRJZF1baWR4XSA9IHRvLmlkO1xuICAgICAgICAgICAgdG9Tb3J0LmFkZChuZXdWYWx1ZVt0by5wYXJlbnRJZF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBPYmplY3QudmFsdWVzKGNoYW5nZXMucmVtb3ZlZCkpIHtcbiAgICAgICAgICBpZiAoIWlzU2hhcGUocmVjb3JkKSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIGVuc3VyZU5ld0FycmF5KHJlY29yZC5wYXJlbnRJZCk7XG4gICAgICAgICAgbmV3VmFsdWVbcmVjb3JkLnBhcmVudElkXS5zcGxpY2UobmV3VmFsdWVbcmVjb3JkLnBhcmVudElkXS5pbmRleE9mKHJlY29yZC5pZCksIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGFyciBvZiB0b1NvcnQpIHtcbiAgICAgICAgY29uc3Qgc2hhcGVzSW5BcnIgPSBjb21wYWN0KGFyci5tYXAoKGlkKSA9PiBzdG9yZS5nZXQoaWQpKSk7XG4gICAgICAgIHNoYXBlc0luQXJyLnNvcnQoc29ydEJ5SW5kZXgpO1xuICAgICAgICBhcnIuc3BsaWNlKDAsIGFyci5sZW5ndGgsIC4uLnNoYXBlc0luQXJyLm1hcCgoc2hhcGUpID0+IHNoYXBlLmlkKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3VmFsdWUgPz8gbGFzdFZhbHVlO1xuICAgIH1cbiAgKTtcbn07XG5leHBvcnQge1xuICBwYXJlbnRzVG9DaGlsZHJlblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcmVudHNUb0NoaWxkcmVuLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/parentsToChildren.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/shapeIdsInCurrentPage.mjs":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/shapeIdsInCurrentPage.mjs ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deriveShapeIdsInCurrentPage: () => (/* binding */ deriveShapeIdsInCurrentPage)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n\n\n\nconst isShapeInPage = (store, pageId, shape) => {\n  while (!(0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isPageId)(shape.parentId)) {\n    const parent = store.get(shape.parentId);\n    if (!parent)\n      return false;\n    shape = parent;\n  }\n  return shape.parentId === pageId;\n};\nconst deriveShapeIdsInCurrentPage = (store, getCurrentPageId) => {\n  const shapesIndex = store.query.ids(\"shape\");\n  let lastPageId = null;\n  function fromScratch() {\n    const currentPageId = getCurrentPageId();\n    lastPageId = currentPageId;\n    return new Set(\n      [...shapesIndex.get()].filter((id) => isShapeInPage(store, currentPageId, store.get(id)))\n    );\n  }\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"_shapeIdsInCurrentPage\", (prevValue, lastComputedEpoch) => {\n    if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(prevValue)) {\n      return fromScratch();\n    }\n    const currentPageId = getCurrentPageId();\n    if (currentPageId !== lastPageId) {\n      return fromScratch();\n    }\n    const diff = store.history.getDiffSince(lastComputedEpoch);\n    if (diff === _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) {\n      return fromScratch();\n    }\n    const builder = new _tldraw_store__WEBPACK_IMPORTED_MODULE_1__.IncrementalSetConstructor(\n      prevValue\n    );\n    for (const changes of diff) {\n      for (const record of Object.values(changes.added)) {\n        if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShape)(record) && isShapeInPage(store, currentPageId, record)) {\n          builder.add(record.id);\n        }\n      }\n      for (const [_from, to] of Object.values(changes.updated)) {\n        if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShape)(to)) {\n          if (isShapeInPage(store, currentPageId, to)) {\n            builder.add(to.id);\n          } else {\n            builder.remove(to.id);\n          }\n        }\n      }\n      for (const id of Object.keys(changes.removed)) {\n        if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_2__.isShapeId)(id)) {\n          builder.remove(id);\n        }\n      }\n    }\n    const result = builder.get();\n    if (!result) {\n      return prevValue;\n    }\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.withDiff)(result.value, result.diff);\n  });\n};\n\n//# sourceMappingURL=shapeIdsInCurrentPage.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9kZXJpdmF0aW9ucy9zaGFwZUlkc0luQ3VycmVudFBhZ2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUY7QUFDdkI7QUFLaEM7QUFDMUI7QUFDQSxVQUFVLDBEQUFRO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVEQUFRO0FBQ2pCLFFBQVEsOERBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQVc7QUFDNUI7QUFDQTtBQUNBLHdCQUF3QixvRUFBeUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHlEQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5REFBTztBQUNuQjtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDJEQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVEQUFRO0FBQ25CLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9kZXJpdmF0aW9ucy9zaGFwZUlkc0luQ3VycmVudFBhZ2UubWpzPzZkYmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tcHV0ZWQsIGlzVW5pbml0aWFsaXplZCwgUkVTRVRfVkFMVUUsIHdpdGhEaWZmIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IEluY3JlbWVudGFsU2V0Q29uc3RydWN0b3IgfSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHtcbiAgaXNQYWdlSWQsXG4gIGlzU2hhcGUsXG4gIGlzU2hhcGVJZFxufSBmcm9tIFwiQHRsZHJhdy90bHNjaGVtYVwiO1xuY29uc3QgaXNTaGFwZUluUGFnZSA9IChzdG9yZSwgcGFnZUlkLCBzaGFwZSkgPT4ge1xuICB3aGlsZSAoIWlzUGFnZUlkKHNoYXBlLnBhcmVudElkKSkge1xuICAgIGNvbnN0IHBhcmVudCA9IHN0b3JlLmdldChzaGFwZS5wYXJlbnRJZCk7XG4gICAgaWYgKCFwYXJlbnQpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgc2hhcGUgPSBwYXJlbnQ7XG4gIH1cbiAgcmV0dXJuIHNoYXBlLnBhcmVudElkID09PSBwYWdlSWQ7XG59O1xuY29uc3QgZGVyaXZlU2hhcGVJZHNJbkN1cnJlbnRQYWdlID0gKHN0b3JlLCBnZXRDdXJyZW50UGFnZUlkKSA9PiB7XG4gIGNvbnN0IHNoYXBlc0luZGV4ID0gc3RvcmUucXVlcnkuaWRzKFwic2hhcGVcIik7XG4gIGxldCBsYXN0UGFnZUlkID0gbnVsbDtcbiAgZnVuY3Rpb24gZnJvbVNjcmF0Y2goKSB7XG4gICAgY29uc3QgY3VycmVudFBhZ2VJZCA9IGdldEN1cnJlbnRQYWdlSWQoKTtcbiAgICBsYXN0UGFnZUlkID0gY3VycmVudFBhZ2VJZDtcbiAgICByZXR1cm4gbmV3IFNldChcbiAgICAgIFsuLi5zaGFwZXNJbmRleC5nZXQoKV0uZmlsdGVyKChpZCkgPT4gaXNTaGFwZUluUGFnZShzdG9yZSwgY3VycmVudFBhZ2VJZCwgc3RvcmUuZ2V0KGlkKSkpXG4gICAgKTtcbiAgfVxuICByZXR1cm4gY29tcHV0ZWQoXCJfc2hhcGVJZHNJbkN1cnJlbnRQYWdlXCIsIChwcmV2VmFsdWUsIGxhc3RDb21wdXRlZEVwb2NoKSA9PiB7XG4gICAgaWYgKGlzVW5pbml0aWFsaXplZChwcmV2VmFsdWUpKSB7XG4gICAgICByZXR1cm4gZnJvbVNjcmF0Y2goKTtcbiAgICB9XG4gICAgY29uc3QgY3VycmVudFBhZ2VJZCA9IGdldEN1cnJlbnRQYWdlSWQoKTtcbiAgICBpZiAoY3VycmVudFBhZ2VJZCAhPT0gbGFzdFBhZ2VJZCkge1xuICAgICAgcmV0dXJuIGZyb21TY3JhdGNoKCk7XG4gICAgfVxuICAgIGNvbnN0IGRpZmYgPSBzdG9yZS5oaXN0b3J5LmdldERpZmZTaW5jZShsYXN0Q29tcHV0ZWRFcG9jaCk7XG4gICAgaWYgKGRpZmYgPT09IFJFU0VUX1ZBTFVFKSB7XG4gICAgICByZXR1cm4gZnJvbVNjcmF0Y2goKTtcbiAgICB9XG4gICAgY29uc3QgYnVpbGRlciA9IG5ldyBJbmNyZW1lbnRhbFNldENvbnN0cnVjdG9yKFxuICAgICAgcHJldlZhbHVlXG4gICAgKTtcbiAgICBmb3IgKGNvbnN0IGNoYW5nZXMgb2YgZGlmZikge1xuICAgICAgZm9yIChjb25zdCByZWNvcmQgb2YgT2JqZWN0LnZhbHVlcyhjaGFuZ2VzLmFkZGVkKSkge1xuICAgICAgICBpZiAoaXNTaGFwZShyZWNvcmQpICYmIGlzU2hhcGVJblBhZ2Uoc3RvcmUsIGN1cnJlbnRQYWdlSWQsIHJlY29yZCkpIHtcbiAgICAgICAgICBidWlsZGVyLmFkZChyZWNvcmQuaWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IFtfZnJvbSwgdG9dIG9mIE9iamVjdC52YWx1ZXMoY2hhbmdlcy51cGRhdGVkKSkge1xuICAgICAgICBpZiAoaXNTaGFwZSh0bykpIHtcbiAgICAgICAgICBpZiAoaXNTaGFwZUluUGFnZShzdG9yZSwgY3VycmVudFBhZ2VJZCwgdG8pKSB7XG4gICAgICAgICAgICBidWlsZGVyLmFkZCh0by5pZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJ1aWxkZXIucmVtb3ZlKHRvLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgaWQgb2YgT2JqZWN0LmtleXMoY2hhbmdlcy5yZW1vdmVkKSkge1xuICAgICAgICBpZiAoaXNTaGFwZUlkKGlkKSkge1xuICAgICAgICAgIGJ1aWxkZXIucmVtb3ZlKGlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBidWlsZGVyLmdldCgpO1xuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICByZXR1cm4gcHJldlZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gd2l0aERpZmYocmVzdWx0LnZhbHVlLCByZXN1bHQuZGlmZik7XG4gIH0pO1xufTtcbmV4cG9ydCB7XG4gIGRlcml2ZVNoYXBlSWRzSW5DdXJyZW50UGFnZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYXBlSWRzSW5DdXJyZW50UGFnZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/derivations/shapeIdsInCurrentPage.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/getSvgJsx.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/getSvgJsx.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSvgJsx: () => (/* binding */ getSvgJsx)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types/SvgExportContext.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/SvgExportContext.mjs\");\n\n\n\n\nasync function getSvgJsx(editor, shapes, opts = {}) {\n  const ids = typeof shapes[0] === \"string\" ? shapes : shapes.map((s) => s.id);\n  if (ids.length === 0)\n    return;\n  if (!window.document)\n    throw Error(\"No document\");\n  const {\n    scale = 1,\n    background = false,\n    padding = editor.options.defaultSvgPadding,\n    preserveAspectRatio = false\n  } = opts;\n  const isDarkMode = opts.darkMode ?? editor.user.getIsDarkMode();\n  const theme = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.getDefaultColorTheme)({ isDarkMode });\n  const shapeIdsToInclude = editor.getShapeAndDescendantIds(ids);\n  const renderingShapes = editor.getUnorderedRenderingShapes(false).filter(({ id }) => shapeIdsToInclude.has(id));\n  let bbox = null;\n  if (opts.bounds) {\n    bbox = opts.bounds;\n  } else {\n    for (const { id } of renderingShapes) {\n      const maskedPageBounds = editor.getShapeMaskedPageBounds(id);\n      if (!maskedPageBounds)\n        continue;\n      if (bbox) {\n        bbox.union(maskedPageBounds);\n      } else {\n        bbox = maskedPageBounds.clone();\n      }\n    }\n  }\n  if (!bbox)\n    return;\n  const singleFrameShapeId = ids.length === 1 && editor.isShapeOfType(editor.getShape(ids[0]), \"frame\") ? ids[0] : null;\n  if (!singleFrameShapeId) {\n    bbox.expandBy(padding);\n  }\n  const w = bbox.width * scale;\n  const h = bbox.height * scale;\n  try {\n    document.body.focus?.();\n  } catch (e) {\n  }\n  const defChildren = [];\n  const exportDefPromisesById = /* @__PURE__ */ new Map();\n  const exportContext = {\n    isDarkMode,\n    addExportDef: (def) => {\n      if (exportDefPromisesById.has(def.key))\n        return;\n      const promise = (async () => {\n        const element = await def.getElement();\n        if (!element)\n          return;\n        defChildren.push(/* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: element }, defChildren.length));\n      })();\n      exportDefPromisesById.set(def.key, promise);\n    }\n  };\n  const unorderedShapeElements = (await Promise.all(\n    renderingShapes.map(async ({ id, opacity, index, backgroundIndex }) => {\n      if (id === singleFrameShapeId)\n        return [];\n      const shape = editor.getShape(id);\n      if (editor.isShapeOfType(shape, \"group\"))\n        return [];\n      const util = editor.getShapeUtil(shape);\n      let toSvgResult = await util.toSvg?.(shape, exportContext);\n      let toBackgroundSvgResult = await util.toBackgroundSvg?.(shape, exportContext);\n      if (!toSvgResult && !toBackgroundSvgResult) {\n        const bounds = editor.getShapePageBounds(shape);\n        toSvgResult = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n          \"rect\",\n          {\n            width: bounds.w,\n            height: bounds.h,\n            fill: theme.solid,\n            stroke: theme.grey.pattern,\n            strokeWidth: 1\n          }\n        );\n      }\n      let pageTransform = editor.getShapePageTransform(shape).toCssString();\n      if (\"scale\" in shape.props) {\n        if (shape.props.scale !== 1) {\n          pageTransform = `${pageTransform} scale(${shape.props.scale}, ${shape.props.scale})`;\n        }\n      }\n      if (toSvgResult) {\n        toSvgResult = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { transform: pageTransform, opacity, children: toSvgResult }, shape.id);\n      }\n      if (toBackgroundSvgResult) {\n        toBackgroundSvgResult = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { transform: pageTransform, opacity, children: toBackgroundSvgResult }, `bg_${shape.id}`);\n      }\n      const pageMask = editor.getShapeMask(shape.id);\n      if (pageMask) {\n        const pageMaskId = `mask_${shape.id.replace(\":\", \"_\")}`;\n        defChildren.push(\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"clipPath\", { id: pageMaskId, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"path\", { d: `M${pageMask.map(({ x, y }) => `${x},${y}`).join(\"L\")}Z` }) }, defChildren.length)\n        );\n        if (toSvgResult) {\n          toSvgResult = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { clipPath: `url(#${pageMaskId})`, children: toSvgResult }, shape.id);\n        }\n        if (toBackgroundSvgResult) {\n          toBackgroundSvgResult = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { clipPath: `url(#${pageMaskId})`, children: toBackgroundSvgResult }, `bg_${shape.id}`);\n        }\n      }\n      const elements = [];\n      if (toSvgResult) {\n        elements.push({ zIndex: index, element: toSvgResult });\n      }\n      if (toBackgroundSvgResult) {\n        elements.push({ zIndex: backgroundIndex, element: toBackgroundSvgResult });\n      }\n      return elements;\n    })\n  )).flat();\n  await Promise.all(exportDefPromisesById.values());\n  const svg = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_3__.SvgExportContextProvider, { editor, context: exportContext, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\n    \"svg\",\n    {\n      preserveAspectRatio: preserveAspectRatio ? preserveAspectRatio : void 0,\n      direction: \"ltr\",\n      width: w,\n      height: h,\n      viewBox: `${bbox.minX} ${bbox.minY} ${bbox.width} ${bbox.height}`,\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      style: {\n        backgroundColor: background ? singleFrameShapeId ? theme.solid : theme.background : \"transparent\"\n      },\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"defs\", { children: defChildren }),\n        unorderedShapeElements.sort((a, b) => a.zIndex - b.zIndex).map(({ element }) => element)\n      ]\n    }\n  ) });\n  return { jsx: svg, width: w, height: h };\n}\n\n//# sourceMappingURL=getSvgJsx.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9nZXRTdmdKc3gubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThDO0FBR3BCO0FBQ087QUFDdUM7QUFDeEUsa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsZ0JBQWdCLHNFQUFvQixHQUFHLFlBQVk7QUFDbkQ7QUFDQSw4RUFBOEUsSUFBSTtBQUNsRjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osaUJBQWlCLEtBQUs7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxzREFBRyxDQUFDLDJDQUFRLElBQUksbUJBQW1CO0FBQzVFLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxxQ0FBcUM7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msc0RBQUc7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsZUFBZSxRQUFRLGtCQUFrQixJQUFJLGtCQUFrQjtBQUM1RjtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msc0RBQUcsUUFBUSwwREFBMEQ7QUFDM0c7QUFDQTtBQUNBLGdEQUFnRCxzREFBRyxRQUFRLG9FQUFvRSxRQUFRLFNBQVM7QUFDaEo7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDJCQUEyQjtBQUM5RDtBQUNBLDBCQUEwQixzREFBRyxlQUFlLDBDQUEwQyxzREFBRyxXQUFXLE9BQU8sZ0JBQWdCLE1BQU0sUUFBUSxFQUFFLEdBQUcsRUFBRSxhQUFhLElBQUksR0FBRztBQUNwSztBQUNBO0FBQ0Esd0NBQXdDLHNEQUFHLFFBQVEsa0JBQWtCLFdBQVcsMkJBQTJCO0FBQzNHO0FBQ0E7QUFDQSxrREFBa0Qsc0RBQUcsUUFBUSxrQkFBa0IsV0FBVyxxQ0FBcUMsUUFBUSxTQUFTO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFDQUFxQztBQUM3RDtBQUNBO0FBQ0Esd0JBQXdCLHlEQUF5RDtBQUNqRjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSw4QkFBOEIsc0RBQUcsQ0FBQyxpRkFBd0IsSUFBSSwwREFBMEQsdURBQUk7QUFDNUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFdBQVcsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLFlBQVk7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx3QkFBd0Isc0RBQUcsV0FBVyx1QkFBdUI7QUFDN0QsMEVBQTBFLFNBQVM7QUFDbkY7QUFDQTtBQUNBLEtBQUs7QUFDTCxXQUFXO0FBQ1g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvZ2V0U3ZnSnN4Lm1qcz80YjI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHtcbiAgZ2V0RGVmYXVsdENvbG9yVGhlbWVcbn0gZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmltcG9ydCB7IEZyYWdtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBTdmdFeHBvcnRDb250ZXh0UHJvdmlkZXIgfSBmcm9tIFwiLi90eXBlcy9TdmdFeHBvcnRDb250ZXh0Lm1qc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0U3ZnSnN4KGVkaXRvciwgc2hhcGVzLCBvcHRzID0ge30pIHtcbiAgY29uc3QgaWRzID0gdHlwZW9mIHNoYXBlc1swXSA9PT0gXCJzdHJpbmdcIiA/IHNoYXBlcyA6IHNoYXBlcy5tYXAoKHMpID0+IHMuaWQpO1xuICBpZiAoaWRzLmxlbmd0aCA9PT0gMClcbiAgICByZXR1cm47XG4gIGlmICghd2luZG93LmRvY3VtZW50KVxuICAgIHRocm93IEVycm9yKFwiTm8gZG9jdW1lbnRcIik7XG4gIGNvbnN0IHtcbiAgICBzY2FsZSA9IDEsXG4gICAgYmFja2dyb3VuZCA9IGZhbHNlLFxuICAgIHBhZGRpbmcgPSBlZGl0b3Iub3B0aW9ucy5kZWZhdWx0U3ZnUGFkZGluZyxcbiAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvID0gZmFsc2VcbiAgfSA9IG9wdHM7XG4gIGNvbnN0IGlzRGFya01vZGUgPSBvcHRzLmRhcmtNb2RlID8/IGVkaXRvci51c2VyLmdldElzRGFya01vZGUoKTtcbiAgY29uc3QgdGhlbWUgPSBnZXREZWZhdWx0Q29sb3JUaGVtZSh7IGlzRGFya01vZGUgfSk7XG4gIGNvbnN0IHNoYXBlSWRzVG9JbmNsdWRlID0gZWRpdG9yLmdldFNoYXBlQW5kRGVzY2VuZGFudElkcyhpZHMpO1xuICBjb25zdCByZW5kZXJpbmdTaGFwZXMgPSBlZGl0b3IuZ2V0VW5vcmRlcmVkUmVuZGVyaW5nU2hhcGVzKGZhbHNlKS5maWx0ZXIoKHsgaWQgfSkgPT4gc2hhcGVJZHNUb0luY2x1ZGUuaGFzKGlkKSk7XG4gIGxldCBiYm94ID0gbnVsbDtcbiAgaWYgKG9wdHMuYm91bmRzKSB7XG4gICAgYmJveCA9IG9wdHMuYm91bmRzO1xuICB9IGVsc2Uge1xuICAgIGZvciAoY29uc3QgeyBpZCB9IG9mIHJlbmRlcmluZ1NoYXBlcykge1xuICAgICAgY29uc3QgbWFza2VkUGFnZUJvdW5kcyA9IGVkaXRvci5nZXRTaGFwZU1hc2tlZFBhZ2VCb3VuZHMoaWQpO1xuICAgICAgaWYgKCFtYXNrZWRQYWdlQm91bmRzKVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIGlmIChiYm94KSB7XG4gICAgICAgIGJib3gudW5pb24obWFza2VkUGFnZUJvdW5kcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiYm94ID0gbWFza2VkUGFnZUJvdW5kcy5jbG9uZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoIWJib3gpXG4gICAgcmV0dXJuO1xuICBjb25zdCBzaW5nbGVGcmFtZVNoYXBlSWQgPSBpZHMubGVuZ3RoID09PSAxICYmIGVkaXRvci5pc1NoYXBlT2ZUeXBlKGVkaXRvci5nZXRTaGFwZShpZHNbMF0pLCBcImZyYW1lXCIpID8gaWRzWzBdIDogbnVsbDtcbiAgaWYgKCFzaW5nbGVGcmFtZVNoYXBlSWQpIHtcbiAgICBiYm94LmV4cGFuZEJ5KHBhZGRpbmcpO1xuICB9XG4gIGNvbnN0IHcgPSBiYm94LndpZHRoICogc2NhbGU7XG4gIGNvbnN0IGggPSBiYm94LmhlaWdodCAqIHNjYWxlO1xuICB0cnkge1xuICAgIGRvY3VtZW50LmJvZHkuZm9jdXM/LigpO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgY29uc3QgZGVmQ2hpbGRyZW4gPSBbXTtcbiAgY29uc3QgZXhwb3J0RGVmUHJvbWlzZXNCeUlkID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgY29uc3QgZXhwb3J0Q29udGV4dCA9IHtcbiAgICBpc0RhcmtNb2RlLFxuICAgIGFkZEV4cG9ydERlZjogKGRlZikgPT4ge1xuICAgICAgaWYgKGV4cG9ydERlZlByb21pc2VzQnlJZC5oYXMoZGVmLmtleSkpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IHByb21pc2UgPSAoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gYXdhaXQgZGVmLmdldEVsZW1lbnQoKTtcbiAgICAgICAgaWYgKCFlbGVtZW50KVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZGVmQ2hpbGRyZW4ucHVzaCgvKiBAX19QVVJFX18gKi8ganN4KEZyYWdtZW50LCB7IGNoaWxkcmVuOiBlbGVtZW50IH0sIGRlZkNoaWxkcmVuLmxlbmd0aCkpO1xuICAgICAgfSkoKTtcbiAgICAgIGV4cG9ydERlZlByb21pc2VzQnlJZC5zZXQoZGVmLmtleSwgcHJvbWlzZSk7XG4gICAgfVxuICB9O1xuICBjb25zdCB1bm9yZGVyZWRTaGFwZUVsZW1lbnRzID0gKGF3YWl0IFByb21pc2UuYWxsKFxuICAgIHJlbmRlcmluZ1NoYXBlcy5tYXAoYXN5bmMgKHsgaWQsIG9wYWNpdHksIGluZGV4LCBiYWNrZ3JvdW5kSW5kZXggfSkgPT4ge1xuICAgICAgaWYgKGlkID09PSBzaW5nbGVGcmFtZVNoYXBlSWQpXG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIGNvbnN0IHNoYXBlID0gZWRpdG9yLmdldFNoYXBlKGlkKTtcbiAgICAgIGlmIChlZGl0b3IuaXNTaGFwZU9mVHlwZShzaGFwZSwgXCJncm91cFwiKSlcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgY29uc3QgdXRpbCA9IGVkaXRvci5nZXRTaGFwZVV0aWwoc2hhcGUpO1xuICAgICAgbGV0IHRvU3ZnUmVzdWx0ID0gYXdhaXQgdXRpbC50b1N2Zz8uKHNoYXBlLCBleHBvcnRDb250ZXh0KTtcbiAgICAgIGxldCB0b0JhY2tncm91bmRTdmdSZXN1bHQgPSBhd2FpdCB1dGlsLnRvQmFja2dyb3VuZFN2Zz8uKHNoYXBlLCBleHBvcnRDb250ZXh0KTtcbiAgICAgIGlmICghdG9TdmdSZXN1bHQgJiYgIXRvQmFja2dyb3VuZFN2Z1Jlc3VsdCkge1xuICAgICAgICBjb25zdCBib3VuZHMgPSBlZGl0b3IuZ2V0U2hhcGVQYWdlQm91bmRzKHNoYXBlKTtcbiAgICAgICAgdG9TdmdSZXN1bHQgPSAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgICAgIFwicmVjdFwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHdpZHRoOiBib3VuZHMudyxcbiAgICAgICAgICAgIGhlaWdodDogYm91bmRzLmgsXG4gICAgICAgICAgICBmaWxsOiB0aGVtZS5zb2xpZCxcbiAgICAgICAgICAgIHN0cm9rZTogdGhlbWUuZ3JleS5wYXR0ZXJuLFxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDFcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBsZXQgcGFnZVRyYW5zZm9ybSA9IGVkaXRvci5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGUpLnRvQ3NzU3RyaW5nKCk7XG4gICAgICBpZiAoXCJzY2FsZVwiIGluIHNoYXBlLnByb3BzKSB7XG4gICAgICAgIGlmIChzaGFwZS5wcm9wcy5zY2FsZSAhPT0gMSkge1xuICAgICAgICAgIHBhZ2VUcmFuc2Zvcm0gPSBgJHtwYWdlVHJhbnNmb3JtfSBzY2FsZSgke3NoYXBlLnByb3BzLnNjYWxlfSwgJHtzaGFwZS5wcm9wcy5zY2FsZX0pYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRvU3ZnUmVzdWx0KSB7XG4gICAgICAgIHRvU3ZnUmVzdWx0ID0gLyogQF9fUFVSRV9fICovIGpzeChcImdcIiwgeyB0cmFuc2Zvcm06IHBhZ2VUcmFuc2Zvcm0sIG9wYWNpdHksIGNoaWxkcmVuOiB0b1N2Z1Jlc3VsdCB9LCBzaGFwZS5pZCk7XG4gICAgICB9XG4gICAgICBpZiAodG9CYWNrZ3JvdW5kU3ZnUmVzdWx0KSB7XG4gICAgICAgIHRvQmFja2dyb3VuZFN2Z1Jlc3VsdCA9IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJnXCIsIHsgdHJhbnNmb3JtOiBwYWdlVHJhbnNmb3JtLCBvcGFjaXR5LCBjaGlsZHJlbjogdG9CYWNrZ3JvdW5kU3ZnUmVzdWx0IH0sIGBiZ18ke3NoYXBlLmlkfWApO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFnZU1hc2sgPSBlZGl0b3IuZ2V0U2hhcGVNYXNrKHNoYXBlLmlkKTtcbiAgICAgIGlmIChwYWdlTWFzaykge1xuICAgICAgICBjb25zdCBwYWdlTWFza0lkID0gYG1hc2tfJHtzaGFwZS5pZC5yZXBsYWNlKFwiOlwiLCBcIl9cIil9YDtcbiAgICAgICAgZGVmQ2hpbGRyZW4ucHVzaChcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwiY2xpcFBhdGhcIiwgeyBpZDogcGFnZU1hc2tJZCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJwYXRoXCIsIHsgZDogYE0ke3BhZ2VNYXNrLm1hcCgoeyB4LCB5IH0pID0+IGAke3h9LCR7eX1gKS5qb2luKFwiTFwiKX1aYCB9KSB9LCBkZWZDaGlsZHJlbi5sZW5ndGgpXG4gICAgICAgICk7XG4gICAgICAgIGlmICh0b1N2Z1Jlc3VsdCkge1xuICAgICAgICAgIHRvU3ZnUmVzdWx0ID0gLyogQF9fUFVSRV9fICovIGpzeChcImdcIiwgeyBjbGlwUGF0aDogYHVybCgjJHtwYWdlTWFza0lkfSlgLCBjaGlsZHJlbjogdG9TdmdSZXN1bHQgfSwgc2hhcGUuaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b0JhY2tncm91bmRTdmdSZXN1bHQpIHtcbiAgICAgICAgICB0b0JhY2tncm91bmRTdmdSZXN1bHQgPSAvKiBAX19QVVJFX18gKi8ganN4KFwiZ1wiLCB7IGNsaXBQYXRoOiBgdXJsKCMke3BhZ2VNYXNrSWR9KWAsIGNoaWxkcmVuOiB0b0JhY2tncm91bmRTdmdSZXN1bHQgfSwgYGJnXyR7c2hhcGUuaWR9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGVsZW1lbnRzID0gW107XG4gICAgICBpZiAodG9TdmdSZXN1bHQpIHtcbiAgICAgICAgZWxlbWVudHMucHVzaCh7IHpJbmRleDogaW5kZXgsIGVsZW1lbnQ6IHRvU3ZnUmVzdWx0IH0pO1xuICAgICAgfVxuICAgICAgaWYgKHRvQmFja2dyb3VuZFN2Z1Jlc3VsdCkge1xuICAgICAgICBlbGVtZW50cy5wdXNoKHsgekluZGV4OiBiYWNrZ3JvdW5kSW5kZXgsIGVsZW1lbnQ6IHRvQmFja2dyb3VuZFN2Z1Jlc3VsdCB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbGVtZW50cztcbiAgICB9KVxuICApKS5mbGF0KCk7XG4gIGF3YWl0IFByb21pc2UuYWxsKGV4cG9ydERlZlByb21pc2VzQnlJZC52YWx1ZXMoKSk7XG4gIGNvbnN0IHN2ZyA9IC8qIEBfX1BVUkVfXyAqLyBqc3goU3ZnRXhwb3J0Q29udGV4dFByb3ZpZGVyLCB7IGVkaXRvciwgY29udGV4dDogZXhwb3J0Q29udGV4dCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hzKFxuICAgIFwic3ZnXCIsXG4gICAge1xuICAgICAgcHJlc2VydmVBc3BlY3RSYXRpbzogcHJlc2VydmVBc3BlY3RSYXRpbyA/IHByZXNlcnZlQXNwZWN0UmF0aW8gOiB2b2lkIDAsXG4gICAgICBkaXJlY3Rpb246IFwibHRyXCIsXG4gICAgICB3aWR0aDogdyxcbiAgICAgIGhlaWdodDogaCxcbiAgICAgIHZpZXdCb3g6IGAke2Jib3gubWluWH0gJHtiYm94Lm1pbll9ICR7YmJveC53aWR0aH0gJHtiYm94LmhlaWdodH1gLFxuICAgICAgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLFxuICAgICAgc3Ryb2tlTGluZWpvaW46IFwicm91bmRcIixcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZCA/IHNpbmdsZUZyYW1lU2hhcGVJZCA/IHRoZW1lLnNvbGlkIDogdGhlbWUuYmFja2dyb3VuZCA6IFwidHJhbnNwYXJlbnRcIlxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkZWZzXCIsIHsgY2hpbGRyZW46IGRlZkNoaWxkcmVuIH0pLFxuICAgICAgICB1bm9yZGVyZWRTaGFwZUVsZW1lbnRzLnNvcnQoKGEsIGIpID0+IGEuekluZGV4IC0gYi56SW5kZXgpLm1hcCgoeyBlbGVtZW50IH0pID0+IGVsZW1lbnQpXG4gICAgICBdXG4gICAgfVxuICApIH0pO1xuICByZXR1cm4geyBqc3g6IHN2Zywgd2lkdGg6IHcsIGhlaWdodDogaCB9O1xufVxuZXhwb3J0IHtcbiAgZ2V0U3ZnSnN4XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0U3ZnSnN4Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/getSvgJsx.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ClickManager.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ClickManager.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClickManager: () => (/* binding */ ClickManager)\n/* harmony export */ });\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/uniqueId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs\");\n\n\nconst MAX_CLICK_DISTANCE = 40;\nclass ClickManager {\n  constructor(editor) {\n    this.editor = editor;\n  }\n  _clickId = \"\";\n  _clickTimeout;\n  _clickScreenPoint;\n  _previousScreenPoint;\n  _getClickTimeout = (state, id = (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_1__.uniqueId)()) => {\n    this._clickId = id;\n    clearTimeout(this._clickTimeout);\n    this._clickTimeout = this.editor.timers.setTimeout(\n      () => {\n        if (this._clickState === state && this._clickId === id) {\n          switch (this._clickState) {\n            case \"pendingTriple\": {\n              this.editor.dispatch({\n                ...this.lastPointerInfo,\n                type: \"click\",\n                name: \"double_click\",\n                phase: \"settle\"\n              });\n              break;\n            }\n            case \"pendingQuadruple\": {\n              this.editor.dispatch({\n                ...this.lastPointerInfo,\n                type: \"click\",\n                name: \"triple_click\",\n                phase: \"settle\"\n              });\n              break;\n            }\n            case \"pendingOverflow\": {\n              this.editor.dispatch({\n                ...this.lastPointerInfo,\n                type: \"click\",\n                name: \"quadruple_click\",\n                phase: \"settle\"\n              });\n              break;\n            }\n            default: {\n            }\n          }\n          this._clickState = \"idle\";\n        }\n      },\n      state === \"idle\" || state === \"pendingDouble\" ? this.editor.options.doubleClickDurationMs : this.editor.options.multiClickDurationMs\n    );\n  };\n  /**\n   * The current click state.\n   *\n   * @internal\n   */\n  _clickState = \"idle\";\n  /**\n   * The current click state.\n   *\n   * @public\n   */\n  // eslint-disable-next-line no-restricted-syntax\n  get clickState() {\n    return this._clickState;\n  }\n  lastPointerInfo = {};\n  handlePointerEvent = (info) => {\n    switch (info.name) {\n      case \"pointer_down\": {\n        if (!this._clickState)\n          return info;\n        this._clickScreenPoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.From(info.point);\n        if (this._previousScreenPoint && _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist2(this._previousScreenPoint, this._clickScreenPoint) > MAX_CLICK_DISTANCE ** 2) {\n          this._clickState = \"idle\";\n        }\n        this._previousScreenPoint = this._clickScreenPoint;\n        this.lastPointerInfo = info;\n        switch (this._clickState) {\n          case \"pendingDouble\": {\n            this._clickState = \"pendingTriple\";\n            this._clickTimeout = this._getClickTimeout(this._clickState);\n            return {\n              ...info,\n              type: \"click\",\n              name: \"double_click\",\n              phase: \"down\"\n            };\n          }\n          case \"pendingTriple\": {\n            this._clickState = \"pendingQuadruple\";\n            this._clickTimeout = this._getClickTimeout(this._clickState);\n            return {\n              ...info,\n              type: \"click\",\n              name: \"triple_click\",\n              phase: \"down\"\n            };\n          }\n          case \"pendingQuadruple\": {\n            this._clickState = \"pendingOverflow\";\n            this._clickTimeout = this._getClickTimeout(this._clickState);\n            return {\n              ...info,\n              type: \"click\",\n              name: \"quadruple_click\",\n              phase: \"down\"\n            };\n          }\n          case \"idle\": {\n            this._clickState = \"pendingDouble\";\n            break;\n          }\n          case \"pendingOverflow\": {\n            this._clickState = \"overflow\";\n            break;\n          }\n          default: {\n          }\n        }\n        this._clickTimeout = this._getClickTimeout(this._clickState);\n        return info;\n      }\n      case \"pointer_up\": {\n        if (!this._clickState)\n          return info;\n        this._clickScreenPoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.From(info.point);\n        switch (this._clickState) {\n          case \"pendingTriple\": {\n            return {\n              ...this.lastPointerInfo,\n              type: \"click\",\n              name: \"double_click\",\n              phase: \"up\"\n            };\n          }\n          case \"pendingQuadruple\": {\n            return {\n              ...this.lastPointerInfo,\n              type: \"click\",\n              name: \"triple_click\",\n              phase: \"up\"\n            };\n          }\n          case \"pendingOverflow\": {\n            return {\n              ...this.lastPointerInfo,\n              type: \"click\",\n              name: \"quadruple_click\",\n              phase: \"up\"\n            };\n          }\n          default: {\n          }\n        }\n        return info;\n      }\n      case \"pointer_move\": {\n        if (this._clickState !== \"idle\" && this._clickScreenPoint && _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist2(this._clickScreenPoint, this.editor.inputs.currentScreenPoint) > (this.editor.getInstanceState().isCoarsePointer ? this.editor.options.coarseDragDistanceSquared : this.editor.options.dragDistanceSquared)) {\n          this.cancelDoubleClickTimeout();\n        }\n        return info;\n      }\n    }\n    return info;\n  };\n  /**\n   * Cancel the double click timeout.\n   *\n   * @internal\n   */\n  cancelDoubleClickTimeout = () => {\n    this._clickTimeout = clearTimeout(this._clickTimeout);\n    this._clickState = \"idle\";\n  };\n}\n\n//# sourceMappingURL=ClickManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9DbGlja01hbmFnZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQztBQUNLO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw2REFBUTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxvREFBRztBQUNwQyx5Q0FBeUMsb0RBQUc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsb0RBQUc7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsb0RBQUc7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9DbGlja01hbmFnZXIubWpzPzU2OGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uLy4uL3ByaW1pdGl2ZXMvVmVjLm1qc1wiO1xuaW1wb3J0IHsgdW5pcXVlSWQgfSBmcm9tIFwiLi4vLi4vdXRpbHMvdW5pcXVlSWQubWpzXCI7XG5jb25zdCBNQVhfQ0xJQ0tfRElTVEFOQ0UgPSA0MDtcbmNsYXNzIENsaWNrTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKGVkaXRvcikge1xuICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICB9XG4gIF9jbGlja0lkID0gXCJcIjtcbiAgX2NsaWNrVGltZW91dDtcbiAgX2NsaWNrU2NyZWVuUG9pbnQ7XG4gIF9wcmV2aW91c1NjcmVlblBvaW50O1xuICBfZ2V0Q2xpY2tUaW1lb3V0ID0gKHN0YXRlLCBpZCA9IHVuaXF1ZUlkKCkpID0+IHtcbiAgICB0aGlzLl9jbGlja0lkID0gaWQ7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX2NsaWNrVGltZW91dCk7XG4gICAgdGhpcy5fY2xpY2tUaW1lb3V0ID0gdGhpcy5lZGl0b3IudGltZXJzLnNldFRpbWVvdXQoXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLl9jbGlja1N0YXRlID09PSBzdGF0ZSAmJiB0aGlzLl9jbGlja0lkID09PSBpZCkge1xuICAgICAgICAgIHN3aXRjaCAodGhpcy5fY2xpY2tTdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBcInBlbmRpbmdUcmlwbGVcIjoge1xuICAgICAgICAgICAgICB0aGlzLmVkaXRvci5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5sYXN0UG9pbnRlckluZm8sXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjbGlja1wiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiZG91YmxlX2NsaWNrXCIsXG4gICAgICAgICAgICAgICAgcGhhc2U6IFwic2V0dGxlXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInBlbmRpbmdRdWFkcnVwbGVcIjoge1xuICAgICAgICAgICAgICB0aGlzLmVkaXRvci5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5sYXN0UG9pbnRlckluZm8sXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjbGlja1wiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwidHJpcGxlX2NsaWNrXCIsXG4gICAgICAgICAgICAgICAgcGhhc2U6IFwic2V0dGxlXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInBlbmRpbmdPdmVyZmxvd1wiOiB7XG4gICAgICAgICAgICAgIHRoaXMuZWRpdG9yLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmxhc3RQb2ludGVySW5mbyxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImNsaWNrXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJxdWFkcnVwbGVfY2xpY2tcIixcbiAgICAgICAgICAgICAgICBwaGFzZTogXCJzZXR0bGVcIlxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX2NsaWNrU3RhdGUgPSBcImlkbGVcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHN0YXRlID09PSBcImlkbGVcIiB8fCBzdGF0ZSA9PT0gXCJwZW5kaW5nRG91YmxlXCIgPyB0aGlzLmVkaXRvci5vcHRpb25zLmRvdWJsZUNsaWNrRHVyYXRpb25NcyA6IHRoaXMuZWRpdG9yLm9wdGlvbnMubXVsdGlDbGlja0R1cmF0aW9uTXNcbiAgICApO1xuICB9O1xuICAvKipcbiAgICogVGhlIGN1cnJlbnQgY2xpY2sgc3RhdGUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX2NsaWNrU3RhdGUgPSBcImlkbGVcIjtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IGNsaWNrIHN0YXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IGNsaWNrU3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWNrU3RhdGU7XG4gIH1cbiAgbGFzdFBvaW50ZXJJbmZvID0ge307XG4gIGhhbmRsZVBvaW50ZXJFdmVudCA9IChpbmZvKSA9PiB7XG4gICAgc3dpdGNoIChpbmZvLm5hbWUpIHtcbiAgICAgIGNhc2UgXCJwb2ludGVyX2Rvd25cIjoge1xuICAgICAgICBpZiAoIXRoaXMuX2NsaWNrU3RhdGUpXG4gICAgICAgICAgcmV0dXJuIGluZm87XG4gICAgICAgIHRoaXMuX2NsaWNrU2NyZWVuUG9pbnQgPSBWZWMuRnJvbShpbmZvLnBvaW50KTtcbiAgICAgICAgaWYgKHRoaXMuX3ByZXZpb3VzU2NyZWVuUG9pbnQgJiYgVmVjLkRpc3QyKHRoaXMuX3ByZXZpb3VzU2NyZWVuUG9pbnQsIHRoaXMuX2NsaWNrU2NyZWVuUG9pbnQpID4gTUFYX0NMSUNLX0RJU1RBTkNFICoqIDIpIHtcbiAgICAgICAgICB0aGlzLl9jbGlja1N0YXRlID0gXCJpZGxlXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcHJldmlvdXNTY3JlZW5Qb2ludCA9IHRoaXMuX2NsaWNrU2NyZWVuUG9pbnQ7XG4gICAgICAgIHRoaXMubGFzdFBvaW50ZXJJbmZvID0gaW5mbztcbiAgICAgICAgc3dpdGNoICh0aGlzLl9jbGlja1N0YXRlKSB7XG4gICAgICAgICAgY2FzZSBcInBlbmRpbmdEb3VibGVcIjoge1xuICAgICAgICAgICAgdGhpcy5fY2xpY2tTdGF0ZSA9IFwicGVuZGluZ1RyaXBsZVwiO1xuICAgICAgICAgICAgdGhpcy5fY2xpY2tUaW1lb3V0ID0gdGhpcy5fZ2V0Q2xpY2tUaW1lb3V0KHRoaXMuX2NsaWNrU3RhdGUpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uaW5mbyxcbiAgICAgICAgICAgICAgdHlwZTogXCJjbGlja1wiLFxuICAgICAgICAgICAgICBuYW1lOiBcImRvdWJsZV9jbGlja1wiLFxuICAgICAgICAgICAgICBwaGFzZTogXCJkb3duXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJwZW5kaW5nVHJpcGxlXCI6IHtcbiAgICAgICAgICAgIHRoaXMuX2NsaWNrU3RhdGUgPSBcInBlbmRpbmdRdWFkcnVwbGVcIjtcbiAgICAgICAgICAgIHRoaXMuX2NsaWNrVGltZW91dCA9IHRoaXMuX2dldENsaWNrVGltZW91dCh0aGlzLl9jbGlja1N0YXRlKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmluZm8sXG4gICAgICAgICAgICAgIHR5cGU6IFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgbmFtZTogXCJ0cmlwbGVfY2xpY2tcIixcbiAgICAgICAgICAgICAgcGhhc2U6IFwiZG93blwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwicGVuZGluZ1F1YWRydXBsZVwiOiB7XG4gICAgICAgICAgICB0aGlzLl9jbGlja1N0YXRlID0gXCJwZW5kaW5nT3ZlcmZsb3dcIjtcbiAgICAgICAgICAgIHRoaXMuX2NsaWNrVGltZW91dCA9IHRoaXMuX2dldENsaWNrVGltZW91dCh0aGlzLl9jbGlja1N0YXRlKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmluZm8sXG4gICAgICAgICAgICAgIHR5cGU6IFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgbmFtZTogXCJxdWFkcnVwbGVfY2xpY2tcIixcbiAgICAgICAgICAgICAgcGhhc2U6IFwiZG93blwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiaWRsZVwiOiB7XG4gICAgICAgICAgICB0aGlzLl9jbGlja1N0YXRlID0gXCJwZW5kaW5nRG91YmxlXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInBlbmRpbmdPdmVyZmxvd1wiOiB7XG4gICAgICAgICAgICB0aGlzLl9jbGlja1N0YXRlID0gXCJvdmVyZmxvd1wiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2xpY2tUaW1lb3V0ID0gdGhpcy5fZ2V0Q2xpY2tUaW1lb3V0KHRoaXMuX2NsaWNrU3RhdGUpO1xuICAgICAgICByZXR1cm4gaW5mbztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJwb2ludGVyX3VwXCI6IHtcbiAgICAgICAgaWYgKCF0aGlzLl9jbGlja1N0YXRlKVxuICAgICAgICAgIHJldHVybiBpbmZvO1xuICAgICAgICB0aGlzLl9jbGlja1NjcmVlblBvaW50ID0gVmVjLkZyb20oaW5mby5wb2ludCk7XG4gICAgICAgIHN3aXRjaCAodGhpcy5fY2xpY2tTdGF0ZSkge1xuICAgICAgICAgIGNhc2UgXCJwZW5kaW5nVHJpcGxlXCI6IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLnRoaXMubGFzdFBvaW50ZXJJbmZvLFxuICAgICAgICAgICAgICB0eXBlOiBcImNsaWNrXCIsXG4gICAgICAgICAgICAgIG5hbWU6IFwiZG91YmxlX2NsaWNrXCIsXG4gICAgICAgICAgICAgIHBoYXNlOiBcInVwXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJwZW5kaW5nUXVhZHJ1cGxlXCI6IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLnRoaXMubGFzdFBvaW50ZXJJbmZvLFxuICAgICAgICAgICAgICB0eXBlOiBcImNsaWNrXCIsXG4gICAgICAgICAgICAgIG5hbWU6IFwidHJpcGxlX2NsaWNrXCIsXG4gICAgICAgICAgICAgIHBoYXNlOiBcInVwXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJwZW5kaW5nT3ZlcmZsb3dcIjoge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4udGhpcy5sYXN0UG9pbnRlckluZm8sXG4gICAgICAgICAgICAgIHR5cGU6IFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgbmFtZTogXCJxdWFkcnVwbGVfY2xpY2tcIixcbiAgICAgICAgICAgICAgcGhhc2U6IFwidXBcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5mbztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJwb2ludGVyX21vdmVcIjoge1xuICAgICAgICBpZiAodGhpcy5fY2xpY2tTdGF0ZSAhPT0gXCJpZGxlXCIgJiYgdGhpcy5fY2xpY2tTY3JlZW5Qb2ludCAmJiBWZWMuRGlzdDIodGhpcy5fY2xpY2tTY3JlZW5Qb2ludCwgdGhpcy5lZGl0b3IuaW5wdXRzLmN1cnJlbnRTY3JlZW5Qb2ludCkgPiAodGhpcy5lZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzQ29hcnNlUG9pbnRlciA/IHRoaXMuZWRpdG9yLm9wdGlvbnMuY29hcnNlRHJhZ0Rpc3RhbmNlU3F1YXJlZCA6IHRoaXMuZWRpdG9yLm9wdGlvbnMuZHJhZ0Rpc3RhbmNlU3F1YXJlZCkpIHtcbiAgICAgICAgICB0aGlzLmNhbmNlbERvdWJsZUNsaWNrVGltZW91dCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmZvO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaW5mbztcbiAgfTtcbiAgLyoqXG4gICAqIENhbmNlbCB0aGUgZG91YmxlIGNsaWNrIHRpbWVvdXQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY2FuY2VsRG91YmxlQ2xpY2tUaW1lb3V0ID0gKCkgPT4ge1xuICAgIHRoaXMuX2NsaWNrVGltZW91dCA9IGNsZWFyVGltZW91dCh0aGlzLl9jbGlja1RpbWVvdXQpO1xuICAgIHRoaXMuX2NsaWNrU3RhdGUgPSBcImlkbGVcIjtcbiAgfTtcbn1cbmV4cG9ydCB7XG4gIENsaWNrTWFuYWdlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNsaWNrTWFuYWdlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ClickManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/EnvironmentManager.mjs":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/EnvironmentManager.mjs ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EnvironmentManager: () => (/* binding */ EnvironmentManager)\n/* harmony export */ });\nclass EnvironmentManager {\n  constructor(editor) {\n    this.editor = editor;\n    if (typeof window !== \"undefined\" && \"navigator\" in window) {\n      this.isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n      this.isIos = !!navigator.userAgent.match(/iPad/i) || !!navigator.userAgent.match(/iPhone/i);\n      this.isChromeForIos = /crios.*safari/i.test(navigator.userAgent);\n      this.isFirefox = /firefox/i.test(navigator.userAgent);\n      this.isAndroid = /android/i.test(navigator.userAgent);\n    } else {\n      this.isSafari = false;\n      this.isIos = false;\n      this.isChromeForIos = false;\n      this.isFirefox = false;\n      this.isAndroid = false;\n    }\n  }\n  /**\n   * Whether the editor is running in Safari.\n   *\n   * @public\n   */\n  isSafari;\n  /**\n   * Whether the editor is running on iOS.\n   *\n   * @public\n   */\n  isIos;\n  /**\n   * Whether the editor is running on iOS.\n   *\n   * @public\n   */\n  isChromeForIos;\n  /**\n   * Whether the editor is running on Firefox.\n   *\n   * @public\n   */\n  isFirefox;\n  /**\n   * Whether the editor is running on Android.\n   *\n   * @public\n   */\n  isAndroid;\n}\n\n//# sourceMappingURL=EnvironmentManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9FbnZpcm9ubWVudE1hbmFnZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9FbnZpcm9ubWVudE1hbmFnZXIubWpzPzhkNWMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRW52aXJvbm1lbnRNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoZWRpdG9yKSB7XG4gICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJuYXZpZ2F0b3JcIiBpbiB3aW5kb3cpIHtcbiAgICAgIHRoaXMuaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgdGhpcy5pc0lvcyA9ICEhbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBhZC9pKSB8fCAhIW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKTtcbiAgICAgIHRoaXMuaXNDaHJvbWVGb3JJb3MgPSAvY3Jpb3MuKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICB0aGlzLmlzRmlyZWZveCA9IC9maXJlZm94L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIHRoaXMuaXNBbmRyb2lkID0gL2FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmlzU2FmYXJpID0gZmFsc2U7XG4gICAgICB0aGlzLmlzSW9zID0gZmFsc2U7XG4gICAgICB0aGlzLmlzQ2hyb21lRm9ySW9zID0gZmFsc2U7XG4gICAgICB0aGlzLmlzRmlyZWZveCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc0FuZHJvaWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGVkaXRvciBpcyBydW5uaW5nIGluIFNhZmFyaS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaXNTYWZhcmk7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBlZGl0b3IgaXMgcnVubmluZyBvbiBpT1MuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGlzSW9zO1xuICAvKipcbiAgICogV2hldGhlciB0aGUgZWRpdG9yIGlzIHJ1bm5pbmcgb24gaU9TLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBpc0Nocm9tZUZvcklvcztcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGVkaXRvciBpcyBydW5uaW5nIG9uIEZpcmVmb3guXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGlzRmlyZWZveDtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGVkaXRvciBpcyBydW5uaW5nIG9uIEFuZHJvaWQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGlzQW5kcm9pZDtcbn1cbmV4cG9ydCB7XG4gIEVudmlyb25tZW50TWFuYWdlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVudmlyb25tZW50TWFuYWdlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/EnvironmentManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/FocusManager.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/FocusManager.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FocusManager: () => (/* binding */ FocusManager)\n/* harmony export */ });\nclass FocusManager {\n  constructor(editor, autoFocus) {\n    this.editor = editor;\n    this.disposeSideEffectListener = editor.sideEffects.registerAfterChangeHandler(\n      \"instance\",\n      (prev, next) => {\n        if (prev.isFocused !== next.isFocused) {\n          next.isFocused ? this.focus() : this.blur();\n          this.updateContainerClass();\n        }\n      }\n    );\n    const currentFocusState = editor.getInstanceState().isFocused;\n    if (autoFocus !== currentFocusState) {\n      editor.updateInstanceState({ isFocused: !!autoFocus });\n    }\n    this.updateContainerClass();\n  }\n  disposeSideEffectListener;\n  /**\n   * The editor's focus state and the container's focus state\n   * are not necessarily always in sync. For that reason we\n   * can't rely on the css `:focus` or `:focus-within` selectors to style the\n   * editor when it is in focus.\n   *\n   * For that reason we synchronize the editor's focus state with a\n   * special class on the container: tl-container__focused\n   */\n  updateContainerClass() {\n    const container = this.editor.getContainer();\n    const instanceState = this.editor.getInstanceState();\n    if (instanceState.isFocused) {\n      container.classList.add(\"tl-container__focused\");\n    } else {\n      container.classList.remove(\"tl-container__focused\");\n    }\n  }\n  focus() {\n    this.editor.getContainer().focus();\n  }\n  blur() {\n    this.editor.complete();\n    this.editor.getContainer().blur();\n  }\n  dispose() {\n    this.disposeSideEffectListener?.();\n  }\n}\n\n//# sourceMappingURL=FocusManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9Gb2N1c01hbmFnZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHdCQUF3QjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9Gb2N1c01hbmFnZXIubWpzPzg2YzAiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9jdXNNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoZWRpdG9yLCBhdXRvRm9jdXMpIHtcbiAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcbiAgICB0aGlzLmRpc3Bvc2VTaWRlRWZmZWN0TGlzdGVuZXIgPSBlZGl0b3Iuc2lkZUVmZmVjdHMucmVnaXN0ZXJBZnRlckNoYW5nZUhhbmRsZXIoXG4gICAgICBcImluc3RhbmNlXCIsXG4gICAgICAocHJldiwgbmV4dCkgPT4ge1xuICAgICAgICBpZiAocHJldi5pc0ZvY3VzZWQgIT09IG5leHQuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgbmV4dC5pc0ZvY3VzZWQgPyB0aGlzLmZvY3VzKCkgOiB0aGlzLmJsdXIoKTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lckNsYXNzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IGN1cnJlbnRGb2N1c1N0YXRlID0gZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKS5pc0ZvY3VzZWQ7XG4gICAgaWYgKGF1dG9Gb2N1cyAhPT0gY3VycmVudEZvY3VzU3RhdGUpIHtcbiAgICAgIGVkaXRvci51cGRhdGVJbnN0YW5jZVN0YXRlKHsgaXNGb2N1c2VkOiAhIWF1dG9Gb2N1cyB9KTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVDb250YWluZXJDbGFzcygpO1xuICB9XG4gIGRpc3Bvc2VTaWRlRWZmZWN0TGlzdGVuZXI7XG4gIC8qKlxuICAgKiBUaGUgZWRpdG9yJ3MgZm9jdXMgc3RhdGUgYW5kIHRoZSBjb250YWluZXIncyBmb2N1cyBzdGF0ZVxuICAgKiBhcmUgbm90IG5lY2Vzc2FyaWx5IGFsd2F5cyBpbiBzeW5jLiBGb3IgdGhhdCByZWFzb24gd2VcbiAgICogY2FuJ3QgcmVseSBvbiB0aGUgY3NzIGA6Zm9jdXNgIG9yIGA6Zm9jdXMtd2l0aGluYCBzZWxlY3RvcnMgdG8gc3R5bGUgdGhlXG4gICAqIGVkaXRvciB3aGVuIGl0IGlzIGluIGZvY3VzLlxuICAgKlxuICAgKiBGb3IgdGhhdCByZWFzb24gd2Ugc3luY2hyb25pemUgdGhlIGVkaXRvcidzIGZvY3VzIHN0YXRlIHdpdGggYVxuICAgKiBzcGVjaWFsIGNsYXNzIG9uIHRoZSBjb250YWluZXI6IHRsLWNvbnRhaW5lcl9fZm9jdXNlZFxuICAgKi9cbiAgdXBkYXRlQ29udGFpbmVyQ2xhc3MoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5lZGl0b3IuZ2V0Q29udGFpbmVyKCk7XG4gICAgY29uc3QgaW5zdGFuY2VTdGF0ZSA9IHRoaXMuZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKTtcbiAgICBpZiAoaW5zdGFuY2VTdGF0ZS5pc0ZvY3VzZWQpIHtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGwtY29udGFpbmVyX19mb2N1c2VkXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcInRsLWNvbnRhaW5lcl9fZm9jdXNlZFwiKTtcbiAgICB9XG4gIH1cbiAgZm9jdXMoKSB7XG4gICAgdGhpcy5lZGl0b3IuZ2V0Q29udGFpbmVyKCkuZm9jdXMoKTtcbiAgfVxuICBibHVyKCkge1xuICAgIHRoaXMuZWRpdG9yLmNvbXBsZXRlKCk7XG4gICAgdGhpcy5lZGl0b3IuZ2V0Q29udGFpbmVyKCkuYmx1cigpO1xuICB9XG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5kaXNwb3NlU2lkZUVmZmVjdExpc3RlbmVyPy4oKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgRm9jdXNNYW5hZ2VyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Rm9jdXNNYW5hZ2VyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/FocusManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/HistoryManager.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/HistoryManager.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HistoryManager: () => (/* binding */ HistoryManager)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/uniqueId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs\");\n/* harmony import */ var _Stack_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Stack.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/Stack.mjs\");\n\n\n\n\n\nvar HistoryRecorderState = /* @__PURE__ */ ((HistoryRecorderState2) => {\n  HistoryRecorderState2[\"Recording\"] = \"recording\";\n  HistoryRecorderState2[\"RecordingPreserveRedoStack\"] = \"recordingPreserveRedoStack\";\n  HistoryRecorderState2[\"Paused\"] = \"paused\";\n  return HistoryRecorderState2;\n})(HistoryRecorderState || {});\nclass HistoryManager {\n  store;\n  dispose;\n  state = \"recording\" /* Recording */;\n  pendingDiff = new PendingDiff();\n  stacks = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    \"HistoryManager.stacks\",\n    {\n      undos: (0,_Stack_mjs__WEBPACK_IMPORTED_MODULE_4__.stack)(),\n      redos: (0,_Stack_mjs__WEBPACK_IMPORTED_MODULE_4__.stack)()\n    },\n    {\n      isEqual: (a, b) => a.undos === b.undos && a.redos === b.redos\n    }\n  );\n  annotateError;\n  constructor(opts) {\n    this.store = opts.store;\n    this.annotateError = opts.annotateError ?? _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.noop;\n    this.dispose = this.store.addHistoryInterceptor((entry, source) => {\n      if (source !== \"user\")\n        return;\n      switch (this.state) {\n        case \"recording\" /* Recording */:\n          this.pendingDiff.apply(entry.changes);\n          this.stacks.update(({ undos }) => ({ undos, redos: (0,_Stack_mjs__WEBPACK_IMPORTED_MODULE_4__.stack)() }));\n          break;\n        case \"recordingPreserveRedoStack\" /* RecordingPreserveRedoStack */:\n          this.pendingDiff.apply(entry.changes);\n          break;\n        case \"paused\" /* Paused */:\n          break;\n        default:\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.exhaustiveSwitchError)(this.state);\n      }\n    });\n  }\n  flushPendingDiff() {\n    if (this.pendingDiff.isEmpty())\n      return;\n    const diff = this.pendingDiff.clear();\n    this.stacks.update(({ undos, redos }) => ({\n      undos: undos.push({ type: \"diff\", diff }),\n      redos\n    }));\n  }\n  onBatchComplete = () => void 0;\n  getNumUndos() {\n    return this.stacks.get().undos.length + (this.pendingDiff.isEmpty() ? 0 : 1);\n  }\n  getNumRedos() {\n    return this.stacks.get().redos.length;\n  }\n  /** @internal */\n  _isInBatch = false;\n  batch = (fn, opts) => {\n    const previousState = this.state;\n    if (previousState !== \"paused\" /* Paused */ && opts?.history) {\n      this.state = modeToState[opts.history];\n    }\n    try {\n      if (this._isInBatch) {\n        fn();\n        return this;\n      }\n      this._isInBatch = true;\n      try {\n        (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(() => {\n          fn();\n          this.onBatchComplete();\n        });\n      } catch (error) {\n        this.annotateError(error);\n        throw error;\n      } finally {\n        this._isInBatch = false;\n      }\n      return this;\n    } finally {\n      this.state = previousState;\n    }\n  };\n  ignore(fn) {\n    return this.batch(fn, { history: \"ignore\" });\n  }\n  // History\n  _undo = ({\n    pushToRedoStack,\n    toMark = void 0\n  }) => {\n    const previousState = this.state;\n    this.state = \"paused\" /* Paused */;\n    try {\n      let { undos, redos } = this.stacks.get();\n      const pendingDiff = this.pendingDiff.clear();\n      const isPendingDiffEmpty = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.isRecordsDiffEmpty)(pendingDiff);\n      const diffToUndo = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.reverseRecordsDiff)(pendingDiff);\n      if (pushToRedoStack && !isPendingDiffEmpty) {\n        redos = redos.push({ type: \"diff\", diff: pendingDiff });\n      }\n      let didFindMark = false;\n      if (isPendingDiffEmpty) {\n        while (undos.head?.type === \"stop\") {\n          const mark = undos.head;\n          undos = undos.tail;\n          if (pushToRedoStack) {\n            redos = redos.push(mark);\n          }\n          if (mark.id === toMark) {\n            didFindMark = true;\n            break;\n          }\n        }\n      }\n      if (!didFindMark) {\n        loop:\n          while (undos.head) {\n            const undo = undos.head;\n            undos = undos.tail;\n            if (pushToRedoStack) {\n              redos = redos.push(undo);\n            }\n            switch (undo.type) {\n              case \"diff\":\n                (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.squashRecordDiffsMutable)(diffToUndo, [(0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.reverseRecordsDiff)(undo.diff)]);\n                break;\n              case \"stop\":\n                if (!toMark)\n                  break loop;\n                if (undo.id === toMark)\n                  break loop;\n                break;\n              default:\n                (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.exhaustiveSwitchError)(undo);\n            }\n          }\n      }\n      this.store.applyDiff(diffToUndo, { ignoreEphemeralKeys: true });\n      this.store.ensureStoreIsUsable();\n      this.stacks.set({ undos, redos });\n    } finally {\n      this.state = previousState;\n    }\n    return this;\n  };\n  undo = () => {\n    this._undo({ pushToRedoStack: true });\n    return this;\n  };\n  redo = () => {\n    const previousState = this.state;\n    this.state = \"paused\" /* Paused */;\n    try {\n      this.flushPendingDiff();\n      let { undos, redos } = this.stacks.get();\n      if (redos.length === 0) {\n        return this;\n      }\n      while (redos.head?.type === \"stop\") {\n        undos = undos.push(redos.head);\n        redos = redos.tail;\n      }\n      const diffToRedo = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.createEmptyRecordsDiff)();\n      while (redos.head) {\n        const redo = redos.head;\n        undos = undos.push(redo);\n        redos = redos.tail;\n        if (redo.type === \"diff\") {\n          (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.squashRecordDiffsMutable)(diffToRedo, [redo.diff]);\n        } else {\n          break;\n        }\n      }\n      this.store.applyDiff(diffToRedo, { ignoreEphemeralKeys: true });\n      this.store.ensureStoreIsUsable();\n      this.stacks.set({ undos, redos });\n    } finally {\n      this.state = previousState;\n    }\n    return this;\n  };\n  bail = () => {\n    this._undo({ pushToRedoStack: false });\n    return this;\n  };\n  bailToMark = (id) => {\n    this._undo({ pushToRedoStack: false, toMark: id });\n    return this;\n  };\n  squashToMark = (id) => {\n    let top = this.stacks.get().undos;\n    const popped = [];\n    while (top.head && !(top.head.type === \"stop\" && top.head.id === id)) {\n      if (top.head.type === \"diff\") {\n        popped.push(top.head.diff);\n      }\n      top = top.tail;\n    }\n    if (!top.head || top.head?.id !== id) {\n      console.error(\"Could not find mark to squash to: \", id);\n      return this;\n    }\n    if (popped.length === 0) {\n      return this;\n    }\n    const diff = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.createEmptyRecordsDiff)();\n    (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.squashRecordDiffsMutable)(diff, popped.reverse());\n    this.stacks.update(({ redos }) => ({\n      undos: top.push({\n        type: \"diff\",\n        diff\n      }),\n      redos\n    }));\n    return this;\n  };\n  mark = (id = (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_3__.uniqueId)()) => {\n    (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(() => {\n      this.flushPendingDiff();\n      this.stacks.update(({ undos, redos }) => ({ undos: undos.push({ type: \"stop\", id }), redos }));\n    });\n    return id;\n  };\n  clear() {\n    this.stacks.set({ undos: (0,_Stack_mjs__WEBPACK_IMPORTED_MODULE_4__.stack)(), redos: (0,_Stack_mjs__WEBPACK_IMPORTED_MODULE_4__.stack)() });\n    this.pendingDiff.clear();\n  }\n  /** @internal */\n  debug() {\n    const { undos, redos } = this.stacks.get();\n    return {\n      undos: undos.toArray(),\n      redos: redos.toArray(),\n      pendingDiff: this.pendingDiff.debug(),\n      state: this.state\n    };\n  }\n}\nconst modeToState = {\n  record: \"recording\" /* Recording */,\n  \"record-preserveRedoStack\": \"recordingPreserveRedoStack\" /* RecordingPreserveRedoStack */,\n  ignore: \"paused\" /* Paused */\n};\nclass PendingDiff {\n  diff = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.createEmptyRecordsDiff)();\n  isEmptyAtom = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"PendingDiff.isEmpty\", true);\n  clear() {\n    const diff = this.diff;\n    this.diff = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.createEmptyRecordsDiff)();\n    this.isEmptyAtom.set(true);\n    return diff;\n  }\n  isEmpty() {\n    return this.isEmptyAtom.get();\n  }\n  apply(diff) {\n    (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.squashRecordDiffsMutable)(this.diff, [diff]);\n    this.isEmptyAtom.set((0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.isRecordsDiffEmpty)(this.diff));\n  }\n  debug() {\n    return { diff: this.diff, isEmpty: this.isEmpty() };\n  }\n}\n\n//# sourceMappingURL=HistoryManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9IaXN0b3J5TWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStDO0FBTXhCO0FBQ3FDO0FBQ1I7QUFDaEI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNEJBQTRCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG1EQUFJO0FBQ2Y7QUFDQTtBQUNBLGFBQWEsaURBQUs7QUFDbEIsYUFBYSxpREFBSztBQUNsQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsK0NBQUk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLE9BQU8sUUFBUSxjQUFjLGlEQUFLLElBQUk7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG9FQUFxQjtBQUMvQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGNBQWM7QUFDeEMsMEJBQTBCLG9CQUFvQjtBQUM5QztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdURBQVE7QUFDaEI7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsbUJBQW1CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsWUFBWSxlQUFlO0FBQzNCO0FBQ0EsaUNBQWlDLGlFQUFrQjtBQUNuRCx5QkFBeUIsaUVBQWtCO0FBQzNDO0FBQ0EsNkJBQTZCLGlDQUFpQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1RUFBd0IsY0FBYyxpRUFBa0I7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvRUFBcUI7QUFDckM7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDJCQUEyQjtBQUNwRTtBQUNBLHdCQUF3QixjQUFjO0FBQ3RDLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVCQUF1QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZUFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixxRUFBc0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsdUVBQXdCO0FBQ2xDLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMkJBQTJCO0FBQ3BFO0FBQ0Esd0JBQXdCLGNBQWM7QUFDdEMsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsd0JBQXdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixvQ0FBb0M7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHFFQUFzQjtBQUN2QyxJQUFJLHVFQUF3QjtBQUM1QiwwQkFBMEIsT0FBTztBQUNqQztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGVBQWUsNkRBQVE7QUFDdkIsSUFBSSx1REFBUTtBQUNaO0FBQ0EsNEJBQTRCLGNBQWMsUUFBUSxvQkFBb0Isa0JBQWtCLFVBQVU7QUFDbEcsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixPQUFPLGlEQUFLLFdBQVcsaURBQUssSUFBSTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZUFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxxRUFBc0I7QUFDL0IsZ0JBQWdCLG1EQUFJO0FBQ3BCO0FBQ0E7QUFDQSxnQkFBZ0IscUVBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx1RUFBd0I7QUFDNUIseUJBQXlCLGlFQUFrQjtBQUMzQztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvbWFuYWdlcnMvSGlzdG9yeU1hbmFnZXIubWpzP2RjZWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXRvbSwgdHJhbnNhY3QgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHtcbiAgY3JlYXRlRW1wdHlSZWNvcmRzRGlmZixcbiAgaXNSZWNvcmRzRGlmZkVtcHR5LFxuICByZXZlcnNlUmVjb3Jkc0RpZmYsXG4gIHNxdWFzaFJlY29yZERpZmZzTXV0YWJsZVxufSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgZXhoYXVzdGl2ZVN3aXRjaEVycm9yLCBub29wIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IHVuaXF1ZUlkIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3VuaXF1ZUlkLm1qc1wiO1xuaW1wb3J0IHsgc3RhY2sgfSBmcm9tIFwiLi9TdGFjay5tanNcIjtcbnZhciBIaXN0b3J5UmVjb3JkZXJTdGF0ZSA9IC8qIEBfX1BVUkVfXyAqLyAoKEhpc3RvcnlSZWNvcmRlclN0YXRlMikgPT4ge1xuICBIaXN0b3J5UmVjb3JkZXJTdGF0ZTJbXCJSZWNvcmRpbmdcIl0gPSBcInJlY29yZGluZ1wiO1xuICBIaXN0b3J5UmVjb3JkZXJTdGF0ZTJbXCJSZWNvcmRpbmdQcmVzZXJ2ZVJlZG9TdGFja1wiXSA9IFwicmVjb3JkaW5nUHJlc2VydmVSZWRvU3RhY2tcIjtcbiAgSGlzdG9yeVJlY29yZGVyU3RhdGUyW1wiUGF1c2VkXCJdID0gXCJwYXVzZWRcIjtcbiAgcmV0dXJuIEhpc3RvcnlSZWNvcmRlclN0YXRlMjtcbn0pKEhpc3RvcnlSZWNvcmRlclN0YXRlIHx8IHt9KTtcbmNsYXNzIEhpc3RvcnlNYW5hZ2VyIHtcbiAgc3RvcmU7XG4gIGRpc3Bvc2U7XG4gIHN0YXRlID0gXCJyZWNvcmRpbmdcIiAvKiBSZWNvcmRpbmcgKi87XG4gIHBlbmRpbmdEaWZmID0gbmV3IFBlbmRpbmdEaWZmKCk7XG4gIHN0YWNrcyA9IGF0b20oXG4gICAgXCJIaXN0b3J5TWFuYWdlci5zdGFja3NcIixcbiAgICB7XG4gICAgICB1bmRvczogc3RhY2soKSxcbiAgICAgIHJlZG9zOiBzdGFjaygpXG4gICAgfSxcbiAgICB7XG4gICAgICBpc0VxdWFsOiAoYSwgYikgPT4gYS51bmRvcyA9PT0gYi51bmRvcyAmJiBhLnJlZG9zID09PSBiLnJlZG9zXG4gICAgfVxuICApO1xuICBhbm5vdGF0ZUVycm9yO1xuICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgdGhpcy5zdG9yZSA9IG9wdHMuc3RvcmU7XG4gICAgdGhpcy5hbm5vdGF0ZUVycm9yID0gb3B0cy5hbm5vdGF0ZUVycm9yID8/IG5vb3A7XG4gICAgdGhpcy5kaXNwb3NlID0gdGhpcy5zdG9yZS5hZGRIaXN0b3J5SW50ZXJjZXB0b3IoKGVudHJ5LCBzb3VyY2UpID0+IHtcbiAgICAgIGlmIChzb3VyY2UgIT09IFwidXNlclwiKVxuICAgICAgICByZXR1cm47XG4gICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgY2FzZSBcInJlY29yZGluZ1wiIC8qIFJlY29yZGluZyAqLzpcbiAgICAgICAgICB0aGlzLnBlbmRpbmdEaWZmLmFwcGx5KGVudHJ5LmNoYW5nZXMpO1xuICAgICAgICAgIHRoaXMuc3RhY2tzLnVwZGF0ZSgoeyB1bmRvcyB9KSA9PiAoeyB1bmRvcywgcmVkb3M6IHN0YWNrKCkgfSkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicmVjb3JkaW5nUHJlc2VydmVSZWRvU3RhY2tcIiAvKiBSZWNvcmRpbmdQcmVzZXJ2ZVJlZG9TdGFjayAqLzpcbiAgICAgICAgICB0aGlzLnBlbmRpbmdEaWZmLmFwcGx5KGVudHJ5LmNoYW5nZXMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicGF1c2VkXCIgLyogUGF1c2VkICovOlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGV4aGF1c3RpdmVTd2l0Y2hFcnJvcih0aGlzLnN0YXRlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmbHVzaFBlbmRpbmdEaWZmKCkge1xuICAgIGlmICh0aGlzLnBlbmRpbmdEaWZmLmlzRW1wdHkoKSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBkaWZmID0gdGhpcy5wZW5kaW5nRGlmZi5jbGVhcigpO1xuICAgIHRoaXMuc3RhY2tzLnVwZGF0ZSgoeyB1bmRvcywgcmVkb3MgfSkgPT4gKHtcbiAgICAgIHVuZG9zOiB1bmRvcy5wdXNoKHsgdHlwZTogXCJkaWZmXCIsIGRpZmYgfSksXG4gICAgICByZWRvc1xuICAgIH0pKTtcbiAgfVxuICBvbkJhdGNoQ29tcGxldGUgPSAoKSA9PiB2b2lkIDA7XG4gIGdldE51bVVuZG9zKCkge1xuICAgIHJldHVybiB0aGlzLnN0YWNrcy5nZXQoKS51bmRvcy5sZW5ndGggKyAodGhpcy5wZW5kaW5nRGlmZi5pc0VtcHR5KCkgPyAwIDogMSk7XG4gIH1cbiAgZ2V0TnVtUmVkb3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhY2tzLmdldCgpLnJlZG9zLmxlbmd0aDtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIF9pc0luQmF0Y2ggPSBmYWxzZTtcbiAgYmF0Y2ggPSAoZm4sIG9wdHMpID0+IHtcbiAgICBjb25zdCBwcmV2aW91c1N0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICBpZiAocHJldmlvdXNTdGF0ZSAhPT0gXCJwYXVzZWRcIiAvKiBQYXVzZWQgKi8gJiYgb3B0cz8uaGlzdG9yeSkge1xuICAgICAgdGhpcy5zdGF0ZSA9IG1vZGVUb1N0YXRlW29wdHMuaGlzdG9yeV07XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5faXNJbkJhdGNoKSB7XG4gICAgICAgIGZuKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgdGhpcy5faXNJbkJhdGNoID0gdHJ1ZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRyYW5zYWN0KCgpID0+IHtcbiAgICAgICAgICBmbigpO1xuICAgICAgICAgIHRoaXMub25CYXRjaENvbXBsZXRlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5hbm5vdGF0ZUVycm9yKGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0aGlzLl9pc0luQmF0Y2ggPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnN0YXRlID0gcHJldmlvdXNTdGF0ZTtcbiAgICB9XG4gIH07XG4gIGlnbm9yZShmbikge1xuICAgIHJldHVybiB0aGlzLmJhdGNoKGZuLCB7IGhpc3Rvcnk6IFwiaWdub3JlXCIgfSk7XG4gIH1cbiAgLy8gSGlzdG9yeVxuICBfdW5kbyA9ICh7XG4gICAgcHVzaFRvUmVkb1N0YWNrLFxuICAgIHRvTWFyayA9IHZvaWQgMFxuICB9KSA9PiB7XG4gICAgY29uc3QgcHJldmlvdXNTdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgdGhpcy5zdGF0ZSA9IFwicGF1c2VkXCIgLyogUGF1c2VkICovO1xuICAgIHRyeSB7XG4gICAgICBsZXQgeyB1bmRvcywgcmVkb3MgfSA9IHRoaXMuc3RhY2tzLmdldCgpO1xuICAgICAgY29uc3QgcGVuZGluZ0RpZmYgPSB0aGlzLnBlbmRpbmdEaWZmLmNsZWFyKCk7XG4gICAgICBjb25zdCBpc1BlbmRpbmdEaWZmRW1wdHkgPSBpc1JlY29yZHNEaWZmRW1wdHkocGVuZGluZ0RpZmYpO1xuICAgICAgY29uc3QgZGlmZlRvVW5kbyA9IHJldmVyc2VSZWNvcmRzRGlmZihwZW5kaW5nRGlmZik7XG4gICAgICBpZiAocHVzaFRvUmVkb1N0YWNrICYmICFpc1BlbmRpbmdEaWZmRW1wdHkpIHtcbiAgICAgICAgcmVkb3MgPSByZWRvcy5wdXNoKHsgdHlwZTogXCJkaWZmXCIsIGRpZmY6IHBlbmRpbmdEaWZmIH0pO1xuICAgICAgfVxuICAgICAgbGV0IGRpZEZpbmRNYXJrID0gZmFsc2U7XG4gICAgICBpZiAoaXNQZW5kaW5nRGlmZkVtcHR5KSB7XG4gICAgICAgIHdoaWxlICh1bmRvcy5oZWFkPy50eXBlID09PSBcInN0b3BcIikge1xuICAgICAgICAgIGNvbnN0IG1hcmsgPSB1bmRvcy5oZWFkO1xuICAgICAgICAgIHVuZG9zID0gdW5kb3MudGFpbDtcbiAgICAgICAgICBpZiAocHVzaFRvUmVkb1N0YWNrKSB7XG4gICAgICAgICAgICByZWRvcyA9IHJlZG9zLnB1c2gobWFyayk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChtYXJrLmlkID09PSB0b01hcmspIHtcbiAgICAgICAgICAgIGRpZEZpbmRNYXJrID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFkaWRGaW5kTWFyaykge1xuICAgICAgICBsb29wOlxuICAgICAgICAgIHdoaWxlICh1bmRvcy5oZWFkKSB7XG4gICAgICAgICAgICBjb25zdCB1bmRvID0gdW5kb3MuaGVhZDtcbiAgICAgICAgICAgIHVuZG9zID0gdW5kb3MudGFpbDtcbiAgICAgICAgICAgIGlmIChwdXNoVG9SZWRvU3RhY2spIHtcbiAgICAgICAgICAgICAgcmVkb3MgPSByZWRvcy5wdXNoKHVuZG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoICh1bmRvLnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcImRpZmZcIjpcbiAgICAgICAgICAgICAgICBzcXVhc2hSZWNvcmREaWZmc011dGFibGUoZGlmZlRvVW5kbywgW3JldmVyc2VSZWNvcmRzRGlmZih1bmRvLmRpZmYpXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgXCJzdG9wXCI6XG4gICAgICAgICAgICAgICAgaWYgKCF0b01hcmspXG4gICAgICAgICAgICAgICAgICBicmVhayBsb29wO1xuICAgICAgICAgICAgICAgIGlmICh1bmRvLmlkID09PSB0b01hcmspXG4gICAgICAgICAgICAgICAgICBicmVhayBsb29wO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGV4aGF1c3RpdmVTd2l0Y2hFcnJvcih1bmRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnN0b3JlLmFwcGx5RGlmZihkaWZmVG9VbmRvLCB7IGlnbm9yZUVwaGVtZXJhbEtleXM6IHRydWUgfSk7XG4gICAgICB0aGlzLnN0b3JlLmVuc3VyZVN0b3JlSXNVc2FibGUoKTtcbiAgICAgIHRoaXMuc3RhY2tzLnNldCh7IHVuZG9zLCByZWRvcyB9KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5zdGF0ZSA9IHByZXZpb3VzU3RhdGU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICB1bmRvID0gKCkgPT4ge1xuICAgIHRoaXMuX3VuZG8oeyBwdXNoVG9SZWRvU3RhY2s6IHRydWUgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIHJlZG8gPSAoKSA9PiB7XG4gICAgY29uc3QgcHJldmlvdXNTdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgdGhpcy5zdGF0ZSA9IFwicGF1c2VkXCIgLyogUGF1c2VkICovO1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmZsdXNoUGVuZGluZ0RpZmYoKTtcbiAgICAgIGxldCB7IHVuZG9zLCByZWRvcyB9ID0gdGhpcy5zdGFja3MuZ2V0KCk7XG4gICAgICBpZiAocmVkb3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgd2hpbGUgKHJlZG9zLmhlYWQ/LnR5cGUgPT09IFwic3RvcFwiKSB7XG4gICAgICAgIHVuZG9zID0gdW5kb3MucHVzaChyZWRvcy5oZWFkKTtcbiAgICAgICAgcmVkb3MgPSByZWRvcy50YWlsO1xuICAgICAgfVxuICAgICAgY29uc3QgZGlmZlRvUmVkbyA9IGNyZWF0ZUVtcHR5UmVjb3Jkc0RpZmYoKTtcbiAgICAgIHdoaWxlIChyZWRvcy5oZWFkKSB7XG4gICAgICAgIGNvbnN0IHJlZG8gPSByZWRvcy5oZWFkO1xuICAgICAgICB1bmRvcyA9IHVuZG9zLnB1c2gocmVkbyk7XG4gICAgICAgIHJlZG9zID0gcmVkb3MudGFpbDtcbiAgICAgICAgaWYgKHJlZG8udHlwZSA9PT0gXCJkaWZmXCIpIHtcbiAgICAgICAgICBzcXVhc2hSZWNvcmREaWZmc011dGFibGUoZGlmZlRvUmVkbywgW3JlZG8uZGlmZl0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnN0b3JlLmFwcGx5RGlmZihkaWZmVG9SZWRvLCB7IGlnbm9yZUVwaGVtZXJhbEtleXM6IHRydWUgfSk7XG4gICAgICB0aGlzLnN0b3JlLmVuc3VyZVN0b3JlSXNVc2FibGUoKTtcbiAgICAgIHRoaXMuc3RhY2tzLnNldCh7IHVuZG9zLCByZWRvcyB9KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5zdGF0ZSA9IHByZXZpb3VzU3RhdGU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBiYWlsID0gKCkgPT4ge1xuICAgIHRoaXMuX3VuZG8oeyBwdXNoVG9SZWRvU3RhY2s6IGZhbHNlIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBiYWlsVG9NYXJrID0gKGlkKSA9PiB7XG4gICAgdGhpcy5fdW5kbyh7IHB1c2hUb1JlZG9TdGFjazogZmFsc2UsIHRvTWFyazogaWQgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIHNxdWFzaFRvTWFyayA9IChpZCkgPT4ge1xuICAgIGxldCB0b3AgPSB0aGlzLnN0YWNrcy5nZXQoKS51bmRvcztcbiAgICBjb25zdCBwb3BwZWQgPSBbXTtcbiAgICB3aGlsZSAodG9wLmhlYWQgJiYgISh0b3AuaGVhZC50eXBlID09PSBcInN0b3BcIiAmJiB0b3AuaGVhZC5pZCA9PT0gaWQpKSB7XG4gICAgICBpZiAodG9wLmhlYWQudHlwZSA9PT0gXCJkaWZmXCIpIHtcbiAgICAgICAgcG9wcGVkLnB1c2godG9wLmhlYWQuZGlmZik7XG4gICAgICB9XG4gICAgICB0b3AgPSB0b3AudGFpbDtcbiAgICB9XG4gICAgaWYgKCF0b3AuaGVhZCB8fCB0b3AuaGVhZD8uaWQgIT09IGlkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGZpbmQgbWFyayB0byBzcXVhc2ggdG86IFwiLCBpZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaWYgKHBvcHBlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjb25zdCBkaWZmID0gY3JlYXRlRW1wdHlSZWNvcmRzRGlmZigpO1xuICAgIHNxdWFzaFJlY29yZERpZmZzTXV0YWJsZShkaWZmLCBwb3BwZWQucmV2ZXJzZSgpKTtcbiAgICB0aGlzLnN0YWNrcy51cGRhdGUoKHsgcmVkb3MgfSkgPT4gKHtcbiAgICAgIHVuZG9zOiB0b3AucHVzaCh7XG4gICAgICAgIHR5cGU6IFwiZGlmZlwiLFxuICAgICAgICBkaWZmXG4gICAgICB9KSxcbiAgICAgIHJlZG9zXG4gICAgfSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBtYXJrID0gKGlkID0gdW5pcXVlSWQoKSkgPT4ge1xuICAgIHRyYW5zYWN0KCgpID0+IHtcbiAgICAgIHRoaXMuZmx1c2hQZW5kaW5nRGlmZigpO1xuICAgICAgdGhpcy5zdGFja3MudXBkYXRlKCh7IHVuZG9zLCByZWRvcyB9KSA9PiAoeyB1bmRvczogdW5kb3MucHVzaCh7IHR5cGU6IFwic3RvcFwiLCBpZCB9KSwgcmVkb3MgfSkpO1xuICAgIH0pO1xuICAgIHJldHVybiBpZDtcbiAgfTtcbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5zdGFja3Muc2V0KHsgdW5kb3M6IHN0YWNrKCksIHJlZG9zOiBzdGFjaygpIH0pO1xuICAgIHRoaXMucGVuZGluZ0RpZmYuY2xlYXIoKTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGRlYnVnKCkge1xuICAgIGNvbnN0IHsgdW5kb3MsIHJlZG9zIH0gPSB0aGlzLnN0YWNrcy5nZXQoKTtcbiAgICByZXR1cm4ge1xuICAgICAgdW5kb3M6IHVuZG9zLnRvQXJyYXkoKSxcbiAgICAgIHJlZG9zOiByZWRvcy50b0FycmF5KCksXG4gICAgICBwZW5kaW5nRGlmZjogdGhpcy5wZW5kaW5nRGlmZi5kZWJ1ZygpLFxuICAgICAgc3RhdGU6IHRoaXMuc3RhdGVcbiAgICB9O1xuICB9XG59XG5jb25zdCBtb2RlVG9TdGF0ZSA9IHtcbiAgcmVjb3JkOiBcInJlY29yZGluZ1wiIC8qIFJlY29yZGluZyAqLyxcbiAgXCJyZWNvcmQtcHJlc2VydmVSZWRvU3RhY2tcIjogXCJyZWNvcmRpbmdQcmVzZXJ2ZVJlZG9TdGFja1wiIC8qIFJlY29yZGluZ1ByZXNlcnZlUmVkb1N0YWNrICovLFxuICBpZ25vcmU6IFwicGF1c2VkXCIgLyogUGF1c2VkICovXG59O1xuY2xhc3MgUGVuZGluZ0RpZmYge1xuICBkaWZmID0gY3JlYXRlRW1wdHlSZWNvcmRzRGlmZigpO1xuICBpc0VtcHR5QXRvbSA9IGF0b20oXCJQZW5kaW5nRGlmZi5pc0VtcHR5XCIsIHRydWUpO1xuICBjbGVhcigpIHtcbiAgICBjb25zdCBkaWZmID0gdGhpcy5kaWZmO1xuICAgIHRoaXMuZGlmZiA9IGNyZWF0ZUVtcHR5UmVjb3Jkc0RpZmYoKTtcbiAgICB0aGlzLmlzRW1wdHlBdG9tLnNldCh0cnVlKTtcbiAgICByZXR1cm4gZGlmZjtcbiAgfVxuICBpc0VtcHR5KCkge1xuICAgIHJldHVybiB0aGlzLmlzRW1wdHlBdG9tLmdldCgpO1xuICB9XG4gIGFwcGx5KGRpZmYpIHtcbiAgICBzcXVhc2hSZWNvcmREaWZmc011dGFibGUodGhpcy5kaWZmLCBbZGlmZl0pO1xuICAgIHRoaXMuaXNFbXB0eUF0b20uc2V0KGlzUmVjb3Jkc0RpZmZFbXB0eSh0aGlzLmRpZmYpKTtcbiAgfVxuICBkZWJ1ZygpIHtcbiAgICByZXR1cm4geyBkaWZmOiB0aGlzLmRpZmYsIGlzRW1wdHk6IHRoaXMuaXNFbXB0eSgpIH07XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEhpc3RvcnlNYW5hZ2VyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SGlzdG9yeU1hbmFnZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/HistoryManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ScribbleManager.mjs":
/*!**************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ScribbleManager.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ScribbleManager: () => (/* binding */ ScribbleManager)\n/* harmony export */ });\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/uniqueId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs\");\n\n\nclass ScribbleManager {\n  constructor(editor) {\n    this.editor = editor;\n  }\n  scribbleItems = /* @__PURE__ */ new Map();\n  state = \"paused\";\n  addScribble = (scribble, id = (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_1__.uniqueId)()) => {\n    const item = {\n      id,\n      scribble: {\n        id,\n        size: 20,\n        color: \"accent\",\n        opacity: 0.8,\n        delay: 0,\n        points: [],\n        shrink: 0.1,\n        taper: true,\n        ...scribble,\n        state: \"starting\"\n      },\n      timeoutMs: 0,\n      delayRemaining: scribble.delay ?? 0,\n      prev: null,\n      next: null\n    };\n    this.scribbleItems.set(id, item);\n    return item;\n  };\n  reset() {\n    this.editor.updateInstanceState({ scribbles: [] });\n    this.scribbleItems.clear();\n  }\n  /**\n   * Start stopping the scribble. The scribble won't be removed until its last point is cleared.\n   *\n   * @public\n   */\n  stop = (id) => {\n    const item = this.scribbleItems.get(id);\n    if (!item)\n      throw Error(`Scribble with id ${id} not found`);\n    item.delayRemaining = Math.min(item.delayRemaining, 200);\n    item.scribble.state = \"stopping\";\n    return item;\n  };\n  /**\n   * Set the scribble's next point.\n   *\n   * @param point - The point to add.\n   * @public\n   */\n  addPoint = (id, x, y) => {\n    const item = this.scribbleItems.get(id);\n    if (!item)\n      throw Error(`Scribble with id ${id} not found`);\n    const { prev } = item;\n    const point = { x, y, z: 0.5 };\n    if (!prev || _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist(prev, point) >= 1) {\n      item.next = point;\n    }\n    return item;\n  };\n  /**\n   * Update on each animation frame.\n   *\n   * @param elapsed - The number of milliseconds since the last tick.\n   * @public\n   */\n  tick = (elapsed) => {\n    if (this.scribbleItems.size === 0)\n      return;\n    this.editor.batch(() => {\n      this.scribbleItems.forEach((item) => {\n        if (item.scribble.state === \"starting\") {\n          const { next: next2, prev: prev2 } = item;\n          if (next2 && next2 !== prev2) {\n            item.prev = next2;\n            item.scribble.points.push(next2);\n          }\n          if (item.scribble.points.length > 8) {\n            item.scribble.state = \"active\";\n          }\n          return;\n        }\n        if (item.delayRemaining > 0) {\n          item.delayRemaining = Math.max(0, item.delayRemaining - elapsed);\n        }\n        item.timeoutMs += elapsed;\n        if (item.timeoutMs >= 16) {\n          item.timeoutMs = 0;\n        }\n        const { delayRemaining, timeoutMs, prev, next, scribble } = item;\n        switch (scribble.state) {\n          case \"active\": {\n            if (next && next !== prev) {\n              item.prev = next;\n              scribble.points.push(next);\n              if (delayRemaining === 0) {\n                if (scribble.points.length > 8) {\n                  scribble.points.shift();\n                }\n              }\n            } else {\n              if (timeoutMs === 0) {\n                if (scribble.points.length > 1) {\n                  scribble.points.shift();\n                } else {\n                  item.delayRemaining = scribble.delay;\n                }\n              }\n            }\n            break;\n          }\n          case \"stopping\": {\n            if (item.delayRemaining === 0) {\n              if (timeoutMs === 0) {\n                if (scribble.points.length === 1) {\n                  this.scribbleItems.delete(item.id);\n                  return;\n                }\n                if (scribble.shrink) {\n                  scribble.size = Math.max(1, scribble.size * (1 - scribble.shrink));\n                }\n                scribble.points.shift();\n              }\n            }\n            break;\n          }\n          case \"paused\": {\n            break;\n          }\n        }\n      });\n      this.editor.updateInstanceState({\n        scribbles: Array.from(this.scribbleItems.values()).map(({ scribble }) => ({\n          ...scribble,\n          points: [...scribble.points]\n        })).slice(-5)\n        // limit to three as a minor sanity check\n      });\n    });\n  };\n}\n\n//# sourceMappingURL=ScribbleManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TY3JpYmJsZU1hbmFnZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQztBQUNLO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw2REFBUTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZUFBZTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxJQUFJO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLElBQUk7QUFDMUMsWUFBWSxPQUFPO0FBQ25CLG9CQUFvQjtBQUNwQixpQkFBaUIsb0RBQUc7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMkJBQTJCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGtEQUFrRDtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxrRUFBa0UsVUFBVTtBQUM1RTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL21hbmFnZXJzL1NjcmliYmxlTWFuYWdlci5tanM/OWM3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vLi4vcHJpbWl0aXZlcy9WZWMubWpzXCI7XG5pbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gXCIuLi8uLi91dGlscy91bmlxdWVJZC5tanNcIjtcbmNsYXNzIFNjcmliYmxlTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKGVkaXRvcikge1xuICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICB9XG4gIHNjcmliYmxlSXRlbXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBzdGF0ZSA9IFwicGF1c2VkXCI7XG4gIGFkZFNjcmliYmxlID0gKHNjcmliYmxlLCBpZCA9IHVuaXF1ZUlkKCkpID0+IHtcbiAgICBjb25zdCBpdGVtID0ge1xuICAgICAgaWQsXG4gICAgICBzY3JpYmJsZToge1xuICAgICAgICBpZCxcbiAgICAgICAgc2l6ZTogMjAsXG4gICAgICAgIGNvbG9yOiBcImFjY2VudFwiLFxuICAgICAgICBvcGFjaXR5OiAwLjgsXG4gICAgICAgIGRlbGF5OiAwLFxuICAgICAgICBwb2ludHM6IFtdLFxuICAgICAgICBzaHJpbms6IDAuMSxcbiAgICAgICAgdGFwZXI6IHRydWUsXG4gICAgICAgIC4uLnNjcmliYmxlLFxuICAgICAgICBzdGF0ZTogXCJzdGFydGluZ1wiXG4gICAgICB9LFxuICAgICAgdGltZW91dE1zOiAwLFxuICAgICAgZGVsYXlSZW1haW5pbmc6IHNjcmliYmxlLmRlbGF5ID8/IDAsXG4gICAgICBwcmV2OiBudWxsLFxuICAgICAgbmV4dDogbnVsbFxuICAgIH07XG4gICAgdGhpcy5zY3JpYmJsZUl0ZW1zLnNldChpZCwgaXRlbSk7XG4gICAgcmV0dXJuIGl0ZW07XG4gIH07XG4gIHJlc2V0KCkge1xuICAgIHRoaXMuZWRpdG9yLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBzY3JpYmJsZXM6IFtdIH0pO1xuICAgIHRoaXMuc2NyaWJibGVJdGVtcy5jbGVhcigpO1xuICB9XG4gIC8qKlxuICAgKiBTdGFydCBzdG9wcGluZyB0aGUgc2NyaWJibGUuIFRoZSBzY3JpYmJsZSB3b24ndCBiZSByZW1vdmVkIHVudGlsIGl0cyBsYXN0IHBvaW50IGlzIGNsZWFyZWQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0b3AgPSAoaWQpID0+IHtcbiAgICBjb25zdCBpdGVtID0gdGhpcy5zY3JpYmJsZUl0ZW1zLmdldChpZCk7XG4gICAgaWYgKCFpdGVtKVxuICAgICAgdGhyb3cgRXJyb3IoYFNjcmliYmxlIHdpdGggaWQgJHtpZH0gbm90IGZvdW5kYCk7XG4gICAgaXRlbS5kZWxheVJlbWFpbmluZyA9IE1hdGgubWluKGl0ZW0uZGVsYXlSZW1haW5pbmcsIDIwMCk7XG4gICAgaXRlbS5zY3JpYmJsZS5zdGF0ZSA9IFwic3RvcHBpbmdcIjtcbiAgICByZXR1cm4gaXRlbTtcbiAgfTtcbiAgLyoqXG4gICAqIFNldCB0aGUgc2NyaWJibGUncyBuZXh0IHBvaW50LlxuICAgKlxuICAgKiBAcGFyYW0gcG9pbnQgLSBUaGUgcG9pbnQgdG8gYWRkLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBhZGRQb2ludCA9IChpZCwgeCwgeSkgPT4ge1xuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnNjcmliYmxlSXRlbXMuZ2V0KGlkKTtcbiAgICBpZiAoIWl0ZW0pXG4gICAgICB0aHJvdyBFcnJvcihgU2NyaWJibGUgd2l0aCBpZCAke2lkfSBub3QgZm91bmRgKTtcbiAgICBjb25zdCB7IHByZXYgfSA9IGl0ZW07XG4gICAgY29uc3QgcG9pbnQgPSB7IHgsIHksIHo6IDAuNSB9O1xuICAgIGlmICghcHJldiB8fCBWZWMuRGlzdChwcmV2LCBwb2ludCkgPj0gMSkge1xuICAgICAgaXRlbS5uZXh0ID0gcG9pbnQ7XG4gICAgfVxuICAgIHJldHVybiBpdGVtO1xuICB9O1xuICAvKipcbiAgICogVXBkYXRlIG9uIGVhY2ggYW5pbWF0aW9uIGZyYW1lLlxuICAgKlxuICAgKiBAcGFyYW0gZWxhcHNlZCAtIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZSBsYXN0IHRpY2suXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHRpY2sgPSAoZWxhcHNlZCkgPT4ge1xuICAgIGlmICh0aGlzLnNjcmliYmxlSXRlbXMuc2l6ZSA9PT0gMClcbiAgICAgIHJldHVybjtcbiAgICB0aGlzLmVkaXRvci5iYXRjaCgoKSA9PiB7XG4gICAgICB0aGlzLnNjcmliYmxlSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaXRlbS5zY3JpYmJsZS5zdGF0ZSA9PT0gXCJzdGFydGluZ1wiKSB7XG4gICAgICAgICAgY29uc3QgeyBuZXh0OiBuZXh0MiwgcHJldjogcHJldjIgfSA9IGl0ZW07XG4gICAgICAgICAgaWYgKG5leHQyICYmIG5leHQyICE9PSBwcmV2Mikge1xuICAgICAgICAgICAgaXRlbS5wcmV2ID0gbmV4dDI7XG4gICAgICAgICAgICBpdGVtLnNjcmliYmxlLnBvaW50cy5wdXNoKG5leHQyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0uc2NyaWJibGUucG9pbnRzLmxlbmd0aCA+IDgpIHtcbiAgICAgICAgICAgIGl0ZW0uc2NyaWJibGUuc3RhdGUgPSBcImFjdGl2ZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0uZGVsYXlSZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgaXRlbS5kZWxheVJlbWFpbmluZyA9IE1hdGgubWF4KDAsIGl0ZW0uZGVsYXlSZW1haW5pbmcgLSBlbGFwc2VkKTtcbiAgICAgICAgfVxuICAgICAgICBpdGVtLnRpbWVvdXRNcyArPSBlbGFwc2VkO1xuICAgICAgICBpZiAoaXRlbS50aW1lb3V0TXMgPj0gMTYpIHtcbiAgICAgICAgICBpdGVtLnRpbWVvdXRNcyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBkZWxheVJlbWFpbmluZywgdGltZW91dE1zLCBwcmV2LCBuZXh0LCBzY3JpYmJsZSB9ID0gaXRlbTtcbiAgICAgICAgc3dpdGNoIChzY3JpYmJsZS5zdGF0ZSkge1xuICAgICAgICAgIGNhc2UgXCJhY3RpdmVcIjoge1xuICAgICAgICAgICAgaWYgKG5leHQgJiYgbmV4dCAhPT0gcHJldikge1xuICAgICAgICAgICAgICBpdGVtLnByZXYgPSBuZXh0O1xuICAgICAgICAgICAgICBzY3JpYmJsZS5wb2ludHMucHVzaChuZXh0KTtcbiAgICAgICAgICAgICAgaWYgKGRlbGF5UmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNjcmliYmxlLnBvaW50cy5sZW5ndGggPiA4KSB7XG4gICAgICAgICAgICAgICAgICBzY3JpYmJsZS5wb2ludHMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICh0aW1lb3V0TXMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoc2NyaWJibGUucG9pbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgIHNjcmliYmxlLnBvaW50cy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBpdGVtLmRlbGF5UmVtYWluaW5nID0gc2NyaWJibGUuZGVsYXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInN0b3BwaW5nXCI6IHtcbiAgICAgICAgICAgIGlmIChpdGVtLmRlbGF5UmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgICAgIGlmICh0aW1lb3V0TXMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoc2NyaWJibGUucG9pbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zY3JpYmJsZUl0ZW1zLmRlbGV0ZShpdGVtLmlkKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNjcmliYmxlLnNocmluaykge1xuICAgICAgICAgICAgICAgICAgc2NyaWJibGUuc2l6ZSA9IE1hdGgubWF4KDEsIHNjcmliYmxlLnNpemUgKiAoMSAtIHNjcmliYmxlLnNocmluaykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzY3JpYmJsZS5wb2ludHMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJwYXVzZWRcIjoge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMuZWRpdG9yLnVwZGF0ZUluc3RhbmNlU3RhdGUoe1xuICAgICAgICBzY3JpYmJsZXM6IEFycmF5LmZyb20odGhpcy5zY3JpYmJsZUl0ZW1zLnZhbHVlcygpKS5tYXAoKHsgc2NyaWJibGUgfSkgPT4gKHtcbiAgICAgICAgICAuLi5zY3JpYmJsZSxcbiAgICAgICAgICBwb2ludHM6IFsuLi5zY3JpYmJsZS5wb2ludHNdXG4gICAgICAgIH0pKS5zbGljZSgtNSlcbiAgICAgICAgLy8gbGltaXQgdG8gdGhyZWUgYXMgYSBtaW5vciBzYW5pdHkgY2hlY2tcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xufVxuZXhwb3J0IHtcbiAgU2NyaWJibGVNYW5hZ2VyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2NyaWJibGVNYW5hZ2VyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/ScribbleManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/BoundsSnaps.mjs":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/BoundsSnaps.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BoundsSnaps: () => (/* binding */ BoundsSnaps)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../primitives/Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/uniqueId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs\");\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\n\n\n\n\n\n\nconst round = (x) => {\n  const decimalPlacesTolerance = 8;\n  return Math.round(x * 10 ** decimalPlacesTolerance) / 10 ** decimalPlacesTolerance;\n};\nfunction findAdjacentGaps(gaps, shapeId, gapLength, direction, intersection) {\n  const matches = gaps.filter(\n    (gap) => (direction === \"forward\" ? gap.startNode.id === shapeId : gap.endNode.id === shapeId) && round(gap.length) === round(gapLength) && (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n      gap.breadthIntersection[0],\n      gap.breadthIntersection[1],\n      intersection[0],\n      intersection[1]\n    )\n  );\n  if (matches.length === 0)\n    return [];\n  const nextNodes = /* @__PURE__ */ new Set();\n  matches.forEach((match) => {\n    const node = direction === \"forward\" ? match.endNode.id : match.startNode.id;\n    if (!nextNodes.has(node)) {\n      nextNodes.add(node);\n      const foundGaps = findAdjacentGaps(\n        gaps,\n        node,\n        gapLength,\n        direction,\n        (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n          match.breadthIntersection[0],\n          match.breadthIntersection[1],\n          intersection[0],\n          intersection[1]\n        )\n      );\n      matches.push(...foundGaps);\n    }\n  });\n  return matches;\n}\nfunction dedupeGapSnaps(snaps) {\n  snaps.sort((a, b) => b.gaps.length - a.gaps.length);\n  for (let i = snaps.length - 1; i > 0; i--) {\n    const snap = snaps[i];\n    for (let j = i - 1; j >= 0; j--) {\n      const otherSnap = snaps[j];\n      if (otherSnap.direction === snap.direction && snap.gaps.every(\n        (gap) => otherSnap.gaps.some(\n          (otherGap) => round(gap.startEdge[0].x) === round(otherGap.startEdge[0].x) && round(gap.startEdge[0].y) === round(otherGap.startEdge[0].y) && round(gap.startEdge[1].x) === round(otherGap.startEdge[1].x) && round(gap.startEdge[1].y) === round(otherGap.startEdge[1].y)\n        ) && otherSnap.gaps.some(\n          (otherGap) => round(gap.endEdge[0].x) === round(otherGap.endEdge[0].x) && round(gap.endEdge[0].y) === round(otherGap.endEdge[0].y) && round(gap.endEdge[1].x) === round(otherGap.endEdge[1].x) && round(gap.endEdge[1].y) === round(otherGap.endEdge[1].y)\n        )\n      )) {\n        snaps.splice(i, 1);\n        break;\n      }\n    }\n  }\n}\nclass BoundsSnaps {\n  constructor(manager) {\n    this.manager = manager;\n    this.editor = manager.editor;\n  }\n  editor;\n  getSnapPointsCache() {\n    const { editor } = this;\n    return editor.store.createComputedCache(\"snapPoints\", (shape) => {\n      const pageTransform = editor.getShapePageTransform(shape.id);\n      if (!pageTransform)\n        return void 0;\n      const boundsSnapGeometry = editor.getShapeUtil(shape).getBoundsSnapGeometry(shape);\n      const snapPoints = boundsSnapGeometry.points ?? editor.getShapeGeometry(shape).bounds.cornersAndCenter;\n      if (!pageTransform || !snapPoints)\n        return void 0;\n      return snapPoints.map((point, i) => {\n        const { x, y } = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_3__.Mat.applyToPoint(pageTransform, point);\n        return { x, y, id: `${shape.id}:${i}` };\n      });\n    });\n  }\n  getSnapPoints(shapeId) {\n    return this.getSnapPointsCache().get(shapeId) ?? [];\n  }\n  getSnappablePoints() {\n    const snapPointsCache = this.getSnapPointsCache();\n    const snappableShapes = this.manager.getSnappableShapes();\n    const result = [];\n    for (const shapeId of snappableShapes) {\n      const snapPoints = snapPointsCache.get(shapeId);\n      if (snapPoints) {\n        result.push(...snapPoints);\n      }\n    }\n    return result;\n  }\n  getSnappableGapNodes() {\n    return Array.from(this.manager.getSnappableShapes(), (shapeId) => ({\n      id: shapeId,\n      pageBounds: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assertExists)(this.editor.getShapePageBounds(shapeId))\n    }));\n  }\n  getVisibleGaps() {\n    const horizontal = [];\n    const vertical = [];\n    let startNode, endNode;\n    const sortedShapesOnCurrentPageHorizontal = this.getSnappableGapNodes().sort((a, b) => {\n      return a.pageBounds.minX - b.pageBounds.minX;\n    });\n    for (let i = 0; i < sortedShapesOnCurrentPageHorizontal.length; i++) {\n      startNode = sortedShapesOnCurrentPageHorizontal[i];\n      for (let j = i + 1; j < sortedShapesOnCurrentPageHorizontal.length; j++) {\n        endNode = sortedShapesOnCurrentPageHorizontal[j];\n        if (\n          // is there space between the boxes\n          startNode.pageBounds.maxX < endNode.pageBounds.minX && // and they overlap in the y axis\n          (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangesOverlap)(\n            startNode.pageBounds.minY,\n            startNode.pageBounds.maxY,\n            endNode.pageBounds.minY,\n            endNode.pageBounds.maxY\n          )\n        ) {\n          horizontal.push({\n            startNode,\n            endNode,\n            startEdge: [\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(startNode.pageBounds.maxX, startNode.pageBounds.minY),\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(startNode.pageBounds.maxX, startNode.pageBounds.maxY)\n            ],\n            endEdge: [\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(endNode.pageBounds.minX, endNode.pageBounds.minY),\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(endNode.pageBounds.minX, endNode.pageBounds.maxY)\n            ],\n            length: endNode.pageBounds.minX - startNode.pageBounds.maxX,\n            breadthIntersection: (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n              startNode.pageBounds.minY,\n              startNode.pageBounds.maxY,\n              endNode.pageBounds.minY,\n              endNode.pageBounds.maxY\n            )\n          });\n        }\n      }\n    }\n    const sortedShapesOnCurrentPageVertical = sortedShapesOnCurrentPageHorizontal.sort((a, b) => {\n      return a.pageBounds.minY - b.pageBounds.minY;\n    });\n    for (let i = 0; i < sortedShapesOnCurrentPageVertical.length; i++) {\n      startNode = sortedShapesOnCurrentPageVertical[i];\n      for (let j = i + 1; j < sortedShapesOnCurrentPageVertical.length; j++) {\n        endNode = sortedShapesOnCurrentPageVertical[j];\n        if (\n          // is there space between the boxes\n          startNode.pageBounds.maxY < endNode.pageBounds.minY && // do they overlap in the x axis\n          (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangesOverlap)(\n            startNode.pageBounds.minX,\n            startNode.pageBounds.maxX,\n            endNode.pageBounds.minX,\n            endNode.pageBounds.maxX\n          )\n        ) {\n          vertical.push({\n            startNode,\n            endNode,\n            startEdge: [\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(startNode.pageBounds.minX, startNode.pageBounds.maxY),\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(startNode.pageBounds.maxX, startNode.pageBounds.maxY)\n            ],\n            endEdge: [\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(endNode.pageBounds.minX, endNode.pageBounds.minY),\n              new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(endNode.pageBounds.maxX, endNode.pageBounds.minY)\n            ],\n            length: endNode.pageBounds.minY - startNode.pageBounds.maxY,\n            breadthIntersection: (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n              startNode.pageBounds.minX,\n              startNode.pageBounds.maxX,\n              endNode.pageBounds.minX,\n              endNode.pageBounds.maxX\n            )\n          });\n        }\n      }\n    }\n    return { horizontal, vertical };\n  }\n  snapTranslateShapes({\n    lockedAxis,\n    initialSelectionPageBounds,\n    initialSelectionSnapPoints,\n    dragDelta\n  }) {\n    const snapThreshold = this.manager.getSnapThreshold();\n    const visibleSnapPointsNotInSelection = this.getSnappablePoints();\n    const selectionPageBounds = initialSelectionPageBounds.clone().translate(dragDelta);\n    const selectionSnapPoints = initialSelectionSnapPoints.map(\n      ({ x, y }, i) => ({\n        id: \"selection:\" + i,\n        x: x + dragDelta.x,\n        y: y + dragDelta.y\n      })\n    );\n    const otherNodeSnapPoints = visibleSnapPointsNotInSelection;\n    const nearestSnapsX = [];\n    const nearestSnapsY = [];\n    const minOffset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(snapThreshold, snapThreshold);\n    this.collectPointSnaps({\n      minOffset,\n      nearestSnapsX,\n      nearestSnapsY,\n      otherNodeSnapPoints,\n      selectionSnapPoints\n    });\n    this.collectGapSnaps({\n      selectionPageBounds,\n      nearestSnapsX,\n      nearestSnapsY,\n      minOffset\n    });\n    const nudge = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(\n      lockedAxis === \"x\" ? 0 : nearestSnapsX[0]?.nudge ?? 0,\n      lockedAxis === \"y\" ? 0 : nearestSnapsY[0]?.nudge ?? 0\n    );\n    minOffset.x = 0;\n    minOffset.y = 0;\n    nearestSnapsX.length = 0;\n    nearestSnapsY.length = 0;\n    selectionSnapPoints.forEach((s) => {\n      s.x += nudge.x;\n      s.y += nudge.y;\n    });\n    selectionPageBounds.translate(nudge);\n    this.collectPointSnaps({\n      minOffset,\n      nearestSnapsX,\n      nearestSnapsY,\n      otherNodeSnapPoints,\n      selectionSnapPoints\n    });\n    this.collectGapSnaps({\n      selectionPageBounds,\n      nearestSnapsX,\n      nearestSnapsY,\n      minOffset\n    });\n    const pointSnapsLines = this.getPointSnapLines({\n      nearestSnapsX,\n      nearestSnapsY\n    });\n    const gapSnapLines = this.getGapSnapLines({\n      selectionPageBounds,\n      nearestSnapsX,\n      nearestSnapsY\n    });\n    this.manager.setIndicators([...gapSnapLines, ...pointSnapsLines]);\n    return { nudge };\n  }\n  snapResizeShapes({\n    initialSelectionPageBounds,\n    dragDelta,\n    handle: originalHandle,\n    isAspectRatioLocked,\n    isResizingFromCenter\n  }) {\n    const snapThreshold = this.manager.getSnapThreshold();\n    const {\n      box: unsnappedResizedPageBounds,\n      scaleX,\n      scaleY\n    } = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.Box.Resize(\n      initialSelectionPageBounds,\n      originalHandle,\n      isResizingFromCenter ? dragDelta.x * 2 : dragDelta.x,\n      isResizingFromCenter ? dragDelta.y * 2 : dragDelta.y,\n      isAspectRatioLocked\n    );\n    let handle = originalHandle;\n    if (scaleX < 0) {\n      handle = (0,_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.flipSelectionHandleX)(handle);\n    }\n    if (scaleY < 0) {\n      handle = (0,_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.flipSelectionHandleY)(handle);\n    }\n    if (isResizingFromCenter) {\n      unsnappedResizedPageBounds.center = initialSelectionPageBounds.center;\n    }\n    const isXLocked = handle === \"top\" || handle === \"bottom\";\n    const isYLocked = handle === \"left\" || handle === \"right\";\n    const selectionSnapPoints = getResizeSnapPointsForHandle(handle, unsnappedResizedPageBounds);\n    const otherNodeSnapPoints = this.getSnappablePoints();\n    const nearestSnapsX = [];\n    const nearestSnapsY = [];\n    const minOffset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(snapThreshold, snapThreshold);\n    this.collectPointSnaps({\n      minOffset,\n      nearestSnapsX,\n      nearestSnapsY,\n      otherNodeSnapPoints,\n      selectionSnapPoints\n    });\n    const nudge = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec(\n      isXLocked ? 0 : nearestSnapsX[0]?.nudge ?? 0,\n      isYLocked ? 0 : nearestSnapsY[0]?.nudge ?? 0\n    );\n    if (isAspectRatioLocked && (0,_primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.isSelectionCorner)(handle) && nudge.len() !== 0) {\n      const primaryNudgeAxis = nearestSnapsX.length && nearestSnapsY.length ? Math.abs(nudge.x) < Math.abs(nudge.y) ? \"x\" : \"y\" : nearestSnapsX.length ? \"x\" : \"y\";\n      const ratio = initialSelectionPageBounds.aspectRatio;\n      if (primaryNudgeAxis === \"x\") {\n        nearestSnapsY.length = 0;\n        nudge.y = nudge.x / ratio;\n        if (handle === \"bottom_left\" || handle === \"top_right\") {\n          nudge.y = -nudge.y;\n        }\n      } else {\n        nearestSnapsX.length = 0;\n        nudge.x = nudge.y * ratio;\n        if (handle === \"bottom_left\" || handle === \"top_right\") {\n          nudge.x = -nudge.x;\n        }\n      }\n    }\n    const snappedDelta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec.Add(dragDelta, nudge);\n    const { box: snappedResizedPageBounds } = _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.Box.Resize(\n      initialSelectionPageBounds,\n      originalHandle,\n      isResizingFromCenter ? snappedDelta.x * 2 : snappedDelta.x,\n      isResizingFromCenter ? snappedDelta.y * 2 : snappedDelta.y,\n      isAspectRatioLocked\n    );\n    if (isResizingFromCenter) {\n      snappedResizedPageBounds.center = initialSelectionPageBounds.center;\n    }\n    const snappedSelectionPoints = getResizeSnapPointsForHandle(\"any\", snappedResizedPageBounds);\n    nearestSnapsX.length = 0;\n    nearestSnapsY.length = 0;\n    minOffset.x = 0;\n    minOffset.y = 0;\n    this.collectPointSnaps({\n      minOffset,\n      nearestSnapsX,\n      nearestSnapsY,\n      otherNodeSnapPoints,\n      selectionSnapPoints: snappedSelectionPoints\n    });\n    const pointSnaps = this.getPointSnapLines({\n      nearestSnapsX,\n      nearestSnapsY\n    });\n    this.manager.setIndicators([...pointSnaps]);\n    return { nudge };\n  }\n  collectPointSnaps({\n    selectionSnapPoints,\n    otherNodeSnapPoints,\n    minOffset,\n    nearestSnapsX,\n    nearestSnapsY\n  }) {\n    for (const thisSnapPoint of selectionSnapPoints) {\n      for (const otherSnapPoint of otherNodeSnapPoints) {\n        const offset = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec.Sub(thisSnapPoint, otherSnapPoint);\n        const offsetX = Math.abs(offset.x);\n        const offsetY = Math.abs(offset.y);\n        if (round(offsetX) <= round(minOffset.x)) {\n          if (round(offsetX) < round(minOffset.x)) {\n            nearestSnapsX.length = 0;\n          }\n          nearestSnapsX.push({\n            type: \"points\",\n            points: { thisPoint: thisSnapPoint, otherPoint: otherSnapPoint },\n            nudge: otherSnapPoint.x - thisSnapPoint.x\n          });\n          minOffset.x = offsetX;\n        }\n        if (round(offsetY) <= round(minOffset.y)) {\n          if (round(offsetY) < round(minOffset.y)) {\n            nearestSnapsY.length = 0;\n          }\n          nearestSnapsY.push({\n            type: \"points\",\n            points: { thisPoint: thisSnapPoint, otherPoint: otherSnapPoint },\n            nudge: otherSnapPoint.y - thisSnapPoint.y\n          });\n          minOffset.y = offsetY;\n        }\n      }\n    }\n  }\n  collectGapSnaps({\n    selectionPageBounds,\n    minOffset,\n    nearestSnapsX,\n    nearestSnapsY\n  }) {\n    const { horizontal, vertical } = this.getVisibleGaps();\n    for (const gap of horizontal) {\n      if (!(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangesOverlap)(\n        gap.breadthIntersection[0],\n        gap.breadthIntersection[1],\n        selectionPageBounds.minY,\n        selectionPageBounds.maxY\n      )) {\n        continue;\n      }\n      const gapMidX = gap.startEdge[0].x + gap.length / 2;\n      const centerNudge = gapMidX - selectionPageBounds.center.x;\n      const gapIsLargerThanSelection = gap.length > selectionPageBounds.width;\n      if (gapIsLargerThanSelection && round(Math.abs(centerNudge)) <= round(minOffset.x)) {\n        if (round(Math.abs(centerNudge)) < round(minOffset.x)) {\n          nearestSnapsX.length = 0;\n        }\n        minOffset.x = Math.abs(centerNudge);\n        const snap = {\n          type: \"gap_center\",\n          gap,\n          nudge: centerNudge\n        };\n        const otherCenterSnap = nearestSnapsX.find(({ type }) => type === \"gap_center\");\n        const gapBreadthsOverlap = otherCenterSnap && (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n          gap.breadthIntersection[0],\n          gap.breadthIntersection[1],\n          otherCenterSnap.gap.breadthIntersection[0],\n          otherCenterSnap.gap.breadthIntersection[1]\n        );\n        if (otherCenterSnap && otherCenterSnap.gap.length > gap.length && gapBreadthsOverlap) {\n          nearestSnapsX[nearestSnapsX.indexOf(otherCenterSnap)] = snap;\n        } else if (!otherCenterSnap || !gapBreadthsOverlap) {\n          nearestSnapsX.push(snap);\n        }\n      }\n      const duplicationLeftX = gap.startNode.pageBounds.minX - gap.length;\n      const selectionRightX = selectionPageBounds.maxX;\n      const duplicationLeftNudge = duplicationLeftX - selectionRightX;\n      if (round(Math.abs(duplicationLeftNudge)) <= round(minOffset.x)) {\n        if (round(Math.abs(duplicationLeftNudge)) < round(minOffset.x)) {\n          nearestSnapsX.length = 0;\n        }\n        minOffset.x = Math.abs(duplicationLeftNudge);\n        nearestSnapsX.push({\n          type: \"gap_duplicate\",\n          gap,\n          protrusionDirection: \"left\",\n          nudge: duplicationLeftNudge\n        });\n      }\n      const duplicationRightX = gap.endNode.pageBounds.maxX + gap.length;\n      const selectionLeftX = selectionPageBounds.minX;\n      const duplicationRightNudge = duplicationRightX - selectionLeftX;\n      if (round(Math.abs(duplicationRightNudge)) <= round(minOffset.x)) {\n        if (round(Math.abs(duplicationRightNudge)) < round(minOffset.x)) {\n          nearestSnapsX.length = 0;\n        }\n        minOffset.x = Math.abs(duplicationRightNudge);\n        nearestSnapsX.push({\n          type: \"gap_duplicate\",\n          gap,\n          protrusionDirection: \"right\",\n          nudge: duplicationRightNudge\n        });\n      }\n    }\n    for (const gap of vertical) {\n      if (!(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangesOverlap)(\n        gap.breadthIntersection[0],\n        gap.breadthIntersection[1],\n        selectionPageBounds.minX,\n        selectionPageBounds.maxX\n      )) {\n        continue;\n      }\n      const gapMidY = gap.startEdge[0].y + gap.length / 2;\n      const centerNudge = gapMidY - selectionPageBounds.center.y;\n      const gapIsLargerThanSelection = gap.length > selectionPageBounds.height;\n      if (gapIsLargerThanSelection && round(Math.abs(centerNudge)) <= round(minOffset.y)) {\n        if (round(Math.abs(centerNudge)) < round(minOffset.y)) {\n          nearestSnapsY.length = 0;\n        }\n        minOffset.y = Math.abs(centerNudge);\n        const snap = {\n          type: \"gap_center\",\n          gap,\n          nudge: centerNudge\n        };\n        const otherCenterSnap = nearestSnapsY.find(({ type }) => type === \"gap_center\");\n        const gapBreadthsOverlap = otherCenterSnap && (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangesOverlap)(\n          otherCenterSnap.gap.breadthIntersection[0],\n          otherCenterSnap.gap.breadthIntersection[1],\n          gap.breadthIntersection[0],\n          gap.breadthIntersection[1]\n        );\n        if (otherCenterSnap && otherCenterSnap.gap.length > gap.length && gapBreadthsOverlap) {\n          nearestSnapsY[nearestSnapsY.indexOf(otherCenterSnap)] = snap;\n        } else if (!otherCenterSnap || !gapBreadthsOverlap) {\n          nearestSnapsY.push(snap);\n        }\n        continue;\n      }\n      const duplicationTopY = gap.startNode.pageBounds.minY - gap.length;\n      const selectionBottomY = selectionPageBounds.maxY;\n      const duplicationTopNudge = duplicationTopY - selectionBottomY;\n      if (round(Math.abs(duplicationTopNudge)) <= round(minOffset.y)) {\n        if (round(Math.abs(duplicationTopNudge)) < round(minOffset.y)) {\n          nearestSnapsY.length = 0;\n        }\n        minOffset.y = Math.abs(duplicationTopNudge);\n        nearestSnapsY.push({\n          type: \"gap_duplicate\",\n          gap,\n          protrusionDirection: \"top\",\n          nudge: duplicationTopNudge\n        });\n      }\n      const duplicationBottomY = gap.endNode.pageBounds.maxY + gap.length;\n      const selectionTopY = selectionPageBounds.minY;\n      const duplicationBottomNudge = duplicationBottomY - selectionTopY;\n      if (round(Math.abs(duplicationBottomNudge)) <= round(minOffset.y)) {\n        if (round(Math.abs(duplicationBottomNudge)) < round(minOffset.y)) {\n          nearestSnapsY.length = 0;\n        }\n        minOffset.y = Math.abs(duplicationBottomNudge);\n        nearestSnapsY.push({\n          type: \"gap_duplicate\",\n          gap,\n          protrusionDirection: \"bottom\",\n          nudge: duplicationBottomNudge\n        });\n      }\n    }\n  }\n  getPointSnapLines({\n    nearestSnapsX,\n    nearestSnapsY\n  }) {\n    const snapGroupsX = {};\n    const snapGroupsY = {};\n    if (nearestSnapsX.length > 0) {\n      for (const snap of nearestSnapsX) {\n        if (snap.type === \"points\") {\n          const key = round(snap.points.otherPoint.x);\n          if (!snapGroupsX[key]) {\n            snapGroupsX[key] = [];\n          }\n          snapGroupsX[key].push(snap.points);\n        }\n      }\n    }\n    if (nearestSnapsY.length > 0) {\n      for (const snap of nearestSnapsY) {\n        if (snap.type === \"points\") {\n          const key = round(snap.points.otherPoint.y);\n          if (!snapGroupsY[key]) {\n            snapGroupsY[key] = [];\n          }\n          snapGroupsY[key].push(snap.points);\n        }\n      }\n    }\n    return Object.values(snapGroupsX).concat(Object.values(snapGroupsY)).map((snapGroup) => ({\n      id: (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_6__.uniqueId)(),\n      type: \"points\",\n      points: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.dedupe)(\n        snapGroup.map((snap) => _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec.From(snap.otherPoint)).concat(snapGroup.map((snap) => _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec.From(snap.thisPoint))),\n        (a, b) => a.equals(b)\n      )\n    }));\n  }\n  getGapSnapLines({\n    selectionPageBounds,\n    nearestSnapsX,\n    nearestSnapsY\n  }) {\n    const { vertical, horizontal } = this.getVisibleGaps();\n    const selectionSides = {\n      top: selectionPageBounds.sides[0],\n      right: selectionPageBounds.sides[1],\n      // need bottom and left to be sorted asc, which .sides is not.\n      bottom: [selectionPageBounds.corners[3], selectionPageBounds.corners[2]],\n      left: [selectionPageBounds.corners[0], selectionPageBounds.corners[3]]\n    };\n    const result = [];\n    if (nearestSnapsX.length > 0) {\n      for (const snap of nearestSnapsX) {\n        if (snap.type === \"points\")\n          continue;\n        const {\n          gap: { breadthIntersection, startEdge, startNode, endNode, length, endEdge }\n        } = snap;\n        switch (snap.type) {\n          case \"gap_center\": {\n            const newGapsLength = (length - selectionPageBounds.width) / 2;\n            const gapBreadthIntersection = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n              breadthIntersection[0],\n              breadthIntersection[1],\n              selectionPageBounds.minY,\n              selectionPageBounds.maxY\n            );\n            result.push({\n              type: \"gaps\",\n              direction: \"horizontal\",\n              id: (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_6__.uniqueId)(),\n              gaps: [\n                ...findAdjacentGaps(\n                  horizontal,\n                  startNode.id,\n                  newGapsLength,\n                  \"backward\",\n                  gapBreadthIntersection\n                ),\n                {\n                  startEdge,\n                  endEdge: selectionSides.left\n                },\n                {\n                  startEdge: selectionSides.right,\n                  endEdge\n                },\n                ...findAdjacentGaps(\n                  horizontal,\n                  endNode.id,\n                  newGapsLength,\n                  \"forward\",\n                  gapBreadthIntersection\n                )\n              ]\n            });\n            break;\n          }\n          case \"gap_duplicate\": {\n            const gapBreadthIntersection = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n              breadthIntersection[0],\n              breadthIntersection[1],\n              selectionPageBounds.minY,\n              selectionPageBounds.maxY\n            );\n            result.push({\n              type: \"gaps\",\n              direction: \"horizontal\",\n              id: (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_6__.uniqueId)(),\n              gaps: snap.protrusionDirection === \"left\" ? [\n                {\n                  startEdge: selectionSides.right,\n                  endEdge: startEdge.map(\n                    (v) => v.clone().addXY(-startNode.pageBounds.width, 0)\n                  )\n                },\n                { startEdge, endEdge },\n                ...findAdjacentGaps(\n                  horizontal,\n                  endNode.id,\n                  length,\n                  \"forward\",\n                  gapBreadthIntersection\n                )\n              ] : [\n                ...findAdjacentGaps(\n                  horizontal,\n                  startNode.id,\n                  length,\n                  \"backward\",\n                  gapBreadthIntersection\n                ),\n                { startEdge, endEdge },\n                {\n                  startEdge: endEdge.map(\n                    (v) => v.clone().addXY(snap.gap.endNode.pageBounds.width, 0)\n                  ),\n                  endEdge: selectionSides.left\n                }\n              ]\n            });\n            break;\n          }\n        }\n      }\n    }\n    if (nearestSnapsY.length > 0) {\n      for (const snap of nearestSnapsY) {\n        if (snap.type === \"points\")\n          continue;\n        const {\n          gap: { breadthIntersection, startEdge, startNode, endNode, length, endEdge }\n        } = snap;\n        switch (snap.type) {\n          case \"gap_center\": {\n            const newGapsLength = (length - selectionPageBounds.height) / 2;\n            const gapBreadthIntersection = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n              breadthIntersection[0],\n              breadthIntersection[1],\n              selectionPageBounds.minX,\n              selectionPageBounds.maxX\n            );\n            result.push({\n              type: \"gaps\",\n              direction: \"vertical\",\n              id: (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_6__.uniqueId)(),\n              gaps: [\n                ...findAdjacentGaps(\n                  vertical,\n                  startNode.id,\n                  newGapsLength,\n                  \"backward\",\n                  gapBreadthIntersection\n                ),\n                {\n                  startEdge,\n                  endEdge: selectionSides.top\n                },\n                {\n                  startEdge: selectionSides.bottom,\n                  endEdge\n                },\n                ...findAdjacentGaps(\n                  vertical,\n                  snap.gap.endNode.id,\n                  newGapsLength,\n                  \"forward\",\n                  gapBreadthIntersection\n                )\n              ]\n            });\n            break;\n          }\n          case \"gap_duplicate\":\n            {\n              const gapBreadthIntersection = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.rangeIntersection)(\n                breadthIntersection[0],\n                breadthIntersection[1],\n                selectionPageBounds.minX,\n                selectionPageBounds.maxX\n              );\n              result.push({\n                type: \"gaps\",\n                direction: \"vertical\",\n                id: (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_6__.uniqueId)(),\n                gaps: snap.protrusionDirection === \"top\" ? [\n                  {\n                    startEdge: selectionSides.bottom,\n                    endEdge: startEdge.map(\n                      (v) => v.clone().addXY(0, -startNode.pageBounds.height)\n                    )\n                  },\n                  { startEdge, endEdge },\n                  ...findAdjacentGaps(\n                    vertical,\n                    endNode.id,\n                    length,\n                    \"forward\",\n                    gapBreadthIntersection\n                  )\n                ] : [\n                  ...findAdjacentGaps(\n                    vertical,\n                    startNode.id,\n                    length,\n                    \"backward\",\n                    gapBreadthIntersection\n                  ),\n                  { startEdge, endEdge },\n                  {\n                    startEdge: endEdge.map(\n                      (v) => v.clone().addXY(0, endNode.pageBounds.height)\n                    ),\n                    endEdge: selectionSides.top\n                  }\n                ]\n              });\n            }\n            break;\n        }\n      }\n    }\n    dedupeGapSnaps(result);\n    return result;\n  }\n}\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], BoundsSnaps.prototype, \"getSnapPointsCache\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], BoundsSnaps.prototype, \"getSnappablePoints\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], BoundsSnaps.prototype, \"getSnappableGapNodes\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], BoundsSnaps.prototype, \"getVisibleGaps\", 1);\nfunction getResizeSnapPointsForHandle(handle, selectionPageBounds) {\n  const { minX, maxX, minY, maxY } = selectionPageBounds;\n  const result = [];\n  switch (handle) {\n    case \"top\":\n    case \"left\":\n    case \"top_left\":\n    case \"any\":\n      result.push({\n        id: \"top_left\",\n        handle: \"top_left\",\n        x: minX,\n        y: minY\n      });\n  }\n  switch (handle) {\n    case \"top\":\n    case \"right\":\n    case \"top_right\":\n    case \"any\":\n      result.push({\n        id: \"top_right\",\n        handle: \"top_right\",\n        x: maxX,\n        y: minY\n      });\n  }\n  switch (handle) {\n    case \"bottom\":\n    case \"right\":\n    case \"bottom_right\":\n    case \"any\":\n      result.push({\n        id: \"bottom_right\",\n        handle: \"bottom_right\",\n        x: maxX,\n        y: maxY\n      });\n  }\n  switch (handle) {\n    case \"bottom\":\n    case \"left\":\n    case \"bottom_left\":\n    case \"any\":\n      result.push({\n        id: \"bottom_left\",\n        handle: \"bottom_left\",\n        x: minX,\n        y: maxY\n      });\n  }\n  return result;\n}\n\n//# sourceMappingURL=BoundsSnaps.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9Cb3VuZHNTbmFwcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxRQUFRO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN5QztBQUNZO0FBTWhCO0FBQ2E7QUFDQTtBQUMrQjtBQUMxQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnSkFBZ0osd0VBQWlCO0FBQ2pLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0VBQWlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsT0FBTztBQUN4QztBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTyxFQUFFLG9EQUFHO0FBQzVCLGlCQUFpQixhQUFhLFNBQVMsR0FBRyxFQUFFO0FBQzVDLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMkRBQVk7QUFDOUIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLG9CQUFvQixnREFBZ0Q7QUFDcEU7QUFDQSwwQkFBMEIsZ0RBQWdEO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxvRUFBYTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvREFBRztBQUNyQixrQkFBa0Isb0RBQUc7QUFDckI7QUFDQTtBQUNBLGtCQUFrQixvREFBRztBQUNyQixrQkFBa0Isb0RBQUc7QUFDckI7QUFDQTtBQUNBLGlDQUFpQyx3RUFBaUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLG9CQUFvQiw4Q0FBOEM7QUFDbEU7QUFDQSwwQkFBMEIsOENBQThDO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxvRUFBYTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvREFBRztBQUNyQixrQkFBa0Isb0RBQUc7QUFDckI7QUFDQTtBQUNBLGtCQUFrQixvREFBRztBQUNyQixrQkFBa0Isb0RBQUc7QUFDckI7QUFDQTtBQUNBLGlDQUFpQyx3RUFBaUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxNQUFNO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG9EQUFHO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHNCQUFzQixvREFBRztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxFQUFFLG9EQUFHO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUVBQW9CO0FBQ25DO0FBQ0E7QUFDQSxlQUFlLHlFQUFvQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixvREFBRztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsc0JBQXNCLG9EQUFHO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixzRUFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixvREFBRztBQUM1QixZQUFZLGdDQUFnQyxFQUFFLG9EQUFHO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSx1QkFBdUIsb0RBQUc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBc0Q7QUFDNUU7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBc0Q7QUFDNUU7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsWUFBWSx1QkFBdUI7QUFDbkM7QUFDQSxXQUFXLG9FQUFhO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsTUFBTTtBQUM1RCxzREFBc0Qsd0VBQWlCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvRUFBYTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELE1BQU07QUFDNUQsc0RBQXNELG9FQUFhO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDZEQUFRO0FBQ2xCO0FBQ0EsY0FBYyxxREFBTTtBQUNwQixnQ0FBZ0Msb0RBQUcsdURBQXVELG9EQUFHO0FBQzdGO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLHVCQUF1QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHdFQUFpQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZEQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHdFQUFpQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZEQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixrQkFBa0Isb0JBQW9CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvQkFBb0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx3RUFBaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2REFBUTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHdFQUFpQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDZEQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixvQkFBb0Isb0JBQW9CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLFVBQVUseUJBQXlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL21hbmFnZXJzL1NuYXBNYW5hZ2VyL0JvdW5kc1NuYXBzLm1qcz83MTQzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19kZWNvcmF0ZUNsYXNzID0gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBraW5kKSA9PiB7XG4gIHZhciByZXN1bHQgPSBraW5kID4gMSA/IHZvaWQgMCA6IGtpbmQgPyBfX2dldE93blByb3BEZXNjKHRhcmdldCwga2V5KSA6IHRhcmdldDtcbiAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMSwgZGVjb3JhdG9yOyBpID49IDA7IGktLSlcbiAgICBpZiAoZGVjb3JhdG9yID0gZGVjb3JhdG9yc1tpXSlcbiAgICAgIHJlc3VsdCA9IChraW5kID8gZGVjb3JhdG9yKHRhcmdldCwga2V5LCByZXN1bHQpIDogZGVjb3JhdG9yKHJlc3VsdCkpIHx8IHJlc3VsdDtcbiAgaWYgKGtpbmQgJiYgcmVzdWx0KVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIGtleSwgcmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5pbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyBhc3NlcnRFeGlzdHMsIGRlZHVwZSB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQge1xuICBCb3gsXG4gIGZsaXBTZWxlY3Rpb25IYW5kbGVYLFxuICBmbGlwU2VsZWN0aW9uSGFuZGxlWSxcbiAgaXNTZWxlY3Rpb25Db3JuZXJcbn0gZnJvbSBcIi4uLy4uLy4uL3ByaW1pdGl2ZXMvQm94Lm1qc1wiO1xuaW1wb3J0IHsgTWF0IH0gZnJvbSBcIi4uLy4uLy4uL3ByaW1pdGl2ZXMvTWF0Lm1qc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uLy4uLy4uL3ByaW1pdGl2ZXMvVmVjLm1qc1wiO1xuaW1wb3J0IHsgcmFuZ2VJbnRlcnNlY3Rpb24sIHJhbmdlc092ZXJsYXAgfSBmcm9tIFwiLi4vLi4vLi4vcHJpbWl0aXZlcy91dGlscy5tanNcIjtcbmltcG9ydCB7IHVuaXF1ZUlkIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL3VuaXF1ZUlkLm1qc1wiO1xuY29uc3Qgcm91bmQgPSAoeCkgPT4ge1xuICBjb25zdCBkZWNpbWFsUGxhY2VzVG9sZXJhbmNlID0gODtcbiAgcmV0dXJuIE1hdGgucm91bmQoeCAqIDEwICoqIGRlY2ltYWxQbGFjZXNUb2xlcmFuY2UpIC8gMTAgKiogZGVjaW1hbFBsYWNlc1RvbGVyYW5jZTtcbn07XG5mdW5jdGlvbiBmaW5kQWRqYWNlbnRHYXBzKGdhcHMsIHNoYXBlSWQsIGdhcExlbmd0aCwgZGlyZWN0aW9uLCBpbnRlcnNlY3Rpb24pIHtcbiAgY29uc3QgbWF0Y2hlcyA9IGdhcHMuZmlsdGVyKFxuICAgIChnYXApID0+IChkaXJlY3Rpb24gPT09IFwiZm9yd2FyZFwiID8gZ2FwLnN0YXJ0Tm9kZS5pZCA9PT0gc2hhcGVJZCA6IGdhcC5lbmROb2RlLmlkID09PSBzaGFwZUlkKSAmJiByb3VuZChnYXAubGVuZ3RoKSA9PT0gcm91bmQoZ2FwTGVuZ3RoKSAmJiByYW5nZUludGVyc2VjdGlvbihcbiAgICAgIGdhcC5icmVhZHRoSW50ZXJzZWN0aW9uWzBdLFxuICAgICAgZ2FwLmJyZWFkdGhJbnRlcnNlY3Rpb25bMV0sXG4gICAgICBpbnRlcnNlY3Rpb25bMF0sXG4gICAgICBpbnRlcnNlY3Rpb25bMV1cbiAgICApXG4gICk7XG4gIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMClcbiAgICByZXR1cm4gW107XG4gIGNvbnN0IG5leHROb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIG1hdGNoZXMuZm9yRWFjaCgobWF0Y2gpID0+IHtcbiAgICBjb25zdCBub2RlID0gZGlyZWN0aW9uID09PSBcImZvcndhcmRcIiA/IG1hdGNoLmVuZE5vZGUuaWQgOiBtYXRjaC5zdGFydE5vZGUuaWQ7XG4gICAgaWYgKCFuZXh0Tm9kZXMuaGFzKG5vZGUpKSB7XG4gICAgICBuZXh0Tm9kZXMuYWRkKG5vZGUpO1xuICAgICAgY29uc3QgZm91bmRHYXBzID0gZmluZEFkamFjZW50R2FwcyhcbiAgICAgICAgZ2FwcyxcbiAgICAgICAgbm9kZSxcbiAgICAgICAgZ2FwTGVuZ3RoLFxuICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgIHJhbmdlSW50ZXJzZWN0aW9uKFxuICAgICAgICAgIG1hdGNoLmJyZWFkdGhJbnRlcnNlY3Rpb25bMF0sXG4gICAgICAgICAgbWF0Y2guYnJlYWR0aEludGVyc2VjdGlvblsxXSxcbiAgICAgICAgICBpbnRlcnNlY3Rpb25bMF0sXG4gICAgICAgICAgaW50ZXJzZWN0aW9uWzFdXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBtYXRjaGVzLnB1c2goLi4uZm91bmRHYXBzKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gbWF0Y2hlcztcbn1cbmZ1bmN0aW9uIGRlZHVwZUdhcFNuYXBzKHNuYXBzKSB7XG4gIHNuYXBzLnNvcnQoKGEsIGIpID0+IGIuZ2Fwcy5sZW5ndGggLSBhLmdhcHMubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IHNuYXBzLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICBjb25zdCBzbmFwID0gc25hcHNbaV07XG4gICAgZm9yIChsZXQgaiA9IGkgLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgY29uc3Qgb3RoZXJTbmFwID0gc25hcHNbal07XG4gICAgICBpZiAob3RoZXJTbmFwLmRpcmVjdGlvbiA9PT0gc25hcC5kaXJlY3Rpb24gJiYgc25hcC5nYXBzLmV2ZXJ5KFxuICAgICAgICAoZ2FwKSA9PiBvdGhlclNuYXAuZ2Fwcy5zb21lKFxuICAgICAgICAgIChvdGhlckdhcCkgPT4gcm91bmQoZ2FwLnN0YXJ0RWRnZVswXS54KSA9PT0gcm91bmQob3RoZXJHYXAuc3RhcnRFZGdlWzBdLngpICYmIHJvdW5kKGdhcC5zdGFydEVkZ2VbMF0ueSkgPT09IHJvdW5kKG90aGVyR2FwLnN0YXJ0RWRnZVswXS55KSAmJiByb3VuZChnYXAuc3RhcnRFZGdlWzFdLngpID09PSByb3VuZChvdGhlckdhcC5zdGFydEVkZ2VbMV0ueCkgJiYgcm91bmQoZ2FwLnN0YXJ0RWRnZVsxXS55KSA9PT0gcm91bmQob3RoZXJHYXAuc3RhcnRFZGdlWzFdLnkpXG4gICAgICAgICkgJiYgb3RoZXJTbmFwLmdhcHMuc29tZShcbiAgICAgICAgICAob3RoZXJHYXApID0+IHJvdW5kKGdhcC5lbmRFZGdlWzBdLngpID09PSByb3VuZChvdGhlckdhcC5lbmRFZGdlWzBdLngpICYmIHJvdW5kKGdhcC5lbmRFZGdlWzBdLnkpID09PSByb3VuZChvdGhlckdhcC5lbmRFZGdlWzBdLnkpICYmIHJvdW5kKGdhcC5lbmRFZGdlWzFdLngpID09PSByb3VuZChvdGhlckdhcC5lbmRFZGdlWzFdLngpICYmIHJvdW5kKGdhcC5lbmRFZGdlWzFdLnkpID09PSByb3VuZChvdGhlckdhcC5lbmRFZGdlWzFdLnkpXG4gICAgICAgIClcbiAgICAgICkpIHtcbiAgICAgICAgc25hcHMuc3BsaWNlKGksIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmNsYXNzIEJvdW5kc1NuYXBzIHtcbiAgY29uc3RydWN0b3IobWFuYWdlcikge1xuICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgdGhpcy5lZGl0b3IgPSBtYW5hZ2VyLmVkaXRvcjtcbiAgfVxuICBlZGl0b3I7XG4gIGdldFNuYXBQb2ludHNDYWNoZSgpIHtcbiAgICBjb25zdCB7IGVkaXRvciB9ID0gdGhpcztcbiAgICByZXR1cm4gZWRpdG9yLnN0b3JlLmNyZWF0ZUNvbXB1dGVkQ2FjaGUoXCJzbmFwUG9pbnRzXCIsIChzaGFwZSkgPT4ge1xuICAgICAgY29uc3QgcGFnZVRyYW5zZm9ybSA9IGVkaXRvci5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGUuaWQpO1xuICAgICAgaWYgKCFwYWdlVHJhbnNmb3JtKVxuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgY29uc3QgYm91bmRzU25hcEdlb21ldHJ5ID0gZWRpdG9yLmdldFNoYXBlVXRpbChzaGFwZSkuZ2V0Qm91bmRzU25hcEdlb21ldHJ5KHNoYXBlKTtcbiAgICAgIGNvbnN0IHNuYXBQb2ludHMgPSBib3VuZHNTbmFwR2VvbWV0cnkucG9pbnRzID8/IGVkaXRvci5nZXRTaGFwZUdlb21ldHJ5KHNoYXBlKS5ib3VuZHMuY29ybmVyc0FuZENlbnRlcjtcbiAgICAgIGlmICghcGFnZVRyYW5zZm9ybSB8fCAhc25hcFBvaW50cylcbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgIHJldHVybiBzbmFwUG9pbnRzLm1hcCgocG9pbnQsIGkpID0+IHtcbiAgICAgICAgY29uc3QgeyB4LCB5IH0gPSBNYXQuYXBwbHlUb1BvaW50KHBhZ2VUcmFuc2Zvcm0sIHBvaW50KTtcbiAgICAgICAgcmV0dXJuIHsgeCwgeSwgaWQ6IGAke3NoYXBlLmlkfToke2l9YCB9O1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgZ2V0U25hcFBvaW50cyhzaGFwZUlkKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U25hcFBvaW50c0NhY2hlKCkuZ2V0KHNoYXBlSWQpID8/IFtdO1xuICB9XG4gIGdldFNuYXBwYWJsZVBvaW50cygpIHtcbiAgICBjb25zdCBzbmFwUG9pbnRzQ2FjaGUgPSB0aGlzLmdldFNuYXBQb2ludHNDYWNoZSgpO1xuICAgIGNvbnN0IHNuYXBwYWJsZVNoYXBlcyA9IHRoaXMubWFuYWdlci5nZXRTbmFwcGFibGVTaGFwZXMoKTtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHNoYXBlSWQgb2Ygc25hcHBhYmxlU2hhcGVzKSB7XG4gICAgICBjb25zdCBzbmFwUG9pbnRzID0gc25hcFBvaW50c0NhY2hlLmdldChzaGFwZUlkKTtcbiAgICAgIGlmIChzbmFwUG9pbnRzKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKC4uLnNuYXBQb2ludHMpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGdldFNuYXBwYWJsZUdhcE5vZGVzKCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubWFuYWdlci5nZXRTbmFwcGFibGVTaGFwZXMoKSwgKHNoYXBlSWQpID0+ICh7XG4gICAgICBpZDogc2hhcGVJZCxcbiAgICAgIHBhZ2VCb3VuZHM6IGFzc2VydEV4aXN0cyh0aGlzLmVkaXRvci5nZXRTaGFwZVBhZ2VCb3VuZHMoc2hhcGVJZCkpXG4gICAgfSkpO1xuICB9XG4gIGdldFZpc2libGVHYXBzKCkge1xuICAgIGNvbnN0IGhvcml6b250YWwgPSBbXTtcbiAgICBjb25zdCB2ZXJ0aWNhbCA9IFtdO1xuICAgIGxldCBzdGFydE5vZGUsIGVuZE5vZGU7XG4gICAgY29uc3Qgc29ydGVkU2hhcGVzT25DdXJyZW50UGFnZUhvcml6b250YWwgPSB0aGlzLmdldFNuYXBwYWJsZUdhcE5vZGVzKCkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEucGFnZUJvdW5kcy5taW5YIC0gYi5wYWdlQm91bmRzLm1pblg7XG4gICAgfSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3J0ZWRTaGFwZXNPbkN1cnJlbnRQYWdlSG9yaXpvbnRhbC5sZW5ndGg7IGkrKykge1xuICAgICAgc3RhcnROb2RlID0gc29ydGVkU2hhcGVzT25DdXJyZW50UGFnZUhvcml6b250YWxbaV07XG4gICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBzb3J0ZWRTaGFwZXNPbkN1cnJlbnRQYWdlSG9yaXpvbnRhbC5sZW5ndGg7IGorKykge1xuICAgICAgICBlbmROb2RlID0gc29ydGVkU2hhcGVzT25DdXJyZW50UGFnZUhvcml6b250YWxbal07XG4gICAgICAgIGlmIChcbiAgICAgICAgICAvLyBpcyB0aGVyZSBzcGFjZSBiZXR3ZWVuIHRoZSBib3hlc1xuICAgICAgICAgIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1heFggPCBlbmROb2RlLnBhZ2VCb3VuZHMubWluWCAmJiAvLyBhbmQgdGhleSBvdmVybGFwIGluIHRoZSB5IGF4aXNcbiAgICAgICAgICByYW5nZXNPdmVybGFwKFxuICAgICAgICAgICAgc3RhcnROb2RlLnBhZ2VCb3VuZHMubWluWSxcbiAgICAgICAgICAgIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1heFksXG4gICAgICAgICAgICBlbmROb2RlLnBhZ2VCb3VuZHMubWluWSxcbiAgICAgICAgICAgIGVuZE5vZGUucGFnZUJvdW5kcy5tYXhZXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBob3Jpem9udGFsLnB1c2goe1xuICAgICAgICAgICAgc3RhcnROb2RlLFxuICAgICAgICAgICAgZW5kTm9kZSxcbiAgICAgICAgICAgIHN0YXJ0RWRnZTogW1xuICAgICAgICAgICAgICBuZXcgVmVjKHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1heFgsIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1pblkpLFxuICAgICAgICAgICAgICBuZXcgVmVjKHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1heFgsIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1heFkpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZW5kRWRnZTogW1xuICAgICAgICAgICAgICBuZXcgVmVjKGVuZE5vZGUucGFnZUJvdW5kcy5taW5YLCBlbmROb2RlLnBhZ2VCb3VuZHMubWluWSksXG4gICAgICAgICAgICAgIG5ldyBWZWMoZW5kTm9kZS5wYWdlQm91bmRzLm1pblgsIGVuZE5vZGUucGFnZUJvdW5kcy5tYXhZKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGxlbmd0aDogZW5kTm9kZS5wYWdlQm91bmRzLm1pblggLSBzdGFydE5vZGUucGFnZUJvdW5kcy5tYXhYLFxuICAgICAgICAgICAgYnJlYWR0aEludGVyc2VjdGlvbjogcmFuZ2VJbnRlcnNlY3Rpb24oXG4gICAgICAgICAgICAgIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1pblksXG4gICAgICAgICAgICAgIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1heFksXG4gICAgICAgICAgICAgIGVuZE5vZGUucGFnZUJvdW5kcy5taW5ZLFxuICAgICAgICAgICAgICBlbmROb2RlLnBhZ2VCb3VuZHMubWF4WVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNvcnRlZFNoYXBlc09uQ3VycmVudFBhZ2VWZXJ0aWNhbCA9IHNvcnRlZFNoYXBlc09uQ3VycmVudFBhZ2VIb3Jpem9udGFsLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLnBhZ2VCb3VuZHMubWluWSAtIGIucGFnZUJvdW5kcy5taW5ZO1xuICAgIH0pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc29ydGVkU2hhcGVzT25DdXJyZW50UGFnZVZlcnRpY2FsLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzdGFydE5vZGUgPSBzb3J0ZWRTaGFwZXNPbkN1cnJlbnRQYWdlVmVydGljYWxbaV07XG4gICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBzb3J0ZWRTaGFwZXNPbkN1cnJlbnRQYWdlVmVydGljYWwubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZW5kTm9kZSA9IHNvcnRlZFNoYXBlc09uQ3VycmVudFBhZ2VWZXJ0aWNhbFtqXTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIC8vIGlzIHRoZXJlIHNwYWNlIGJldHdlZW4gdGhlIGJveGVzXG4gICAgICAgICAgc3RhcnROb2RlLnBhZ2VCb3VuZHMubWF4WSA8IGVuZE5vZGUucGFnZUJvdW5kcy5taW5ZICYmIC8vIGRvIHRoZXkgb3ZlcmxhcCBpbiB0aGUgeCBheGlzXG4gICAgICAgICAgcmFuZ2VzT3ZlcmxhcChcbiAgICAgICAgICAgIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1pblgsXG4gICAgICAgICAgICBzdGFydE5vZGUucGFnZUJvdW5kcy5tYXhYLFxuICAgICAgICAgICAgZW5kTm9kZS5wYWdlQm91bmRzLm1pblgsXG4gICAgICAgICAgICBlbmROb2RlLnBhZ2VCb3VuZHMubWF4WFxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgdmVydGljYWwucHVzaCh7XG4gICAgICAgICAgICBzdGFydE5vZGUsXG4gICAgICAgICAgICBlbmROb2RlLFxuICAgICAgICAgICAgc3RhcnRFZGdlOiBbXG4gICAgICAgICAgICAgIG5ldyBWZWMoc3RhcnROb2RlLnBhZ2VCb3VuZHMubWluWCwgc3RhcnROb2RlLnBhZ2VCb3VuZHMubWF4WSksXG4gICAgICAgICAgICAgIG5ldyBWZWMoc3RhcnROb2RlLnBhZ2VCb3VuZHMubWF4WCwgc3RhcnROb2RlLnBhZ2VCb3VuZHMubWF4WSlcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBlbmRFZGdlOiBbXG4gICAgICAgICAgICAgIG5ldyBWZWMoZW5kTm9kZS5wYWdlQm91bmRzLm1pblgsIGVuZE5vZGUucGFnZUJvdW5kcy5taW5ZKSxcbiAgICAgICAgICAgICAgbmV3IFZlYyhlbmROb2RlLnBhZ2VCb3VuZHMubWF4WCwgZW5kTm9kZS5wYWdlQm91bmRzLm1pblkpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgbGVuZ3RoOiBlbmROb2RlLnBhZ2VCb3VuZHMubWluWSAtIHN0YXJ0Tm9kZS5wYWdlQm91bmRzLm1heFksXG4gICAgICAgICAgICBicmVhZHRoSW50ZXJzZWN0aW9uOiByYW5nZUludGVyc2VjdGlvbihcbiAgICAgICAgICAgICAgc3RhcnROb2RlLnBhZ2VCb3VuZHMubWluWCxcbiAgICAgICAgICAgICAgc3RhcnROb2RlLnBhZ2VCb3VuZHMubWF4WCxcbiAgICAgICAgICAgICAgZW5kTm9kZS5wYWdlQm91bmRzLm1pblgsXG4gICAgICAgICAgICAgIGVuZE5vZGUucGFnZUJvdW5kcy5tYXhYXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgaG9yaXpvbnRhbCwgdmVydGljYWwgfTtcbiAgfVxuICBzbmFwVHJhbnNsYXRlU2hhcGVzKHtcbiAgICBsb2NrZWRBeGlzLFxuICAgIGluaXRpYWxTZWxlY3Rpb25QYWdlQm91bmRzLFxuICAgIGluaXRpYWxTZWxlY3Rpb25TbmFwUG9pbnRzLFxuICAgIGRyYWdEZWx0YVxuICB9KSB7XG4gICAgY29uc3Qgc25hcFRocmVzaG9sZCA9IHRoaXMubWFuYWdlci5nZXRTbmFwVGhyZXNob2xkKCk7XG4gICAgY29uc3QgdmlzaWJsZVNuYXBQb2ludHNOb3RJblNlbGVjdGlvbiA9IHRoaXMuZ2V0U25hcHBhYmxlUG9pbnRzKCk7XG4gICAgY29uc3Qgc2VsZWN0aW9uUGFnZUJvdW5kcyA9IGluaXRpYWxTZWxlY3Rpb25QYWdlQm91bmRzLmNsb25lKCkudHJhbnNsYXRlKGRyYWdEZWx0YSk7XG4gICAgY29uc3Qgc2VsZWN0aW9uU25hcFBvaW50cyA9IGluaXRpYWxTZWxlY3Rpb25TbmFwUG9pbnRzLm1hcChcbiAgICAgICh7IHgsIHkgfSwgaSkgPT4gKHtcbiAgICAgICAgaWQ6IFwic2VsZWN0aW9uOlwiICsgaSxcbiAgICAgICAgeDogeCArIGRyYWdEZWx0YS54LFxuICAgICAgICB5OiB5ICsgZHJhZ0RlbHRhLnlcbiAgICAgIH0pXG4gICAgKTtcbiAgICBjb25zdCBvdGhlck5vZGVTbmFwUG9pbnRzID0gdmlzaWJsZVNuYXBQb2ludHNOb3RJblNlbGVjdGlvbjtcbiAgICBjb25zdCBuZWFyZXN0U25hcHNYID0gW107XG4gICAgY29uc3QgbmVhcmVzdFNuYXBzWSA9IFtdO1xuICAgIGNvbnN0IG1pbk9mZnNldCA9IG5ldyBWZWMoc25hcFRocmVzaG9sZCwgc25hcFRocmVzaG9sZCk7XG4gICAgdGhpcy5jb2xsZWN0UG9pbnRTbmFwcyh7XG4gICAgICBtaW5PZmZzZXQsXG4gICAgICBuZWFyZXN0U25hcHNYLFxuICAgICAgbmVhcmVzdFNuYXBzWSxcbiAgICAgIG90aGVyTm9kZVNuYXBQb2ludHMsXG4gICAgICBzZWxlY3Rpb25TbmFwUG9pbnRzXG4gICAgfSk7XG4gICAgdGhpcy5jb2xsZWN0R2FwU25hcHMoe1xuICAgICAgc2VsZWN0aW9uUGFnZUJvdW5kcyxcbiAgICAgIG5lYXJlc3RTbmFwc1gsXG4gICAgICBuZWFyZXN0U25hcHNZLFxuICAgICAgbWluT2Zmc2V0XG4gICAgfSk7XG4gICAgY29uc3QgbnVkZ2UgPSBuZXcgVmVjKFxuICAgICAgbG9ja2VkQXhpcyA9PT0gXCJ4XCIgPyAwIDogbmVhcmVzdFNuYXBzWFswXT8ubnVkZ2UgPz8gMCxcbiAgICAgIGxvY2tlZEF4aXMgPT09IFwieVwiID8gMCA6IG5lYXJlc3RTbmFwc1lbMF0/Lm51ZGdlID8/IDBcbiAgICApO1xuICAgIG1pbk9mZnNldC54ID0gMDtcbiAgICBtaW5PZmZzZXQueSA9IDA7XG4gICAgbmVhcmVzdFNuYXBzWC5sZW5ndGggPSAwO1xuICAgIG5lYXJlc3RTbmFwc1kubGVuZ3RoID0gMDtcbiAgICBzZWxlY3Rpb25TbmFwUG9pbnRzLmZvckVhY2goKHMpID0+IHtcbiAgICAgIHMueCArPSBudWRnZS54O1xuICAgICAgcy55ICs9IG51ZGdlLnk7XG4gICAgfSk7XG4gICAgc2VsZWN0aW9uUGFnZUJvdW5kcy50cmFuc2xhdGUobnVkZ2UpO1xuICAgIHRoaXMuY29sbGVjdFBvaW50U25hcHMoe1xuICAgICAgbWluT2Zmc2V0LFxuICAgICAgbmVhcmVzdFNuYXBzWCxcbiAgICAgIG5lYXJlc3RTbmFwc1ksXG4gICAgICBvdGhlck5vZGVTbmFwUG9pbnRzLFxuICAgICAgc2VsZWN0aW9uU25hcFBvaW50c1xuICAgIH0pO1xuICAgIHRoaXMuY29sbGVjdEdhcFNuYXBzKHtcbiAgICAgIHNlbGVjdGlvblBhZ2VCb3VuZHMsXG4gICAgICBuZWFyZXN0U25hcHNYLFxuICAgICAgbmVhcmVzdFNuYXBzWSxcbiAgICAgIG1pbk9mZnNldFxuICAgIH0pO1xuICAgIGNvbnN0IHBvaW50U25hcHNMaW5lcyA9IHRoaXMuZ2V0UG9pbnRTbmFwTGluZXMoe1xuICAgICAgbmVhcmVzdFNuYXBzWCxcbiAgICAgIG5lYXJlc3RTbmFwc1lcbiAgICB9KTtcbiAgICBjb25zdCBnYXBTbmFwTGluZXMgPSB0aGlzLmdldEdhcFNuYXBMaW5lcyh7XG4gICAgICBzZWxlY3Rpb25QYWdlQm91bmRzLFxuICAgICAgbmVhcmVzdFNuYXBzWCxcbiAgICAgIG5lYXJlc3RTbmFwc1lcbiAgICB9KTtcbiAgICB0aGlzLm1hbmFnZXIuc2V0SW5kaWNhdG9ycyhbLi4uZ2FwU25hcExpbmVzLCAuLi5wb2ludFNuYXBzTGluZXNdKTtcbiAgICByZXR1cm4geyBudWRnZSB9O1xuICB9XG4gIHNuYXBSZXNpemVTaGFwZXMoe1xuICAgIGluaXRpYWxTZWxlY3Rpb25QYWdlQm91bmRzLFxuICAgIGRyYWdEZWx0YSxcbiAgICBoYW5kbGU6IG9yaWdpbmFsSGFuZGxlLFxuICAgIGlzQXNwZWN0UmF0aW9Mb2NrZWQsXG4gICAgaXNSZXNpemluZ0Zyb21DZW50ZXJcbiAgfSkge1xuICAgIGNvbnN0IHNuYXBUaHJlc2hvbGQgPSB0aGlzLm1hbmFnZXIuZ2V0U25hcFRocmVzaG9sZCgpO1xuICAgIGNvbnN0IHtcbiAgICAgIGJveDogdW5zbmFwcGVkUmVzaXplZFBhZ2VCb3VuZHMsXG4gICAgICBzY2FsZVgsXG4gICAgICBzY2FsZVlcbiAgICB9ID0gQm94LlJlc2l6ZShcbiAgICAgIGluaXRpYWxTZWxlY3Rpb25QYWdlQm91bmRzLFxuICAgICAgb3JpZ2luYWxIYW5kbGUsXG4gICAgICBpc1Jlc2l6aW5nRnJvbUNlbnRlciA/IGRyYWdEZWx0YS54ICogMiA6IGRyYWdEZWx0YS54LFxuICAgICAgaXNSZXNpemluZ0Zyb21DZW50ZXIgPyBkcmFnRGVsdGEueSAqIDIgOiBkcmFnRGVsdGEueSxcbiAgICAgIGlzQXNwZWN0UmF0aW9Mb2NrZWRcbiAgICApO1xuICAgIGxldCBoYW5kbGUgPSBvcmlnaW5hbEhhbmRsZTtcbiAgICBpZiAoc2NhbGVYIDwgMCkge1xuICAgICAgaGFuZGxlID0gZmxpcFNlbGVjdGlvbkhhbmRsZVgoaGFuZGxlKTtcbiAgICB9XG4gICAgaWYgKHNjYWxlWSA8IDApIHtcbiAgICAgIGhhbmRsZSA9IGZsaXBTZWxlY3Rpb25IYW5kbGVZKGhhbmRsZSk7XG4gICAgfVxuICAgIGlmIChpc1Jlc2l6aW5nRnJvbUNlbnRlcikge1xuICAgICAgdW5zbmFwcGVkUmVzaXplZFBhZ2VCb3VuZHMuY2VudGVyID0gaW5pdGlhbFNlbGVjdGlvblBhZ2VCb3VuZHMuY2VudGVyO1xuICAgIH1cbiAgICBjb25zdCBpc1hMb2NrZWQgPSBoYW5kbGUgPT09IFwidG9wXCIgfHwgaGFuZGxlID09PSBcImJvdHRvbVwiO1xuICAgIGNvbnN0IGlzWUxvY2tlZCA9IGhhbmRsZSA9PT0gXCJsZWZ0XCIgfHwgaGFuZGxlID09PSBcInJpZ2h0XCI7XG4gICAgY29uc3Qgc2VsZWN0aW9uU25hcFBvaW50cyA9IGdldFJlc2l6ZVNuYXBQb2ludHNGb3JIYW5kbGUoaGFuZGxlLCB1bnNuYXBwZWRSZXNpemVkUGFnZUJvdW5kcyk7XG4gICAgY29uc3Qgb3RoZXJOb2RlU25hcFBvaW50cyA9IHRoaXMuZ2V0U25hcHBhYmxlUG9pbnRzKCk7XG4gICAgY29uc3QgbmVhcmVzdFNuYXBzWCA9IFtdO1xuICAgIGNvbnN0IG5lYXJlc3RTbmFwc1kgPSBbXTtcbiAgICBjb25zdCBtaW5PZmZzZXQgPSBuZXcgVmVjKHNuYXBUaHJlc2hvbGQsIHNuYXBUaHJlc2hvbGQpO1xuICAgIHRoaXMuY29sbGVjdFBvaW50U25hcHMoe1xuICAgICAgbWluT2Zmc2V0LFxuICAgICAgbmVhcmVzdFNuYXBzWCxcbiAgICAgIG5lYXJlc3RTbmFwc1ksXG4gICAgICBvdGhlck5vZGVTbmFwUG9pbnRzLFxuICAgICAgc2VsZWN0aW9uU25hcFBvaW50c1xuICAgIH0pO1xuICAgIGNvbnN0IG51ZGdlID0gbmV3IFZlYyhcbiAgICAgIGlzWExvY2tlZCA/IDAgOiBuZWFyZXN0U25hcHNYWzBdPy5udWRnZSA/PyAwLFxuICAgICAgaXNZTG9ja2VkID8gMCA6IG5lYXJlc3RTbmFwc1lbMF0/Lm51ZGdlID8/IDBcbiAgICApO1xuICAgIGlmIChpc0FzcGVjdFJhdGlvTG9ja2VkICYmIGlzU2VsZWN0aW9uQ29ybmVyKGhhbmRsZSkgJiYgbnVkZ2UubGVuKCkgIT09IDApIHtcbiAgICAgIGNvbnN0IHByaW1hcnlOdWRnZUF4aXMgPSBuZWFyZXN0U25hcHNYLmxlbmd0aCAmJiBuZWFyZXN0U25hcHNZLmxlbmd0aCA/IE1hdGguYWJzKG51ZGdlLngpIDwgTWF0aC5hYnMobnVkZ2UueSkgPyBcInhcIiA6IFwieVwiIDogbmVhcmVzdFNuYXBzWC5sZW5ndGggPyBcInhcIiA6IFwieVwiO1xuICAgICAgY29uc3QgcmF0aW8gPSBpbml0aWFsU2VsZWN0aW9uUGFnZUJvdW5kcy5hc3BlY3RSYXRpbztcbiAgICAgIGlmIChwcmltYXJ5TnVkZ2VBeGlzID09PSBcInhcIikge1xuICAgICAgICBuZWFyZXN0U25hcHNZLmxlbmd0aCA9IDA7XG4gICAgICAgIG51ZGdlLnkgPSBudWRnZS54IC8gcmF0aW87XG4gICAgICAgIGlmIChoYW5kbGUgPT09IFwiYm90dG9tX2xlZnRcIiB8fCBoYW5kbGUgPT09IFwidG9wX3JpZ2h0XCIpIHtcbiAgICAgICAgICBudWRnZS55ID0gLW51ZGdlLnk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5lYXJlc3RTbmFwc1gubGVuZ3RoID0gMDtcbiAgICAgICAgbnVkZ2UueCA9IG51ZGdlLnkgKiByYXRpbztcbiAgICAgICAgaWYgKGhhbmRsZSA9PT0gXCJib3R0b21fbGVmdFwiIHx8IGhhbmRsZSA9PT0gXCJ0b3BfcmlnaHRcIikge1xuICAgICAgICAgIG51ZGdlLnggPSAtbnVkZ2UueDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzbmFwcGVkRGVsdGEgPSBWZWMuQWRkKGRyYWdEZWx0YSwgbnVkZ2UpO1xuICAgIGNvbnN0IHsgYm94OiBzbmFwcGVkUmVzaXplZFBhZ2VCb3VuZHMgfSA9IEJveC5SZXNpemUoXG4gICAgICBpbml0aWFsU2VsZWN0aW9uUGFnZUJvdW5kcyxcbiAgICAgIG9yaWdpbmFsSGFuZGxlLFxuICAgICAgaXNSZXNpemluZ0Zyb21DZW50ZXIgPyBzbmFwcGVkRGVsdGEueCAqIDIgOiBzbmFwcGVkRGVsdGEueCxcbiAgICAgIGlzUmVzaXppbmdGcm9tQ2VudGVyID8gc25hcHBlZERlbHRhLnkgKiAyIDogc25hcHBlZERlbHRhLnksXG4gICAgICBpc0FzcGVjdFJhdGlvTG9ja2VkXG4gICAgKTtcbiAgICBpZiAoaXNSZXNpemluZ0Zyb21DZW50ZXIpIHtcbiAgICAgIHNuYXBwZWRSZXNpemVkUGFnZUJvdW5kcy5jZW50ZXIgPSBpbml0aWFsU2VsZWN0aW9uUGFnZUJvdW5kcy5jZW50ZXI7XG4gICAgfVxuICAgIGNvbnN0IHNuYXBwZWRTZWxlY3Rpb25Qb2ludHMgPSBnZXRSZXNpemVTbmFwUG9pbnRzRm9ySGFuZGxlKFwiYW55XCIsIHNuYXBwZWRSZXNpemVkUGFnZUJvdW5kcyk7XG4gICAgbmVhcmVzdFNuYXBzWC5sZW5ndGggPSAwO1xuICAgIG5lYXJlc3RTbmFwc1kubGVuZ3RoID0gMDtcbiAgICBtaW5PZmZzZXQueCA9IDA7XG4gICAgbWluT2Zmc2V0LnkgPSAwO1xuICAgIHRoaXMuY29sbGVjdFBvaW50U25hcHMoe1xuICAgICAgbWluT2Zmc2V0LFxuICAgICAgbmVhcmVzdFNuYXBzWCxcbiAgICAgIG5lYXJlc3RTbmFwc1ksXG4gICAgICBvdGhlck5vZGVTbmFwUG9pbnRzLFxuICAgICAgc2VsZWN0aW9uU25hcFBvaW50czogc25hcHBlZFNlbGVjdGlvblBvaW50c1xuICAgIH0pO1xuICAgIGNvbnN0IHBvaW50U25hcHMgPSB0aGlzLmdldFBvaW50U25hcExpbmVzKHtcbiAgICAgIG5lYXJlc3RTbmFwc1gsXG4gICAgICBuZWFyZXN0U25hcHNZXG4gICAgfSk7XG4gICAgdGhpcy5tYW5hZ2VyLnNldEluZGljYXRvcnMoWy4uLnBvaW50U25hcHNdKTtcbiAgICByZXR1cm4geyBudWRnZSB9O1xuICB9XG4gIGNvbGxlY3RQb2ludFNuYXBzKHtcbiAgICBzZWxlY3Rpb25TbmFwUG9pbnRzLFxuICAgIG90aGVyTm9kZVNuYXBQb2ludHMsXG4gICAgbWluT2Zmc2V0LFxuICAgIG5lYXJlc3RTbmFwc1gsXG4gICAgbmVhcmVzdFNuYXBzWVxuICB9KSB7XG4gICAgZm9yIChjb25zdCB0aGlzU25hcFBvaW50IG9mIHNlbGVjdGlvblNuYXBQb2ludHMpIHtcbiAgICAgIGZvciAoY29uc3Qgb3RoZXJTbmFwUG9pbnQgb2Ygb3RoZXJOb2RlU25hcFBvaW50cykge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBWZWMuU3ViKHRoaXNTbmFwUG9pbnQsIG90aGVyU25hcFBvaW50KTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0WCA9IE1hdGguYWJzKG9mZnNldC54KTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IE1hdGguYWJzKG9mZnNldC55KTtcbiAgICAgICAgaWYgKHJvdW5kKG9mZnNldFgpIDw9IHJvdW5kKG1pbk9mZnNldC54KSkge1xuICAgICAgICAgIGlmIChyb3VuZChvZmZzZXRYKSA8IHJvdW5kKG1pbk9mZnNldC54KSkge1xuICAgICAgICAgICAgbmVhcmVzdFNuYXBzWC5sZW5ndGggPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZWFyZXN0U25hcHNYLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJwb2ludHNcIixcbiAgICAgICAgICAgIHBvaW50czogeyB0aGlzUG9pbnQ6IHRoaXNTbmFwUG9pbnQsIG90aGVyUG9pbnQ6IG90aGVyU25hcFBvaW50IH0sXG4gICAgICAgICAgICBudWRnZTogb3RoZXJTbmFwUG9pbnQueCAtIHRoaXNTbmFwUG9pbnQueFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIG1pbk9mZnNldC54ID0gb2Zmc2V0WDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm91bmQob2Zmc2V0WSkgPD0gcm91bmQobWluT2Zmc2V0LnkpKSB7XG4gICAgICAgICAgaWYgKHJvdW5kKG9mZnNldFkpIDwgcm91bmQobWluT2Zmc2V0LnkpKSB7XG4gICAgICAgICAgICBuZWFyZXN0U25hcHNZLmxlbmd0aCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5lYXJlc3RTbmFwc1kucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInBvaW50c1wiLFxuICAgICAgICAgICAgcG9pbnRzOiB7IHRoaXNQb2ludDogdGhpc1NuYXBQb2ludCwgb3RoZXJQb2ludDogb3RoZXJTbmFwUG9pbnQgfSxcbiAgICAgICAgICAgIG51ZGdlOiBvdGhlclNuYXBQb2ludC55IC0gdGhpc1NuYXBQb2ludC55XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbWluT2Zmc2V0LnkgPSBvZmZzZXRZO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbGxlY3RHYXBTbmFwcyh7XG4gICAgc2VsZWN0aW9uUGFnZUJvdW5kcyxcbiAgICBtaW5PZmZzZXQsXG4gICAgbmVhcmVzdFNuYXBzWCxcbiAgICBuZWFyZXN0U25hcHNZXG4gIH0pIHtcbiAgICBjb25zdCB7IGhvcml6b250YWwsIHZlcnRpY2FsIH0gPSB0aGlzLmdldFZpc2libGVHYXBzKCk7XG4gICAgZm9yIChjb25zdCBnYXAgb2YgaG9yaXpvbnRhbCkge1xuICAgICAgaWYgKCFyYW5nZXNPdmVybGFwKFxuICAgICAgICBnYXAuYnJlYWR0aEludGVyc2VjdGlvblswXSxcbiAgICAgICAgZ2FwLmJyZWFkdGhJbnRlcnNlY3Rpb25bMV0sXG4gICAgICAgIHNlbGVjdGlvblBhZ2VCb3VuZHMubWluWSxcbiAgICAgICAgc2VsZWN0aW9uUGFnZUJvdW5kcy5tYXhZXG4gICAgICApKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgZ2FwTWlkWCA9IGdhcC5zdGFydEVkZ2VbMF0ueCArIGdhcC5sZW5ndGggLyAyO1xuICAgICAgY29uc3QgY2VudGVyTnVkZ2UgPSBnYXBNaWRYIC0gc2VsZWN0aW9uUGFnZUJvdW5kcy5jZW50ZXIueDtcbiAgICAgIGNvbnN0IGdhcElzTGFyZ2VyVGhhblNlbGVjdGlvbiA9IGdhcC5sZW5ndGggPiBzZWxlY3Rpb25QYWdlQm91bmRzLndpZHRoO1xuICAgICAgaWYgKGdhcElzTGFyZ2VyVGhhblNlbGVjdGlvbiAmJiByb3VuZChNYXRoLmFicyhjZW50ZXJOdWRnZSkpIDw9IHJvdW5kKG1pbk9mZnNldC54KSkge1xuICAgICAgICBpZiAocm91bmQoTWF0aC5hYnMoY2VudGVyTnVkZ2UpKSA8IHJvdW5kKG1pbk9mZnNldC54KSkge1xuICAgICAgICAgIG5lYXJlc3RTbmFwc1gubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBtaW5PZmZzZXQueCA9IE1hdGguYWJzKGNlbnRlck51ZGdlKTtcbiAgICAgICAgY29uc3Qgc25hcCA9IHtcbiAgICAgICAgICB0eXBlOiBcImdhcF9jZW50ZXJcIixcbiAgICAgICAgICBnYXAsXG4gICAgICAgICAgbnVkZ2U6IGNlbnRlck51ZGdlXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG90aGVyQ2VudGVyU25hcCA9IG5lYXJlc3RTbmFwc1guZmluZCgoeyB0eXBlIH0pID0+IHR5cGUgPT09IFwiZ2FwX2NlbnRlclwiKTtcbiAgICAgICAgY29uc3QgZ2FwQnJlYWR0aHNPdmVybGFwID0gb3RoZXJDZW50ZXJTbmFwICYmIHJhbmdlSW50ZXJzZWN0aW9uKFxuICAgICAgICAgIGdhcC5icmVhZHRoSW50ZXJzZWN0aW9uWzBdLFxuICAgICAgICAgIGdhcC5icmVhZHRoSW50ZXJzZWN0aW9uWzFdLFxuICAgICAgICAgIG90aGVyQ2VudGVyU25hcC5nYXAuYnJlYWR0aEludGVyc2VjdGlvblswXSxcbiAgICAgICAgICBvdGhlckNlbnRlclNuYXAuZ2FwLmJyZWFkdGhJbnRlcnNlY3Rpb25bMV1cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKG90aGVyQ2VudGVyU25hcCAmJiBvdGhlckNlbnRlclNuYXAuZ2FwLmxlbmd0aCA+IGdhcC5sZW5ndGggJiYgZ2FwQnJlYWR0aHNPdmVybGFwKSB7XG4gICAgICAgICAgbmVhcmVzdFNuYXBzWFtuZWFyZXN0U25hcHNYLmluZGV4T2Yob3RoZXJDZW50ZXJTbmFwKV0gPSBzbmFwO1xuICAgICAgICB9IGVsc2UgaWYgKCFvdGhlckNlbnRlclNuYXAgfHwgIWdhcEJyZWFkdGhzT3ZlcmxhcCkge1xuICAgICAgICAgIG5lYXJlc3RTbmFwc1gucHVzaChzbmFwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgZHVwbGljYXRpb25MZWZ0WCA9IGdhcC5zdGFydE5vZGUucGFnZUJvdW5kcy5taW5YIC0gZ2FwLmxlbmd0aDtcbiAgICAgIGNvbnN0IHNlbGVjdGlvblJpZ2h0WCA9IHNlbGVjdGlvblBhZ2VCb3VuZHMubWF4WDtcbiAgICAgIGNvbnN0IGR1cGxpY2F0aW9uTGVmdE51ZGdlID0gZHVwbGljYXRpb25MZWZ0WCAtIHNlbGVjdGlvblJpZ2h0WDtcbiAgICAgIGlmIChyb3VuZChNYXRoLmFicyhkdXBsaWNhdGlvbkxlZnROdWRnZSkpIDw9IHJvdW5kKG1pbk9mZnNldC54KSkge1xuICAgICAgICBpZiAocm91bmQoTWF0aC5hYnMoZHVwbGljYXRpb25MZWZ0TnVkZ2UpKSA8IHJvdW5kKG1pbk9mZnNldC54KSkge1xuICAgICAgICAgIG5lYXJlc3RTbmFwc1gubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBtaW5PZmZzZXQueCA9IE1hdGguYWJzKGR1cGxpY2F0aW9uTGVmdE51ZGdlKTtcbiAgICAgICAgbmVhcmVzdFNuYXBzWC5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcImdhcF9kdXBsaWNhdGVcIixcbiAgICAgICAgICBnYXAsXG4gICAgICAgICAgcHJvdHJ1c2lvbkRpcmVjdGlvbjogXCJsZWZ0XCIsXG4gICAgICAgICAgbnVkZ2U6IGR1cGxpY2F0aW9uTGVmdE51ZGdlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgZHVwbGljYXRpb25SaWdodFggPSBnYXAuZW5kTm9kZS5wYWdlQm91bmRzLm1heFggKyBnYXAubGVuZ3RoO1xuICAgICAgY29uc3Qgc2VsZWN0aW9uTGVmdFggPSBzZWxlY3Rpb25QYWdlQm91bmRzLm1pblg7XG4gICAgICBjb25zdCBkdXBsaWNhdGlvblJpZ2h0TnVkZ2UgPSBkdXBsaWNhdGlvblJpZ2h0WCAtIHNlbGVjdGlvbkxlZnRYO1xuICAgICAgaWYgKHJvdW5kKE1hdGguYWJzKGR1cGxpY2F0aW9uUmlnaHROdWRnZSkpIDw9IHJvdW5kKG1pbk9mZnNldC54KSkge1xuICAgICAgICBpZiAocm91bmQoTWF0aC5hYnMoZHVwbGljYXRpb25SaWdodE51ZGdlKSkgPCByb3VuZChtaW5PZmZzZXQueCkpIHtcbiAgICAgICAgICBuZWFyZXN0U25hcHNYLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgbWluT2Zmc2V0LnggPSBNYXRoLmFicyhkdXBsaWNhdGlvblJpZ2h0TnVkZ2UpO1xuICAgICAgICBuZWFyZXN0U25hcHNYLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwiZ2FwX2R1cGxpY2F0ZVwiLFxuICAgICAgICAgIGdhcCxcbiAgICAgICAgICBwcm90cnVzaW9uRGlyZWN0aW9uOiBcInJpZ2h0XCIsXG4gICAgICAgICAgbnVkZ2U6IGR1cGxpY2F0aW9uUmlnaHROdWRnZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBnYXAgb2YgdmVydGljYWwpIHtcbiAgICAgIGlmICghcmFuZ2VzT3ZlcmxhcChcbiAgICAgICAgZ2FwLmJyZWFkdGhJbnRlcnNlY3Rpb25bMF0sXG4gICAgICAgIGdhcC5icmVhZHRoSW50ZXJzZWN0aW9uWzFdLFxuICAgICAgICBzZWxlY3Rpb25QYWdlQm91bmRzLm1pblgsXG4gICAgICAgIHNlbGVjdGlvblBhZ2VCb3VuZHMubWF4WFxuICAgICAgKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGdhcE1pZFkgPSBnYXAuc3RhcnRFZGdlWzBdLnkgKyBnYXAubGVuZ3RoIC8gMjtcbiAgICAgIGNvbnN0IGNlbnRlck51ZGdlID0gZ2FwTWlkWSAtIHNlbGVjdGlvblBhZ2VCb3VuZHMuY2VudGVyLnk7XG4gICAgICBjb25zdCBnYXBJc0xhcmdlclRoYW5TZWxlY3Rpb24gPSBnYXAubGVuZ3RoID4gc2VsZWN0aW9uUGFnZUJvdW5kcy5oZWlnaHQ7XG4gICAgICBpZiAoZ2FwSXNMYXJnZXJUaGFuU2VsZWN0aW9uICYmIHJvdW5kKE1hdGguYWJzKGNlbnRlck51ZGdlKSkgPD0gcm91bmQobWluT2Zmc2V0LnkpKSB7XG4gICAgICAgIGlmIChyb3VuZChNYXRoLmFicyhjZW50ZXJOdWRnZSkpIDwgcm91bmQobWluT2Zmc2V0LnkpKSB7XG4gICAgICAgICAgbmVhcmVzdFNuYXBzWS5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICAgIG1pbk9mZnNldC55ID0gTWF0aC5hYnMoY2VudGVyTnVkZ2UpO1xuICAgICAgICBjb25zdCBzbmFwID0ge1xuICAgICAgICAgIHR5cGU6IFwiZ2FwX2NlbnRlclwiLFxuICAgICAgICAgIGdhcCxcbiAgICAgICAgICBudWRnZTogY2VudGVyTnVkZ2VcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgb3RoZXJDZW50ZXJTbmFwID0gbmVhcmVzdFNuYXBzWS5maW5kKCh7IHR5cGUgfSkgPT4gdHlwZSA9PT0gXCJnYXBfY2VudGVyXCIpO1xuICAgICAgICBjb25zdCBnYXBCcmVhZHRoc092ZXJsYXAgPSBvdGhlckNlbnRlclNuYXAgJiYgcmFuZ2VzT3ZlcmxhcChcbiAgICAgICAgICBvdGhlckNlbnRlclNuYXAuZ2FwLmJyZWFkdGhJbnRlcnNlY3Rpb25bMF0sXG4gICAgICAgICAgb3RoZXJDZW50ZXJTbmFwLmdhcC5icmVhZHRoSW50ZXJzZWN0aW9uWzFdLFxuICAgICAgICAgIGdhcC5icmVhZHRoSW50ZXJzZWN0aW9uWzBdLFxuICAgICAgICAgIGdhcC5icmVhZHRoSW50ZXJzZWN0aW9uWzFdXG4gICAgICAgICk7XG4gICAgICAgIGlmIChvdGhlckNlbnRlclNuYXAgJiYgb3RoZXJDZW50ZXJTbmFwLmdhcC5sZW5ndGggPiBnYXAubGVuZ3RoICYmIGdhcEJyZWFkdGhzT3ZlcmxhcCkge1xuICAgICAgICAgIG5lYXJlc3RTbmFwc1lbbmVhcmVzdFNuYXBzWS5pbmRleE9mKG90aGVyQ2VudGVyU25hcCldID0gc25hcDtcbiAgICAgICAgfSBlbHNlIGlmICghb3RoZXJDZW50ZXJTbmFwIHx8ICFnYXBCcmVhZHRoc092ZXJsYXApIHtcbiAgICAgICAgICBuZWFyZXN0U25hcHNZLnB1c2goc25hcCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBkdXBsaWNhdGlvblRvcFkgPSBnYXAuc3RhcnROb2RlLnBhZ2VCb3VuZHMubWluWSAtIGdhcC5sZW5ndGg7XG4gICAgICBjb25zdCBzZWxlY3Rpb25Cb3R0b21ZID0gc2VsZWN0aW9uUGFnZUJvdW5kcy5tYXhZO1xuICAgICAgY29uc3QgZHVwbGljYXRpb25Ub3BOdWRnZSA9IGR1cGxpY2F0aW9uVG9wWSAtIHNlbGVjdGlvbkJvdHRvbVk7XG4gICAgICBpZiAocm91bmQoTWF0aC5hYnMoZHVwbGljYXRpb25Ub3BOdWRnZSkpIDw9IHJvdW5kKG1pbk9mZnNldC55KSkge1xuICAgICAgICBpZiAocm91bmQoTWF0aC5hYnMoZHVwbGljYXRpb25Ub3BOdWRnZSkpIDwgcm91bmQobWluT2Zmc2V0LnkpKSB7XG4gICAgICAgICAgbmVhcmVzdFNuYXBzWS5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICAgIG1pbk9mZnNldC55ID0gTWF0aC5hYnMoZHVwbGljYXRpb25Ub3BOdWRnZSk7XG4gICAgICAgIG5lYXJlc3RTbmFwc1kucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJnYXBfZHVwbGljYXRlXCIsXG4gICAgICAgICAgZ2FwLFxuICAgICAgICAgIHByb3RydXNpb25EaXJlY3Rpb246IFwidG9wXCIsXG4gICAgICAgICAgbnVkZ2U6IGR1cGxpY2F0aW9uVG9wTnVkZ2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBkdXBsaWNhdGlvbkJvdHRvbVkgPSBnYXAuZW5kTm9kZS5wYWdlQm91bmRzLm1heFkgKyBnYXAubGVuZ3RoO1xuICAgICAgY29uc3Qgc2VsZWN0aW9uVG9wWSA9IHNlbGVjdGlvblBhZ2VCb3VuZHMubWluWTtcbiAgICAgIGNvbnN0IGR1cGxpY2F0aW9uQm90dG9tTnVkZ2UgPSBkdXBsaWNhdGlvbkJvdHRvbVkgLSBzZWxlY3Rpb25Ub3BZO1xuICAgICAgaWYgKHJvdW5kKE1hdGguYWJzKGR1cGxpY2F0aW9uQm90dG9tTnVkZ2UpKSA8PSByb3VuZChtaW5PZmZzZXQueSkpIHtcbiAgICAgICAgaWYgKHJvdW5kKE1hdGguYWJzKGR1cGxpY2F0aW9uQm90dG9tTnVkZ2UpKSA8IHJvdW5kKG1pbk9mZnNldC55KSkge1xuICAgICAgICAgIG5lYXJlc3RTbmFwc1kubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBtaW5PZmZzZXQueSA9IE1hdGguYWJzKGR1cGxpY2F0aW9uQm90dG9tTnVkZ2UpO1xuICAgICAgICBuZWFyZXN0U25hcHNZLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwiZ2FwX2R1cGxpY2F0ZVwiLFxuICAgICAgICAgIGdhcCxcbiAgICAgICAgICBwcm90cnVzaW9uRGlyZWN0aW9uOiBcImJvdHRvbVwiLFxuICAgICAgICAgIG51ZGdlOiBkdXBsaWNhdGlvbkJvdHRvbU51ZGdlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBnZXRQb2ludFNuYXBMaW5lcyh7XG4gICAgbmVhcmVzdFNuYXBzWCxcbiAgICBuZWFyZXN0U25hcHNZXG4gIH0pIHtcbiAgICBjb25zdCBzbmFwR3JvdXBzWCA9IHt9O1xuICAgIGNvbnN0IHNuYXBHcm91cHNZID0ge307XG4gICAgaWYgKG5lYXJlc3RTbmFwc1gubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCBzbmFwIG9mIG5lYXJlc3RTbmFwc1gpIHtcbiAgICAgICAgaWYgKHNuYXAudHlwZSA9PT0gXCJwb2ludHNcIikge1xuICAgICAgICAgIGNvbnN0IGtleSA9IHJvdW5kKHNuYXAucG9pbnRzLm90aGVyUG9pbnQueCk7XG4gICAgICAgICAgaWYgKCFzbmFwR3JvdXBzWFtrZXldKSB7XG4gICAgICAgICAgICBzbmFwR3JvdXBzWFtrZXldID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIHNuYXBHcm91cHNYW2tleV0ucHVzaChzbmFwLnBvaW50cyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5lYXJlc3RTbmFwc1kubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCBzbmFwIG9mIG5lYXJlc3RTbmFwc1kpIHtcbiAgICAgICAgaWYgKHNuYXAudHlwZSA9PT0gXCJwb2ludHNcIikge1xuICAgICAgICAgIGNvbnN0IGtleSA9IHJvdW5kKHNuYXAucG9pbnRzLm90aGVyUG9pbnQueSk7XG4gICAgICAgICAgaWYgKCFzbmFwR3JvdXBzWVtrZXldKSB7XG4gICAgICAgICAgICBzbmFwR3JvdXBzWVtrZXldID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIHNuYXBHcm91cHNZW2tleV0ucHVzaChzbmFwLnBvaW50cyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoc25hcEdyb3Vwc1gpLmNvbmNhdChPYmplY3QudmFsdWVzKHNuYXBHcm91cHNZKSkubWFwKChzbmFwR3JvdXApID0+ICh7XG4gICAgICBpZDogdW5pcXVlSWQoKSxcbiAgICAgIHR5cGU6IFwicG9pbnRzXCIsXG4gICAgICBwb2ludHM6IGRlZHVwZShcbiAgICAgICAgc25hcEdyb3VwLm1hcCgoc25hcCkgPT4gVmVjLkZyb20oc25hcC5vdGhlclBvaW50KSkuY29uY2F0KHNuYXBHcm91cC5tYXAoKHNuYXApID0+IFZlYy5Gcm9tKHNuYXAudGhpc1BvaW50KSkpLFxuICAgICAgICAoYSwgYikgPT4gYS5lcXVhbHMoYilcbiAgICAgIClcbiAgICB9KSk7XG4gIH1cbiAgZ2V0R2FwU25hcExpbmVzKHtcbiAgICBzZWxlY3Rpb25QYWdlQm91bmRzLFxuICAgIG5lYXJlc3RTbmFwc1gsXG4gICAgbmVhcmVzdFNuYXBzWVxuICB9KSB7XG4gICAgY29uc3QgeyB2ZXJ0aWNhbCwgaG9yaXpvbnRhbCB9ID0gdGhpcy5nZXRWaXNpYmxlR2FwcygpO1xuICAgIGNvbnN0IHNlbGVjdGlvblNpZGVzID0ge1xuICAgICAgdG9wOiBzZWxlY3Rpb25QYWdlQm91bmRzLnNpZGVzWzBdLFxuICAgICAgcmlnaHQ6IHNlbGVjdGlvblBhZ2VCb3VuZHMuc2lkZXNbMV0sXG4gICAgICAvLyBuZWVkIGJvdHRvbSBhbmQgbGVmdCB0byBiZSBzb3J0ZWQgYXNjLCB3aGljaCAuc2lkZXMgaXMgbm90LlxuICAgICAgYm90dG9tOiBbc2VsZWN0aW9uUGFnZUJvdW5kcy5jb3JuZXJzWzNdLCBzZWxlY3Rpb25QYWdlQm91bmRzLmNvcm5lcnNbMl1dLFxuICAgICAgbGVmdDogW3NlbGVjdGlvblBhZ2VCb3VuZHMuY29ybmVyc1swXSwgc2VsZWN0aW9uUGFnZUJvdW5kcy5jb3JuZXJzWzNdXVxuICAgIH07XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgaWYgKG5lYXJlc3RTbmFwc1gubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCBzbmFwIG9mIG5lYXJlc3RTbmFwc1gpIHtcbiAgICAgICAgaWYgKHNuYXAudHlwZSA9PT0gXCJwb2ludHNcIilcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGdhcDogeyBicmVhZHRoSW50ZXJzZWN0aW9uLCBzdGFydEVkZ2UsIHN0YXJ0Tm9kZSwgZW5kTm9kZSwgbGVuZ3RoLCBlbmRFZGdlIH1cbiAgICAgICAgfSA9IHNuYXA7XG4gICAgICAgIHN3aXRjaCAoc25hcC50eXBlKSB7XG4gICAgICAgICAgY2FzZSBcImdhcF9jZW50ZXJcIjoge1xuICAgICAgICAgICAgY29uc3QgbmV3R2Fwc0xlbmd0aCA9IChsZW5ndGggLSBzZWxlY3Rpb25QYWdlQm91bmRzLndpZHRoKSAvIDI7XG4gICAgICAgICAgICBjb25zdCBnYXBCcmVhZHRoSW50ZXJzZWN0aW9uID0gcmFuZ2VJbnRlcnNlY3Rpb24oXG4gICAgICAgICAgICAgIGJyZWFkdGhJbnRlcnNlY3Rpb25bMF0sXG4gICAgICAgICAgICAgIGJyZWFkdGhJbnRlcnNlY3Rpb25bMV0sXG4gICAgICAgICAgICAgIHNlbGVjdGlvblBhZ2VCb3VuZHMubWluWSxcbiAgICAgICAgICAgICAgc2VsZWN0aW9uUGFnZUJvdW5kcy5tYXhZXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcImdhcHNcIixcbiAgICAgICAgICAgICAgZGlyZWN0aW9uOiBcImhvcml6b250YWxcIixcbiAgICAgICAgICAgICAgaWQ6IHVuaXF1ZUlkKCksXG4gICAgICAgICAgICAgIGdhcHM6IFtcbiAgICAgICAgICAgICAgICAuLi5maW5kQWRqYWNlbnRHYXBzKFxuICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbCxcbiAgICAgICAgICAgICAgICAgIHN0YXJ0Tm9kZS5pZCxcbiAgICAgICAgICAgICAgICAgIG5ld0dhcHNMZW5ndGgsXG4gICAgICAgICAgICAgICAgICBcImJhY2t3YXJkXCIsXG4gICAgICAgICAgICAgICAgICBnYXBCcmVhZHRoSW50ZXJzZWN0aW9uXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBzdGFydEVkZ2UsXG4gICAgICAgICAgICAgICAgICBlbmRFZGdlOiBzZWxlY3Rpb25TaWRlcy5sZWZ0XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBzdGFydEVkZ2U6IHNlbGVjdGlvblNpZGVzLnJpZ2h0LFxuICAgICAgICAgICAgICAgICAgZW5kRWRnZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uZmluZEFkamFjZW50R2FwcyhcbiAgICAgICAgICAgICAgICAgIGhvcml6b250YWwsXG4gICAgICAgICAgICAgICAgICBlbmROb2RlLmlkLFxuICAgICAgICAgICAgICAgICAgbmV3R2Fwc0xlbmd0aCxcbiAgICAgICAgICAgICAgICAgIFwiZm9yd2FyZFwiLFxuICAgICAgICAgICAgICAgICAgZ2FwQnJlYWR0aEludGVyc2VjdGlvblxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImdhcF9kdXBsaWNhdGVcIjoge1xuICAgICAgICAgICAgY29uc3QgZ2FwQnJlYWR0aEludGVyc2VjdGlvbiA9IHJhbmdlSW50ZXJzZWN0aW9uKFxuICAgICAgICAgICAgICBicmVhZHRoSW50ZXJzZWN0aW9uWzBdLFxuICAgICAgICAgICAgICBicmVhZHRoSW50ZXJzZWN0aW9uWzFdLFxuICAgICAgICAgICAgICBzZWxlY3Rpb25QYWdlQm91bmRzLm1pblksXG4gICAgICAgICAgICAgIHNlbGVjdGlvblBhZ2VCb3VuZHMubWF4WVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJnYXBzXCIsXG4gICAgICAgICAgICAgIGRpcmVjdGlvbjogXCJob3Jpem9udGFsXCIsXG4gICAgICAgICAgICAgIGlkOiB1bmlxdWVJZCgpLFxuICAgICAgICAgICAgICBnYXBzOiBzbmFwLnByb3RydXNpb25EaXJlY3Rpb24gPT09IFwibGVmdFwiID8gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHN0YXJ0RWRnZTogc2VsZWN0aW9uU2lkZXMucmlnaHQsXG4gICAgICAgICAgICAgICAgICBlbmRFZGdlOiBzdGFydEVkZ2UubWFwKFxuICAgICAgICAgICAgICAgICAgICAodikgPT4gdi5jbG9uZSgpLmFkZFhZKC1zdGFydE5vZGUucGFnZUJvdW5kcy53aWR0aCwgMClcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHsgc3RhcnRFZGdlLCBlbmRFZGdlIH0sXG4gICAgICAgICAgICAgICAgLi4uZmluZEFkamFjZW50R2FwcyhcbiAgICAgICAgICAgICAgICAgIGhvcml6b250YWwsXG4gICAgICAgICAgICAgICAgICBlbmROb2RlLmlkLFxuICAgICAgICAgICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgXCJmb3J3YXJkXCIsXG4gICAgICAgICAgICAgICAgICBnYXBCcmVhZHRoSW50ZXJzZWN0aW9uXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBdIDogW1xuICAgICAgICAgICAgICAgIC4uLmZpbmRBZGphY2VudEdhcHMoXG4gICAgICAgICAgICAgICAgICBob3Jpem9udGFsLFxuICAgICAgICAgICAgICAgICAgc3RhcnROb2RlLmlkLFxuICAgICAgICAgICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgXCJiYWNrd2FyZFwiLFxuICAgICAgICAgICAgICAgICAgZ2FwQnJlYWR0aEludGVyc2VjdGlvblxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgeyBzdGFydEVkZ2UsIGVuZEVkZ2UgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBzdGFydEVkZ2U6IGVuZEVkZ2UubWFwKFxuICAgICAgICAgICAgICAgICAgICAodikgPT4gdi5jbG9uZSgpLmFkZFhZKHNuYXAuZ2FwLmVuZE5vZGUucGFnZUJvdW5kcy53aWR0aCwgMClcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICBlbmRFZGdlOiBzZWxlY3Rpb25TaWRlcy5sZWZ0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobmVhcmVzdFNuYXBzWS5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IHNuYXAgb2YgbmVhcmVzdFNuYXBzWSkge1xuICAgICAgICBpZiAoc25hcC50eXBlID09PSBcInBvaW50c1wiKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgZ2FwOiB7IGJyZWFkdGhJbnRlcnNlY3Rpb24sIHN0YXJ0RWRnZSwgc3RhcnROb2RlLCBlbmROb2RlLCBsZW5ndGgsIGVuZEVkZ2UgfVxuICAgICAgICB9ID0gc25hcDtcbiAgICAgICAgc3dpdGNoIChzbmFwLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIFwiZ2FwX2NlbnRlclwiOiB7XG4gICAgICAgICAgICBjb25zdCBuZXdHYXBzTGVuZ3RoID0gKGxlbmd0aCAtIHNlbGVjdGlvblBhZ2VCb3VuZHMuaGVpZ2h0KSAvIDI7XG4gICAgICAgICAgICBjb25zdCBnYXBCcmVhZHRoSW50ZXJzZWN0aW9uID0gcmFuZ2VJbnRlcnNlY3Rpb24oXG4gICAgICAgICAgICAgIGJyZWFkdGhJbnRlcnNlY3Rpb25bMF0sXG4gICAgICAgICAgICAgIGJyZWFkdGhJbnRlcnNlY3Rpb25bMV0sXG4gICAgICAgICAgICAgIHNlbGVjdGlvblBhZ2VCb3VuZHMubWluWCxcbiAgICAgICAgICAgICAgc2VsZWN0aW9uUGFnZUJvdW5kcy5tYXhYXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcImdhcHNcIixcbiAgICAgICAgICAgICAgZGlyZWN0aW9uOiBcInZlcnRpY2FsXCIsXG4gICAgICAgICAgICAgIGlkOiB1bmlxdWVJZCgpLFxuICAgICAgICAgICAgICBnYXBzOiBbXG4gICAgICAgICAgICAgICAgLi4uZmluZEFkamFjZW50R2FwcyhcbiAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLFxuICAgICAgICAgICAgICAgICAgc3RhcnROb2RlLmlkLFxuICAgICAgICAgICAgICAgICAgbmV3R2Fwc0xlbmd0aCxcbiAgICAgICAgICAgICAgICAgIFwiYmFja3dhcmRcIixcbiAgICAgICAgICAgICAgICAgIGdhcEJyZWFkdGhJbnRlcnNlY3Rpb25cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHN0YXJ0RWRnZSxcbiAgICAgICAgICAgICAgICAgIGVuZEVkZ2U6IHNlbGVjdGlvblNpZGVzLnRvcFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgc3RhcnRFZGdlOiBzZWxlY3Rpb25TaWRlcy5ib3R0b20sXG4gICAgICAgICAgICAgICAgICBlbmRFZGdlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAuLi5maW5kQWRqYWNlbnRHYXBzKFxuICAgICAgICAgICAgICAgICAgdmVydGljYWwsXG4gICAgICAgICAgICAgICAgICBzbmFwLmdhcC5lbmROb2RlLmlkLFxuICAgICAgICAgICAgICAgICAgbmV3R2Fwc0xlbmd0aCxcbiAgICAgICAgICAgICAgICAgIFwiZm9yd2FyZFwiLFxuICAgICAgICAgICAgICAgICAgZ2FwQnJlYWR0aEludGVyc2VjdGlvblxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImdhcF9kdXBsaWNhdGVcIjpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY29uc3QgZ2FwQnJlYWR0aEludGVyc2VjdGlvbiA9IHJhbmdlSW50ZXJzZWN0aW9uKFxuICAgICAgICAgICAgICAgIGJyZWFkdGhJbnRlcnNlY3Rpb25bMF0sXG4gICAgICAgICAgICAgICAgYnJlYWR0aEludGVyc2VjdGlvblsxXSxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25QYWdlQm91bmRzLm1pblgsXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uUGFnZUJvdW5kcy5tYXhYXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImdhcHNcIixcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IFwidmVydGljYWxcIixcbiAgICAgICAgICAgICAgICBpZDogdW5pcXVlSWQoKSxcbiAgICAgICAgICAgICAgICBnYXBzOiBzbmFwLnByb3RydXNpb25EaXJlY3Rpb24gPT09IFwidG9wXCIgPyBbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0RWRnZTogc2VsZWN0aW9uU2lkZXMuYm90dG9tLFxuICAgICAgICAgICAgICAgICAgICBlbmRFZGdlOiBzdGFydEVkZ2UubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICh2KSA9PiB2LmNsb25lKCkuYWRkWFkoMCwgLXN0YXJ0Tm9kZS5wYWdlQm91bmRzLmhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHsgc3RhcnRFZGdlLCBlbmRFZGdlIH0sXG4gICAgICAgICAgICAgICAgICAuLi5maW5kQWRqYWNlbnRHYXBzKFxuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbCxcbiAgICAgICAgICAgICAgICAgICAgZW5kTm9kZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBcImZvcndhcmRcIixcbiAgICAgICAgICAgICAgICAgICAgZ2FwQnJlYWR0aEludGVyc2VjdGlvblxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIF0gOiBbXG4gICAgICAgICAgICAgICAgICAuLi5maW5kQWRqYWNlbnRHYXBzKFxuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbCxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnROb2RlLmlkLFxuICAgICAgICAgICAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIFwiYmFja3dhcmRcIixcbiAgICAgICAgICAgICAgICAgICAgZ2FwQnJlYWR0aEludGVyc2VjdGlvblxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIHsgc3RhcnRFZGdlLCBlbmRFZGdlIH0sXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0RWRnZTogZW5kRWRnZS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgKHYpID0+IHYuY2xvbmUoKS5hZGRYWSgwLCBlbmROb2RlLnBhZ2VCb3VuZHMuaGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBlbmRFZGdlOiBzZWxlY3Rpb25TaWRlcy50b3BcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZGVkdXBlR2FwU25hcHMocmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgQm91bmRzU25hcHMucHJvdG90eXBlLCBcImdldFNuYXBQb2ludHNDYWNoZVwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBCb3VuZHNTbmFwcy5wcm90b3R5cGUsIFwiZ2V0U25hcHBhYmxlUG9pbnRzXCIsIDEpO1xuX19kZWNvcmF0ZUNsYXNzKFtcbiAgY29tcHV0ZWRcbl0sIEJvdW5kc1NuYXBzLnByb3RvdHlwZSwgXCJnZXRTbmFwcGFibGVHYXBOb2Rlc1wiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBCb3VuZHNTbmFwcy5wcm90b3R5cGUsIFwiZ2V0VmlzaWJsZUdhcHNcIiwgMSk7XG5mdW5jdGlvbiBnZXRSZXNpemVTbmFwUG9pbnRzRm9ySGFuZGxlKGhhbmRsZSwgc2VsZWN0aW9uUGFnZUJvdW5kcykge1xuICBjb25zdCB7IG1pblgsIG1heFgsIG1pblksIG1heFkgfSA9IHNlbGVjdGlvblBhZ2VCb3VuZHM7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgIGNhc2UgXCJ0b3BcIjpcbiAgICBjYXNlIFwibGVmdFwiOlxuICAgIGNhc2UgXCJ0b3BfbGVmdFwiOlxuICAgIGNhc2UgXCJhbnlcIjpcbiAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgaWQ6IFwidG9wX2xlZnRcIixcbiAgICAgICAgaGFuZGxlOiBcInRvcF9sZWZ0XCIsXG4gICAgICAgIHg6IG1pblgsXG4gICAgICAgIHk6IG1pbllcbiAgICAgIH0pO1xuICB9XG4gIHN3aXRjaCAoaGFuZGxlKSB7XG4gICAgY2FzZSBcInRvcFwiOlxuICAgIGNhc2UgXCJyaWdodFwiOlxuICAgIGNhc2UgXCJ0b3BfcmlnaHRcIjpcbiAgICBjYXNlIFwiYW55XCI6XG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIGlkOiBcInRvcF9yaWdodFwiLFxuICAgICAgICBoYW5kbGU6IFwidG9wX3JpZ2h0XCIsXG4gICAgICAgIHg6IG1heFgsXG4gICAgICAgIHk6IG1pbllcbiAgICAgIH0pO1xuICB9XG4gIHN3aXRjaCAoaGFuZGxlKSB7XG4gICAgY2FzZSBcImJvdHRvbVwiOlxuICAgIGNhc2UgXCJyaWdodFwiOlxuICAgIGNhc2UgXCJib3R0b21fcmlnaHRcIjpcbiAgICBjYXNlIFwiYW55XCI6XG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIGlkOiBcImJvdHRvbV9yaWdodFwiLFxuICAgICAgICBoYW5kbGU6IFwiYm90dG9tX3JpZ2h0XCIsXG4gICAgICAgIHg6IG1heFgsXG4gICAgICAgIHk6IG1heFlcbiAgICAgIH0pO1xuICB9XG4gIHN3aXRjaCAoaGFuZGxlKSB7XG4gICAgY2FzZSBcImJvdHRvbVwiOlxuICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgY2FzZSBcImJvdHRvbV9sZWZ0XCI6XG4gICAgY2FzZSBcImFueVwiOlxuICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICBpZDogXCJib3R0b21fbGVmdFwiLFxuICAgICAgICBoYW5kbGU6IFwiYm90dG9tX2xlZnRcIixcbiAgICAgICAgeDogbWluWCxcbiAgICAgICAgeTogbWF4WVxuICAgICAgfSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCB7XG4gIEJvdW5kc1NuYXBzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Qm91bmRzU25hcHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/BoundsSnaps.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/HandleSnaps.mjs":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/HandleSnaps.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HandleSnaps: () => (/* binding */ HandleSnaps)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/uniqueId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs\");\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\n\n\n\nconst defaultGetSelfSnapOutline = () => null;\nconst defaultGetSelfSnapPoints = () => [];\nclass HandleSnaps {\n  constructor(manager) {\n    this.manager = manager;\n    this.editor = manager.editor;\n  }\n  editor;\n  getSnapGeometryCache() {\n    const { editor } = this;\n    return editor.store.createComputedCache(\"handle snap geometry\", (shape) => {\n      const snapGeometry = editor.getShapeUtil(shape).getHandleSnapGeometry(shape);\n      return {\n        outline: snapGeometry.outline === void 0 ? editor.getShapeGeometry(shape) : snapGeometry.outline,\n        points: snapGeometry.points ?? [],\n        getSelfSnapOutline: snapGeometry.getSelfSnapOutline ?? defaultGetSelfSnapOutline,\n        getSelfSnapPoints: snapGeometry.getSelfSnapPoints ?? defaultGetSelfSnapPoints\n      };\n    });\n  }\n  *iterateSnapPointsInPageSpace(currentShapeId, currentHandle) {\n    const selfSnapPoints = this.getSnapGeometryCache().get(currentShapeId)?.getSelfSnapPoints(currentHandle);\n    if (selfSnapPoints && selfSnapPoints.length) {\n      const shapePageTransform = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assertExists)(this.editor.getShapePageTransform(currentShapeId));\n      for (const point of selfSnapPoints) {\n        yield shapePageTransform.applyToPoint(point);\n      }\n    }\n    for (const shapeId of this.manager.getSnappableShapes()) {\n      if (shapeId === currentShapeId)\n        continue;\n      const snapPoints = this.getSnapGeometryCache().get(shapeId)?.points;\n      if (!snapPoints || !snapPoints.length)\n        continue;\n      const shapePageTransform = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assertExists)(this.editor.getShapePageTransform(shapeId));\n      for (const point of snapPoints) {\n        yield shapePageTransform.applyToPoint(point);\n      }\n    }\n  }\n  *iterateSnapOutlines(currentShapeId, currentHandle) {\n    const selfSnapOutline = this.getSnapGeometryCache().get(currentShapeId)?.getSelfSnapOutline(currentHandle);\n    if (selfSnapOutline) {\n      yield { shapeId: currentShapeId, outline: selfSnapOutline };\n    }\n    for (const shapeId of this.manager.getSnappableShapes()) {\n      if (shapeId === currentShapeId)\n        continue;\n      const snapOutline = this.getSnapGeometryCache().get(shapeId)?.outline;\n      if (!snapOutline)\n        continue;\n      yield { shapeId, outline: snapOutline };\n    }\n  }\n  getHandleSnapPosition({\n    currentShapeId,\n    handle,\n    handleInPageSpace\n  }) {\n    const snapThreshold = this.manager.getSnapThreshold();\n    let minDistanceForSnapPoint = snapThreshold;\n    let nearestSnapPoint = null;\n    for (const snapPoint of this.iterateSnapPointsInPageSpace(currentShapeId, handle)) {\n      if (_primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec.DistMin(handleInPageSpace, snapPoint, minDistanceForSnapPoint)) {\n        minDistanceForSnapPoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec.Dist(handleInPageSpace, snapPoint);\n        nearestSnapPoint = snapPoint;\n      }\n    }\n    if (nearestSnapPoint)\n      return nearestSnapPoint;\n    let minDistanceForOutline = snapThreshold;\n    let nearestPointOnOutline = null;\n    for (const { shapeId, outline } of this.iterateSnapOutlines(currentShapeId, handle)) {\n      const shapePageTransform = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assertExists)(this.editor.getShapePageTransform(shapeId));\n      const pointInShapeSpace = this.editor.getPointInShapeSpace(shapeId, handleInPageSpace);\n      const nearestShapePointInShapeSpace = outline.nearestPoint(pointInShapeSpace);\n      const nearestInPageSpace = shapePageTransform.applyToPoint(nearestShapePointInShapeSpace);\n      if (_primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec.DistMin(handleInPageSpace, nearestInPageSpace, minDistanceForOutline)) {\n        minDistanceForOutline = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec.Dist(handleInPageSpace, nearestInPageSpace);\n        nearestPointOnOutline = nearestInPageSpace;\n      }\n    }\n    if (nearestPointOnOutline)\n      return nearestPointOnOutline;\n    return null;\n  }\n  snapHandle({\n    currentShapeId,\n    handle\n  }) {\n    const currentShapeTransform = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assertExists)(this.editor.getShapePageTransform(currentShapeId));\n    const handleInPageSpace = currentShapeTransform.applyToPoint(handle);\n    const snapPosition = this.getHandleSnapPosition({ currentShapeId, handle, handleInPageSpace });\n    if (snapPosition) {\n      this.manager.setIndicators([\n        {\n          id: (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_3__.uniqueId)(),\n          type: \"points\",\n          points: [snapPosition]\n        }\n      ]);\n      return { nudge: _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec.Sub(snapPosition, handleInPageSpace) };\n    }\n    return null;\n  }\n}\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], HandleSnaps.prototype, \"getSnapGeometryCache\", 1);\n\n//# sourceMappingURL=HandleSnaps.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9IYW5kbGVTbmFwcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxRQUFRO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN5QztBQUNJO0FBQ0s7QUFDSztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywyREFBWTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywyREFBWTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsb0RBQUc7QUFDYixrQ0FBa0Msb0RBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDLGlDQUFpQywyREFBWTtBQUM3QztBQUNBO0FBQ0E7QUFDQSxVQUFVLG9EQUFHO0FBQ2IsZ0NBQWdDLG9EQUFHO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGtDQUFrQywyREFBWTtBQUM5QztBQUNBLHNEQUFzRCwyQ0FBMkM7QUFDakc7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2REFBUTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTyxvREFBRztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL21hbmFnZXJzL1NuYXBNYW5hZ2VyL0hhbmRsZVNuYXBzLm1qcz8wNTAzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19kZWNvcmF0ZUNsYXNzID0gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBraW5kKSA9PiB7XG4gIHZhciByZXN1bHQgPSBraW5kID4gMSA/IHZvaWQgMCA6IGtpbmQgPyBfX2dldE93blByb3BEZXNjKHRhcmdldCwga2V5KSA6IHRhcmdldDtcbiAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMSwgZGVjb3JhdG9yOyBpID49IDA7IGktLSlcbiAgICBpZiAoZGVjb3JhdG9yID0gZGVjb3JhdG9yc1tpXSlcbiAgICAgIHJlc3VsdCA9IChraW5kID8gZGVjb3JhdG9yKHRhcmdldCwga2V5LCByZXN1bHQpIDogZGVjb3JhdG9yKHJlc3VsdCkpIHx8IHJlc3VsdDtcbiAgaWYgKGtpbmQgJiYgcmVzdWx0KVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIGtleSwgcmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5pbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyBhc3NlcnRFeGlzdHMgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uLy4uLy4uL3ByaW1pdGl2ZXMvVmVjLm1qc1wiO1xuaW1wb3J0IHsgdW5pcXVlSWQgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvdW5pcXVlSWQubWpzXCI7XG5jb25zdCBkZWZhdWx0R2V0U2VsZlNuYXBPdXRsaW5lID0gKCkgPT4gbnVsbDtcbmNvbnN0IGRlZmF1bHRHZXRTZWxmU25hcFBvaW50cyA9ICgpID0+IFtdO1xuY2xhc3MgSGFuZGxlU25hcHMge1xuICBjb25zdHJ1Y3RvcihtYW5hZ2VyKSB7XG4gICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcbiAgICB0aGlzLmVkaXRvciA9IG1hbmFnZXIuZWRpdG9yO1xuICB9XG4gIGVkaXRvcjtcbiAgZ2V0U25hcEdlb21ldHJ5Q2FjaGUoKSB7XG4gICAgY29uc3QgeyBlZGl0b3IgfSA9IHRoaXM7XG4gICAgcmV0dXJuIGVkaXRvci5zdG9yZS5jcmVhdGVDb21wdXRlZENhY2hlKFwiaGFuZGxlIHNuYXAgZ2VvbWV0cnlcIiwgKHNoYXBlKSA9PiB7XG4gICAgICBjb25zdCBzbmFwR2VvbWV0cnkgPSBlZGl0b3IuZ2V0U2hhcGVVdGlsKHNoYXBlKS5nZXRIYW5kbGVTbmFwR2VvbWV0cnkoc2hhcGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb3V0bGluZTogc25hcEdlb21ldHJ5Lm91dGxpbmUgPT09IHZvaWQgMCA/IGVkaXRvci5nZXRTaGFwZUdlb21ldHJ5KHNoYXBlKSA6IHNuYXBHZW9tZXRyeS5vdXRsaW5lLFxuICAgICAgICBwb2ludHM6IHNuYXBHZW9tZXRyeS5wb2ludHMgPz8gW10sXG4gICAgICAgIGdldFNlbGZTbmFwT3V0bGluZTogc25hcEdlb21ldHJ5LmdldFNlbGZTbmFwT3V0bGluZSA/PyBkZWZhdWx0R2V0U2VsZlNuYXBPdXRsaW5lLFxuICAgICAgICBnZXRTZWxmU25hcFBvaW50czogc25hcEdlb21ldHJ5LmdldFNlbGZTbmFwUG9pbnRzID8/IGRlZmF1bHRHZXRTZWxmU25hcFBvaW50c1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuICAqaXRlcmF0ZVNuYXBQb2ludHNJblBhZ2VTcGFjZShjdXJyZW50U2hhcGVJZCwgY3VycmVudEhhbmRsZSkge1xuICAgIGNvbnN0IHNlbGZTbmFwUG9pbnRzID0gdGhpcy5nZXRTbmFwR2VvbWV0cnlDYWNoZSgpLmdldChjdXJyZW50U2hhcGVJZCk/LmdldFNlbGZTbmFwUG9pbnRzKGN1cnJlbnRIYW5kbGUpO1xuICAgIGlmIChzZWxmU25hcFBvaW50cyAmJiBzZWxmU25hcFBvaW50cy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNoYXBlUGFnZVRyYW5zZm9ybSA9IGFzc2VydEV4aXN0cyh0aGlzLmVkaXRvci5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oY3VycmVudFNoYXBlSWQpKTtcbiAgICAgIGZvciAoY29uc3QgcG9pbnQgb2Ygc2VsZlNuYXBQb2ludHMpIHtcbiAgICAgICAgeWllbGQgc2hhcGVQYWdlVHJhbnNmb3JtLmFwcGx5VG9Qb2ludChwb2ludCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qgc2hhcGVJZCBvZiB0aGlzLm1hbmFnZXIuZ2V0U25hcHBhYmxlU2hhcGVzKCkpIHtcbiAgICAgIGlmIChzaGFwZUlkID09PSBjdXJyZW50U2hhcGVJZClcbiAgICAgICAgY29udGludWU7XG4gICAgICBjb25zdCBzbmFwUG9pbnRzID0gdGhpcy5nZXRTbmFwR2VvbWV0cnlDYWNoZSgpLmdldChzaGFwZUlkKT8ucG9pbnRzO1xuICAgICAgaWYgKCFzbmFwUG9pbnRzIHx8ICFzbmFwUG9pbnRzLmxlbmd0aClcbiAgICAgICAgY29udGludWU7XG4gICAgICBjb25zdCBzaGFwZVBhZ2VUcmFuc2Zvcm0gPSBhc3NlcnRFeGlzdHModGhpcy5lZGl0b3IuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlSWQpKTtcbiAgICAgIGZvciAoY29uc3QgcG9pbnQgb2Ygc25hcFBvaW50cykge1xuICAgICAgICB5aWVsZCBzaGFwZVBhZ2VUcmFuc2Zvcm0uYXBwbHlUb1BvaW50KHBvaW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgKml0ZXJhdGVTbmFwT3V0bGluZXMoY3VycmVudFNoYXBlSWQsIGN1cnJlbnRIYW5kbGUpIHtcbiAgICBjb25zdCBzZWxmU25hcE91dGxpbmUgPSB0aGlzLmdldFNuYXBHZW9tZXRyeUNhY2hlKCkuZ2V0KGN1cnJlbnRTaGFwZUlkKT8uZ2V0U2VsZlNuYXBPdXRsaW5lKGN1cnJlbnRIYW5kbGUpO1xuICAgIGlmIChzZWxmU25hcE91dGxpbmUpIHtcbiAgICAgIHlpZWxkIHsgc2hhcGVJZDogY3VycmVudFNoYXBlSWQsIG91dGxpbmU6IHNlbGZTbmFwT3V0bGluZSB9O1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNoYXBlSWQgb2YgdGhpcy5tYW5hZ2VyLmdldFNuYXBwYWJsZVNoYXBlcygpKSB7XG4gICAgICBpZiAoc2hhcGVJZCA9PT0gY3VycmVudFNoYXBlSWQpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgY29uc3Qgc25hcE91dGxpbmUgPSB0aGlzLmdldFNuYXBHZW9tZXRyeUNhY2hlKCkuZ2V0KHNoYXBlSWQpPy5vdXRsaW5lO1xuICAgICAgaWYgKCFzbmFwT3V0bGluZSlcbiAgICAgICAgY29udGludWU7XG4gICAgICB5aWVsZCB7IHNoYXBlSWQsIG91dGxpbmU6IHNuYXBPdXRsaW5lIH07XG4gICAgfVxuICB9XG4gIGdldEhhbmRsZVNuYXBQb3NpdGlvbih7XG4gICAgY3VycmVudFNoYXBlSWQsXG4gICAgaGFuZGxlLFxuICAgIGhhbmRsZUluUGFnZVNwYWNlXG4gIH0pIHtcbiAgICBjb25zdCBzbmFwVGhyZXNob2xkID0gdGhpcy5tYW5hZ2VyLmdldFNuYXBUaHJlc2hvbGQoKTtcbiAgICBsZXQgbWluRGlzdGFuY2VGb3JTbmFwUG9pbnQgPSBzbmFwVGhyZXNob2xkO1xuICAgIGxldCBuZWFyZXN0U25hcFBvaW50ID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IHNuYXBQb2ludCBvZiB0aGlzLml0ZXJhdGVTbmFwUG9pbnRzSW5QYWdlU3BhY2UoY3VycmVudFNoYXBlSWQsIGhhbmRsZSkpIHtcbiAgICAgIGlmIChWZWMuRGlzdE1pbihoYW5kbGVJblBhZ2VTcGFjZSwgc25hcFBvaW50LCBtaW5EaXN0YW5jZUZvclNuYXBQb2ludCkpIHtcbiAgICAgICAgbWluRGlzdGFuY2VGb3JTbmFwUG9pbnQgPSBWZWMuRGlzdChoYW5kbGVJblBhZ2VTcGFjZSwgc25hcFBvaW50KTtcbiAgICAgICAgbmVhcmVzdFNuYXBQb2ludCA9IHNuYXBQb2ludDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5lYXJlc3RTbmFwUG9pbnQpXG4gICAgICByZXR1cm4gbmVhcmVzdFNuYXBQb2ludDtcbiAgICBsZXQgbWluRGlzdGFuY2VGb3JPdXRsaW5lID0gc25hcFRocmVzaG9sZDtcbiAgICBsZXQgbmVhcmVzdFBvaW50T25PdXRsaW5lID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IHsgc2hhcGVJZCwgb3V0bGluZSB9IG9mIHRoaXMuaXRlcmF0ZVNuYXBPdXRsaW5lcyhjdXJyZW50U2hhcGVJZCwgaGFuZGxlKSkge1xuICAgICAgY29uc3Qgc2hhcGVQYWdlVHJhbnNmb3JtID0gYXNzZXJ0RXhpc3RzKHRoaXMuZWRpdG9yLmdldFNoYXBlUGFnZVRyYW5zZm9ybShzaGFwZUlkKSk7XG4gICAgICBjb25zdCBwb2ludEluU2hhcGVTcGFjZSA9IHRoaXMuZWRpdG9yLmdldFBvaW50SW5TaGFwZVNwYWNlKHNoYXBlSWQsIGhhbmRsZUluUGFnZVNwYWNlKTtcbiAgICAgIGNvbnN0IG5lYXJlc3RTaGFwZVBvaW50SW5TaGFwZVNwYWNlID0gb3V0bGluZS5uZWFyZXN0UG9pbnQocG9pbnRJblNoYXBlU3BhY2UpO1xuICAgICAgY29uc3QgbmVhcmVzdEluUGFnZVNwYWNlID0gc2hhcGVQYWdlVHJhbnNmb3JtLmFwcGx5VG9Qb2ludChuZWFyZXN0U2hhcGVQb2ludEluU2hhcGVTcGFjZSk7XG4gICAgICBpZiAoVmVjLkRpc3RNaW4oaGFuZGxlSW5QYWdlU3BhY2UsIG5lYXJlc3RJblBhZ2VTcGFjZSwgbWluRGlzdGFuY2VGb3JPdXRsaW5lKSkge1xuICAgICAgICBtaW5EaXN0YW5jZUZvck91dGxpbmUgPSBWZWMuRGlzdChoYW5kbGVJblBhZ2VTcGFjZSwgbmVhcmVzdEluUGFnZVNwYWNlKTtcbiAgICAgICAgbmVhcmVzdFBvaW50T25PdXRsaW5lID0gbmVhcmVzdEluUGFnZVNwYWNlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobmVhcmVzdFBvaW50T25PdXRsaW5lKVxuICAgICAgcmV0dXJuIG5lYXJlc3RQb2ludE9uT3V0bGluZTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBzbmFwSGFuZGxlKHtcbiAgICBjdXJyZW50U2hhcGVJZCxcbiAgICBoYW5kbGVcbiAgfSkge1xuICAgIGNvbnN0IGN1cnJlbnRTaGFwZVRyYW5zZm9ybSA9IGFzc2VydEV4aXN0cyh0aGlzLmVkaXRvci5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oY3VycmVudFNoYXBlSWQpKTtcbiAgICBjb25zdCBoYW5kbGVJblBhZ2VTcGFjZSA9IGN1cnJlbnRTaGFwZVRyYW5zZm9ybS5hcHBseVRvUG9pbnQoaGFuZGxlKTtcbiAgICBjb25zdCBzbmFwUG9zaXRpb24gPSB0aGlzLmdldEhhbmRsZVNuYXBQb3NpdGlvbih7IGN1cnJlbnRTaGFwZUlkLCBoYW5kbGUsIGhhbmRsZUluUGFnZVNwYWNlIH0pO1xuICAgIGlmIChzbmFwUG9zaXRpb24pIHtcbiAgICAgIHRoaXMubWFuYWdlci5zZXRJbmRpY2F0b3JzKFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiB1bmlxdWVJZCgpLFxuICAgICAgICAgIHR5cGU6IFwicG9pbnRzXCIsXG4gICAgICAgICAgcG9pbnRzOiBbc25hcFBvc2l0aW9uXVxuICAgICAgICB9XG4gICAgICBdKTtcbiAgICAgIHJldHVybiB7IG51ZGdlOiBWZWMuU3ViKHNuYXBQb3NpdGlvbiwgaGFuZGxlSW5QYWdlU3BhY2UpIH07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgSGFuZGxlU25hcHMucHJvdG90eXBlLCBcImdldFNuYXBHZW9tZXRyeUNhY2hlXCIsIDEpO1xuZXhwb3J0IHtcbiAgSGFuZGxlU25hcHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1IYW5kbGVTbmFwcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/HandleSnaps.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/SnapManager.mjs":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/SnapManager.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SnapManager: () => (/* binding */ SnapManager)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _BoundsSnaps_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./BoundsSnaps.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/BoundsSnaps.mjs\");\n/* harmony import */ var _HandleSnaps_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./HandleSnaps.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/HandleSnaps.mjs\");\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\n\n\n\nclass SnapManager {\n  constructor(editor) {\n    this.editor = editor;\n    this.shapeBounds = new _BoundsSnaps_mjs__WEBPACK_IMPORTED_MODULE_2__.BoundsSnaps(this);\n    this.handles = new _HandleSnaps_mjs__WEBPACK_IMPORTED_MODULE_3__.HandleSnaps(this);\n  }\n  shapeBounds;\n  handles;\n  _snapIndicators = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"snapLines\", void 0);\n  getIndicators() {\n    return this._snapIndicators.get() ?? _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY;\n  }\n  clearIndicators() {\n    if (this.getIndicators().length) {\n      this._snapIndicators.set(void 0);\n    }\n  }\n  setIndicators(indicators) {\n    this._snapIndicators.set(indicators);\n  }\n  getSnapThreshold() {\n    return 8 / this.editor.getZoomLevel();\n  }\n  getSnappableShapes() {\n    const { editor } = this;\n    const renderingBounds = editor.getViewportPageBounds();\n    const selectedShapeIds = editor.getSelectedShapeIds();\n    const snappableShapes = /* @__PURE__ */ new Set();\n    const collectSnappableShapesFromParent = (parentId) => {\n      if ((0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.isShapeId)(parentId)) {\n        const parent = editor.getShape(parentId);\n        if (parent && editor.isShapeOfType(parent, \"frame\")) {\n          snappableShapes.add(parentId);\n        }\n      }\n      const sortedChildIds = editor.getSortedChildIdsForParent(parentId);\n      for (const childId of sortedChildIds) {\n        if (selectedShapeIds.includes(childId))\n          continue;\n        const childShape = editor.getShape(childId);\n        if (!childShape)\n          continue;\n        const util = editor.getShapeUtil(childShape);\n        if (!util.canSnap(childShape))\n          continue;\n        const pageBounds = editor.getShapePageBounds(childId);\n        if (!(pageBounds && renderingBounds.includes(pageBounds)))\n          continue;\n        if (editor.isShapeOfType(childShape, \"group\")) {\n          collectSnappableShapesFromParent(childId);\n          continue;\n        }\n        snappableShapes.add(childId);\n      }\n    };\n    collectSnappableShapesFromParent(this.getCurrentCommonAncestor() ?? editor.getCurrentPageId());\n    return snappableShapes;\n  }\n  getCurrentCommonAncestor() {\n    return this.editor.findCommonAncestor(this.editor.getSelectedShapes());\n  }\n}\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], SnapManager.prototype, \"getSnapThreshold\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], SnapManager.prototype, \"getSnappableShapes\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], SnapManager.prototype, \"getCurrentCommonAncestor\", 1);\n\n//# sourceMappingURL=SnapManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9TbmFwTWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxRQUFRO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUM0RDtBQUNmO0FBQ0c7QUFDQTtBQUNoRDtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIseURBQVc7QUFDdEMsdUJBQXVCLHlEQUFXO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtREFBSTtBQUN4QjtBQUNBLHlDQUF5QyxzREFBVztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMkRBQVM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TbmFwTWFuYWdlci9TbmFwTWFuYWdlci5tanM/OTE5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZGVjb3JhdGVDbGFzcyA9IChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwga2luZCkgPT4ge1xuICB2YXIgcmVzdWx0ID0ga2luZCA+IDEgPyB2b2lkIDAgOiBraW5kID8gX19nZXRPd25Qcm9wRGVzYyh0YXJnZXQsIGtleSkgOiB0YXJnZXQ7XG4gIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDEsIGRlY29yYXRvcjsgaSA+PSAwOyBpLS0pXG4gICAgaWYgKGRlY29yYXRvciA9IGRlY29yYXRvcnNbaV0pXG4gICAgICByZXN1bHQgPSAoa2luZCA/IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcmVzdWx0KSA6IGRlY29yYXRvcihyZXN1bHQpKSB8fCByZXN1bHQ7XG4gIGlmIChraW5kICYmIHJlc3VsdClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBrZXksIHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuaW1wb3J0IHsgRU1QVFlfQVJSQVksIGF0b20sIGNvbXB1dGVkIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IGlzU2hhcGVJZCB9IGZyb20gXCJAdGxkcmF3L3Rsc2NoZW1hXCI7XG5pbXBvcnQgeyBCb3VuZHNTbmFwcyB9IGZyb20gXCIuL0JvdW5kc1NuYXBzLm1qc1wiO1xuaW1wb3J0IHsgSGFuZGxlU25hcHMgfSBmcm9tIFwiLi9IYW5kbGVTbmFwcy5tanNcIjtcbmNsYXNzIFNuYXBNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoZWRpdG9yKSB7XG4gICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gICAgdGhpcy5zaGFwZUJvdW5kcyA9IG5ldyBCb3VuZHNTbmFwcyh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZXMgPSBuZXcgSGFuZGxlU25hcHModGhpcyk7XG4gIH1cbiAgc2hhcGVCb3VuZHM7XG4gIGhhbmRsZXM7XG4gIF9zbmFwSW5kaWNhdG9ycyA9IGF0b20oXCJzbmFwTGluZXNcIiwgdm9pZCAwKTtcbiAgZ2V0SW5kaWNhdG9ycygpIHtcbiAgICByZXR1cm4gdGhpcy5fc25hcEluZGljYXRvcnMuZ2V0KCkgPz8gRU1QVFlfQVJSQVk7XG4gIH1cbiAgY2xlYXJJbmRpY2F0b3JzKCkge1xuICAgIGlmICh0aGlzLmdldEluZGljYXRvcnMoKS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX3NuYXBJbmRpY2F0b3JzLnNldCh2b2lkIDApO1xuICAgIH1cbiAgfVxuICBzZXRJbmRpY2F0b3JzKGluZGljYXRvcnMpIHtcbiAgICB0aGlzLl9zbmFwSW5kaWNhdG9ycy5zZXQoaW5kaWNhdG9ycyk7XG4gIH1cbiAgZ2V0U25hcFRocmVzaG9sZCgpIHtcbiAgICByZXR1cm4gOCAvIHRoaXMuZWRpdG9yLmdldFpvb21MZXZlbCgpO1xuICB9XG4gIGdldFNuYXBwYWJsZVNoYXBlcygpIHtcbiAgICBjb25zdCB7IGVkaXRvciB9ID0gdGhpcztcbiAgICBjb25zdCByZW5kZXJpbmdCb3VuZHMgPSBlZGl0b3IuZ2V0Vmlld3BvcnRQYWdlQm91bmRzKCk7XG4gICAgY29uc3Qgc2VsZWN0ZWRTaGFwZUlkcyA9IGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKCk7XG4gICAgY29uc3Qgc25hcHBhYmxlU2hhcGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBjb25zdCBjb2xsZWN0U25hcHBhYmxlU2hhcGVzRnJvbVBhcmVudCA9IChwYXJlbnRJZCkgPT4ge1xuICAgICAgaWYgKGlzU2hhcGVJZChwYXJlbnRJZCkpIHtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gZWRpdG9yLmdldFNoYXBlKHBhcmVudElkKTtcbiAgICAgICAgaWYgKHBhcmVudCAmJiBlZGl0b3IuaXNTaGFwZU9mVHlwZShwYXJlbnQsIFwiZnJhbWVcIikpIHtcbiAgICAgICAgICBzbmFwcGFibGVTaGFwZXMuYWRkKHBhcmVudElkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgc29ydGVkQ2hpbGRJZHMgPSBlZGl0b3IuZ2V0U29ydGVkQ2hpbGRJZHNGb3JQYXJlbnQocGFyZW50SWQpO1xuICAgICAgZm9yIChjb25zdCBjaGlsZElkIG9mIHNvcnRlZENoaWxkSWRzKSB7XG4gICAgICAgIGlmIChzZWxlY3RlZFNoYXBlSWRzLmluY2x1ZGVzKGNoaWxkSWQpKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBjaGlsZFNoYXBlID0gZWRpdG9yLmdldFNoYXBlKGNoaWxkSWQpO1xuICAgICAgICBpZiAoIWNoaWxkU2hhcGUpXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNvbnN0IHV0aWwgPSBlZGl0b3IuZ2V0U2hhcGVVdGlsKGNoaWxkU2hhcGUpO1xuICAgICAgICBpZiAoIXV0aWwuY2FuU25hcChjaGlsZFNoYXBlKSlcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY29uc3QgcGFnZUJvdW5kcyA9IGVkaXRvci5nZXRTaGFwZVBhZ2VCb3VuZHMoY2hpbGRJZCk7XG4gICAgICAgIGlmICghKHBhZ2VCb3VuZHMgJiYgcmVuZGVyaW5nQm91bmRzLmluY2x1ZGVzKHBhZ2VCb3VuZHMpKSlcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgaWYgKGVkaXRvci5pc1NoYXBlT2ZUeXBlKGNoaWxkU2hhcGUsIFwiZ3JvdXBcIikpIHtcbiAgICAgICAgICBjb2xsZWN0U25hcHBhYmxlU2hhcGVzRnJvbVBhcmVudChjaGlsZElkKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBzbmFwcGFibGVTaGFwZXMuYWRkKGNoaWxkSWQpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29sbGVjdFNuYXBwYWJsZVNoYXBlc0Zyb21QYXJlbnQodGhpcy5nZXRDdXJyZW50Q29tbW9uQW5jZXN0b3IoKSA/PyBlZGl0b3IuZ2V0Q3VycmVudFBhZ2VJZCgpKTtcbiAgICByZXR1cm4gc25hcHBhYmxlU2hhcGVzO1xuICB9XG4gIGdldEN1cnJlbnRDb21tb25BbmNlc3RvcigpIHtcbiAgICByZXR1cm4gdGhpcy5lZGl0b3IuZmluZENvbW1vbkFuY2VzdG9yKHRoaXMuZWRpdG9yLmdldFNlbGVjdGVkU2hhcGVzKCkpO1xuICB9XG59XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgU25hcE1hbmFnZXIucHJvdG90eXBlLCBcImdldFNuYXBUaHJlc2hvbGRcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgU25hcE1hbmFnZXIucHJvdG90eXBlLCBcImdldFNuYXBwYWJsZVNoYXBlc1wiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBTbmFwTWFuYWdlci5wcm90b3R5cGUsIFwiZ2V0Q3VycmVudENvbW1vbkFuY2VzdG9yXCIsIDEpO1xuZXhwb3J0IHtcbiAgU25hcE1hbmFnZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TbmFwTWFuYWdlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/SnapManager/SnapManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/Stack.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/Stack.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   stack: () => (/* binding */ stack)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n\nfunction stack(items) {\n  if (items) {\n    let result = EMPTY_STACK_ITEM;\n    while (items.length) {\n      result = result.push(items.pop());\n    }\n    return result;\n  }\n  return EMPTY_STACK_ITEM;\n}\nclass EmptyStackItem {\n  length = 0;\n  head = null;\n  tail = this;\n  push(head) {\n    return new StackItem(head, this);\n  }\n  toArray() {\n    return _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY;\n  }\n  [Symbol.iterator]() {\n    return {\n      next() {\n        return { value: void 0, done: true };\n      }\n    };\n  }\n}\nconst EMPTY_STACK_ITEM = new EmptyStackItem();\nclass StackItem {\n  constructor(head, tail) {\n    this.head = head;\n    this.tail = tail;\n    this.length = tail.length + 1;\n  }\n  length;\n  push(head) {\n    return new StackItem(head, this);\n  }\n  toArray() {\n    return Array.from(this);\n  }\n  [Symbol.iterator]() {\n    let stack2 = this;\n    return {\n      next() {\n        if (stack2.length) {\n          const value = stack2.head;\n          stack2 = stack2.tail;\n          return { value, done: false };\n        } else {\n          return { value: void 0, done: true };\n        }\n      }\n    };\n  }\n}\n\n//# sourceMappingURL=Stack.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9TdGFjay5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxzREFBVztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixVQUFVO0FBQ1YsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvbWFuYWdlcnMvU3RhY2subWpzPzZkYzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRU1QVFlfQVJSQVkgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuZnVuY3Rpb24gc3RhY2soaXRlbXMpIHtcbiAgaWYgKGl0ZW1zKSB7XG4gICAgbGV0IHJlc3VsdCA9IEVNUFRZX1NUQUNLX0lURU07XG4gICAgd2hpbGUgKGl0ZW1zLmxlbmd0aCkge1xuICAgICAgcmVzdWx0ID0gcmVzdWx0LnB1c2goaXRlbXMucG9wKCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIHJldHVybiBFTVBUWV9TVEFDS19JVEVNO1xufVxuY2xhc3MgRW1wdHlTdGFja0l0ZW0ge1xuICBsZW5ndGggPSAwO1xuICBoZWFkID0gbnVsbDtcbiAgdGFpbCA9IHRoaXM7XG4gIHB1c2goaGVhZCkge1xuICAgIHJldHVybiBuZXcgU3RhY2tJdGVtKGhlYWQsIHRoaXMpO1xuICB9XG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIEVNUFRZX0FSUkFZO1xuICB9XG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuZXh0KCkge1xuICAgICAgICByZXR1cm4geyB2YWx1ZTogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuY29uc3QgRU1QVFlfU1RBQ0tfSVRFTSA9IG5ldyBFbXB0eVN0YWNrSXRlbSgpO1xuY2xhc3MgU3RhY2tJdGVtIHtcbiAgY29uc3RydWN0b3IoaGVhZCwgdGFpbCkge1xuICAgIHRoaXMuaGVhZCA9IGhlYWQ7XG4gICAgdGhpcy50YWlsID0gdGFpbDtcbiAgICB0aGlzLmxlbmd0aCA9IHRhaWwubGVuZ3RoICsgMTtcbiAgfVxuICBsZW5ndGg7XG4gIHB1c2goaGVhZCkge1xuICAgIHJldHVybiBuZXcgU3RhY2tJdGVtKGhlYWQsIHRoaXMpO1xuICB9XG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcyk7XG4gIH1cbiAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgbGV0IHN0YWNrMiA9IHRoaXM7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIGlmIChzdGFjazIubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBzdGFjazIuaGVhZDtcbiAgICAgICAgICBzdGFjazIgPSBzdGFjazIudGFpbDtcbiAgICAgICAgICByZXR1cm4geyB2YWx1ZSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5leHBvcnQge1xuICBzdGFja1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0YWNrLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/Stack.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TextManager.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TextManager.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TextManager: () => (/* binding */ TextManager)\n/* harmony export */ });\nconst fixNewLines = /\\r?\\n|\\r/g;\nfunction normalizeTextForDom(text) {\n  return text.replace(fixNewLines, \"\\n\").split(\"\\n\").map((x) => x || \" \").join(\"\\n\");\n}\nconst textAlignmentsForLtr = {\n  start: \"left\",\n  \"start-legacy\": \"left\",\n  middle: \"center\",\n  \"middle-legacy\": \"center\",\n  end: \"right\",\n  \"end-legacy\": \"right\"\n};\nconst spaceCharacterRegex = /\\s/;\nclass TextManager {\n  constructor(editor) {\n    this.editor = editor;\n    const container = this.editor.getContainer();\n    const elm = document.createElement(\"div\");\n    elm.classList.add(\"tl-text\");\n    elm.classList.add(\"tl-text-measure\");\n    elm.tabIndex = -1;\n    container.appendChild(elm);\n    this.baseElm = elm;\n    editor.disposables.add(() => {\n      elm.remove();\n    });\n  }\n  baseElm;\n  measureText = (textToMeasure, opts) => {\n    const elm = this.baseElm?.cloneNode();\n    this.baseElm.insertAdjacentElement(\"afterend\", elm);\n    elm.setAttribute(\"dir\", \"auto\");\n    elm.style.setProperty(\"unicode-bidi\", \"plaintext\");\n    elm.style.setProperty(\"font-family\", opts.fontFamily);\n    elm.style.setProperty(\"font-style\", opts.fontStyle);\n    elm.style.setProperty(\"font-weight\", opts.fontWeight);\n    elm.style.setProperty(\"font-size\", opts.fontSize + \"px\");\n    elm.style.setProperty(\"line-height\", opts.lineHeight * opts.fontSize + \"px\");\n    elm.style.setProperty(\"max-width\", opts.maxWidth === null ? null : opts.maxWidth + \"px\");\n    elm.style.setProperty(\"min-width\", opts.minWidth === null ? null : opts.minWidth + \"px\");\n    elm.style.setProperty(\"padding\", opts.padding);\n    elm.style.setProperty(\n      \"overflow-wrap\",\n      opts.disableOverflowWrapBreaking ? \"normal\" : \"break-word\"\n    );\n    elm.textContent = normalizeTextForDom(textToMeasure);\n    const scrollWidth = elm.scrollWidth;\n    const rect = elm.getBoundingClientRect();\n    elm.remove();\n    return {\n      x: 0,\n      y: 0,\n      w: rect.width,\n      h: rect.height,\n      scrollWidth\n    };\n  };\n  /**\n   * Given an html element, measure the position of each span of unbroken\n   * word/white-space characters within any text nodes it contains.\n   */\n  measureElementTextNodeSpans(element, { shouldTruncateToFirstLine = false } = {}) {\n    const spans = [];\n    const elmBounds = element.getBoundingClientRect();\n    const offsetX = -elmBounds.left;\n    const offsetY = -elmBounds.top;\n    const range = new Range();\n    const textNode = element.childNodes[0];\n    let idx = 0;\n    let currentSpan = null;\n    let prevCharWasSpaceCharacter = null;\n    let prevCharTop = 0;\n    let prevCharLeftForRTLTest = 0;\n    let didTruncate = false;\n    for (const childNode of element.childNodes) {\n      if (childNode.nodeType !== Node.TEXT_NODE)\n        continue;\n      for (const char of childNode.textContent ?? \"\") {\n        range.setStart(textNode, idx);\n        range.setEnd(textNode, idx + char.length);\n        const rects = range.getClientRects();\n        const rect = rects[rects.length - 1];\n        const top = rect.top + offsetY;\n        const left = rect.left + offsetX;\n        const right = rect.right + offsetX;\n        const isRTL = left < prevCharLeftForRTLTest;\n        const isSpaceCharacter = spaceCharacterRegex.test(char);\n        if (\n          // If we're at a word boundary...\n          isSpaceCharacter !== prevCharWasSpaceCharacter || // ...or we're on a different line...\n          top !== prevCharTop || // ...or we're at the start of the text and haven't created a span yet...\n          !currentSpan\n        ) {\n          if (currentSpan) {\n            if (shouldTruncateToFirstLine && top !== prevCharTop) {\n              didTruncate = true;\n              break;\n            }\n            spans.push(currentSpan);\n          }\n          currentSpan = {\n            box: { x: left, y: top, w: rect.width, h: rect.height },\n            text: char\n          };\n          prevCharLeftForRTLTest = left;\n        } else {\n          if (isRTL) {\n            currentSpan.box.x = left;\n          }\n          currentSpan.box.w = isRTL ? currentSpan.box.w + rect.width : right - currentSpan.box.x;\n          currentSpan.text += char;\n        }\n        if (char === \"\\n\") {\n          prevCharLeftForRTLTest = 0;\n        }\n        prevCharWasSpaceCharacter = isSpaceCharacter;\n        prevCharTop = top;\n        idx += char.length;\n      }\n    }\n    if (currentSpan) {\n      spans.push(currentSpan);\n    }\n    return { spans, didTruncate };\n  }\n  /**\n   * Measure text into individual spans. Spans are created by rendering the\n   * text, then dividing it up according to line breaks and word boundaries.\n   *\n   * It works by having the browser render the text, then measuring the\n   * position of each character. You can use this to replicate the text-layout\n   * algorithm of the current browser in e.g. an SVG export.\n   */\n  measureTextSpans(textToMeasure, opts) {\n    if (textToMeasure === \"\")\n      return [];\n    const elm = this.baseElm?.cloneNode();\n    this.baseElm.insertAdjacentElement(\"afterend\", elm);\n    const elementWidth = Math.ceil(opts.width - opts.padding * 2);\n    elm.setAttribute(\"dir\", \"auto\");\n    elm.style.setProperty(\"unicode-bidi\", \"plaintext\");\n    elm.style.setProperty(\"width\", `${elementWidth}px`);\n    elm.style.setProperty(\"height\", \"min-content\");\n    elm.style.setProperty(\"font-size\", `${opts.fontSize}px`);\n    elm.style.setProperty(\"font-family\", opts.fontFamily);\n    elm.style.setProperty(\"font-weight\", opts.fontWeight);\n    elm.style.setProperty(\"line-height\", `${opts.lineHeight * opts.fontSize}px`);\n    elm.style.setProperty(\"text-align\", textAlignmentsForLtr[opts.textAlign]);\n    const shouldTruncateToFirstLine = opts.overflow === \"truncate-ellipsis\" || opts.overflow === \"truncate-clip\";\n    if (shouldTruncateToFirstLine) {\n      elm.style.setProperty(\"overflow-wrap\", \"anywhere\");\n      elm.style.setProperty(\"word-break\", \"break-all\");\n    }\n    const normalizedText = normalizeTextForDom(textToMeasure);\n    elm.textContent = normalizedText;\n    const { spans, didTruncate } = this.measureElementTextNodeSpans(elm, {\n      shouldTruncateToFirstLine\n    });\n    if (opts.overflow === \"truncate-ellipsis\" && didTruncate) {\n      elm.textContent = \"\\u2026\";\n      const ellipsisWidth = Math.ceil(this.measureElementTextNodeSpans(elm).spans[0].box.w);\n      elm.style.setProperty(\"width\", `${elementWidth - ellipsisWidth}px`);\n      elm.textContent = normalizedText;\n      const truncatedSpans = this.measureElementTextNodeSpans(elm, {\n        shouldTruncateToFirstLine: true\n      }).spans;\n      const lastSpan = truncatedSpans[truncatedSpans.length - 1];\n      truncatedSpans.push({\n        text: \"\\u2026\",\n        box: {\n          x: Math.min(lastSpan.box.x + lastSpan.box.w, opts.width - opts.padding - ellipsisWidth),\n          y: lastSpan.box.y,\n          w: ellipsisWidth,\n          h: lastSpan.box.h\n        }\n      });\n      return truncatedSpans;\n    }\n    elm.remove();\n    return spans;\n  }\n}\n\n//# sourceMappingURL=TextManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9UZXh0TWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsb0NBQW9DLElBQUk7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGdEQUFnRDtBQUNuRTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGFBQWE7QUFDbkQ7QUFDQSwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBO0FBQ0EsNENBQTRDLGdDQUFnQztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxQkFBcUI7QUFDakM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDZCQUE2QjtBQUNyRTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9UZXh0TWFuYWdlci5tanM/ZTBiNiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBmaXhOZXdMaW5lcyA9IC9cXHI/XFxufFxcci9nO1xuZnVuY3Rpb24gbm9ybWFsaXplVGV4dEZvckRvbSh0ZXh0KSB7XG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoZml4TmV3TGluZXMsIFwiXFxuXCIpLnNwbGl0KFwiXFxuXCIpLm1hcCgoeCkgPT4geCB8fCBcIiBcIikuam9pbihcIlxcblwiKTtcbn1cbmNvbnN0IHRleHRBbGlnbm1lbnRzRm9yTHRyID0ge1xuICBzdGFydDogXCJsZWZ0XCIsXG4gIFwic3RhcnQtbGVnYWN5XCI6IFwibGVmdFwiLFxuICBtaWRkbGU6IFwiY2VudGVyXCIsXG4gIFwibWlkZGxlLWxlZ2FjeVwiOiBcImNlbnRlclwiLFxuICBlbmQ6IFwicmlnaHRcIixcbiAgXCJlbmQtbGVnYWN5XCI6IFwicmlnaHRcIlxufTtcbmNvbnN0IHNwYWNlQ2hhcmFjdGVyUmVnZXggPSAvXFxzLztcbmNsYXNzIFRleHRNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoZWRpdG9yKSB7XG4gICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5lZGl0b3IuZ2V0Q29udGFpbmVyKCk7XG4gICAgY29uc3QgZWxtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBlbG0uY2xhc3NMaXN0LmFkZChcInRsLXRleHRcIik7XG4gICAgZWxtLmNsYXNzTGlzdC5hZGQoXCJ0bC10ZXh0LW1lYXN1cmVcIik7XG4gICAgZWxtLnRhYkluZGV4ID0gLTE7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsbSk7XG4gICAgdGhpcy5iYXNlRWxtID0gZWxtO1xuICAgIGVkaXRvci5kaXNwb3NhYmxlcy5hZGQoKCkgPT4ge1xuICAgICAgZWxtLnJlbW92ZSgpO1xuICAgIH0pO1xuICB9XG4gIGJhc2VFbG07XG4gIG1lYXN1cmVUZXh0ID0gKHRleHRUb01lYXN1cmUsIG9wdHMpID0+IHtcbiAgICBjb25zdCBlbG0gPSB0aGlzLmJhc2VFbG0/LmNsb25lTm9kZSgpO1xuICAgIHRoaXMuYmFzZUVsbS5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCBlbG0pO1xuICAgIGVsbS5zZXRBdHRyaWJ1dGUoXCJkaXJcIiwgXCJhdXRvXCIpO1xuICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcInVuaWNvZGUtYmlkaVwiLCBcInBsYWludGV4dFwiKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJmb250LWZhbWlseVwiLCBvcHRzLmZvbnRGYW1pbHkpO1xuICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcImZvbnQtc3R5bGVcIiwgb3B0cy5mb250U3R5bGUpO1xuICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcImZvbnQtd2VpZ2h0XCIsIG9wdHMuZm9udFdlaWdodCk7XG4gICAgZWxtLnN0eWxlLnNldFByb3BlcnR5KFwiZm9udC1zaXplXCIsIG9wdHMuZm9udFNpemUgKyBcInB4XCIpO1xuICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcImxpbmUtaGVpZ2h0XCIsIG9wdHMubGluZUhlaWdodCAqIG9wdHMuZm9udFNpemUgKyBcInB4XCIpO1xuICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcIm1heC13aWR0aFwiLCBvcHRzLm1heFdpZHRoID09PSBudWxsID8gbnVsbCA6IG9wdHMubWF4V2lkdGggKyBcInB4XCIpO1xuICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcIm1pbi13aWR0aFwiLCBvcHRzLm1pbldpZHRoID09PSBudWxsID8gbnVsbCA6IG9wdHMubWluV2lkdGggKyBcInB4XCIpO1xuICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcInBhZGRpbmdcIiwgb3B0cy5wYWRkaW5nKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICBcIm92ZXJmbG93LXdyYXBcIixcbiAgICAgIG9wdHMuZGlzYWJsZU92ZXJmbG93V3JhcEJyZWFraW5nID8gXCJub3JtYWxcIiA6IFwiYnJlYWstd29yZFwiXG4gICAgKTtcbiAgICBlbG0udGV4dENvbnRlbnQgPSBub3JtYWxpemVUZXh0Rm9yRG9tKHRleHRUb01lYXN1cmUpO1xuICAgIGNvbnN0IHNjcm9sbFdpZHRoID0gZWxtLnNjcm9sbFdpZHRoO1xuICAgIGNvbnN0IHJlY3QgPSBlbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgZWxtLnJlbW92ZSgpO1xuICAgIHJldHVybiB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIHc6IHJlY3Qud2lkdGgsXG4gICAgICBoOiByZWN0LmhlaWdodCxcbiAgICAgIHNjcm9sbFdpZHRoXG4gICAgfTtcbiAgfTtcbiAgLyoqXG4gICAqIEdpdmVuIGFuIGh0bWwgZWxlbWVudCwgbWVhc3VyZSB0aGUgcG9zaXRpb24gb2YgZWFjaCBzcGFuIG9mIHVuYnJva2VuXG4gICAqIHdvcmQvd2hpdGUtc3BhY2UgY2hhcmFjdGVycyB3aXRoaW4gYW55IHRleHQgbm9kZXMgaXQgY29udGFpbnMuXG4gICAqL1xuICBtZWFzdXJlRWxlbWVudFRleHROb2RlU3BhbnMoZWxlbWVudCwgeyBzaG91bGRUcnVuY2F0ZVRvRmlyc3RMaW5lID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgY29uc3Qgc3BhbnMgPSBbXTtcbiAgICBjb25zdCBlbG1Cb3VuZHMgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IG9mZnNldFggPSAtZWxtQm91bmRzLmxlZnQ7XG4gICAgY29uc3Qgb2Zmc2V0WSA9IC1lbG1Cb3VuZHMudG9wO1xuICAgIGNvbnN0IHJhbmdlID0gbmV3IFJhbmdlKCk7XG4gICAgY29uc3QgdGV4dE5vZGUgPSBlbGVtZW50LmNoaWxkTm9kZXNbMF07XG4gICAgbGV0IGlkeCA9IDA7XG4gICAgbGV0IGN1cnJlbnRTcGFuID0gbnVsbDtcbiAgICBsZXQgcHJldkNoYXJXYXNTcGFjZUNoYXJhY3RlciA9IG51bGw7XG4gICAgbGV0IHByZXZDaGFyVG9wID0gMDtcbiAgICBsZXQgcHJldkNoYXJMZWZ0Rm9yUlRMVGVzdCA9IDA7XG4gICAgbGV0IGRpZFRydW5jYXRlID0gZmFsc2U7XG4gICAgZm9yIChjb25zdCBjaGlsZE5vZGUgb2YgZWxlbWVudC5jaGlsZE5vZGVzKSB7XG4gICAgICBpZiAoY2hpbGROb2RlLm5vZGVUeXBlICE9PSBOb2RlLlRFWFRfTk9ERSlcbiAgICAgICAgY29udGludWU7XG4gICAgICBmb3IgKGNvbnN0IGNoYXIgb2YgY2hpbGROb2RlLnRleHRDb250ZW50ID8/IFwiXCIpIHtcbiAgICAgICAgcmFuZ2Uuc2V0U3RhcnQodGV4dE5vZGUsIGlkeCk7XG4gICAgICAgIHJhbmdlLnNldEVuZCh0ZXh0Tm9kZSwgaWR4ICsgY2hhci5sZW5ndGgpO1xuICAgICAgICBjb25zdCByZWN0cyA9IHJhbmdlLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgIGNvbnN0IHJlY3QgPSByZWN0c1tyZWN0cy5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgdG9wID0gcmVjdC50b3AgKyBvZmZzZXRZO1xuICAgICAgICBjb25zdCBsZWZ0ID0gcmVjdC5sZWZ0ICsgb2Zmc2V0WDtcbiAgICAgICAgY29uc3QgcmlnaHQgPSByZWN0LnJpZ2h0ICsgb2Zmc2V0WDtcbiAgICAgICAgY29uc3QgaXNSVEwgPSBsZWZ0IDwgcHJldkNoYXJMZWZ0Rm9yUlRMVGVzdDtcbiAgICAgICAgY29uc3QgaXNTcGFjZUNoYXJhY3RlciA9IHNwYWNlQ2hhcmFjdGVyUmVnZXgudGVzdChjaGFyKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIC8vIElmIHdlJ3JlIGF0IGEgd29yZCBib3VuZGFyeS4uLlxuICAgICAgICAgIGlzU3BhY2VDaGFyYWN0ZXIgIT09IHByZXZDaGFyV2FzU3BhY2VDaGFyYWN0ZXIgfHwgLy8gLi4ub3Igd2UncmUgb24gYSBkaWZmZXJlbnQgbGluZS4uLlxuICAgICAgICAgIHRvcCAhPT0gcHJldkNoYXJUb3AgfHwgLy8gLi4ub3Igd2UncmUgYXQgdGhlIHN0YXJ0IG9mIHRoZSB0ZXh0IGFuZCBoYXZlbid0IGNyZWF0ZWQgYSBzcGFuIHlldC4uLlxuICAgICAgICAgICFjdXJyZW50U3BhblxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgICAgIGlmIChzaG91bGRUcnVuY2F0ZVRvRmlyc3RMaW5lICYmIHRvcCAhPT0gcHJldkNoYXJUb3ApIHtcbiAgICAgICAgICAgICAgZGlkVHJ1bmNhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNwYW5zLnB1c2goY3VycmVudFNwYW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50U3BhbiA9IHtcbiAgICAgICAgICAgIGJveDogeyB4OiBsZWZ0LCB5OiB0b3AsIHc6IHJlY3Qud2lkdGgsIGg6IHJlY3QuaGVpZ2h0IH0sXG4gICAgICAgICAgICB0ZXh0OiBjaGFyXG4gICAgICAgICAgfTtcbiAgICAgICAgICBwcmV2Q2hhckxlZnRGb3JSVExUZXN0ID0gbGVmdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoaXNSVEwpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTcGFuLmJveC54ID0gbGVmdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudFNwYW4uYm94LncgPSBpc1JUTCA/IGN1cnJlbnRTcGFuLmJveC53ICsgcmVjdC53aWR0aCA6IHJpZ2h0IC0gY3VycmVudFNwYW4uYm94Lng7XG4gICAgICAgICAgY3VycmVudFNwYW4udGV4dCArPSBjaGFyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFyID09PSBcIlxcblwiKSB7XG4gICAgICAgICAgcHJldkNoYXJMZWZ0Rm9yUlRMVGVzdCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcHJldkNoYXJXYXNTcGFjZUNoYXJhY3RlciA9IGlzU3BhY2VDaGFyYWN0ZXI7XG4gICAgICAgIHByZXZDaGFyVG9wID0gdG9wO1xuICAgICAgICBpZHggKz0gY2hhci5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgc3BhbnMucHVzaChjdXJyZW50U3Bhbik7XG4gICAgfVxuICAgIHJldHVybiB7IHNwYW5zLCBkaWRUcnVuY2F0ZSB9O1xuICB9XG4gIC8qKlxuICAgKiBNZWFzdXJlIHRleHQgaW50byBpbmRpdmlkdWFsIHNwYW5zLiBTcGFucyBhcmUgY3JlYXRlZCBieSByZW5kZXJpbmcgdGhlXG4gICAqIHRleHQsIHRoZW4gZGl2aWRpbmcgaXQgdXAgYWNjb3JkaW5nIHRvIGxpbmUgYnJlYWtzIGFuZCB3b3JkIGJvdW5kYXJpZXMuXG4gICAqXG4gICAqIEl0IHdvcmtzIGJ5IGhhdmluZyB0aGUgYnJvd3NlciByZW5kZXIgdGhlIHRleHQsIHRoZW4gbWVhc3VyaW5nIHRoZVxuICAgKiBwb3NpdGlvbiBvZiBlYWNoIGNoYXJhY3Rlci4gWW91IGNhbiB1c2UgdGhpcyB0byByZXBsaWNhdGUgdGhlIHRleHQtbGF5b3V0XG4gICAqIGFsZ29yaXRobSBvZiB0aGUgY3VycmVudCBicm93c2VyIGluIGUuZy4gYW4gU1ZHIGV4cG9ydC5cbiAgICovXG4gIG1lYXN1cmVUZXh0U3BhbnModGV4dFRvTWVhc3VyZSwgb3B0cykge1xuICAgIGlmICh0ZXh0VG9NZWFzdXJlID09PSBcIlwiKVxuICAgICAgcmV0dXJuIFtdO1xuICAgIGNvbnN0IGVsbSA9IHRoaXMuYmFzZUVsbT8uY2xvbmVOb2RlKCk7XG4gICAgdGhpcy5iYXNlRWxtLmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyZW5kXCIsIGVsbSk7XG4gICAgY29uc3QgZWxlbWVudFdpZHRoID0gTWF0aC5jZWlsKG9wdHMud2lkdGggLSBvcHRzLnBhZGRpbmcgKiAyKTtcbiAgICBlbG0uc2V0QXR0cmlidXRlKFwiZGlyXCIsIFwiYXV0b1wiKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJ1bmljb2RlLWJpZGlcIiwgXCJwbGFpbnRleHRcIik7XG4gICAgZWxtLnN0eWxlLnNldFByb3BlcnR5KFwid2lkdGhcIiwgYCR7ZWxlbWVudFdpZHRofXB4YCk7XG4gICAgZWxtLnN0eWxlLnNldFByb3BlcnR5KFwiaGVpZ2h0XCIsIFwibWluLWNvbnRlbnRcIik7XG4gICAgZWxtLnN0eWxlLnNldFByb3BlcnR5KFwiZm9udC1zaXplXCIsIGAke29wdHMuZm9udFNpemV9cHhgKTtcbiAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJmb250LWZhbWlseVwiLCBvcHRzLmZvbnRGYW1pbHkpO1xuICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcImZvbnQtd2VpZ2h0XCIsIG9wdHMuZm9udFdlaWdodCk7XG4gICAgZWxtLnN0eWxlLnNldFByb3BlcnR5KFwibGluZS1oZWlnaHRcIiwgYCR7b3B0cy5saW5lSGVpZ2h0ICogb3B0cy5mb250U2l6ZX1weGApO1xuICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcInRleHQtYWxpZ25cIiwgdGV4dEFsaWdubWVudHNGb3JMdHJbb3B0cy50ZXh0QWxpZ25dKTtcbiAgICBjb25zdCBzaG91bGRUcnVuY2F0ZVRvRmlyc3RMaW5lID0gb3B0cy5vdmVyZmxvdyA9PT0gXCJ0cnVuY2F0ZS1lbGxpcHNpc1wiIHx8IG9wdHMub3ZlcmZsb3cgPT09IFwidHJ1bmNhdGUtY2xpcFwiO1xuICAgIGlmIChzaG91bGRUcnVuY2F0ZVRvRmlyc3RMaW5lKSB7XG4gICAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJvdmVyZmxvdy13cmFwXCIsIFwiYW55d2hlcmVcIik7XG4gICAgICBlbG0uc3R5bGUuc2V0UHJvcGVydHkoXCJ3b3JkLWJyZWFrXCIsIFwiYnJlYWstYWxsXCIpO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkVGV4dCA9IG5vcm1hbGl6ZVRleHRGb3JEb20odGV4dFRvTWVhc3VyZSk7XG4gICAgZWxtLnRleHRDb250ZW50ID0gbm9ybWFsaXplZFRleHQ7XG4gICAgY29uc3QgeyBzcGFucywgZGlkVHJ1bmNhdGUgfSA9IHRoaXMubWVhc3VyZUVsZW1lbnRUZXh0Tm9kZVNwYW5zKGVsbSwge1xuICAgICAgc2hvdWxkVHJ1bmNhdGVUb0ZpcnN0TGluZVxuICAgIH0pO1xuICAgIGlmIChvcHRzLm92ZXJmbG93ID09PSBcInRydW5jYXRlLWVsbGlwc2lzXCIgJiYgZGlkVHJ1bmNhdGUpIHtcbiAgICAgIGVsbS50ZXh0Q29udGVudCA9IFwiXFx1MjAyNlwiO1xuICAgICAgY29uc3QgZWxsaXBzaXNXaWR0aCA9IE1hdGguY2VpbCh0aGlzLm1lYXN1cmVFbGVtZW50VGV4dE5vZGVTcGFucyhlbG0pLnNwYW5zWzBdLmJveC53KTtcbiAgICAgIGVsbS5zdHlsZS5zZXRQcm9wZXJ0eShcIndpZHRoXCIsIGAke2VsZW1lbnRXaWR0aCAtIGVsbGlwc2lzV2lkdGh9cHhgKTtcbiAgICAgIGVsbS50ZXh0Q29udGVudCA9IG5vcm1hbGl6ZWRUZXh0O1xuICAgICAgY29uc3QgdHJ1bmNhdGVkU3BhbnMgPSB0aGlzLm1lYXN1cmVFbGVtZW50VGV4dE5vZGVTcGFucyhlbG0sIHtcbiAgICAgICAgc2hvdWxkVHJ1bmNhdGVUb0ZpcnN0TGluZTogdHJ1ZVxuICAgICAgfSkuc3BhbnM7XG4gICAgICBjb25zdCBsYXN0U3BhbiA9IHRydW5jYXRlZFNwYW5zW3RydW5jYXRlZFNwYW5zLmxlbmd0aCAtIDFdO1xuICAgICAgdHJ1bmNhdGVkU3BhbnMucHVzaCh7XG4gICAgICAgIHRleHQ6IFwiXFx1MjAyNlwiLFxuICAgICAgICBib3g6IHtcbiAgICAgICAgICB4OiBNYXRoLm1pbihsYXN0U3Bhbi5ib3gueCArIGxhc3RTcGFuLmJveC53LCBvcHRzLndpZHRoIC0gb3B0cy5wYWRkaW5nIC0gZWxsaXBzaXNXaWR0aCksXG4gICAgICAgICAgeTogbGFzdFNwYW4uYm94LnksXG4gICAgICAgICAgdzogZWxsaXBzaXNXaWR0aCxcbiAgICAgICAgICBoOiBsYXN0U3Bhbi5ib3guaFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVuY2F0ZWRTcGFucztcbiAgICB9XG4gICAgZWxtLnJlbW92ZSgpO1xuICAgIHJldHVybiBzcGFucztcbiAgfVxufVxuZXhwb3J0IHtcbiAgVGV4dE1hbmFnZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UZXh0TWFuYWdlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TextManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TickManager.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TickManager.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TickManager: () => (/* binding */ TickManager)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\n\nconst throttleToNextFrame = typeof process !== \"undefined\" && \"development\" === \"test\" ? (\n  // At test time we should use actual raf and not throttle, because throttle was set up to evaluate immediately during tests, which causes stack overflow\n  // for the tick manager since it sets up a raf loop.\n  (0)\n) : _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.throttleToNextFrame;\nclass TickManager {\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.disposables.add(this.dispose);\n    this.start();\n  }\n  cancelRaf;\n  isPaused = true;\n  now = 0;\n  start = () => {\n    this.isPaused = false;\n    this.cancelRaf?.();\n    this.cancelRaf = throttleToNextFrame(this.tick);\n    this.now = Date.now();\n  };\n  tick = () => {\n    if (this.isPaused) {\n      return;\n    }\n    const now = Date.now();\n    const elapsed = now - this.now;\n    this.now = now;\n    this.updatePointerVelocity(elapsed);\n    this.editor.emit(\"frame\", elapsed);\n    this.editor.emit(\"tick\", elapsed);\n    this.cancelRaf = throttleToNextFrame(this.tick);\n  };\n  // Clear the listener\n  dispose = () => {\n    this.isPaused = true;\n    this.cancelRaf?.();\n  };\n  prevPoint = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec();\n  updatePointerVelocity = (elapsed) => {\n    const {\n      prevPoint,\n      editor: {\n        inputs: { currentScreenPoint, pointerVelocity }\n      }\n    } = this;\n    if (elapsed === 0)\n      return;\n    const delta = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Sub(currentScreenPoint, prevPoint);\n    this.prevPoint = currentScreenPoint.clone();\n    const length = delta.len();\n    const direction = length ? delta.div(length) : new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(0, 0);\n    const next = pointerVelocity.clone().lrp(direction.mul(length / elapsed), 0.5);\n    if (Math.abs(next.x) < 0.01)\n      next.x = 0;\n    if (Math.abs(next.y) < 0.01)\n      next.y = 0;\n    if (!pointerVelocity.equals(next)) {\n      this.editor.inputs.pointerVelocity = next;\n    }\n  };\n}\n\n//# sourceMappingURL=TickManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9UaWNrTWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRFO0FBQzdCO0FBQy9DLDhEQUE4RCxhQUFvQjtBQUNsRjtBQUNBO0FBQ0EsR0FBRyxDQUdBO0FBQ0gsSUFBSSw4REFBb0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvREFBRztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0Esa0JBQWtCLG9EQUFHO0FBQ3JCO0FBQ0E7QUFDQSx1REFBdUQsb0RBQUc7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvbWFuYWdlcnMvVGlja01hbmFnZXIubWpzP2EyYjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdGhyb3R0bGVUb05leHRGcmFtZSBhcyBfdGhyb3R0bGVUb05leHRGcmFtZSB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vLi4vcHJpbWl0aXZlcy9WZWMubWpzXCI7XG5jb25zdCB0aHJvdHRsZVRvTmV4dEZyYW1lID0gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwidGVzdFwiID8gKFxuICAvLyBBdCB0ZXN0IHRpbWUgd2Ugc2hvdWxkIHVzZSBhY3R1YWwgcmFmIGFuZCBub3QgdGhyb3R0bGUsIGJlY2F1c2UgdGhyb3R0bGUgd2FzIHNldCB1cCB0byBldmFsdWF0ZSBpbW1lZGlhdGVseSBkdXJpbmcgdGVzdHMsIHdoaWNoIGNhdXNlcyBzdGFjayBvdmVyZmxvd1xuICAvLyBmb3IgdGhlIHRpY2sgbWFuYWdlciBzaW5jZSBpdCBzZXRzIHVwIGEgcmFmIGxvb3AuXG4gIChmdW5jdGlvbiBtb2NrVGhyb3R0bGUoY2IpIHtcbiAgICBjb25zdCBmcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShjYik7XG4gICAgcmV0dXJuICgpID0+IGNhbmNlbEFuaW1hdGlvbkZyYW1lKGZyYW1lKTtcbiAgfSlcbikgOiBfdGhyb3R0bGVUb05leHRGcmFtZTtcbmNsYXNzIFRpY2tNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoZWRpdG9yKSB7XG4gICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gICAgdGhpcy5lZGl0b3IuZGlzcG9zYWJsZXMuYWRkKHRoaXMuZGlzcG9zZSk7XG4gICAgdGhpcy5zdGFydCgpO1xuICB9XG4gIGNhbmNlbFJhZjtcbiAgaXNQYXVzZWQgPSB0cnVlO1xuICBub3cgPSAwO1xuICBzdGFydCA9ICgpID0+IHtcbiAgICB0aGlzLmlzUGF1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5jYW5jZWxSYWY/LigpO1xuICAgIHRoaXMuY2FuY2VsUmFmID0gdGhyb3R0bGVUb05leHRGcmFtZSh0aGlzLnRpY2spO1xuICAgIHRoaXMubm93ID0gRGF0ZS5ub3coKTtcbiAgfTtcbiAgdGljayA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5pc1BhdXNlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGVsYXBzZWQgPSBub3cgLSB0aGlzLm5vdztcbiAgICB0aGlzLm5vdyA9IG5vdztcbiAgICB0aGlzLnVwZGF0ZVBvaW50ZXJWZWxvY2l0eShlbGFwc2VkKTtcbiAgICB0aGlzLmVkaXRvci5lbWl0KFwiZnJhbWVcIiwgZWxhcHNlZCk7XG4gICAgdGhpcy5lZGl0b3IuZW1pdChcInRpY2tcIiwgZWxhcHNlZCk7XG4gICAgdGhpcy5jYW5jZWxSYWYgPSB0aHJvdHRsZVRvTmV4dEZyYW1lKHRoaXMudGljayk7XG4gIH07XG4gIC8vIENsZWFyIHRoZSBsaXN0ZW5lclxuICBkaXNwb3NlID0gKCkgPT4ge1xuICAgIHRoaXMuaXNQYXVzZWQgPSB0cnVlO1xuICAgIHRoaXMuY2FuY2VsUmFmPy4oKTtcbiAgfTtcbiAgcHJldlBvaW50ID0gbmV3IFZlYygpO1xuICB1cGRhdGVQb2ludGVyVmVsb2NpdHkgPSAoZWxhcHNlZCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHByZXZQb2ludCxcbiAgICAgIGVkaXRvcjoge1xuICAgICAgICBpbnB1dHM6IHsgY3VycmVudFNjcmVlblBvaW50LCBwb2ludGVyVmVsb2NpdHkgfVxuICAgICAgfVxuICAgIH0gPSB0aGlzO1xuICAgIGlmIChlbGFwc2VkID09PSAwKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGRlbHRhID0gVmVjLlN1YihjdXJyZW50U2NyZWVuUG9pbnQsIHByZXZQb2ludCk7XG4gICAgdGhpcy5wcmV2UG9pbnQgPSBjdXJyZW50U2NyZWVuUG9pbnQuY2xvbmUoKTtcbiAgICBjb25zdCBsZW5ndGggPSBkZWx0YS5sZW4oKTtcbiAgICBjb25zdCBkaXJlY3Rpb24gPSBsZW5ndGggPyBkZWx0YS5kaXYobGVuZ3RoKSA6IG5ldyBWZWMoMCwgMCk7XG4gICAgY29uc3QgbmV4dCA9IHBvaW50ZXJWZWxvY2l0eS5jbG9uZSgpLmxycChkaXJlY3Rpb24ubXVsKGxlbmd0aCAvIGVsYXBzZWQpLCAwLjUpO1xuICAgIGlmIChNYXRoLmFicyhuZXh0LngpIDwgMC4wMSlcbiAgICAgIG5leHQueCA9IDA7XG4gICAgaWYgKE1hdGguYWJzKG5leHQueSkgPCAwLjAxKVxuICAgICAgbmV4dC55ID0gMDtcbiAgICBpZiAoIXBvaW50ZXJWZWxvY2l0eS5lcXVhbHMobmV4dCkpIHtcbiAgICAgIHRoaXMuZWRpdG9yLmlucHV0cy5wb2ludGVyVmVsb2NpdHkgPSBuZXh0O1xuICAgIH1cbiAgfTtcbn1cbmV4cG9ydCB7XG4gIFRpY2tNYW5hZ2VyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlja01hbmFnZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/TickManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/UserPreferencesManager.mjs":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/UserPreferencesManager.mjs ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserPreferencesManager: () => (/* binding */ UserPreferencesManager)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/TLUserPreferences.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLUserPreferences.mjs\");\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\n\nclass UserPreferencesManager {\n  constructor(user, inferDarkMode) {\n    this.user = user;\n    this.inferDarkMode = inferDarkMode;\n  }\n  updateUserPreferences = (userPreferences) => {\n    this.user.setUserPreferences({\n      ...this.user.userPreferences.get(),\n      ...userPreferences\n    });\n  };\n  getUserPreferences() {\n    return {\n      id: this.getId(),\n      name: this.getName(),\n      locale: this.getLocale(),\n      color: this.getColor(),\n      animationSpeed: this.getAnimationSpeed(),\n      isSnapMode: this.getIsSnapMode(),\n      isDarkMode: this.getIsDarkMode(),\n      isWrapMode: this.getIsWrapMode()\n    };\n  }\n  getIsDarkMode() {\n    return this.user.userPreferences.get().isDarkMode ?? (this.inferDarkMode ? (0,_config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.userPrefersDarkUI)() : false);\n  }\n  getEdgeScrollSpeed() {\n    return this.user.userPreferences.get().edgeScrollSpeed ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.edgeScrollSpeed;\n  }\n  getAnimationSpeed() {\n    return this.user.userPreferences.get().animationSpeed ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.animationSpeed;\n  }\n  getId() {\n    return this.user.userPreferences.get().id;\n  }\n  getName() {\n    return this.user.userPreferences.get().name ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.name;\n  }\n  getLocale() {\n    return this.user.userPreferences.get().locale ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.locale;\n  }\n  getColor() {\n    return this.user.userPreferences.get().color ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.color;\n  }\n  getIsSnapMode() {\n    return this.user.userPreferences.get().isSnapMode ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.isSnapMode;\n  }\n  getIsWrapMode() {\n    return this.user.userPreferences.get().isWrapMode ?? _config_TLUserPreferences_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultUserPreferences.isWrapMode;\n  }\n}\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], UserPreferencesManager.prototype, \"getUserPreferences\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], UserPreferencesManager.prototype, \"getIsDarkMode\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], UserPreferencesManager.prototype, \"getEdgeScrollSpeed\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], UserPreferencesManager.prototype, \"getAnimationSpeed\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], UserPreferencesManager.prototype, \"getId\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], UserPreferencesManager.prototype, \"getName\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], UserPreferencesManager.prototype, \"getLocale\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], UserPreferencesManager.prototype, \"getColor\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], UserPreferencesManager.prototype, \"getIsSnapMode\", 1);\n__decorateClass([\n  _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed\n], UserPreferencesManager.prototype, \"getIsWrapMode\", 1);\n\n//# sourceMappingURL=UserPreferencesManager.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9tYW5hZ2Vycy9Vc2VyUHJlZmVyZW5jZXNNYW5hZ2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxRQUFRO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN5QztBQUlHO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLGdGQUFpQjtBQUNoRztBQUNBO0FBQ0EsOERBQThELGlGQUFzQjtBQUNwRjtBQUNBO0FBQ0EsNkRBQTZELGlGQUFzQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGlGQUFzQjtBQUN6RTtBQUNBO0FBQ0EscURBQXFELGlGQUFzQjtBQUMzRTtBQUNBO0FBQ0Esb0RBQW9ELGlGQUFzQjtBQUMxRTtBQUNBO0FBQ0EseURBQXlELGlGQUFzQjtBQUMvRTtBQUNBO0FBQ0EseURBQXlELGlGQUFzQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFDQTtBQUNBLEVBQUUsbURBQVE7QUFDVjtBQUNBO0FBQ0EsRUFBRSxtREFBUTtBQUNWO0FBQ0E7QUFDQSxFQUFFLG1EQUFRO0FBQ1Y7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvbWFuYWdlcnMvVXNlclByZWZlcmVuY2VzTWFuYWdlci5tanM/NzY4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZGVjb3JhdGVDbGFzcyA9IChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwga2luZCkgPT4ge1xuICB2YXIgcmVzdWx0ID0ga2luZCA+IDEgPyB2b2lkIDAgOiBraW5kID8gX19nZXRPd25Qcm9wRGVzYyh0YXJnZXQsIGtleSkgOiB0YXJnZXQ7XG4gIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDEsIGRlY29yYXRvcjsgaSA+PSAwOyBpLS0pXG4gICAgaWYgKGRlY29yYXRvciA9IGRlY29yYXRvcnNbaV0pXG4gICAgICByZXN1bHQgPSAoa2luZCA/IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcmVzdWx0KSA6IGRlY29yYXRvcihyZXN1bHQpKSB8fCByZXN1bHQ7XG4gIGlmIChraW5kICYmIHJlc3VsdClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBrZXksIHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHtcbiAgZGVmYXVsdFVzZXJQcmVmZXJlbmNlcyxcbiAgdXNlclByZWZlcnNEYXJrVUlcbn0gZnJvbSBcIi4uLy4uL2NvbmZpZy9UTFVzZXJQcmVmZXJlbmNlcy5tanNcIjtcbmNsYXNzIFVzZXJQcmVmZXJlbmNlc01hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcih1c2VyLCBpbmZlckRhcmtNb2RlKSB7XG4gICAgdGhpcy51c2VyID0gdXNlcjtcbiAgICB0aGlzLmluZmVyRGFya01vZGUgPSBpbmZlckRhcmtNb2RlO1xuICB9XG4gIHVwZGF0ZVVzZXJQcmVmZXJlbmNlcyA9ICh1c2VyUHJlZmVyZW5jZXMpID0+IHtcbiAgICB0aGlzLnVzZXIuc2V0VXNlclByZWZlcmVuY2VzKHtcbiAgICAgIC4uLnRoaXMudXNlci51c2VyUHJlZmVyZW5jZXMuZ2V0KCksXG4gICAgICAuLi51c2VyUHJlZmVyZW5jZXNcbiAgICB9KTtcbiAgfTtcbiAgZ2V0VXNlclByZWZlcmVuY2VzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5nZXRJZCgpLFxuICAgICAgbmFtZTogdGhpcy5nZXROYW1lKCksXG4gICAgICBsb2NhbGU6IHRoaXMuZ2V0TG9jYWxlKCksXG4gICAgICBjb2xvcjogdGhpcy5nZXRDb2xvcigpLFxuICAgICAgYW5pbWF0aW9uU3BlZWQ6IHRoaXMuZ2V0QW5pbWF0aW9uU3BlZWQoKSxcbiAgICAgIGlzU25hcE1vZGU6IHRoaXMuZ2V0SXNTbmFwTW9kZSgpLFxuICAgICAgaXNEYXJrTW9kZTogdGhpcy5nZXRJc0RhcmtNb2RlKCksXG4gICAgICBpc1dyYXBNb2RlOiB0aGlzLmdldElzV3JhcE1vZGUoKVxuICAgIH07XG4gIH1cbiAgZ2V0SXNEYXJrTW9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VyLnVzZXJQcmVmZXJlbmNlcy5nZXQoKS5pc0RhcmtNb2RlID8/ICh0aGlzLmluZmVyRGFya01vZGUgPyB1c2VyUHJlZmVyc0RhcmtVSSgpIDogZmFsc2UpO1xuICB9XG4gIGdldEVkZ2VTY3JvbGxTcGVlZCgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VyLnVzZXJQcmVmZXJlbmNlcy5nZXQoKS5lZGdlU2Nyb2xsU3BlZWQgPz8gZGVmYXVsdFVzZXJQcmVmZXJlbmNlcy5lZGdlU2Nyb2xsU3BlZWQ7XG4gIH1cbiAgZ2V0QW5pbWF0aW9uU3BlZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlci51c2VyUHJlZmVyZW5jZXMuZ2V0KCkuYW5pbWF0aW9uU3BlZWQgPz8gZGVmYXVsdFVzZXJQcmVmZXJlbmNlcy5hbmltYXRpb25TcGVlZDtcbiAgfVxuICBnZXRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VyLnVzZXJQcmVmZXJlbmNlcy5nZXQoKS5pZDtcbiAgfVxuICBnZXROYW1lKCkge1xuICAgIHJldHVybiB0aGlzLnVzZXIudXNlclByZWZlcmVuY2VzLmdldCgpLm5hbWUgPz8gZGVmYXVsdFVzZXJQcmVmZXJlbmNlcy5uYW1lO1xuICB9XG4gIGdldExvY2FsZSgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VyLnVzZXJQcmVmZXJlbmNlcy5nZXQoKS5sb2NhbGUgPz8gZGVmYXVsdFVzZXJQcmVmZXJlbmNlcy5sb2NhbGU7XG4gIH1cbiAgZ2V0Q29sb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlci51c2VyUHJlZmVyZW5jZXMuZ2V0KCkuY29sb3IgPz8gZGVmYXVsdFVzZXJQcmVmZXJlbmNlcy5jb2xvcjtcbiAgfVxuICBnZXRJc1NuYXBNb2RlKCkge1xuICAgIHJldHVybiB0aGlzLnVzZXIudXNlclByZWZlcmVuY2VzLmdldCgpLmlzU25hcE1vZGUgPz8gZGVmYXVsdFVzZXJQcmVmZXJlbmNlcy5pc1NuYXBNb2RlO1xuICB9XG4gIGdldElzV3JhcE1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlci51c2VyUHJlZmVyZW5jZXMuZ2V0KCkuaXNXcmFwTW9kZSA/PyBkZWZhdWx0VXNlclByZWZlcmVuY2VzLmlzV3JhcE1vZGU7XG4gIH1cbn1cbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBVc2VyUHJlZmVyZW5jZXNNYW5hZ2VyLnByb3RvdHlwZSwgXCJnZXRVc2VyUHJlZmVyZW5jZXNcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgVXNlclByZWZlcmVuY2VzTWFuYWdlci5wcm90b3R5cGUsIFwiZ2V0SXNEYXJrTW9kZVwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBVc2VyUHJlZmVyZW5jZXNNYW5hZ2VyLnByb3RvdHlwZSwgXCJnZXRFZGdlU2Nyb2xsU3BlZWRcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgVXNlclByZWZlcmVuY2VzTWFuYWdlci5wcm90b3R5cGUsIFwiZ2V0QW5pbWF0aW9uU3BlZWRcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgVXNlclByZWZlcmVuY2VzTWFuYWdlci5wcm90b3R5cGUsIFwiZ2V0SWRcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgVXNlclByZWZlcmVuY2VzTWFuYWdlci5wcm90b3R5cGUsIFwiZ2V0TmFtZVwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBVc2VyUHJlZmVyZW5jZXNNYW5hZ2VyLnByb3RvdHlwZSwgXCJnZXRMb2NhbGVcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgVXNlclByZWZlcmVuY2VzTWFuYWdlci5wcm90b3R5cGUsIFwiZ2V0Q29sb3JcIiwgMSk7XG5fX2RlY29yYXRlQ2xhc3MoW1xuICBjb21wdXRlZFxuXSwgVXNlclByZWZlcmVuY2VzTWFuYWdlci5wcm90b3R5cGUsIFwiZ2V0SXNTbmFwTW9kZVwiLCAxKTtcbl9fZGVjb3JhdGVDbGFzcyhbXG4gIGNvbXB1dGVkXG5dLCBVc2VyUHJlZmVyZW5jZXNNYW5hZ2VyLnByb3RvdHlwZSwgXCJnZXRJc1dyYXBNb2RlXCIsIDEpO1xuZXhwb3J0IHtcbiAgVXNlclByZWZlcmVuY2VzTWFuYWdlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVzZXJQcmVmZXJlbmNlc01hbmFnZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/managers/UserPreferencesManager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/BaseBoxShapeUtil.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/BaseBoxShapeUtil.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseBoxShapeUtil: () => (/* binding */ BaseBoxShapeUtil)\n/* harmony export */ });\n/* harmony import */ var _primitives_geometry_Rectangle2d_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../primitives/geometry/Rectangle2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Rectangle2d.mjs\");\n/* harmony import */ var _ShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ShapeUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/ShapeUtil.mjs\");\n/* harmony import */ var _shared_resizeBox_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/resizeBox.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/resizeBox.mjs\");\n\n\n\nclass BaseBoxShapeUtil extends _ShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_1__.ShapeUtil {\n  getGeometry(shape) {\n    return new _primitives_geometry_Rectangle2d_mjs__WEBPACK_IMPORTED_MODULE_0__.Rectangle2d({\n      width: shape.props.w,\n      height: shape.props.h,\n      isFilled: true\n    });\n  }\n  onResize = (shape, info) => {\n    return (0,_shared_resizeBox_mjs__WEBPACK_IMPORTED_MODULE_2__.resizeBox)(shape, info);\n  };\n  getHandleSnapGeometry(shape) {\n    return {\n      points: this.getGeometry(shape).bounds.cornersAndCenter\n    };\n  }\n}\n\n//# sourceMappingURL=BaseBoxShapeUtil.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvQmFzZUJveFNoYXBlVXRpbC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3RTtBQUM1QjtBQUNPO0FBQ25ELCtCQUErQixxREFBUztBQUN4QztBQUNBLGVBQWUsNkVBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxXQUFXLGdFQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL3NoYXBlcy9CYXNlQm94U2hhcGVVdGlsLm1qcz8zZjRhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlY3RhbmdsZTJkIH0gZnJvbSBcIi4uLy4uL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUmVjdGFuZ2xlMmQubWpzXCI7XG5pbXBvcnQgeyBTaGFwZVV0aWwgfSBmcm9tIFwiLi9TaGFwZVV0aWwubWpzXCI7XG5pbXBvcnQgeyByZXNpemVCb3ggfSBmcm9tIFwiLi9zaGFyZWQvcmVzaXplQm94Lm1qc1wiO1xuY2xhc3MgQmFzZUJveFNoYXBlVXRpbCBleHRlbmRzIFNoYXBlVXRpbCB7XG4gIGdldEdlb21ldHJ5KHNoYXBlKSB7XG4gICAgcmV0dXJuIG5ldyBSZWN0YW5nbGUyZCh7XG4gICAgICB3aWR0aDogc2hhcGUucHJvcHMudyxcbiAgICAgIGhlaWdodDogc2hhcGUucHJvcHMuaCxcbiAgICAgIGlzRmlsbGVkOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgb25SZXNpemUgPSAoc2hhcGUsIGluZm8pID0+IHtcbiAgICByZXR1cm4gcmVzaXplQm94KHNoYXBlLCBpbmZvKTtcbiAgfTtcbiAgZ2V0SGFuZGxlU25hcEdlb21ldHJ5KHNoYXBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvaW50czogdGhpcy5nZXRHZW9tZXRyeShzaGFwZSkuYm91bmRzLmNvcm5lcnNBbmRDZW50ZXJcbiAgICB9O1xuICB9XG59XG5leHBvcnQge1xuICBCYXNlQm94U2hhcGVVdGlsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmFzZUJveFNoYXBlVXRpbC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/BaseBoxShapeUtil.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/ShapeUtil.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/ShapeUtil.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ShapeUtil: () => (/* binding */ ShapeUtil)\n/* harmony export */ });\nclass ShapeUtil {\n  constructor(editor) {\n    this.editor = editor;\n  }\n  static props;\n  static migrations;\n  /**\n   * The type of the shape util, which should match the shape's type.\n   *\n   * @public\n   */\n  static type;\n  /**\n   * Whether the shape can be snapped to by another shape.\n   *\n   * @public\n   */\n  canSnap = () => true;\n  /**\n   * Whether the shape can be scrolled while editing.\n   *\n   * @public\n   */\n  canScroll = () => false;\n  /**\n   * Whether the shape can be bound to. See {@link TLShapeUtilCanBindOpts} for details.\n   *\n   * @public\n   */\n  canBind(opts) {\n    return true;\n  }\n  /**\n   * Whether the shape can be double clicked to edit.\n   *\n   * @public\n   */\n  canEdit = () => false;\n  /**\n   * Whether the shape can be resized.\n   *\n   * @public\n   */\n  canResize = () => true;\n  /**\n   * Whether the shape can be edited in read-only mode.\n   *\n   * @public\n   */\n  canEditInReadOnly = () => false;\n  /**\n   * Whether the shape can be cropped.\n   *\n   * @public\n   */\n  canCrop = () => false;\n  /**\n   * Whether the shape participates in stacking, aligning, and distributing.\n   *\n   * @public\n   */\n  canBeLaidOut = () => true;\n  /**\n   * Does this shape provide a background for its children? If this is true,\n   * then any children with a `renderBackground` method will have their\n   * backgrounds rendered _above_ this shape. Otherwise, the children's\n   * backgrounds will be rendered above either the next ancestor that provides\n   * a background, or the canvas background.\n   *\n   * @internal\n   */\n  providesBackgroundForChildren(shape) {\n    return false;\n  }\n  /**\n   * Whether the shape should hide its resize handles when selected.\n   *\n   * @public\n   */\n  hideResizeHandles = () => false;\n  /**\n   * Whether the shape should hide its rotation handles when selected.\n   *\n   * @public\n   */\n  hideRotateHandle = () => false;\n  /**\n   * Whether the shape should hide its selection bounds background when selected.\n   *\n   * @public\n   */\n  hideSelectionBoundsBg = () => false;\n  /**\n   * Whether the shape should hide its selection bounds foreground when selected.\n   *\n   * @public\n   */\n  hideSelectionBoundsFg = () => false;\n  /**\n   * Whether the shape's aspect ratio is locked.\n   *\n   * @public\n   */\n  isAspectRatioLocked = () => false;\n  /**\n   * Get whether the shape can receive children of a given type.\n   *\n   * @param type - The shape type.\n   * @public\n   */\n  canReceiveNewChildrenOfType(shape, type) {\n    return false;\n  }\n  /**\n   * Get whether the shape can receive children of a given type.\n   *\n   * @param shape - The shape type.\n   * @param shapes - The shapes that are being dropped.\n   * @public\n   */\n  canDropShapes(shape, shapes) {\n    return false;\n  }\n  /** @internal */\n  expandSelectionOutlinePx(shape) {\n    return 0;\n  }\n  /**\n   * Return elements to be added to the \\<defs\\> section of the canvases SVG context. This can be\n   * used to define SVG content (e.g. patterns & masks) that can be referred to by ID from svg\n   * elements returned by `component`.\n   *\n   * Each def should have a unique `key`. If multiple defs from different shapes all have the same\n   * key, only one will be used.\n   */\n  getCanvasSvgDefs() {\n    return [];\n  }\n  /**\n   * Get the geometry to use when snapping to this this shape in translate/resize operations. See\n   * {@link BoundsSnapGeometry} for details.\n   */\n  getBoundsSnapGeometry(shape) {\n    return {};\n  }\n  /**\n   * Get the geometry to use when snapping handles to this shape. See {@link HandleSnapGeometry}\n   * for details.\n   */\n  getHandleSnapGeometry(shape) {\n    return {};\n  }\n  //  Events\n  /**\n   * A callback called just before a shape is created. This method provides a last chance to modify\n   * the created shape.\n   *\n   * @example\n   *\n   * ```ts\n   * onBeforeCreate = (next) => {\n   * \treturn { ...next, x: next.x + 1 }\n   * }\n   * ```\n   *\n   * @param next - The next shape.\n   * @returns The next shape or void.\n   * @public\n   */\n  onBeforeCreate;\n  /**\n   * A callback called just before a shape is updated. This method provides a last chance to modify\n   * the updated shape.\n   *\n   * @example\n   *\n   * ```ts\n   * onBeforeUpdate = (prev, next) => {\n   * \tif (prev.x === next.x) {\n   * \t\treturn { ...next, x: next.x + 1 }\n   * \t}\n   * }\n   * ```\n   *\n   * @param prev - The previous shape.\n   * @param next - The next shape.\n   * @returns The next shape or void.\n   * @public\n   */\n  onBeforeUpdate;\n  /**\n   * A callback called when some other shapes are dragged over this one.\n   *\n   * @example\n   *\n   * ```ts\n   * onDragShapesOver = (shape, shapes) => {\n   * \tthis.editor.reparentShapes(shapes, shape.id)\n   * }\n   * ```\n   *\n   * @param shape - The shape.\n   * @param shapes - The shapes that are being dragged over this one.\n   * @public\n   */\n  onDragShapesOver;\n  /**\n   * A callback called when some other shapes are dragged out of this one.\n   *\n   * @param shape - The shape.\n   * @param shapes - The shapes that are being dragged out.\n   * @public\n   */\n  onDragShapesOut;\n  /**\n   * A callback called when some other shapes are dropped over this one.\n   *\n   * @param shape - The shape.\n   * @param shapes - The shapes that are being dropped over this one.\n   * @public\n   */\n  onDropShapesOver;\n  /**\n   * A callback called when a shape starts being resized.\n   *\n   * @param shape - The shape.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onResizeStart;\n  /**\n   * A callback called when a shape changes from a resize.\n   *\n   * @param shape - The shape at the start of the resize.\n   * @param info - Info about the resize.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onResize;\n  /**\n   * A callback called when a shape finishes resizing.\n   *\n   * @param initial - The shape at the start of the resize.\n   * @param current - The current shape.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onResizeEnd;\n  /**\n   * A callback called when a shape starts being translated.\n   *\n   * @param shape - The shape.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onTranslateStart;\n  /**\n   * A callback called when a shape changes from a translation.\n   *\n   * @param initial - The shape at the start of the translation.\n   * @param current - The current shape.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onTranslate;\n  /**\n   * A callback called when a shape finishes translating.\n   *\n   * @param initial - The shape at the start of the translation.\n   * @param current - The current shape.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onTranslateEnd;\n  /**\n   * A callback called when a shape's handle changes.\n   *\n   * @param shape - The current shape.\n   * @param info - An object containing the handle and whether the handle is 'precise' or not.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onHandleDrag;\n  /**\n   * A callback called when a shape starts being rotated.\n   *\n   * @param shape - The shape.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onRotateStart;\n  /**\n   * A callback called when a shape changes from a rotation.\n   *\n   * @param initial - The shape at the start of the rotation.\n   * @param current - The current shape.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onRotate;\n  /**\n   * A callback called when a shape finishes rotating.\n   *\n   * @param initial - The shape at the start of the rotation.\n   * @param current - The current shape.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onRotateEnd;\n  /**\n   * Not currently used.\n   *\n   * @internal\n   */\n  onBindingChange;\n  /**\n   * A callback called when a shape's children change.\n   *\n   * @param shape - The shape.\n   * @returns An array of shape updates, or void.\n   * @public\n   */\n  onChildrenChange;\n  /**\n   * A callback called when a shape's handle is double clicked.\n   *\n   * @param shape - The shape.\n   * @param handle - The handle that is double-clicked.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onDoubleClickHandle;\n  /**\n   * A callback called when a shape's edge is double clicked.\n   *\n   * @param shape - The shape.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onDoubleClickEdge;\n  /**\n   * A callback called when a shape is double clicked.\n   *\n   * @param shape - The shape.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onDoubleClick;\n  /**\n   * A callback called when a shape is clicked.\n   *\n   * @param shape - The shape.\n   * @returns A change to apply to the shape, or void.\n   * @public\n   */\n  onClick;\n  /**\n   * A callback called when a shape finishes being editing.\n   *\n   * @param shape - The shape.\n   * @public\n   */\n  onEditEnd;\n}\n\n//# sourceMappingURL=ShapeUtil.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvU2hhcGVVdGlsLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsOEJBQThCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sMEJBQTBCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUU7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL3NoYXBlcy9TaGFwZVV0aWwubWpzP2RlMWEiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgU2hhcGVVdGlsIHtcbiAgY29uc3RydWN0b3IoZWRpdG9yKSB7XG4gICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gIH1cbiAgc3RhdGljIHByb3BzO1xuICBzdGF0aWMgbWlncmF0aW9ucztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIHRoZSBzaGFwZSB1dGlsLCB3aGljaCBzaG91bGQgbWF0Y2ggdGhlIHNoYXBlJ3MgdHlwZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc3RhdGljIHR5cGU7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBzaGFwZSBjYW4gYmUgc25hcHBlZCB0byBieSBhbm90aGVyIHNoYXBlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjYW5TbmFwID0gKCkgPT4gdHJ1ZTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNoYXBlIGNhbiBiZSBzY3JvbGxlZCB3aGlsZSBlZGl0aW5nLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjYW5TY3JvbGwgPSAoKSA9PiBmYWxzZTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNoYXBlIGNhbiBiZSBib3VuZCB0by4gU2VlIHtAbGluayBUTFNoYXBlVXRpbENhbkJpbmRPcHRzfSBmb3IgZGV0YWlscy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2FuQmluZChvcHRzKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNoYXBlIGNhbiBiZSBkb3VibGUgY2xpY2tlZCB0byBlZGl0LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjYW5FZGl0ID0gKCkgPT4gZmFsc2U7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBzaGFwZSBjYW4gYmUgcmVzaXplZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2FuUmVzaXplID0gKCkgPT4gdHJ1ZTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNoYXBlIGNhbiBiZSBlZGl0ZWQgaW4gcmVhZC1vbmx5IG1vZGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNhbkVkaXRJblJlYWRPbmx5ID0gKCkgPT4gZmFsc2U7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBzaGFwZSBjYW4gYmUgY3JvcHBlZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2FuQ3JvcCA9ICgpID0+IGZhbHNlO1xuICAvKipcbiAgICogV2hldGhlciB0aGUgc2hhcGUgcGFydGljaXBhdGVzIGluIHN0YWNraW5nLCBhbGlnbmluZywgYW5kIGRpc3RyaWJ1dGluZy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2FuQmVMYWlkT3V0ID0gKCkgPT4gdHJ1ZTtcbiAgLyoqXG4gICAqIERvZXMgdGhpcyBzaGFwZSBwcm92aWRlIGEgYmFja2dyb3VuZCBmb3IgaXRzIGNoaWxkcmVuPyBJZiB0aGlzIGlzIHRydWUsXG4gICAqIHRoZW4gYW55IGNoaWxkcmVuIHdpdGggYSBgcmVuZGVyQmFja2dyb3VuZGAgbWV0aG9kIHdpbGwgaGF2ZSB0aGVpclxuICAgKiBiYWNrZ3JvdW5kcyByZW5kZXJlZCBfYWJvdmVfIHRoaXMgc2hhcGUuIE90aGVyd2lzZSwgdGhlIGNoaWxkcmVuJ3NcbiAgICogYmFja2dyb3VuZHMgd2lsbCBiZSByZW5kZXJlZCBhYm92ZSBlaXRoZXIgdGhlIG5leHQgYW5jZXN0b3IgdGhhdCBwcm92aWRlc1xuICAgKiBhIGJhY2tncm91bmQsIG9yIHRoZSBjYW52YXMgYmFja2dyb3VuZC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcm92aWRlc0JhY2tncm91bmRGb3JDaGlsZHJlbihzaGFwZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogV2hldGhlciB0aGUgc2hhcGUgc2hvdWxkIGhpZGUgaXRzIHJlc2l6ZSBoYW5kbGVzIHdoZW4gc2VsZWN0ZWQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGhpZGVSZXNpemVIYW5kbGVzID0gKCkgPT4gZmFsc2U7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBzaGFwZSBzaG91bGQgaGlkZSBpdHMgcm90YXRpb24gaGFuZGxlcyB3aGVuIHNlbGVjdGVkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBoaWRlUm90YXRlSGFuZGxlID0gKCkgPT4gZmFsc2U7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBzaGFwZSBzaG91bGQgaGlkZSBpdHMgc2VsZWN0aW9uIGJvdW5kcyBiYWNrZ3JvdW5kIHdoZW4gc2VsZWN0ZWQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGhpZGVTZWxlY3Rpb25Cb3VuZHNCZyA9ICgpID0+IGZhbHNlO1xuICAvKipcbiAgICogV2hldGhlciB0aGUgc2hhcGUgc2hvdWxkIGhpZGUgaXRzIHNlbGVjdGlvbiBib3VuZHMgZm9yZWdyb3VuZCB3aGVuIHNlbGVjdGVkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBoaWRlU2VsZWN0aW9uQm91bmRzRmcgPSAoKSA9PiBmYWxzZTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNoYXBlJ3MgYXNwZWN0IHJhdGlvIGlzIGxvY2tlZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgaXNBc3BlY3RSYXRpb0xvY2tlZCA9ICgpID0+IGZhbHNlO1xuICAvKipcbiAgICogR2V0IHdoZXRoZXIgdGhlIHNoYXBlIGNhbiByZWNlaXZlIGNoaWxkcmVuIG9mIGEgZ2l2ZW4gdHlwZS5cbiAgICpcbiAgICogQHBhcmFtIHR5cGUgLSBUaGUgc2hhcGUgdHlwZS5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2FuUmVjZWl2ZU5ld0NoaWxkcmVuT2ZUeXBlKHNoYXBlLCB0eXBlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgd2hldGhlciB0aGUgc2hhcGUgY2FuIHJlY2VpdmUgY2hpbGRyZW4gb2YgYSBnaXZlbiB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUgdHlwZS5cbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgdGhhdCBhcmUgYmVpbmcgZHJvcHBlZC5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2FuRHJvcFNoYXBlcyhzaGFwZSwgc2hhcGVzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZXhwYW5kU2VsZWN0aW9uT3V0bGluZVB4KHNoYXBlKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiBlbGVtZW50cyB0byBiZSBhZGRlZCB0byB0aGUgXFw8ZGVmc1xcPiBzZWN0aW9uIG9mIHRoZSBjYW52YXNlcyBTVkcgY29udGV4dC4gVGhpcyBjYW4gYmVcbiAgICogdXNlZCB0byBkZWZpbmUgU1ZHIGNvbnRlbnQgKGUuZy4gcGF0dGVybnMgJiBtYXNrcykgdGhhdCBjYW4gYmUgcmVmZXJyZWQgdG8gYnkgSUQgZnJvbSBzdmdcbiAgICogZWxlbWVudHMgcmV0dXJuZWQgYnkgYGNvbXBvbmVudGAuXG4gICAqXG4gICAqIEVhY2ggZGVmIHNob3VsZCBoYXZlIGEgdW5pcXVlIGBrZXlgLiBJZiBtdWx0aXBsZSBkZWZzIGZyb20gZGlmZmVyZW50IHNoYXBlcyBhbGwgaGF2ZSB0aGUgc2FtZVxuICAgKiBrZXksIG9ubHkgb25lIHdpbGwgYmUgdXNlZC5cbiAgICovXG4gIGdldENhbnZhc1N2Z0RlZnMoKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGdlb21ldHJ5IHRvIHVzZSB3aGVuIHNuYXBwaW5nIHRvIHRoaXMgdGhpcyBzaGFwZSBpbiB0cmFuc2xhdGUvcmVzaXplIG9wZXJhdGlvbnMuIFNlZVxuICAgKiB7QGxpbmsgQm91bmRzU25hcEdlb21ldHJ5fSBmb3IgZGV0YWlscy5cbiAgICovXG4gIGdldEJvdW5kc1NuYXBHZW9tZXRyeShzaGFwZSkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBnZW9tZXRyeSB0byB1c2Ugd2hlbiBzbmFwcGluZyBoYW5kbGVzIHRvIHRoaXMgc2hhcGUuIFNlZSB7QGxpbmsgSGFuZGxlU25hcEdlb21ldHJ5fVxuICAgKiBmb3IgZGV0YWlscy5cbiAgICovXG4gIGdldEhhbmRsZVNuYXBHZW9tZXRyeShzaGFwZSkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICAvLyAgRXZlbnRzXG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIGNhbGxlZCBqdXN0IGJlZm9yZSBhIHNoYXBlIGlzIGNyZWF0ZWQuIFRoaXMgbWV0aG9kIHByb3ZpZGVzIGEgbGFzdCBjaGFuY2UgdG8gbW9kaWZ5XG4gICAqIHRoZSBjcmVhdGVkIHNoYXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBvbkJlZm9yZUNyZWF0ZSA9IChuZXh0KSA9PiB7XG4gICAqIFx0cmV0dXJuIHsgLi4ubmV4dCwgeDogbmV4dC54ICsgMSB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBuZXh0IC0gVGhlIG5leHQgc2hhcGUuXG4gICAqIEByZXR1cm5zIFRoZSBuZXh0IHNoYXBlIG9yIHZvaWQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG9uQmVmb3JlQ3JlYXRlO1xuICAvKipcbiAgICogQSBjYWxsYmFjayBjYWxsZWQganVzdCBiZWZvcmUgYSBzaGFwZSBpcyB1cGRhdGVkLiBUaGlzIG1ldGhvZCBwcm92aWRlcyBhIGxhc3QgY2hhbmNlIHRvIG1vZGlmeVxuICAgKiB0aGUgdXBkYXRlZCBzaGFwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBgdHNcbiAgICogb25CZWZvcmVVcGRhdGUgPSAocHJldiwgbmV4dCkgPT4ge1xuICAgKiBcdGlmIChwcmV2LnggPT09IG5leHQueCkge1xuICAgKiBcdFx0cmV0dXJuIHsgLi4ubmV4dCwgeDogbmV4dC54ICsgMSB9XG4gICAqIFx0fVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gcHJldiAtIFRoZSBwcmV2aW91cyBzaGFwZS5cbiAgICogQHBhcmFtIG5leHQgLSBUaGUgbmV4dCBzaGFwZS5cbiAgICogQHJldHVybnMgVGhlIG5leHQgc2hhcGUgb3Igdm9pZC5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgb25CZWZvcmVVcGRhdGU7XG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIGNhbGxlZCB3aGVuIHNvbWUgb3RoZXIgc2hhcGVzIGFyZSBkcmFnZ2VkIG92ZXIgdGhpcyBvbmUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIG9uRHJhZ1NoYXBlc092ZXIgPSAoc2hhcGUsIHNoYXBlcykgPT4ge1xuICAgKiBcdHRoaXMuZWRpdG9yLnJlcGFyZW50U2hhcGVzKHNoYXBlcywgc2hhcGUuaWQpXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZS5cbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgdGhhdCBhcmUgYmVpbmcgZHJhZ2dlZCBvdmVyIHRoaXMgb25lLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBvbkRyYWdTaGFwZXNPdmVyO1xuICAvKipcbiAgICogQSBjYWxsYmFjayBjYWxsZWQgd2hlbiBzb21lIG90aGVyIHNoYXBlcyBhcmUgZHJhZ2dlZCBvdXQgb2YgdGhpcyBvbmUuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZS5cbiAgICogQHBhcmFtIHNoYXBlcyAtIFRoZSBzaGFwZXMgdGhhdCBhcmUgYmVpbmcgZHJhZ2dlZCBvdXQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG9uRHJhZ1NoYXBlc091dDtcbiAgLyoqXG4gICAqIEEgY2FsbGJhY2sgY2FsbGVkIHdoZW4gc29tZSBvdGhlciBzaGFwZXMgYXJlIGRyb3BwZWQgb3ZlciB0aGlzIG9uZS5cbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlLlxuICAgKiBAcGFyYW0gc2hhcGVzIC0gVGhlIHNoYXBlcyB0aGF0IGFyZSBiZWluZyBkcm9wcGVkIG92ZXIgdGhpcyBvbmUuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG9uRHJvcFNoYXBlc092ZXI7XG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIGNhbGxlZCB3aGVuIGEgc2hhcGUgc3RhcnRzIGJlaW5nIHJlc2l6ZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZS5cbiAgICogQHJldHVybnMgQSBjaGFuZ2UgdG8gYXBwbHkgdG8gdGhlIHNoYXBlLCBvciB2b2lkLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBvblJlc2l6ZVN0YXJ0O1xuICAvKipcbiAgICogQSBjYWxsYmFjayBjYWxsZWQgd2hlbiBhIHNoYXBlIGNoYW5nZXMgZnJvbSBhIHJlc2l6ZS5cbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlIGF0IHRoZSBzdGFydCBvZiB0aGUgcmVzaXplLlxuICAgKiBAcGFyYW0gaW5mbyAtIEluZm8gYWJvdXQgdGhlIHJlc2l6ZS5cbiAgICogQHJldHVybnMgQSBjaGFuZ2UgdG8gYXBwbHkgdG8gdGhlIHNoYXBlLCBvciB2b2lkLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBvblJlc2l6ZTtcbiAgLyoqXG4gICAqIEEgY2FsbGJhY2sgY2FsbGVkIHdoZW4gYSBzaGFwZSBmaW5pc2hlcyByZXNpemluZy5cbiAgICpcbiAgICogQHBhcmFtIGluaXRpYWwgLSBUaGUgc2hhcGUgYXQgdGhlIHN0YXJ0IG9mIHRoZSByZXNpemUuXG4gICAqIEBwYXJhbSBjdXJyZW50IC0gVGhlIGN1cnJlbnQgc2hhcGUuXG4gICAqIEByZXR1cm5zIEEgY2hhbmdlIHRvIGFwcGx5IHRvIHRoZSBzaGFwZSwgb3Igdm9pZC5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgb25SZXNpemVFbmQ7XG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIGNhbGxlZCB3aGVuIGEgc2hhcGUgc3RhcnRzIGJlaW5nIHRyYW5zbGF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZS5cbiAgICogQHJldHVybnMgQSBjaGFuZ2UgdG8gYXBwbHkgdG8gdGhlIHNoYXBlLCBvciB2b2lkLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBvblRyYW5zbGF0ZVN0YXJ0O1xuICAvKipcbiAgICogQSBjYWxsYmFjayBjYWxsZWQgd2hlbiBhIHNoYXBlIGNoYW5nZXMgZnJvbSBhIHRyYW5zbGF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gaW5pdGlhbCAtIFRoZSBzaGFwZSBhdCB0aGUgc3RhcnQgb2YgdGhlIHRyYW5zbGF0aW9uLlxuICAgKiBAcGFyYW0gY3VycmVudCAtIFRoZSBjdXJyZW50IHNoYXBlLlxuICAgKiBAcmV0dXJucyBBIGNoYW5nZSB0byBhcHBseSB0byB0aGUgc2hhcGUsIG9yIHZvaWQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG9uVHJhbnNsYXRlO1xuICAvKipcbiAgICogQSBjYWxsYmFjayBjYWxsZWQgd2hlbiBhIHNoYXBlIGZpbmlzaGVzIHRyYW5zbGF0aW5nLlxuICAgKlxuICAgKiBAcGFyYW0gaW5pdGlhbCAtIFRoZSBzaGFwZSBhdCB0aGUgc3RhcnQgb2YgdGhlIHRyYW5zbGF0aW9uLlxuICAgKiBAcGFyYW0gY3VycmVudCAtIFRoZSBjdXJyZW50IHNoYXBlLlxuICAgKiBAcmV0dXJucyBBIGNoYW5nZSB0byBhcHBseSB0byB0aGUgc2hhcGUsIG9yIHZvaWQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG9uVHJhbnNsYXRlRW5kO1xuICAvKipcbiAgICogQSBjYWxsYmFjayBjYWxsZWQgd2hlbiBhIHNoYXBlJ3MgaGFuZGxlIGNoYW5nZXMuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBjdXJyZW50IHNoYXBlLlxuICAgKiBAcGFyYW0gaW5mbyAtIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBoYW5kbGUgYW5kIHdoZXRoZXIgdGhlIGhhbmRsZSBpcyAncHJlY2lzZScgb3Igbm90LlxuICAgKiBAcmV0dXJucyBBIGNoYW5nZSB0byBhcHBseSB0byB0aGUgc2hhcGUsIG9yIHZvaWQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG9uSGFuZGxlRHJhZztcbiAgLyoqXG4gICAqIEEgY2FsbGJhY2sgY2FsbGVkIHdoZW4gYSBzaGFwZSBzdGFydHMgYmVpbmcgcm90YXRlZC5cbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlLlxuICAgKiBAcmV0dXJucyBBIGNoYW5nZSB0byBhcHBseSB0byB0aGUgc2hhcGUsIG9yIHZvaWQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG9uUm90YXRlU3RhcnQ7XG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIGNhbGxlZCB3aGVuIGEgc2hhcGUgY2hhbmdlcyBmcm9tIGEgcm90YXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSBpbml0aWFsIC0gVGhlIHNoYXBlIGF0IHRoZSBzdGFydCBvZiB0aGUgcm90YXRpb24uXG4gICAqIEBwYXJhbSBjdXJyZW50IC0gVGhlIGN1cnJlbnQgc2hhcGUuXG4gICAqIEByZXR1cm5zIEEgY2hhbmdlIHRvIGFwcGx5IHRvIHRoZSBzaGFwZSwgb3Igdm9pZC5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgb25Sb3RhdGU7XG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIGNhbGxlZCB3aGVuIGEgc2hhcGUgZmluaXNoZXMgcm90YXRpbmcuXG4gICAqXG4gICAqIEBwYXJhbSBpbml0aWFsIC0gVGhlIHNoYXBlIGF0IHRoZSBzdGFydCBvZiB0aGUgcm90YXRpb24uXG4gICAqIEBwYXJhbSBjdXJyZW50IC0gVGhlIGN1cnJlbnQgc2hhcGUuXG4gICAqIEByZXR1cm5zIEEgY2hhbmdlIHRvIGFwcGx5IHRvIHRoZSBzaGFwZSwgb3Igdm9pZC5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgb25Sb3RhdGVFbmQ7XG4gIC8qKlxuICAgKiBOb3QgY3VycmVudGx5IHVzZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgb25CaW5kaW5nQ2hhbmdlO1xuICAvKipcbiAgICogQSBjYWxsYmFjayBjYWxsZWQgd2hlbiBhIHNoYXBlJ3MgY2hpbGRyZW4gY2hhbmdlLlxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUuXG4gICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHNoYXBlIHVwZGF0ZXMsIG9yIHZvaWQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG9uQ2hpbGRyZW5DaGFuZ2U7XG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIGNhbGxlZCB3aGVuIGEgc2hhcGUncyBoYW5kbGUgaXMgZG91YmxlIGNsaWNrZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzaGFwZSAtIFRoZSBzaGFwZS5cbiAgICogQHBhcmFtIGhhbmRsZSAtIFRoZSBoYW5kbGUgdGhhdCBpcyBkb3VibGUtY2xpY2tlZC5cbiAgICogQHJldHVybnMgQSBjaGFuZ2UgdG8gYXBwbHkgdG8gdGhlIHNoYXBlLCBvciB2b2lkLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBvbkRvdWJsZUNsaWNrSGFuZGxlO1xuICAvKipcbiAgICogQSBjYWxsYmFjayBjYWxsZWQgd2hlbiBhIHNoYXBlJ3MgZWRnZSBpcyBkb3VibGUgY2xpY2tlZC5cbiAgICpcbiAgICogQHBhcmFtIHNoYXBlIC0gVGhlIHNoYXBlLlxuICAgKiBAcmV0dXJucyBBIGNoYW5nZSB0byBhcHBseSB0byB0aGUgc2hhcGUsIG9yIHZvaWQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG9uRG91YmxlQ2xpY2tFZGdlO1xuICAvKipcbiAgICogQSBjYWxsYmFjayBjYWxsZWQgd2hlbiBhIHNoYXBlIGlzIGRvdWJsZSBjbGlja2VkLlxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUuXG4gICAqIEByZXR1cm5zIEEgY2hhbmdlIHRvIGFwcGx5IHRvIHRoZSBzaGFwZSwgb3Igdm9pZC5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgb25Eb3VibGVDbGljaztcbiAgLyoqXG4gICAqIEEgY2FsbGJhY2sgY2FsbGVkIHdoZW4gYSBzaGFwZSBpcyBjbGlja2VkLlxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUuXG4gICAqIEByZXR1cm5zIEEgY2hhbmdlIHRvIGFwcGx5IHRvIHRoZSBzaGFwZSwgb3Igdm9pZC5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgb25DbGljaztcbiAgLyoqXG4gICAqIEEgY2FsbGJhY2sgY2FsbGVkIHdoZW4gYSBzaGFwZSBmaW5pc2hlcyBiZWluZyBlZGl0aW5nLlxuICAgKlxuICAgKiBAcGFyYW0gc2hhcGUgLSBUaGUgc2hhcGUuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG9uRWRpdEVuZDtcbn1cbmV4cG9ydCB7XG4gIFNoYXBlVXRpbFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNoYXBlVXRpbC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/ShapeUtil.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/DashedOutlineBox.mjs":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/DashedOutlineBox.mjs ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DashedOutlineBox: () => (/* binding */ DashedOutlineBox)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _shared_getPerfectDashProps_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shared/getPerfectDashProps.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/getPerfectDashProps.mjs\");\n\n\n\n\nfunction DashedOutlineBox({ bounds, className }) {\n  const editor = (0,_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n  const zoomLevel = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"zoom level\", () => editor.getZoomLevel(), [editor]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"g\", { className, pointerEvents: \"none\", strokeLinecap: \"round\", strokeLinejoin: \"round\", children: bounds.sides.map((side, i) => {\n    const { strokeDasharray, strokeDashoffset } = (0,_shared_getPerfectDashProps_mjs__WEBPACK_IMPORTED_MODULE_3__.getPerfectDashProps)(\n      side[0].dist(side[1]),\n      1 / zoomLevel,\n      {\n        style: \"dashed\",\n        lengthRatio: 4\n      }\n    );\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n      \"line\",\n      {\n        x1: side[0].x,\n        y1: side[0].y,\n        x2: side[1].x,\n        y2: side[1].y,\n        strokeDasharray,\n        strokeDashoffset\n      },\n      i\n    );\n  }) });\n}\n\n//# sourceMappingURL=DashedOutlineBox.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvZ3JvdXAvRGFzaGVkT3V0bGluZUJveC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDQztBQUNnQjtBQUNlO0FBQ3hFLDRCQUE0QixtQkFBbUI7QUFDL0MsaUJBQWlCLCtEQUFTO0FBQzFCLG9CQUFvQix1REFBUTtBQUM1Qix5QkFBeUIsc0RBQUcsUUFBUTtBQUNwQyxZQUFZLG9DQUFvQyxFQUFFLG9GQUFtQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixzREFBRztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHLEdBQUc7QUFDTjtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvZ3JvdXAvRGFzaGVkT3V0bGluZUJveC5tanM/YWJiYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZVZhbHVlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuLi8uLi8uLi9ob29rcy91c2VFZGl0b3IubWpzXCI7XG5pbXBvcnQgeyBnZXRQZXJmZWN0RGFzaFByb3BzIH0gZnJvbSBcIi4uL3NoYXJlZC9nZXRQZXJmZWN0RGFzaFByb3BzLm1qc1wiO1xuZnVuY3Rpb24gRGFzaGVkT3V0bGluZUJveCh7IGJvdW5kcywgY2xhc3NOYW1lIH0pIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IHpvb21MZXZlbCA9IHVzZVZhbHVlKFwiem9vbSBsZXZlbFwiLCAoKSA9PiBlZGl0b3IuZ2V0Wm9vbUxldmVsKCksIFtlZGl0b3JdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXCJnXCIsIHsgY2xhc3NOYW1lLCBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIiwgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLCBzdHJva2VMaW5lam9pbjogXCJyb3VuZFwiLCBjaGlsZHJlbjogYm91bmRzLnNpZGVzLm1hcCgoc2lkZSwgaSkgPT4ge1xuICAgIGNvbnN0IHsgc3Ryb2tlRGFzaGFycmF5LCBzdHJva2VEYXNob2Zmc2V0IH0gPSBnZXRQZXJmZWN0RGFzaFByb3BzKFxuICAgICAgc2lkZVswXS5kaXN0KHNpZGVbMV0pLFxuICAgICAgMSAvIHpvb21MZXZlbCxcbiAgICAgIHtcbiAgICAgICAgc3R5bGU6IFwiZGFzaGVkXCIsXG4gICAgICAgIGxlbmd0aFJhdGlvOiA0XG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgIFwibGluZVwiLFxuICAgICAge1xuICAgICAgICB4MTogc2lkZVswXS54LFxuICAgICAgICB5MTogc2lkZVswXS55LFxuICAgICAgICB4Mjogc2lkZVsxXS54LFxuICAgICAgICB5Mjogc2lkZVsxXS55LFxuICAgICAgICBzdHJva2VEYXNoYXJyYXksXG4gICAgICAgIHN0cm9rZURhc2hvZmZzZXRcbiAgICAgIH0sXG4gICAgICBpXG4gICAgKTtcbiAgfSkgfSk7XG59XG5leHBvcnQge1xuICBEYXNoZWRPdXRsaW5lQm94XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGFzaGVkT3V0bGluZUJveC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/DashedOutlineBox.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/GroupShapeUtil.mjs":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/GroupShapeUtil.mjs ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GroupShapeUtil: () => (/* binding */ GroupShapeUtil)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _components_SVGContainer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/SVGContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/SVGContainer.mjs\");\n/* harmony import */ var _primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../primitives/geometry/Group2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs\");\n/* harmony import */ var _primitives_geometry_Polygon2d_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../primitives/geometry/Polygon2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polygon2d.mjs\");\n/* harmony import */ var _primitives_geometry_Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../primitives/geometry/Polyline2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs\");\n/* harmony import */ var _primitives_geometry_Rectangle2d_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../primitives/geometry/Rectangle2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Rectangle2d.mjs\");\n/* harmony import */ var _ShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../ShapeUtil.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/ShapeUtil.mjs\");\n/* harmony import */ var _DashedOutlineBox_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./DashedOutlineBox.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/DashedOutlineBox.mjs\");\n\n\n\n\n\n\n\n\n\nclass GroupShapeUtil extends _ShapeUtil_mjs__WEBPACK_IMPORTED_MODULE_7__.ShapeUtil {\n  static type = \"group\";\n  static props = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.groupShapeProps;\n  static migrations = _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_1__.groupShapeMigrations;\n  hideSelectionBoundsFg = () => true;\n  canBind = () => false;\n  getDefaultProps() {\n    return {};\n  }\n  getGeometry(shape) {\n    const children = this.editor.getSortedChildIdsForParent(shape.id);\n    if (children.length === 0) {\n      return new _primitives_geometry_Rectangle2d_mjs__WEBPACK_IMPORTED_MODULE_6__.Rectangle2d({ width: 1, height: 1, isFilled: false });\n    }\n    return new _primitives_geometry_Group2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Group2d({\n      children: children.map((childId) => {\n        const shape2 = this.editor.getShape(childId);\n        const geometry = this.editor.getShapeGeometry(childId);\n        const points = this.editor.getShapeLocalTransform(shape2).applyToPoints(geometry.vertices);\n        if (geometry.isClosed) {\n          return new _primitives_geometry_Polygon2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Polygon2d({\n            points,\n            isFilled: true\n          });\n        }\n        return new _primitives_geometry_Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_5__.Polyline2d({\n          points\n        });\n      })\n    });\n  }\n  component(shape) {\n    const isErasing = this.editor.getErasingShapeIds().includes(shape.id);\n    const { hintingShapeIds } = this.editor.getCurrentPageState();\n    const isHintingOtherGroup = hintingShapeIds.length > 0 && hintingShapeIds.some(\n      (id) => id !== shape.id && this.editor.isShapeOfType(this.editor.getShape(id), \"group\")\n    );\n    const isFocused = this.editor.getCurrentPageState().focusedGroupId !== shape.id;\n    if (!isErasing && // always show the outline while we're erasing the group\n    // show the outline while the group is focused unless something outside of the group is being hinted\n    // this happens dropping shapes from a group onto some outside group\n    (isFocused || isHintingOtherGroup)) {\n      return null;\n    }\n    const bounds = this.editor.getShapeGeometry(shape).bounds;\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_SVGContainer_mjs__WEBPACK_IMPORTED_MODULE_2__.SVGContainer, { id: shape.id, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_DashedOutlineBox_mjs__WEBPACK_IMPORTED_MODULE_8__.DashedOutlineBox, { className: \"tl-group\", bounds }) });\n  }\n  indicator(shape) {\n    const bounds = this.editor.getShapeGeometry(shape).bounds;\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_DashedOutlineBox_mjs__WEBPACK_IMPORTED_MODULE_8__.DashedOutlineBox, { className: \"\", bounds });\n  }\n  onChildrenChange = (group) => {\n    const children = this.editor.getSortedChildIdsForParent(group.id);\n    if (children.length === 0) {\n      if (this.editor.getCurrentPageState().focusedGroupId === group.id) {\n        this.editor.popFocusedGroupId();\n      }\n      this.editor.deleteShapes([group.id]);\n      return;\n    } else if (children.length === 1) {\n      if (this.editor.getCurrentPageState().focusedGroupId === group.id) {\n        this.editor.popFocusedGroupId();\n      }\n      this.editor.reparentShapes(children, group.parentId);\n      this.editor.deleteShapes([group.id]);\n      return;\n    }\n  };\n}\n\n//# sourceMappingURL=GroupShapeUtil.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvZ3JvdXAvR3JvdXBTaGFwZVV0aWwubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBd0M7QUFDaUM7QUFDTDtBQUNEO0FBQ0k7QUFDRTtBQUNFO0FBQzlCO0FBQ2E7QUFDMUQsNkJBQTZCLHFEQUFTO0FBQ3RDO0FBQ0EsaUJBQWlCLDZEQUFlO0FBQ2hDLHNCQUFzQixrRUFBb0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2RUFBVyxHQUFHLHNDQUFzQztBQUNyRTtBQUNBLGVBQWUscUVBQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix5RUFBUztBQUM5QjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsbUJBQW1CLDJFQUFVO0FBQzdCO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixzREFBRyxDQUFDLHNFQUFZLElBQUksd0NBQXdDLHNEQUFHLENBQUMsbUVBQWdCLElBQUksK0JBQStCLEdBQUc7QUFDako7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNEQUFHLENBQUMsbUVBQWdCLElBQUksdUJBQXVCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3Ivc2hhcGVzL2dyb3VwL0dyb3VwU2hhcGVVdGlsLm1qcz83YzcyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgZ3JvdXBTaGFwZU1pZ3JhdGlvbnMsIGdyb3VwU2hhcGVQcm9wcyB9IGZyb20gXCJAdGxkcmF3L3Rsc2NoZW1hXCI7XG5pbXBvcnQgeyBTVkdDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vLi4vY29tcG9uZW50cy9TVkdDb250YWluZXIubWpzXCI7XG5pbXBvcnQgeyBHcm91cDJkIH0gZnJvbSBcIi4uLy4uLy4uL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvR3JvdXAyZC5tanNcIjtcbmltcG9ydCB7IFBvbHlnb24yZCB9IGZyb20gXCIuLi8uLi8uLi9wcmltaXRpdmVzL2dlb21ldHJ5L1BvbHlnb24yZC5tanNcIjtcbmltcG9ydCB7IFBvbHlsaW5lMmQgfSBmcm9tIFwiLi4vLi4vLi4vcHJpbWl0aXZlcy9nZW9tZXRyeS9Qb2x5bGluZTJkLm1qc1wiO1xuaW1wb3J0IHsgUmVjdGFuZ2xlMmQgfSBmcm9tIFwiLi4vLi4vLi4vcHJpbWl0aXZlcy9nZW9tZXRyeS9SZWN0YW5nbGUyZC5tanNcIjtcbmltcG9ydCB7IFNoYXBlVXRpbCB9IGZyb20gXCIuLi9TaGFwZVV0aWwubWpzXCI7XG5pbXBvcnQgeyBEYXNoZWRPdXRsaW5lQm94IH0gZnJvbSBcIi4vRGFzaGVkT3V0bGluZUJveC5tanNcIjtcbmNsYXNzIEdyb3VwU2hhcGVVdGlsIGV4dGVuZHMgU2hhcGVVdGlsIHtcbiAgc3RhdGljIHR5cGUgPSBcImdyb3VwXCI7XG4gIHN0YXRpYyBwcm9wcyA9IGdyb3VwU2hhcGVQcm9wcztcbiAgc3RhdGljIG1pZ3JhdGlvbnMgPSBncm91cFNoYXBlTWlncmF0aW9ucztcbiAgaGlkZVNlbGVjdGlvbkJvdW5kc0ZnID0gKCkgPT4gdHJ1ZTtcbiAgY2FuQmluZCA9ICgpID0+IGZhbHNlO1xuICBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIGdldEdlb21ldHJ5KHNoYXBlKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmVkaXRvci5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudChzaGFwZS5pZCk7XG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG5ldyBSZWN0YW5nbGUyZCh7IHdpZHRoOiAxLCBoZWlnaHQ6IDEsIGlzRmlsbGVkOiBmYWxzZSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBHcm91cDJkKHtcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbi5tYXAoKGNoaWxkSWQpID0+IHtcbiAgICAgICAgY29uc3Qgc2hhcGUyID0gdGhpcy5lZGl0b3IuZ2V0U2hhcGUoY2hpbGRJZCk7XG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5lZGl0b3IuZ2V0U2hhcGVHZW9tZXRyeShjaGlsZElkKTtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gdGhpcy5lZGl0b3IuZ2V0U2hhcGVMb2NhbFRyYW5zZm9ybShzaGFwZTIpLmFwcGx5VG9Qb2ludHMoZ2VvbWV0cnkudmVydGljZXMpO1xuICAgICAgICBpZiAoZ2VvbWV0cnkuaXNDbG9zZWQpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IFBvbHlnb24yZCh7XG4gICAgICAgICAgICBwb2ludHMsXG4gICAgICAgICAgICBpc0ZpbGxlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUG9seWxpbmUyZCh7XG4gICAgICAgICAgcG9pbnRzXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICBjb21wb25lbnQoc2hhcGUpIHtcbiAgICBjb25zdCBpc0VyYXNpbmcgPSB0aGlzLmVkaXRvci5nZXRFcmFzaW5nU2hhcGVJZHMoKS5pbmNsdWRlcyhzaGFwZS5pZCk7XG4gICAgY29uc3QgeyBoaW50aW5nU2hhcGVJZHMgfSA9IHRoaXMuZWRpdG9yLmdldEN1cnJlbnRQYWdlU3RhdGUoKTtcbiAgICBjb25zdCBpc0hpbnRpbmdPdGhlckdyb3VwID0gaGludGluZ1NoYXBlSWRzLmxlbmd0aCA+IDAgJiYgaGludGluZ1NoYXBlSWRzLnNvbWUoXG4gICAgICAoaWQpID0+IGlkICE9PSBzaGFwZS5pZCAmJiB0aGlzLmVkaXRvci5pc1NoYXBlT2ZUeXBlKHRoaXMuZWRpdG9yLmdldFNoYXBlKGlkKSwgXCJncm91cFwiKVxuICAgICk7XG4gICAgY29uc3QgaXNGb2N1c2VkID0gdGhpcy5lZGl0b3IuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLmZvY3VzZWRHcm91cElkICE9PSBzaGFwZS5pZDtcbiAgICBpZiAoIWlzRXJhc2luZyAmJiAvLyBhbHdheXMgc2hvdyB0aGUgb3V0bGluZSB3aGlsZSB3ZSdyZSBlcmFzaW5nIHRoZSBncm91cFxuICAgIC8vIHNob3cgdGhlIG91dGxpbmUgd2hpbGUgdGhlIGdyb3VwIGlzIGZvY3VzZWQgdW5sZXNzIHNvbWV0aGluZyBvdXRzaWRlIG9mIHRoZSBncm91cCBpcyBiZWluZyBoaW50ZWRcbiAgICAvLyB0aGlzIGhhcHBlbnMgZHJvcHBpbmcgc2hhcGVzIGZyb20gYSBncm91cCBvbnRvIHNvbWUgb3V0c2lkZSBncm91cFxuICAgIChpc0ZvY3VzZWQgfHwgaXNIaW50aW5nT3RoZXJHcm91cCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBib3VuZHMgPSB0aGlzLmVkaXRvci5nZXRTaGFwZUdlb21ldHJ5KHNoYXBlKS5ib3VuZHM7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goU1ZHQ29udGFpbmVyLCB7IGlkOiBzaGFwZS5pZCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goRGFzaGVkT3V0bGluZUJveCwgeyBjbGFzc05hbWU6IFwidGwtZ3JvdXBcIiwgYm91bmRzIH0pIH0pO1xuICB9XG4gIGluZGljYXRvcihzaGFwZSkge1xuICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZWRpdG9yLmdldFNoYXBlR2VvbWV0cnkoc2hhcGUpLmJvdW5kcztcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChEYXNoZWRPdXRsaW5lQm94LCB7IGNsYXNzTmFtZTogXCJcIiwgYm91bmRzIH0pO1xuICB9XG4gIG9uQ2hpbGRyZW5DaGFuZ2UgPSAoZ3JvdXApID0+IHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuZWRpdG9yLmdldFNvcnRlZENoaWxkSWRzRm9yUGFyZW50KGdyb3VwLmlkKTtcbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAodGhpcy5lZGl0b3IuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLmZvY3VzZWRHcm91cElkID09PSBncm91cC5pZCkge1xuICAgICAgICB0aGlzLmVkaXRvci5wb3BGb2N1c2VkR3JvdXBJZCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5lZGl0b3IuZGVsZXRlU2hhcGVzKFtncm91cC5pZF0pO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAodGhpcy5lZGl0b3IuZ2V0Q3VycmVudFBhZ2VTdGF0ZSgpLmZvY3VzZWRHcm91cElkID09PSBncm91cC5pZCkge1xuICAgICAgICB0aGlzLmVkaXRvci5wb3BGb2N1c2VkR3JvdXBJZCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5lZGl0b3IucmVwYXJlbnRTaGFwZXMoY2hpbGRyZW4sIGdyb3VwLnBhcmVudElkKTtcbiAgICAgIHRoaXMuZWRpdG9yLmRlbGV0ZVNoYXBlcyhbZ3JvdXAuaWRdKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59XG5leHBvcnQge1xuICBHcm91cFNoYXBlVXRpbFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdyb3VwU2hhcGVVdGlsLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/group/GroupShapeUtil.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/getPerfectDashProps.mjs":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/getPerfectDashProps.mjs ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getPerfectDashProps: () => (/* binding */ getPerfectDashProps)\n/* harmony export */ });\nfunction getPerfectDashProps(totalLength, strokeWidth, opts = {}) {\n  const {\n    closed = false,\n    snap = 1,\n    start = \"outset\",\n    end = \"outset\",\n    lengthRatio = 2,\n    style = \"dashed\"\n  } = opts;\n  let dashLength = 0;\n  let dashCount = 0;\n  let ratio = 1;\n  let gapLength = 0;\n  let strokeDashoffset = 0;\n  switch (style) {\n    case \"dashed\": {\n      ratio = 1;\n      dashLength = Math.min(strokeWidth * lengthRatio, totalLength / 4);\n      break;\n    }\n    case \"dotted\": {\n      ratio = 100;\n      dashLength = strokeWidth / ratio;\n      break;\n    }\n    default: {\n      return {\n        strokeDasharray: \"none\",\n        strokeDashoffset: \"none\"\n      };\n    }\n  }\n  if (!closed) {\n    if (start === \"outset\") {\n      totalLength += dashLength / 2;\n      strokeDashoffset += dashLength / 2;\n    } else if (start === \"skip\") {\n      totalLength -= dashLength;\n      strokeDashoffset -= dashLength;\n    }\n    if (end === \"outset\") {\n      totalLength += dashLength / 2;\n    } else if (end === \"skip\") {\n      totalLength -= dashLength;\n    }\n  }\n  dashCount = Math.floor(totalLength / dashLength / (2 * ratio));\n  dashCount -= dashCount % snap;\n  if (dashCount < 3 && style === \"dashed\") {\n    if (totalLength / strokeWidth < 5) {\n      dashLength = totalLength;\n      dashCount = 1;\n      gapLength = 0;\n    } else {\n      dashLength = totalLength * 0.333;\n      gapLength = totalLength * 0.333;\n    }\n  } else {\n    dashCount = Math.max(dashCount, 3);\n    dashLength = totalLength / dashCount / (2 * ratio);\n    if (closed) {\n      strokeDashoffset = dashLength / 2;\n      gapLength = (totalLength - dashCount * dashLength) / dashCount;\n    } else {\n      gapLength = (totalLength - dashCount * dashLength) / Math.max(1, dashCount - 1);\n    }\n  }\n  return {\n    strokeDasharray: [dashLength, gapLength].join(\" \"),\n    strokeDashoffset: strokeDashoffset.toString()\n  };\n}\n\n//# sourceMappingURL=getPerfectDashProps.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvc2hhcmVkL2dldFBlcmZlY3REYXNoUHJvcHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxnRUFBZ0U7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvc2hhcmVkL2dldFBlcmZlY3REYXNoUHJvcHMubWpzPzQ2NDIiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZ2V0UGVyZmVjdERhc2hQcm9wcyh0b3RhbExlbmd0aCwgc3Ryb2tlV2lkdGgsIG9wdHMgPSB7fSkge1xuICBjb25zdCB7XG4gICAgY2xvc2VkID0gZmFsc2UsXG4gICAgc25hcCA9IDEsXG4gICAgc3RhcnQgPSBcIm91dHNldFwiLFxuICAgIGVuZCA9IFwib3V0c2V0XCIsXG4gICAgbGVuZ3RoUmF0aW8gPSAyLFxuICAgIHN0eWxlID0gXCJkYXNoZWRcIlxuICB9ID0gb3B0cztcbiAgbGV0IGRhc2hMZW5ndGggPSAwO1xuICBsZXQgZGFzaENvdW50ID0gMDtcbiAgbGV0IHJhdGlvID0gMTtcbiAgbGV0IGdhcExlbmd0aCA9IDA7XG4gIGxldCBzdHJva2VEYXNob2Zmc2V0ID0gMDtcbiAgc3dpdGNoIChzdHlsZSkge1xuICAgIGNhc2UgXCJkYXNoZWRcIjoge1xuICAgICAgcmF0aW8gPSAxO1xuICAgICAgZGFzaExlbmd0aCA9IE1hdGgubWluKHN0cm9rZVdpZHRoICogbGVuZ3RoUmF0aW8sIHRvdGFsTGVuZ3RoIC8gNCk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSBcImRvdHRlZFwiOiB7XG4gICAgICByYXRpbyA9IDEwMDtcbiAgICAgIGRhc2hMZW5ndGggPSBzdHJva2VXaWR0aCAvIHJhdGlvO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0cm9rZURhc2hhcnJheTogXCJub25lXCIsXG4gICAgICAgIHN0cm9rZURhc2hvZmZzZXQ6IFwibm9uZVwiXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBpZiAoIWNsb3NlZCkge1xuICAgIGlmIChzdGFydCA9PT0gXCJvdXRzZXRcIikge1xuICAgICAgdG90YWxMZW5ndGggKz0gZGFzaExlbmd0aCAvIDI7XG4gICAgICBzdHJva2VEYXNob2Zmc2V0ICs9IGRhc2hMZW5ndGggLyAyO1xuICAgIH0gZWxzZSBpZiAoc3RhcnQgPT09IFwic2tpcFwiKSB7XG4gICAgICB0b3RhbExlbmd0aCAtPSBkYXNoTGVuZ3RoO1xuICAgICAgc3Ryb2tlRGFzaG9mZnNldCAtPSBkYXNoTGVuZ3RoO1xuICAgIH1cbiAgICBpZiAoZW5kID09PSBcIm91dHNldFwiKSB7XG4gICAgICB0b3RhbExlbmd0aCArPSBkYXNoTGVuZ3RoIC8gMjtcbiAgICB9IGVsc2UgaWYgKGVuZCA9PT0gXCJza2lwXCIpIHtcbiAgICAgIHRvdGFsTGVuZ3RoIC09IGRhc2hMZW5ndGg7XG4gICAgfVxuICB9XG4gIGRhc2hDb3VudCA9IE1hdGguZmxvb3IodG90YWxMZW5ndGggLyBkYXNoTGVuZ3RoIC8gKDIgKiByYXRpbykpO1xuICBkYXNoQ291bnQgLT0gZGFzaENvdW50ICUgc25hcDtcbiAgaWYgKGRhc2hDb3VudCA8IDMgJiYgc3R5bGUgPT09IFwiZGFzaGVkXCIpIHtcbiAgICBpZiAodG90YWxMZW5ndGggLyBzdHJva2VXaWR0aCA8IDUpIHtcbiAgICAgIGRhc2hMZW5ndGggPSB0b3RhbExlbmd0aDtcbiAgICAgIGRhc2hDb3VudCA9IDE7XG4gICAgICBnYXBMZW5ndGggPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXNoTGVuZ3RoID0gdG90YWxMZW5ndGggKiAwLjMzMztcbiAgICAgIGdhcExlbmd0aCA9IHRvdGFsTGVuZ3RoICogMC4zMzM7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGRhc2hDb3VudCA9IE1hdGgubWF4KGRhc2hDb3VudCwgMyk7XG4gICAgZGFzaExlbmd0aCA9IHRvdGFsTGVuZ3RoIC8gZGFzaENvdW50IC8gKDIgKiByYXRpbyk7XG4gICAgaWYgKGNsb3NlZCkge1xuICAgICAgc3Ryb2tlRGFzaG9mZnNldCA9IGRhc2hMZW5ndGggLyAyO1xuICAgICAgZ2FwTGVuZ3RoID0gKHRvdGFsTGVuZ3RoIC0gZGFzaENvdW50ICogZGFzaExlbmd0aCkgLyBkYXNoQ291bnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdhcExlbmd0aCA9ICh0b3RhbExlbmd0aCAtIGRhc2hDb3VudCAqIGRhc2hMZW5ndGgpIC8gTWF0aC5tYXgoMSwgZGFzaENvdW50IC0gMSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgc3Ryb2tlRGFzaGFycmF5OiBbZGFzaExlbmd0aCwgZ2FwTGVuZ3RoXS5qb2luKFwiIFwiKSxcbiAgICBzdHJva2VEYXNob2Zmc2V0OiBzdHJva2VEYXNob2Zmc2V0LnRvU3RyaW5nKClcbiAgfTtcbn1cbmV4cG9ydCB7XG4gIGdldFBlcmZlY3REYXNoUHJvcHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRQZXJmZWN0RGFzaFByb3BzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/getPerfectDashProps.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/resizeBox.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/resizeBox.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   resizeBox: () => (/* binding */ resizeBox)\n/* harmony export */ });\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\nfunction resizeBox(shape, info, opts = {}) {\n  const { newPoint, handle, scaleX, scaleY } = info;\n  const { minWidth = 1, maxWidth = Infinity, minHeight = 1, maxHeight = Infinity } = opts;\n  let w = shape.props.w * scaleX;\n  let h = shape.props.h * scaleY;\n  const offset = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(0, 0);\n  if (w > 0) {\n    if (w < minWidth) {\n      switch (handle) {\n        case \"top_left\":\n        case \"left\":\n        case \"bottom_left\": {\n          offset.x = w - minWidth;\n          break;\n        }\n        case \"top\":\n        case \"bottom\": {\n          offset.x = (w - minWidth) / 2;\n          break;\n        }\n        default: {\n          offset.x = 0;\n        }\n      }\n      w = minWidth;\n    }\n  } else {\n    offset.x = w;\n    w = -w;\n    if (w < minWidth) {\n      switch (handle) {\n        case \"top_left\":\n        case \"left\":\n        case \"bottom_left\": {\n          offset.x = -w;\n          break;\n        }\n        default: {\n          offset.x = -minWidth;\n        }\n      }\n      w = minWidth;\n    }\n  }\n  if (h > 0) {\n    if (h < minHeight) {\n      switch (handle) {\n        case \"top_left\":\n        case \"top\":\n        case \"top_right\": {\n          offset.y = h - minHeight;\n          break;\n        }\n        case \"right\":\n        case \"left\": {\n          offset.y = (h - minHeight) / 2;\n          break;\n        }\n        default: {\n          offset.y = 0;\n        }\n      }\n      h = minHeight;\n    }\n  } else {\n    offset.y = h;\n    h = -h;\n    if (h < minHeight) {\n      switch (handle) {\n        case \"top_left\":\n        case \"top\":\n        case \"top_right\": {\n          offset.y = -h;\n          break;\n        }\n        default: {\n          offset.y = -minHeight;\n        }\n      }\n      h = minHeight;\n    }\n  }\n  const { x, y } = offset.rot(shape.rotation).add(newPoint);\n  return {\n    x,\n    y,\n    props: {\n      w: Math.min(maxWidth, w),\n      h: Math.min(maxHeight, h)\n    }\n  };\n}\n\n//# sourceMappingURL=resizeBox.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvc2hhcmVkL3Jlc2l6ZUJveC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0Q7QUFDbEQseUNBQXlDO0FBQ3pDLFVBQVUsbUNBQW1DO0FBQzdDLFVBQVUseUVBQXlFO0FBQ25GO0FBQ0E7QUFDQSxxQkFBcUIsb0RBQUc7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxPQUFPO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci9zaGFwZXMvc2hhcmVkL3Jlc2l6ZUJveC5tanM/YTE2OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vLi4vLi4vcHJpbWl0aXZlcy9WZWMubWpzXCI7XG5mdW5jdGlvbiByZXNpemVCb3goc2hhcGUsIGluZm8sIG9wdHMgPSB7fSkge1xuICBjb25zdCB7IG5ld1BvaW50LCBoYW5kbGUsIHNjYWxlWCwgc2NhbGVZIH0gPSBpbmZvO1xuICBjb25zdCB7IG1pbldpZHRoID0gMSwgbWF4V2lkdGggPSBJbmZpbml0eSwgbWluSGVpZ2h0ID0gMSwgbWF4SGVpZ2h0ID0gSW5maW5pdHkgfSA9IG9wdHM7XG4gIGxldCB3ID0gc2hhcGUucHJvcHMudyAqIHNjYWxlWDtcbiAgbGV0IGggPSBzaGFwZS5wcm9wcy5oICogc2NhbGVZO1xuICBjb25zdCBvZmZzZXQgPSBuZXcgVmVjKDAsIDApO1xuICBpZiAodyA+IDApIHtcbiAgICBpZiAodyA8IG1pbldpZHRoKSB7XG4gICAgICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgICAgICBjYXNlIFwidG9wX2xlZnRcIjpcbiAgICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgY2FzZSBcImJvdHRvbV9sZWZ0XCI6IHtcbiAgICAgICAgICBvZmZzZXQueCA9IHcgLSBtaW5XaWR0aDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidG9wXCI6XG4gICAgICAgIGNhc2UgXCJib3R0b21cIjoge1xuICAgICAgICAgIG9mZnNldC54ID0gKHcgLSBtaW5XaWR0aCkgLyAyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBvZmZzZXQueCA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHcgPSBtaW5XaWR0aDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgb2Zmc2V0LnggPSB3O1xuICAgIHcgPSAtdztcbiAgICBpZiAodyA8IG1pbldpZHRoKSB7XG4gICAgICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgICAgICBjYXNlIFwidG9wX2xlZnRcIjpcbiAgICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgY2FzZSBcImJvdHRvbV9sZWZ0XCI6IHtcbiAgICAgICAgICBvZmZzZXQueCA9IC13O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBvZmZzZXQueCA9IC1taW5XaWR0aDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdyA9IG1pbldpZHRoO1xuICAgIH1cbiAgfVxuICBpZiAoaCA+IDApIHtcbiAgICBpZiAoaCA8IG1pbkhlaWdodCkge1xuICAgICAgc3dpdGNoIChoYW5kbGUpIHtcbiAgICAgICAgY2FzZSBcInRvcF9sZWZ0XCI6XG4gICAgICAgIGNhc2UgXCJ0b3BcIjpcbiAgICAgICAgY2FzZSBcInRvcF9yaWdodFwiOiB7XG4gICAgICAgICAgb2Zmc2V0LnkgPSBoIC0gbWluSGVpZ2h0O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgICBjYXNlIFwibGVmdFwiOiB7XG4gICAgICAgICAgb2Zmc2V0LnkgPSAoaCAtIG1pbkhlaWdodCkgLyAyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBvZmZzZXQueSA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGggPSBtaW5IZWlnaHQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG9mZnNldC55ID0gaDtcbiAgICBoID0gLWg7XG4gICAgaWYgKGggPCBtaW5IZWlnaHQpIHtcbiAgICAgIHN3aXRjaCAoaGFuZGxlKSB7XG4gICAgICAgIGNhc2UgXCJ0b3BfbGVmdFwiOlxuICAgICAgICBjYXNlIFwidG9wXCI6XG4gICAgICAgIGNhc2UgXCJ0b3BfcmlnaHRcIjoge1xuICAgICAgICAgIG9mZnNldC55ID0gLWg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgIG9mZnNldC55ID0gLW1pbkhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaCA9IG1pbkhlaWdodDtcbiAgICB9XG4gIH1cbiAgY29uc3QgeyB4LCB5IH0gPSBvZmZzZXQucm90KHNoYXBlLnJvdGF0aW9uKS5hZGQobmV3UG9pbnQpO1xuICByZXR1cm4ge1xuICAgIHgsXG4gICAgeSxcbiAgICBwcm9wczoge1xuICAgICAgdzogTWF0aC5taW4obWF4V2lkdGgsIHcpLFxuICAgICAgaDogTWF0aC5taW4obWF4SGVpZ2h0LCBoKVxuICAgIH1cbiAgfTtcbn1cbmV4cG9ydCB7XG4gIHJlc2l6ZUJveFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc2l6ZUJveC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/shapes/shared/resizeBox.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/BaseBoxShapeTool.mjs":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/BaseBoxShapeTool.mjs ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseBoxShapeTool: () => (/* binding */ BaseBoxShapeTool)\n/* harmony export */ });\n/* harmony import */ var _StateNode_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../StateNode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs\");\n/* harmony import */ var _children_Idle_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./children/Idle.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Idle.mjs\");\n/* harmony import */ var _children_Pointing_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./children/Pointing.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Pointing.mjs\");\n\n\n\nclass BaseBoxShapeTool extends _StateNode_mjs__WEBPACK_IMPORTED_MODULE_0__.StateNode {\n  static id = \"box\";\n  static initial = \"idle\";\n  static children = () => [_children_Idle_mjs__WEBPACK_IMPORTED_MODULE_1__.Idle, _children_Pointing_mjs__WEBPACK_IMPORTED_MODULE_2__.Pointing];\n  onCreate;\n}\n\n//# sourceMappingURL=BaseBoxShapeTool.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90b29scy9CYXNlQm94U2hhcGVUb29sL0Jhc2VCb3hTaGFwZVRvb2wubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNkM7QUFDRjtBQUNRO0FBQ25ELCtCQUErQixxREFBUztBQUN4QztBQUNBO0FBQ0EsMkJBQTJCLG9EQUFJLEVBQUUsNERBQVE7QUFDekM7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90b29scy9CYXNlQm94U2hhcGVUb29sL0Jhc2VCb3hTaGFwZVRvb2wubWpzPzY0YTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RhdGVOb2RlIH0gZnJvbSBcIi4uL1N0YXRlTm9kZS5tanNcIjtcbmltcG9ydCB7IElkbGUgfSBmcm9tIFwiLi9jaGlsZHJlbi9JZGxlLm1qc1wiO1xuaW1wb3J0IHsgUG9pbnRpbmcgfSBmcm9tIFwiLi9jaGlsZHJlbi9Qb2ludGluZy5tanNcIjtcbmNsYXNzIEJhc2VCb3hTaGFwZVRvb2wgZXh0ZW5kcyBTdGF0ZU5vZGUge1xuICBzdGF0aWMgaWQgPSBcImJveFwiO1xuICBzdGF0aWMgaW5pdGlhbCA9IFwiaWRsZVwiO1xuICBzdGF0aWMgY2hpbGRyZW4gPSAoKSA9PiBbSWRsZSwgUG9pbnRpbmddO1xuICBvbkNyZWF0ZTtcbn1cbmV4cG9ydCB7XG4gIEJhc2VCb3hTaGFwZVRvb2xcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CYXNlQm94U2hhcGVUb29sLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/BaseBoxShapeTool.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Idle.mjs":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Idle.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Idle: () => (/* binding */ Idle)\n/* harmony export */ });\n/* harmony import */ var _StateNode_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../StateNode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs\");\n\nclass Idle extends _StateNode_mjs__WEBPACK_IMPORTED_MODULE_0__.StateNode {\n  static id = \"idle\";\n  onPointerDown = (info) => {\n    this.parent.transition(\"pointing\", info);\n  };\n  onEnter = () => {\n    this.editor.setCursor({ type: \"cross\", rotation: 0 });\n  };\n  onCancel = () => {\n    this.editor.setCurrentTool(\"select\");\n  };\n}\n\n//# sourceMappingURL=Idle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90b29scy9CYXNlQm94U2hhcGVUb29sL2NoaWxkcmVuL0lkbGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWdEO0FBQ2hELG1CQUFtQixxREFBUztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRCQUE0QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL3Rvb2xzL0Jhc2VCb3hTaGFwZVRvb2wvY2hpbGRyZW4vSWRsZS5tanM/YTJkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZU5vZGUgfSBmcm9tIFwiLi4vLi4vU3RhdGVOb2RlLm1qc1wiO1xuY2xhc3MgSWRsZSBleHRlbmRzIFN0YXRlTm9kZSB7XG4gIHN0YXRpYyBpZCA9IFwiaWRsZVwiO1xuICBvblBvaW50ZXJEb3duID0gKGluZm8pID0+IHtcbiAgICB0aGlzLnBhcmVudC50cmFuc2l0aW9uKFwicG9pbnRpbmdcIiwgaW5mbyk7XG4gIH07XG4gIG9uRW50ZXIgPSAoKSA9PiB7XG4gICAgdGhpcy5lZGl0b3Iuc2V0Q3Vyc29yKHsgdHlwZTogXCJjcm9zc1wiLCByb3RhdGlvbjogMCB9KTtcbiAgfTtcbiAgb25DYW5jZWwgPSAoKSA9PiB7XG4gICAgdGhpcy5lZGl0b3Iuc2V0Q3VycmVudFRvb2woXCJzZWxlY3RcIik7XG4gIH07XG59XG5leHBvcnQge1xuICBJZGxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SWRsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Idle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Pointing.mjs":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Pointing.mjs ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Pointing: () => (/* binding */ Pointing)\n/* harmony export */ });\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _StateNode_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../StateNode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs\");\n\n\n\nclass Pointing extends _StateNode_mjs__WEBPACK_IMPORTED_MODULE_2__.StateNode {\n  static id = \"pointing\";\n  markId = \"\";\n  wasFocusedOnEnter = false;\n  onEnter = () => {\n    this.wasFocusedOnEnter = !this.editor.getIsMenuOpen();\n  };\n  onPointerMove = (info) => {\n    if (this.editor.inputs.isDragging) {\n      const { originPagePoint } = this.editor.inputs;\n      const shapeType = this.parent.shapeType;\n      const id = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.createShapeId)();\n      this.markId = `creating:${id}`;\n      this.editor.mark(this.markId);\n      this.editor.createShapes([\n        {\n          id,\n          type: shapeType,\n          x: originPagePoint.x,\n          y: originPagePoint.y,\n          props: {\n            w: 1,\n            h: 1\n          }\n        }\n      ]).select(id);\n      this.editor.setCurrentTool(\"select.resizing\", {\n        ...info,\n        target: \"selection\",\n        handle: \"bottom_right\",\n        isCreating: true,\n        creationCursorOffset: { x: 1, y: 1 },\n        onInteractionEnd: this.parent.id,\n        onCreate: this.parent.onCreate\n      });\n    }\n  };\n  onPointerUp = () => {\n    this.complete();\n  };\n  onCancel = () => {\n    this.cancel();\n  };\n  onComplete = () => {\n    this.complete();\n  };\n  onInterrupt = () => {\n    this.cancel();\n  };\n  complete() {\n    const { originPagePoint } = this.editor.inputs;\n    if (!this.wasFocusedOnEnter) {\n      return;\n    }\n    this.editor.mark(this.markId);\n    const shapeType = this.parent.shapeType;\n    const id = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.createShapeId)();\n    this.editor.mark(this.markId);\n    this.editor.createShapes([\n      {\n        id,\n        type: shapeType,\n        x: originPagePoint.x,\n        y: originPagePoint.y\n      }\n    ]);\n    const shape = this.editor.getShape(id);\n    const { w, h } = this.editor.getShapeUtil(shape).getDefaultProps();\n    const delta = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w / 2, h / 2);\n    const parentTransform = this.editor.getShapeParentTransform(shape);\n    if (parentTransform)\n      delta.rot(-parentTransform.rotation());\n    this.editor.updateShapes([\n      {\n        id,\n        type: shapeType,\n        x: shape.x - delta.x,\n        y: shape.y - delta.y\n      }\n    ]);\n    this.editor.setSelectedShapes([id]);\n    if (this.editor.getInstanceState().isToolLocked) {\n      this.parent.transition(\"idle\");\n    } else {\n      this.editor.setCurrentTool(\"select.idle\");\n    }\n  }\n  cancel() {\n    this.parent.transition(\"idle\");\n  }\n}\n\n//# sourceMappingURL=Pointing.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90b29scy9CYXNlQm94U2hhcGVUb29sL2NoaWxkcmVuL1BvaW50aW5nLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlEO0FBQ0k7QUFDTDtBQUNoRCx1QkFBdUIscURBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsa0JBQWtCO0FBQ2hDO0FBQ0EsaUJBQWlCLCtEQUFhO0FBQzlCLGdDQUFnQyxHQUFHO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxZQUFZO0FBQzVDO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsK0RBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIsc0JBQXNCLG9EQUFHO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9lZGl0b3IvdG9vbHMvQmFzZUJveFNoYXBlVG9vbC9jaGlsZHJlbi9Qb2ludGluZy5tanM/NTA2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTaGFwZUlkIH0gZnJvbSBcIkB0bGRyYXcvdGxzY2hlbWFcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi8uLi8uLi8uLi9wcmltaXRpdmVzL1ZlYy5tanNcIjtcbmltcG9ydCB7IFN0YXRlTm9kZSB9IGZyb20gXCIuLi8uLi9TdGF0ZU5vZGUubWpzXCI7XG5jbGFzcyBQb2ludGluZyBleHRlbmRzIFN0YXRlTm9kZSB7XG4gIHN0YXRpYyBpZCA9IFwicG9pbnRpbmdcIjtcbiAgbWFya0lkID0gXCJcIjtcbiAgd2FzRm9jdXNlZE9uRW50ZXIgPSBmYWxzZTtcbiAgb25FbnRlciA9ICgpID0+IHtcbiAgICB0aGlzLndhc0ZvY3VzZWRPbkVudGVyID0gIXRoaXMuZWRpdG9yLmdldElzTWVudU9wZW4oKTtcbiAgfTtcbiAgb25Qb2ludGVyTW92ZSA9IChpbmZvKSA9PiB7XG4gICAgaWYgKHRoaXMuZWRpdG9yLmlucHV0cy5pc0RyYWdnaW5nKSB7XG4gICAgICBjb25zdCB7IG9yaWdpblBhZ2VQb2ludCB9ID0gdGhpcy5lZGl0b3IuaW5wdXRzO1xuICAgICAgY29uc3Qgc2hhcGVUeXBlID0gdGhpcy5wYXJlbnQuc2hhcGVUeXBlO1xuICAgICAgY29uc3QgaWQgPSBjcmVhdGVTaGFwZUlkKCk7XG4gICAgICB0aGlzLm1hcmtJZCA9IGBjcmVhdGluZzoke2lkfWA7XG4gICAgICB0aGlzLmVkaXRvci5tYXJrKHRoaXMubWFya0lkKTtcbiAgICAgIHRoaXMuZWRpdG9yLmNyZWF0ZVNoYXBlcyhbXG4gICAgICAgIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICB0eXBlOiBzaGFwZVR5cGUsXG4gICAgICAgICAgeDogb3JpZ2luUGFnZVBvaW50LngsXG4gICAgICAgICAgeTogb3JpZ2luUGFnZVBvaW50LnksXG4gICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgIHc6IDEsXG4gICAgICAgICAgICBoOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdKS5zZWxlY3QoaWQpO1xuICAgICAgdGhpcy5lZGl0b3Iuc2V0Q3VycmVudFRvb2woXCJzZWxlY3QucmVzaXppbmdcIiwge1xuICAgICAgICAuLi5pbmZvLFxuICAgICAgICB0YXJnZXQ6IFwic2VsZWN0aW9uXCIsXG4gICAgICAgIGhhbmRsZTogXCJib3R0b21fcmlnaHRcIixcbiAgICAgICAgaXNDcmVhdGluZzogdHJ1ZSxcbiAgICAgICAgY3JlYXRpb25DdXJzb3JPZmZzZXQ6IHsgeDogMSwgeTogMSB9LFxuICAgICAgICBvbkludGVyYWN0aW9uRW5kOiB0aGlzLnBhcmVudC5pZCxcbiAgICAgICAgb25DcmVhdGU6IHRoaXMucGFyZW50Lm9uQ3JlYXRlXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIG9uUG9pbnRlclVwID0gKCkgPT4ge1xuICAgIHRoaXMuY29tcGxldGUoKTtcbiAgfTtcbiAgb25DYW5jZWwgPSAoKSA9PiB7XG4gICAgdGhpcy5jYW5jZWwoKTtcbiAgfTtcbiAgb25Db21wbGV0ZSA9ICgpID0+IHtcbiAgICB0aGlzLmNvbXBsZXRlKCk7XG4gIH07XG4gIG9uSW50ZXJydXB0ID0gKCkgPT4ge1xuICAgIHRoaXMuY2FuY2VsKCk7XG4gIH07XG4gIGNvbXBsZXRlKCkge1xuICAgIGNvbnN0IHsgb3JpZ2luUGFnZVBvaW50IH0gPSB0aGlzLmVkaXRvci5pbnB1dHM7XG4gICAgaWYgKCF0aGlzLndhc0ZvY3VzZWRPbkVudGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZWRpdG9yLm1hcmsodGhpcy5tYXJrSWQpO1xuICAgIGNvbnN0IHNoYXBlVHlwZSA9IHRoaXMucGFyZW50LnNoYXBlVHlwZTtcbiAgICBjb25zdCBpZCA9IGNyZWF0ZVNoYXBlSWQoKTtcbiAgICB0aGlzLmVkaXRvci5tYXJrKHRoaXMubWFya0lkKTtcbiAgICB0aGlzLmVkaXRvci5jcmVhdGVTaGFwZXMoW1xuICAgICAge1xuICAgICAgICBpZCxcbiAgICAgICAgdHlwZTogc2hhcGVUeXBlLFxuICAgICAgICB4OiBvcmlnaW5QYWdlUG9pbnQueCxcbiAgICAgICAgeTogb3JpZ2luUGFnZVBvaW50LnlcbiAgICAgIH1cbiAgICBdKTtcbiAgICBjb25zdCBzaGFwZSA9IHRoaXMuZWRpdG9yLmdldFNoYXBlKGlkKTtcbiAgICBjb25zdCB7IHcsIGggfSA9IHRoaXMuZWRpdG9yLmdldFNoYXBlVXRpbChzaGFwZSkuZ2V0RGVmYXVsdFByb3BzKCk7XG4gICAgY29uc3QgZGVsdGEgPSBuZXcgVmVjKHcgLyAyLCBoIC8gMik7XG4gICAgY29uc3QgcGFyZW50VHJhbnNmb3JtID0gdGhpcy5lZGl0b3IuZ2V0U2hhcGVQYXJlbnRUcmFuc2Zvcm0oc2hhcGUpO1xuICAgIGlmIChwYXJlbnRUcmFuc2Zvcm0pXG4gICAgICBkZWx0YS5yb3QoLXBhcmVudFRyYW5zZm9ybS5yb3RhdGlvbigpKTtcbiAgICB0aGlzLmVkaXRvci51cGRhdGVTaGFwZXMoW1xuICAgICAge1xuICAgICAgICBpZCxcbiAgICAgICAgdHlwZTogc2hhcGVUeXBlLFxuICAgICAgICB4OiBzaGFwZS54IC0gZGVsdGEueCxcbiAgICAgICAgeTogc2hhcGUueSAtIGRlbHRhLnlcbiAgICAgIH1cbiAgICBdKTtcbiAgICB0aGlzLmVkaXRvci5zZXRTZWxlY3RlZFNoYXBlcyhbaWRdKTtcbiAgICBpZiAodGhpcy5lZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzVG9vbExvY2tlZCkge1xuICAgICAgdGhpcy5wYXJlbnQudHJhbnNpdGlvbihcImlkbGVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWRpdG9yLnNldEN1cnJlbnRUb29sKFwic2VsZWN0LmlkbGVcIik7XG4gICAgfVxuICB9XG4gIGNhbmNlbCgpIHtcbiAgICB0aGlzLnBhcmVudC50cmFuc2l0aW9uKFwiaWRsZVwiKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgUG9pbnRpbmdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2ludGluZy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/BaseBoxShapeTool/children/Pointing.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/RootState.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/RootState.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootState: () => (/* binding */ RootState)\n/* harmony export */ });\n/* harmony import */ var _StateNode_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StateNode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs\");\n\nclass RootState extends _StateNode_mjs__WEBPACK_IMPORTED_MODULE_0__.StateNode {\n  static id = \"root\";\n  static initial = \"\";\n  static children = () => [];\n  onKeyDown = (info) => {\n    switch (info.code) {\n      case \"KeyZ\": {\n        if (!(info.shiftKey || info.ctrlKey)) {\n          const currentTool = this.getCurrent();\n          if (currentTool && currentTool.getCurrent()?.id === \"idle\" && this.children[\"zoom\"]) {\n            this.editor.setCurrentTool(\"zoom\", { ...info, onInteractionEnd: currentTool.id });\n          }\n        }\n        break;\n      }\n    }\n  };\n}\n\n//# sourceMappingURL=RootState.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90b29scy9Sb290U3RhdGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDLHdCQUF3QixxREFBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsMkNBQTJDO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL3Rvb2xzL1Jvb3RTdGF0ZS5tanM/NDNhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZU5vZGUgfSBmcm9tIFwiLi9TdGF0ZU5vZGUubWpzXCI7XG5jbGFzcyBSb290U3RhdGUgZXh0ZW5kcyBTdGF0ZU5vZGUge1xuICBzdGF0aWMgaWQgPSBcInJvb3RcIjtcbiAgc3RhdGljIGluaXRpYWwgPSBcIlwiO1xuICBzdGF0aWMgY2hpbGRyZW4gPSAoKSA9PiBbXTtcbiAgb25LZXlEb3duID0gKGluZm8pID0+IHtcbiAgICBzd2l0Y2ggKGluZm8uY29kZSkge1xuICAgICAgY2FzZSBcIktleVpcIjoge1xuICAgICAgICBpZiAoIShpbmZvLnNoaWZ0S2V5IHx8IGluZm8uY3RybEtleSkpIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50VG9vbCA9IHRoaXMuZ2V0Q3VycmVudCgpO1xuICAgICAgICAgIGlmIChjdXJyZW50VG9vbCAmJiBjdXJyZW50VG9vbC5nZXRDdXJyZW50KCk/LmlkID09PSBcImlkbGVcIiAmJiB0aGlzLmNoaWxkcmVuW1wiem9vbVwiXSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc2V0Q3VycmVudFRvb2woXCJ6b29tXCIsIHsgLi4uaW5mbywgb25JbnRlcmFjdGlvbkVuZDogY3VycmVudFRvb2wuaWQgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbmV4cG9ydCB7XG4gIFJvb3RTdGF0ZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJvb3RTdGF0ZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/RootState.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StateNode: () => (/* binding */ StateNode)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/debug-flags.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\");\n/* harmony import */ var _types_event_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../types/event-types.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/event-types.mjs\");\n\n\n\n\nconst STATE_NODES_TO_MEASURE = [\n  \"brushing\",\n  \"cropping\",\n  \"dragging\",\n  \"dragging_handle\",\n  \"drawing\",\n  \"erasing\",\n  \"lasering\",\n  \"resizing\",\n  \"rotating\",\n  \"scribble_brushing\",\n  \"translating\"\n];\nclass StateNode {\n  constructor(editor, parent) {\n    this.editor = editor;\n    const { id, children, initial } = this.constructor;\n    this.id = id;\n    this._isActive = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"toolIsActive\" + this.id, false);\n    this._current = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"toolState\" + this.id, void 0);\n    this._path = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"toolPath\" + this.id, () => {\n      const current = this.getCurrent();\n      return this.id + (current ? `.${current.getPath()}` : \"\");\n    });\n    this.parent = parent ?? {};\n    if (this.parent) {\n      if (children && initial) {\n        this.type = \"branch\";\n        this.initial = initial;\n        this.children = Object.fromEntries(\n          children().map((Ctor) => [Ctor.id, new Ctor(this.editor, this)])\n        );\n        this._current.set(this.children[this.initial]);\n      } else {\n        this.type = \"leaf\";\n      }\n    } else {\n      this.type = \"root\";\n      if (children && initial) {\n        this.initial = initial;\n        this.children = Object.fromEntries(\n          children().map((Ctor) => [Ctor.id, new Ctor(this.editor, this)])\n        );\n        this._current.set(this.children[this.initial]);\n      }\n    }\n    this.performanceTracker = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.PerformanceTracker();\n  }\n  performanceTracker;\n  static id;\n  static initial;\n  static children;\n  id;\n  type;\n  shapeType;\n  initial;\n  children;\n  parent;\n  /**\n   * This node's path of active state nodes\n   *\n   * @public\n   */\n  getPath() {\n    return this._path.get();\n  }\n  _path;\n  /**\n   * This node's current active child node, if any.\n   *\n   * @public\n   */\n  getCurrent() {\n    return this._current.get();\n  }\n  _current;\n  /**\n   * Whether this node is active.\n   *\n   * @public\n   */\n  getIsActive() {\n    return this._isActive.get();\n  }\n  _isActive;\n  /**\n   * Transition to a new active child state node.\n   *\n   * @example\n   * ```ts\n   * parentState.transition('childStateA')\n   * parentState.transition('childStateB', { myData: 4 })\n   *```\n   *\n   * @param id - The id of the child state node to transition to.\n   * @param info - Any data to pass to the `onEnter` and `onExit` handlers.\n   *\n   * @public\n   */\n  transition = (id, info = {}) => {\n    const path = id.split(\".\");\n    let currState = this;\n    for (let i = 0; i < path.length; i++) {\n      const id2 = path[i];\n      const prevChildState = currState.getCurrent();\n      const nextChildState = currState.children?.[id2];\n      if (!nextChildState) {\n        throw Error(`${currState.id} - no child state exists with the id ${id2}.`);\n      }\n      if (prevChildState?.id !== nextChildState.id) {\n        prevChildState?.exit(info, id2);\n        currState._current.set(nextChildState);\n        nextChildState.enter(info, prevChildState?.id || \"initial\");\n        if (!nextChildState.getIsActive())\n          break;\n      }\n      currState = nextChildState;\n    }\n    return this;\n  };\n  handleEvent = (info) => {\n    const cbName = _types_event_types_mjs__WEBPACK_IMPORTED_MODULE_3__.EVENT_NAME_MAP[info.name];\n    const currentActiveChild = this._current.__unsafe__getWithoutCapture();\n    this[cbName]?.(info);\n    if (this._isActive.__unsafe__getWithoutCapture() && currentActiveChild && currentActiveChild === this._current.__unsafe__getWithoutCapture()) {\n      currentActiveChild.handleEvent(info);\n    }\n  };\n  // todo: move this logic into transition\n  enter = (info, from) => {\n    if (_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_2__.debugFlags.measurePerformance.get() && STATE_NODES_TO_MEASURE.includes(this.id)) {\n      this.performanceTracker.start(this.id);\n    }\n    this._isActive.set(true);\n    this.onEnter?.(info, from);\n    if (this.children && this.initial && this.getIsActive()) {\n      const initial = this.children[this.initial];\n      this._current.set(initial);\n      initial.enter(info, from);\n    }\n  };\n  // todo: move this logic into transition\n  exit = (info, from) => {\n    if (_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_2__.debugFlags.measurePerformance.get() && this.performanceTracker.isStarted()) {\n      this.performanceTracker.stop();\n    }\n    this._isActive.set(false);\n    this.onExit?.(info, from);\n    if (!this.getIsActive()) {\n      this.getCurrent()?.exit(info, from);\n    }\n  };\n  /**\n   * This is a hack / escape hatch that will tell the editor to\n   * report a different state as active (in `getCurrentToolId()`) when\n   * this state is active. This is usually used when a tool transitions\n   * to a child of a different state for a certain interaction and then\n   * returns to the original tool when that interaction completes; and\n   * where we would want to show the original tool as active in the UI.\n   *\n   * @public\n   */\n  _currentToolIdMask = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"curent tool id mask\", void 0);\n  getCurrentToolIdMask() {\n    return this._currentToolIdMask.get();\n  }\n  setCurrentToolIdMask(id) {\n    this._currentToolIdMask.set(id);\n  }\n  onWheel;\n  onPointerDown;\n  onPointerMove;\n  onLongPress;\n  onPointerUp;\n  onDoubleClick;\n  onTripleClick;\n  onQuadrupleClick;\n  onRightClick;\n  onMiddleClick;\n  onKeyDown;\n  onKeyUp;\n  onKeyRepeat;\n  onCancel;\n  onComplete;\n  onInterrupt;\n  onTick;\n  onEnter;\n  onExit;\n}\n\n//# sourceMappingURL=StateNode.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90b29scy9TdGF0ZU5vZGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQStDO0FBQ0k7QUFDTTtBQUd2QjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDO0FBQ0EscUJBQXFCLG1EQUFJO0FBQ3pCLG9CQUFvQixtREFBSTtBQUN4QixpQkFBaUIsdURBQVE7QUFDekI7QUFDQSxzQ0FBc0Msa0JBQWtCO0FBQ3hELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsNkRBQWtCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsV0FBVztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixjQUFjLHNDQUFzQyxJQUFJO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtFQUFjO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFVO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQVU7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsbURBQUk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90b29scy9TdGF0ZU5vZGUubWpzPzU4N2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXRvbSwgY29tcHV0ZWQgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgUGVyZm9ybWFuY2VUcmFja2VyIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IGRlYnVnRmxhZ3MgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZGVidWctZmxhZ3MubWpzXCI7XG5pbXBvcnQge1xuICBFVkVOVF9OQU1FX01BUFxufSBmcm9tIFwiLi4vdHlwZXMvZXZlbnQtdHlwZXMubWpzXCI7XG5jb25zdCBTVEFURV9OT0RFU19UT19NRUFTVVJFID0gW1xuICBcImJydXNoaW5nXCIsXG4gIFwiY3JvcHBpbmdcIixcbiAgXCJkcmFnZ2luZ1wiLFxuICBcImRyYWdnaW5nX2hhbmRsZVwiLFxuICBcImRyYXdpbmdcIixcbiAgXCJlcmFzaW5nXCIsXG4gIFwibGFzZXJpbmdcIixcbiAgXCJyZXNpemluZ1wiLFxuICBcInJvdGF0aW5nXCIsXG4gIFwic2NyaWJibGVfYnJ1c2hpbmdcIixcbiAgXCJ0cmFuc2xhdGluZ1wiXG5dO1xuY2xhc3MgU3RhdGVOb2RlIHtcbiAgY29uc3RydWN0b3IoZWRpdG9yLCBwYXJlbnQpIHtcbiAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcbiAgICBjb25zdCB7IGlkLCBjaGlsZHJlbiwgaW5pdGlhbCB9ID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5faXNBY3RpdmUgPSBhdG9tKFwidG9vbElzQWN0aXZlXCIgKyB0aGlzLmlkLCBmYWxzZSk7XG4gICAgdGhpcy5fY3VycmVudCA9IGF0b20oXCJ0b29sU3RhdGVcIiArIHRoaXMuaWQsIHZvaWQgMCk7XG4gICAgdGhpcy5fcGF0aCA9IGNvbXB1dGVkKFwidG9vbFBhdGhcIiArIHRoaXMuaWQsICgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmdldEN1cnJlbnQoKTtcbiAgICAgIHJldHVybiB0aGlzLmlkICsgKGN1cnJlbnQgPyBgLiR7Y3VycmVudC5nZXRQYXRoKCl9YCA6IFwiXCIpO1xuICAgIH0pO1xuICAgIHRoaXMucGFyZW50ID0gcGFyZW50ID8/IHt9O1xuICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgaWYgKGNoaWxkcmVuICYmIGluaXRpYWwpIHtcbiAgICAgICAgdGhpcy50eXBlID0gXCJicmFuY2hcIjtcbiAgICAgICAgdGhpcy5pbml0aWFsID0gaW5pdGlhbDtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgICBjaGlsZHJlbigpLm1hcCgoQ3RvcikgPT4gW0N0b3IuaWQsIG5ldyBDdG9yKHRoaXMuZWRpdG9yLCB0aGlzKV0pXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX2N1cnJlbnQuc2V0KHRoaXMuY2hpbGRyZW5bdGhpcy5pbml0aWFsXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnR5cGUgPSBcImxlYWZcIjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50eXBlID0gXCJyb290XCI7XG4gICAgICBpZiAoY2hpbGRyZW4gJiYgaW5pdGlhbCkge1xuICAgICAgICB0aGlzLmluaXRpYWwgPSBpbml0aWFsO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICAgIGNoaWxkcmVuKCkubWFwKChDdG9yKSA9PiBbQ3Rvci5pZCwgbmV3IEN0b3IodGhpcy5lZGl0b3IsIHRoaXMpXSlcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fY3VycmVudC5zZXQodGhpcy5jaGlsZHJlblt0aGlzLmluaXRpYWxdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5wZXJmb3JtYW5jZVRyYWNrZXIgPSBuZXcgUGVyZm9ybWFuY2VUcmFja2VyKCk7XG4gIH1cbiAgcGVyZm9ybWFuY2VUcmFja2VyO1xuICBzdGF0aWMgaWQ7XG4gIHN0YXRpYyBpbml0aWFsO1xuICBzdGF0aWMgY2hpbGRyZW47XG4gIGlkO1xuICB0eXBlO1xuICBzaGFwZVR5cGU7XG4gIGluaXRpYWw7XG4gIGNoaWxkcmVuO1xuICBwYXJlbnQ7XG4gIC8qKlxuICAgKiBUaGlzIG5vZGUncyBwYXRoIG9mIGFjdGl2ZSBzdGF0ZSBub2Rlc1xuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRQYXRoKCkge1xuICAgIHJldHVybiB0aGlzLl9wYXRoLmdldCgpO1xuICB9XG4gIF9wYXRoO1xuICAvKipcbiAgICogVGhpcyBub2RlJ3MgY3VycmVudCBhY3RpdmUgY2hpbGQgbm9kZSwgaWYgYW55LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRDdXJyZW50KCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50LmdldCgpO1xuICB9XG4gIF9jdXJyZW50O1xuICAvKipcbiAgICogV2hldGhlciB0aGlzIG5vZGUgaXMgYWN0aXZlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRJc0FjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNBY3RpdmUuZ2V0KCk7XG4gIH1cbiAgX2lzQWN0aXZlO1xuICAvKipcbiAgICogVHJhbnNpdGlvbiB0byBhIG5ldyBhY3RpdmUgY2hpbGQgc3RhdGUgbm9kZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogcGFyZW50U3RhdGUudHJhbnNpdGlvbignY2hpbGRTdGF0ZUEnKVxuICAgKiBwYXJlbnRTdGF0ZS50cmFuc2l0aW9uKCdjaGlsZFN0YXRlQicsIHsgbXlEYXRhOiA0IH0pXG4gICAqYGBgXG4gICAqXG4gICAqIEBwYXJhbSBpZCAtIFRoZSBpZCBvZiB0aGUgY2hpbGQgc3RhdGUgbm9kZSB0byB0cmFuc2l0aW9uIHRvLlxuICAgKiBAcGFyYW0gaW5mbyAtIEFueSBkYXRhIHRvIHBhc3MgdG8gdGhlIGBvbkVudGVyYCBhbmQgYG9uRXhpdGAgaGFuZGxlcnMuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHRyYW5zaXRpb24gPSAoaWQsIGluZm8gPSB7fSkgPT4ge1xuICAgIGNvbnN0IHBhdGggPSBpZC5zcGxpdChcIi5cIik7XG4gICAgbGV0IGN1cnJTdGF0ZSA9IHRoaXM7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpZDIgPSBwYXRoW2ldO1xuICAgICAgY29uc3QgcHJldkNoaWxkU3RhdGUgPSBjdXJyU3RhdGUuZ2V0Q3VycmVudCgpO1xuICAgICAgY29uc3QgbmV4dENoaWxkU3RhdGUgPSBjdXJyU3RhdGUuY2hpbGRyZW4/LltpZDJdO1xuICAgICAgaWYgKCFuZXh0Q2hpbGRTdGF0ZSkge1xuICAgICAgICB0aHJvdyBFcnJvcihgJHtjdXJyU3RhdGUuaWR9IC0gbm8gY2hpbGQgc3RhdGUgZXhpc3RzIHdpdGggdGhlIGlkICR7aWQyfS5gKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcmV2Q2hpbGRTdGF0ZT8uaWQgIT09IG5leHRDaGlsZFN0YXRlLmlkKSB7XG4gICAgICAgIHByZXZDaGlsZFN0YXRlPy5leGl0KGluZm8sIGlkMik7XG4gICAgICAgIGN1cnJTdGF0ZS5fY3VycmVudC5zZXQobmV4dENoaWxkU3RhdGUpO1xuICAgICAgICBuZXh0Q2hpbGRTdGF0ZS5lbnRlcihpbmZvLCBwcmV2Q2hpbGRTdGF0ZT8uaWQgfHwgXCJpbml0aWFsXCIpO1xuICAgICAgICBpZiAoIW5leHRDaGlsZFN0YXRlLmdldElzQWN0aXZlKCkpXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjdXJyU3RhdGUgPSBuZXh0Q2hpbGRTdGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIGhhbmRsZUV2ZW50ID0gKGluZm8pID0+IHtcbiAgICBjb25zdCBjYk5hbWUgPSBFVkVOVF9OQU1FX01BUFtpbmZvLm5hbWVdO1xuICAgIGNvbnN0IGN1cnJlbnRBY3RpdmVDaGlsZCA9IHRoaXMuX2N1cnJlbnQuX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKCk7XG4gICAgdGhpc1tjYk5hbWVdPy4oaW5mbyk7XG4gICAgaWYgKHRoaXMuX2lzQWN0aXZlLl9fdW5zYWZlX19nZXRXaXRob3V0Q2FwdHVyZSgpICYmIGN1cnJlbnRBY3RpdmVDaGlsZCAmJiBjdXJyZW50QWN0aXZlQ2hpbGQgPT09IHRoaXMuX2N1cnJlbnQuX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKCkpIHtcbiAgICAgIGN1cnJlbnRBY3RpdmVDaGlsZC5oYW5kbGVFdmVudChpbmZvKTtcbiAgICB9XG4gIH07XG4gIC8vIHRvZG86IG1vdmUgdGhpcyBsb2dpYyBpbnRvIHRyYW5zaXRpb25cbiAgZW50ZXIgPSAoaW5mbywgZnJvbSkgPT4ge1xuICAgIGlmIChkZWJ1Z0ZsYWdzLm1lYXN1cmVQZXJmb3JtYW5jZS5nZXQoKSAmJiBTVEFURV9OT0RFU19UT19NRUFTVVJFLmluY2x1ZGVzKHRoaXMuaWQpKSB7XG4gICAgICB0aGlzLnBlcmZvcm1hbmNlVHJhY2tlci5zdGFydCh0aGlzLmlkKTtcbiAgICB9XG4gICAgdGhpcy5faXNBY3RpdmUuc2V0KHRydWUpO1xuICAgIHRoaXMub25FbnRlcj8uKGluZm8sIGZyb20pO1xuICAgIGlmICh0aGlzLmNoaWxkcmVuICYmIHRoaXMuaW5pdGlhbCAmJiB0aGlzLmdldElzQWN0aXZlKCkpIHtcbiAgICAgIGNvbnN0IGluaXRpYWwgPSB0aGlzLmNoaWxkcmVuW3RoaXMuaW5pdGlhbF07XG4gICAgICB0aGlzLl9jdXJyZW50LnNldChpbml0aWFsKTtcbiAgICAgIGluaXRpYWwuZW50ZXIoaW5mbywgZnJvbSk7XG4gICAgfVxuICB9O1xuICAvLyB0b2RvOiBtb3ZlIHRoaXMgbG9naWMgaW50byB0cmFuc2l0aW9uXG4gIGV4aXQgPSAoaW5mbywgZnJvbSkgPT4ge1xuICAgIGlmIChkZWJ1Z0ZsYWdzLm1lYXN1cmVQZXJmb3JtYW5jZS5nZXQoKSAmJiB0aGlzLnBlcmZvcm1hbmNlVHJhY2tlci5pc1N0YXJ0ZWQoKSkge1xuICAgICAgdGhpcy5wZXJmb3JtYW5jZVRyYWNrZXIuc3RvcCgpO1xuICAgIH1cbiAgICB0aGlzLl9pc0FjdGl2ZS5zZXQoZmFsc2UpO1xuICAgIHRoaXMub25FeGl0Py4oaW5mbywgZnJvbSk7XG4gICAgaWYgKCF0aGlzLmdldElzQWN0aXZlKCkpIHtcbiAgICAgIHRoaXMuZ2V0Q3VycmVudCgpPy5leGl0KGluZm8sIGZyb20pO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFRoaXMgaXMgYSBoYWNrIC8gZXNjYXBlIGhhdGNoIHRoYXQgd2lsbCB0ZWxsIHRoZSBlZGl0b3IgdG9cbiAgICogcmVwb3J0IGEgZGlmZmVyZW50IHN0YXRlIGFzIGFjdGl2ZSAoaW4gYGdldEN1cnJlbnRUb29sSWQoKWApIHdoZW5cbiAgICogdGhpcyBzdGF0ZSBpcyBhY3RpdmUuIFRoaXMgaXMgdXN1YWxseSB1c2VkIHdoZW4gYSB0b29sIHRyYW5zaXRpb25zXG4gICAqIHRvIGEgY2hpbGQgb2YgYSBkaWZmZXJlbnQgc3RhdGUgZm9yIGEgY2VydGFpbiBpbnRlcmFjdGlvbiBhbmQgdGhlblxuICAgKiByZXR1cm5zIHRvIHRoZSBvcmlnaW5hbCB0b29sIHdoZW4gdGhhdCBpbnRlcmFjdGlvbiBjb21wbGV0ZXM7IGFuZFxuICAgKiB3aGVyZSB3ZSB3b3VsZCB3YW50IHRvIHNob3cgdGhlIG9yaWdpbmFsIHRvb2wgYXMgYWN0aXZlIGluIHRoZSBVSS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgX2N1cnJlbnRUb29sSWRNYXNrID0gYXRvbShcImN1cmVudCB0b29sIGlkIG1hc2tcIiwgdm9pZCAwKTtcbiAgZ2V0Q3VycmVudFRvb2xJZE1hc2soKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRUb29sSWRNYXNrLmdldCgpO1xuICB9XG4gIHNldEN1cnJlbnRUb29sSWRNYXNrKGlkKSB7XG4gICAgdGhpcy5fY3VycmVudFRvb2xJZE1hc2suc2V0KGlkKTtcbiAgfVxuICBvbldoZWVsO1xuICBvblBvaW50ZXJEb3duO1xuICBvblBvaW50ZXJNb3ZlO1xuICBvbkxvbmdQcmVzcztcbiAgb25Qb2ludGVyVXA7XG4gIG9uRG91YmxlQ2xpY2s7XG4gIG9uVHJpcGxlQ2xpY2s7XG4gIG9uUXVhZHJ1cGxlQ2xpY2s7XG4gIG9uUmlnaHRDbGljaztcbiAgb25NaWRkbGVDbGljaztcbiAgb25LZXlEb3duO1xuICBvbktleVVwO1xuICBvbktleVJlcGVhdDtcbiAgb25DYW5jZWw7XG4gIG9uQ29tcGxldGU7XG4gIG9uSW50ZXJydXB0O1xuICBvblRpY2s7XG4gIG9uRW50ZXI7XG4gIG9uRXhpdDtcbn1cbmV4cG9ydCB7XG4gIFN0YXRlTm9kZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0YXRlTm9kZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/tools/StateNode.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/SvgExportContext.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/types/SvgExportContext.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SvgExportContextProvider: () => (/* binding */ SvgExportContextProvider),\n/* harmony export */   useSvgExportContext: () => (/* binding */ useSvgExportContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks/useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\nconst Context = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nfunction SvgExportContextProvider({\n  context,\n  editor,\n  children\n}) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hooks_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.EditorContext.Provider, { value: editor, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Context.Provider, { value: context, children }) });\n}\nfunction useSvgExportContext() {\n  const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(Context);\n  if (!ctx)\n    return null;\n  return { isDarkMode: ctx.isDarkMode };\n}\n\n//# sourceMappingURL=SvgExportContext.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90eXBlcy9TdmdFeHBvcnRDb250ZXh0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3QztBQUNVO0FBQ1E7QUFDMUQsZ0JBQWdCLG9EQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHlCQUF5QixzREFBRyxDQUFDLCtEQUFhLGFBQWEseUNBQXlDLHNEQUFHLHFCQUFxQiwwQkFBMEIsR0FBRztBQUNySjtBQUNBO0FBQ0EsY0FBYyxpREFBVTtBQUN4QjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL3R5cGVzL1N2Z0V4cG9ydENvbnRleHQubWpzPzhjYWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBFZGl0b3JDb250ZXh0IH0gZnJvbSBcIi4uLy4uL2hvb2tzL3VzZUVkaXRvci5tanNcIjtcbmNvbnN0IENvbnRleHQgPSBjcmVhdGVDb250ZXh0KG51bGwpO1xuZnVuY3Rpb24gU3ZnRXhwb3J0Q29udGV4dFByb3ZpZGVyKHtcbiAgY29udGV4dCxcbiAgZWRpdG9yLFxuICBjaGlsZHJlblxufSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChFZGl0b3JDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBlZGl0b3IsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KENvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGNvbnRleHQsIGNoaWxkcmVuIH0pIH0pO1xufVxuZnVuY3Rpb24gdXNlU3ZnRXhwb3J0Q29udGV4dCgpIHtcbiAgY29uc3QgY3R4ID0gdXNlQ29udGV4dChDb250ZXh0KTtcbiAgaWYgKCFjdHgpXG4gICAgcmV0dXJuIG51bGw7XG4gIHJldHVybiB7IGlzRGFya01vZGU6IGN0eC5pc0RhcmtNb2RlIH07XG59XG5leHBvcnQge1xuICBTdmdFeHBvcnRDb250ZXh0UHJvdmlkZXIsXG4gIHVzZVN2Z0V4cG9ydENvbnRleHRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdmdFeHBvcnRDb250ZXh0Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/SvgExportContext.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/event-types.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/editor/types/event-types.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EVENT_NAME_MAP: () => (/* binding */ EVENT_NAME_MAP)\n/* harmony export */ });\nconst EVENT_NAME_MAP = {\n  wheel: \"onWheel\",\n  pointer_down: \"onPointerDown\",\n  pointer_move: \"onPointerMove\",\n  long_press: \"onLongPress\",\n  pointer_up: \"onPointerUp\",\n  right_click: \"onRightClick\",\n  middle_click: \"onMiddleClick\",\n  key_down: \"onKeyDown\",\n  key_up: \"onKeyUp\",\n  key_repeat: \"onKeyRepeat\",\n  cancel: \"onCancel\",\n  complete: \"onComplete\",\n  interrupt: \"onInterrupt\",\n  double_click: \"onDoubleClick\",\n  triple_click: \"onTripleClick\",\n  quadruple_click: \"onQuadrupleClick\",\n  tick: \"onTick\"\n};\n\n//# sourceMappingURL=event-types.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2VkaXRvci90eXBlcy9ldmVudC10eXBlcy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvZWRpdG9yL3R5cGVzL2V2ZW50LXR5cGVzLm1qcz82MDcxIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVWRU5UX05BTUVfTUFQID0ge1xuICB3aGVlbDogXCJvbldoZWVsXCIsXG4gIHBvaW50ZXJfZG93bjogXCJvblBvaW50ZXJEb3duXCIsXG4gIHBvaW50ZXJfbW92ZTogXCJvblBvaW50ZXJNb3ZlXCIsXG4gIGxvbmdfcHJlc3M6IFwib25Mb25nUHJlc3NcIixcbiAgcG9pbnRlcl91cDogXCJvblBvaW50ZXJVcFwiLFxuICByaWdodF9jbGljazogXCJvblJpZ2h0Q2xpY2tcIixcbiAgbWlkZGxlX2NsaWNrOiBcIm9uTWlkZGxlQ2xpY2tcIixcbiAga2V5X2Rvd246IFwib25LZXlEb3duXCIsXG4gIGtleV91cDogXCJvbktleVVwXCIsXG4gIGtleV9yZXBlYXQ6IFwib25LZXlSZXBlYXRcIixcbiAgY2FuY2VsOiBcIm9uQ2FuY2VsXCIsXG4gIGNvbXBsZXRlOiBcIm9uQ29tcGxldGVcIixcbiAgaW50ZXJydXB0OiBcIm9uSW50ZXJydXB0XCIsXG4gIGRvdWJsZV9jbGljazogXCJvbkRvdWJsZUNsaWNrXCIsXG4gIHRyaXBsZV9jbGljazogXCJvblRyaXBsZUNsaWNrXCIsXG4gIHF1YWRydXBsZV9jbGljazogXCJvblF1YWRydXBsZUNsaWNrXCIsXG4gIHRpY2s6IFwib25UaWNrXCJcbn07XG5leHBvcnQge1xuICBFVkVOVF9OQU1FX01BUFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50LXR5cGVzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/event-types.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCanvasEvents.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCanvasEvents.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCanvasEvents: () => (/* binding */ useCanvasEvents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/getPointerInfo.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\n\nfunction useCanvasEvents() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const events = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    function canvasEvents() {\n      let lastX, lastY;\n      function onPointerDown(e) {\n        if (e.isKilled)\n          return;\n        if (e.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.RIGHT_MOUSE_BUTTON) {\n          editor.dispatch({\n            type: \"pointer\",\n            target: \"canvas\",\n            name: \"right_click\",\n            ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n          });\n          return;\n        }\n        if (e.button !== 0 && e.button !== 1 && e.button !== 5)\n          return;\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.setPointerCapture)(e.currentTarget, e);\n        editor.dispatch({\n          type: \"pointer\",\n          target: \"canvas\",\n          name: \"pointer_down\",\n          ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n        });\n      }\n      function onPointerMove(e) {\n        if (e.isKilled)\n          return;\n        if (e.clientX === lastX && e.clientY === lastY)\n          return;\n        lastX = e.clientX;\n        lastY = e.clientY;\n        editor.dispatch({\n          type: \"pointer\",\n          target: \"canvas\",\n          name: \"pointer_move\",\n          ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n        });\n      }\n      function onPointerUp(e) {\n        if (e.isKilled)\n          return;\n        if (e.button !== 0 && e.button !== 1 && e.button !== 2 && e.button !== 5)\n          return;\n        lastX = e.clientX;\n        lastY = e.clientY;\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.releasePointerCapture)(e.currentTarget, e);\n        editor.dispatch({\n          type: \"pointer\",\n          target: \"canvas\",\n          name: \"pointer_up\",\n          ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n        });\n      }\n      function onPointerEnter(e) {\n        if (e.isKilled)\n          return;\n        if (editor.getInstanceState().isPenMode && e.pointerType !== \"pen\")\n          return;\n        const canHover = e.pointerType === \"mouse\" || e.pointerType === \"pen\";\n        editor.updateInstanceState({ isHoveringCanvas: canHover ? true : null });\n      }\n      function onPointerLeave(e) {\n        if (e.isKilled)\n          return;\n        if (editor.getInstanceState().isPenMode && e.pointerType !== \"pen\")\n          return;\n        const canHover = e.pointerType === \"mouse\" || e.pointerType === \"pen\";\n        editor.updateInstanceState({ isHoveringCanvas: canHover ? false : null });\n      }\n      function onTouchStart(e) {\n        ;\n        e.isKilled = true;\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n      }\n      function onTouchEnd(e) {\n        ;\n        e.isKilled = true;\n        if (!(e.target instanceof HTMLElement))\n          return;\n        if (e.target.tagName !== \"A\" && e.target.tagName !== \"TEXTAREA\" && // When in EditingShape state, we are actually clicking on a 'DIV'\n        // not A/TEXTAREA element yet. So, to preserve cursor position\n        // for edit mode on mobile we need to not preventDefault.\n        // TODO: Find out if we still need this preventDefault in general though.\n        !(editor.getEditingShape() && e.target.className.includes(\"tl-text-content\"))) {\n          (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n        }\n      }\n      function onDragOver(e) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n      }\n      async function onDrop(e) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n        if (!e.dataTransfer?.files?.length)\n          return;\n        const files = Array.from(e.dataTransfer.files);\n        await editor.putExternalContent({\n          type: \"files\",\n          files,\n          point: editor.screenToPage({ x: e.clientX, y: e.clientY }),\n          ignoreParent: false\n        });\n      }\n      function onClick(e) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.stopEventPropagation)(e);\n      }\n      return {\n        onPointerDown,\n        onPointerMove,\n        onPointerUp,\n        onPointerEnter,\n        onPointerLeave,\n        onDragOver,\n        onDrop,\n        onTouchStart,\n        onTouchEnd,\n        onClick\n      };\n    },\n    [editor]\n  );\n  return events;\n}\n\n//# sourceMappingURL=useCanvasEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUNhbnZhc0V2ZW50cy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWdDO0FBQ3NCO0FBTTVCO0FBQ21DO0FBQ2pCO0FBQzVDO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLGlCQUFpQiw4Q0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDhEQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUVBQWM7QUFDN0IsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlFQUFjO0FBQzNCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlFQUFjO0FBQzNCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxRUFBcUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlFQUFjO0FBQzNCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQywwQ0FBMEM7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsMkNBQTJDO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw4REFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw4REFBYztBQUN4QjtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFjO0FBQ3RCO0FBQ0E7QUFDQSxRQUFRLDhEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyw0QkFBNEI7QUFDbkU7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFFBQVEsb0VBQW9CO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlQ2FudmFzRXZlbnRzLm1qcz85NDg3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFJJR0hUX01PVVNFX0JVVFRPTiB9IGZyb20gXCIuLi9jb25zdGFudHMubWpzXCI7XG5pbXBvcnQge1xuICBwcmV2ZW50RGVmYXVsdCxcbiAgcmVsZWFzZVBvaW50ZXJDYXB0dXJlLFxuICBzZXRQb2ludGVyQ2FwdHVyZSxcbiAgc3RvcEV2ZW50UHJvcGFnYXRpb25cbn0gZnJvbSBcIi4uL3V0aWxzL2RvbS5tanNcIjtcbmltcG9ydCB7IGdldFBvaW50ZXJJbmZvIH0gZnJvbSBcIi4uL3V0aWxzL2dldFBvaW50ZXJJbmZvLm1qc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yIH0gZnJvbSBcIi4vdXNlRWRpdG9yLm1qc1wiO1xuZnVuY3Rpb24gdXNlQ2FudmFzRXZlbnRzKCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgZXZlbnRzID0gdXNlTWVtbyhcbiAgICBmdW5jdGlvbiBjYW52YXNFdmVudHMoKSB7XG4gICAgICBsZXQgbGFzdFgsIGxhc3RZO1xuICAgICAgZnVuY3Rpb24gb25Qb2ludGVyRG93bihlKSB7XG4gICAgICAgIGlmIChlLmlzS2lsbGVkKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGUuYnV0dG9uID09PSBSSUdIVF9NT1VTRV9CVVRUT04pIHtcbiAgICAgICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogXCJwb2ludGVyXCIsXG4gICAgICAgICAgICB0YXJnZXQ6IFwiY2FudmFzXCIsXG4gICAgICAgICAgICBuYW1lOiBcInJpZ2h0X2NsaWNrXCIsXG4gICAgICAgICAgICAuLi5nZXRQb2ludGVySW5mbyhlKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5idXR0b24gIT09IDAgJiYgZS5idXR0b24gIT09IDEgJiYgZS5idXR0b24gIT09IDUpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzZXRQb2ludGVyQ2FwdHVyZShlLmN1cnJlbnRUYXJnZXQsIGUpO1xuICAgICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwicG9pbnRlclwiLFxuICAgICAgICAgIHRhcmdldDogXCJjYW52YXNcIixcbiAgICAgICAgICBuYW1lOiBcInBvaW50ZXJfZG93blwiLFxuICAgICAgICAgIC4uLmdldFBvaW50ZXJJbmZvKGUpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gb25Qb2ludGVyTW92ZShlKSB7XG4gICAgICAgIGlmIChlLmlzS2lsbGVkKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGUuY2xpZW50WCA9PT0gbGFzdFggJiYgZS5jbGllbnRZID09PSBsYXN0WSlcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxhc3RYID0gZS5jbGllbnRYO1xuICAgICAgICBsYXN0WSA9IGUuY2xpZW50WTtcbiAgICAgICAgZWRpdG9yLmRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBcInBvaW50ZXJcIixcbiAgICAgICAgICB0YXJnZXQ6IFwiY2FudmFzXCIsXG4gICAgICAgICAgbmFtZTogXCJwb2ludGVyX21vdmVcIixcbiAgICAgICAgICAuLi5nZXRQb2ludGVySW5mbyhlKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIG9uUG9pbnRlclVwKGUpIHtcbiAgICAgICAgaWYgKGUuaXNLaWxsZWQpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZS5idXR0b24gIT09IDAgJiYgZS5idXR0b24gIT09IDEgJiYgZS5idXR0b24gIT09IDIgJiYgZS5idXR0b24gIT09IDUpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsYXN0WCA9IGUuY2xpZW50WDtcbiAgICAgICAgbGFzdFkgPSBlLmNsaWVudFk7XG4gICAgICAgIHJlbGVhc2VQb2ludGVyQ2FwdHVyZShlLmN1cnJlbnRUYXJnZXQsIGUpO1xuICAgICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwicG9pbnRlclwiLFxuICAgICAgICAgIHRhcmdldDogXCJjYW52YXNcIixcbiAgICAgICAgICBuYW1lOiBcInBvaW50ZXJfdXBcIixcbiAgICAgICAgICAuLi5nZXRQb2ludGVySW5mbyhlKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIG9uUG9pbnRlckVudGVyKGUpIHtcbiAgICAgICAgaWYgKGUuaXNLaWxsZWQpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKS5pc1Blbk1vZGUgJiYgZS5wb2ludGVyVHlwZSAhPT0gXCJwZW5cIilcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGNhbkhvdmVyID0gZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiIHx8IGUucG9pbnRlclR5cGUgPT09IFwicGVuXCI7XG4gICAgICAgIGVkaXRvci51cGRhdGVJbnN0YW5jZVN0YXRlKHsgaXNIb3ZlcmluZ0NhbnZhczogY2FuSG92ZXIgPyB0cnVlIDogbnVsbCB9KTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIG9uUG9pbnRlckxlYXZlKGUpIHtcbiAgICAgICAgaWYgKGUuaXNLaWxsZWQpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKS5pc1Blbk1vZGUgJiYgZS5wb2ludGVyVHlwZSAhPT0gXCJwZW5cIilcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGNhbkhvdmVyID0gZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiIHx8IGUucG9pbnRlclR5cGUgPT09IFwicGVuXCI7XG4gICAgICAgIGVkaXRvci51cGRhdGVJbnN0YW5jZVN0YXRlKHsgaXNIb3ZlcmluZ0NhbnZhczogY2FuSG92ZXIgPyBmYWxzZSA6IG51bGwgfSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBvblRvdWNoU3RhcnQoZSkge1xuICAgICAgICA7XG4gICAgICAgIGUuaXNLaWxsZWQgPSB0cnVlO1xuICAgICAgICBwcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIG9uVG91Y2hFbmQoZSkge1xuICAgICAgICA7XG4gICAgICAgIGUuaXNLaWxsZWQgPSB0cnVlO1xuICAgICAgICBpZiAoIShlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSlcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lICE9PSBcIkFcIiAmJiBlLnRhcmdldC50YWdOYW1lICE9PSBcIlRFWFRBUkVBXCIgJiYgLy8gV2hlbiBpbiBFZGl0aW5nU2hhcGUgc3RhdGUsIHdlIGFyZSBhY3R1YWxseSBjbGlja2luZyBvbiBhICdESVYnXG4gICAgICAgIC8vIG5vdCBBL1RFWFRBUkVBIGVsZW1lbnQgeWV0LiBTbywgdG8gcHJlc2VydmUgY3Vyc29yIHBvc2l0aW9uXG4gICAgICAgIC8vIGZvciBlZGl0IG1vZGUgb24gbW9iaWxlIHdlIG5lZWQgdG8gbm90IHByZXZlbnREZWZhdWx0LlxuICAgICAgICAvLyBUT0RPOiBGaW5kIG91dCBpZiB3ZSBzdGlsbCBuZWVkIHRoaXMgcHJldmVudERlZmF1bHQgaW4gZ2VuZXJhbCB0aG91Z2guXG4gICAgICAgICEoZWRpdG9yLmdldEVkaXRpbmdTaGFwZSgpICYmIGUudGFyZ2V0LmNsYXNzTmFtZS5pbmNsdWRlcyhcInRsLXRleHQtY29udGVudFwiKSkpIHtcbiAgICAgICAgICBwcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZnVuY3Rpb24gb25EcmFnT3ZlcihlKSB7XG4gICAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgfVxuICAgICAgYXN5bmMgZnVuY3Rpb24gb25Ecm9wKGUpIHtcbiAgICAgICAgcHJldmVudERlZmF1bHQoZSk7XG4gICAgICAgIGlmICghZS5kYXRhVHJhbnNmZXI/LmZpbGVzPy5sZW5ndGgpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBmaWxlcyA9IEFycmF5LmZyb20oZS5kYXRhVHJhbnNmZXIuZmlsZXMpO1xuICAgICAgICBhd2FpdCBlZGl0b3IucHV0RXh0ZXJuYWxDb250ZW50KHtcbiAgICAgICAgICB0eXBlOiBcImZpbGVzXCIsXG4gICAgICAgICAgZmlsZXMsXG4gICAgICAgICAgcG9pbnQ6IGVkaXRvci5zY3JlZW5Ub1BhZ2UoeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KSxcbiAgICAgICAgICBpZ25vcmVQYXJlbnQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgIHN0b3BFdmVudFByb3BhZ2F0aW9uKGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb25Qb2ludGVyRG93bixcbiAgICAgICAgb25Qb2ludGVyTW92ZSxcbiAgICAgICAgb25Qb2ludGVyVXAsXG4gICAgICAgIG9uUG9pbnRlckVudGVyLFxuICAgICAgICBvblBvaW50ZXJMZWF2ZSxcbiAgICAgICAgb25EcmFnT3ZlcixcbiAgICAgICAgb25Ecm9wLFxuICAgICAgICBvblRvdWNoU3RhcnQsXG4gICAgICAgIG9uVG91Y2hFbmQsXG4gICAgICAgIG9uQ2xpY2tcbiAgICAgIH07XG4gICAgfSxcbiAgICBbZWRpdG9yXVxuICApO1xuICByZXR1cm4gZXZlbnRzO1xufVxuZXhwb3J0IHtcbiAgdXNlQ2FudmFzRXZlbnRzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlQ2FudmFzRXZlbnRzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCanvasEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCoarsePointer.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCoarsePointer.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCoarsePointer: () => (/* binding */ useCoarsePointer)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\nfunction useCoarsePointer() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__.useEditor)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    let isCoarse = editor.getInstanceState().isCoarsePointer;\n    const handlePointerDown = (e) => {\n      const isCoarseEvent = e.pointerType !== \"mouse\";\n      if (isCoarse === isCoarseEvent)\n        return;\n      isCoarse = isCoarseEvent;\n      editor.updateInstanceState({ isCoarsePointer: isCoarseEvent });\n    };\n    window.addEventListener(\"pointerdown\", handlePointerDown, { capture: true });\n    const mql = window.matchMedia && window.matchMedia(\"(any-pointer: coarse)\");\n    const isForcedFinePointer = editor.environment.isFirefox && !editor.environment.isAndroid && !editor.environment.isIos;\n    const handleMediaQueryChange = () => {\n      const next = isForcedFinePointer ? false : mql.matches;\n      if (isCoarse !== next)\n        return;\n      isCoarse = next;\n      editor.updateInstanceState({ isCoarsePointer: next });\n    };\n    if (mql) {\n      mql.addEventListener(\"change\", handleMediaQueryChange);\n      handleMediaQueryChange();\n    }\n    return () => {\n      window.removeEventListener(\"pointerdown\", handlePointerDown, { capture: true });\n      if (mql) {\n        mql.removeEventListener(\"change\", handleMediaQueryChange);\n      }\n    };\n  }, [editor]);\n}\n\n//# sourceMappingURL=useCoarsePointer.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUNvYXJzZVBvaW50ZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFrQztBQUNVO0FBQzVDO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsZ0NBQWdDO0FBQ25FO0FBQ0EsZ0VBQWdFLGVBQWU7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsdUJBQXVCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxlQUFlO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlQ29hcnNlUG9pbnRlci5tanM/MDYwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmZ1bmN0aW9uIHVzZUNvYXJzZVBvaW50ZXIoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBpc0NvYXJzZSA9IGVkaXRvci5nZXRJbnN0YW5jZVN0YXRlKCkuaXNDb2Fyc2VQb2ludGVyO1xuICAgIGNvbnN0IGhhbmRsZVBvaW50ZXJEb3duID0gKGUpID0+IHtcbiAgICAgIGNvbnN0IGlzQ29hcnNlRXZlbnQgPSBlLnBvaW50ZXJUeXBlICE9PSBcIm1vdXNlXCI7XG4gICAgICBpZiAoaXNDb2Fyc2UgPT09IGlzQ29hcnNlRXZlbnQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlzQ29hcnNlID0gaXNDb2Fyc2VFdmVudDtcbiAgICAgIGVkaXRvci51cGRhdGVJbnN0YW5jZVN0YXRlKHsgaXNDb2Fyc2VQb2ludGVyOiBpc0NvYXJzZUV2ZW50IH0pO1xuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCBoYW5kbGVQb2ludGVyRG93biwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgIGNvbnN0IG1xbCA9IHdpbmRvdy5tYXRjaE1lZGlhICYmIHdpbmRvdy5tYXRjaE1lZGlhKFwiKGFueS1wb2ludGVyOiBjb2Fyc2UpXCIpO1xuICAgIGNvbnN0IGlzRm9yY2VkRmluZVBvaW50ZXIgPSBlZGl0b3IuZW52aXJvbm1lbnQuaXNGaXJlZm94ICYmICFlZGl0b3IuZW52aXJvbm1lbnQuaXNBbmRyb2lkICYmICFlZGl0b3IuZW52aXJvbm1lbnQuaXNJb3M7XG4gICAgY29uc3QgaGFuZGxlTWVkaWFRdWVyeUNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG5leHQgPSBpc0ZvcmNlZEZpbmVQb2ludGVyID8gZmFsc2UgOiBtcWwubWF0Y2hlcztcbiAgICAgIGlmIChpc0NvYXJzZSAhPT0gbmV4dClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgaXNDb2Fyc2UgPSBuZXh0O1xuICAgICAgZWRpdG9yLnVwZGF0ZUluc3RhbmNlU3RhdGUoeyBpc0NvYXJzZVBvaW50ZXI6IG5leHQgfSk7XG4gICAgfTtcbiAgICBpZiAobXFsKSB7XG4gICAgICBtcWwuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVNZWRpYVF1ZXJ5Q2hhbmdlKTtcbiAgICAgIGhhbmRsZU1lZGlhUXVlcnlDaGFuZ2UoKTtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgaGFuZGxlUG9pbnRlckRvd24sIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgIGlmIChtcWwpIHtcbiAgICAgICAgbXFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgaGFuZGxlTWVkaWFRdWVyeUNoYW5nZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2VkaXRvcl0pO1xufVxuZXhwb3J0IHtcbiAgdXNlQ29hcnNlUG9pbnRlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUNvYXJzZVBvaW50ZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCoarsePointer.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContainerProvider: () => (/* binding */ ContainerProvider),\n/* harmony export */   useContainer: () => (/* binding */ useContainer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n\nconst ContainerContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)(null);\nfunction ContainerProvider({\n  container,\n  children\n}) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ContainerContext.Provider, { value: container, children });\n}\nfunction useContainer() {\n  return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assertExists)((0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(ContainerContext), \"useContainer used outside of <Tldraw />\");\n}\n\n//# sourceMappingURL=useContainer.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUNvbnRhaW5lci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDSztBQUNLO0FBQ2xELHlCQUF5QixvREFBYTtBQUN0QztBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QseUJBQXlCLHNEQUFHLDhCQUE4Qiw0QkFBNEI7QUFDdEY7QUFDQTtBQUNBLFNBQVMsMkRBQVksQ0FBQyxpREFBVTtBQUNoQztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUNvbnRhaW5lci5tanM/MjBkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IGFzc2VydEV4aXN0cyB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0IH0gZnJvbSBcInJlYWN0XCI7XG5jb25zdCBDb250YWluZXJDb250ZXh0ID0gY3JlYXRlQ29udGV4dChudWxsKTtcbmZ1bmN0aW9uIENvbnRhaW5lclByb3ZpZGVyKHtcbiAgY29udGFpbmVyLFxuICBjaGlsZHJlblxufSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChDb250YWluZXJDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBjb250YWluZXIsIGNoaWxkcmVuIH0pO1xufVxuZnVuY3Rpb24gdXNlQ29udGFpbmVyKCkge1xuICByZXR1cm4gYXNzZXJ0RXhpc3RzKHVzZUNvbnRleHQoQ29udGFpbmVyQ29udGV4dCksIFwidXNlQ29udGFpbmVyIHVzZWQgb3V0c2lkZSBvZiA8VGxkcmF3IC8+XCIpO1xufVxuZXhwb3J0IHtcbiAgQ29udGFpbmVyUHJvdmlkZXIsXG4gIHVzZUNvbnRhaW5lclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUNvbnRhaW5lci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCursor.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCursor.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCursor: () => (/* binding */ getCursor),\n/* harmony export */   useCursor: () => (/* binding */ useCursor)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _useContainer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _useIsDarkMode_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useIsDarkMode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsDarkMode.mjs\");\n\n\n\n\n\nconst CORNER_SVG = `<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>`;\nconst EDGE_SVG = `<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>`;\nconst ROTATE_CORNER_SVG = `<path d=\"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z\" fill=\"black\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z\" fill=\"white\"/>`;\nfunction getCursorCss(svg, r, tr, f, color, hotspotX = 16, hotspotY = 16) {\n  const a = (-tr - r) * (_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.PI / 180);\n  const s = Math.sin(a);\n  const c = Math.cos(a);\n  const dx = 1 * c - 1 * s;\n  const dy = 1 * s + 1 * c;\n  return `url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ${color};'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='${dx}' dy='${dy}' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(${r + tr} 16 16)${f ? ` scale(-1,-1) translate(0, -32)` : \"\"}' filter='url(%23shadow)'>` + svg.replaceAll(`\"`, `'`) + `</g></svg>\") ${hotspotX} ${hotspotY}, pointer`;\n}\nconst STATIC_CURSORS = [\n  \"default\",\n  \"pointer\",\n  \"cross\",\n  \"move\",\n  \"grab\",\n  \"grabbing\",\n  \"text\",\n  \"zoom-in\",\n  \"zoom-out\"\n];\nconst CURSORS = {\n  none: () => \"none\",\n  \"ew-resize\": (r, f, c) => getCursorCss(EDGE_SVG, r, 0, f, c),\n  \"ns-resize\": (r, f, c) => getCursorCss(EDGE_SVG, r, 90, f, c),\n  \"nesw-resize\": (r, f, c) => getCursorCss(CORNER_SVG, r, 0, f, c),\n  \"nwse-resize\": (r, f, c) => getCursorCss(CORNER_SVG, r, 90, f, c),\n  \"nwse-rotate\": (r, f, c) => getCursorCss(ROTATE_CORNER_SVG, r, 0, f, c),\n  \"nesw-rotate\": (r, f, c) => getCursorCss(ROTATE_CORNER_SVG, r, 90, f, c),\n  \"senw-rotate\": (r, f, c) => getCursorCss(ROTATE_CORNER_SVG, r, 180, f, c),\n  \"swne-rotate\": (r, f, c) => getCursorCss(ROTATE_CORNER_SVG, r, 270, f, c)\n};\nfunction getCursor(cursor, rotation = 0, color = \"black\") {\n  return CURSORS[cursor]((0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.radiansToDegrees)(rotation), false, color);\n}\nfunction useCursor() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  const container = (0,_useContainer_mjs__WEBPACK_IMPORTED_MODULE_2__.useContainer)();\n  const isDarkMode = (0,_useIsDarkMode_mjs__WEBPACK_IMPORTED_MODULE_4__.useIsDarkMode)();\n  (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.useQuickReactor)(\n    \"useCursor\",\n    () => {\n      const { type, rotation } = editor.getInstanceState().cursor;\n      if (STATIC_CURSORS.includes(type)) {\n        container.style.setProperty(\"--tl-cursor\", `var(--tl-cursor-${type})`);\n        return;\n      }\n      container.style.setProperty(\n        \"--tl-cursor\",\n        getCursor(type, rotation, isDarkMode ? \"white\" : \"black\")\n      );\n    },\n    [editor, container, isDarkMode]\n  );\n}\n\n//# sourceMappingURL=useCursor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUN1cnNvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFnRDtBQUNlO0FBQ2I7QUFDTjtBQUNRO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFEQUFFO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUlBQXFJLE9BQU8saUlBQWlJLEdBQUcsUUFBUSxHQUFHLDRGQUE0RixRQUFRLFFBQVEsMkNBQTJDLHlFQUF5RSxVQUFVLEVBQUUsU0FBUztBQUNoaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVFQUFnQjtBQUN6QztBQUNBO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLG9CQUFvQiwrREFBWTtBQUNoQyxxQkFBcUIsaUVBQWE7QUFDbEMsRUFBRSw4REFBZTtBQUNqQjtBQUNBO0FBQ0EsY0FBYyxpQkFBaUI7QUFDL0I7QUFDQSxzRUFBc0UsS0FBSztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlQ3Vyc29yLm1qcz84NzFhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVF1aWNrUmVhY3RvciB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyBQSSwgcmFkaWFuc1RvRGVncmVlcyB9IGZyb20gXCIuLi9wcmltaXRpdmVzL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgdXNlQ29udGFpbmVyIH0gZnJvbSBcIi4vdXNlQ29udGFpbmVyLm1qc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yIH0gZnJvbSBcIi4vdXNlRWRpdG9yLm1qc1wiO1xuaW1wb3J0IHsgdXNlSXNEYXJrTW9kZSB9IGZyb20gXCIuL3VzZUlzRGFya01vZGUubWpzXCI7XG5jb25zdCBDT1JORVJfU1ZHID0gYDxwYXRoIGQ9J20xOS43NDMyIDE3LjA4NjktNC4wNzIgNC4wNjggMi44MjkgMi44MjgtOC40NzMtLjAxMy0uMDEzLTguNDcgMi44NDEgMi44NDIgNC4wNzUtNC4wNjggMS40MTQtMS40MTUtMi44NDQtMi44NDJoOC40ODZ2OC40ODRsLTIuODMtMi44Mjd6JyBmaWxsPSclMjNmZmYnLz48cGF0aCBkPSdtMTguNjgyNiAxNi43MzM0LTQuNDI3IDQuNDI0IDEuODI4IDEuODI4LTUuMDU2LS4wMTYtLjAxNC01LjA1NCAxLjg0MiAxLjg0MSA0LjQyOC00LjQyMiAyLjQ3NC0yLjQ3NS0xLjg0NC0xLjg0M2g1LjA3M3Y1LjA3MWwtMS44My0xLjgyOHonIGZpbGw9JyUyMzAwMCcvPmA7XG5jb25zdCBFREdFX1NWRyA9IGA8cGF0aCBkPSdtOSAxNy45OTA3di4wMDVsNS45OTcgNS45OTYuMDAxLTMuOTk5aDEuOTk5IDIuMDJ2NGw1Ljk4LTYuMDAxLTUuOTgtNS45OTkuMDAxIDQuMDE5LTIuMDIxLjAwMmgtMmwuMDAxLTQuMDIyem0xLjQxMS4wMDMgMy41ODctMy41ODgtLjAwMSAyLjU4N2gzLjUgMi41MjF2LTIuNTg1bDMuNTY1IDMuNTg2LTMuNTY0IDMuNTg1LS4wMDEtMi41ODVoLTIuNTIxbC0zLjQ5OS0uMDAxLS4wMDEgMi41ODZ6JyBmaWxsPSclMjNmZmYnLz48cGF0aCBkPSdtMTcuNDk3MSAxOC45OTMyaDIuNTIxdjIuNTg2bDMuNTY1LTMuNTg2LTMuNTY1LTMuNTg1djIuNjA1aC0yLjUyMS0zLjV2LTIuNjA3bC0zLjU4NiAzLjU4NyAzLjU4NiAzLjU4NnYtMi41ODd6JyBmaWxsPSclMjMwMDAnLz5gO1xuY29uc3QgUk9UQVRFX0NPUk5FUl9TVkcgPSBgPHBhdGggZD1cIk0yMi40Nzg5IDkuNDU3MjhMMjUuOTkzNSAxMi45OTQyTDIyLjQ3ODkgMTYuNTI4M1YxNC4xMDMyQzE4LjEyNiAxNC4xNTAyIDE0LjYwNzEgMTcuNjczNyAxNC41Njc1IDIyLjAyODNIMTcuMDVMMTMuNTEzIDI1LjU0M0w5Ljk3ODg5IDIyLjAyODNIMTIuNTY3NEMxMi42MDcxIDE2LjU2OTEgMTcuMDIxNCAxMi4xNTAzIDIyLjQ3ODkgMTIuMTAzMUwyMi40Nzg5IDkuNDU3MjhaXCIgZmlsbD1cImJsYWNrXCIvPjxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0yMS40Nzg5IDcuMDMyMjNMMjcuNDAzNSAxMi45OTQ1TDIxLjQ3ODkgMTguOTUyMVYxNS4xODY4QzE4LjQ3OTggMTUuNjU0OSAxNi4xMTEzIDE4LjAyNzMgMTUuNjQ5IDIxLjAyODRIMTkuNDc1TDEzLjUxMjggMjYuOTUzTDcuNTU1MTkgMjEuMDI4NEgxMS42MTg5QzEyLjEyNDMgMTUuODE1NSAxNi4yNjc5IDExLjY2NzcgMjEuNDc4OSAxMS4xNTU5TDIxLjQ3ODkgNy4wMzIyM1pNMjIuNDc4OSAxMi4xMDMxQzE3LjAyMTQgMTIuMTUwMyAxMi42MDcxIDE2LjU2OTEgMTIuNTY3NCAyMi4wMjg0SDkuOTc4ODlMMTMuNTEzIDI1LjU0M0wxNy4wNSAyMi4wMjg0SDE0LjU2NzVDMTQuNTcwNSAyMS42ODk2IDE0LjU5NDcgMjEuMzU1OCAxNC42Mzg2IDIxLjAyODRDMTUuMTE1NyAxNy40NzQxIDE3LjkyNjYgMTQuNjU5MiAyMS40Nzg5IDE0LjE3NjFDMjEuODA2MyAxNC4xMzE2IDIyLjE0MDEgMTQuMTA2OSAyMi40Nzg5IDE0LjEwMzJWMTYuNTI4NEwyNS45OTM1IDEyLjk5NDJMMjIuNDc4OSA5LjQ1NzI5TDIyLjQ3ODkgMTIuMTAzMVpcIiBmaWxsPVwid2hpdGVcIi8+YDtcbmZ1bmN0aW9uIGdldEN1cnNvckNzcyhzdmcsIHIsIHRyLCBmLCBjb2xvciwgaG90c3BvdFggPSAxNiwgaG90c3BvdFkgPSAxNikge1xuICBjb25zdCBhID0gKC10ciAtIHIpICogKFBJIC8gMTgwKTtcbiAgY29uc3QgcyA9IE1hdGguc2luKGEpO1xuICBjb25zdCBjID0gTWF0aC5jb3MoYSk7XG4gIGNvbnN0IGR4ID0gMSAqIGMgLSAxICogcztcbiAgY29uc3QgZHkgPSAxICogcyArIDEgKiBjO1xuICByZXR1cm4gYHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCw8c3ZnIGhlaWdodD0nMzInIHdpZHRoPSczMicgdmlld0JveD0nMCAwIDMyIDMyJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHN0eWxlPSdjb2xvcjogJHtjb2xvcn07Jz48ZGVmcz48ZmlsdGVyIGlkPSdzaGFkb3cnIHk9Jy00MCUnIHg9Jy00MCUnIHdpZHRoPScxODBweCcgaGVpZ2h0PScxODAlJyBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9J3NSR0InPjxmZURyb3BTaGFkb3cgZHg9JyR7ZHh9JyBkeT0nJHtkeX0nIHN0ZERldmlhdGlvbj0nMS4yJyBmbG9vZC1vcGFjaXR5PScuNScvPjwvZmlsdGVyPjwvZGVmcz48ZyBmaWxsPSdub25lJyB0cmFuc2Zvcm09J3JvdGF0ZSgke3IgKyB0cn0gMTYgMTYpJHtmID8gYCBzY2FsZSgtMSwtMSkgdHJhbnNsYXRlKDAsIC0zMilgIDogXCJcIn0nIGZpbHRlcj0ndXJsKCUyM3NoYWRvdyknPmAgKyBzdmcucmVwbGFjZUFsbChgXCJgLCBgJ2ApICsgYDwvZz48L3N2Zz5cIikgJHtob3RzcG90WH0gJHtob3RzcG90WX0sIHBvaW50ZXJgO1xufVxuY29uc3QgU1RBVElDX0NVUlNPUlMgPSBbXG4gIFwiZGVmYXVsdFwiLFxuICBcInBvaW50ZXJcIixcbiAgXCJjcm9zc1wiLFxuICBcIm1vdmVcIixcbiAgXCJncmFiXCIsXG4gIFwiZ3JhYmJpbmdcIixcbiAgXCJ0ZXh0XCIsXG4gIFwiem9vbS1pblwiLFxuICBcInpvb20tb3V0XCJcbl07XG5jb25zdCBDVVJTT1JTID0ge1xuICBub25lOiAoKSA9PiBcIm5vbmVcIixcbiAgXCJldy1yZXNpemVcIjogKHIsIGYsIGMpID0+IGdldEN1cnNvckNzcyhFREdFX1NWRywgciwgMCwgZiwgYyksXG4gIFwibnMtcmVzaXplXCI6IChyLCBmLCBjKSA9PiBnZXRDdXJzb3JDc3MoRURHRV9TVkcsIHIsIDkwLCBmLCBjKSxcbiAgXCJuZXN3LXJlc2l6ZVwiOiAociwgZiwgYykgPT4gZ2V0Q3Vyc29yQ3NzKENPUk5FUl9TVkcsIHIsIDAsIGYsIGMpLFxuICBcIm53c2UtcmVzaXplXCI6IChyLCBmLCBjKSA9PiBnZXRDdXJzb3JDc3MoQ09STkVSX1NWRywgciwgOTAsIGYsIGMpLFxuICBcIm53c2Utcm90YXRlXCI6IChyLCBmLCBjKSA9PiBnZXRDdXJzb3JDc3MoUk9UQVRFX0NPUk5FUl9TVkcsIHIsIDAsIGYsIGMpLFxuICBcIm5lc3ctcm90YXRlXCI6IChyLCBmLCBjKSA9PiBnZXRDdXJzb3JDc3MoUk9UQVRFX0NPUk5FUl9TVkcsIHIsIDkwLCBmLCBjKSxcbiAgXCJzZW53LXJvdGF0ZVwiOiAociwgZiwgYykgPT4gZ2V0Q3Vyc29yQ3NzKFJPVEFURV9DT1JORVJfU1ZHLCByLCAxODAsIGYsIGMpLFxuICBcInN3bmUtcm90YXRlXCI6IChyLCBmLCBjKSA9PiBnZXRDdXJzb3JDc3MoUk9UQVRFX0NPUk5FUl9TVkcsIHIsIDI3MCwgZiwgYylcbn07XG5mdW5jdGlvbiBnZXRDdXJzb3IoY3Vyc29yLCByb3RhdGlvbiA9IDAsIGNvbG9yID0gXCJibGFja1wiKSB7XG4gIHJldHVybiBDVVJTT1JTW2N1cnNvcl0ocmFkaWFuc1RvRGVncmVlcyhyb3RhdGlvbiksIGZhbHNlLCBjb2xvcik7XG59XG5mdW5jdGlvbiB1c2VDdXJzb3IoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBjb250YWluZXIgPSB1c2VDb250YWluZXIoKTtcbiAgY29uc3QgaXNEYXJrTW9kZSA9IHVzZUlzRGFya01vZGUoKTtcbiAgdXNlUXVpY2tSZWFjdG9yKFxuICAgIFwidXNlQ3Vyc29yXCIsXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgeyB0eXBlLCByb3RhdGlvbiB9ID0gZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKS5jdXJzb3I7XG4gICAgICBpZiAoU1RBVElDX0NVUlNPUlMuaW5jbHVkZXModHlwZSkpIHtcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiLS10bC1jdXJzb3JcIiwgYHZhcigtLXRsLWN1cnNvci0ke3R5cGV9KWApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgIFwiLS10bC1jdXJzb3JcIixcbiAgICAgICAgZ2V0Q3Vyc29yKHR5cGUsIHJvdGF0aW9uLCBpc0RhcmtNb2RlID8gXCJ3aGl0ZVwiIDogXCJibGFja1wiKVxuICAgICAgKTtcbiAgICB9LFxuICAgIFtlZGl0b3IsIGNvbnRhaW5lciwgaXNEYXJrTW9kZV1cbiAgKTtcbn1cbmV4cG9ydCB7XG4gIGdldEN1cnNvcixcbiAgdXNlQ3Vyc29yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlQ3Vyc29yLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useCursor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDarkMode.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDarkMode.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDarkMode: () => (/* binding */ useDarkMode)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/debug-flags.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\");\n/* harmony import */ var _useContainer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n/* harmony import */ var _useIsDarkMode_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useIsDarkMode.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsDarkMode.mjs\");\n\n\n\n\n\n\nfunction useDarkMode() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const container = (0,_useContainer_mjs__WEBPACK_IMPORTED_MODULE_3__.useContainer)();\n  const isDarkMode = (0,_useIsDarkMode_mjs__WEBPACK_IMPORTED_MODULE_5__.useIsDarkMode)();\n  const forceSrgb = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.useValue)(_utils_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_2__.debugFlags.forceSrgb);\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    if (isDarkMode) {\n      container.setAttribute(\"data-color-mode\", \"dark\");\n      container.classList.remove(\"tl-theme__light\");\n      container.classList.add(\"tl-theme__dark\");\n    } else {\n      container.setAttribute(\"data-color-mode\", \"light\");\n      container.classList.remove(\"tl-theme__dark\");\n      container.classList.add(\"tl-theme__light\");\n    }\n    if (forceSrgb) {\n      container.classList.add(\"tl-theme__force-sRGB\");\n    } else {\n      container.classList.remove(\"tl-theme__force-sRGB\");\n    }\n  }, [editor, container, forceSrgb, isDarkMode]);\n}\n\n//# sourceMappingURL=useDarkMode.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZURhcmtNb2RlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXlDO0FBQ2Y7QUFDNEI7QUFDSjtBQUNOO0FBQ1E7QUFDcEQ7QUFDQSxpQkFBaUIseURBQVM7QUFDMUIsb0JBQW9CLCtEQUFZO0FBQ2hDLHFCQUFxQixpRUFBYTtBQUNsQyxvQkFBb0IsdURBQVEsQ0FBQyw4REFBVTtBQUN2QyxFQUFFLDRDQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlRGFya01vZGUubWpzPzQ4NjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlVmFsdWUgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZGVidWdGbGFncyB9IGZyb20gXCIuLi91dGlscy9kZWJ1Zy1mbGFncy5tanNcIjtcbmltcG9ydCB7IHVzZUNvbnRhaW5lciB9IGZyb20gXCIuL3VzZUNvbnRhaW5lci5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmltcG9ydCB7IHVzZUlzRGFya01vZGUgfSBmcm9tIFwiLi91c2VJc0RhcmtNb2RlLm1qc1wiO1xuZnVuY3Rpb24gdXNlRGFya01vZGUoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBjb250YWluZXIgPSB1c2VDb250YWluZXIoKTtcbiAgY29uc3QgaXNEYXJrTW9kZSA9IHVzZUlzRGFya01vZGUoKTtcbiAgY29uc3QgZm9yY2VTcmdiID0gdXNlVmFsdWUoZGVidWdGbGFncy5mb3JjZVNyZ2IpO1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0RhcmtNb2RlKSB7XG4gICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1jb2xvci1tb2RlXCIsIFwiZGFya1wiKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwidGwtdGhlbWVfX2xpZ2h0XCIpO1xuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0bC10aGVtZV9fZGFya1wiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtY29sb3ItbW9kZVwiLCBcImxpZ2h0XCIpO1xuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC10aGVtZV9fZGFya1wiKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGwtdGhlbWVfX2xpZ2h0XCIpO1xuICAgIH1cbiAgICBpZiAoZm9yY2VTcmdiKSB7XG4gICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRsLXRoZW1lX19mb3JjZS1zUkdCXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcInRsLXRoZW1lX19mb3JjZS1zUkdCXCIpO1xuICAgIH1cbiAgfSwgW2VkaXRvciwgY29udGFpbmVyLCBmb3JjZVNyZ2IsIGlzRGFya01vZGVdKTtcbn1cbmV4cG9ydCB7XG4gIHVzZURhcmtNb2RlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlRGFya01vZGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDarkMode.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDocumentEvents.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDocumentEvents.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDocumentEvents: () => (/* binding */ useDocumentEvents)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _useContainer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\n\nfunction useDocumentEvents() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const container = (0,_useContainer_mjs__WEBPACK_IMPORTED_MODULE_3__.useContainer)();\n  const isAppFocused = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.useValue)(\"isFocused\", () => editor.getInstanceState().isFocused, [editor]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (typeof matchMedia === void 0)\n      return;\n    let remove = null;\n    const updatePixelRatio = () => {\n      if (remove != null) {\n        remove();\n      }\n      const mqString = `(resolution: ${window.devicePixelRatio}dppx)`;\n      const media = matchMedia(mqString);\n      const safariCb = (ev) => {\n        if (ev.type === \"change\") {\n          updatePixelRatio();\n        }\n      };\n      if (media.addEventListener) {\n        media.addEventListener(\"change\", updatePixelRatio);\n      } else if (media.addListener) {\n        media.addListener(safariCb);\n      }\n      remove = () => {\n        if (media.removeEventListener) {\n          media.removeEventListener(\"change\", updatePixelRatio);\n        } else if (media.removeListener) {\n          media.removeListener(safariCb);\n        }\n      };\n      editor.updateInstanceState({ devicePixelRatio: window.devicePixelRatio });\n    };\n    updatePixelRatio();\n    return () => {\n      remove?.();\n    };\n  }, [editor]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!isAppFocused)\n      return;\n    const handleKeyDown = (e) => {\n      if (e.altKey && // todo: When should we allow the alt key to be used? Perhaps states should declare which keys matter to them?\n      (editor.isIn(\"zoom\") || !editor.getPath().endsWith(\".idle\")) && !isFocusingInput()) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n      }\n      if (e.isKilled)\n        return;\n      e.isKilled = true;\n      switch (e.key) {\n        case \"=\":\n        case \"-\":\n        case \"0\": {\n          if (e.metaKey || e.ctrlKey) {\n            (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n            return;\n          }\n          break;\n        }\n        case \"Tab\": {\n          if (isFocusingInput() || editor.getIsMenuOpen()) {\n            return;\n          }\n          break;\n        }\n        case \",\": {\n          return;\n        }\n        case \"Escape\": {\n          if (editor.getEditingShape() || editor.getSelectedShapeIds().length > 0) {\n            e.preventDefault();\n          }\n          if (editor.getOpenMenus().length > 0)\n            return;\n          if (!editor.inputs.keys.has(\"Escape\")) {\n            editor.inputs.keys.add(\"Escape\");\n            editor.cancel();\n            editor.focus();\n          }\n          return;\n        }\n        default: {\n          if (isFocusingInput() || editor.getIsMenuOpen()) {\n            return;\n          }\n        }\n      }\n      const info = {\n        type: \"keyboard\",\n        name: e.repeat ? \"key_repeat\" : \"key_down\",\n        key: e.key,\n        code: e.code,\n        shiftKey: e.shiftKey,\n        altKey: e.altKey,\n        ctrlKey: e.metaKey || e.ctrlKey\n      };\n      editor.dispatch(info);\n    };\n    const handleKeyUp = (e) => {\n      if (e.isKilled)\n        return;\n      e.isKilled = true;\n      if (isFocusingInput() || editor.getIsMenuOpen()) {\n        return;\n      }\n      if (e.key === \",\") {\n        return;\n      }\n      const info = {\n        type: \"keyboard\",\n        name: \"key_up\",\n        key: e.key,\n        code: e.code,\n        shiftKey: e.shiftKey,\n        altKey: e.altKey,\n        ctrlKey: e.metaKey || e.ctrlKey\n      };\n      editor.dispatch(info);\n    };\n    function handleTouchStart(e) {\n      if (container.contains(e.target)) {\n        const touchXPosition = e.touches[0].pageX;\n        const touchXRadius = e.touches[0].radiusX || 0;\n        if (touchXPosition - touchXRadius < 10 || touchXPosition + touchXRadius > editor.getViewportScreenBounds().width - 10) {\n          if (e.target?.tagName === \"BUTTON\") {\n            ;\n            e.target?.click();\n          }\n          (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n        }\n      }\n    }\n    const handleWheel = (e) => {\n      if (container.contains(e.target) && (e.ctrlKey || e.metaKey)) {\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(e);\n      }\n    };\n    container.addEventListener(\"touchstart\", handleTouchStart, { passive: false });\n    container.addEventListener(\"wheel\", handleWheel, { passive: false });\n    document.addEventListener(\"gesturestart\", _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault);\n    document.addEventListener(\"gesturechange\", _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault);\n    document.addEventListener(\"gestureend\", _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault);\n    container.addEventListener(\"keydown\", handleKeyDown);\n    container.addEventListener(\"keyup\", handleKeyUp);\n    return () => {\n      container.removeEventListener(\"touchstart\", handleTouchStart);\n      container.removeEventListener(\"wheel\", handleWheel);\n      document.removeEventListener(\"gesturestart\", _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault);\n      document.removeEventListener(\"gesturechange\", _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault);\n      document.removeEventListener(\"gestureend\", _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault);\n      container.removeEventListener(\"keydown\", handleKeyDown);\n      container.removeEventListener(\"keyup\", handleKeyUp);\n    };\n  }, [editor, container, isAppFocused]);\n}\nconst INPUTS = [\"input\", \"select\", \"button\", \"textarea\"];\nfunction isFocusingInput() {\n  const { activeElement } = document;\n  if (activeElement && (activeElement.getAttribute(\"contenteditable\") || INPUTS.indexOf(activeElement.tagName.toLowerCase()) > -1)) {\n    return true;\n  }\n  return false;\n}\n\n//# sourceMappingURL=useDocumentEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZURvY3VtZW50RXZlbnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBeUM7QUFDUDtBQUNnQjtBQUNBO0FBQ047QUFDNUM7QUFDQSxpQkFBaUIseURBQVM7QUFDMUIsb0JBQW9CLCtEQUFZO0FBQ2hDLHVCQUF1Qix1REFBUTtBQUMvQixFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsd0JBQXdCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsMkNBQTJDO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksOERBQWM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDhEQUFjO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFjO0FBQ3RCO0FBQ0E7QUFDQSxpRUFBaUUsZ0JBQWdCO0FBQ2pGLHVEQUF1RCxnQkFBZ0I7QUFDdkUsOENBQThDLDBEQUFjO0FBQzVELCtDQUErQywwREFBYztBQUM3RCw0Q0FBNEMsMERBQWM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCwwREFBYztBQUNqRSxvREFBb0QsMERBQWM7QUFDbEUsaURBQWlELDBEQUFjO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlRG9jdW1lbnRFdmVudHMubWpzP2IzYzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlVmFsdWUgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBwcmV2ZW50RGVmYXVsdCB9IGZyb20gXCIuLi91dGlscy9kb20ubWpzXCI7XG5pbXBvcnQgeyB1c2VDb250YWluZXIgfSBmcm9tIFwiLi91c2VDb250YWluZXIubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi91c2VFZGl0b3IubWpzXCI7XG5mdW5jdGlvbiB1c2VEb2N1bWVudEV2ZW50cygpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IGNvbnRhaW5lciA9IHVzZUNvbnRhaW5lcigpO1xuICBjb25zdCBpc0FwcEZvY3VzZWQgPSB1c2VWYWx1ZShcImlzRm9jdXNlZFwiLCAoKSA9PiBlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzRm9jdXNlZCwgW2VkaXRvcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgbWF0Y2hNZWRpYSA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuO1xuICAgIGxldCByZW1vdmUgPSBudWxsO1xuICAgIGNvbnN0IHVwZGF0ZVBpeGVsUmF0aW8gPSAoKSA9PiB7XG4gICAgICBpZiAocmVtb3ZlICE9IG51bGwpIHtcbiAgICAgICAgcmVtb3ZlKCk7XG4gICAgICB9XG4gICAgICBjb25zdCBtcVN0cmluZyA9IGAocmVzb2x1dGlvbjogJHt3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb31kcHB4KWA7XG4gICAgICBjb25zdCBtZWRpYSA9IG1hdGNoTWVkaWEobXFTdHJpbmcpO1xuICAgICAgY29uc3Qgc2FmYXJpQ2IgPSAoZXYpID0+IHtcbiAgICAgICAgaWYgKGV2LnR5cGUgPT09IFwiY2hhbmdlXCIpIHtcbiAgICAgICAgICB1cGRhdGVQaXhlbFJhdGlvKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBpZiAobWVkaWEuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBtZWRpYS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHVwZGF0ZVBpeGVsUmF0aW8pO1xuICAgICAgfSBlbHNlIGlmIChtZWRpYS5hZGRMaXN0ZW5lcikge1xuICAgICAgICBtZWRpYS5hZGRMaXN0ZW5lcihzYWZhcmlDYik7XG4gICAgICB9XG4gICAgICByZW1vdmUgPSAoKSA9PiB7XG4gICAgICAgIGlmIChtZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgbWVkaWEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB1cGRhdGVQaXhlbFJhdGlvKTtcbiAgICAgICAgfSBlbHNlIGlmIChtZWRpYS5yZW1vdmVMaXN0ZW5lcikge1xuICAgICAgICAgIG1lZGlhLnJlbW92ZUxpc3RlbmVyKHNhZmFyaUNiKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGVkaXRvci51cGRhdGVJbnN0YW5jZVN0YXRlKHsgZGV2aWNlUGl4ZWxSYXRpbzogd2luZG93LmRldmljZVBpeGVsUmF0aW8gfSk7XG4gICAgfTtcbiAgICB1cGRhdGVQaXhlbFJhdGlvKCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJlbW92ZT8uKCk7XG4gICAgfTtcbiAgfSwgW2VkaXRvcl0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNBcHBGb2N1c2VkKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZSkgPT4ge1xuICAgICAgaWYgKGUuYWx0S2V5ICYmIC8vIHRvZG86IFdoZW4gc2hvdWxkIHdlIGFsbG93IHRoZSBhbHQga2V5IHRvIGJlIHVzZWQ/IFBlcmhhcHMgc3RhdGVzIHNob3VsZCBkZWNsYXJlIHdoaWNoIGtleXMgbWF0dGVyIHRvIHRoZW0/XG4gICAgICAoZWRpdG9yLmlzSW4oXCJ6b29tXCIpIHx8ICFlZGl0b3IuZ2V0UGF0aCgpLmVuZHNXaXRoKFwiLmlkbGVcIikpICYmICFpc0ZvY3VzaW5nSW5wdXQoKSkge1xuICAgICAgICBwcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIH1cbiAgICAgIGlmIChlLmlzS2lsbGVkKVxuICAgICAgICByZXR1cm47XG4gICAgICBlLmlzS2lsbGVkID0gdHJ1ZTtcbiAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgY2FzZSBcIj1cIjpcbiAgICAgICAgY2FzZSBcIi1cIjpcbiAgICAgICAgY2FzZSBcIjBcIjoge1xuICAgICAgICAgIGlmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5KSB7XG4gICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIlRhYlwiOiB7XG4gICAgICAgICAgaWYgKGlzRm9jdXNpbmdJbnB1dCgpIHx8IGVkaXRvci5nZXRJc01lbnVPcGVuKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIixcIjoge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiRXNjYXBlXCI6IHtcbiAgICAgICAgICBpZiAoZWRpdG9yLmdldEVkaXRpbmdTaGFwZSgpIHx8IGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZWRpdG9yLmdldE9wZW5NZW51cygpLmxlbmd0aCA+IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgaWYgKCFlZGl0b3IuaW5wdXRzLmtleXMuaGFzKFwiRXNjYXBlXCIpKSB7XG4gICAgICAgICAgICBlZGl0b3IuaW5wdXRzLmtleXMuYWRkKFwiRXNjYXBlXCIpO1xuICAgICAgICAgICAgZWRpdG9yLmNhbmNlbCgpO1xuICAgICAgICAgICAgZWRpdG9yLmZvY3VzKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgaWYgKGlzRm9jdXNpbmdJbnB1dCgpIHx8IGVkaXRvci5nZXRJc01lbnVPcGVuKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGluZm8gPSB7XG4gICAgICAgIHR5cGU6IFwia2V5Ym9hcmRcIixcbiAgICAgICAgbmFtZTogZS5yZXBlYXQgPyBcImtleV9yZXBlYXRcIiA6IFwia2V5X2Rvd25cIixcbiAgICAgICAga2V5OiBlLmtleSxcbiAgICAgICAgY29kZTogZS5jb2RlLFxuICAgICAgICBzaGlmdEtleTogZS5zaGlmdEtleSxcbiAgICAgICAgYWx0S2V5OiBlLmFsdEtleSxcbiAgICAgICAgY3RybEtleTogZS5tZXRhS2V5IHx8IGUuY3RybEtleVxuICAgICAgfTtcbiAgICAgIGVkaXRvci5kaXNwYXRjaChpbmZvKTtcbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZUtleVVwID0gKGUpID0+IHtcbiAgICAgIGlmIChlLmlzS2lsbGVkKVxuICAgICAgICByZXR1cm47XG4gICAgICBlLmlzS2lsbGVkID0gdHJ1ZTtcbiAgICAgIGlmIChpc0ZvY3VzaW5nSW5wdXQoKSB8fCBlZGl0b3IuZ2V0SXNNZW51T3BlbigpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChlLmtleSA9PT0gXCIsXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgaW5mbyA9IHtcbiAgICAgICAgdHlwZTogXCJrZXlib2FyZFwiLFxuICAgICAgICBuYW1lOiBcImtleV91cFwiLFxuICAgICAgICBrZXk6IGUua2V5LFxuICAgICAgICBjb2RlOiBlLmNvZGUsXG4gICAgICAgIHNoaWZ0S2V5OiBlLnNoaWZ0S2V5LFxuICAgICAgICBhbHRLZXk6IGUuYWx0S2V5LFxuICAgICAgICBjdHJsS2V5OiBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5XG4gICAgICB9O1xuICAgICAgZWRpdG9yLmRpc3BhdGNoKGluZm8pO1xuICAgIH07XG4gICAgZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydChlKSB7XG4gICAgICBpZiAoY29udGFpbmVyLmNvbnRhaW5zKGUudGFyZ2V0KSkge1xuICAgICAgICBjb25zdCB0b3VjaFhQb3NpdGlvbiA9IGUudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgY29uc3QgdG91Y2hYUmFkaXVzID0gZS50b3VjaGVzWzBdLnJhZGl1c1ggfHwgMDtcbiAgICAgICAgaWYgKHRvdWNoWFBvc2l0aW9uIC0gdG91Y2hYUmFkaXVzIDwgMTAgfHwgdG91Y2hYUG9zaXRpb24gKyB0b3VjaFhSYWRpdXMgPiBlZGl0b3IuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKS53aWR0aCAtIDEwKSB7XG4gICAgICAgICAgaWYgKGUudGFyZ2V0Py50YWdOYW1lID09PSBcIkJVVFRPTlwiKSB7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBlLnRhcmdldD8uY2xpY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcHJldmVudERlZmF1bHQoZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaGFuZGxlV2hlZWwgPSAoZSkgPT4ge1xuICAgICAgaWYgKGNvbnRhaW5lci5jb250YWlucyhlLnRhcmdldCkgJiYgKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpKSB7XG4gICAgICAgIHByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZVRvdWNoU3RhcnQsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBoYW5kbGVXaGVlbCwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZ2VzdHVyZXN0YXJ0XCIsIHByZXZlbnREZWZhdWx0KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZ2VzdHVyZWNoYW5nZVwiLCBwcmV2ZW50RGVmYXVsdCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImdlc3R1cmVlbmRcIiwgcHJldmVudERlZmF1bHQpO1xuICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGhhbmRsZUtleVVwKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZVRvdWNoU3RhcnQpO1xuICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBoYW5kbGVXaGVlbCk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZ2VzdHVyZXN0YXJ0XCIsIHByZXZlbnREZWZhdWx0KTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJnZXN0dXJlY2hhbmdlXCIsIHByZXZlbnREZWZhdWx0KTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJnZXN0dXJlZW5kXCIsIHByZXZlbnREZWZhdWx0KTtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgaGFuZGxlS2V5VXApO1xuICAgIH07XG4gIH0sIFtlZGl0b3IsIGNvbnRhaW5lciwgaXNBcHBGb2N1c2VkXSk7XG59XG5jb25zdCBJTlBVVFMgPSBbXCJpbnB1dFwiLCBcInNlbGVjdFwiLCBcImJ1dHRvblwiLCBcInRleHRhcmVhXCJdO1xuZnVuY3Rpb24gaXNGb2N1c2luZ0lucHV0KCkge1xuICBjb25zdCB7IGFjdGl2ZUVsZW1lbnQgfSA9IGRvY3VtZW50O1xuICBpZiAoYWN0aXZlRWxlbWVudCAmJiAoYWN0aXZlRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikgfHwgSU5QVVRTLmluZGV4T2YoYWN0aXZlRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpID4gLTEpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IHtcbiAgdXNlRG9jdW1lbnRFdmVudHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VEb2N1bWVudEV2ZW50cy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useDocumentEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EditorContext: () => (/* binding */ EditorContext),\n/* harmony export */   useEditor: () => (/* binding */ useEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\nconst EditorContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(null);\nfunction useEditor() {\n  const editor = react__WEBPACK_IMPORTED_MODULE_0__.useContext(EditorContext);\n  if (!editor) {\n    throw new Error(\n      \"useEditor must be used inside of the <Tldraw /> or <TldrawEditor /> components\"\n    );\n  }\n  return editor;\n}\n\n//# sourceMappingURL=useEditor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUVkaXRvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBCO0FBQzFCLHNCQUFzQixnREFBbUI7QUFDekM7QUFDQSxpQkFBaUIsNkNBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlRWRpdG9yLm1qcz80ZTBlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmNvbnN0IEVkaXRvckNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xuZnVuY3Rpb24gdXNlRWRpdG9yKCkge1xuICBjb25zdCBlZGl0b3IgPSBSZWFjdC51c2VDb250ZXh0KEVkaXRvckNvbnRleHQpO1xuICBpZiAoIWVkaXRvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwidXNlRWRpdG9yIG11c3QgYmUgdXNlZCBpbnNpZGUgb2YgdGhlIDxUbGRyYXcgLz4gb3IgPFRsZHJhd0VkaXRvciAvPiBjb21wb25lbnRzXCJcbiAgICApO1xuICB9XG4gIHJldHVybiBlZGl0b3I7XG59XG5leHBvcnQge1xuICBFZGl0b3JDb250ZXh0LFxuICB1c2VFZGl0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VFZGl0b3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EditorComponentsProvider: () => (/* binding */ EditorComponentsProvider),\n/* harmony export */   useEditorComponents: () => (/* binding */ useEditorComponents)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _components_default_components_DefaultBackground_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/default-components/DefaultBackground.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBackground.mjs\");\n/* harmony import */ var _components_default_components_DefaultBrush_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/default-components/DefaultBrush.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultBrush.mjs\");\n/* harmony import */ var _components_default_components_DefaultCanvas_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/default-components/DefaultCanvas.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCanvas.mjs\");\n/* harmony import */ var _components_default_components_DefaultCollaboratorHint_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/default-components/DefaultCollaboratorHint.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCollaboratorHint.mjs\");\n/* harmony import */ var _components_default_components_DefaultCursor_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/default-components/DefaultCursor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultCursor.mjs\");\n/* harmony import */ var _components_default_components_DefaultErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/default-components/DefaultErrorFallback.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultErrorFallback.mjs\");\n/* harmony import */ var _components_default_components_DefaultGrid_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/default-components/DefaultGrid.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultGrid.mjs\");\n/* harmony import */ var _components_default_components_DefaultHandle_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/default-components/DefaultHandle.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandle.mjs\");\n/* harmony import */ var _components_default_components_DefaultHandles_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/default-components/DefaultHandles.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultHandles.mjs\");\n/* harmony import */ var _components_default_components_DefaultLoadingScreen_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/default-components/DefaultLoadingScreen.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultLoadingScreen.mjs\");\n/* harmony import */ var _components_default_components_DefaultScribble_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/default-components/DefaultScribble.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultScribble.mjs\");\n/* harmony import */ var _components_default_components_DefaultSelectionBackground_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/default-components/DefaultSelectionBackground.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionBackground.mjs\");\n/* harmony import */ var _components_default_components_DefaultSelectionForeground_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../components/default-components/DefaultSelectionForeground.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSelectionForeground.mjs\");\n/* harmony import */ var _components_default_components_DefaultShapeErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../components/default-components/DefaultShapeErrorFallback.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeErrorFallback.mjs\");\n/* harmony import */ var _components_default_components_DefaultShapeIndicator_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../components/default-components/DefaultShapeIndicator.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicator.mjs\");\n/* harmony import */ var _components_default_components_DefaultShapeIndicatorErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../components/default-components/DefaultShapeIndicatorErrorFallback.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultShapeIndicatorErrorFallback.mjs\");\n/* harmony import */ var _components_default_components_DefaultSnapIndictor_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../components/default-components/DefaultSnapIndictor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSnapIndictor.mjs\");\n/* harmony import */ var _components_default_components_DefaultSpinner_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../components/default-components/DefaultSpinner.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSpinner.mjs\");\n/* harmony import */ var _components_default_components_DefaultSvgDefs_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../components/default-components/DefaultSvgDefs.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/components/default-components/DefaultSvgDefs.mjs\");\n/* harmony import */ var _useIdentity_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./useIdentity.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst EditorComponentsContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nfunction EditorComponentsProvider({\n  overrides = {},\n  children\n}) {\n  const _overrides = (0,_useIdentity_mjs__WEBPACK_IMPORTED_MODULE_21__.useShallowObjectIdentity)(overrides);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    EditorComponentsContext.Provider,\n    {\n      value: (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(\n        () => ({\n          Background: _components_default_components_DefaultBackground_mjs__WEBPACK_IMPORTED_MODULE_2__.DefaultBackground,\n          SvgDefs: _components_default_components_DefaultSvgDefs_mjs__WEBPACK_IMPORTED_MODULE_20__.DefaultSvgDefs,\n          Brush: _components_default_components_DefaultBrush_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultBrush,\n          ZoomBrush: _components_default_components_DefaultBrush_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultBrush,\n          CollaboratorBrush: _components_default_components_DefaultBrush_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultBrush,\n          Cursor: _components_default_components_DefaultCursor_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultCursor,\n          CollaboratorCursor: _components_default_components_DefaultCursor_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultCursor,\n          CollaboratorHint: _components_default_components_DefaultCollaboratorHint_mjs__WEBPACK_IMPORTED_MODULE_5__.DefaultCollaboratorHint,\n          CollaboratorShapeIndicator: _components_default_components_DefaultShapeIndicator_mjs__WEBPACK_IMPORTED_MODULE_16__.DefaultShapeIndicator,\n          Grid: _components_default_components_DefaultGrid_mjs__WEBPACK_IMPORTED_MODULE_8__.DefaultGrid,\n          Scribble: _components_default_components_DefaultScribble_mjs__WEBPACK_IMPORTED_MODULE_12__.DefaultScribble,\n          SnapIndicator: _components_default_components_DefaultSnapIndictor_mjs__WEBPACK_IMPORTED_MODULE_18__.DefaultSnapIndicator,\n          Handles: _components_default_components_DefaultHandles_mjs__WEBPACK_IMPORTED_MODULE_10__.DefaultHandles,\n          Handle: _components_default_components_DefaultHandle_mjs__WEBPACK_IMPORTED_MODULE_9__.DefaultHandle,\n          CollaboratorScribble: _components_default_components_DefaultScribble_mjs__WEBPACK_IMPORTED_MODULE_12__.DefaultScribble,\n          ErrorFallback: _components_default_components_DefaultErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_7__.DefaultErrorFallback,\n          ShapeErrorFallback: _components_default_components_DefaultShapeErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_15__.DefaultShapeErrorFallback,\n          ShapeIndicatorErrorFallback: _components_default_components_DefaultShapeIndicatorErrorFallback_mjs__WEBPACK_IMPORTED_MODULE_17__.DefaultShapeIndicatorErrorFallback,\n          Spinner: _components_default_components_DefaultSpinner_mjs__WEBPACK_IMPORTED_MODULE_19__.DefaultSpinner,\n          SelectionBackground: _components_default_components_DefaultSelectionBackground_mjs__WEBPACK_IMPORTED_MODULE_13__.DefaultSelectionBackground,\n          SelectionForeground: _components_default_components_DefaultSelectionForeground_mjs__WEBPACK_IMPORTED_MODULE_14__.DefaultSelectionForeground,\n          ShapeIndicator: _components_default_components_DefaultShapeIndicator_mjs__WEBPACK_IMPORTED_MODULE_16__.DefaultShapeIndicator,\n          OnTheCanvas: null,\n          InFrontOfTheCanvas: null,\n          Canvas: _components_default_components_DefaultCanvas_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultCanvas,\n          LoadingScreen: _components_default_components_DefaultLoadingScreen_mjs__WEBPACK_IMPORTED_MODULE_11__.DefaultLoadingScreen,\n          ..._overrides\n        }),\n        [_overrides]\n      ),\n      children\n    }\n  );\n}\nfunction useEditorComponents() {\n  const components = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(EditorComponentsContext);\n  if (!components) {\n    throw new Error(\"useEditorComponents must be used inside of <EditorComponentsProvider />\");\n  }\n  return components;\n}\n\n//# sourceMappingURL=useEditorComponents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUVkaXRvckNvbXBvbmVudHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QztBQUNtQjtBQUNnQztBQUNWO0FBR3JCO0FBR1U7QUFDYTtBQUdoQjtBQUNZO0FBQ0k7QUFDRTtBQUNZO0FBQ1Y7QUFHZDtBQUdBO0FBR0Q7QUFHSjtBQUdhO0FBR2Y7QUFDbUI7QUFDQTtBQUN4QjtBQUM3RCxnQ0FBZ0Msb0RBQWE7QUFDN0M7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxDQUFDO0FBQ0QscUJBQXFCLDJFQUF3QjtBQUM3Qyx5QkFBeUIsc0RBQUc7QUFDNUI7QUFDQTtBQUNBLGFBQWEsOENBQU87QUFDcEI7QUFDQSxzQkFBc0IsbUdBQWlCO0FBQ3ZDLG1CQUFtQiw4RkFBYztBQUNqQyxpQkFBaUIseUZBQVk7QUFDN0IscUJBQXFCLHlGQUFZO0FBQ2pDLDZCQUE2Qix5RkFBWTtBQUN6QyxrQkFBa0IsMkZBQWE7QUFDL0IsOEJBQThCLDJGQUFhO0FBQzNDLDRCQUE0QiwrR0FBdUI7QUFDbkQsc0NBQXNDLDRHQUFxQjtBQUMzRCxnQkFBZ0IsdUZBQVc7QUFDM0Isb0JBQW9CLGdHQUFlO0FBQ25DLHlCQUF5Qix5R0FBb0I7QUFDN0MsbUJBQW1CLDhGQUFjO0FBQ2pDLGtCQUFrQiwyRkFBYTtBQUMvQixnQ0FBZ0MsZ0dBQWU7QUFDL0MseUJBQXlCLHlHQUFvQjtBQUM3Qyw4QkFBOEIsb0hBQXlCO0FBQ3ZELHVDQUF1QyxzSUFBa0M7QUFDekUsbUJBQW1CLDhGQUFjO0FBQ2pDLCtCQUErQixzSEFBMEI7QUFDekQsK0JBQStCLHNIQUEwQjtBQUN6RCwwQkFBMEIsNEdBQXFCO0FBQy9DO0FBQ0E7QUFDQSxrQkFBa0IsMkZBQWE7QUFDL0IseUJBQXlCLDBHQUFvQjtBQUM3QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixpREFBVTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlRWRpdG9yQ29tcG9uZW50cy5tanM/YzE3MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IERlZmF1bHRCYWNrZ3JvdW5kIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRCYWNrZ3JvdW5kLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdEJydXNoIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRCcnVzaC5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRDYW52YXNcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDYW52YXMubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0Q29sbGFib3JhdG9ySGludFxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdENvbGxhYm9yYXRvckhpbnQubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0Q3Vyc29yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRDdXJzb3IubWpzXCI7XG5pbXBvcnQge1xuICBEZWZhdWx0RXJyb3JGYWxsYmFja1xufSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdEVycm9yRmFsbGJhY2subWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0R3JpZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0R3JpZC5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRIYW5kbGUgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdEhhbmRsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRIYW5kbGVzIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRIYW5kbGVzLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdExvYWRpbmdTY3JlZW4gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdExvYWRpbmdTY3JlZW4ubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0U2NyaWJibGUgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNjcmliYmxlLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFNlbGVjdGlvbkJhY2tncm91bmRcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTZWxlY3Rpb25CYWNrZ3JvdW5kLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFNlbGVjdGlvbkZvcmVncm91bmRcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZGVmYXVsdC1jb21wb25lbnRzL0RlZmF1bHRTZWxlY3Rpb25Gb3JlZ3JvdW5kLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFNoYXBlRXJyb3JGYWxsYmFja1xufSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNoYXBlRXJyb3JGYWxsYmFjay5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRTaGFwZUluZGljYXRvclxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNoYXBlSW5kaWNhdG9yLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFNoYXBlSW5kaWNhdG9yRXJyb3JGYWxsYmFja1xufSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNoYXBlSW5kaWNhdG9yRXJyb3JGYWxsYmFjay5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRTbmFwSW5kaWNhdG9yXG59IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U25hcEluZGljdG9yLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdFNwaW5uZXIgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9kZWZhdWx0LWNvbXBvbmVudHMvRGVmYXVsdFNwaW5uZXIubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0U3ZnRGVmcyB9IGZyb20gXCIuLi9jb21wb25lbnRzL2RlZmF1bHQtY29tcG9uZW50cy9EZWZhdWx0U3ZnRGVmcy5tanNcIjtcbmltcG9ydCB7IHVzZVNoYWxsb3dPYmplY3RJZGVudGl0eSB9IGZyb20gXCIuL3VzZUlkZW50aXR5Lm1qc1wiO1xuY29uc3QgRWRpdG9yQ29tcG9uZW50c0NvbnRleHQgPSBjcmVhdGVDb250ZXh0KG51bGwpO1xuZnVuY3Rpb24gRWRpdG9yQ29tcG9uZW50c1Byb3ZpZGVyKHtcbiAgb3ZlcnJpZGVzID0ge30sXG4gIGNoaWxkcmVuXG59KSB7XG4gIGNvbnN0IF9vdmVycmlkZXMgPSB1c2VTaGFsbG93T2JqZWN0SWRlbnRpdHkob3ZlcnJpZGVzKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgRWRpdG9yQ29tcG9uZW50c0NvbnRleHQuUHJvdmlkZXIsXG4gICAge1xuICAgICAgdmFsdWU6IHVzZU1lbW8oXG4gICAgICAgICgpID0+ICh7XG4gICAgICAgICAgQmFja2dyb3VuZDogRGVmYXVsdEJhY2tncm91bmQsXG4gICAgICAgICAgU3ZnRGVmczogRGVmYXVsdFN2Z0RlZnMsXG4gICAgICAgICAgQnJ1c2g6IERlZmF1bHRCcnVzaCxcbiAgICAgICAgICBab29tQnJ1c2g6IERlZmF1bHRCcnVzaCxcbiAgICAgICAgICBDb2xsYWJvcmF0b3JCcnVzaDogRGVmYXVsdEJydXNoLFxuICAgICAgICAgIEN1cnNvcjogRGVmYXVsdEN1cnNvcixcbiAgICAgICAgICBDb2xsYWJvcmF0b3JDdXJzb3I6IERlZmF1bHRDdXJzb3IsXG4gICAgICAgICAgQ29sbGFib3JhdG9ySGludDogRGVmYXVsdENvbGxhYm9yYXRvckhpbnQsXG4gICAgICAgICAgQ29sbGFib3JhdG9yU2hhcGVJbmRpY2F0b3I6IERlZmF1bHRTaGFwZUluZGljYXRvcixcbiAgICAgICAgICBHcmlkOiBEZWZhdWx0R3JpZCxcbiAgICAgICAgICBTY3JpYmJsZTogRGVmYXVsdFNjcmliYmxlLFxuICAgICAgICAgIFNuYXBJbmRpY2F0b3I6IERlZmF1bHRTbmFwSW5kaWNhdG9yLFxuICAgICAgICAgIEhhbmRsZXM6IERlZmF1bHRIYW5kbGVzLFxuICAgICAgICAgIEhhbmRsZTogRGVmYXVsdEhhbmRsZSxcbiAgICAgICAgICBDb2xsYWJvcmF0b3JTY3JpYmJsZTogRGVmYXVsdFNjcmliYmxlLFxuICAgICAgICAgIEVycm9yRmFsbGJhY2s6IERlZmF1bHRFcnJvckZhbGxiYWNrLFxuICAgICAgICAgIFNoYXBlRXJyb3JGYWxsYmFjazogRGVmYXVsdFNoYXBlRXJyb3JGYWxsYmFjayxcbiAgICAgICAgICBTaGFwZUluZGljYXRvckVycm9yRmFsbGJhY2s6IERlZmF1bHRTaGFwZUluZGljYXRvckVycm9yRmFsbGJhY2ssXG4gICAgICAgICAgU3Bpbm5lcjogRGVmYXVsdFNwaW5uZXIsXG4gICAgICAgICAgU2VsZWN0aW9uQmFja2dyb3VuZDogRGVmYXVsdFNlbGVjdGlvbkJhY2tncm91bmQsXG4gICAgICAgICAgU2VsZWN0aW9uRm9yZWdyb3VuZDogRGVmYXVsdFNlbGVjdGlvbkZvcmVncm91bmQsXG4gICAgICAgICAgU2hhcGVJbmRpY2F0b3I6IERlZmF1bHRTaGFwZUluZGljYXRvcixcbiAgICAgICAgICBPblRoZUNhbnZhczogbnVsbCxcbiAgICAgICAgICBJbkZyb250T2ZUaGVDYW52YXM6IG51bGwsXG4gICAgICAgICAgQ2FudmFzOiBEZWZhdWx0Q2FudmFzLFxuICAgICAgICAgIExvYWRpbmdTY3JlZW46IERlZmF1bHRMb2FkaW5nU2NyZWVuLFxuICAgICAgICAgIC4uLl9vdmVycmlkZXNcbiAgICAgICAgfSksXG4gICAgICAgIFtfb3ZlcnJpZGVzXVxuICAgICAgKSxcbiAgICAgIGNoaWxkcmVuXG4gICAgfVxuICApO1xufVxuZnVuY3Rpb24gdXNlRWRpdG9yQ29tcG9uZW50cygpIHtcbiAgY29uc3QgY29tcG9uZW50cyA9IHVzZUNvbnRleHQoRWRpdG9yQ29tcG9uZW50c0NvbnRleHQpO1xuICBpZiAoIWNvbXBvbmVudHMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VFZGl0b3JDb21wb25lbnRzIG11c3QgYmUgdXNlZCBpbnNpZGUgb2YgPEVkaXRvckNvbXBvbmVudHNQcm92aWRlciAvPlwiKTtcbiAgfVxuICByZXR1cm4gY29tcG9uZW50cztcbn1cbmV4cG9ydCB7XG4gIEVkaXRvckNvbXBvbmVudHNQcm92aWRlcixcbiAgdXNlRWRpdG9yQ29tcG9uZW50c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUVkaXRvckNvbXBvbmVudHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditorComponents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEvent.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEvent.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useEvent: () => (/* binding */ useEvent)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nfunction useEvent(handler) {\n  const handlerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(() => {\n    handlerRef.current = handler;\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useDebugValue)(handler);\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((...args) => {\n    const fn = handlerRef.current;\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(fn, \"fn does not exist\");\n    return fn(...args);\n  }, []);\n}\n\n//# sourceMappingURL=useEvent.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUV2ZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUM7QUFDcUM7QUFDNUU7QUFDQSxxQkFBcUIsNkNBQU07QUFDM0IsRUFBRSxzREFBZTtBQUNqQjtBQUNBLEdBQUc7QUFDSCxFQUFFLG9EQUFhO0FBQ2YsU0FBUyxrREFBVztBQUNwQjtBQUNBLElBQUkscURBQU07QUFDVjtBQUNBLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUV2ZW50Lm1qcz81NGQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzc2VydCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRGVidWdWYWx1ZSwgdXNlTGF5b3V0RWZmZWN0LCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZUV2ZW50KGhhbmRsZXIpIHtcbiAgY29uc3QgaGFuZGxlclJlZiA9IHVzZVJlZigpO1xuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGhhbmRsZXJSZWYuY3VycmVudCA9IGhhbmRsZXI7XG4gIH0pO1xuICB1c2VEZWJ1Z1ZhbHVlKGhhbmRsZXIpO1xuICByZXR1cm4gdXNlQ2FsbGJhY2soKC4uLmFyZ3MpID0+IHtcbiAgICBjb25zdCBmbiA9IGhhbmRsZXJSZWYuY3VycmVudDtcbiAgICBhc3NlcnQoZm4sIFwiZm4gZG9lcyBub3QgZXhpc3RcIik7XG4gICAgcmV0dXJuIGZuKC4uLmFyZ3MpO1xuICB9LCBbXSk7XG59XG5leHBvcnQge1xuICB1c2VFdmVudFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUV2ZW50Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEvent.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useFixSafariDoubleTapZoomPencilEvents.mjs":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useFixSafariDoubleTapZoomPencilEvents.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFixSafariDoubleTapZoomPencilEvents: () => (/* binding */ useFixSafariDoubleTapZoomPencilEvents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\nconst IGNORED_TAGS = [\"textarea\", \"input\"];\nfunction useFixSafariDoubleTapZoomPencilEvents(ref) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const elm = ref.current;\n    if (!elm)\n      return;\n    const handleEvent = (e) => {\n      if (e instanceof PointerEvent && e.pointerType === \"pen\") {\n        ;\n        e.isKilled = true;\n        const { target } = e;\n        if (IGNORED_TAGS.includes(target.tagName?.toLocaleLowerCase()) || editor.isIn(\"select.editing_shape\")) {\n          return;\n        }\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__.preventDefault)(e);\n      }\n    };\n    elm.addEventListener(\"touchstart\", handleEvent);\n    elm.addEventListener(\"touchend\", handleEvent);\n    return () => {\n      elm.removeEventListener(\"touchstart\", handleEvent);\n      elm.removeEventListener(\"touchend\", handleEvent);\n    };\n  }, [editor, ref]);\n}\n\n//# sourceMappingURL=useFixSafariDoubleTapZoomPencilEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUZpeFNhZmFyaURvdWJsZVRhcFpvb21QZW5jaWxFdmVudHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0M7QUFDZ0I7QUFDTjtBQUM1QztBQUNBO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUZpeFNhZmFyaURvdWJsZVRhcFpvb21QZW5jaWxFdmVudHMubWpzPzg2MGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBwcmV2ZW50RGVmYXVsdCB9IGZyb20gXCIuLi91dGlscy9kb20ubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi91c2VFZGl0b3IubWpzXCI7XG5jb25zdCBJR05PUkVEX1RBR1MgPSBbXCJ0ZXh0YXJlYVwiLCBcImlucHV0XCJdO1xuZnVuY3Rpb24gdXNlRml4U2FmYXJpRG91YmxlVGFwWm9vbVBlbmNpbEV2ZW50cyhyZWYpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZWxtID0gcmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFlbG0pXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgaGFuZGxlRXZlbnQgPSAoZSkgPT4ge1xuICAgICAgaWYgKGUgaW5zdGFuY2VvZiBQb2ludGVyRXZlbnQgJiYgZS5wb2ludGVyVHlwZSA9PT0gXCJwZW5cIikge1xuICAgICAgICA7XG4gICAgICAgIGUuaXNLaWxsZWQgPSB0cnVlO1xuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZTtcbiAgICAgICAgaWYgKElHTk9SRURfVEFHUy5pbmNsdWRlcyh0YXJnZXQudGFnTmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSkgfHwgZWRpdG9yLmlzSW4oXCJzZWxlY3QuZWRpdGluZ19zaGFwZVwiKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGVsbS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBoYW5kbGVFdmVudCk7XG4gICAgZWxtLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBoYW5kbGVFdmVudCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGVsbS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBoYW5kbGVFdmVudCk7XG4gICAgICBlbG0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGhhbmRsZUV2ZW50KTtcbiAgICB9O1xuICB9LCBbZWRpdG9yLCByZWZdKTtcbn1cbmV4cG9ydCB7XG4gIHVzZUZpeFNhZmFyaURvdWJsZVRhcFpvb21QZW5jaWxFdmVudHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VGaXhTYWZhcmlEb3VibGVUYXBab29tUGVuY2lsRXZlbnRzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useFixSafariDoubleTapZoomPencilEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useForceUpdate.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useForceUpdate.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useForceUpdate: () => (/* binding */ useForceUpdate)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\nfunction useForceUpdate() {\n  const [_, ss] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => ss((s) => s + 1), []);\n}\n\n//# sourceMappingURL=useForceUpdate.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUZvcmNlVXBkYXRlLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0QztBQUM1QztBQUNBLGtCQUFrQiwrQ0FBUTtBQUMxQixFQUFFLGdEQUFTO0FBQ1g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VGb3JjZVVwZGF0ZS5tanM/M2Q0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VGb3JjZVVwZGF0ZSgpIHtcbiAgY29uc3QgW18sIHNzXSA9IHVzZVN0YXRlKDApO1xuICB1c2VFZmZlY3QoKCkgPT4gc3MoKHMpID0+IHMgKyAxKSwgW10pO1xufVxuZXhwb3J0IHtcbiAgdXNlRm9yY2VVcGRhdGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VGb3JjZVVwZGF0ZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useForceUpdate.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useGestureEvents.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useGestureEvents.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useGestureEvents: () => (/* binding */ useGestureEvents)\n/* harmony export */ });\n/* harmony import */ var _use_gesture_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @use-gesture/react */ \"(ssr)/./node_modules/@use-gesture/react/dist/use-gesture-react.esm.js\");\n/* harmony import */ var _use_gesture_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @use-gesture/react */ \"(ssr)/./node_modules/@use-gesture/core/actions/dist/use-gesture-core-actions.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _utils_normalizeWheel_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/normalizeWheel.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/normalizeWheel.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\n\n\nconst useGesture = (0,_use_gesture_react__WEBPACK_IMPORTED_MODULE_5__.createUseGesture)([_use_gesture_react__WEBPACK_IMPORTED_MODULE_6__.wheelAction, _use_gesture_react__WEBPACK_IMPORTED_MODULE_6__.pinchAction]);\nlet lastWheelTime = void 0;\nconst isWheelEndEvent = (time) => {\n  if (lastWheelTime === void 0) {\n    lastWheelTime = time;\n    return false;\n  }\n  if (time - lastWheelTime > 120 && time - lastWheelTime < 160) {\n    lastWheelTime = time;\n    return true;\n  }\n  lastWheelTime = time;\n  return false;\n};\nfunction useGestureEvents(ref) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const events = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    let pinchState = \"not sure\";\n    const onWheel = ({ event }) => {\n      if (!editor.getInstanceState().isFocused) {\n        return;\n      }\n      pinchState = \"not sure\";\n      if (isWheelEndEvent(Date.now())) {\n        return;\n      }\n      const editingShapeId = editor.getEditingShapeId();\n      if (editingShapeId) {\n        const shape = editor.getShape(editingShapeId);\n        if (shape) {\n          const util = editor.getShapeUtil(shape);\n          if (util.canScroll(shape)) {\n            const bounds = editor.getShapePageBounds(editingShapeId);\n            if (bounds?.containsPoint(editor.inputs.currentPagePoint)) {\n              return;\n            }\n          }\n        }\n      }\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.preventDefault)(event);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.stopEventPropagation)(event);\n      const delta = (0,_utils_normalizeWheel_mjs__WEBPACK_IMPORTED_MODULE_3__.normalizeWheel)(event);\n      if (delta.x === 0 && delta.y === 0)\n        return;\n      const info = {\n        type: \"wheel\",\n        name: \"wheel\",\n        delta,\n        point: new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(event.clientX, event.clientY),\n        shiftKey: event.shiftKey,\n        altKey: event.altKey,\n        ctrlKey: event.metaKey || event.ctrlKey\n      };\n      editor.dispatch(info);\n    };\n    let initDistanceBetweenFingers = 1;\n    let initZoom = 1;\n    let currZoom = 1;\n    let currDistanceBetweenFingers = 0;\n    const initPointBetweenFingers = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec();\n    const prevPointBetweenFingers = new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec();\n    const onPinchStart = (gesture) => {\n      const elm = ref.current;\n      pinchState = \"not sure\";\n      const { event, origin, da } = gesture;\n      if (event instanceof WheelEvent)\n        return;\n      if (!(event.target === elm || elm?.contains(event.target)))\n        return;\n      prevPointBetweenFingers.x = origin[0];\n      prevPointBetweenFingers.y = origin[1];\n      initPointBetweenFingers.x = origin[0];\n      initPointBetweenFingers.y = origin[1];\n      initDistanceBetweenFingers = da[0];\n      initZoom = editor.getZoomLevel();\n      editor.dispatch({\n        type: \"pinch\",\n        name: \"pinch_start\",\n        point: { x: origin[0], y: origin[1], z: editor.getZoomLevel() },\n        delta: { x: 0, y: 0 },\n        shiftKey: event.shiftKey,\n        altKey: event.altKey,\n        ctrlKey: event.metaKey || event.ctrlKey\n      });\n    };\n    const updatePinchState = (isSafariTrackpadPinch) => {\n      if (isSafariTrackpadPinch) {\n        pinchState = \"zooming\";\n      }\n      if (pinchState === \"zooming\") {\n        return;\n      }\n      const touchDistance = Math.abs(currDistanceBetweenFingers - initDistanceBetweenFingers);\n      const originDistance = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist(initPointBetweenFingers, prevPointBetweenFingers);\n      switch (pinchState) {\n        case \"not sure\": {\n          if (touchDistance > 24) {\n            pinchState = \"zooming\";\n          } else if (originDistance > 16) {\n            pinchState = \"panning\";\n          }\n          break;\n        }\n        case \"panning\": {\n          if (touchDistance > 64) {\n            pinchState = \"zooming\";\n          }\n          break;\n        }\n      }\n    };\n    const onPinch = (gesture) => {\n      const elm = ref.current;\n      const { event, origin, offset, da } = gesture;\n      if (event instanceof WheelEvent)\n        return;\n      if (!(event.target === elm || elm?.contains(event.target)))\n        return;\n      const isSafariTrackpadPinch = gesture.type === \"gesturechange\" || gesture.type === \"gestureend\";\n      currDistanceBetweenFingers = da[0];\n      const dx = origin[0] - prevPointBetweenFingers.x;\n      const dy = origin[1] - prevPointBetweenFingers.y;\n      prevPointBetweenFingers.x = origin[0];\n      prevPointBetweenFingers.y = origin[1];\n      updatePinchState(isSafariTrackpadPinch);\n      switch (pinchState) {\n        case \"zooming\": {\n          currZoom = offset[0];\n          editor.dispatch({\n            type: \"pinch\",\n            name: \"pinch\",\n            point: { x: origin[0], y: origin[1], z: currZoom },\n            delta: { x: dx, y: dy },\n            shiftKey: event.shiftKey,\n            altKey: event.altKey,\n            ctrlKey: event.metaKey || event.ctrlKey\n          });\n          break;\n        }\n        case \"panning\": {\n          editor.dispatch({\n            type: \"pinch\",\n            name: \"pinch\",\n            point: { x: origin[0], y: origin[1], z: initZoom },\n            delta: { x: dx, y: dy },\n            shiftKey: event.shiftKey,\n            altKey: event.altKey,\n            ctrlKey: event.metaKey || event.ctrlKey\n          });\n          break;\n        }\n      }\n    };\n    const onPinchEnd = (gesture) => {\n      const elm = ref.current;\n      const { event, origin, offset } = gesture;\n      if (event instanceof WheelEvent)\n        return;\n      if (!(event.target === elm || elm?.contains(event.target)))\n        return;\n      const scale = offset[0];\n      pinchState = \"not sure\";\n      editor.timers.requestAnimationFrame(() => {\n        editor.dispatch({\n          type: \"pinch\",\n          name: \"pinch_end\",\n          point: { x: origin[0], y: origin[1], z: scale },\n          delta: { x: origin[0], y: origin[1] },\n          shiftKey: event.shiftKey,\n          altKey: event.altKey,\n          ctrlKey: event.metaKey || event.ctrlKey\n        });\n      });\n    };\n    return {\n      onWheel,\n      onPinchStart,\n      onPinchEnd,\n      onPinch\n    };\n  }, [editor, ref]);\n  useGesture(events, {\n    target: ref,\n    eventOptions: { passive: false },\n    pinch: {\n      from: () => [editor.getZoomLevel(), 0],\n      // Return the camera z to use when pinch starts\n      scaleBounds: () => {\n        return { from: editor.getZoomLevel(), max: 8, min: 0.05 };\n      }\n    }\n  });\n}\n\n//# sourceMappingURL=useGestureEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUdlc3R1cmVFdmVudHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWdGO0FBQ2pEO0FBQ2E7QUFDNEI7QUFDWDtBQUNqQjtBQUM1QyxtQkFBbUIsb0VBQWdCLEVBQUUsMkRBQVcsRUFBRSwyREFBVztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLGlCQUFpQiwwQ0FBYTtBQUM5QjtBQUNBLHVCQUF1QixPQUFPO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDhEQUFjO0FBQ3BCLE1BQU0sb0VBQW9CO0FBQzFCLG9CQUFvQix5RUFBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsb0RBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msb0RBQUc7QUFDM0Msd0NBQXdDLG9EQUFHO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0JBQW9CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNEQUFzRDtBQUN2RSxpQkFBaUIsWUFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFHO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDRCQUE0QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHlDQUF5QztBQUM5RCxxQkFBcUIsY0FBYztBQUNuQztBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHlDQUF5QztBQUM5RCxxQkFBcUIsY0FBYztBQUNuQztBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3QkFBd0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsc0NBQXNDO0FBQ3pELG1CQUFtQiw0QkFBNEI7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlR2VzdHVyZUV2ZW50cy5tanM/NmZmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVVc2VHZXN0dXJlLCBwaW5jaEFjdGlvbiwgd2hlZWxBY3Rpb24gfSBmcm9tIFwiQHVzZS1nZXN0dXJlL3JlYWN0XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9wcmltaXRpdmVzL1ZlYy5tanNcIjtcbmltcG9ydCB7IHByZXZlbnREZWZhdWx0LCBzdG9wRXZlbnRQcm9wYWdhdGlvbiB9IGZyb20gXCIuLi91dGlscy9kb20ubWpzXCI7XG5pbXBvcnQgeyBub3JtYWxpemVXaGVlbCB9IGZyb20gXCIuLi91dGlscy9ub3JtYWxpemVXaGVlbC5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmNvbnN0IHVzZUdlc3R1cmUgPSBjcmVhdGVVc2VHZXN0dXJlKFt3aGVlbEFjdGlvbiwgcGluY2hBY3Rpb25dKTtcbmxldCBsYXN0V2hlZWxUaW1lID0gdm9pZCAwO1xuY29uc3QgaXNXaGVlbEVuZEV2ZW50ID0gKHRpbWUpID0+IHtcbiAgaWYgKGxhc3RXaGVlbFRpbWUgPT09IHZvaWQgMCkge1xuICAgIGxhc3RXaGVlbFRpbWUgPSB0aW1lO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAodGltZSAtIGxhc3RXaGVlbFRpbWUgPiAxMjAgJiYgdGltZSAtIGxhc3RXaGVlbFRpbWUgPCAxNjApIHtcbiAgICBsYXN0V2hlZWxUaW1lID0gdGltZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBsYXN0V2hlZWxUaW1lID0gdGltZTtcbiAgcmV0dXJuIGZhbHNlO1xufTtcbmZ1bmN0aW9uIHVzZUdlc3R1cmVFdmVudHMocmVmKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBldmVudHMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBsZXQgcGluY2hTdGF0ZSA9IFwibm90IHN1cmVcIjtcbiAgICBjb25zdCBvbldoZWVsID0gKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgaWYgKCFlZGl0b3IuZ2V0SW5zdGFuY2VTdGF0ZSgpLmlzRm9jdXNlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwaW5jaFN0YXRlID0gXCJub3Qgc3VyZVwiO1xuICAgICAgaWYgKGlzV2hlZWxFbmRFdmVudChEYXRlLm5vdygpKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBlZGl0aW5nU2hhcGVJZCA9IGVkaXRvci5nZXRFZGl0aW5nU2hhcGVJZCgpO1xuICAgICAgaWYgKGVkaXRpbmdTaGFwZUlkKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0gZWRpdG9yLmdldFNoYXBlKGVkaXRpbmdTaGFwZUlkKTtcbiAgICAgICAgaWYgKHNoYXBlKSB7XG4gICAgICAgICAgY29uc3QgdXRpbCA9IGVkaXRvci5nZXRTaGFwZVV0aWwoc2hhcGUpO1xuICAgICAgICAgIGlmICh1dGlsLmNhblNjcm9sbChzaGFwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IGVkaXRvci5nZXRTaGFwZVBhZ2VCb3VuZHMoZWRpdGluZ1NoYXBlSWQpO1xuICAgICAgICAgICAgaWYgKGJvdW5kcz8uY29udGFpbnNQb2ludChlZGl0b3IuaW5wdXRzLmN1cnJlbnRQYWdlUG9pbnQpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHByZXZlbnREZWZhdWx0KGV2ZW50KTtcbiAgICAgIHN0b3BFdmVudFByb3BhZ2F0aW9uKGV2ZW50KTtcbiAgICAgIGNvbnN0IGRlbHRhID0gbm9ybWFsaXplV2hlZWwoZXZlbnQpO1xuICAgICAgaWYgKGRlbHRhLnggPT09IDAgJiYgZGVsdGEueSA9PT0gMClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY29uc3QgaW5mbyA9IHtcbiAgICAgICAgdHlwZTogXCJ3aGVlbFwiLFxuICAgICAgICBuYW1lOiBcIndoZWVsXCIsXG4gICAgICAgIGRlbHRhLFxuICAgICAgICBwb2ludDogbmV3IFZlYyhldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKSxcbiAgICAgICAgc2hpZnRLZXk6IGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgICBhbHRLZXk6IGV2ZW50LmFsdEtleSxcbiAgICAgICAgY3RybEtleTogZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5XG4gICAgICB9O1xuICAgICAgZWRpdG9yLmRpc3BhdGNoKGluZm8pO1xuICAgIH07XG4gICAgbGV0IGluaXREaXN0YW5jZUJldHdlZW5GaW5nZXJzID0gMTtcbiAgICBsZXQgaW5pdFpvb20gPSAxO1xuICAgIGxldCBjdXJyWm9vbSA9IDE7XG4gICAgbGV0IGN1cnJEaXN0YW5jZUJldHdlZW5GaW5nZXJzID0gMDtcbiAgICBjb25zdCBpbml0UG9pbnRCZXR3ZWVuRmluZ2VycyA9IG5ldyBWZWMoKTtcbiAgICBjb25zdCBwcmV2UG9pbnRCZXR3ZWVuRmluZ2VycyA9IG5ldyBWZWMoKTtcbiAgICBjb25zdCBvblBpbmNoU3RhcnQgPSAoZ2VzdHVyZSkgPT4ge1xuICAgICAgY29uc3QgZWxtID0gcmVmLmN1cnJlbnQ7XG4gICAgICBwaW5jaFN0YXRlID0gXCJub3Qgc3VyZVwiO1xuICAgICAgY29uc3QgeyBldmVudCwgb3JpZ2luLCBkYSB9ID0gZ2VzdHVyZTtcbiAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIFdoZWVsRXZlbnQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmICghKGV2ZW50LnRhcmdldCA9PT0gZWxtIHx8IGVsbT8uY29udGFpbnMoZXZlbnQudGFyZ2V0KSkpXG4gICAgICAgIHJldHVybjtcbiAgICAgIHByZXZQb2ludEJldHdlZW5GaW5nZXJzLnggPSBvcmlnaW5bMF07XG4gICAgICBwcmV2UG9pbnRCZXR3ZWVuRmluZ2Vycy55ID0gb3JpZ2luWzFdO1xuICAgICAgaW5pdFBvaW50QmV0d2VlbkZpbmdlcnMueCA9IG9yaWdpblswXTtcbiAgICAgIGluaXRQb2ludEJldHdlZW5GaW5nZXJzLnkgPSBvcmlnaW5bMV07XG4gICAgICBpbml0RGlzdGFuY2VCZXR3ZWVuRmluZ2VycyA9IGRhWzBdO1xuICAgICAgaW5pdFpvb20gPSBlZGl0b3IuZ2V0Wm9vbUxldmVsKCk7XG4gICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcInBpbmNoXCIsXG4gICAgICAgIG5hbWU6IFwicGluY2hfc3RhcnRcIixcbiAgICAgICAgcG9pbnQ6IHsgeDogb3JpZ2luWzBdLCB5OiBvcmlnaW5bMV0sIHo6IGVkaXRvci5nZXRab29tTGV2ZWwoKSB9LFxuICAgICAgICBkZWx0YTogeyB4OiAwLCB5OiAwIH0sXG4gICAgICAgIHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSxcbiAgICAgICAgYWx0S2V5OiBldmVudC5hbHRLZXksXG4gICAgICAgIGN0cmxLZXk6IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleVxuICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCB1cGRhdGVQaW5jaFN0YXRlID0gKGlzU2FmYXJpVHJhY2twYWRQaW5jaCkgPT4ge1xuICAgICAgaWYgKGlzU2FmYXJpVHJhY2twYWRQaW5jaCkge1xuICAgICAgICBwaW5jaFN0YXRlID0gXCJ6b29taW5nXCI7XG4gICAgICB9XG4gICAgICBpZiAocGluY2hTdGF0ZSA9PT0gXCJ6b29taW5nXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgdG91Y2hEaXN0YW5jZSA9IE1hdGguYWJzKGN1cnJEaXN0YW5jZUJldHdlZW5GaW5nZXJzIC0gaW5pdERpc3RhbmNlQmV0d2VlbkZpbmdlcnMpO1xuICAgICAgY29uc3Qgb3JpZ2luRGlzdGFuY2UgPSBWZWMuRGlzdChpbml0UG9pbnRCZXR3ZWVuRmluZ2VycywgcHJldlBvaW50QmV0d2VlbkZpbmdlcnMpO1xuICAgICAgc3dpdGNoIChwaW5jaFN0YXRlKSB7XG4gICAgICAgIGNhc2UgXCJub3Qgc3VyZVwiOiB7XG4gICAgICAgICAgaWYgKHRvdWNoRGlzdGFuY2UgPiAyNCkge1xuICAgICAgICAgICAgcGluY2hTdGF0ZSA9IFwiem9vbWluZ1wiO1xuICAgICAgICAgIH0gZWxzZSBpZiAob3JpZ2luRGlzdGFuY2UgPiAxNikge1xuICAgICAgICAgICAgcGluY2hTdGF0ZSA9IFwicGFubmluZ1wiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicGFubmluZ1wiOiB7XG4gICAgICAgICAgaWYgKHRvdWNoRGlzdGFuY2UgPiA2NCkge1xuICAgICAgICAgICAgcGluY2hTdGF0ZSA9IFwiem9vbWluZ1wiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgb25QaW5jaCA9IChnZXN0dXJlKSA9PiB7XG4gICAgICBjb25zdCBlbG0gPSByZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IHsgZXZlbnQsIG9yaWdpbiwgb2Zmc2V0LCBkYSB9ID0gZ2VzdHVyZTtcbiAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIFdoZWVsRXZlbnQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmICghKGV2ZW50LnRhcmdldCA9PT0gZWxtIHx8IGVsbT8uY29udGFpbnMoZXZlbnQudGFyZ2V0KSkpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IGlzU2FmYXJpVHJhY2twYWRQaW5jaCA9IGdlc3R1cmUudHlwZSA9PT0gXCJnZXN0dXJlY2hhbmdlXCIgfHwgZ2VzdHVyZS50eXBlID09PSBcImdlc3R1cmVlbmRcIjtcbiAgICAgIGN1cnJEaXN0YW5jZUJldHdlZW5GaW5nZXJzID0gZGFbMF07XG4gICAgICBjb25zdCBkeCA9IG9yaWdpblswXSAtIHByZXZQb2ludEJldHdlZW5GaW5nZXJzLng7XG4gICAgICBjb25zdCBkeSA9IG9yaWdpblsxXSAtIHByZXZQb2ludEJldHdlZW5GaW5nZXJzLnk7XG4gICAgICBwcmV2UG9pbnRCZXR3ZWVuRmluZ2Vycy54ID0gb3JpZ2luWzBdO1xuICAgICAgcHJldlBvaW50QmV0d2VlbkZpbmdlcnMueSA9IG9yaWdpblsxXTtcbiAgICAgIHVwZGF0ZVBpbmNoU3RhdGUoaXNTYWZhcmlUcmFja3BhZFBpbmNoKTtcbiAgICAgIHN3aXRjaCAocGluY2hTdGF0ZSkge1xuICAgICAgICBjYXNlIFwiem9vbWluZ1wiOiB7XG4gICAgICAgICAgY3Vyclpvb20gPSBvZmZzZXRbMF07XG4gICAgICAgICAgZWRpdG9yLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwicGluY2hcIixcbiAgICAgICAgICAgIG5hbWU6IFwicGluY2hcIixcbiAgICAgICAgICAgIHBvaW50OiB7IHg6IG9yaWdpblswXSwgeTogb3JpZ2luWzFdLCB6OiBjdXJyWm9vbSB9LFxuICAgICAgICAgICAgZGVsdGE6IHsgeDogZHgsIHk6IGR5IH0sXG4gICAgICAgICAgICBzaGlmdEtleTogZXZlbnQuc2hpZnRLZXksXG4gICAgICAgICAgICBhbHRLZXk6IGV2ZW50LmFsdEtleSxcbiAgICAgICAgICAgIGN0cmxLZXk6IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJwYW5uaW5nXCI6IHtcbiAgICAgICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogXCJwaW5jaFwiLFxuICAgICAgICAgICAgbmFtZTogXCJwaW5jaFwiLFxuICAgICAgICAgICAgcG9pbnQ6IHsgeDogb3JpZ2luWzBdLCB5OiBvcmlnaW5bMV0sIHo6IGluaXRab29tIH0sXG4gICAgICAgICAgICBkZWx0YTogeyB4OiBkeCwgeTogZHkgfSxcbiAgICAgICAgICAgIHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSxcbiAgICAgICAgICAgIGFsdEtleTogZXZlbnQuYWx0S2V5LFxuICAgICAgICAgICAgY3RybEtleTogZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG9uUGluY2hFbmQgPSAoZ2VzdHVyZSkgPT4ge1xuICAgICAgY29uc3QgZWxtID0gcmVmLmN1cnJlbnQ7XG4gICAgICBjb25zdCB7IGV2ZW50LCBvcmlnaW4sIG9mZnNldCB9ID0gZ2VzdHVyZTtcbiAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIFdoZWVsRXZlbnQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmICghKGV2ZW50LnRhcmdldCA9PT0gZWxtIHx8IGVsbT8uY29udGFpbnMoZXZlbnQudGFyZ2V0KSkpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IHNjYWxlID0gb2Zmc2V0WzBdO1xuICAgICAgcGluY2hTdGF0ZSA9IFwibm90IHN1cmVcIjtcbiAgICAgIGVkaXRvci50aW1lcnMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgZWRpdG9yLmRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBcInBpbmNoXCIsXG4gICAgICAgICAgbmFtZTogXCJwaW5jaF9lbmRcIixcbiAgICAgICAgICBwb2ludDogeyB4OiBvcmlnaW5bMF0sIHk6IG9yaWdpblsxXSwgejogc2NhbGUgfSxcbiAgICAgICAgICBkZWx0YTogeyB4OiBvcmlnaW5bMF0sIHk6IG9yaWdpblsxXSB9LFxuICAgICAgICAgIHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSxcbiAgICAgICAgICBhbHRLZXk6IGV2ZW50LmFsdEtleSxcbiAgICAgICAgICBjdHJsS2V5OiBldmVudC5tZXRhS2V5IHx8IGV2ZW50LmN0cmxLZXlcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICBvbldoZWVsLFxuICAgICAgb25QaW5jaFN0YXJ0LFxuICAgICAgb25QaW5jaEVuZCxcbiAgICAgIG9uUGluY2hcbiAgICB9O1xuICB9LCBbZWRpdG9yLCByZWZdKTtcbiAgdXNlR2VzdHVyZShldmVudHMsIHtcbiAgICB0YXJnZXQ6IHJlZixcbiAgICBldmVudE9wdGlvbnM6IHsgcGFzc2l2ZTogZmFsc2UgfSxcbiAgICBwaW5jaDoge1xuICAgICAgZnJvbTogKCkgPT4gW2VkaXRvci5nZXRab29tTGV2ZWwoKSwgMF0sXG4gICAgICAvLyBSZXR1cm4gdGhlIGNhbWVyYSB6IHRvIHVzZSB3aGVuIHBpbmNoIHN0YXJ0c1xuICAgICAgc2NhbGVCb3VuZHM6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHsgZnJvbTogZWRpdG9yLmdldFpvb21MZXZlbCgpLCBtYXg6IDgsIG1pbjogMC4wNSB9O1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5leHBvcnQge1xuICB1c2VHZXN0dXJlRXZlbnRzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlR2VzdHVyZUV2ZW50cy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useGestureEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useHandleEvents.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useHandleEvents.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useHandleEvents: () => (/* binding */ useHandleEvents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/getPointerInfo.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\nfunction getHandle(editor, id, handleId) {\n  const shape = editor.getShape(id);\n  const handles = editor.getShapeHandles(shape);\n  return { shape, handle: handles.find((h) => h.id === handleId) };\n}\nfunction useHandleEvents(id, handleId) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const onPointerDown = (e) => {\n      if (e.isKilled)\n        return;\n      const target = (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__.loopToHtmlElement)(e.currentTarget);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__.setPointerCapture)(target, e);\n      const { shape, handle } = getHandle(editor, id, handleId);\n      if (!handle)\n        return;\n      editor.dispatch({\n        type: \"pointer\",\n        target: \"handle\",\n        handle,\n        shape,\n        name: \"pointer_down\",\n        ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_2__.getPointerInfo)(e)\n      });\n    };\n    let lastX, lastY;\n    const onPointerMove = (e) => {\n      if (e.isKilled)\n        return;\n      if (e.clientX === lastX && e.clientY === lastY)\n        return;\n      lastX = e.clientX;\n      lastY = e.clientY;\n      const { shape, handle } = getHandle(editor, id, handleId);\n      if (!handle)\n        return;\n      editor.dispatch({\n        type: \"pointer\",\n        target: \"handle\",\n        handle,\n        shape,\n        name: \"pointer_move\",\n        ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_2__.getPointerInfo)(e)\n      });\n    };\n    const onPointerUp = (e) => {\n      if (e.isKilled)\n        return;\n      const target = (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__.loopToHtmlElement)(e.currentTarget);\n      (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_1__.releasePointerCapture)(target, e);\n      const { shape, handle } = getHandle(editor, id, handleId);\n      if (!handle)\n        return;\n      editor.dispatch({\n        type: \"pointer\",\n        target: \"handle\",\n        handle,\n        shape,\n        name: \"pointer_up\",\n        ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_2__.getPointerInfo)(e)\n      });\n    };\n    return {\n      onPointerDown,\n      onPointerMove,\n      onPointerUp\n    };\n  }, [editor, id, handleId]);\n}\n\n//# sourceMappingURL=useHandleEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUhhbmRsZUV2ZW50cy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0I7QUFDZ0U7QUFDbEM7QUFDakI7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxpQkFBaUIseURBQVM7QUFDMUIsU0FBUywwQ0FBYTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUVBQWlCO0FBQ3RDLE1BQU0saUVBQWlCO0FBQ3ZCLGNBQWMsZ0JBQWdCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlFQUFjO0FBQ3pCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGdCQUFnQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5RUFBYztBQUN6QixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUVBQWlCO0FBQ3RDLE1BQU0scUVBQXFCO0FBQzNCLGNBQWMsZ0JBQWdCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlFQUFjO0FBQ3pCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VIYW5kbGVFdmVudHMubWpzP2RiYTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBsb29wVG9IdG1sRWxlbWVudCwgcmVsZWFzZVBvaW50ZXJDYXB0dXJlLCBzZXRQb2ludGVyQ2FwdHVyZSB9IGZyb20gXCIuLi91dGlscy9kb20ubWpzXCI7XG5pbXBvcnQgeyBnZXRQb2ludGVySW5mbyB9IGZyb20gXCIuLi91dGlscy9nZXRQb2ludGVySW5mby5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmZ1bmN0aW9uIGdldEhhbmRsZShlZGl0b3IsIGlkLCBoYW5kbGVJZCkge1xuICBjb25zdCBzaGFwZSA9IGVkaXRvci5nZXRTaGFwZShpZCk7XG4gIGNvbnN0IGhhbmRsZXMgPSBlZGl0b3IuZ2V0U2hhcGVIYW5kbGVzKHNoYXBlKTtcbiAgcmV0dXJuIHsgc2hhcGUsIGhhbmRsZTogaGFuZGxlcy5maW5kKChoKSA9PiBoLmlkID09PSBoYW5kbGVJZCkgfTtcbn1cbmZ1bmN0aW9uIHVzZUhhbmRsZUV2ZW50cyhpZCwgaGFuZGxlSWQpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIHJldHVybiBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBvblBvaW50ZXJEb3duID0gKGUpID0+IHtcbiAgICAgIGlmIChlLmlzS2lsbGVkKVxuICAgICAgICByZXR1cm47XG4gICAgICBjb25zdCB0YXJnZXQgPSBsb29wVG9IdG1sRWxlbWVudChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgc2V0UG9pbnRlckNhcHR1cmUodGFyZ2V0LCBlKTtcbiAgICAgIGNvbnN0IHsgc2hhcGUsIGhhbmRsZSB9ID0gZ2V0SGFuZGxlKGVkaXRvciwgaWQsIGhhbmRsZUlkKTtcbiAgICAgIGlmICghaGFuZGxlKVxuICAgICAgICByZXR1cm47XG4gICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcInBvaW50ZXJcIixcbiAgICAgICAgdGFyZ2V0OiBcImhhbmRsZVwiLFxuICAgICAgICBoYW5kbGUsXG4gICAgICAgIHNoYXBlLFxuICAgICAgICBuYW1lOiBcInBvaW50ZXJfZG93blwiLFxuICAgICAgICAuLi5nZXRQb2ludGVySW5mbyhlKVxuICAgICAgfSk7XG4gICAgfTtcbiAgICBsZXQgbGFzdFgsIGxhc3RZO1xuICAgIGNvbnN0IG9uUG9pbnRlck1vdmUgPSAoZSkgPT4ge1xuICAgICAgaWYgKGUuaXNLaWxsZWQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmIChlLmNsaWVudFggPT09IGxhc3RYICYmIGUuY2xpZW50WSA9PT0gbGFzdFkpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGxhc3RYID0gZS5jbGllbnRYO1xuICAgICAgbGFzdFkgPSBlLmNsaWVudFk7XG4gICAgICBjb25zdCB7IHNoYXBlLCBoYW5kbGUgfSA9IGdldEhhbmRsZShlZGl0b3IsIGlkLCBoYW5kbGVJZCk7XG4gICAgICBpZiAoIWhhbmRsZSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgZWRpdG9yLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJwb2ludGVyXCIsXG4gICAgICAgIHRhcmdldDogXCJoYW5kbGVcIixcbiAgICAgICAgaGFuZGxlLFxuICAgICAgICBzaGFwZSxcbiAgICAgICAgbmFtZTogXCJwb2ludGVyX21vdmVcIixcbiAgICAgICAgLi4uZ2V0UG9pbnRlckluZm8oZSlcbiAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3Qgb25Qb2ludGVyVXAgPSAoZSkgPT4ge1xuICAgICAgaWYgKGUuaXNLaWxsZWQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGxvb3BUb0h0bWxFbGVtZW50KGUuY3VycmVudFRhcmdldCk7XG4gICAgICByZWxlYXNlUG9pbnRlckNhcHR1cmUodGFyZ2V0LCBlKTtcbiAgICAgIGNvbnN0IHsgc2hhcGUsIGhhbmRsZSB9ID0gZ2V0SGFuZGxlKGVkaXRvciwgaWQsIGhhbmRsZUlkKTtcbiAgICAgIGlmICghaGFuZGxlKVxuICAgICAgICByZXR1cm47XG4gICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcInBvaW50ZXJcIixcbiAgICAgICAgdGFyZ2V0OiBcImhhbmRsZVwiLFxuICAgICAgICBoYW5kbGUsXG4gICAgICAgIHNoYXBlLFxuICAgICAgICBuYW1lOiBcInBvaW50ZXJfdXBcIixcbiAgICAgICAgLi4uZ2V0UG9pbnRlckluZm8oZSlcbiAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uUG9pbnRlckRvd24sXG4gICAgICBvblBvaW50ZXJNb3ZlLFxuICAgICAgb25Qb2ludGVyVXBcbiAgICB9O1xuICB9LCBbZWRpdG9yLCBpZCwgaGFuZGxlSWRdKTtcbn1cbmV4cG9ydCB7XG4gIHVzZUhhbmRsZUV2ZW50c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUhhbmRsZUV2ZW50cy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useHandleEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useShallowArrayIdentity: () => (/* binding */ useShallowArrayIdentity),\n/* harmony export */   useShallowObjectIdentity: () => (/* binding */ useShallowObjectIdentity)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nfunction useIdentity(value, isEqual) {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(value);\n  if (isEqual(value, ref.current)) {\n    return ref.current;\n  }\n  ref.current = value;\n  return value;\n}\nfunction useShallowArrayIdentity(arr) {\n  return useIdentity(arr, _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.areArraysShallowEqual);\n}\nfunction useShallowObjectIdentity(arr) {\n  return useIdentity(arr, _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.areObjectsShallowEqual);\n}\n\n//# sourceMappingURL=useIdentity.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUlkZW50aXR5Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThFO0FBQy9DO0FBQy9CO0FBQ0EsY0FBYyw2Q0FBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixnRUFBcUI7QUFDL0M7QUFDQTtBQUNBLDBCQUEwQixpRUFBc0I7QUFDaEQ7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VJZGVudGl0eS5tanM/MGRjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhcmVBcnJheXNTaGFsbG93RXF1YWwsIGFyZU9iamVjdHNTaGFsbG93RXF1YWwgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VJZGVudGl0eSh2YWx1ZSwgaXNFcXVhbCkge1xuICBjb25zdCByZWYgPSB1c2VSZWYodmFsdWUpO1xuICBpZiAoaXNFcXVhbCh2YWx1ZSwgcmVmLmN1cnJlbnQpKSB7XG4gICAgcmV0dXJuIHJlZi5jdXJyZW50O1xuICB9XG4gIHJlZi5jdXJyZW50ID0gdmFsdWU7XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHVzZVNoYWxsb3dBcnJheUlkZW50aXR5KGFycikge1xuICByZXR1cm4gdXNlSWRlbnRpdHkoYXJyLCBhcmVBcnJheXNTaGFsbG93RXF1YWwpO1xufVxuZnVuY3Rpb24gdXNlU2hhbGxvd09iamVjdElkZW50aXR5KGFycikge1xuICByZXR1cm4gdXNlSWRlbnRpdHkoYXJyLCBhcmVPYmplY3RzU2hhbGxvd0VxdWFsKTtcbn1cbmV4cG9ydCB7XG4gIHVzZVNoYWxsb3dBcnJheUlkZW50aXR5LFxuICB1c2VTaGFsbG93T2JqZWN0SWRlbnRpdHlcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VJZGVudGl0eS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIdentity.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsCropping.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsCropping.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useIsCropping: () => (/* binding */ useIsCropping)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\nfunction useIsCropping(shapeId) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__.useEditor)();\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.useValue)(\"isCropping\", () => editor.getCroppingShapeId() === shapeId, [editor, shapeId]);\n}\n\n//# sourceMappingURL=useIsCropping.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUlzQ3JvcHBpbmcubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5QztBQUNHO0FBQzVDO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLFNBQVMsdURBQVE7QUFDakI7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VJc0Nyb3BwaW5nLm1qcz8wMGQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVZhbHVlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmZ1bmN0aW9uIHVzZUlzQ3JvcHBpbmcoc2hhcGVJZCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgcmV0dXJuIHVzZVZhbHVlKFwiaXNDcm9wcGluZ1wiLCAoKSA9PiBlZGl0b3IuZ2V0Q3JvcHBpbmdTaGFwZUlkKCkgPT09IHNoYXBlSWQsIFtlZGl0b3IsIHNoYXBlSWRdKTtcbn1cbmV4cG9ydCB7XG4gIHVzZUlzQ3JvcHBpbmdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VJc0Nyb3BwaW5nLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsCropping.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsDarkMode.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsDarkMode.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useIsDarkMode: () => (/* binding */ useIsDarkMode)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _editor_types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../editor/types/SvgExportContext.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/editor/types/SvgExportContext.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\nfunction useIsDarkMode() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n  const exportContext = (0,_editor_types_SvgExportContext_mjs__WEBPACK_IMPORTED_MODULE_1__.useSvgExportContext)();\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.useValue)(\"isDarkMode\", () => exportContext?.isDarkMode ?? editor.user.getIsDarkMode(), [\n    exportContext,\n    editor\n  ]);\n}\n\n//# sourceMappingURL=useIsDarkMode.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUlzRGFya01vZGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBeUM7QUFDa0M7QUFDL0I7QUFDNUM7QUFDQSxpQkFBaUIseURBQVM7QUFDMUIsd0JBQXdCLHVGQUFtQjtBQUMzQyxTQUFTLHVEQUFRO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlSXNEYXJrTW9kZS5tanM/MjMyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VWYWx1ZSB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyB1c2VTdmdFeHBvcnRDb250ZXh0IH0gZnJvbSBcIi4uL2VkaXRvci90eXBlcy9TdmdFeHBvcnRDb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yIH0gZnJvbSBcIi4vdXNlRWRpdG9yLm1qc1wiO1xuZnVuY3Rpb24gdXNlSXNEYXJrTW9kZSgpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IGV4cG9ydENvbnRleHQgPSB1c2VTdmdFeHBvcnRDb250ZXh0KCk7XG4gIHJldHVybiB1c2VWYWx1ZShcImlzRGFya01vZGVcIiwgKCkgPT4gZXhwb3J0Q29udGV4dD8uaXNEYXJrTW9kZSA/PyBlZGl0b3IudXNlci5nZXRJc0RhcmtNb2RlKCksIFtcbiAgICBleHBvcnRDb250ZXh0LFxuICAgIGVkaXRvclxuICBdKTtcbn1cbmV4cG9ydCB7XG4gIHVzZUlzRGFya01vZGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VJc0RhcmtNb2RlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsDarkMode.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsEditing.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsEditing.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useIsEditing: () => (/* binding */ useIsEditing)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\nfunction useIsEditing(shapeId) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__.useEditor)();\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.useValue)(\"isEditing\", () => editor.getEditingShapeId() === shapeId, [editor, shapeId]);\n}\n\n//# sourceMappingURL=useIsEditing.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUlzRWRpdGluZy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlDO0FBQ0c7QUFDNUM7QUFDQSxpQkFBaUIseURBQVM7QUFDMUIsU0FBUyx1REFBUTtBQUNqQjtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUlzRWRpdGluZy5tanM/NjlhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VWYWx1ZSB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi91c2VFZGl0b3IubWpzXCI7XG5mdW5jdGlvbiB1c2VJc0VkaXRpbmcoc2hhcGVJZCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgcmV0dXJuIHVzZVZhbHVlKFwiaXNFZGl0aW5nXCIsICgpID0+IGVkaXRvci5nZXRFZGl0aW5nU2hhcGVJZCgpID09PSBzaGFwZUlkLCBbZWRpdG9yLCBzaGFwZUlkXSk7XG59XG5leHBvcnQge1xuICB1c2VJc0VkaXRpbmdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VJc0VkaXRpbmcubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useIsEditing.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useLocalStore.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useLocalStore.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLocalStore: () => (/* binding */ useLocalStore)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _utils_sync_TLLocalSyncClient_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/sync/TLLocalSyncClient.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/TLLocalSyncClient.mjs\");\n/* harmony import */ var _utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/uniqueId.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs\");\n/* harmony import */ var _useTLStore_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useTLStore.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTLStore.mjs\");\n\n\n\n\nfunction useLocalStore({\n  persistenceKey,\n  sessionId,\n  ...rest\n}) {\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\n    null\n  );\n  const store = (0,_useTLStore_mjs__WEBPACK_IMPORTED_MODULE_3__.useTLStore)(rest);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const id = (0,_utils_uniqueId_mjs__WEBPACK_IMPORTED_MODULE_2__.uniqueId)();\n    if (!persistenceKey) {\n      setState({\n        id,\n        storeWithStatus: { status: \"not-synced\", store }\n      });\n      return;\n    }\n    setState({\n      id,\n      storeWithStatus: { status: \"loading\" }\n    });\n    const setStoreWithStatus = (storeWithStatus) => {\n      setState((prev) => {\n        if (prev?.id === id) {\n          return { id, storeWithStatus };\n        }\n        return prev;\n      });\n    };\n    const client = new _utils_sync_TLLocalSyncClient_mjs__WEBPACK_IMPORTED_MODULE_1__.TLLocalSyncClient(store, {\n      sessionId,\n      persistenceKey,\n      onLoad() {\n        setStoreWithStatus({ store, status: \"synced-local\" });\n      },\n      onLoadError(err) {\n        setStoreWithStatus({ status: \"error\", error: err });\n      }\n    });\n    return () => {\n      setState((prevState) => prevState?.id === id ? null : prevState);\n      client.close();\n    };\n  }, [persistenceKey, store, sessionId]);\n  return state?.storeWithStatus ?? { status: \"loading\" };\n}\n\n//# sourceMappingURL=useLocalStore.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZUxvY2FsU3RvcmUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTRDO0FBQzRCO0FBQ3ZCO0FBQ0g7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNEJBQTRCLCtDQUFRO0FBQ3BDO0FBQ0E7QUFDQSxnQkFBZ0IsMkRBQVU7QUFDMUIsRUFBRSxnREFBUztBQUNYLGVBQWUsNkRBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsZ0ZBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwrQkFBK0I7QUFDNUQsT0FBTztBQUNQO0FBQ0EsNkJBQTZCLDZCQUE2QjtBQUMxRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxxQ0FBcUM7QUFDckM7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VMb2NhbFN0b3JlLm1qcz9hZDg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFRMTG9jYWxTeW5jQ2xpZW50IH0gZnJvbSBcIi4uL3V0aWxzL3N5bmMvVExMb2NhbFN5bmNDbGllbnQubWpzXCI7XG5pbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gXCIuLi91dGlscy91bmlxdWVJZC5tanNcIjtcbmltcG9ydCB7IHVzZVRMU3RvcmUgfSBmcm9tIFwiLi91c2VUTFN0b3JlLm1qc1wiO1xuZnVuY3Rpb24gdXNlTG9jYWxTdG9yZSh7XG4gIHBlcnNpc3RlbmNlS2V5LFxuICBzZXNzaW9uSWQsXG4gIC4uLnJlc3Rcbn0pIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZShcbiAgICBudWxsXG4gICk7XG4gIGNvbnN0IHN0b3JlID0gdXNlVExTdG9yZShyZXN0KTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpZCA9IHVuaXF1ZUlkKCk7XG4gICAgaWYgKCFwZXJzaXN0ZW5jZUtleSkge1xuICAgICAgc2V0U3RhdGUoe1xuICAgICAgICBpZCxcbiAgICAgICAgc3RvcmVXaXRoU3RhdHVzOiB7IHN0YXR1czogXCJub3Qtc3luY2VkXCIsIHN0b3JlIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRTdGF0ZSh7XG4gICAgICBpZCxcbiAgICAgIHN0b3JlV2l0aFN0YXR1czogeyBzdGF0dXM6IFwibG9hZGluZ1wiIH1cbiAgICB9KTtcbiAgICBjb25zdCBzZXRTdG9yZVdpdGhTdGF0dXMgPSAoc3RvcmVXaXRoU3RhdHVzKSA9PiB7XG4gICAgICBzZXRTdGF0ZSgocHJldikgPT4ge1xuICAgICAgICBpZiAocHJldj8uaWQgPT09IGlkKSB7XG4gICAgICAgICAgcmV0dXJuIHsgaWQsIHN0b3JlV2l0aFN0YXR1cyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBjbGllbnQgPSBuZXcgVExMb2NhbFN5bmNDbGllbnQoc3RvcmUsIHtcbiAgICAgIHNlc3Npb25JZCxcbiAgICAgIHBlcnNpc3RlbmNlS2V5LFxuICAgICAgb25Mb2FkKCkge1xuICAgICAgICBzZXRTdG9yZVdpdGhTdGF0dXMoeyBzdG9yZSwgc3RhdHVzOiBcInN5bmNlZC1sb2NhbFwiIH0pO1xuICAgICAgfSxcbiAgICAgIG9uTG9hZEVycm9yKGVycikge1xuICAgICAgICBzZXRTdG9yZVdpdGhTdGF0dXMoeyBzdGF0dXM6IFwiZXJyb3JcIiwgZXJyb3I6IGVyciB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc2V0U3RhdGUoKHByZXZTdGF0ZSkgPT4gcHJldlN0YXRlPy5pZCA9PT0gaWQgPyBudWxsIDogcHJldlN0YXRlKTtcbiAgICAgIGNsaWVudC5jbG9zZSgpO1xuICAgIH07XG4gIH0sIFtwZXJzaXN0ZW5jZUtleSwgc3RvcmUsIHNlc3Npb25JZF0pO1xuICByZXR1cm4gc3RhdGU/LnN0b3JlV2l0aFN0YXR1cyA/PyB7IHN0YXR1czogXCJsb2FkaW5nXCIgfTtcbn1cbmV4cG9ydCB7XG4gIHVzZUxvY2FsU3RvcmVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VMb2NhbFN0b3JlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useLocalStore.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePeerIds.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePeerIds.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePeerIds: () => (/* binding */ usePeerIds)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _utils_uniq_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/uniq.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniq.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\nfunction usePeerIds() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n  const $userIds = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.useComputed)(\n    \"userIds\",\n    () => (0,_utils_uniq_mjs__WEBPACK_IMPORTED_MODULE_1__.uniq)(editor.getCollaborators().map((p) => p.userId)).sort(),\n    { isEqual: (a, b) => a.join(\",\") === b.join?.(\",\") },\n    [editor]\n  );\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.useValue)($userIds);\n}\n\n//# sourceMappingURL=usePeerIds.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVBlZXJJZHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBc0Q7QUFDYjtBQUNHO0FBQzVDO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLG1CQUFtQiwwREFBVztBQUM5QjtBQUNBLFVBQVUscURBQUk7QUFDZCxNQUFNLGtEQUFrRDtBQUN4RDtBQUNBO0FBQ0EsU0FBUyx1REFBUTtBQUNqQjtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVBlZXJJZHMubWpzP2MzYTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ29tcHV0ZWQsIHVzZVZhbHVlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IHVuaXEgfSBmcm9tIFwiLi4vdXRpbHMvdW5pcS5tanNcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmZ1bmN0aW9uIHVzZVBlZXJJZHMoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCAkdXNlcklkcyA9IHVzZUNvbXB1dGVkKFxuICAgIFwidXNlcklkc1wiLFxuICAgICgpID0+IHVuaXEoZWRpdG9yLmdldENvbGxhYm9yYXRvcnMoKS5tYXAoKHApID0+IHAudXNlcklkKSkuc29ydCgpLFxuICAgIHsgaXNFcXVhbDogKGEsIGIpID0+IGEuam9pbihcIixcIikgPT09IGIuam9pbj8uKFwiLFwiKSB9LFxuICAgIFtlZGl0b3JdXG4gICk7XG4gIHJldHVybiB1c2VWYWx1ZSgkdXNlcklkcyk7XG59XG5leHBvcnQge1xuICB1c2VQZWVySWRzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlUGVlcklkcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePeerIds.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePresence.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePresence.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePresence: () => (/* binding */ usePresence)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\nfunction usePresence(userId) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_1__.useEditor)();\n  const latestPresence = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.useValue)(\n    `latestPresence:${userId}`,\n    () => {\n      return editor.getCollaborators().find((c) => c.userId === userId);\n    },\n    [editor]\n  );\n  return latestPresence ?? null;\n}\n\n//# sourceMappingURL=usePresence.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVByZXNlbmNlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBeUM7QUFDRztBQUM1QztBQUNBLGlCQUFpQix5REFBUztBQUMxQix5QkFBeUIsdURBQVE7QUFDakMsc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVByZXNlbmNlLm1qcz9lMTA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVZhbHVlIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IHVzZUVkaXRvciB9IGZyb20gXCIuL3VzZUVkaXRvci5tanNcIjtcbmZ1bmN0aW9uIHVzZVByZXNlbmNlKHVzZXJJZCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKTtcbiAgY29uc3QgbGF0ZXN0UHJlc2VuY2UgPSB1c2VWYWx1ZShcbiAgICBgbGF0ZXN0UHJlc2VuY2U6JHt1c2VySWR9YCxcbiAgICAoKSA9PiB7XG4gICAgICByZXR1cm4gZWRpdG9yLmdldENvbGxhYm9yYXRvcnMoKS5maW5kKChjKSA9PiBjLnVzZXJJZCA9PT0gdXNlcklkKTtcbiAgICB9LFxuICAgIFtlZGl0b3JdXG4gICk7XG4gIHJldHVybiBsYXRlc3RQcmVzZW5jZSA/PyBudWxsO1xufVxuZXhwb3J0IHtcbiAgdXNlUHJlc2VuY2Vcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VQcmVzZW5jZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/usePresence.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSafeId.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSafeId.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSafeId: () => (/* binding */ useSafeId)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\nfunction useSafeId() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useId)().replace(/:/g, \"_\");\n}\n\n//# sourceMappingURL=useSafeId.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVNhZmVJZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBOEI7QUFDOUI7QUFDQSxTQUFTLDRDQUFLO0FBQ2Q7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VTYWZlSWQubWpzP2Q5MDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlSWQgfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVNhZmVJZCgpIHtcbiAgcmV0dXJuIHVzZUlkKCkucmVwbGFjZSgvOi9nLCBcIl9cIik7XG59XG5leHBvcnQge1xuICB1c2VTYWZlSWRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VTYWZlSWQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSafeId.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useScreenBounds.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useScreenBounds.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useScreenBounds: () => (/* binding */ useScreenBounds)\n/* harmony export */ });\n/* harmony import */ var lodash_throttle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.throttle */ \"(ssr)/./node_modules/lodash.throttle/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../primitives/Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\nfunction useScreenBounds(ref) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_3__.useEditor)();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)(() => {\n    let prevBounds = new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.Box();\n    function updateScreenBounds() {\n      const container2 = ref.current;\n      if (!container2)\n        return null;\n      const rect = container2.getBoundingClientRect();\n      const next = new _primitives_Box_mjs__WEBPACK_IMPORTED_MODULE_2__.Box(\n        rect.left || rect.x,\n        rect.top || rect.y,\n        Math.max(rect.width, 1),\n        Math.max(rect.height, 1)\n      );\n      if (prevBounds.equals(next))\n        return;\n      editor.updateViewportScreenBounds(next);\n      prevBounds = next;\n    }\n    updateScreenBounds();\n    const updateBounds = lodash_throttle__WEBPACK_IMPORTED_MODULE_0__(updateScreenBounds, 200, {\n      trailing: true\n    });\n    const interval = editor.timers.setInterval(updateBounds, 1e3);\n    window.addEventListener(\"resize\", updateBounds);\n    const resizeObserver = new ResizeObserver((entries) => {\n      if (!entries[0].contentRect)\n        return;\n      updateBounds();\n    });\n    const container = ref.current;\n    let scrollingParent = null;\n    if (container) {\n      resizeObserver.observe(container);\n      scrollingParent = getNearestScrollableContainer(container);\n      scrollingParent.addEventListener(\"scroll\", updateBounds);\n    }\n    return () => {\n      clearInterval(interval);\n      window.removeEventListener(\"resize\", updateBounds);\n      resizeObserver.disconnect();\n      scrollingParent?.removeEventListener(\"scroll\", updateBounds);\n    };\n  }, [editor, ref]);\n}\n/*!\n * Author: excalidraw\n * MIT License: https://github.com/excalidraw/excalidraw/blob/master/LICENSE\n * https://github.com/excalidraw/excalidraw/blob/48c3465b19f10ec755b3eb84e21a01a468e96e43/packages/excalidraw/utils.ts#L600\n */\nconst getNearestScrollableContainer = (element) => {\n  let parent = element.parentElement;\n  while (parent) {\n    if (parent === document.body) {\n      return document;\n    }\n    const { overflowY } = window.getComputedStyle(parent);\n    const hasScrollableContent = parent.scrollHeight > parent.clientHeight;\n    if (hasScrollableContent && (overflowY === \"auto\" || overflowY === \"scroll\" || overflowY === \"overlay\")) {\n      return parent;\n    }\n    parent = parent.parentElement;\n  }\n  return document;\n};\n\n//# sourceMappingURL=useScreenBounds.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVNjcmVlbkJvdW5kcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBdUM7QUFDQztBQUNJO0FBQ0E7QUFDNUM7QUFDQSxpQkFBaUIseURBQVM7QUFDMUIsRUFBRSxzREFBZTtBQUNqQix5QkFBeUIsb0RBQUc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixvREFBRztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDRDQUFRO0FBQ2pDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFlBQVk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVNjcmVlbkJvdW5kcy5tanM/YjlmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdGhyb3R0bGUgZnJvbSBcImxvZGFzaC50aHJvdHRsZVwiO1xuaW1wb3J0IHsgdXNlTGF5b3V0RWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBCb3ggfSBmcm9tIFwiLi4vcHJpbWl0aXZlcy9Cb3gubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi91c2VFZGl0b3IubWpzXCI7XG5mdW5jdGlvbiB1c2VTY3JlZW5Cb3VuZHMocmVmKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBwcmV2Qm91bmRzID0gbmV3IEJveCgpO1xuICAgIGZ1bmN0aW9uIHVwZGF0ZVNjcmVlbkJvdW5kcygpIHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lcjIgPSByZWYuY3VycmVudDtcbiAgICAgIGlmICghY29udGFpbmVyMilcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICBjb25zdCByZWN0ID0gY29udGFpbmVyMi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IG5leHQgPSBuZXcgQm94KFxuICAgICAgICByZWN0LmxlZnQgfHwgcmVjdC54LFxuICAgICAgICByZWN0LnRvcCB8fCByZWN0LnksXG4gICAgICAgIE1hdGgubWF4KHJlY3Qud2lkdGgsIDEpLFxuICAgICAgICBNYXRoLm1heChyZWN0LmhlaWdodCwgMSlcbiAgICAgICk7XG4gICAgICBpZiAocHJldkJvdW5kcy5lcXVhbHMobmV4dCkpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGVkaXRvci51cGRhdGVWaWV3cG9ydFNjcmVlbkJvdW5kcyhuZXh0KTtcbiAgICAgIHByZXZCb3VuZHMgPSBuZXh0O1xuICAgIH1cbiAgICB1cGRhdGVTY3JlZW5Cb3VuZHMoKTtcbiAgICBjb25zdCB1cGRhdGVCb3VuZHMgPSB0aHJvdHRsZSh1cGRhdGVTY3JlZW5Cb3VuZHMsIDIwMCwge1xuICAgICAgdHJhaWxpbmc6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCBpbnRlcnZhbCA9IGVkaXRvci50aW1lcnMuc2V0SW50ZXJ2YWwodXBkYXRlQm91bmRzLCAxZTMpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHVwZGF0ZUJvdW5kcyk7XG4gICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgIGlmICghZW50cmllc1swXS5jb250ZW50UmVjdClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgdXBkYXRlQm91bmRzKCk7XG4gICAgfSk7XG4gICAgY29uc3QgY29udGFpbmVyID0gcmVmLmN1cnJlbnQ7XG4gICAgbGV0IHNjcm9sbGluZ1BhcmVudCA9IG51bGw7XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShjb250YWluZXIpO1xuICAgICAgc2Nyb2xsaW5nUGFyZW50ID0gZ2V0TmVhcmVzdFNjcm9sbGFibGVDb250YWluZXIoY29udGFpbmVyKTtcbiAgICAgIHNjcm9sbGluZ1BhcmVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHVwZGF0ZUJvdW5kcyk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHVwZGF0ZUJvdW5kcyk7XG4gICAgICByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICBzY3JvbGxpbmdQYXJlbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdXBkYXRlQm91bmRzKTtcbiAgICB9O1xuICB9LCBbZWRpdG9yLCByZWZdKTtcbn1cbi8qIVxuICogQXV0aG9yOiBleGNhbGlkcmF3XG4gKiBNSVQgTGljZW5zZTogaHR0cHM6Ly9naXRodWIuY29tL2V4Y2FsaWRyYXcvZXhjYWxpZHJhdy9ibG9iL21hc3Rlci9MSUNFTlNFXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZXhjYWxpZHJhdy9leGNhbGlkcmF3L2Jsb2IvNDhjMzQ2NWIxOWYxMGVjNzU1YjNlYjg0ZTIxYTAxYTQ2OGU5NmU0My9wYWNrYWdlcy9leGNhbGlkcmF3L3V0aWxzLnRzI0w2MDBcbiAqL1xuY29uc3QgZ2V0TmVhcmVzdFNjcm9sbGFibGVDb250YWluZXIgPSAoZWxlbWVudCkgPT4ge1xuICBsZXQgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICB3aGlsZSAocGFyZW50KSB7XG4gICAgaWYgKHBhcmVudCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIH1cbiAgICBjb25zdCB7IG92ZXJmbG93WSB9ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocGFyZW50KTtcbiAgICBjb25zdCBoYXNTY3JvbGxhYmxlQ29udGVudCA9IHBhcmVudC5zY3JvbGxIZWlnaHQgPiBwYXJlbnQuY2xpZW50SGVpZ2h0O1xuICAgIGlmIChoYXNTY3JvbGxhYmxlQ29udGVudCAmJiAob3ZlcmZsb3dZID09PSBcImF1dG9cIiB8fCBvdmVyZmxvd1kgPT09IFwic2Nyb2xsXCIgfHwgb3ZlcmZsb3dZID09PSBcIm92ZXJsYXlcIikpIHtcbiAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICB9XG4gIHJldHVybiBkb2N1bWVudDtcbn07XG5leHBvcnQge1xuICB1c2VTY3JlZW5Cb3VuZHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VTY3JlZW5Cb3VuZHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useScreenBounds.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSelectionEvents.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSelectionEvents.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSelectionEvents: () => (/* binding */ useSelectionEvents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/constants.mjs\");\n/* harmony import */ var _utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/dom.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\");\n/* harmony import */ var _utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/getPointerInfo.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\n\nfunction useSelectionEvents(handle) {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const events = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    function selectionEvents() {\n      const onPointerDown = (e) => {\n        if (e.isKilled)\n          return;\n        if (e.button === _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.RIGHT_MOUSE_BUTTON) {\n          editor.dispatch({\n            type: \"pointer\",\n            target: \"selection\",\n            handle,\n            name: \"right_click\",\n            ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n          });\n          return;\n        }\n        if (e.button !== 0)\n          return;\n        const elm = (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.loopToHtmlElement)(e.currentTarget);\n        function releaseCapture() {\n          elm.removeEventListener(\"pointerup\", releaseCapture);\n          (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.releasePointerCapture)(elm, e);\n        }\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.setPointerCapture)(elm, e);\n        elm.addEventListener(\"pointerup\", releaseCapture);\n        editor.dispatch({\n          name: \"pointer_down\",\n          type: \"pointer\",\n          target: \"selection\",\n          handle,\n          ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n        });\n        (0,_utils_dom_mjs__WEBPACK_IMPORTED_MODULE_2__.stopEventPropagation)(e);\n      };\n      let lastX, lastY;\n      function onPointerMove(e) {\n        if (e.isKilled)\n          return;\n        if (e.button !== 0)\n          return;\n        if (e.clientX === lastX && e.clientY === lastY)\n          return;\n        lastX = e.clientX;\n        lastY = e.clientY;\n        editor.dispatch({\n          name: \"pointer_move\",\n          type: \"pointer\",\n          target: \"selection\",\n          handle,\n          ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n        });\n      }\n      const onPointerUp = (e) => {\n        if (e.isKilled)\n          return;\n        if (e.button !== 0)\n          return;\n        editor.dispatch({\n          name: \"pointer_up\",\n          type: \"pointer\",\n          target: \"selection\",\n          handle,\n          ...(0,_utils_getPointerInfo_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointerInfo)(e)\n        });\n      };\n      return {\n        onPointerDown,\n        onPointerMove,\n        onPointerUp\n      };\n    },\n    [editor, handle]\n  );\n  return events;\n}\n\n//# sourceMappingURL=useSelectionEvents.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVNlbGVjdGlvbkV2ZW50cy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWdDO0FBQ3NCO0FBTTVCO0FBQ21DO0FBQ2pCO0FBQzVDO0FBQ0EsaUJBQWlCLHlEQUFTO0FBQzFCLGlCQUFpQiw4Q0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw4REFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUVBQWM7QUFDN0IsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlFQUFpQjtBQUNyQztBQUNBO0FBQ0EsVUFBVSxxRUFBcUI7QUFDL0I7QUFDQSxRQUFRLGlFQUFpQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlFQUFjO0FBQzNCLFNBQVM7QUFDVCxRQUFRLG9FQUFvQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEseUVBQWM7QUFDM0IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlFQUFjO0FBQzNCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9ob29rcy91c2VTZWxlY3Rpb25FdmVudHMubWpzPzA2ZWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgUklHSFRfTU9VU0VfQlVUVE9OIH0gZnJvbSBcIi4uL2NvbnN0YW50cy5tanNcIjtcbmltcG9ydCB7XG4gIGxvb3BUb0h0bWxFbGVtZW50LFxuICByZWxlYXNlUG9pbnRlckNhcHR1cmUsXG4gIHNldFBvaW50ZXJDYXB0dXJlLFxuICBzdG9wRXZlbnRQcm9wYWdhdGlvblxufSBmcm9tIFwiLi4vdXRpbHMvZG9tLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UG9pbnRlckluZm8gfSBmcm9tIFwiLi4vdXRpbHMvZ2V0UG9pbnRlckluZm8ubWpzXCI7XG5pbXBvcnQgeyB1c2VFZGl0b3IgfSBmcm9tIFwiLi91c2VFZGl0b3IubWpzXCI7XG5mdW5jdGlvbiB1c2VTZWxlY3Rpb25FdmVudHMoaGFuZGxlKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpO1xuICBjb25zdCBldmVudHMgPSB1c2VNZW1vKFxuICAgIGZ1bmN0aW9uIHNlbGVjdGlvbkV2ZW50cygpIHtcbiAgICAgIGNvbnN0IG9uUG9pbnRlckRvd24gPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5pc0tpbGxlZClcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gUklHSFRfTU9VU0VfQlVUVE9OKSB7XG4gICAgICAgICAgZWRpdG9yLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwicG9pbnRlclwiLFxuICAgICAgICAgICAgdGFyZ2V0OiBcInNlbGVjdGlvblwiLFxuICAgICAgICAgICAgaGFuZGxlLFxuICAgICAgICAgICAgbmFtZTogXCJyaWdodF9jbGlja1wiLFxuICAgICAgICAgICAgLi4uZ2V0UG9pbnRlckluZm8oZSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUuYnV0dG9uICE9PSAwKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgZWxtID0gbG9vcFRvSHRtbEVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgZnVuY3Rpb24gcmVsZWFzZUNhcHR1cmUoKSB7XG4gICAgICAgICAgZWxtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgcmVsZWFzZUNhcHR1cmUpO1xuICAgICAgICAgIHJlbGVhc2VQb2ludGVyQ2FwdHVyZShlbG0sIGUpO1xuICAgICAgICB9XG4gICAgICAgIHNldFBvaW50ZXJDYXB0dXJlKGVsbSwgZSk7XG4gICAgICAgIGVsbS5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHJlbGVhc2VDYXB0dXJlKTtcbiAgICAgICAgZWRpdG9yLmRpc3BhdGNoKHtcbiAgICAgICAgICBuYW1lOiBcInBvaW50ZXJfZG93blwiLFxuICAgICAgICAgIHR5cGU6IFwicG9pbnRlclwiLFxuICAgICAgICAgIHRhcmdldDogXCJzZWxlY3Rpb25cIixcbiAgICAgICAgICBoYW5kbGUsXG4gICAgICAgICAgLi4uZ2V0UG9pbnRlckluZm8oZSlcbiAgICAgICAgfSk7XG4gICAgICAgIHN0b3BFdmVudFByb3BhZ2F0aW9uKGUpO1xuICAgICAgfTtcbiAgICAgIGxldCBsYXN0WCwgbGFzdFk7XG4gICAgICBmdW5jdGlvbiBvblBvaW50ZXJNb3ZlKGUpIHtcbiAgICAgICAgaWYgKGUuaXNLaWxsZWQpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZS5idXR0b24gIT09IDApXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZS5jbGllbnRYID09PSBsYXN0WCAmJiBlLmNsaWVudFkgPT09IGxhc3RZKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGFzdFggPSBlLmNsaWVudFg7XG4gICAgICAgIGxhc3RZID0gZS5jbGllbnRZO1xuICAgICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICAgIG5hbWU6IFwicG9pbnRlcl9tb3ZlXCIsXG4gICAgICAgICAgdHlwZTogXCJwb2ludGVyXCIsXG4gICAgICAgICAgdGFyZ2V0OiBcInNlbGVjdGlvblwiLFxuICAgICAgICAgIGhhbmRsZSxcbiAgICAgICAgICAuLi5nZXRQb2ludGVySW5mbyhlKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9uUG9pbnRlclVwID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUuaXNLaWxsZWQpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZS5idXR0b24gIT09IDApXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBlZGl0b3IuZGlzcGF0Y2goe1xuICAgICAgICAgIG5hbWU6IFwicG9pbnRlcl91cFwiLFxuICAgICAgICAgIHR5cGU6IFwicG9pbnRlclwiLFxuICAgICAgICAgIHRhcmdldDogXCJzZWxlY3Rpb25cIixcbiAgICAgICAgICBoYW5kbGUsXG4gICAgICAgICAgLi4uZ2V0UG9pbnRlckluZm8oZSlcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb25Qb2ludGVyRG93bixcbiAgICAgICAgb25Qb2ludGVyTW92ZSxcbiAgICAgICAgb25Qb2ludGVyVXBcbiAgICAgIH07XG4gICAgfSxcbiAgICBbZWRpdG9yLCBoYW5kbGVdXG4gICk7XG4gIHJldHVybiBldmVudHM7XG59XG5leHBvcnQge1xuICB1c2VTZWxlY3Rpb25FdmVudHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VTZWxlY3Rpb25FdmVudHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useSelectionEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTLStore.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTLStore.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useTLStore: () => (/* binding */ useTLStore)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config/TLEditorSnapshot.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLEditorSnapshot.mjs\");\n/* harmony import */ var _config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config/createTLStore.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/createTLStore.mjs\");\n\n\n\n\nfunction createStore(opts) {\n  const store = (0,_config_createTLStore_mjs__WEBPACK_IMPORTED_MODULE_3__.createTLStore)(opts);\n  if (opts.snapshot) {\n    (0,_config_TLEditorSnapshot_mjs__WEBPACK_IMPORTED_MODULE_2__.loadSnapshot)(store, opts.snapshot);\n  }\n  return { store, opts };\n}\nfunction useTLStore(opts) {\n  const [current, setCurrent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => createStore(opts));\n  if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.areObjectsShallowEqual)(current.opts, opts)) {\n    const next = createStore(opts);\n    setCurrent(next);\n    return next.store;\n  }\n  return current.store;\n}\n\n//# sourceMappingURL=useTLStore.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVRMU3RvcmUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXVEO0FBQ3RCO0FBQzZCO0FBQ0Y7QUFDNUQ7QUFDQSxnQkFBZ0Isd0VBQWE7QUFDN0I7QUFDQSxJQUFJLDBFQUFZO0FBQ2hCO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxnQ0FBZ0MsK0NBQVE7QUFDeEMsT0FBTyxxRUFBc0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvaG9va3MvdXNlVExTdG9yZS5tanM/ZTdlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhcmVPYmplY3RzU2hhbGxvd0VxdWFsIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBsb2FkU25hcHNob3QgfSBmcm9tIFwiLi4vY29uZmlnL1RMRWRpdG9yU25hcHNob3QubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVUTFN0b3JlIH0gZnJvbSBcIi4uL2NvbmZpZy9jcmVhdGVUTFN0b3JlLm1qc1wiO1xuZnVuY3Rpb24gY3JlYXRlU3RvcmUob3B0cykge1xuICBjb25zdCBzdG9yZSA9IGNyZWF0ZVRMU3RvcmUob3B0cyk7XG4gIGlmIChvcHRzLnNuYXBzaG90KSB7XG4gICAgbG9hZFNuYXBzaG90KHN0b3JlLCBvcHRzLnNuYXBzaG90KTtcbiAgfVxuICByZXR1cm4geyBzdG9yZSwgb3B0cyB9O1xufVxuZnVuY3Rpb24gdXNlVExTdG9yZShvcHRzKSB7XG4gIGNvbnN0IFtjdXJyZW50LCBzZXRDdXJyZW50XSA9IHVzZVN0YXRlKCgpID0+IGNyZWF0ZVN0b3JlKG9wdHMpKTtcbiAgaWYgKCFhcmVPYmplY3RzU2hhbGxvd0VxdWFsKGN1cnJlbnQub3B0cywgb3B0cykpIHtcbiAgICBjb25zdCBuZXh0ID0gY3JlYXRlU3RvcmUob3B0cyk7XG4gICAgc2V0Q3VycmVudChuZXh0KTtcbiAgICByZXR1cm4gbmV4dC5zdG9yZTtcbiAgfVxuICByZXR1cm4gY3VycmVudC5zdG9yZTtcbn1cbmV4cG9ydCB7XG4gIHVzZVRMU3RvcmVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VUTFN0b3JlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTLStore.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useTransform: () => (/* binding */ useTransform)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\nfunction useTransform(ref, x, y, scale, rotate, additionalOffset) {\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(() => {\n    const elm = ref.current;\n    if (!elm)\n      return;\n    if (x === void 0)\n      return;\n    let trans = `translate(${x}px, ${y}px)`;\n    if (scale !== void 0) {\n      trans += ` scale(${scale})`;\n    }\n    if (rotate !== void 0) {\n      trans += ` rotate(${rotate}rad)`;\n    }\n    if (additionalOffset) {\n      trans += ` translate(${additionalOffset.x}px, ${additionalOffset.y}px)`;\n    }\n    elm.style.transform = trans;\n  });\n}\n\n//# sourceMappingURL=useTransform.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVRyYW5zZm9ybS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7QUFDeEM7QUFDQSxFQUFFLHNEQUFlO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsRUFBRSxNQUFNLEVBQUU7QUFDdkM7QUFDQSx5QkFBeUIsTUFBTTtBQUMvQjtBQUNBO0FBQ0EsMEJBQTBCLE9BQU87QUFDakM7QUFDQTtBQUNBLDZCQUE2QixtQkFBbUIsTUFBTSxtQkFBbUI7QUFDekU7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVRyYW5zZm9ybS5tanM/OGY4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VMYXlvdXRFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVRyYW5zZm9ybShyZWYsIHgsIHksIHNjYWxlLCByb3RhdGUsIGFkZGl0aW9uYWxPZmZzZXQpIHtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBlbG0gPSByZWYuY3VycmVudDtcbiAgICBpZiAoIWVsbSlcbiAgICAgIHJldHVybjtcbiAgICBpZiAoeCA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuO1xuICAgIGxldCB0cmFucyA9IGB0cmFuc2xhdGUoJHt4fXB4LCAke3l9cHgpYDtcbiAgICBpZiAoc2NhbGUgIT09IHZvaWQgMCkge1xuICAgICAgdHJhbnMgKz0gYCBzY2FsZSgke3NjYWxlfSlgO1xuICAgIH1cbiAgICBpZiAocm90YXRlICE9PSB2b2lkIDApIHtcbiAgICAgIHRyYW5zICs9IGAgcm90YXRlKCR7cm90YXRlfXJhZClgO1xuICAgIH1cbiAgICBpZiAoYWRkaXRpb25hbE9mZnNldCkge1xuICAgICAgdHJhbnMgKz0gYCB0cmFuc2xhdGUoJHthZGRpdGlvbmFsT2Zmc2V0Lnh9cHgsICR7YWRkaXRpb25hbE9mZnNldC55fXB4KWA7XG4gICAgfVxuICAgIGVsbS5zdHlsZS50cmFuc2Zvcm0gPSB0cmFucztcbiAgfSk7XG59XG5leHBvcnQge1xuICB1c2VUcmFuc2Zvcm1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VUcmFuc2Zvcm0ubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useTransform.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useZoomCss.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/hooks/useZoomCss.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useZoomCss: () => (/* binding */ useZoomCss)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _useContainer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useContainer.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useContainer.mjs\");\n/* harmony import */ var _useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useEditor.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useEditor.mjs\");\n\n\n\n\n\nfunction useZoomCss() {\n  const editor = (0,_useEditor_mjs__WEBPACK_IMPORTED_MODULE_4__.useEditor)();\n  const container = (0,_useContainer_mjs__WEBPACK_IMPORTED_MODULE_3__.useContainer)();\n  react__WEBPACK_IMPORTED_MODULE_2__.useEffect(() => {\n    const setScale = (s) => container.style.setProperty(\"--tl-zoom\", s.toString());\n    const setScaleDebounced = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.debounce)(setScale, 100);\n    const scheduler = new _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EffectScheduler(\"useZoomCss\", () => {\n      const numShapes = editor.getCurrentPageShapeIds().size;\n      if (numShapes < 300) {\n        setScale(editor.getZoomLevel());\n      } else {\n        setScaleDebounced(editor.getZoomLevel());\n      }\n    });\n    scheduler.attach();\n    scheduler.execute();\n    return () => {\n      scheduler.detach();\n    };\n  }, [editor, container]);\n}\n\n//# sourceMappingURL=useZoomCss.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVpvb21Dc3MubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFnRDtBQUNQO0FBQ1Y7QUFDbUI7QUFDTjtBQUM1QztBQUNBLGlCQUFpQix5REFBUztBQUMxQixvQkFBb0IsK0RBQVk7QUFDaEMsRUFBRSw0Q0FBZTtBQUNqQjtBQUNBLDhCQUE4Qix1REFBUTtBQUN0QywwQkFBMEIsMERBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL2hvb2tzL3VzZVpvb21Dc3MubWpzP2UxNjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRWZmZWN0U2NoZWR1bGVyIH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlQ29udGFpbmVyIH0gZnJvbSBcIi4vdXNlQ29udGFpbmVyLm1qc1wiO1xuaW1wb3J0IHsgdXNlRWRpdG9yIH0gZnJvbSBcIi4vdXNlRWRpdG9yLm1qc1wiO1xuZnVuY3Rpb24gdXNlWm9vbUNzcygpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKCk7XG4gIGNvbnN0IGNvbnRhaW5lciA9IHVzZUNvbnRhaW5lcigpO1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHNldFNjYWxlID0gKHMpID0+IGNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tdGwtem9vbVwiLCBzLnRvU3RyaW5nKCkpO1xuICAgIGNvbnN0IHNldFNjYWxlRGVib3VuY2VkID0gZGVib3VuY2Uoc2V0U2NhbGUsIDEwMCk7XG4gICAgY29uc3Qgc2NoZWR1bGVyID0gbmV3IEVmZmVjdFNjaGVkdWxlcihcInVzZVpvb21Dc3NcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgbnVtU2hhcGVzID0gZWRpdG9yLmdldEN1cnJlbnRQYWdlU2hhcGVJZHMoKS5zaXplO1xuICAgICAgaWYgKG51bVNoYXBlcyA8IDMwMCkge1xuICAgICAgICBzZXRTY2FsZShlZGl0b3IuZ2V0Wm9vbUxldmVsKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0U2NhbGVEZWJvdW5jZWQoZWRpdG9yLmdldFpvb21MZXZlbCgpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBzY2hlZHVsZXIuYXR0YWNoKCk7XG4gICAgc2NoZWR1bGVyLmV4ZWN1dGUoKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc2NoZWR1bGVyLmRldGFjaCgpO1xuICAgIH07XG4gIH0sIFtlZGl0b3IsIGNvbnRhaW5lcl0pO1xufVxuZXhwb3J0IHtcbiAgdXNlWm9vbUNzc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZVpvb21Dc3MubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/hooks/useZoomCss.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/options.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/options.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultTldrawOptions: () => (/* binding */ defaultTldrawOptions)\n/* harmony export */ });\nconst defaultTldrawOptions = {\n  maxShapesPerPage: 4e3,\n  maxPages: 40,\n  animationMediumMs: 320,\n  followChaseViewportSnap: 2,\n  doubleClickDurationMs: 450,\n  multiClickDurationMs: 200,\n  coarseDragDistanceSquared: 36,\n  // 6 squared\n  dragDistanceSquared: 16,\n  // 4 squared\n  defaultSvgPadding: 32,\n  cameraSlideFriction: 0.09,\n  maxPointsPerDrawShape: 500,\n  gridSteps: [\n    { min: -1, mid: 0.15, step: 64 },\n    { min: 0.05, mid: 0.375, step: 16 },\n    { min: 0.15, mid: 1, step: 4 },\n    { min: 0.7, mid: 2.5, step: 1 }\n  ],\n  collaboratorInactiveTimeoutMs: 6e4,\n  collaboratorIdleTimeoutMs: 3e3,\n  collaboratorCheckIntervalMs: 1200,\n  cameraMovingTimeoutMs: 64,\n  hitTestMargin: 8,\n  edgeScrollSpeed: 20,\n  edgeScrollDistance: 8,\n  coarsePointerWidth: 12,\n  coarseHandleRadius: 20,\n  handleRadius: 12,\n  longPressDurationMs: 500,\n  textShadowLod: 0.35,\n  adjacentShapeMargin: 10\n};\n\n//# sourceMappingURL=options.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL29wdGlvbnMubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDhCQUE4QjtBQUNwQyxNQUFNLGlDQUFpQztBQUN2QyxNQUFNLDRCQUE0QjtBQUNsQyxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvb3B0aW9ucy5tanM/MGRlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkZWZhdWx0VGxkcmF3T3B0aW9ucyA9IHtcbiAgbWF4U2hhcGVzUGVyUGFnZTogNGUzLFxuICBtYXhQYWdlczogNDAsXG4gIGFuaW1hdGlvbk1lZGl1bU1zOiAzMjAsXG4gIGZvbGxvd0NoYXNlVmlld3BvcnRTbmFwOiAyLFxuICBkb3VibGVDbGlja0R1cmF0aW9uTXM6IDQ1MCxcbiAgbXVsdGlDbGlja0R1cmF0aW9uTXM6IDIwMCxcbiAgY29hcnNlRHJhZ0Rpc3RhbmNlU3F1YXJlZDogMzYsXG4gIC8vIDYgc3F1YXJlZFxuICBkcmFnRGlzdGFuY2VTcXVhcmVkOiAxNixcbiAgLy8gNCBzcXVhcmVkXG4gIGRlZmF1bHRTdmdQYWRkaW5nOiAzMixcbiAgY2FtZXJhU2xpZGVGcmljdGlvbjogMC4wOSxcbiAgbWF4UG9pbnRzUGVyRHJhd1NoYXBlOiA1MDAsXG4gIGdyaWRTdGVwczogW1xuICAgIHsgbWluOiAtMSwgbWlkOiAwLjE1LCBzdGVwOiA2NCB9LFxuICAgIHsgbWluOiAwLjA1LCBtaWQ6IDAuMzc1LCBzdGVwOiAxNiB9LFxuICAgIHsgbWluOiAwLjE1LCBtaWQ6IDEsIHN0ZXA6IDQgfSxcbiAgICB7IG1pbjogMC43LCBtaWQ6IDIuNSwgc3RlcDogMSB9XG4gIF0sXG4gIGNvbGxhYm9yYXRvckluYWN0aXZlVGltZW91dE1zOiA2ZTQsXG4gIGNvbGxhYm9yYXRvcklkbGVUaW1lb3V0TXM6IDNlMyxcbiAgY29sbGFib3JhdG9yQ2hlY2tJbnRlcnZhbE1zOiAxMjAwLFxuICBjYW1lcmFNb3ZpbmdUaW1lb3V0TXM6IDY0LFxuICBoaXRUZXN0TWFyZ2luOiA4LFxuICBlZGdlU2Nyb2xsU3BlZWQ6IDIwLFxuICBlZGdlU2Nyb2xsRGlzdGFuY2U6IDgsXG4gIGNvYXJzZVBvaW50ZXJXaWR0aDogMTIsXG4gIGNvYXJzZUhhbmRsZVJhZGl1czogMjAsXG4gIGhhbmRsZVJhZGl1czogMTIsXG4gIGxvbmdQcmVzc0R1cmF0aW9uTXM6IDUwMCxcbiAgdGV4dFNoYWRvd0xvZDogMC4zNSxcbiAgYWRqYWNlbnRTaGFwZU1hcmdpbjogMTBcbn07XG5leHBvcnQge1xuICBkZWZhdWx0VGxkcmF3T3B0aW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbnMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/options.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Box: () => (/* binding */ Box),\n/* harmony export */   ROTATE_CORNER_TO_SELECTION_CORNER: () => (/* binding */ ROTATE_CORNER_TO_SELECTION_CORNER),\n/* harmony export */   flipSelectionHandleX: () => (/* binding */ flipSelectionHandleX),\n/* harmony export */   flipSelectionHandleY: () => (/* binding */ flipSelectionHandleY),\n/* harmony export */   isSelectionCorner: () => (/* binding */ isSelectionCorner),\n/* harmony export */   rotateSelectionHandle: () => (/* binding */ rotateSelectionHandle)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\nclass Box {\n  constructor(x = 0, y = 0, w = 0, h = 0) {\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n  }\n  x = 0;\n  y = 0;\n  w = 0;\n  h = 0;\n  // eslint-disable-next-line no-restricted-syntax\n  get point() {\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.x, this.y);\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  set point(val) {\n    this.x = val.x;\n    this.y = val.y;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get minX() {\n    return this.x;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  set minX(n) {\n    this.x = n;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get midX() {\n    return this.x + this.w / 2;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get maxX() {\n    return this.x + this.w;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get minY() {\n    return this.y;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  set minY(n) {\n    this.y = n;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get midY() {\n    return this.y + this.h / 2;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get maxY() {\n    return this.y + this.h;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get width() {\n    return this.w;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  set width(n) {\n    this.w = n;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get height() {\n    return this.h;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  set height(n) {\n    this.h = n;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get aspectRatio() {\n    return this.width / this.height;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get center() {\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.midX, this.midY);\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  set center(v) {\n    this.minX = v.x - this.width / 2;\n    this.minY = v.y - this.height / 2;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get corners() {\n    return [\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.minY),\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.minY),\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.maxY),\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.maxY)\n    ];\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get cornersAndCenter() {\n    return [\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.minY),\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.minY),\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.maxY),\n      new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.maxY),\n      this.center\n    ];\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get sides() {\n    const { corners } = this;\n    return [\n      [corners[0], corners[1]],\n      [corners[1], corners[2]],\n      [corners[2], corners[3]],\n      [corners[3], corners[0]]\n    ];\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get size() {\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.w, this.h);\n  }\n  toFixed() {\n    this.x = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toPrecision)(this.x);\n    this.y = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toPrecision)(this.y);\n    this.w = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toPrecision)(this.w);\n    this.h = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toPrecision)(this.h);\n    return this;\n  }\n  setTo(B) {\n    this.x = B.x;\n    this.y = B.y;\n    this.w = B.w;\n    this.h = B.h;\n    return this;\n  }\n  set(x = 0, y = 0, w = 0, h = 0) {\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n    return this;\n  }\n  expand(A) {\n    const minX = Math.min(this.minX, A.minX);\n    const minY = Math.min(this.minY, A.minY);\n    const maxX = Math.max(this.maxX, A.maxX);\n    const maxY = Math.max(this.maxY, A.maxY);\n    this.x = minX;\n    this.y = minY;\n    this.w = maxX - minX;\n    this.h = maxY - minY;\n    return this;\n  }\n  expandBy(n) {\n    this.x -= n;\n    this.y -= n;\n    this.w += n * 2;\n    this.h += n * 2;\n    return this;\n  }\n  scale(n) {\n    this.x /= n;\n    this.y /= n;\n    this.w /= n;\n    this.h /= n;\n    return this;\n  }\n  clone() {\n    const { x, y, w, h } = this;\n    return new Box(x, y, w, h);\n  }\n  translate(delta) {\n    this.x += delta.x;\n    this.y += delta.y;\n    return this;\n  }\n  snapToGrid(size) {\n    const minX = Math.round(this.minX / size) * size;\n    const minY = Math.round(this.minY / size) * size;\n    const maxX = Math.round(this.maxX / size) * size;\n    const maxY = Math.round(this.maxY / size) * size;\n    this.minX = minX;\n    this.minY = minY;\n    this.width = Math.max(1, maxX - minX);\n    this.height = Math.max(1, maxY - minY);\n  }\n  collides(B) {\n    return Box.Collides(this, B);\n  }\n  contains(B) {\n    return Box.Contains(this, B);\n  }\n  includes(B) {\n    return Box.Includes(this, B);\n  }\n  containsPoint(V, margin = 0) {\n    return Box.ContainsPoint(this, V, margin);\n  }\n  getHandlePoint(handle) {\n    switch (handle) {\n      case \"top_left\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.minY);\n      case \"top_right\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.minY);\n      case \"bottom_left\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.maxY);\n      case \"bottom_right\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.maxY);\n      case \"top\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.midX, this.minY);\n      case \"right\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.maxX, this.midY);\n      case \"bottom\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.midX, this.maxY);\n      case \"left\":\n        return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(this.minX, this.midY);\n    }\n  }\n  toJson() {\n    return { x: this.minX, y: this.minY, w: this.w, h: this.h };\n  }\n  resize(handle, dx, dy) {\n    const { minX: a0x, minY: a0y, maxX: a1x, maxY: a1y } = this;\n    let { minX: b0x, minY: b0y, maxX: b1x, maxY: b1y } = this;\n    switch (handle) {\n      case \"left\":\n      case \"top_left\":\n      case \"bottom_left\": {\n        b0x += dx;\n        break;\n      }\n      case \"right\":\n      case \"top_right\":\n      case \"bottom_right\": {\n        b1x += dx;\n        break;\n      }\n    }\n    switch (handle) {\n      case \"top\":\n      case \"top_left\":\n      case \"top_right\": {\n        b0y += dy;\n        break;\n      }\n      case \"bottom\":\n      case \"bottom_left\":\n      case \"bottom_right\": {\n        b1y += dy;\n        break;\n      }\n    }\n    const scaleX = (b1x - b0x) / (a1x - a0x);\n    const scaleY = (b1y - b0y) / (a1y - a0y);\n    const flipX = scaleX < 0;\n    const flipY = scaleY < 0;\n    if (flipX) {\n      const t = b1x;\n      b1x = b0x;\n      b0x = t;\n    }\n    if (flipY) {\n      const t = b1y;\n      b1y = b0y;\n      b0y = t;\n    }\n    this.minX = b0x;\n    this.minY = b0y;\n    this.width = Math.abs(b1x - b0x);\n    this.height = Math.abs(b1y - b0y);\n  }\n  union(box) {\n    const minX = Math.min(this.minX, box.x);\n    const minY = Math.min(this.minY, box.y);\n    const maxX = Math.max(this.maxX, box.w + box.x);\n    const maxY = Math.max(this.maxY, box.h + box.y);\n    this.x = minX;\n    this.y = minY;\n    this.width = maxX - minX;\n    this.height = maxY - minY;\n    return this;\n  }\n  static From(box) {\n    return new Box(box.x, box.y, box.w, box.h);\n  }\n  static FromCenter(center, size) {\n    return new Box(center.x - size.x / 2, center.y - size.y / 2, size.x, size.y);\n  }\n  static FromPoints(points) {\n    if (points.length === 0)\n      return new Box();\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    let point;\n    for (let i = 0, n = points.length; i < n; i++) {\n      point = points[i];\n      minX = Math.min(point.x, minX);\n      minY = Math.min(point.y, minY);\n      maxX = Math.max(point.x, maxX);\n      maxY = Math.max(point.y, maxY);\n    }\n    return new Box(minX, minY, maxX - minX, maxY - minY);\n  }\n  static Expand(A, B) {\n    const minX = Math.min(B.minX, A.minX);\n    const minY = Math.min(B.minY, A.minY);\n    const maxX = Math.max(B.maxX, A.maxX);\n    const maxY = Math.max(B.maxY, A.maxY);\n    return new Box(minX, minY, maxX - minX, maxY - minY);\n  }\n  static ExpandBy(A, n) {\n    return new Box(A.minX - n, A.minY - n, A.width + n * 2, A.height + n * 2);\n  }\n  static Collides = (A, B) => {\n    return !(A.maxX < B.minX || A.minX > B.maxX || A.maxY < B.minY || A.minY > B.maxY);\n  };\n  static Contains = (A, B) => {\n    return A.minX < B.minX && A.minY < B.minY && A.maxY > B.maxY && A.maxX > B.maxX;\n  };\n  static Includes = (A, B) => {\n    return Box.Collides(A, B) || Box.Contains(A, B);\n  };\n  static ContainsPoint = (A, B, margin = 0) => {\n    return !(B.x < A.minX - margin || B.y < A.minY - margin || B.x > A.maxX + margin || B.y > A.maxY + margin);\n  };\n  static Common = (boxes) => {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    for (let i = 0; i < boxes.length; i++) {\n      const B = boxes[i];\n      minX = Math.min(minX, B.minX);\n      minY = Math.min(minY, B.minY);\n      maxX = Math.max(maxX, B.maxX);\n      maxY = Math.max(maxY, B.maxY);\n    }\n    return new Box(minX, minY, maxX - minX, maxY - minY);\n  };\n  static Sides = (A, inset = 0) => {\n    const { corners } = A;\n    if (inset) {\n    }\n    return [\n      [corners[0], corners[1]],\n      [corners[1], corners[2]],\n      [corners[2], corners[3]],\n      [corners[3], corners[0]]\n    ];\n  };\n  static Resize(box, handle, dx, dy, isAspectRatioLocked = false) {\n    const { minX: a0x, minY: a0y, maxX: a1x, maxY: a1y } = box;\n    let { minX: b0x, minY: b0y, maxX: b1x, maxY: b1y } = box;\n    switch (handle) {\n      case \"left\":\n      case \"top_left\":\n      case \"bottom_left\": {\n        b0x += dx;\n        break;\n      }\n      case \"right\":\n      case \"top_right\":\n      case \"bottom_right\": {\n        b1x += dx;\n        break;\n      }\n    }\n    switch (handle) {\n      case \"top\":\n      case \"top_left\":\n      case \"top_right\": {\n        b0y += dy;\n        break;\n      }\n      case \"bottom\":\n      case \"bottom_left\":\n      case \"bottom_right\": {\n        b1y += dy;\n        break;\n      }\n    }\n    const scaleX = (b1x - b0x) / (a1x - a0x);\n    const scaleY = (b1y - b0y) / (a1y - a0y);\n    const flipX = scaleX < 0;\n    const flipY = scaleY < 0;\n    if (isAspectRatioLocked) {\n      const aspectRatio = (a1x - a0x) / (a1y - a0y);\n      const bw = Math.abs(b1x - b0x);\n      const bh = Math.abs(b1y - b0y);\n      const tw = bw * (scaleY < 0 ? 1 : -1) * (1 / aspectRatio);\n      const th = bh * (scaleX < 0 ? 1 : -1) * aspectRatio;\n      const isTall = aspectRatio < bw / bh;\n      switch (handle) {\n        case \"top_left\": {\n          if (isTall)\n            b0y = b1y + tw;\n          else\n            b0x = b1x + th;\n          break;\n        }\n        case \"top_right\": {\n          if (isTall)\n            b0y = b1y + tw;\n          else\n            b1x = b0x - th;\n          break;\n        }\n        case \"bottom_right\": {\n          if (isTall)\n            b1y = b0y - tw;\n          else\n            b1x = b0x - th;\n          break;\n        }\n        case \"bottom_left\": {\n          if (isTall)\n            b1y = b0y - tw;\n          else\n            b0x = b1x + th;\n          break;\n        }\n        case \"bottom\":\n        case \"top\": {\n          const m = (b0x + b1x) / 2;\n          const w = bh * aspectRatio;\n          b0x = m - w / 2;\n          b1x = m + w / 2;\n          break;\n        }\n        case \"left\":\n        case \"right\": {\n          const m = (b0y + b1y) / 2;\n          const h = bw / aspectRatio;\n          b0y = m - h / 2;\n          b1y = m + h / 2;\n          break;\n        }\n      }\n    }\n    if (flipX) {\n      const t = b1x;\n      b1x = b0x;\n      b0x = t;\n    }\n    if (flipY) {\n      const t = b1y;\n      b1y = b0y;\n      b0y = t;\n    }\n    const final = new Box(b0x, b0y, Math.abs(b1x - b0x), Math.abs(b1y - b0y));\n    return {\n      box: final,\n      scaleX: +(final.width / box.width * (scaleX > 0 ? 1 : -1)).toFixed(5),\n      scaleY: +(final.height / box.height * (scaleY > 0 ? 1 : -1)).toFixed(5)\n    };\n  }\n  equals(other) {\n    return Box.Equals(this, other);\n  }\n  static Equals(a, b) {\n    return b.x === a.x && b.y === a.y && b.w === a.w && b.h === a.h;\n  }\n  zeroFix() {\n    this.w = Math.max(1, this.w);\n    this.h = Math.max(1, this.h);\n    return this;\n  }\n  static ZeroFix(other) {\n    return new Box(other.x, other.y, Math.max(1, other.w), Math.max(1, other.h));\n  }\n}\nfunction flipSelectionHandleY(handle) {\n  switch (handle) {\n    case \"top\":\n      return \"bottom\";\n    case \"bottom\":\n      return \"top\";\n    case \"top_left\":\n      return \"bottom_left\";\n    case \"top_right\":\n      return \"bottom_right\";\n    case \"bottom_left\":\n      return \"top_left\";\n    case \"bottom_right\":\n      return \"top_right\";\n    default:\n      return handle;\n  }\n}\nfunction flipSelectionHandleX(handle) {\n  switch (handle) {\n    case \"left\":\n      return \"right\";\n    case \"right\":\n      return \"left\";\n    case \"top_left\":\n      return \"top_right\";\n    case \"top_right\":\n      return \"top_left\";\n    case \"bottom_left\":\n      return \"bottom_right\";\n    case \"bottom_right\":\n      return \"bottom_left\";\n    default:\n      return handle;\n  }\n}\nconst ORDERED_SELECTION_HANDLES = [\n  \"top\",\n  \"top_right\",\n  \"right\",\n  \"bottom_right\",\n  \"bottom\",\n  \"bottom_left\",\n  \"left\",\n  \"top_left\"\n];\nfunction rotateSelectionHandle(handle, rotation) {\n  rotation = rotation % _utils_mjs__WEBPACK_IMPORTED_MODULE_1__.PI2;\n  const numSteps = Math.round(rotation / (_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.PI / 4));\n  const currentIndex = ORDERED_SELECTION_HANDLES.indexOf(handle);\n  return ORDERED_SELECTION_HANDLES[(currentIndex + numSteps) % ORDERED_SELECTION_HANDLES.length];\n}\nfunction isSelectionCorner(selection) {\n  return selection === \"top_left\" || selection === \"top_right\" || selection === \"bottom_right\" || selection === \"bottom_left\";\n}\nconst ROTATE_CORNER_TO_SELECTION_CORNER = {\n  top_left_rotate: \"top_left\",\n  top_right_rotate: \"top_right\",\n  bottom_right_rotate: \"bottom_right\",\n  bottom_left_rotate: \"bottom_left\",\n  mobile_rotate: \"top_left\"\n};\n\n//# sourceMappingURL=Box.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvQm94Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFnQztBQUNtQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5Q0FBRztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlDQUFHO0FBQ2IsVUFBVSx5Q0FBRztBQUNiLFVBQVUseUNBQUc7QUFDYixVQUFVLHlDQUFHO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUseUNBQUc7QUFDYixVQUFVLHlDQUFHO0FBQ2IsVUFBVSx5Q0FBRztBQUNiLFVBQVUseUNBQUc7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBLGFBQWEsdURBQVc7QUFDeEIsYUFBYSx1REFBVztBQUN4QixhQUFhLHVEQUFXO0FBQ3hCLGFBQWEsdURBQVc7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQSxtQkFBbUIseUNBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxZQUFZLDZDQUE2QztBQUN6RCxVQUFVLDZDQUE2QztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsT0FBTztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFVBQVU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZDQUE2QztBQUN6RCxVQUFVLDZDQUE2QztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkNBQUc7QUFDM0IsMENBQTBDLDBDQUFFO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9Cb3gubWpzP2FkNGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4vVmVjLm1qc1wiO1xuaW1wb3J0IHsgUEksIFBJMiwgdG9QcmVjaXNpb24gfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmNsYXNzIEJveCB7XG4gIGNvbnN0cnVjdG9yKHggPSAwLCB5ID0gMCwgdyA9IDAsIGggPSAwKSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMudyA9IHc7XG4gICAgdGhpcy5oID0gaDtcbiAgfVxuICB4ID0gMDtcbiAgeSA9IDA7XG4gIHcgPSAwO1xuICBoID0gMDtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBwb2ludCgpIHtcbiAgICByZXR1cm4gbmV3IFZlYyh0aGlzLngsIHRoaXMueSk7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIHNldCBwb2ludCh2YWwpIHtcbiAgICB0aGlzLnggPSB2YWwueDtcbiAgICB0aGlzLnkgPSB2YWwueTtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IG1pblgoKSB7XG4gICAgcmV0dXJuIHRoaXMueDtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgc2V0IG1pblgobikge1xuICAgIHRoaXMueCA9IG47XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBtaWRYKCkge1xuICAgIHJldHVybiB0aGlzLnggKyB0aGlzLncgLyAyO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgbWF4WCgpIHtcbiAgICByZXR1cm4gdGhpcy54ICsgdGhpcy53O1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgbWluWSgpIHtcbiAgICByZXR1cm4gdGhpcy55O1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBzZXQgbWluWShuKSB7XG4gICAgdGhpcy55ID0gbjtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IG1pZFkoKSB7XG4gICAgcmV0dXJuIHRoaXMueSArIHRoaXMuaCAvIDI7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBtYXhZKCkge1xuICAgIHJldHVybiB0aGlzLnkgKyB0aGlzLmg7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCB3aWR0aCgpIHtcbiAgICByZXR1cm4gdGhpcy53O1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBzZXQgd2lkdGgobikge1xuICAgIHRoaXMudyA9IG47XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBoZWlnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaDtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgc2V0IGhlaWdodChuKSB7XG4gICAgdGhpcy5oID0gbjtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IGFzcGVjdFJhdGlvKCkge1xuICAgIHJldHVybiB0aGlzLndpZHRoIC8gdGhpcy5oZWlnaHQ7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBjZW50ZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBWZWModGhpcy5taWRYLCB0aGlzLm1pZFkpO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBzZXQgY2VudGVyKHYpIHtcbiAgICB0aGlzLm1pblggPSB2LnggLSB0aGlzLndpZHRoIC8gMjtcbiAgICB0aGlzLm1pblkgPSB2LnkgLSB0aGlzLmhlaWdodCAvIDI7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBjb3JuZXJzKCkge1xuICAgIHJldHVybiBbXG4gICAgICBuZXcgVmVjKHRoaXMubWluWCwgdGhpcy5taW5ZKSxcbiAgICAgIG5ldyBWZWModGhpcy5tYXhYLCB0aGlzLm1pblkpLFxuICAgICAgbmV3IFZlYyh0aGlzLm1heFgsIHRoaXMubWF4WSksXG4gICAgICBuZXcgVmVjKHRoaXMubWluWCwgdGhpcy5tYXhZKVxuICAgIF07XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBjb3JuZXJzQW5kQ2VudGVyKCkge1xuICAgIHJldHVybiBbXG4gICAgICBuZXcgVmVjKHRoaXMubWluWCwgdGhpcy5taW5ZKSxcbiAgICAgIG5ldyBWZWModGhpcy5tYXhYLCB0aGlzLm1pblkpLFxuICAgICAgbmV3IFZlYyh0aGlzLm1heFgsIHRoaXMubWF4WSksXG4gICAgICBuZXcgVmVjKHRoaXMubWluWCwgdGhpcy5tYXhZKSxcbiAgICAgIHRoaXMuY2VudGVyXG4gICAgXTtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IHNpZGVzKCkge1xuICAgIGNvbnN0IHsgY29ybmVycyB9ID0gdGhpcztcbiAgICByZXR1cm4gW1xuICAgICAgW2Nvcm5lcnNbMF0sIGNvcm5lcnNbMV1dLFxuICAgICAgW2Nvcm5lcnNbMV0sIGNvcm5lcnNbMl1dLFxuICAgICAgW2Nvcm5lcnNbMl0sIGNvcm5lcnNbM11dLFxuICAgICAgW2Nvcm5lcnNbM10sIGNvcm5lcnNbMF1dXG4gICAgXTtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IHNpemUoKSB7XG4gICAgcmV0dXJuIG5ldyBWZWModGhpcy53LCB0aGlzLmgpO1xuICB9XG4gIHRvRml4ZWQoKSB7XG4gICAgdGhpcy54ID0gdG9QcmVjaXNpb24odGhpcy54KTtcbiAgICB0aGlzLnkgPSB0b1ByZWNpc2lvbih0aGlzLnkpO1xuICAgIHRoaXMudyA9IHRvUHJlY2lzaW9uKHRoaXMudyk7XG4gICAgdGhpcy5oID0gdG9QcmVjaXNpb24odGhpcy5oKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXRUbyhCKSB7XG4gICAgdGhpcy54ID0gQi54O1xuICAgIHRoaXMueSA9IEIueTtcbiAgICB0aGlzLncgPSBCLnc7XG4gICAgdGhpcy5oID0gQi5oO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNldCh4ID0gMCwgeSA9IDAsIHcgPSAwLCBoID0gMCkge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLncgPSB3O1xuICAgIHRoaXMuaCA9IGg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZXhwYW5kKEEpIHtcbiAgICBjb25zdCBtaW5YID0gTWF0aC5taW4odGhpcy5taW5YLCBBLm1pblgpO1xuICAgIGNvbnN0IG1pblkgPSBNYXRoLm1pbih0aGlzLm1pblksIEEubWluWSk7XG4gICAgY29uc3QgbWF4WCA9IE1hdGgubWF4KHRoaXMubWF4WCwgQS5tYXhYKTtcbiAgICBjb25zdCBtYXhZID0gTWF0aC5tYXgodGhpcy5tYXhZLCBBLm1heFkpO1xuICAgIHRoaXMueCA9IG1pblg7XG4gICAgdGhpcy55ID0gbWluWTtcbiAgICB0aGlzLncgPSBtYXhYIC0gbWluWDtcbiAgICB0aGlzLmggPSBtYXhZIC0gbWluWTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBleHBhbmRCeShuKSB7XG4gICAgdGhpcy54IC09IG47XG4gICAgdGhpcy55IC09IG47XG4gICAgdGhpcy53ICs9IG4gKiAyO1xuICAgIHRoaXMuaCArPSBuICogMjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzY2FsZShuKSB7XG4gICAgdGhpcy54IC89IG47XG4gICAgdGhpcy55IC89IG47XG4gICAgdGhpcy53IC89IG47XG4gICAgdGhpcy5oIC89IG47XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY2xvbmUoKSB7XG4gICAgY29uc3QgeyB4LCB5LCB3LCBoIH0gPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQm94KHgsIHksIHcsIGgpO1xuICB9XG4gIHRyYW5zbGF0ZShkZWx0YSkge1xuICAgIHRoaXMueCArPSBkZWx0YS54O1xuICAgIHRoaXMueSArPSBkZWx0YS55O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNuYXBUb0dyaWQoc2l6ZSkge1xuICAgIGNvbnN0IG1pblggPSBNYXRoLnJvdW5kKHRoaXMubWluWCAvIHNpemUpICogc2l6ZTtcbiAgICBjb25zdCBtaW5ZID0gTWF0aC5yb3VuZCh0aGlzLm1pblkgLyBzaXplKSAqIHNpemU7XG4gICAgY29uc3QgbWF4WCA9IE1hdGgucm91bmQodGhpcy5tYXhYIC8gc2l6ZSkgKiBzaXplO1xuICAgIGNvbnN0IG1heFkgPSBNYXRoLnJvdW5kKHRoaXMubWF4WSAvIHNpemUpICogc2l6ZTtcbiAgICB0aGlzLm1pblggPSBtaW5YO1xuICAgIHRoaXMubWluWSA9IG1pblk7XG4gICAgdGhpcy53aWR0aCA9IE1hdGgubWF4KDEsIG1heFggLSBtaW5YKTtcbiAgICB0aGlzLmhlaWdodCA9IE1hdGgubWF4KDEsIG1heFkgLSBtaW5ZKTtcbiAgfVxuICBjb2xsaWRlcyhCKSB7XG4gICAgcmV0dXJuIEJveC5Db2xsaWRlcyh0aGlzLCBCKTtcbiAgfVxuICBjb250YWlucyhCKSB7XG4gICAgcmV0dXJuIEJveC5Db250YWlucyh0aGlzLCBCKTtcbiAgfVxuICBpbmNsdWRlcyhCKSB7XG4gICAgcmV0dXJuIEJveC5JbmNsdWRlcyh0aGlzLCBCKTtcbiAgfVxuICBjb250YWluc1BvaW50KFYsIG1hcmdpbiA9IDApIHtcbiAgICByZXR1cm4gQm94LkNvbnRhaW5zUG9pbnQodGhpcywgViwgbWFyZ2luKTtcbiAgfVxuICBnZXRIYW5kbGVQb2ludChoYW5kbGUpIHtcbiAgICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgICAgY2FzZSBcInRvcF9sZWZ0XCI6XG4gICAgICAgIHJldHVybiBuZXcgVmVjKHRoaXMubWluWCwgdGhpcy5taW5ZKTtcbiAgICAgIGNhc2UgXCJ0b3BfcmlnaHRcIjpcbiAgICAgICAgcmV0dXJuIG5ldyBWZWModGhpcy5tYXhYLCB0aGlzLm1pblkpO1xuICAgICAgY2FzZSBcImJvdHRvbV9sZWZ0XCI6XG4gICAgICAgIHJldHVybiBuZXcgVmVjKHRoaXMubWluWCwgdGhpcy5tYXhZKTtcbiAgICAgIGNhc2UgXCJib3R0b21fcmlnaHRcIjpcbiAgICAgICAgcmV0dXJuIG5ldyBWZWModGhpcy5tYXhYLCB0aGlzLm1heFkpO1xuICAgICAgY2FzZSBcInRvcFwiOlxuICAgICAgICByZXR1cm4gbmV3IFZlYyh0aGlzLm1pZFgsIHRoaXMubWluWSk7XG4gICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgcmV0dXJuIG5ldyBWZWModGhpcy5tYXhYLCB0aGlzLm1pZFkpO1xuICAgICAgY2FzZSBcImJvdHRvbVwiOlxuICAgICAgICByZXR1cm4gbmV3IFZlYyh0aGlzLm1pZFgsIHRoaXMubWF4WSk7XG4gICAgICBjYXNlIFwibGVmdFwiOlxuICAgICAgICByZXR1cm4gbmV3IFZlYyh0aGlzLm1pblgsIHRoaXMubWlkWSk7XG4gICAgfVxuICB9XG4gIHRvSnNvbigpIHtcbiAgICByZXR1cm4geyB4OiB0aGlzLm1pblgsIHk6IHRoaXMubWluWSwgdzogdGhpcy53LCBoOiB0aGlzLmggfTtcbiAgfVxuICByZXNpemUoaGFuZGxlLCBkeCwgZHkpIHtcbiAgICBjb25zdCB7IG1pblg6IGEweCwgbWluWTogYTB5LCBtYXhYOiBhMXgsIG1heFk6IGExeSB9ID0gdGhpcztcbiAgICBsZXQgeyBtaW5YOiBiMHgsIG1pblk6IGIweSwgbWF4WDogYjF4LCBtYXhZOiBiMXkgfSA9IHRoaXM7XG4gICAgc3dpdGNoIChoYW5kbGUpIHtcbiAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICBjYXNlIFwidG9wX2xlZnRcIjpcbiAgICAgIGNhc2UgXCJib3R0b21fbGVmdFwiOiB7XG4gICAgICAgIGIweCArPSBkeDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgIGNhc2UgXCJ0b3BfcmlnaHRcIjpcbiAgICAgIGNhc2UgXCJib3R0b21fcmlnaHRcIjoge1xuICAgICAgICBiMXggKz0gZHg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgICAgY2FzZSBcInRvcFwiOlxuICAgICAgY2FzZSBcInRvcF9sZWZ0XCI6XG4gICAgICBjYXNlIFwidG9wX3JpZ2h0XCI6IHtcbiAgICAgICAgYjB5ICs9IGR5O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJib3R0b21cIjpcbiAgICAgIGNhc2UgXCJib3R0b21fbGVmdFwiOlxuICAgICAgY2FzZSBcImJvdHRvbV9yaWdodFwiOiB7XG4gICAgICAgIGIxeSArPSBkeTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNjYWxlWCA9IChiMXggLSBiMHgpIC8gKGExeCAtIGEweCk7XG4gICAgY29uc3Qgc2NhbGVZID0gKGIxeSAtIGIweSkgLyAoYTF5IC0gYTB5KTtcbiAgICBjb25zdCBmbGlwWCA9IHNjYWxlWCA8IDA7XG4gICAgY29uc3QgZmxpcFkgPSBzY2FsZVkgPCAwO1xuICAgIGlmIChmbGlwWCkge1xuICAgICAgY29uc3QgdCA9IGIxeDtcbiAgICAgIGIxeCA9IGIweDtcbiAgICAgIGIweCA9IHQ7XG4gICAgfVxuICAgIGlmIChmbGlwWSkge1xuICAgICAgY29uc3QgdCA9IGIxeTtcbiAgICAgIGIxeSA9IGIweTtcbiAgICAgIGIweSA9IHQ7XG4gICAgfVxuICAgIHRoaXMubWluWCA9IGIweDtcbiAgICB0aGlzLm1pblkgPSBiMHk7XG4gICAgdGhpcy53aWR0aCA9IE1hdGguYWJzKGIxeCAtIGIweCk7XG4gICAgdGhpcy5oZWlnaHQgPSBNYXRoLmFicyhiMXkgLSBiMHkpO1xuICB9XG4gIHVuaW9uKGJveCkge1xuICAgIGNvbnN0IG1pblggPSBNYXRoLm1pbih0aGlzLm1pblgsIGJveC54KTtcbiAgICBjb25zdCBtaW5ZID0gTWF0aC5taW4odGhpcy5taW5ZLCBib3gueSk7XG4gICAgY29uc3QgbWF4WCA9IE1hdGgubWF4KHRoaXMubWF4WCwgYm94LncgKyBib3gueCk7XG4gICAgY29uc3QgbWF4WSA9IE1hdGgubWF4KHRoaXMubWF4WSwgYm94LmggKyBib3gueSk7XG4gICAgdGhpcy54ID0gbWluWDtcbiAgICB0aGlzLnkgPSBtaW5ZO1xuICAgIHRoaXMud2lkdGggPSBtYXhYIC0gbWluWDtcbiAgICB0aGlzLmhlaWdodCA9IG1heFkgLSBtaW5ZO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHN0YXRpYyBGcm9tKGJveCkge1xuICAgIHJldHVybiBuZXcgQm94KGJveC54LCBib3gueSwgYm94LncsIGJveC5oKTtcbiAgfVxuICBzdGF0aWMgRnJvbUNlbnRlcihjZW50ZXIsIHNpemUpIHtcbiAgICByZXR1cm4gbmV3IEJveChjZW50ZXIueCAtIHNpemUueCAvIDIsIGNlbnRlci55IC0gc2l6ZS55IC8gMiwgc2l6ZS54LCBzaXplLnkpO1xuICB9XG4gIHN0YXRpYyBGcm9tUG9pbnRzKHBvaW50cykge1xuICAgIGlmIChwb2ludHMubGVuZ3RoID09PSAwKVxuICAgICAgcmV0dXJuIG5ldyBCb3goKTtcbiAgICBsZXQgbWluWCA9IEluZmluaXR5O1xuICAgIGxldCBtaW5ZID0gSW5maW5pdHk7XG4gICAgbGV0IG1heFggPSAtSW5maW5pdHk7XG4gICAgbGV0IG1heFkgPSAtSW5maW5pdHk7XG4gICAgbGV0IHBvaW50O1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gcG9pbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgcG9pbnQgPSBwb2ludHNbaV07XG4gICAgICBtaW5YID0gTWF0aC5taW4ocG9pbnQueCwgbWluWCk7XG4gICAgICBtaW5ZID0gTWF0aC5taW4ocG9pbnQueSwgbWluWSk7XG4gICAgICBtYXhYID0gTWF0aC5tYXgocG9pbnQueCwgbWF4WCk7XG4gICAgICBtYXhZID0gTWF0aC5tYXgocG9pbnQueSwgbWF4WSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQm94KG1pblgsIG1pblksIG1heFggLSBtaW5YLCBtYXhZIC0gbWluWSk7XG4gIH1cbiAgc3RhdGljIEV4cGFuZChBLCBCKSB7XG4gICAgY29uc3QgbWluWCA9IE1hdGgubWluKEIubWluWCwgQS5taW5YKTtcbiAgICBjb25zdCBtaW5ZID0gTWF0aC5taW4oQi5taW5ZLCBBLm1pblkpO1xuICAgIGNvbnN0IG1heFggPSBNYXRoLm1heChCLm1heFgsIEEubWF4WCk7XG4gICAgY29uc3QgbWF4WSA9IE1hdGgubWF4KEIubWF4WSwgQS5tYXhZKTtcbiAgICByZXR1cm4gbmV3IEJveChtaW5YLCBtaW5ZLCBtYXhYIC0gbWluWCwgbWF4WSAtIG1pblkpO1xuICB9XG4gIHN0YXRpYyBFeHBhbmRCeShBLCBuKSB7XG4gICAgcmV0dXJuIG5ldyBCb3goQS5taW5YIC0gbiwgQS5taW5ZIC0gbiwgQS53aWR0aCArIG4gKiAyLCBBLmhlaWdodCArIG4gKiAyKTtcbiAgfVxuICBzdGF0aWMgQ29sbGlkZXMgPSAoQSwgQikgPT4ge1xuICAgIHJldHVybiAhKEEubWF4WCA8IEIubWluWCB8fCBBLm1pblggPiBCLm1heFggfHwgQS5tYXhZIDwgQi5taW5ZIHx8IEEubWluWSA+IEIubWF4WSk7XG4gIH07XG4gIHN0YXRpYyBDb250YWlucyA9IChBLCBCKSA9PiB7XG4gICAgcmV0dXJuIEEubWluWCA8IEIubWluWCAmJiBBLm1pblkgPCBCLm1pblkgJiYgQS5tYXhZID4gQi5tYXhZICYmIEEubWF4WCA+IEIubWF4WDtcbiAgfTtcbiAgc3RhdGljIEluY2x1ZGVzID0gKEEsIEIpID0+IHtcbiAgICByZXR1cm4gQm94LkNvbGxpZGVzKEEsIEIpIHx8IEJveC5Db250YWlucyhBLCBCKTtcbiAgfTtcbiAgc3RhdGljIENvbnRhaW5zUG9pbnQgPSAoQSwgQiwgbWFyZ2luID0gMCkgPT4ge1xuICAgIHJldHVybiAhKEIueCA8IEEubWluWCAtIG1hcmdpbiB8fCBCLnkgPCBBLm1pblkgLSBtYXJnaW4gfHwgQi54ID4gQS5tYXhYICsgbWFyZ2luIHx8IEIueSA+IEEubWF4WSArIG1hcmdpbik7XG4gIH07XG4gIHN0YXRpYyBDb21tb24gPSAoYm94ZXMpID0+IHtcbiAgICBsZXQgbWluWCA9IEluZmluaXR5O1xuICAgIGxldCBtaW5ZID0gSW5maW5pdHk7XG4gICAgbGV0IG1heFggPSAtSW5maW5pdHk7XG4gICAgbGV0IG1heFkgPSAtSW5maW5pdHk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib3hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgQiA9IGJveGVzW2ldO1xuICAgICAgbWluWCA9IE1hdGgubWluKG1pblgsIEIubWluWCk7XG4gICAgICBtaW5ZID0gTWF0aC5taW4obWluWSwgQi5taW5ZKTtcbiAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCBCLm1heFgpO1xuICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIEIubWF4WSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQm94KG1pblgsIG1pblksIG1heFggLSBtaW5YLCBtYXhZIC0gbWluWSk7XG4gIH07XG4gIHN0YXRpYyBTaWRlcyA9IChBLCBpbnNldCA9IDApID0+IHtcbiAgICBjb25zdCB7IGNvcm5lcnMgfSA9IEE7XG4gICAgaWYgKGluc2V0KSB7XG4gICAgfVxuICAgIHJldHVybiBbXG4gICAgICBbY29ybmVyc1swXSwgY29ybmVyc1sxXV0sXG4gICAgICBbY29ybmVyc1sxXSwgY29ybmVyc1syXV0sXG4gICAgICBbY29ybmVyc1syXSwgY29ybmVyc1szXV0sXG4gICAgICBbY29ybmVyc1szXSwgY29ybmVyc1swXV1cbiAgICBdO1xuICB9O1xuICBzdGF0aWMgUmVzaXplKGJveCwgaGFuZGxlLCBkeCwgZHksIGlzQXNwZWN0UmF0aW9Mb2NrZWQgPSBmYWxzZSkge1xuICAgIGNvbnN0IHsgbWluWDogYTB4LCBtaW5ZOiBhMHksIG1heFg6IGExeCwgbWF4WTogYTF5IH0gPSBib3g7XG4gICAgbGV0IHsgbWluWDogYjB4LCBtaW5ZOiBiMHksIG1heFg6IGIxeCwgbWF4WTogYjF5IH0gPSBib3g7XG4gICAgc3dpdGNoIChoYW5kbGUpIHtcbiAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICBjYXNlIFwidG9wX2xlZnRcIjpcbiAgICAgIGNhc2UgXCJib3R0b21fbGVmdFwiOiB7XG4gICAgICAgIGIweCArPSBkeDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgIGNhc2UgXCJ0b3BfcmlnaHRcIjpcbiAgICAgIGNhc2UgXCJib3R0b21fcmlnaHRcIjoge1xuICAgICAgICBiMXggKz0gZHg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgICAgY2FzZSBcInRvcFwiOlxuICAgICAgY2FzZSBcInRvcF9sZWZ0XCI6XG4gICAgICBjYXNlIFwidG9wX3JpZ2h0XCI6IHtcbiAgICAgICAgYjB5ICs9IGR5O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJib3R0b21cIjpcbiAgICAgIGNhc2UgXCJib3R0b21fbGVmdFwiOlxuICAgICAgY2FzZSBcImJvdHRvbV9yaWdodFwiOiB7XG4gICAgICAgIGIxeSArPSBkeTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNjYWxlWCA9IChiMXggLSBiMHgpIC8gKGExeCAtIGEweCk7XG4gICAgY29uc3Qgc2NhbGVZID0gKGIxeSAtIGIweSkgLyAoYTF5IC0gYTB5KTtcbiAgICBjb25zdCBmbGlwWCA9IHNjYWxlWCA8IDA7XG4gICAgY29uc3QgZmxpcFkgPSBzY2FsZVkgPCAwO1xuICAgIGlmIChpc0FzcGVjdFJhdGlvTG9ja2VkKSB7XG4gICAgICBjb25zdCBhc3BlY3RSYXRpbyA9IChhMXggLSBhMHgpIC8gKGExeSAtIGEweSk7XG4gICAgICBjb25zdCBidyA9IE1hdGguYWJzKGIxeCAtIGIweCk7XG4gICAgICBjb25zdCBiaCA9IE1hdGguYWJzKGIxeSAtIGIweSk7XG4gICAgICBjb25zdCB0dyA9IGJ3ICogKHNjYWxlWSA8IDAgPyAxIDogLTEpICogKDEgLyBhc3BlY3RSYXRpbyk7XG4gICAgICBjb25zdCB0aCA9IGJoICogKHNjYWxlWCA8IDAgPyAxIDogLTEpICogYXNwZWN0UmF0aW87XG4gICAgICBjb25zdCBpc1RhbGwgPSBhc3BlY3RSYXRpbyA8IGJ3IC8gYmg7XG4gICAgICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgICAgICBjYXNlIFwidG9wX2xlZnRcIjoge1xuICAgICAgICAgIGlmIChpc1RhbGwpXG4gICAgICAgICAgICBiMHkgPSBiMXkgKyB0dztcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBiMHggPSBiMXggKyB0aDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidG9wX3JpZ2h0XCI6IHtcbiAgICAgICAgICBpZiAoaXNUYWxsKVxuICAgICAgICAgICAgYjB5ID0gYjF5ICsgdHc7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgYjF4ID0gYjB4IC0gdGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImJvdHRvbV9yaWdodFwiOiB7XG4gICAgICAgICAgaWYgKGlzVGFsbClcbiAgICAgICAgICAgIGIxeSA9IGIweSAtIHR3O1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGIxeCA9IGIweCAtIHRoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJib3R0b21fbGVmdFwiOiB7XG4gICAgICAgICAgaWYgKGlzVGFsbClcbiAgICAgICAgICAgIGIxeSA9IGIweSAtIHR3O1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGIweCA9IGIxeCArIHRoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJib3R0b21cIjpcbiAgICAgICAgY2FzZSBcInRvcFwiOiB7XG4gICAgICAgICAgY29uc3QgbSA9IChiMHggKyBiMXgpIC8gMjtcbiAgICAgICAgICBjb25zdCB3ID0gYmggKiBhc3BlY3RSYXRpbztcbiAgICAgICAgICBiMHggPSBtIC0gdyAvIDI7XG4gICAgICAgICAgYjF4ID0gbSArIHcgLyAyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICAgIGNhc2UgXCJyaWdodFwiOiB7XG4gICAgICAgICAgY29uc3QgbSA9IChiMHkgKyBiMXkpIC8gMjtcbiAgICAgICAgICBjb25zdCBoID0gYncgLyBhc3BlY3RSYXRpbztcbiAgICAgICAgICBiMHkgPSBtIC0gaCAvIDI7XG4gICAgICAgICAgYjF5ID0gbSArIGggLyAyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmbGlwWCkge1xuICAgICAgY29uc3QgdCA9IGIxeDtcbiAgICAgIGIxeCA9IGIweDtcbiAgICAgIGIweCA9IHQ7XG4gICAgfVxuICAgIGlmIChmbGlwWSkge1xuICAgICAgY29uc3QgdCA9IGIxeTtcbiAgICAgIGIxeSA9IGIweTtcbiAgICAgIGIweSA9IHQ7XG4gICAgfVxuICAgIGNvbnN0IGZpbmFsID0gbmV3IEJveChiMHgsIGIweSwgTWF0aC5hYnMoYjF4IC0gYjB4KSwgTWF0aC5hYnMoYjF5IC0gYjB5KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJveDogZmluYWwsXG4gICAgICBzY2FsZVg6ICsoZmluYWwud2lkdGggLyBib3gud2lkdGggKiAoc2NhbGVYID4gMCA/IDEgOiAtMSkpLnRvRml4ZWQoNSksXG4gICAgICBzY2FsZVk6ICsoZmluYWwuaGVpZ2h0IC8gYm94LmhlaWdodCAqIChzY2FsZVkgPiAwID8gMSA6IC0xKSkudG9GaXhlZCg1KVxuICAgIH07XG4gIH1cbiAgZXF1YWxzKG90aGVyKSB7XG4gICAgcmV0dXJuIEJveC5FcXVhbHModGhpcywgb3RoZXIpO1xuICB9XG4gIHN0YXRpYyBFcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBiLnggPT09IGEueCAmJiBiLnkgPT09IGEueSAmJiBiLncgPT09IGEudyAmJiBiLmggPT09IGEuaDtcbiAgfVxuICB6ZXJvRml4KCkge1xuICAgIHRoaXMudyA9IE1hdGgubWF4KDEsIHRoaXMudyk7XG4gICAgdGhpcy5oID0gTWF0aC5tYXgoMSwgdGhpcy5oKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzdGF0aWMgWmVyb0ZpeChvdGhlcikge1xuICAgIHJldHVybiBuZXcgQm94KG90aGVyLngsIG90aGVyLnksIE1hdGgubWF4KDEsIG90aGVyLncpLCBNYXRoLm1heCgxLCBvdGhlci5oKSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGZsaXBTZWxlY3Rpb25IYW5kbGVZKGhhbmRsZSkge1xuICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgIGNhc2UgXCJ0b3BcIjpcbiAgICAgIHJldHVybiBcImJvdHRvbVwiO1xuICAgIGNhc2UgXCJib3R0b21cIjpcbiAgICAgIHJldHVybiBcInRvcFwiO1xuICAgIGNhc2UgXCJ0b3BfbGVmdFwiOlxuICAgICAgcmV0dXJuIFwiYm90dG9tX2xlZnRcIjtcbiAgICBjYXNlIFwidG9wX3JpZ2h0XCI6XG4gICAgICByZXR1cm4gXCJib3R0b21fcmlnaHRcIjtcbiAgICBjYXNlIFwiYm90dG9tX2xlZnRcIjpcbiAgICAgIHJldHVybiBcInRvcF9sZWZ0XCI7XG4gICAgY2FzZSBcImJvdHRvbV9yaWdodFwiOlxuICAgICAgcmV0dXJuIFwidG9wX3JpZ2h0XCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBoYW5kbGU7XG4gIH1cbn1cbmZ1bmN0aW9uIGZsaXBTZWxlY3Rpb25IYW5kbGVYKGhhbmRsZSkge1xuICBzd2l0Y2ggKGhhbmRsZSkge1xuICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICByZXR1cm4gXCJyaWdodFwiO1xuICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgcmV0dXJuIFwibGVmdFwiO1xuICAgIGNhc2UgXCJ0b3BfbGVmdFwiOlxuICAgICAgcmV0dXJuIFwidG9wX3JpZ2h0XCI7XG4gICAgY2FzZSBcInRvcF9yaWdodFwiOlxuICAgICAgcmV0dXJuIFwidG9wX2xlZnRcIjtcbiAgICBjYXNlIFwiYm90dG9tX2xlZnRcIjpcbiAgICAgIHJldHVybiBcImJvdHRvbV9yaWdodFwiO1xuICAgIGNhc2UgXCJib3R0b21fcmlnaHRcIjpcbiAgICAgIHJldHVybiBcImJvdHRvbV9sZWZ0XCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBoYW5kbGU7XG4gIH1cbn1cbmNvbnN0IE9SREVSRURfU0VMRUNUSU9OX0hBTkRMRVMgPSBbXG4gIFwidG9wXCIsXG4gIFwidG9wX3JpZ2h0XCIsXG4gIFwicmlnaHRcIixcbiAgXCJib3R0b21fcmlnaHRcIixcbiAgXCJib3R0b21cIixcbiAgXCJib3R0b21fbGVmdFwiLFxuICBcImxlZnRcIixcbiAgXCJ0b3BfbGVmdFwiXG5dO1xuZnVuY3Rpb24gcm90YXRlU2VsZWN0aW9uSGFuZGxlKGhhbmRsZSwgcm90YXRpb24pIHtcbiAgcm90YXRpb24gPSByb3RhdGlvbiAlIFBJMjtcbiAgY29uc3QgbnVtU3RlcHMgPSBNYXRoLnJvdW5kKHJvdGF0aW9uIC8gKFBJIC8gNCkpO1xuICBjb25zdCBjdXJyZW50SW5kZXggPSBPUkRFUkVEX1NFTEVDVElPTl9IQU5ETEVTLmluZGV4T2YoaGFuZGxlKTtcbiAgcmV0dXJuIE9SREVSRURfU0VMRUNUSU9OX0hBTkRMRVNbKGN1cnJlbnRJbmRleCArIG51bVN0ZXBzKSAlIE9SREVSRURfU0VMRUNUSU9OX0hBTkRMRVMubGVuZ3RoXTtcbn1cbmZ1bmN0aW9uIGlzU2VsZWN0aW9uQ29ybmVyKHNlbGVjdGlvbikge1xuICByZXR1cm4gc2VsZWN0aW9uID09PSBcInRvcF9sZWZ0XCIgfHwgc2VsZWN0aW9uID09PSBcInRvcF9yaWdodFwiIHx8IHNlbGVjdGlvbiA9PT0gXCJib3R0b21fcmlnaHRcIiB8fCBzZWxlY3Rpb24gPT09IFwiYm90dG9tX2xlZnRcIjtcbn1cbmNvbnN0IFJPVEFURV9DT1JORVJfVE9fU0VMRUNUSU9OX0NPUk5FUiA9IHtcbiAgdG9wX2xlZnRfcm90YXRlOiBcInRvcF9sZWZ0XCIsXG4gIHRvcF9yaWdodF9yb3RhdGU6IFwidG9wX3JpZ2h0XCIsXG4gIGJvdHRvbV9yaWdodF9yb3RhdGU6IFwiYm90dG9tX3JpZ2h0XCIsXG4gIGJvdHRvbV9sZWZ0X3JvdGF0ZTogXCJib3R0b21fbGVmdFwiLFxuICBtb2JpbGVfcm90YXRlOiBcInRvcF9sZWZ0XCJcbn07XG5leHBvcnQge1xuICBCb3gsXG4gIFJPVEFURV9DT1JORVJfVE9fU0VMRUNUSU9OX0NPUk5FUixcbiAgZmxpcFNlbGVjdGlvbkhhbmRsZVgsXG4gIGZsaXBTZWxlY3Rpb25IYW5kbGVZLFxuICBpc1NlbGVjdGlvbkNvcm5lcixcbiAgcm90YXRlU2VsZWN0aW9uSGFuZGxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Qm94Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Mat: () => (/* binding */ Mat),\n/* harmony export */   decomposeMatrix: () => (/* binding */ decomposeMatrix)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\n\n\nclass Mat {\n  constructor(a, b, c, d, e, f) {\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.e = e;\n    this.f = f;\n  }\n  a = 1;\n  b = 0;\n  c = 0;\n  d = 1;\n  e = 0;\n  f = 0;\n  equals(m) {\n    return this === m || this.a === m.a && this.b === m.b && this.c === m.c && this.d === m.d && this.e === m.e && this.f === m.f;\n  }\n  identity() {\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.e = 0;\n    this.f = 0;\n    return this;\n  }\n  multiply(m) {\n    const m2 = m;\n    const { a, b, c, d, e, f } = this;\n    this.a = a * m2.a + c * m2.b;\n    this.c = a * m2.c + c * m2.d;\n    this.e = a * m2.e + c * m2.f + e;\n    this.b = b * m2.a + d * m2.b;\n    this.d = b * m2.c + d * m2.d;\n    this.f = b * m2.e + d * m2.f + f;\n    return this;\n  }\n  rotate(r, cx, cy) {\n    if (r === 0)\n      return this;\n    if (cx === void 0)\n      return this.multiply(Mat.Rotate(r));\n    return this.translate(cx, cy).multiply(Mat.Rotate(r)).translate(-cx, -cy);\n  }\n  translate(x, y) {\n    return this.multiply(Mat.Translate(x, y));\n  }\n  scale(x, y) {\n    return this.multiply(Mat.Scale(x, y));\n  }\n  invert() {\n    const { a, b, c, d, e, f } = this;\n    const denom = a * d - b * c;\n    this.a = d / denom;\n    this.b = b / -denom;\n    this.c = c / -denom;\n    this.d = a / denom;\n    this.e = (d * e - c * f) / -denom;\n    this.f = (b * e - a * f) / denom;\n    return this;\n  }\n  applyToPoint(point) {\n    return Mat.applyToPoint(this, point);\n  }\n  applyToPoints(points) {\n    return Mat.applyToPoints(this, points);\n  }\n  rotation() {\n    return Mat.Rotation(this);\n  }\n  point() {\n    return Mat.Point(this);\n  }\n  decomposed() {\n    return Mat.Decompose(this);\n  }\n  toCssString() {\n    return Mat.toCssString(this);\n  }\n  setTo(model) {\n    Object.assign(this, model);\n    return this;\n  }\n  decompose() {\n    return Mat.Decompose(this);\n  }\n  clone() {\n    return new Mat(this.a, this.b, this.c, this.d, this.e, this.f);\n  }\n  /* --------------------- Static --------------------- */\n  static Identity() {\n    return new Mat(1, 0, 0, 1, 0, 0);\n  }\n  static Translate(x, y) {\n    return new Mat(1, 0, 0, 1, x, y);\n  }\n  static Rotate(r, cx, cy) {\n    if (r === 0)\n      return Mat.Identity();\n    const cosAngle = Math.cos(r);\n    const sinAngle = Math.sin(r);\n    const rotationMatrix = new Mat(cosAngle, sinAngle, -sinAngle, cosAngle, 0, 0);\n    if (cx === void 0)\n      return rotationMatrix;\n    return Mat.Compose(Mat.Translate(cx, cy), rotationMatrix, Mat.Translate(-cx, -cy));\n  }\n  static Scale = (x, y, cx, cy) => {\n    const scaleMatrix = new Mat(x, 0, 0, y, 0, 0);\n    if (cx === void 0)\n      return scaleMatrix;\n    return Mat.Compose(Mat.Translate(cx, cy), scaleMatrix, Mat.Translate(-cx, -cy));\n  };\n  static Multiply(m1, m2) {\n    return {\n      a: m1.a * m2.a + m1.c * m2.b,\n      c: m1.a * m2.c + m1.c * m2.d,\n      e: m1.a * m2.e + m1.c * m2.f + m1.e,\n      b: m1.b * m2.a + m1.d * m2.b,\n      d: m1.b * m2.c + m1.d * m2.d,\n      f: m1.b * m2.e + m1.d * m2.f + m1.f\n    };\n  }\n  static Inverse(m) {\n    const denom = m.a * m.d - m.b * m.c;\n    return {\n      a: m.d / denom,\n      b: m.b / -denom,\n      c: m.c / -denom,\n      d: m.a / denom,\n      e: (m.d * m.e - m.c * m.f) / -denom,\n      f: (m.b * m.e - m.a * m.f) / denom\n    };\n  }\n  static Absolute(m) {\n    const denom = m.a * m.d - m.b * m.c;\n    return {\n      a: m.d / denom,\n      b: m.b / -denom,\n      c: m.c / -denom,\n      d: m.a / denom,\n      e: (m.d * m.e - m.c * m.f) / denom,\n      f: (m.b * m.e - m.a * m.f) / -denom\n    };\n  }\n  static Compose(...matrices) {\n    const matrix = Mat.Identity();\n    for (let i = 0, n = matrices.length; i < n; i++) {\n      matrix.multiply(matrices[i]);\n    }\n    return matrix;\n  }\n  static Point(m) {\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec(m.e, m.f);\n  }\n  static Rotation(m) {\n    let rotation;\n    if (m.a !== 0 || m.c !== 0) {\n      const hypotAc = (m.a * m.a + m.c * m.c) ** 0.5;\n      rotation = Math.acos(m.a / hypotAc) * (m.c > 0 ? -1 : 1);\n    } else if (m.b !== 0 || m.d !== 0) {\n      const hypotBd = (m.b * m.b + m.d * m.d) ** 0.5;\n      rotation = _utils_mjs__WEBPACK_IMPORTED_MODULE_1__.HALF_PI + Math.acos(m.b / hypotBd) * (m.d > 0 ? -1 : 1);\n    } else {\n      rotation = 0;\n    }\n    return (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.clampRadians)(rotation);\n  }\n  static Decompose(m) {\n    let scaleX, scaleY, rotation;\n    if (m.a !== 0 || m.c !== 0) {\n      const hypotAc = (m.a * m.a + m.c * m.c) ** 0.5;\n      scaleX = hypotAc;\n      scaleY = (m.a * m.d - m.b * m.c) / hypotAc;\n      rotation = Math.acos(m.a / hypotAc) * (m.c > 0 ? -1 : 1);\n    } else if (m.b !== 0 || m.d !== 0) {\n      const hypotBd = (m.b * m.b + m.d * m.d) ** 0.5;\n      scaleX = (m.a * m.d - m.b * m.c) / hypotBd;\n      scaleY = hypotBd;\n      rotation = _utils_mjs__WEBPACK_IMPORTED_MODULE_1__.HALF_PI + Math.acos(m.b / hypotBd) * (m.d > 0 ? -1 : 1);\n    } else {\n      scaleX = 0;\n      scaleY = 0;\n      rotation = 0;\n    }\n    return {\n      x: m.e,\n      y: m.f,\n      scaleX,\n      scaleY,\n      rotation: (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.clampRadians)(rotation)\n    };\n  }\n  static Smooth(m, precision = 1e10) {\n    m.a = Math.round(m.a * precision) / precision;\n    m.b = Math.round(m.b * precision) / precision;\n    m.c = Math.round(m.c * precision) / precision;\n    m.d = Math.round(m.d * precision) / precision;\n    m.e = Math.round(m.e * precision) / precision;\n    m.f = Math.round(m.f * precision) / precision;\n    return m;\n  }\n  static toCssString(m) {\n    return `matrix(${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(m.a)}, ${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(m.b)}, ${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(\n      m.c\n    )}, ${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(m.d)}, ${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(m.e)}, ${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(m.f)})`;\n  }\n  static applyToPoint(m, point) {\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec(\n      m.a * point.x + m.c * point.y + m.e,\n      m.b * point.x + m.d * point.y + m.f,\n      point.z\n    );\n  }\n  static applyToXY(m, x, y) {\n    return [m.a * x + m.c * y + m.e, m.b * x + m.d * y + m.f];\n  }\n  static applyToPoints(m, points) {\n    return points.map(\n      (point) => new _Vec_mjs__WEBPACK_IMPORTED_MODULE_2__.Vec(m.a * point.x + m.c * point.y + m.e, m.b * point.x + m.d * point.y + m.f, point.z)\n    );\n  }\n  static applyToBounds(m, box) {\n    return new _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box(m.e + box.minX, m.f + box.minY, box.width, box.height);\n  }\n  static From(m) {\n    return new Mat(m.a, m.b, m.c, m.d, m.e, m.f);\n  }\n  static Cast(m) {\n    return m instanceof Mat ? m : Mat.From(m);\n  }\n}\nfunction decomposeMatrix(m) {\n  return {\n    x: m.e,\n    y: m.f,\n    scaleX: Math.sqrt(m.a * m.a + m.b * m.b),\n    scaleY: Math.sqrt(m.c * m.c + m.d * m.d),\n    rotation: Math.atan2(m.b, m.a)\n  };\n}\n\n//# sourceMappingURL=Mat.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvTWF0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFnQztBQUNvQztBQUNwQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtQkFBbUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1CQUFtQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxPQUFPO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlDQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLGlCQUFpQiwrQ0FBTztBQUN4QixNQUFNO0FBQ047QUFDQTtBQUNBLFdBQVcsd0RBQVk7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0NBQU87QUFDeEIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3REFBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMERBQWMsTUFBTSxJQUFJLDBEQUFjLE1BQU0sSUFBSSwwREFBYztBQUNuRjtBQUNBLE1BQU0sSUFBSSwwREFBYyxNQUFNLElBQUksMERBQWMsTUFBTSxJQUFJLDBEQUFjLE1BQU07QUFDOUU7QUFDQTtBQUNBLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIseUNBQUc7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5Q0FBRztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9NYXQubWpzP2IzMjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm94IH0gZnJvbSBcIi4vQm94Lm1qc1wiO1xuaW1wb3J0IHsgY2xhbXBSYWRpYW5zLCBIQUxGX1BJLCB0b0RvbVByZWNpc2lvbiB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4vVmVjLm1qc1wiO1xuY2xhc3MgTWF0IHtcbiAgY29uc3RydWN0b3IoYSwgYiwgYywgZCwgZSwgZikge1xuICAgIHRoaXMuYSA9IGE7XG4gICAgdGhpcy5iID0gYjtcbiAgICB0aGlzLmMgPSBjO1xuICAgIHRoaXMuZCA9IGQ7XG4gICAgdGhpcy5lID0gZTtcbiAgICB0aGlzLmYgPSBmO1xuICB9XG4gIGEgPSAxO1xuICBiID0gMDtcbiAgYyA9IDA7XG4gIGQgPSAxO1xuICBlID0gMDtcbiAgZiA9IDA7XG4gIGVxdWFscyhtKSB7XG4gICAgcmV0dXJuIHRoaXMgPT09IG0gfHwgdGhpcy5hID09PSBtLmEgJiYgdGhpcy5iID09PSBtLmIgJiYgdGhpcy5jID09PSBtLmMgJiYgdGhpcy5kID09PSBtLmQgJiYgdGhpcy5lID09PSBtLmUgJiYgdGhpcy5mID09PSBtLmY7XG4gIH1cbiAgaWRlbnRpdHkoKSB7XG4gICAgdGhpcy5hID0gMTtcbiAgICB0aGlzLmIgPSAwO1xuICAgIHRoaXMuYyA9IDA7XG4gICAgdGhpcy5kID0gMTtcbiAgICB0aGlzLmUgPSAwO1xuICAgIHRoaXMuZiA9IDA7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgbXVsdGlwbHkobSkge1xuICAgIGNvbnN0IG0yID0gbTtcbiAgICBjb25zdCB7IGEsIGIsIGMsIGQsIGUsIGYgfSA9IHRoaXM7XG4gICAgdGhpcy5hID0gYSAqIG0yLmEgKyBjICogbTIuYjtcbiAgICB0aGlzLmMgPSBhICogbTIuYyArIGMgKiBtMi5kO1xuICAgIHRoaXMuZSA9IGEgKiBtMi5lICsgYyAqIG0yLmYgKyBlO1xuICAgIHRoaXMuYiA9IGIgKiBtMi5hICsgZCAqIG0yLmI7XG4gICAgdGhpcy5kID0gYiAqIG0yLmMgKyBkICogbTIuZDtcbiAgICB0aGlzLmYgPSBiICogbTIuZSArIGQgKiBtMi5mICsgZjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByb3RhdGUociwgY3gsIGN5KSB7XG4gICAgaWYgKHIgPT09IDApXG4gICAgICByZXR1cm4gdGhpcztcbiAgICBpZiAoY3ggPT09IHZvaWQgMClcbiAgICAgIHJldHVybiB0aGlzLm11bHRpcGx5KE1hdC5Sb3RhdGUocikpO1xuICAgIHJldHVybiB0aGlzLnRyYW5zbGF0ZShjeCwgY3kpLm11bHRpcGx5KE1hdC5Sb3RhdGUocikpLnRyYW5zbGF0ZSgtY3gsIC1jeSk7XG4gIH1cbiAgdHJhbnNsYXRlKHgsIHkpIHtcbiAgICByZXR1cm4gdGhpcy5tdWx0aXBseShNYXQuVHJhbnNsYXRlKHgsIHkpKTtcbiAgfVxuICBzY2FsZSh4LCB5KSB7XG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbHkoTWF0LlNjYWxlKHgsIHkpKTtcbiAgfVxuICBpbnZlcnQoKSB7XG4gICAgY29uc3QgeyBhLCBiLCBjLCBkLCBlLCBmIH0gPSB0aGlzO1xuICAgIGNvbnN0IGRlbm9tID0gYSAqIGQgLSBiICogYztcbiAgICB0aGlzLmEgPSBkIC8gZGVub207XG4gICAgdGhpcy5iID0gYiAvIC1kZW5vbTtcbiAgICB0aGlzLmMgPSBjIC8gLWRlbm9tO1xuICAgIHRoaXMuZCA9IGEgLyBkZW5vbTtcbiAgICB0aGlzLmUgPSAoZCAqIGUgLSBjICogZikgLyAtZGVub207XG4gICAgdGhpcy5mID0gKGIgKiBlIC0gYSAqIGYpIC8gZGVub207XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgYXBwbHlUb1BvaW50KHBvaW50KSB7XG4gICAgcmV0dXJuIE1hdC5hcHBseVRvUG9pbnQodGhpcywgcG9pbnQpO1xuICB9XG4gIGFwcGx5VG9Qb2ludHMocG9pbnRzKSB7XG4gICAgcmV0dXJuIE1hdC5hcHBseVRvUG9pbnRzKHRoaXMsIHBvaW50cyk7XG4gIH1cbiAgcm90YXRpb24oKSB7XG4gICAgcmV0dXJuIE1hdC5Sb3RhdGlvbih0aGlzKTtcbiAgfVxuICBwb2ludCgpIHtcbiAgICByZXR1cm4gTWF0LlBvaW50KHRoaXMpO1xuICB9XG4gIGRlY29tcG9zZWQoKSB7XG4gICAgcmV0dXJuIE1hdC5EZWNvbXBvc2UodGhpcyk7XG4gIH1cbiAgdG9Dc3NTdHJpbmcoKSB7XG4gICAgcmV0dXJuIE1hdC50b0Nzc1N0cmluZyh0aGlzKTtcbiAgfVxuICBzZXRUbyhtb2RlbCkge1xuICAgIE9iamVjdC5hc3NpZ24odGhpcywgbW9kZWwpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGRlY29tcG9zZSgpIHtcbiAgICByZXR1cm4gTWF0LkRlY29tcG9zZSh0aGlzKTtcbiAgfVxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IE1hdCh0aGlzLmEsIHRoaXMuYiwgdGhpcy5jLCB0aGlzLmQsIHRoaXMuZSwgdGhpcy5mKTtcbiAgfVxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0gU3RhdGljIC0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICBzdGF0aWMgSWRlbnRpdHkoKSB7XG4gICAgcmV0dXJuIG5ldyBNYXQoMSwgMCwgMCwgMSwgMCwgMCk7XG4gIH1cbiAgc3RhdGljIFRyYW5zbGF0ZSh4LCB5KSB7XG4gICAgcmV0dXJuIG5ldyBNYXQoMSwgMCwgMCwgMSwgeCwgeSk7XG4gIH1cbiAgc3RhdGljIFJvdGF0ZShyLCBjeCwgY3kpIHtcbiAgICBpZiAociA9PT0gMClcbiAgICAgIHJldHVybiBNYXQuSWRlbnRpdHkoKTtcbiAgICBjb25zdCBjb3NBbmdsZSA9IE1hdGguY29zKHIpO1xuICAgIGNvbnN0IHNpbkFuZ2xlID0gTWF0aC5zaW4ocik7XG4gICAgY29uc3Qgcm90YXRpb25NYXRyaXggPSBuZXcgTWF0KGNvc0FuZ2xlLCBzaW5BbmdsZSwgLXNpbkFuZ2xlLCBjb3NBbmdsZSwgMCwgMCk7XG4gICAgaWYgKGN4ID09PSB2b2lkIDApXG4gICAgICByZXR1cm4gcm90YXRpb25NYXRyaXg7XG4gICAgcmV0dXJuIE1hdC5Db21wb3NlKE1hdC5UcmFuc2xhdGUoY3gsIGN5KSwgcm90YXRpb25NYXRyaXgsIE1hdC5UcmFuc2xhdGUoLWN4LCAtY3kpKTtcbiAgfVxuICBzdGF0aWMgU2NhbGUgPSAoeCwgeSwgY3gsIGN5KSA9PiB7XG4gICAgY29uc3Qgc2NhbGVNYXRyaXggPSBuZXcgTWF0KHgsIDAsIDAsIHksIDAsIDApO1xuICAgIGlmIChjeCA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuIHNjYWxlTWF0cml4O1xuICAgIHJldHVybiBNYXQuQ29tcG9zZShNYXQuVHJhbnNsYXRlKGN4LCBjeSksIHNjYWxlTWF0cml4LCBNYXQuVHJhbnNsYXRlKC1jeCwgLWN5KSk7XG4gIH07XG4gIHN0YXRpYyBNdWx0aXBseShtMSwgbTIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYTogbTEuYSAqIG0yLmEgKyBtMS5jICogbTIuYixcbiAgICAgIGM6IG0xLmEgKiBtMi5jICsgbTEuYyAqIG0yLmQsXG4gICAgICBlOiBtMS5hICogbTIuZSArIG0xLmMgKiBtMi5mICsgbTEuZSxcbiAgICAgIGI6IG0xLmIgKiBtMi5hICsgbTEuZCAqIG0yLmIsXG4gICAgICBkOiBtMS5iICogbTIuYyArIG0xLmQgKiBtMi5kLFxuICAgICAgZjogbTEuYiAqIG0yLmUgKyBtMS5kICogbTIuZiArIG0xLmZcbiAgICB9O1xuICB9XG4gIHN0YXRpYyBJbnZlcnNlKG0pIHtcbiAgICBjb25zdCBkZW5vbSA9IG0uYSAqIG0uZCAtIG0uYiAqIG0uYztcbiAgICByZXR1cm4ge1xuICAgICAgYTogbS5kIC8gZGVub20sXG4gICAgICBiOiBtLmIgLyAtZGVub20sXG4gICAgICBjOiBtLmMgLyAtZGVub20sXG4gICAgICBkOiBtLmEgLyBkZW5vbSxcbiAgICAgIGU6IChtLmQgKiBtLmUgLSBtLmMgKiBtLmYpIC8gLWRlbm9tLFxuICAgICAgZjogKG0uYiAqIG0uZSAtIG0uYSAqIG0uZikgLyBkZW5vbVxuICAgIH07XG4gIH1cbiAgc3RhdGljIEFic29sdXRlKG0pIHtcbiAgICBjb25zdCBkZW5vbSA9IG0uYSAqIG0uZCAtIG0uYiAqIG0uYztcbiAgICByZXR1cm4ge1xuICAgICAgYTogbS5kIC8gZGVub20sXG4gICAgICBiOiBtLmIgLyAtZGVub20sXG4gICAgICBjOiBtLmMgLyAtZGVub20sXG4gICAgICBkOiBtLmEgLyBkZW5vbSxcbiAgICAgIGU6IChtLmQgKiBtLmUgLSBtLmMgKiBtLmYpIC8gZGVub20sXG4gICAgICBmOiAobS5iICogbS5lIC0gbS5hICogbS5mKSAvIC1kZW5vbVxuICAgIH07XG4gIH1cbiAgc3RhdGljIENvbXBvc2UoLi4ubWF0cmljZXMpIHtcbiAgICBjb25zdCBtYXRyaXggPSBNYXQuSWRlbnRpdHkoKTtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IG1hdHJpY2VzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgbWF0cml4Lm11bHRpcGx5KG1hdHJpY2VzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIG1hdHJpeDtcbiAgfVxuICBzdGF0aWMgUG9pbnQobSkge1xuICAgIHJldHVybiBuZXcgVmVjKG0uZSwgbS5mKTtcbiAgfVxuICBzdGF0aWMgUm90YXRpb24obSkge1xuICAgIGxldCByb3RhdGlvbjtcbiAgICBpZiAobS5hICE9PSAwIHx8IG0uYyAhPT0gMCkge1xuICAgICAgY29uc3QgaHlwb3RBYyA9IChtLmEgKiBtLmEgKyBtLmMgKiBtLmMpICoqIDAuNTtcbiAgICAgIHJvdGF0aW9uID0gTWF0aC5hY29zKG0uYSAvIGh5cG90QWMpICogKG0uYyA+IDAgPyAtMSA6IDEpO1xuICAgIH0gZWxzZSBpZiAobS5iICE9PSAwIHx8IG0uZCAhPT0gMCkge1xuICAgICAgY29uc3QgaHlwb3RCZCA9IChtLmIgKiBtLmIgKyBtLmQgKiBtLmQpICoqIDAuNTtcbiAgICAgIHJvdGF0aW9uID0gSEFMRl9QSSArIE1hdGguYWNvcyhtLmIgLyBoeXBvdEJkKSAqIChtLmQgPiAwID8gLTEgOiAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcm90YXRpb24gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gY2xhbXBSYWRpYW5zKHJvdGF0aW9uKTtcbiAgfVxuICBzdGF0aWMgRGVjb21wb3NlKG0pIHtcbiAgICBsZXQgc2NhbGVYLCBzY2FsZVksIHJvdGF0aW9uO1xuICAgIGlmIChtLmEgIT09IDAgfHwgbS5jICE9PSAwKSB7XG4gICAgICBjb25zdCBoeXBvdEFjID0gKG0uYSAqIG0uYSArIG0uYyAqIG0uYykgKiogMC41O1xuICAgICAgc2NhbGVYID0gaHlwb3RBYztcbiAgICAgIHNjYWxlWSA9IChtLmEgKiBtLmQgLSBtLmIgKiBtLmMpIC8gaHlwb3RBYztcbiAgICAgIHJvdGF0aW9uID0gTWF0aC5hY29zKG0uYSAvIGh5cG90QWMpICogKG0uYyA+IDAgPyAtMSA6IDEpO1xuICAgIH0gZWxzZSBpZiAobS5iICE9PSAwIHx8IG0uZCAhPT0gMCkge1xuICAgICAgY29uc3QgaHlwb3RCZCA9IChtLmIgKiBtLmIgKyBtLmQgKiBtLmQpICoqIDAuNTtcbiAgICAgIHNjYWxlWCA9IChtLmEgKiBtLmQgLSBtLmIgKiBtLmMpIC8gaHlwb3RCZDtcbiAgICAgIHNjYWxlWSA9IGh5cG90QmQ7XG4gICAgICByb3RhdGlvbiA9IEhBTEZfUEkgKyBNYXRoLmFjb3MobS5iIC8gaHlwb3RCZCkgKiAobS5kID4gMCA/IC0xIDogMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjYWxlWCA9IDA7XG4gICAgICBzY2FsZVkgPSAwO1xuICAgICAgcm90YXRpb24gPSAwO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgeDogbS5lLFxuICAgICAgeTogbS5mLFxuICAgICAgc2NhbGVYLFxuICAgICAgc2NhbGVZLFxuICAgICAgcm90YXRpb246IGNsYW1wUmFkaWFucyhyb3RhdGlvbilcbiAgICB9O1xuICB9XG4gIHN0YXRpYyBTbW9vdGgobSwgcHJlY2lzaW9uID0gMWUxMCkge1xuICAgIG0uYSA9IE1hdGgucm91bmQobS5hICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjtcbiAgICBtLmIgPSBNYXRoLnJvdW5kKG0uYiAqIHByZWNpc2lvbikgLyBwcmVjaXNpb247XG4gICAgbS5jID0gTWF0aC5yb3VuZChtLmMgKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uO1xuICAgIG0uZCA9IE1hdGgucm91bmQobS5kICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjtcbiAgICBtLmUgPSBNYXRoLnJvdW5kKG0uZSAqIHByZWNpc2lvbikgLyBwcmVjaXNpb247XG4gICAgbS5mID0gTWF0aC5yb3VuZChtLmYgKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uO1xuICAgIHJldHVybiBtO1xuICB9XG4gIHN0YXRpYyB0b0Nzc1N0cmluZyhtKSB7XG4gICAgcmV0dXJuIGBtYXRyaXgoJHt0b0RvbVByZWNpc2lvbihtLmEpfSwgJHt0b0RvbVByZWNpc2lvbihtLmIpfSwgJHt0b0RvbVByZWNpc2lvbihcbiAgICAgIG0uY1xuICAgICl9LCAke3RvRG9tUHJlY2lzaW9uKG0uZCl9LCAke3RvRG9tUHJlY2lzaW9uKG0uZSl9LCAke3RvRG9tUHJlY2lzaW9uKG0uZil9KWA7XG4gIH1cbiAgc3RhdGljIGFwcGx5VG9Qb2ludChtLCBwb2ludCkge1xuICAgIHJldHVybiBuZXcgVmVjKFxuICAgICAgbS5hICogcG9pbnQueCArIG0uYyAqIHBvaW50LnkgKyBtLmUsXG4gICAgICBtLmIgKiBwb2ludC54ICsgbS5kICogcG9pbnQueSArIG0uZixcbiAgICAgIHBvaW50LnpcbiAgICApO1xuICB9XG4gIHN0YXRpYyBhcHBseVRvWFkobSwgeCwgeSkge1xuICAgIHJldHVybiBbbS5hICogeCArIG0uYyAqIHkgKyBtLmUsIG0uYiAqIHggKyBtLmQgKiB5ICsgbS5mXTtcbiAgfVxuICBzdGF0aWMgYXBwbHlUb1BvaW50cyhtLCBwb2ludHMpIHtcbiAgICByZXR1cm4gcG9pbnRzLm1hcChcbiAgICAgIChwb2ludCkgPT4gbmV3IFZlYyhtLmEgKiBwb2ludC54ICsgbS5jICogcG9pbnQueSArIG0uZSwgbS5iICogcG9pbnQueCArIG0uZCAqIHBvaW50LnkgKyBtLmYsIHBvaW50LnopXG4gICAgKTtcbiAgfVxuICBzdGF0aWMgYXBwbHlUb0JvdW5kcyhtLCBib3gpIHtcbiAgICByZXR1cm4gbmV3IEJveChtLmUgKyBib3gubWluWCwgbS5mICsgYm94Lm1pblksIGJveC53aWR0aCwgYm94LmhlaWdodCk7XG4gIH1cbiAgc3RhdGljIEZyb20obSkge1xuICAgIHJldHVybiBuZXcgTWF0KG0uYSwgbS5iLCBtLmMsIG0uZCwgbS5lLCBtLmYpO1xuICB9XG4gIHN0YXRpYyBDYXN0KG0pIHtcbiAgICByZXR1cm4gbSBpbnN0YW5jZW9mIE1hdCA/IG0gOiBNYXQuRnJvbShtKTtcbiAgfVxufVxuZnVuY3Rpb24gZGVjb21wb3NlTWF0cml4KG0pIHtcbiAgcmV0dXJuIHtcbiAgICB4OiBtLmUsXG4gICAgeTogbS5mLFxuICAgIHNjYWxlWDogTWF0aC5zcXJ0KG0uYSAqIG0uYSArIG0uYiAqIG0uYiksXG4gICAgc2NhbGVZOiBNYXRoLnNxcnQobS5jICogbS5jICsgbS5kICogbS5kKSxcbiAgICByb3RhdGlvbjogTWF0aC5hdGFuMihtLmIsIG0uYSlcbiAgfTtcbn1cbmV4cG9ydCB7XG4gIE1hdCxcbiAgZGVjb21wb3NlTWF0cml4XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWF0Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Vec: () => (/* binding */ Vec)\n/* harmony export */ });\n/* harmony import */ var _easings_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./easings.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\nclass Vec {\n  constructor(x = 0, y = 0, z = 1) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get pressure() {\n    return this.z;\n  }\n  set(x = this.x, y = this.y, z = this.z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  }\n  setTo({ x = 0, y = 0, z = 1 }) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  }\n  rot(r) {\n    if (r === 0)\n      return this;\n    const { x, y } = this;\n    const s = Math.sin(r);\n    const c = Math.cos(r);\n    this.x = x * c - y * s;\n    this.y = x * s + y * c;\n    return this;\n  }\n  rotWith(C, r) {\n    if (r === 0)\n      return this;\n    const x = this.x - C.x;\n    const y = this.y - C.y;\n    const s = Math.sin(r);\n    const c = Math.cos(r);\n    this.x = C.x + (x * c - y * s);\n    this.y = C.y + (x * s + y * c);\n    return this;\n  }\n  clone() {\n    const { x, y, z } = this;\n    return new Vec(x, y, z);\n  }\n  sub(V) {\n    this.x -= V.x;\n    this.y -= V.y;\n    return this;\n  }\n  subXY(x, y) {\n    this.x -= x;\n    this.y -= y;\n    return this;\n  }\n  subScalar(n) {\n    this.x -= n;\n    this.y -= n;\n    return this;\n  }\n  add(V) {\n    this.x += V.x;\n    this.y += V.y;\n    return this;\n  }\n  addXY(x, y) {\n    this.x += x;\n    this.y += y;\n    return this;\n  }\n  addScalar(n) {\n    this.x += n;\n    this.y += n;\n    return this;\n  }\n  clamp(min, max) {\n    this.x = Math.max(this.x, min);\n    this.y = Math.max(this.y, min);\n    if (max !== void 0) {\n      this.x = Math.min(this.x, max);\n      this.y = Math.min(this.y, max);\n    }\n    return this;\n  }\n  div(t) {\n    this.x /= t;\n    this.y /= t;\n    return this;\n  }\n  divV(V) {\n    this.x /= V.x;\n    this.y /= V.y;\n    return this;\n  }\n  mul(t) {\n    this.x *= t;\n    this.y *= t;\n    return this;\n  }\n  mulV(V) {\n    this.x *= V.x;\n    this.y *= V.y;\n    return this;\n  }\n  abs() {\n    this.x = Math.abs(this.x);\n    this.y = Math.abs(this.y);\n    return this;\n  }\n  nudge(B, distance) {\n    const tan = Vec.Tan(B, this);\n    return this.add(tan.mul(distance));\n  }\n  neg() {\n    this.x *= -1;\n    this.y *= -1;\n    return this;\n  }\n  cross(V) {\n    this.x = this.y * V.z - this.z * V.y;\n    this.y = this.z * V.x - this.x * V.z;\n    return this;\n  }\n  dpr(V) {\n    return Vec.Dpr(this, V);\n  }\n  cpr(V) {\n    return Vec.Cpr(this, V);\n  }\n  len2() {\n    return Vec.Len2(this);\n  }\n  len() {\n    return Vec.Len(this);\n  }\n  pry(V) {\n    return Vec.Pry(this, V);\n  }\n  per() {\n    const { x, y } = this;\n    this.x = y;\n    this.y = -x;\n    return this;\n  }\n  uni() {\n    return Vec.Uni(this);\n  }\n  tan(V) {\n    return Vec.Tan(this, V);\n  }\n  dist(V) {\n    return Vec.Dist(this, V);\n  }\n  distanceToLineSegment(A, B) {\n    return Vec.DistanceToLineSegment(A, B, this);\n  }\n  slope(B) {\n    return Vec.Slope(this, B);\n  }\n  snapToGrid(gridSize) {\n    this.x = Math.round(this.x / gridSize) * gridSize;\n    this.y = Math.round(this.y / gridSize) * gridSize;\n    return this;\n  }\n  angle(B) {\n    return Vec.Angle(this, B);\n  }\n  toAngle() {\n    return Vec.ToAngle(this);\n  }\n  lrp(B, t) {\n    this.x = this.x + (B.x - this.x) * t;\n    this.y = this.y + (B.y - this.y) * t;\n    return this;\n  }\n  equals(B) {\n    return Vec.Equals(this, B);\n  }\n  equalsXY(x, y) {\n    return Vec.EqualsXY(this, x, y);\n  }\n  norm() {\n    const l = this.len();\n    this.x = l === 0 ? 0 : this.x / l;\n    this.y = l === 0 ? 0 : this.y / l;\n    return this;\n  }\n  toFixed() {\n    return Vec.ToFixed(this);\n  }\n  toString() {\n    return Vec.ToString(Vec.ToFixed(this));\n  }\n  toJson() {\n    return Vec.ToJson(this);\n  }\n  toArray() {\n    return Vec.ToArray(this);\n  }\n  static Add(A, B) {\n    return new Vec(A.x + B.x, A.y + B.y);\n  }\n  static AddXY(A, x, y) {\n    return new Vec(A.x + x, A.y + y);\n  }\n  static Sub(A, B) {\n    return new Vec(A.x - B.x, A.y - B.y);\n  }\n  static SubXY(A, x, y) {\n    return new Vec(A.x - x, A.y - y);\n  }\n  static AddScalar(A, n) {\n    return new Vec(A.x + n, A.y + n);\n  }\n  static SubScalar(A, n) {\n    return new Vec(A.x - n, A.y - n);\n  }\n  static Div(A, t) {\n    return new Vec(A.x / t, A.y / t);\n  }\n  static Mul(A, t) {\n    return new Vec(A.x * t, A.y * t);\n  }\n  static DivV(A, B) {\n    return new Vec(A.x / B.x, A.y / B.y);\n  }\n  static MulV(A, B) {\n    return new Vec(A.x * B.x, A.y * B.y);\n  }\n  static Neg(A) {\n    return new Vec(-A.x, -A.y);\n  }\n  /**\n   * Get the perpendicular vector to A.\n   */\n  static Per(A) {\n    return new Vec(A.y, -A.x);\n  }\n  static Abs(A) {\n    return new Vec(Math.abs(A.x), Math.abs(A.y));\n  }\n  // Get the distance between two points.\n  static Dist(A, B) {\n    return ((A.y - B.y) ** 2 + (A.x - B.x) ** 2) ** 0.5;\n  }\n  // Get whether a distance between two points is less than a number. This is faster to calulate than using `Vec.Dist(a, b) < n`.\n  static DistMin(A, B, n) {\n    return (A.x - B.x) * (A.x - B.x) + (A.y - B.y) * (A.y - B.y) < n ** 2;\n  }\n  // Get the squared distance between two points. This is faster to calculate (no square root) so useful for \"minimum distance\" checks where the actual measurement does not matter.\n  static Dist2(A, B) {\n    return (A.x - B.x) * (A.x - B.x) + (A.y - B.y) * (A.y - B.y);\n  }\n  /**\n   * Dot product of two vectors which is used to calculate the angle between them.\n   */\n  static Dpr(A, B) {\n    return A.x * B.x + A.y * B.y;\n  }\n  static Cross(A, V) {\n    return new Vec(\n      A.y * V.z - A.z * V.y,\n      A.z * V.x - A.x * V.z\n      // A.z = A.x * V.y - A.y * V.x\n    );\n  }\n  /**\n   * Cross product of two vectors which is used to calculate the area of a parallelogram.\n   */\n  static Cpr(A, B) {\n    return A.x * B.y - B.x * A.y;\n  }\n  static Len2(A) {\n    return A.x * A.x + A.y * A.y;\n  }\n  static Len(A) {\n    return (A.x * A.x + A.y * A.y) ** 0.5;\n  }\n  /**\n   * Get the projection of A onto B.\n   */\n  static Pry(A, B) {\n    return Vec.Dpr(A, B) / Vec.Len(B);\n  }\n  /**\n   * Get the unit vector of A.\n   */\n  static Uni(A) {\n    return Vec.Div(A, Vec.Len(A));\n  }\n  static Tan(A, B) {\n    return Vec.Uni(Vec.Sub(A, B));\n  }\n  static Min(A, B) {\n    return new Vec(Math.min(A.x, B.x), Math.min(A.y, B.y));\n  }\n  static Max(A, B) {\n    return new Vec(Math.max(A.x, B.x), Math.max(A.y, B.y));\n  }\n  static From({ x, y, z = 1 }) {\n    return new Vec(x, y, z);\n  }\n  static FromArray(v) {\n    return new Vec(v[0], v[1]);\n  }\n  static Rot(A, r = 0) {\n    const s = Math.sin(r);\n    const c = Math.cos(r);\n    return new Vec(A.x * c - A.y * s, A.x * s + A.y * c);\n  }\n  static RotWith(A, C, r) {\n    const x = A.x - C.x;\n    const y = A.y - C.y;\n    const s = Math.sin(r);\n    const c = Math.cos(r);\n    return new Vec(C.x + (x * c - y * s), C.y + (x * s + y * c));\n  }\n  /**\n   * Get the nearest point on a line with a known unit vector that passes through point A\n   *\n   * ```ts\n   * Vec.nearestPointOnLineThroughPoint(A, u, Point)\n   * ```\n   *\n   * @param A - Any point on the line\n   * @param u - The unit vector for the line.\n   * @param P - A point not on the line to test.\n   */\n  static NearestPointOnLineThroughPoint(A, u, P) {\n    return Vec.Mul(u, Vec.Sub(P, A).pry(u)).add(A);\n  }\n  static NearestPointOnLineSegment(A, B, P, clamp = true) {\n    if (Vec.Equals(A, P))\n      return Vec.From(P);\n    if (Vec.Equals(B, P))\n      return Vec.From(P);\n    const u = Vec.Tan(B, A);\n    const C = Vec.Add(A, Vec.Mul(u, Vec.Sub(P, A).pry(u)));\n    if (clamp) {\n      if (C.x < Math.min(A.x, B.x))\n        return Vec.Cast(A.x < B.x ? A : B);\n      if (C.x > Math.max(A.x, B.x))\n        return Vec.Cast(A.x > B.x ? A : B);\n      if (C.y < Math.min(A.y, B.y))\n        return Vec.Cast(A.y < B.y ? A : B);\n      if (C.y > Math.max(A.y, B.y))\n        return Vec.Cast(A.y > B.y ? A : B);\n    }\n    return C;\n  }\n  static DistanceToLineThroughPoint(A, u, P) {\n    return Vec.Dist(P, Vec.NearestPointOnLineThroughPoint(A, u, P));\n  }\n  static DistanceToLineSegment(A, B, P, clamp = true) {\n    return Vec.Dist(P, Vec.NearestPointOnLineSegment(A, B, P, clamp));\n  }\n  static Snap(A, step = 1) {\n    return new Vec(Math.round(A.x / step) * step, Math.round(A.y / step) * step);\n  }\n  static Cast(A) {\n    if (A instanceof Vec)\n      return A;\n    return Vec.From(A);\n  }\n  static Slope(A, B) {\n    if (A.x === B.y)\n      return NaN;\n    return (A.y - B.y) / (A.x - B.x);\n  }\n  static IsNaN(A) {\n    return isNaN(A.x) || isNaN(A.y);\n  }\n  static Angle(A, B) {\n    return Math.atan2(B.y - A.y, B.x - A.x);\n  }\n  /**\n   * Linearly interpolate between two points.\n   * @param A - The first point.\n   * @param B - The second point.\n   * @param t - The interpolation value between 0 and 1.\n   * @returns The interpolated point.\n   */\n  static Lrp(A, B, t) {\n    return Vec.Sub(B, A).mul(t).add(A);\n  }\n  static Med(A, B) {\n    return new Vec((A.x + B.x) / 2, (A.y + B.y) / 2);\n  }\n  static Equals(A, B) {\n    return Math.abs(A.x - B.x) < 1e-4 && Math.abs(A.y - B.y) < 1e-4;\n  }\n  static EqualsXY(A, x, y) {\n    return A.x === x && A.y === y;\n  }\n  static Clockwise(A, B, C) {\n    return (C.x - A.x) * (B.y - A.y) - (B.x - A.x) * (C.y - A.y) < 0;\n  }\n  static Rescale(A, n) {\n    const l = Vec.Len(A);\n    return new Vec(n * A.x / l, n * A.y / l);\n  }\n  static ScaleWithOrigin(A, scale, origin) {\n    return Vec.Sub(A, origin).mul(scale).add(origin);\n  }\n  static ToFixed(A) {\n    return new Vec((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toFixed)(A.x), (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.toFixed)(A.y));\n  }\n  static ToInt(A) {\n    return new Vec(\n      parseInt(A.x.toFixed(0)),\n      parseInt(A.y.toFixed(0)),\n      parseInt((A.z ?? 0).toFixed(0))\n    );\n  }\n  static ToCss(A) {\n    return `${A.x},${A.y}`;\n  }\n  static Nudge(A, B, distance) {\n    return Vec.Add(A, Vec.Tan(B, A).mul(distance));\n  }\n  static ToString(A) {\n    return `${A.x}, ${A.y}`;\n  }\n  static ToAngle(A) {\n    let r = Math.atan2(A.y, A.x);\n    if (r < 0)\n      r += Math.PI * 2;\n    return r;\n  }\n  static FromAngle(r, length = 1) {\n    return new Vec(Math.cos(r) * length, Math.sin(r) * length);\n  }\n  static ToArray(A) {\n    return [A.x, A.y, A.z];\n  }\n  static ToJson(A) {\n    const { x, y, z } = A;\n    return { x, y, z };\n  }\n  static Average(arr) {\n    const len = arr.length;\n    const avg = new Vec(0, 0);\n    if (len === 0) {\n      return avg;\n    }\n    for (let i = 0; i < len; i++) {\n      avg.add(arr[i]);\n    }\n    return avg.div(len);\n  }\n  static Clamp(A, min, max) {\n    if (max === void 0) {\n      return new Vec(Math.min(Math.max(A.x, min)), Math.min(Math.max(A.y, min)));\n    }\n    return new Vec(Math.min(Math.max(A.x, min), max), Math.min(Math.max(A.y, min), max));\n  }\n  /**\n   * Get an array of points (with simulated pressure) between two points.\n   *\n   * @param A - The first point.\n   * @param B - The second point.\n   * @param steps - The number of points to return.\n   */\n  static PointsBetween(A, B, steps = 6) {\n    const results = [];\n    for (let i = 0; i < steps; i++) {\n      const t = _easings_mjs__WEBPACK_IMPORTED_MODULE_0__.EASINGS.easeInQuad(i / (steps - 1));\n      const point = Vec.Lrp(A, B, t);\n      point.z = Math.min(1, 0.5 + Math.abs(0.5 - ease(t)) * 0.65);\n      results.push(point);\n    }\n    return results;\n  }\n  static SnapToGrid(A, gridSize = 8) {\n    return new Vec(Math.round(A.x / gridSize) * gridSize, Math.round(A.y / gridSize) * gridSize);\n  }\n}\nconst ease = (t) => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n\n//# sourceMappingURL=Vec.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvVmVjLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0M7QUFDRjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUJBQXFCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsbURBQU8sT0FBTyxtREFBTztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLElBQUksR0FBRyxJQUFJO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLElBQUksSUFBSSxJQUFJO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFVBQVU7QUFDdEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsV0FBVztBQUMvQixnQkFBZ0IsaURBQU87QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvVmVjLm1qcz84OTJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVBU0lOR1MgfSBmcm9tIFwiLi9lYXNpbmdzLm1qc1wiO1xuaW1wb3J0IHsgdG9GaXhlZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuY2xhc3MgVmVjIHtcbiAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwLCB6ID0gMSkge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgcHJlc3N1cmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuejtcbiAgfVxuICBzZXQoeCA9IHRoaXMueCwgeSA9IHRoaXMueSwgeiA9IHRoaXMueikge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNldFRvKHsgeCA9IDAsIHkgPSAwLCB6ID0gMSB9KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMueiA9IHo7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcm90KHIpIHtcbiAgICBpZiAociA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcztcbiAgICBjb25zdCBzID0gTWF0aC5zaW4ocik7XG4gICAgY29uc3QgYyA9IE1hdGguY29zKHIpO1xuICAgIHRoaXMueCA9IHggKiBjIC0geSAqIHM7XG4gICAgdGhpcy55ID0geCAqIHMgKyB5ICogYztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByb3RXaXRoKEMsIHIpIHtcbiAgICBpZiAociA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHggPSB0aGlzLnggLSBDLng7XG4gICAgY29uc3QgeSA9IHRoaXMueSAtIEMueTtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4ocik7XG4gICAgY29uc3QgYyA9IE1hdGguY29zKHIpO1xuICAgIHRoaXMueCA9IEMueCArICh4ICogYyAtIHkgKiBzKTtcbiAgICB0aGlzLnkgPSBDLnkgKyAoeCAqIHMgKyB5ICogYyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY2xvbmUoKSB7XG4gICAgY29uc3QgeyB4LCB5LCB6IH0gPSB0aGlzO1xuICAgIHJldHVybiBuZXcgVmVjKHgsIHksIHopO1xuICB9XG4gIHN1YihWKSB7XG4gICAgdGhpcy54IC09IFYueDtcbiAgICB0aGlzLnkgLT0gVi55O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHN1YlhZKHgsIHkpIHtcbiAgICB0aGlzLnggLT0geDtcbiAgICB0aGlzLnkgLT0geTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzdWJTY2FsYXIobikge1xuICAgIHRoaXMueCAtPSBuO1xuICAgIHRoaXMueSAtPSBuO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGFkZChWKSB7XG4gICAgdGhpcy54ICs9IFYueDtcbiAgICB0aGlzLnkgKz0gVi55O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGFkZFhZKHgsIHkpIHtcbiAgICB0aGlzLnggKz0geDtcbiAgICB0aGlzLnkgKz0geTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhZGRTY2FsYXIobikge1xuICAgIHRoaXMueCArPSBuO1xuICAgIHRoaXMueSArPSBuO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGNsYW1wKG1pbiwgbWF4KSB7XG4gICAgdGhpcy54ID0gTWF0aC5tYXgodGhpcy54LCBtaW4pO1xuICAgIHRoaXMueSA9IE1hdGgubWF4KHRoaXMueSwgbWluKTtcbiAgICBpZiAobWF4ICE9PSB2b2lkIDApIHtcbiAgICAgIHRoaXMueCA9IE1hdGgubWluKHRoaXMueCwgbWF4KTtcbiAgICAgIHRoaXMueSA9IE1hdGgubWluKHRoaXMueSwgbWF4KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZGl2KHQpIHtcbiAgICB0aGlzLnggLz0gdDtcbiAgICB0aGlzLnkgLz0gdDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBkaXZWKFYpIHtcbiAgICB0aGlzLnggLz0gVi54O1xuICAgIHRoaXMueSAvPSBWLnk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgbXVsKHQpIHtcbiAgICB0aGlzLnggKj0gdDtcbiAgICB0aGlzLnkgKj0gdDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBtdWxWKFYpIHtcbiAgICB0aGlzLnggKj0gVi54O1xuICAgIHRoaXMueSAqPSBWLnk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgYWJzKCkge1xuICAgIHRoaXMueCA9IE1hdGguYWJzKHRoaXMueCk7XG4gICAgdGhpcy55ID0gTWF0aC5hYnModGhpcy55KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBudWRnZShCLCBkaXN0YW5jZSkge1xuICAgIGNvbnN0IHRhbiA9IFZlYy5UYW4oQiwgdGhpcyk7XG4gICAgcmV0dXJuIHRoaXMuYWRkKHRhbi5tdWwoZGlzdGFuY2UpKTtcbiAgfVxuICBuZWcoKSB7XG4gICAgdGhpcy54ICo9IC0xO1xuICAgIHRoaXMueSAqPSAtMTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBjcm9zcyhWKSB7XG4gICAgdGhpcy54ID0gdGhpcy55ICogVi56IC0gdGhpcy56ICogVi55O1xuICAgIHRoaXMueSA9IHRoaXMueiAqIFYueCAtIHRoaXMueCAqIFYuejtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBkcHIoVikge1xuICAgIHJldHVybiBWZWMuRHByKHRoaXMsIFYpO1xuICB9XG4gIGNwcihWKSB7XG4gICAgcmV0dXJuIFZlYy5DcHIodGhpcywgVik7XG4gIH1cbiAgbGVuMigpIHtcbiAgICByZXR1cm4gVmVjLkxlbjIodGhpcyk7XG4gIH1cbiAgbGVuKCkge1xuICAgIHJldHVybiBWZWMuTGVuKHRoaXMpO1xuICB9XG4gIHByeShWKSB7XG4gICAgcmV0dXJuIFZlYy5QcnkodGhpcywgVik7XG4gIH1cbiAgcGVyKCkge1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcztcbiAgICB0aGlzLnggPSB5O1xuICAgIHRoaXMueSA9IC14O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHVuaSgpIHtcbiAgICByZXR1cm4gVmVjLlVuaSh0aGlzKTtcbiAgfVxuICB0YW4oVikge1xuICAgIHJldHVybiBWZWMuVGFuKHRoaXMsIFYpO1xuICB9XG4gIGRpc3QoVikge1xuICAgIHJldHVybiBWZWMuRGlzdCh0aGlzLCBWKTtcbiAgfVxuICBkaXN0YW5jZVRvTGluZVNlZ21lbnQoQSwgQikge1xuICAgIHJldHVybiBWZWMuRGlzdGFuY2VUb0xpbmVTZWdtZW50KEEsIEIsIHRoaXMpO1xuICB9XG4gIHNsb3BlKEIpIHtcbiAgICByZXR1cm4gVmVjLlNsb3BlKHRoaXMsIEIpO1xuICB9XG4gIHNuYXBUb0dyaWQoZ3JpZFNpemUpIHtcbiAgICB0aGlzLnggPSBNYXRoLnJvdW5kKHRoaXMueCAvIGdyaWRTaXplKSAqIGdyaWRTaXplO1xuICAgIHRoaXMueSA9IE1hdGgucm91bmQodGhpcy55IC8gZ3JpZFNpemUpICogZ3JpZFNpemU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgYW5nbGUoQikge1xuICAgIHJldHVybiBWZWMuQW5nbGUodGhpcywgQik7XG4gIH1cbiAgdG9BbmdsZSgpIHtcbiAgICByZXR1cm4gVmVjLlRvQW5nbGUodGhpcyk7XG4gIH1cbiAgbHJwKEIsIHQpIHtcbiAgICB0aGlzLnggPSB0aGlzLnggKyAoQi54IC0gdGhpcy54KSAqIHQ7XG4gICAgdGhpcy55ID0gdGhpcy55ICsgKEIueSAtIHRoaXMueSkgKiB0O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGVxdWFscyhCKSB7XG4gICAgcmV0dXJuIFZlYy5FcXVhbHModGhpcywgQik7XG4gIH1cbiAgZXF1YWxzWFkoeCwgeSkge1xuICAgIHJldHVybiBWZWMuRXF1YWxzWFkodGhpcywgeCwgeSk7XG4gIH1cbiAgbm9ybSgpIHtcbiAgICBjb25zdCBsID0gdGhpcy5sZW4oKTtcbiAgICB0aGlzLnggPSBsID09PSAwID8gMCA6IHRoaXMueCAvIGw7XG4gICAgdGhpcy55ID0gbCA9PT0gMCA/IDAgOiB0aGlzLnkgLyBsO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHRvRml4ZWQoKSB7XG4gICAgcmV0dXJuIFZlYy5Ub0ZpeGVkKHRoaXMpO1xuICB9XG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBWZWMuVG9TdHJpbmcoVmVjLlRvRml4ZWQodGhpcykpO1xuICB9XG4gIHRvSnNvbigpIHtcbiAgICByZXR1cm4gVmVjLlRvSnNvbih0aGlzKTtcbiAgfVxuICB0b0FycmF5KCkge1xuICAgIHJldHVybiBWZWMuVG9BcnJheSh0aGlzKTtcbiAgfVxuICBzdGF0aWMgQWRkKEEsIEIpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhBLnggKyBCLngsIEEueSArIEIueSk7XG4gIH1cbiAgc3RhdGljIEFkZFhZKEEsIHgsIHkpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhBLnggKyB4LCBBLnkgKyB5KTtcbiAgfVxuICBzdGF0aWMgU3ViKEEsIEIpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhBLnggLSBCLngsIEEueSAtIEIueSk7XG4gIH1cbiAgc3RhdGljIFN1YlhZKEEsIHgsIHkpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhBLnggLSB4LCBBLnkgLSB5KTtcbiAgfVxuICBzdGF0aWMgQWRkU2NhbGFyKEEsIG4pIHtcbiAgICByZXR1cm4gbmV3IFZlYyhBLnggKyBuLCBBLnkgKyBuKTtcbiAgfVxuICBzdGF0aWMgU3ViU2NhbGFyKEEsIG4pIHtcbiAgICByZXR1cm4gbmV3IFZlYyhBLnggLSBuLCBBLnkgLSBuKTtcbiAgfVxuICBzdGF0aWMgRGl2KEEsIHQpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhBLnggLyB0LCBBLnkgLyB0KTtcbiAgfVxuICBzdGF0aWMgTXVsKEEsIHQpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhBLnggKiB0LCBBLnkgKiB0KTtcbiAgfVxuICBzdGF0aWMgRGl2VihBLCBCKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMoQS54IC8gQi54LCBBLnkgLyBCLnkpO1xuICB9XG4gIHN0YXRpYyBNdWxWKEEsIEIpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhBLnggKiBCLngsIEEueSAqIEIueSk7XG4gIH1cbiAgc3RhdGljIE5lZyhBKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMoLUEueCwgLUEueSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgcGVycGVuZGljdWxhciB2ZWN0b3IgdG8gQS5cbiAgICovXG4gIHN0YXRpYyBQZXIoQSkge1xuICAgIHJldHVybiBuZXcgVmVjKEEueSwgLUEueCk7XG4gIH1cbiAgc3RhdGljIEFicyhBKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMoTWF0aC5hYnMoQS54KSwgTWF0aC5hYnMoQS55KSk7XG4gIH1cbiAgLy8gR2V0IHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMuXG4gIHN0YXRpYyBEaXN0KEEsIEIpIHtcbiAgICByZXR1cm4gKChBLnkgLSBCLnkpICoqIDIgKyAoQS54IC0gQi54KSAqKiAyKSAqKiAwLjU7XG4gIH1cbiAgLy8gR2V0IHdoZXRoZXIgYSBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMgaXMgbGVzcyB0aGFuIGEgbnVtYmVyLiBUaGlzIGlzIGZhc3RlciB0byBjYWx1bGF0ZSB0aGFuIHVzaW5nIGBWZWMuRGlzdChhLCBiKSA8IG5gLlxuICBzdGF0aWMgRGlzdE1pbihBLCBCLCBuKSB7XG4gICAgcmV0dXJuIChBLnggLSBCLngpICogKEEueCAtIEIueCkgKyAoQS55IC0gQi55KSAqIChBLnkgLSBCLnkpIDwgbiAqKiAyO1xuICB9XG4gIC8vIEdldCB0aGUgc3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMuIFRoaXMgaXMgZmFzdGVyIHRvIGNhbGN1bGF0ZSAobm8gc3F1YXJlIHJvb3QpIHNvIHVzZWZ1bCBmb3IgXCJtaW5pbXVtIGRpc3RhbmNlXCIgY2hlY2tzIHdoZXJlIHRoZSBhY3R1YWwgbWVhc3VyZW1lbnQgZG9lcyBub3QgbWF0dGVyLlxuICBzdGF0aWMgRGlzdDIoQSwgQikge1xuICAgIHJldHVybiAoQS54IC0gQi54KSAqIChBLnggLSBCLngpICsgKEEueSAtIEIueSkgKiAoQS55IC0gQi55KTtcbiAgfVxuICAvKipcbiAgICogRG90IHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnMgd2hpY2ggaXMgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGFuZ2xlIGJldHdlZW4gdGhlbS5cbiAgICovXG4gIHN0YXRpYyBEcHIoQSwgQikge1xuICAgIHJldHVybiBBLnggKiBCLnggKyBBLnkgKiBCLnk7XG4gIH1cbiAgc3RhdGljIENyb3NzKEEsIFYpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhcbiAgICAgIEEueSAqIFYueiAtIEEueiAqIFYueSxcbiAgICAgIEEueiAqIFYueCAtIEEueCAqIFYuelxuICAgICAgLy8gQS56ID0gQS54ICogVi55IC0gQS55ICogVi54XG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQ3Jvc3MgcHJvZHVjdCBvZiB0d28gdmVjdG9ycyB3aGljaCBpcyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgYXJlYSBvZiBhIHBhcmFsbGVsb2dyYW0uXG4gICAqL1xuICBzdGF0aWMgQ3ByKEEsIEIpIHtcbiAgICByZXR1cm4gQS54ICogQi55IC0gQi54ICogQS55O1xuICB9XG4gIHN0YXRpYyBMZW4yKEEpIHtcbiAgICByZXR1cm4gQS54ICogQS54ICsgQS55ICogQS55O1xuICB9XG4gIHN0YXRpYyBMZW4oQSkge1xuICAgIHJldHVybiAoQS54ICogQS54ICsgQS55ICogQS55KSAqKiAwLjU7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgcHJvamVjdGlvbiBvZiBBIG9udG8gQi5cbiAgICovXG4gIHN0YXRpYyBQcnkoQSwgQikge1xuICAgIHJldHVybiBWZWMuRHByKEEsIEIpIC8gVmVjLkxlbihCKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSB1bml0IHZlY3RvciBvZiBBLlxuICAgKi9cbiAgc3RhdGljIFVuaShBKSB7XG4gICAgcmV0dXJuIFZlYy5EaXYoQSwgVmVjLkxlbihBKSk7XG4gIH1cbiAgc3RhdGljIFRhbihBLCBCKSB7XG4gICAgcmV0dXJuIFZlYy5VbmkoVmVjLlN1YihBLCBCKSk7XG4gIH1cbiAgc3RhdGljIE1pbihBLCBCKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMoTWF0aC5taW4oQS54LCBCLngpLCBNYXRoLm1pbihBLnksIEIueSkpO1xuICB9XG4gIHN0YXRpYyBNYXgoQSwgQikge1xuICAgIHJldHVybiBuZXcgVmVjKE1hdGgubWF4KEEueCwgQi54KSwgTWF0aC5tYXgoQS55LCBCLnkpKTtcbiAgfVxuICBzdGF0aWMgRnJvbSh7IHgsIHksIHogPSAxIH0pIHtcbiAgICByZXR1cm4gbmV3IFZlYyh4LCB5LCB6KTtcbiAgfVxuICBzdGF0aWMgRnJvbUFycmF5KHYpIHtcbiAgICByZXR1cm4gbmV3IFZlYyh2WzBdLCB2WzFdKTtcbiAgfVxuICBzdGF0aWMgUm90KEEsIHIgPSAwKSB7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKHIpO1xuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhyKTtcbiAgICByZXR1cm4gbmV3IFZlYyhBLnggKiBjIC0gQS55ICogcywgQS54ICogcyArIEEueSAqIGMpO1xuICB9XG4gIHN0YXRpYyBSb3RXaXRoKEEsIEMsIHIpIHtcbiAgICBjb25zdCB4ID0gQS54IC0gQy54O1xuICAgIGNvbnN0IHkgPSBBLnkgLSBDLnk7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKHIpO1xuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhyKTtcbiAgICByZXR1cm4gbmV3IFZlYyhDLnggKyAoeCAqIGMgLSB5ICogcyksIEMueSArICh4ICogcyArIHkgKiBjKSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgbmVhcmVzdCBwb2ludCBvbiBhIGxpbmUgd2l0aCBhIGtub3duIHVuaXQgdmVjdG9yIHRoYXQgcGFzc2VzIHRocm91Z2ggcG9pbnQgQVxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBWZWMubmVhcmVzdFBvaW50T25MaW5lVGhyb3VnaFBvaW50KEEsIHUsIFBvaW50KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIEEgLSBBbnkgcG9pbnQgb24gdGhlIGxpbmVcbiAgICogQHBhcmFtIHUgLSBUaGUgdW5pdCB2ZWN0b3IgZm9yIHRoZSBsaW5lLlxuICAgKiBAcGFyYW0gUCAtIEEgcG9pbnQgbm90IG9uIHRoZSBsaW5lIHRvIHRlc3QuXG4gICAqL1xuICBzdGF0aWMgTmVhcmVzdFBvaW50T25MaW5lVGhyb3VnaFBvaW50KEEsIHUsIFApIHtcbiAgICByZXR1cm4gVmVjLk11bCh1LCBWZWMuU3ViKFAsIEEpLnByeSh1KSkuYWRkKEEpO1xuICB9XG4gIHN0YXRpYyBOZWFyZXN0UG9pbnRPbkxpbmVTZWdtZW50KEEsIEIsIFAsIGNsYW1wID0gdHJ1ZSkge1xuICAgIGlmIChWZWMuRXF1YWxzKEEsIFApKVxuICAgICAgcmV0dXJuIFZlYy5Gcm9tKFApO1xuICAgIGlmIChWZWMuRXF1YWxzKEIsIFApKVxuICAgICAgcmV0dXJuIFZlYy5Gcm9tKFApO1xuICAgIGNvbnN0IHUgPSBWZWMuVGFuKEIsIEEpO1xuICAgIGNvbnN0IEMgPSBWZWMuQWRkKEEsIFZlYy5NdWwodSwgVmVjLlN1YihQLCBBKS5wcnkodSkpKTtcbiAgICBpZiAoY2xhbXApIHtcbiAgICAgIGlmIChDLnggPCBNYXRoLm1pbihBLngsIEIueCkpXG4gICAgICAgIHJldHVybiBWZWMuQ2FzdChBLnggPCBCLnggPyBBIDogQik7XG4gICAgICBpZiAoQy54ID4gTWF0aC5tYXgoQS54LCBCLngpKVxuICAgICAgICByZXR1cm4gVmVjLkNhc3QoQS54ID4gQi54ID8gQSA6IEIpO1xuICAgICAgaWYgKEMueSA8IE1hdGgubWluKEEueSwgQi55KSlcbiAgICAgICAgcmV0dXJuIFZlYy5DYXN0KEEueSA8IEIueSA/IEEgOiBCKTtcbiAgICAgIGlmIChDLnkgPiBNYXRoLm1heChBLnksIEIueSkpXG4gICAgICAgIHJldHVybiBWZWMuQ2FzdChBLnkgPiBCLnkgPyBBIDogQik7XG4gICAgfVxuICAgIHJldHVybiBDO1xuICB9XG4gIHN0YXRpYyBEaXN0YW5jZVRvTGluZVRocm91Z2hQb2ludChBLCB1LCBQKSB7XG4gICAgcmV0dXJuIFZlYy5EaXN0KFAsIFZlYy5OZWFyZXN0UG9pbnRPbkxpbmVUaHJvdWdoUG9pbnQoQSwgdSwgUCkpO1xuICB9XG4gIHN0YXRpYyBEaXN0YW5jZVRvTGluZVNlZ21lbnQoQSwgQiwgUCwgY2xhbXAgPSB0cnVlKSB7XG4gICAgcmV0dXJuIFZlYy5EaXN0KFAsIFZlYy5OZWFyZXN0UG9pbnRPbkxpbmVTZWdtZW50KEEsIEIsIFAsIGNsYW1wKSk7XG4gIH1cbiAgc3RhdGljIFNuYXAoQSwgc3RlcCA9IDEpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhNYXRoLnJvdW5kKEEueCAvIHN0ZXApICogc3RlcCwgTWF0aC5yb3VuZChBLnkgLyBzdGVwKSAqIHN0ZXApO1xuICB9XG4gIHN0YXRpYyBDYXN0KEEpIHtcbiAgICBpZiAoQSBpbnN0YW5jZW9mIFZlYylcbiAgICAgIHJldHVybiBBO1xuICAgIHJldHVybiBWZWMuRnJvbShBKTtcbiAgfVxuICBzdGF0aWMgU2xvcGUoQSwgQikge1xuICAgIGlmIChBLnggPT09IEIueSlcbiAgICAgIHJldHVybiBOYU47XG4gICAgcmV0dXJuIChBLnkgLSBCLnkpIC8gKEEueCAtIEIueCk7XG4gIH1cbiAgc3RhdGljIElzTmFOKEEpIHtcbiAgICByZXR1cm4gaXNOYU4oQS54KSB8fCBpc05hTihBLnkpO1xuICB9XG4gIHN0YXRpYyBBbmdsZShBLCBCKSB7XG4gICAgcmV0dXJuIE1hdGguYXRhbjIoQi55IC0gQS55LCBCLnggLSBBLngpO1xuICB9XG4gIC8qKlxuICAgKiBMaW5lYXJseSBpbnRlcnBvbGF0ZSBiZXR3ZWVuIHR3byBwb2ludHMuXG4gICAqIEBwYXJhbSBBIC0gVGhlIGZpcnN0IHBvaW50LlxuICAgKiBAcGFyYW0gQiAtIFRoZSBzZWNvbmQgcG9pbnQuXG4gICAqIEBwYXJhbSB0IC0gVGhlIGludGVycG9sYXRpb24gdmFsdWUgYmV0d2VlbiAwIGFuZCAxLlxuICAgKiBAcmV0dXJucyBUaGUgaW50ZXJwb2xhdGVkIHBvaW50LlxuICAgKi9cbiAgc3RhdGljIExycChBLCBCLCB0KSB7XG4gICAgcmV0dXJuIFZlYy5TdWIoQiwgQSkubXVsKHQpLmFkZChBKTtcbiAgfVxuICBzdGF0aWMgTWVkKEEsIEIpIHtcbiAgICByZXR1cm4gbmV3IFZlYygoQS54ICsgQi54KSAvIDIsIChBLnkgKyBCLnkpIC8gMik7XG4gIH1cbiAgc3RhdGljIEVxdWFscyhBLCBCKSB7XG4gICAgcmV0dXJuIE1hdGguYWJzKEEueCAtIEIueCkgPCAxZS00ICYmIE1hdGguYWJzKEEueSAtIEIueSkgPCAxZS00O1xuICB9XG4gIHN0YXRpYyBFcXVhbHNYWShBLCB4LCB5KSB7XG4gICAgcmV0dXJuIEEueCA9PT0geCAmJiBBLnkgPT09IHk7XG4gIH1cbiAgc3RhdGljIENsb2Nrd2lzZShBLCBCLCBDKSB7XG4gICAgcmV0dXJuIChDLnggLSBBLngpICogKEIueSAtIEEueSkgLSAoQi54IC0gQS54KSAqIChDLnkgLSBBLnkpIDwgMDtcbiAgfVxuICBzdGF0aWMgUmVzY2FsZShBLCBuKSB7XG4gICAgY29uc3QgbCA9IFZlYy5MZW4oQSk7XG4gICAgcmV0dXJuIG5ldyBWZWMobiAqIEEueCAvIGwsIG4gKiBBLnkgLyBsKTtcbiAgfVxuICBzdGF0aWMgU2NhbGVXaXRoT3JpZ2luKEEsIHNjYWxlLCBvcmlnaW4pIHtcbiAgICByZXR1cm4gVmVjLlN1YihBLCBvcmlnaW4pLm11bChzY2FsZSkuYWRkKG9yaWdpbik7XG4gIH1cbiAgc3RhdGljIFRvRml4ZWQoQSkge1xuICAgIHJldHVybiBuZXcgVmVjKHRvRml4ZWQoQS54KSwgdG9GaXhlZChBLnkpKTtcbiAgfVxuICBzdGF0aWMgVG9JbnQoQSkge1xuICAgIHJldHVybiBuZXcgVmVjKFxuICAgICAgcGFyc2VJbnQoQS54LnRvRml4ZWQoMCkpLFxuICAgICAgcGFyc2VJbnQoQS55LnRvRml4ZWQoMCkpLFxuICAgICAgcGFyc2VJbnQoKEEueiA/PyAwKS50b0ZpeGVkKDApKVxuICAgICk7XG4gIH1cbiAgc3RhdGljIFRvQ3NzKEEpIHtcbiAgICByZXR1cm4gYCR7QS54fSwke0EueX1gO1xuICB9XG4gIHN0YXRpYyBOdWRnZShBLCBCLCBkaXN0YW5jZSkge1xuICAgIHJldHVybiBWZWMuQWRkKEEsIFZlYy5UYW4oQiwgQSkubXVsKGRpc3RhbmNlKSk7XG4gIH1cbiAgc3RhdGljIFRvU3RyaW5nKEEpIHtcbiAgICByZXR1cm4gYCR7QS54fSwgJHtBLnl9YDtcbiAgfVxuICBzdGF0aWMgVG9BbmdsZShBKSB7XG4gICAgbGV0IHIgPSBNYXRoLmF0YW4yKEEueSwgQS54KTtcbiAgICBpZiAociA8IDApXG4gICAgICByICs9IE1hdGguUEkgKiAyO1xuICAgIHJldHVybiByO1xuICB9XG4gIHN0YXRpYyBGcm9tQW5nbGUociwgbGVuZ3RoID0gMSkge1xuICAgIHJldHVybiBuZXcgVmVjKE1hdGguY29zKHIpICogbGVuZ3RoLCBNYXRoLnNpbihyKSAqIGxlbmd0aCk7XG4gIH1cbiAgc3RhdGljIFRvQXJyYXkoQSkge1xuICAgIHJldHVybiBbQS54LCBBLnksIEEuel07XG4gIH1cbiAgc3RhdGljIFRvSnNvbihBKSB7XG4gICAgY29uc3QgeyB4LCB5LCB6IH0gPSBBO1xuICAgIHJldHVybiB7IHgsIHksIHogfTtcbiAgfVxuICBzdGF0aWMgQXZlcmFnZShhcnIpIHtcbiAgICBjb25zdCBsZW4gPSBhcnIubGVuZ3RoO1xuICAgIGNvbnN0IGF2ZyA9IG5ldyBWZWMoMCwgMCk7XG4gICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgcmV0dXJuIGF2ZztcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgYXZnLmFkZChhcnJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gYXZnLmRpdihsZW4pO1xuICB9XG4gIHN0YXRpYyBDbGFtcChBLCBtaW4sIG1heCkge1xuICAgIGlmIChtYXggPT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIG5ldyBWZWMoTWF0aC5taW4oTWF0aC5tYXgoQS54LCBtaW4pKSwgTWF0aC5taW4oTWF0aC5tYXgoQS55LCBtaW4pKSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgVmVjKE1hdGgubWluKE1hdGgubWF4KEEueCwgbWluKSwgbWF4KSwgTWF0aC5taW4oTWF0aC5tYXgoQS55LCBtaW4pLCBtYXgpKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIGFycmF5IG9mIHBvaW50cyAod2l0aCBzaW11bGF0ZWQgcHJlc3N1cmUpIGJldHdlZW4gdHdvIHBvaW50cy5cbiAgICpcbiAgICogQHBhcmFtIEEgLSBUaGUgZmlyc3QgcG9pbnQuXG4gICAqIEBwYXJhbSBCIC0gVGhlIHNlY29uZCBwb2ludC5cbiAgICogQHBhcmFtIHN0ZXBzIC0gVGhlIG51bWJlciBvZiBwb2ludHMgdG8gcmV0dXJuLlxuICAgKi9cbiAgc3RhdGljIFBvaW50c0JldHdlZW4oQSwgQiwgc3RlcHMgPSA2KSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RlcHM7IGkrKykge1xuICAgICAgY29uc3QgdCA9IEVBU0lOR1MuZWFzZUluUXVhZChpIC8gKHN0ZXBzIC0gMSkpO1xuICAgICAgY29uc3QgcG9pbnQgPSBWZWMuTHJwKEEsIEIsIHQpO1xuICAgICAgcG9pbnQueiA9IE1hdGgubWluKDEsIDAuNSArIE1hdGguYWJzKDAuNSAtIGVhc2UodCkpICogMC42NSk7XG4gICAgICByZXN1bHRzLnB1c2gocG9pbnQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuICBzdGF0aWMgU25hcFRvR3JpZChBLCBncmlkU2l6ZSA9IDgpIHtcbiAgICByZXR1cm4gbmV3IFZlYyhNYXRoLnJvdW5kKEEueCAvIGdyaWRTaXplKSAqIGdyaWRTaXplLCBNYXRoLnJvdW5kKEEueSAvIGdyaWRTaXplKSAqIGdyaWRTaXplKTtcbiAgfVxufVxuY29uc3QgZWFzZSA9ICh0KSA9PiB0IDwgMC41ID8gMiAqIHQgKiB0IDogLTEgKyAoNCAtIDIgKiB0KSAqIHQ7XG5leHBvcnQge1xuICBWZWNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WZWMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EASINGS: () => (/* binding */ EASINGS)\n/* harmony export */ });\nconst EASINGS = {\n  linear: (t) => t,\n  easeInQuad: (t) => t * t,\n  easeOutQuad: (t) => t * (2 - t),\n  easeInOutQuad: (t) => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n  easeInCubic: (t) => t * t * t,\n  easeOutCubic: (t) => --t * t * t + 1,\n  easeInOutCubic: (t) => t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  easeInQuart: (t) => t * t * t * t,\n  easeOutQuart: (t) => 1 - --t * t * t * t,\n  easeInOutQuart: (t) => t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t,\n  easeInQuint: (t) => t * t * t * t * t,\n  easeOutQuint: (t) => 1 + --t * t * t * t * t,\n  easeInOutQuint: (t) => t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t,\n  easeInSine: (t) => 1 - Math.cos(t * Math.PI / 2),\n  easeOutSine: (t) => Math.sin(t * Math.PI / 2),\n  easeInOutSine: (t) => -(Math.cos(Math.PI * t) - 1) / 2,\n  easeInExpo: (t) => t <= 0 ? 0 : Math.pow(2, 10 * t - 10),\n  easeOutExpo: (t) => t >= 1 ? 1 : 1 - Math.pow(2, -10 * t),\n  easeInOutExpo: (t) => t <= 0 ? 0 : t >= 1 ? 1 : t < 0.5 ? Math.pow(2, 20 * t - 10) / 2 : (2 - Math.pow(2, -20 * t + 10)) / 2\n};\n\n//# sourceMappingURL=easings.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZWFzaW5ncy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZWFzaW5ncy5tanM/NmUxMCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBFQVNJTkdTID0ge1xuICBsaW5lYXI6ICh0KSA9PiB0LFxuICBlYXNlSW5RdWFkOiAodCkgPT4gdCAqIHQsXG4gIGVhc2VPdXRRdWFkOiAodCkgPT4gdCAqICgyIC0gdCksXG4gIGVhc2VJbk91dFF1YWQ6ICh0KSA9PiB0IDwgMC41ID8gMiAqIHQgKiB0IDogLTEgKyAoNCAtIDIgKiB0KSAqIHQsXG4gIGVhc2VJbkN1YmljOiAodCkgPT4gdCAqIHQgKiB0LFxuICBlYXNlT3V0Q3ViaWM6ICh0KSA9PiAtLXQgKiB0ICogdCArIDEsXG4gIGVhc2VJbk91dEN1YmljOiAodCkgPT4gdCA8IDAuNSA/IDQgKiB0ICogdCAqIHQgOiAodCAtIDEpICogKDIgKiB0IC0gMikgKiAoMiAqIHQgLSAyKSArIDEsXG4gIGVhc2VJblF1YXJ0OiAodCkgPT4gdCAqIHQgKiB0ICogdCxcbiAgZWFzZU91dFF1YXJ0OiAodCkgPT4gMSAtIC0tdCAqIHQgKiB0ICogdCxcbiAgZWFzZUluT3V0UXVhcnQ6ICh0KSA9PiB0IDwgMC41ID8gOCAqIHQgKiB0ICogdCAqIHQgOiAxIC0gOCAqIC0tdCAqIHQgKiB0ICogdCxcbiAgZWFzZUluUXVpbnQ6ICh0KSA9PiB0ICogdCAqIHQgKiB0ICogdCxcbiAgZWFzZU91dFF1aW50OiAodCkgPT4gMSArIC0tdCAqIHQgKiB0ICogdCAqIHQsXG4gIGVhc2VJbk91dFF1aW50OiAodCkgPT4gdCA8IDAuNSA/IDE2ICogdCAqIHQgKiB0ICogdCAqIHQgOiAxICsgMTYgKiAtLXQgKiB0ICogdCAqIHQgKiB0LFxuICBlYXNlSW5TaW5lOiAodCkgPT4gMSAtIE1hdGguY29zKHQgKiBNYXRoLlBJIC8gMiksXG4gIGVhc2VPdXRTaW5lOiAodCkgPT4gTWF0aC5zaW4odCAqIE1hdGguUEkgLyAyKSxcbiAgZWFzZUluT3V0U2luZTogKHQpID0+IC0oTWF0aC5jb3MoTWF0aC5QSSAqIHQpIC0gMSkgLyAyLFxuICBlYXNlSW5FeHBvOiAodCkgPT4gdCA8PSAwID8gMCA6IE1hdGgucG93KDIsIDEwICogdCAtIDEwKSxcbiAgZWFzZU91dEV4cG86ICh0KSA9PiB0ID49IDEgPyAxIDogMSAtIE1hdGgucG93KDIsIC0xMCAqIHQpLFxuICBlYXNlSW5PdXRFeHBvOiAodCkgPT4gdCA8PSAwID8gMCA6IHQgPj0gMSA/IDEgOiB0IDwgMC41ID8gTWF0aC5wb3coMiwgMjAgKiB0IC0gMTApIC8gMiA6ICgyIC0gTWF0aC5wb3coMiwgLTIwICogdCArIDEwKSkgLyAyXG59O1xuZXhwb3J0IHtcbiAgRUFTSU5HU1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVhc2luZ3MubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/easings.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Arc2d.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Arc2d.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Arc2d: () => (/* binding */ Arc2d)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _intersect_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../intersect.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n/* harmony import */ var _geometry_constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./geometry-constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/geometry-constants.mjs\");\n\n\n\n\n\nclass Arc2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Geometry2d {\n  _center;\n  radius;\n  start;\n  end;\n  largeArcFlag;\n  sweepFlag;\n  measure;\n  angleStart;\n  angleEnd;\n  constructor(config) {\n    super({ ...config, isFilled: false, isClosed: false });\n    const { center, sweepFlag, largeArcFlag, start, end } = config;\n    if (start.equals(end))\n      throw Error(`Arc must have different start and end points.`);\n    this.angleStart = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Angle(center, start);\n    this.angleEnd = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Angle(center, end);\n    this.radius = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist(center, start);\n    this.measure = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.getArcMeasure)(this.angleStart, this.angleEnd, sweepFlag, largeArcFlag);\n    this.start = start;\n    this.end = end;\n    this.sweepFlag = sweepFlag;\n    this.largeArcFlag = largeArcFlag;\n    this._center = center;\n  }\n  nearestPoint(point) {\n    const { _center, measure, radius, angleEnd, angleStart, start: A, end: B } = this;\n    const t = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.getPointInArcT)(measure, angleStart, angleEnd, _center.angle(point));\n    if (t <= 0)\n      return A;\n    if (t >= 1)\n      return B;\n    const P = _center.clone().add(point.clone().sub(_center).uni().mul(radius));\n    let nearest;\n    let dist = Infinity;\n    let d;\n    for (const p of [A, B, P]) {\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist2(point, p);\n      if (d < dist) {\n        nearest = p;\n        dist = d;\n      }\n    }\n    if (!nearest)\n      throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  hitTestLineSegment(A, B) {\n    const { _center, radius, measure, angleStart, angleEnd } = this;\n    const intersection = (0,_intersect_mjs__WEBPACK_IMPORTED_MODULE_1__.intersectLineSegmentCircle)(A, B, _center, radius);\n    if (intersection === null)\n      return false;\n    return intersection.some((p) => {\n      const result = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.getPointInArcT)(measure, angleStart, angleEnd, _center.angle(p));\n      return result >= 0 && result <= 1;\n    });\n  }\n  getVertices() {\n    const { _center, measure, length, radius, angleStart } = this;\n    const vertices = [];\n    for (let i = 0, n = (0,_geometry_constants_mjs__WEBPACK_IMPORTED_MODULE_4__.getVerticesCountForLength)(Math.abs(length)); i < n + 1; i++) {\n      const t = i / n * measure;\n      const angle = angleStart + t;\n      vertices.push((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.getPointOnCircle)(_center, radius, angle));\n    }\n    return vertices;\n  }\n  getSvgPathData(first = true) {\n    const { start, end, radius, largeArcFlag, sweepFlag } = this;\n    return `${first ? `M${start.toFixed()}` : ``} A${radius} ${radius} 0 ${largeArcFlag} ${sweepFlag} ${end.toFixed()}`;\n  }\n  getLength() {\n    return this.measure * this.radius;\n  }\n}\n\n//# sourceMappingURL=Arc2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQXJjMmQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpQztBQUM2QjtBQUNpQjtBQUNqQztBQUN1QjtBQUNyRSxvQkFBb0IsdURBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZDQUE2QztBQUN6RCxZQUFZLDhDQUE4QztBQUMxRDtBQUNBO0FBQ0Esc0JBQXNCLHlDQUFHO0FBQ3pCLG9CQUFvQix5Q0FBRztBQUN2QixrQkFBa0IseUNBQUc7QUFDckIsbUJBQW1CLHlEQUFhO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtRUFBbUU7QUFDL0UsY0FBYywwREFBYztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlDQUFHO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFpRDtBQUM3RCx5QkFBeUIsMEVBQTBCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwwREFBYztBQUNuQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWSwrQ0FBK0M7QUFDM0Q7QUFDQSx3QkFBd0Isa0ZBQXlCLG9CQUFvQixXQUFXO0FBQ2hGO0FBQ0E7QUFDQSxvQkFBb0IsNERBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4Q0FBOEM7QUFDMUQsY0FBYyxZQUFZLGdCQUFnQixRQUFRLEdBQUcsUUFBUSxFQUFFLFFBQVEsSUFBSSxjQUFjLEVBQUUsV0FBVyxFQUFFLGNBQWM7QUFDdEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQXJjMmQubWpzP2VhZmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uL1ZlYy5tanNcIjtcbmltcG9ydCB7IGludGVyc2VjdExpbmVTZWdtZW50Q2lyY2xlIH0gZnJvbSBcIi4uL2ludGVyc2VjdC5tanNcIjtcbmltcG9ydCB7IGdldEFyY01lYXN1cmUsIGdldFBvaW50SW5BcmNULCBnZXRQb2ludE9uQ2lyY2xlIH0gZnJvbSBcIi4uL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgR2VvbWV0cnkyZCB9IGZyb20gXCIuL0dlb21ldHJ5MmQubWpzXCI7XG5pbXBvcnQgeyBnZXRWZXJ0aWNlc0NvdW50Rm9yTGVuZ3RoIH0gZnJvbSBcIi4vZ2VvbWV0cnktY29uc3RhbnRzLm1qc1wiO1xuY2xhc3MgQXJjMmQgZXh0ZW5kcyBHZW9tZXRyeTJkIHtcbiAgX2NlbnRlcjtcbiAgcmFkaXVzO1xuICBzdGFydDtcbiAgZW5kO1xuICBsYXJnZUFyY0ZsYWc7XG4gIHN3ZWVwRmxhZztcbiAgbWVhc3VyZTtcbiAgYW5nbGVTdGFydDtcbiAgYW5nbGVFbmQ7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHN1cGVyKHsgLi4uY29uZmlnLCBpc0ZpbGxlZDogZmFsc2UsIGlzQ2xvc2VkOiBmYWxzZSB9KTtcbiAgICBjb25zdCB7IGNlbnRlciwgc3dlZXBGbGFnLCBsYXJnZUFyY0ZsYWcsIHN0YXJ0LCBlbmQgfSA9IGNvbmZpZztcbiAgICBpZiAoc3RhcnQuZXF1YWxzKGVuZCkpXG4gICAgICB0aHJvdyBFcnJvcihgQXJjIG11c3QgaGF2ZSBkaWZmZXJlbnQgc3RhcnQgYW5kIGVuZCBwb2ludHMuYCk7XG4gICAgdGhpcy5hbmdsZVN0YXJ0ID0gVmVjLkFuZ2xlKGNlbnRlciwgc3RhcnQpO1xuICAgIHRoaXMuYW5nbGVFbmQgPSBWZWMuQW5nbGUoY2VudGVyLCBlbmQpO1xuICAgIHRoaXMucmFkaXVzID0gVmVjLkRpc3QoY2VudGVyLCBzdGFydCk7XG4gICAgdGhpcy5tZWFzdXJlID0gZ2V0QXJjTWVhc3VyZSh0aGlzLmFuZ2xlU3RhcnQsIHRoaXMuYW5nbGVFbmQsIHN3ZWVwRmxhZywgbGFyZ2VBcmNGbGFnKTtcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgdGhpcy5lbmQgPSBlbmQ7XG4gICAgdGhpcy5zd2VlcEZsYWcgPSBzd2VlcEZsYWc7XG4gICAgdGhpcy5sYXJnZUFyY0ZsYWcgPSBsYXJnZUFyY0ZsYWc7XG4gICAgdGhpcy5fY2VudGVyID0gY2VudGVyO1xuICB9XG4gIG5lYXJlc3RQb2ludChwb2ludCkge1xuICAgIGNvbnN0IHsgX2NlbnRlciwgbWVhc3VyZSwgcmFkaXVzLCBhbmdsZUVuZCwgYW5nbGVTdGFydCwgc3RhcnQ6IEEsIGVuZDogQiB9ID0gdGhpcztcbiAgICBjb25zdCB0ID0gZ2V0UG9pbnRJbkFyY1QobWVhc3VyZSwgYW5nbGVTdGFydCwgYW5nbGVFbmQsIF9jZW50ZXIuYW5nbGUocG9pbnQpKTtcbiAgICBpZiAodCA8PSAwKVxuICAgICAgcmV0dXJuIEE7XG4gICAgaWYgKHQgPj0gMSlcbiAgICAgIHJldHVybiBCO1xuICAgIGNvbnN0IFAgPSBfY2VudGVyLmNsb25lKCkuYWRkKHBvaW50LmNsb25lKCkuc3ViKF9jZW50ZXIpLnVuaSgpLm11bChyYWRpdXMpKTtcbiAgICBsZXQgbmVhcmVzdDtcbiAgICBsZXQgZGlzdCA9IEluZmluaXR5O1xuICAgIGxldCBkO1xuICAgIGZvciAoY29uc3QgcCBvZiBbQSwgQiwgUF0pIHtcbiAgICAgIGQgPSBWZWMuRGlzdDIocG9pbnQsIHApO1xuICAgICAgaWYgKGQgPCBkaXN0KSB7XG4gICAgICAgIG5lYXJlc3QgPSBwO1xuICAgICAgICBkaXN0ID0gZDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuZWFyZXN0KVxuICAgICAgdGhyb3cgRXJyb3IoXCJuZWFyZXN0IHBvaW50IG5vdCBmb3VuZFwiKTtcbiAgICByZXR1cm4gbmVhcmVzdDtcbiAgfVxuICBoaXRUZXN0TGluZVNlZ21lbnQoQSwgQikge1xuICAgIGNvbnN0IHsgX2NlbnRlciwgcmFkaXVzLCBtZWFzdXJlLCBhbmdsZVN0YXJ0LCBhbmdsZUVuZCB9ID0gdGhpcztcbiAgICBjb25zdCBpbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3RMaW5lU2VnbWVudENpcmNsZShBLCBCLCBfY2VudGVyLCByYWRpdXMpO1xuICAgIGlmIChpbnRlcnNlY3Rpb24gPT09IG51bGwpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGludGVyc2VjdGlvbi5zb21lKChwKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBnZXRQb2ludEluQXJjVChtZWFzdXJlLCBhbmdsZVN0YXJ0LCBhbmdsZUVuZCwgX2NlbnRlci5hbmdsZShwKSk7XG4gICAgICByZXR1cm4gcmVzdWx0ID49IDAgJiYgcmVzdWx0IDw9IDE7XG4gICAgfSk7XG4gIH1cbiAgZ2V0VmVydGljZXMoKSB7XG4gICAgY29uc3QgeyBfY2VudGVyLCBtZWFzdXJlLCBsZW5ndGgsIHJhZGl1cywgYW5nbGVTdGFydCB9ID0gdGhpcztcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gZ2V0VmVydGljZXNDb3VudEZvckxlbmd0aChNYXRoLmFicyhsZW5ndGgpKTsgaSA8IG4gKyAxOyBpKyspIHtcbiAgICAgIGNvbnN0IHQgPSBpIC8gbiAqIG1lYXN1cmU7XG4gICAgICBjb25zdCBhbmdsZSA9IGFuZ2xlU3RhcnQgKyB0O1xuICAgICAgdmVydGljZXMucHVzaChnZXRQb2ludE9uQ2lyY2xlKF9jZW50ZXIsIHJhZGl1cywgYW5nbGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHZlcnRpY2VzO1xuICB9XG4gIGdldFN2Z1BhdGhEYXRhKGZpcnN0ID0gdHJ1ZSkge1xuICAgIGNvbnN0IHsgc3RhcnQsIGVuZCwgcmFkaXVzLCBsYXJnZUFyY0ZsYWcsIHN3ZWVwRmxhZyB9ID0gdGhpcztcbiAgICByZXR1cm4gYCR7Zmlyc3QgPyBgTSR7c3RhcnQudG9GaXhlZCgpfWAgOiBgYH0gQSR7cmFkaXVzfSAke3JhZGl1c30gMCAke2xhcmdlQXJjRmxhZ30gJHtzd2VlcEZsYWd9ICR7ZW5kLnRvRml4ZWQoKX1gO1xuICB9XG4gIGdldExlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5tZWFzdXJlICogdGhpcy5yYWRpdXM7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEFyYzJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXJjMmQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Arc2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Circle2d.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Circle2d.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Circle2d: () => (/* binding */ Circle2d)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _intersect_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../intersect.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n/* harmony import */ var _geometry_constants_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/geometry-constants.mjs\");\n\n\n\n\n\n\nclass Circle2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Geometry2d {\n  constructor(config) {\n    super({ isClosed: true, ...config });\n    this.config = config;\n    const { x = 0, y = 0, radius } = config;\n    this.x = x;\n    this.y = y;\n    this._center = new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(radius + x, radius + y);\n    this.radius = radius;\n  }\n  _center;\n  radius;\n  x;\n  y;\n  getBounds() {\n    return new _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box(this.x, this.y, this.radius * 2, this.radius * 2);\n  }\n  getVertices() {\n    const { _center, radius } = this;\n    const perimeter = _utils_mjs__WEBPACK_IMPORTED_MODULE_3__.PI2 * radius;\n    const vertices = [];\n    for (let i = 0, n = (0,_geometry_constants_mjs__WEBPACK_IMPORTED_MODULE_5__.getVerticesCountForLength)(perimeter); i < n; i++) {\n      const angle = i / n * _utils_mjs__WEBPACK_IMPORTED_MODULE_3__.PI2;\n      vertices.push((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.getPointOnCircle)(_center, radius, angle));\n    }\n    return vertices;\n  }\n  nearestPoint(point) {\n    const { _center, radius } = this;\n    if (_center.equals(point))\n      return _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.AddXY(_center, radius, 0);\n    return _center.clone().add(point.clone().sub(_center).uni().mul(radius));\n  }\n  hitTestLineSegment(A, B, distance = 0) {\n    const { _center, radius } = this;\n    return (0,_intersect_mjs__WEBPACK_IMPORTED_MODULE_2__.intersectLineSegmentCircle)(A, B, _center, radius + distance) !== null;\n  }\n  getSvgPathData() {\n    const { _center, radius } = this;\n    return `M${_center.x + radius},${_center.y} a${radius},${radius} 0 1,0 ${radius * 2},0a${radius},${radius} 0 1,0 -${radius * 2},0`;\n  }\n}\n\n//# sourceMappingURL=Circle2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQ2lyY2xlMmQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBaUM7QUFDQTtBQUM2QjtBQUNUO0FBQ1A7QUFDdUI7QUFDckUsdUJBQXVCLHVEQUFVO0FBQ2pDO0FBQ0EsWUFBWSwyQkFBMkI7QUFDdkM7QUFDQSxZQUFZLHVCQUF1QjtBQUNuQztBQUNBO0FBQ0EsdUJBQXVCLHlDQUFHO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5Q0FBRztBQUNsQjtBQUNBO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUIsc0JBQXNCLDJDQUFHO0FBQ3pCO0FBQ0Esd0JBQXdCLGtGQUF5QixhQUFhLE9BQU87QUFDckUsNEJBQTRCLDJDQUFHO0FBQy9CLG9CQUFvQiw0REFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtCQUFrQjtBQUM5QjtBQUNBLGFBQWEseUNBQUc7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUIsV0FBVywwRUFBMEI7QUFDckM7QUFDQTtBQUNBLFlBQVksa0JBQWtCO0FBQzlCLGVBQWUsbUJBQW1CLEdBQUcsV0FBVyxHQUFHLE9BQU8sR0FBRyxRQUFRLFFBQVEsV0FBVyxLQUFLLE9BQU8sR0FBRyxRQUFRLFNBQVMsV0FBVztBQUNuSTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9DaXJjbGUyZC5tanM/YTAwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3ggfSBmcm9tIFwiLi4vQm94Lm1qc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uL1ZlYy5tanNcIjtcbmltcG9ydCB7IGludGVyc2VjdExpbmVTZWdtZW50Q2lyY2xlIH0gZnJvbSBcIi4uL2ludGVyc2VjdC5tanNcIjtcbmltcG9ydCB7IFBJMiwgZ2V0UG9pbnRPbkNpcmNsZSB9IGZyb20gXCIuLi91dGlscy5tanNcIjtcbmltcG9ydCB7IEdlb21ldHJ5MmQgfSBmcm9tIFwiLi9HZW9tZXRyeTJkLm1qc1wiO1xuaW1wb3J0IHsgZ2V0VmVydGljZXNDb3VudEZvckxlbmd0aCB9IGZyb20gXCIuL2dlb21ldHJ5LWNvbnN0YW50cy5tanNcIjtcbmNsYXNzIENpcmNsZTJkIGV4dGVuZHMgR2VvbWV0cnkyZCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHN1cGVyKHsgaXNDbG9zZWQ6IHRydWUsIC4uLmNvbmZpZyB9KTtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICBjb25zdCB7IHggPSAwLCB5ID0gMCwgcmFkaXVzIH0gPSBjb25maWc7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMuX2NlbnRlciA9IG5ldyBWZWMocmFkaXVzICsgeCwgcmFkaXVzICsgeSk7XG4gICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG4gIH1cbiAgX2NlbnRlcjtcbiAgcmFkaXVzO1xuICB4O1xuICB5O1xuICBnZXRCb3VuZHMoKSB7XG4gICAgcmV0dXJuIG5ldyBCb3godGhpcy54LCB0aGlzLnksIHRoaXMucmFkaXVzICogMiwgdGhpcy5yYWRpdXMgKiAyKTtcbiAgfVxuICBnZXRWZXJ0aWNlcygpIHtcbiAgICBjb25zdCB7IF9jZW50ZXIsIHJhZGl1cyB9ID0gdGhpcztcbiAgICBjb25zdCBwZXJpbWV0ZXIgPSBQSTIgKiByYWRpdXM7XG4gICAgY29uc3QgdmVydGljZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IGdldFZlcnRpY2VzQ291bnRGb3JMZW5ndGgocGVyaW1ldGVyKTsgaSA8IG47IGkrKykge1xuICAgICAgY29uc3QgYW5nbGUgPSBpIC8gbiAqIFBJMjtcbiAgICAgIHZlcnRpY2VzLnB1c2goZ2V0UG9pbnRPbkNpcmNsZShfY2VudGVyLCByYWRpdXMsIGFuZ2xlKSk7XG4gICAgfVxuICAgIHJldHVybiB2ZXJ0aWNlcztcbiAgfVxuICBuZWFyZXN0UG9pbnQocG9pbnQpIHtcbiAgICBjb25zdCB7IF9jZW50ZXIsIHJhZGl1cyB9ID0gdGhpcztcbiAgICBpZiAoX2NlbnRlci5lcXVhbHMocG9pbnQpKVxuICAgICAgcmV0dXJuIFZlYy5BZGRYWShfY2VudGVyLCByYWRpdXMsIDApO1xuICAgIHJldHVybiBfY2VudGVyLmNsb25lKCkuYWRkKHBvaW50LmNsb25lKCkuc3ViKF9jZW50ZXIpLnVuaSgpLm11bChyYWRpdXMpKTtcbiAgfVxuICBoaXRUZXN0TGluZVNlZ21lbnQoQSwgQiwgZGlzdGFuY2UgPSAwKSB7XG4gICAgY29uc3QgeyBfY2VudGVyLCByYWRpdXMgfSA9IHRoaXM7XG4gICAgcmV0dXJuIGludGVyc2VjdExpbmVTZWdtZW50Q2lyY2xlKEEsIEIsIF9jZW50ZXIsIHJhZGl1cyArIGRpc3RhbmNlKSAhPT0gbnVsbDtcbiAgfVxuICBnZXRTdmdQYXRoRGF0YSgpIHtcbiAgICBjb25zdCB7IF9jZW50ZXIsIHJhZGl1cyB9ID0gdGhpcztcbiAgICByZXR1cm4gYE0ke19jZW50ZXIueCArIHJhZGl1c30sJHtfY2VudGVyLnl9IGEke3JhZGl1c30sJHtyYWRpdXN9IDAgMSwwICR7cmFkaXVzICogMn0sMGEke3JhZGl1c30sJHtyYWRpdXN9IDAgMSwwIC0ke3JhZGl1cyAqIDJ9LDBgO1xuICB9XG59XG5leHBvcnQge1xuICBDaXJjbGUyZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNpcmNsZTJkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Circle2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicBezier2d.mjs":
/*!****************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicBezier2d.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CubicBezier2d: () => (/* binding */ CubicBezier2d)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Polyline2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs\");\n\n\nclass CubicBezier2d extends _Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_1__.Polyline2d {\n  a;\n  b;\n  c;\n  d;\n  constructor(config) {\n    const { start: a, cp1: b, cp2: c, end: d } = config;\n    super({ ...config, points: [a, d] });\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n  }\n  getVertices() {\n    const vertices = [];\n    const { a, b, c, d } = this;\n    for (let i = 0, n = 10; i <= n; i++) {\n      const t = i / n;\n      vertices.push(\n        new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(\n          (1 - t) * (1 - t) * (1 - t) * a.x + 3 * ((1 - t) * (1 - t)) * t * b.x + 3 * (1 - t) * (t * t) * c.x + t * t * t * d.x,\n          (1 - t) * (1 - t) * (1 - t) * a.y + 3 * ((1 - t) * (1 - t)) * t * b.y + 3 * (1 - t) * (t * t) * c.y + t * t * t * d.y\n        )\n      );\n    }\n    return vertices;\n  }\n  midPoint() {\n    return CubicBezier2d.GetAtT(this, 0.5);\n  }\n  nearestPoint(A) {\n    let nearest;\n    let dist = Infinity;\n    let d;\n    let p;\n    for (const edge of this.segments) {\n      p = edge.nearestPoint(A);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist2(p, A);\n      if (d < dist) {\n        nearest = p;\n        dist = d;\n      }\n    }\n    if (!nearest)\n      throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  getSvgPathData(first = true) {\n    const { a, b, c, d } = this;\n    return `${first ? `M ${a.toFixed()} ` : ``} C${b.toFixed()} ${c.toFixed()} ${d.toFixed()}`;\n  }\n  static GetAtT(segment, t) {\n    const { a, b, c, d } = segment;\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(\n      (1 - t) * (1 - t) * (1 - t) * a.x + 3 * ((1 - t) * (1 - t)) * t * b.x + 3 * (1 - t) * (t * t) * c.x + t * t * t * d.x,\n      (1 - t) * (1 - t) * (1 - t) * a.y + 3 * ((1 - t) * (1 - t)) * t * b.y + 3 * (1 - t) * (t * t) * c.y + t * t * t * d.y\n    );\n  }\n  getLength(precision = 32) {\n    let n1, p1 = this.a, length = 0;\n    for (let i = 1; i <= precision; i++) {\n      n1 = CubicBezier2d.GetAtT(this, i / precision);\n      length += _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist(p1, n1);\n      p1 = n1;\n    }\n    return length;\n  }\n}\n\n//# sourceMappingURL=CubicBezier2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQ3ViaWNCZXppZXIyZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBQ2E7QUFDOUMsNEJBQTRCLHVEQUFVO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1DQUFtQztBQUMvQyxZQUFZLDJCQUEyQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6Qiw0QkFBNEIsUUFBUTtBQUNwQztBQUNBO0FBQ0EsWUFBWSx5Q0FBRztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlDQUFHO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGFBQWE7QUFDekIsY0FBYyxhQUFhLGFBQWEsUUFBUSxHQUFHLGFBQWEsRUFBRSxhQUFhLEVBQUUsWUFBWTtBQUM3RjtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBLGdCQUFnQix5Q0FBRztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9DdWJpY0JlemllcjJkLm1qcz9jYjEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBQb2x5bGluZTJkIH0gZnJvbSBcIi4vUG9seWxpbmUyZC5tanNcIjtcbmNsYXNzIEN1YmljQmV6aWVyMmQgZXh0ZW5kcyBQb2x5bGluZTJkIHtcbiAgYTtcbiAgYjtcbiAgYztcbiAgZDtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgY29uc3QgeyBzdGFydDogYSwgY3AxOiBiLCBjcDI6IGMsIGVuZDogZCB9ID0gY29uZmlnO1xuICAgIHN1cGVyKHsgLi4uY29uZmlnLCBwb2ludHM6IFthLCBkXSB9KTtcbiAgICB0aGlzLmEgPSBhO1xuICAgIHRoaXMuYiA9IGI7XG4gICAgdGhpcy5jID0gYztcbiAgICB0aGlzLmQgPSBkO1xuICB9XG4gIGdldFZlcnRpY2VzKCkge1xuICAgIGNvbnN0IHZlcnRpY2VzID0gW107XG4gICAgY29uc3QgeyBhLCBiLCBjLCBkIH0gPSB0aGlzO1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gMTA7IGkgPD0gbjsgaSsrKSB7XG4gICAgICBjb25zdCB0ID0gaSAvIG47XG4gICAgICB2ZXJ0aWNlcy5wdXNoKFxuICAgICAgICBuZXcgVmVjKFxuICAgICAgICAgICgxIC0gdCkgKiAoMSAtIHQpICogKDEgLSB0KSAqIGEueCArIDMgKiAoKDEgLSB0KSAqICgxIC0gdCkpICogdCAqIGIueCArIDMgKiAoMSAtIHQpICogKHQgKiB0KSAqIGMueCArIHQgKiB0ICogdCAqIGQueCxcbiAgICAgICAgICAoMSAtIHQpICogKDEgLSB0KSAqICgxIC0gdCkgKiBhLnkgKyAzICogKCgxIC0gdCkgKiAoMSAtIHQpKSAqIHQgKiBiLnkgKyAzICogKDEgLSB0KSAqICh0ICogdCkgKiBjLnkgKyB0ICogdCAqIHQgKiBkLnlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHZlcnRpY2VzO1xuICB9XG4gIG1pZFBvaW50KCkge1xuICAgIHJldHVybiBDdWJpY0JlemllcjJkLkdldEF0VCh0aGlzLCAwLjUpO1xuICB9XG4gIG5lYXJlc3RQb2ludChBKSB7XG4gICAgbGV0IG5lYXJlc3Q7XG4gICAgbGV0IGRpc3QgPSBJbmZpbml0eTtcbiAgICBsZXQgZDtcbiAgICBsZXQgcDtcbiAgICBmb3IgKGNvbnN0IGVkZ2Ugb2YgdGhpcy5zZWdtZW50cykge1xuICAgICAgcCA9IGVkZ2UubmVhcmVzdFBvaW50KEEpO1xuICAgICAgZCA9IFZlYy5EaXN0MihwLCBBKTtcbiAgICAgIGlmIChkIDwgZGlzdCkge1xuICAgICAgICBuZWFyZXN0ID0gcDtcbiAgICAgICAgZGlzdCA9IGQ7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghbmVhcmVzdClcbiAgICAgIHRocm93IEVycm9yKFwibmVhcmVzdCBwb2ludCBub3QgZm91bmRcIik7XG4gICAgcmV0dXJuIG5lYXJlc3Q7XG4gIH1cbiAgZ2V0U3ZnUGF0aERhdGEoZmlyc3QgPSB0cnVlKSB7XG4gICAgY29uc3QgeyBhLCBiLCBjLCBkIH0gPSB0aGlzO1xuICAgIHJldHVybiBgJHtmaXJzdCA/IGBNICR7YS50b0ZpeGVkKCl9IGAgOiBgYH0gQyR7Yi50b0ZpeGVkKCl9ICR7Yy50b0ZpeGVkKCl9ICR7ZC50b0ZpeGVkKCl9YDtcbiAgfVxuICBzdGF0aWMgR2V0QXRUKHNlZ21lbnQsIHQpIHtcbiAgICBjb25zdCB7IGEsIGIsIGMsIGQgfSA9IHNlZ21lbnQ7XG4gICAgcmV0dXJuIG5ldyBWZWMoXG4gICAgICAoMSAtIHQpICogKDEgLSB0KSAqICgxIC0gdCkgKiBhLnggKyAzICogKCgxIC0gdCkgKiAoMSAtIHQpKSAqIHQgKiBiLnggKyAzICogKDEgLSB0KSAqICh0ICogdCkgKiBjLnggKyB0ICogdCAqIHQgKiBkLngsXG4gICAgICAoMSAtIHQpICogKDEgLSB0KSAqICgxIC0gdCkgKiBhLnkgKyAzICogKCgxIC0gdCkgKiAoMSAtIHQpKSAqIHQgKiBiLnkgKyAzICogKDEgLSB0KSAqICh0ICogdCkgKiBjLnkgKyB0ICogdCAqIHQgKiBkLnlcbiAgICApO1xuICB9XG4gIGdldExlbmd0aChwcmVjaXNpb24gPSAzMikge1xuICAgIGxldCBuMSwgcDEgPSB0aGlzLmEsIGxlbmd0aCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gcHJlY2lzaW9uOyBpKyspIHtcbiAgICAgIG4xID0gQ3ViaWNCZXppZXIyZC5HZXRBdFQodGhpcywgaSAvIHByZWNpc2lvbik7XG4gICAgICBsZW5ndGggKz0gVmVjLkRpc3QocDEsIG4xKTtcbiAgICAgIHAxID0gbjE7XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEN1YmljQmV6aWVyMmRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1DdWJpY0JlemllcjJkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicBezier2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicSpline2d.mjs":
/*!****************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicSpline2d.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CubicSpline2d: () => (/* binding */ CubicSpline2d)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _CubicBezier2d_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CubicBezier2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicBezier2d.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n\n\n\nclass CubicSpline2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__.Geometry2d {\n  points;\n  constructor(config) {\n    super({ ...config, isClosed: false, isFilled: false });\n    const { points } = config;\n    this.points = points;\n  }\n  _segments;\n  // eslint-disable-next-line no-restricted-syntax\n  get segments() {\n    if (!this._segments) {\n      this._segments = [];\n      const { points } = this;\n      const len = points.length;\n      const last = len - 2;\n      const k = 1.25;\n      for (let i = 0; i < len - 1; i++) {\n        const p0 = i === 0 ? points[0] : points[i - 1];\n        const p1 = points[i];\n        const p2 = points[i + 1];\n        const p3 = i === last ? p2 : points[i + 2];\n        const start = p1, cp1 = i === 0 ? p0 : new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(p1.x + (p2.x - p0.x) / 6 * k, p1.y + (p2.y - p0.y) / 6 * k), cp2 = i === last ? p2 : new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(p2.x - (p3.x - p1.x) / 6 * k, p2.y - (p3.y - p1.y) / 6 * k), end = p2;\n        this._segments.push(new _CubicBezier2d_mjs__WEBPACK_IMPORTED_MODULE_1__.CubicBezier2d({ start, cp1, cp2, end }));\n      }\n    }\n    return this._segments;\n  }\n  getLength() {\n    return this.segments.reduce((acc, segment) => acc + segment.length, 0);\n  }\n  getVertices() {\n    const vertices = this.segments.reduce((acc, segment) => {\n      return acc.concat(segment.vertices);\n    }, []);\n    vertices.push(this.points[this.points.length - 1]);\n    return vertices;\n  }\n  nearestPoint(A) {\n    let nearest;\n    let dist = Infinity;\n    let d;\n    let p;\n    for (const segment of this.segments) {\n      p = segment.nearestPoint(A);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist2(p, A);\n      if (d < dist) {\n        nearest = p;\n        dist = d;\n      }\n    }\n    if (!nearest)\n      throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  hitTestLineSegment(A, B) {\n    return this.segments.some((segment) => segment.hitTestLineSegment(A, B));\n  }\n  getSvgPathData() {\n    let d = this.segments.reduce((d2, segment, i) => {\n      return d2 + segment.getSvgPathData(i === 0);\n    }, \"\");\n    if (this.isClosed) {\n      d += \"Z\";\n    }\n    return d;\n  }\n}\n\n//# sourceMappingURL=CubicSpline2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQ3ViaWNTcGxpbmUyZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNtQjtBQUNOO0FBQzlDLDRCQUE0Qix1REFBVTtBQUN0QztBQUNBO0FBQ0EsWUFBWSw2Q0FBNkM7QUFDekQsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixhQUFhO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHlDQUFHLDBGQUEwRix5Q0FBRztBQUNuSixnQ0FBZ0MsNkRBQWEsR0FBRyxzQkFBc0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlDQUFHO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvQ3ViaWNTcGxpbmUyZC5tanM/YTMzMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vVmVjLm1qc1wiO1xuaW1wb3J0IHsgQ3ViaWNCZXppZXIyZCB9IGZyb20gXCIuL0N1YmljQmV6aWVyMmQubWpzXCI7XG5pbXBvcnQgeyBHZW9tZXRyeTJkIH0gZnJvbSBcIi4vR2VvbWV0cnkyZC5tanNcIjtcbmNsYXNzIEN1YmljU3BsaW5lMmQgZXh0ZW5kcyBHZW9tZXRyeTJkIHtcbiAgcG9pbnRzO1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7IC4uLmNvbmZpZywgaXNDbG9zZWQ6IGZhbHNlLCBpc0ZpbGxlZDogZmFsc2UgfSk7XG4gICAgY29uc3QgeyBwb2ludHMgfSA9IGNvbmZpZztcbiAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgfVxuICBfc2VnbWVudHM7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgc2VnbWVudHMoKSB7XG4gICAgaWYgKCF0aGlzLl9zZWdtZW50cykge1xuICAgICAgdGhpcy5fc2VnbWVudHMgPSBbXTtcbiAgICAgIGNvbnN0IHsgcG9pbnRzIH0gPSB0aGlzO1xuICAgICAgY29uc3QgbGVuID0gcG9pbnRzLmxlbmd0aDtcbiAgICAgIGNvbnN0IGxhc3QgPSBsZW4gLSAyO1xuICAgICAgY29uc3QgayA9IDEuMjU7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbiAtIDE7IGkrKykge1xuICAgICAgICBjb25zdCBwMCA9IGkgPT09IDAgPyBwb2ludHNbMF0gOiBwb2ludHNbaSAtIDFdO1xuICAgICAgICBjb25zdCBwMSA9IHBvaW50c1tpXTtcbiAgICAgICAgY29uc3QgcDIgPSBwb2ludHNbaSArIDFdO1xuICAgICAgICBjb25zdCBwMyA9IGkgPT09IGxhc3QgPyBwMiA6IHBvaW50c1tpICsgMl07XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gcDEsIGNwMSA9IGkgPT09IDAgPyBwMCA6IG5ldyBWZWMocDEueCArIChwMi54IC0gcDAueCkgLyA2ICogaywgcDEueSArIChwMi55IC0gcDAueSkgLyA2ICogayksIGNwMiA9IGkgPT09IGxhc3QgPyBwMiA6IG5ldyBWZWMocDIueCAtIChwMy54IC0gcDEueCkgLyA2ICogaywgcDIueSAtIChwMy55IC0gcDEueSkgLyA2ICogayksIGVuZCA9IHAyO1xuICAgICAgICB0aGlzLl9zZWdtZW50cy5wdXNoKG5ldyBDdWJpY0JlemllcjJkKHsgc3RhcnQsIGNwMSwgY3AyLCBlbmQgfSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc2VnbWVudHM7XG4gIH1cbiAgZ2V0TGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnJlZHVjZSgoYWNjLCBzZWdtZW50KSA9PiBhY2MgKyBzZWdtZW50Lmxlbmd0aCwgMCk7XG4gIH1cbiAgZ2V0VmVydGljZXMoKSB7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnNlZ21lbnRzLnJlZHVjZSgoYWNjLCBzZWdtZW50KSA9PiB7XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdChzZWdtZW50LnZlcnRpY2VzKTtcbiAgICB9LCBbXSk7XG4gICAgdmVydGljZXMucHVzaCh0aGlzLnBvaW50c1t0aGlzLnBvaW50cy5sZW5ndGggLSAxXSk7XG4gICAgcmV0dXJuIHZlcnRpY2VzO1xuICB9XG4gIG5lYXJlc3RQb2ludChBKSB7XG4gICAgbGV0IG5lYXJlc3Q7XG4gICAgbGV0IGRpc3QgPSBJbmZpbml0eTtcbiAgICBsZXQgZDtcbiAgICBsZXQgcDtcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2YgdGhpcy5zZWdtZW50cykge1xuICAgICAgcCA9IHNlZ21lbnQubmVhcmVzdFBvaW50KEEpO1xuICAgICAgZCA9IFZlYy5EaXN0MihwLCBBKTtcbiAgICAgIGlmIChkIDwgZGlzdCkge1xuICAgICAgICBuZWFyZXN0ID0gcDtcbiAgICAgICAgZGlzdCA9IGQ7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghbmVhcmVzdClcbiAgICAgIHRocm93IEVycm9yKFwibmVhcmVzdCBwb2ludCBub3QgZm91bmRcIik7XG4gICAgcmV0dXJuIG5lYXJlc3Q7XG4gIH1cbiAgaGl0VGVzdExpbmVTZWdtZW50KEEsIEIpIHtcbiAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5zb21lKChzZWdtZW50KSA9PiBzZWdtZW50LmhpdFRlc3RMaW5lU2VnbWVudChBLCBCKSk7XG4gIH1cbiAgZ2V0U3ZnUGF0aERhdGEoKSB7XG4gICAgbGV0IGQgPSB0aGlzLnNlZ21lbnRzLnJlZHVjZSgoZDIsIHNlZ21lbnQsIGkpID0+IHtcbiAgICAgIHJldHVybiBkMiArIHNlZ21lbnQuZ2V0U3ZnUGF0aERhdGEoaSA9PT0gMCk7XG4gICAgfSwgXCJcIik7XG4gICAgaWYgKHRoaXMuaXNDbG9zZWQpIHtcbiAgICAgIGQgKz0gXCJaXCI7XG4gICAgfVxuICAgIHJldHVybiBkO1xuICB9XG59XG5leHBvcnQge1xuICBDdWJpY1NwbGluZTJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q3ViaWNTcGxpbmUyZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/CubicSpline2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Edge2d: () => (/* binding */ Edge2d)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _intersect_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../intersect.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n\n\n\nclass Edge2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__.Geometry2d {\n  start;\n  end;\n  d;\n  u;\n  ul;\n  constructor(config) {\n    super({ ...config, isClosed: false, isFilled: false });\n    const { start, end } = config;\n    this.start = start;\n    this.end = end;\n    this.d = start.clone().sub(end);\n    this.u = this.d.clone().uni();\n    this.ul = this.u.len();\n  }\n  getLength() {\n    return this.d.len();\n  }\n  midPoint() {\n    return this.start.lrp(this.end, 0.5);\n  }\n  getVertices() {\n    return [this.start, this.end];\n  }\n  nearestPoint(point) {\n    const { start, end, u, ul: l } = this;\n    if (l === 0)\n      return start;\n    const k = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Sub(point, start).dpr(u) / l;\n    const cx = start.x + u.x * k;\n    if (cx < Math.min(start.x, end.x))\n      return start.x < end.x ? start : end;\n    if (cx > Math.max(start.x, end.x))\n      return start.x > end.x ? start : end;\n    const cy = start.y + u.y * k;\n    if (cy < Math.min(start.y, end.y))\n      return start.y < end.y ? start : end;\n    if (cy > Math.max(start.y, end.y))\n      return start.y > end.y ? start : end;\n    return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(cx, cy);\n  }\n  hitTestLineSegment(A, B, distance = 0) {\n    return (0,_intersect_mjs__WEBPACK_IMPORTED_MODULE_1__.linesIntersect)(A, B, this.start, this.end) || this.distanceToLineSegment(A, B) <= distance;\n  }\n  getSvgPathData(first = true) {\n    const { start, end } = this;\n    return `${first ? `M${start.toFixed()}` : ``} L${end.toFixed()}`;\n  }\n}\n\n//# sourceMappingURL=Edge2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvRWRnZTJkLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlDO0FBQ2lCO0FBQ0o7QUFDOUMscUJBQXFCLHVEQUFVO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNkNBQTZDO0FBQ3pELFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksdUJBQXVCO0FBQ25DO0FBQ0E7QUFDQSxjQUFjLHlDQUFHO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5Q0FBRztBQUNsQjtBQUNBO0FBQ0EsV0FBVyw4REFBYztBQUN6QjtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCLGNBQWMsWUFBWSxnQkFBZ0IsUUFBUSxHQUFHLGNBQWM7QUFDbkU7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvRWRnZTJkLm1qcz8zODk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBsaW5lc0ludGVyc2VjdCB9IGZyb20gXCIuLi9pbnRlcnNlY3QubWpzXCI7XG5pbXBvcnQgeyBHZW9tZXRyeTJkIH0gZnJvbSBcIi4vR2VvbWV0cnkyZC5tanNcIjtcbmNsYXNzIEVkZ2UyZCBleHRlbmRzIEdlb21ldHJ5MmQge1xuICBzdGFydDtcbiAgZW5kO1xuICBkO1xuICB1O1xuICB1bDtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgc3VwZXIoeyAuLi5jb25maWcsIGlzQ2xvc2VkOiBmYWxzZSwgaXNGaWxsZWQ6IGZhbHNlIH0pO1xuICAgIGNvbnN0IHsgc3RhcnQsIGVuZCB9ID0gY29uZmlnO1xuICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICB0aGlzLmVuZCA9IGVuZDtcbiAgICB0aGlzLmQgPSBzdGFydC5jbG9uZSgpLnN1YihlbmQpO1xuICAgIHRoaXMudSA9IHRoaXMuZC5jbG9uZSgpLnVuaSgpO1xuICAgIHRoaXMudWwgPSB0aGlzLnUubGVuKCk7XG4gIH1cbiAgZ2V0TGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLmQubGVuKCk7XG4gIH1cbiAgbWlkUG9pbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnQubHJwKHRoaXMuZW5kLCAwLjUpO1xuICB9XG4gIGdldFZlcnRpY2VzKCkge1xuICAgIHJldHVybiBbdGhpcy5zdGFydCwgdGhpcy5lbmRdO1xuICB9XG4gIG5lYXJlc3RQb2ludChwb2ludCkge1xuICAgIGNvbnN0IHsgc3RhcnQsIGVuZCwgdSwgdWw6IGwgfSA9IHRoaXM7XG4gICAgaWYgKGwgPT09IDApXG4gICAgICByZXR1cm4gc3RhcnQ7XG4gICAgY29uc3QgayA9IFZlYy5TdWIocG9pbnQsIHN0YXJ0KS5kcHIodSkgLyBsO1xuICAgIGNvbnN0IGN4ID0gc3RhcnQueCArIHUueCAqIGs7XG4gICAgaWYgKGN4IDwgTWF0aC5taW4oc3RhcnQueCwgZW5kLngpKVxuICAgICAgcmV0dXJuIHN0YXJ0LnggPCBlbmQueCA/IHN0YXJ0IDogZW5kO1xuICAgIGlmIChjeCA+IE1hdGgubWF4KHN0YXJ0LngsIGVuZC54KSlcbiAgICAgIHJldHVybiBzdGFydC54ID4gZW5kLnggPyBzdGFydCA6IGVuZDtcbiAgICBjb25zdCBjeSA9IHN0YXJ0LnkgKyB1LnkgKiBrO1xuICAgIGlmIChjeSA8IE1hdGgubWluKHN0YXJ0LnksIGVuZC55KSlcbiAgICAgIHJldHVybiBzdGFydC55IDwgZW5kLnkgPyBzdGFydCA6IGVuZDtcbiAgICBpZiAoY3kgPiBNYXRoLm1heChzdGFydC55LCBlbmQueSkpXG4gICAgICByZXR1cm4gc3RhcnQueSA+IGVuZC55ID8gc3RhcnQgOiBlbmQ7XG4gICAgcmV0dXJuIG5ldyBWZWMoY3gsIGN5KTtcbiAgfVxuICBoaXRUZXN0TGluZVNlZ21lbnQoQSwgQiwgZGlzdGFuY2UgPSAwKSB7XG4gICAgcmV0dXJuIGxpbmVzSW50ZXJzZWN0KEEsIEIsIHRoaXMuc3RhcnQsIHRoaXMuZW5kKSB8fCB0aGlzLmRpc3RhbmNlVG9MaW5lU2VnbWVudChBLCBCKSA8PSBkaXN0YW5jZTtcbiAgfVxuICBnZXRTdmdQYXRoRGF0YShmaXJzdCA9IHRydWUpIHtcbiAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IHRoaXM7XG4gICAgcmV0dXJuIGAke2ZpcnN0ID8gYE0ke3N0YXJ0LnRvRml4ZWQoKX1gIDogYGB9IEwke2VuZC50b0ZpeGVkKCl9YDtcbiAgfVxufVxuZXhwb3J0IHtcbiAgRWRnZTJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RWRnZTJkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Ellipse2d.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Ellipse2d.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ellipse2d: () => (/* binding */ Ellipse2d)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Edge2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n/* harmony import */ var _geometry_constants_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry-constants.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/geometry-constants.mjs\");\n\n\n\n\n\n\nclass Ellipse2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Geometry2d {\n  constructor(config) {\n    super({ ...config, isClosed: true });\n    this.config = config;\n    const { width, height } = config;\n    this.w = width;\n    this.h = height;\n  }\n  w;\n  h;\n  _edges;\n  // eslint-disable-next-line no-restricted-syntax\n  get edges() {\n    if (!this._edges) {\n      const { vertices } = this;\n      this._edges = [];\n      for (let i = 0, n = vertices.length; i < n; i++) {\n        const start = vertices[i];\n        const end = vertices[(i + 1) % n];\n        this._edges.push(new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Edge2d({ start, end }));\n      }\n    }\n    return this._edges;\n  }\n  getVertices() {\n    const w = Math.max(1, this.w);\n    const h = Math.max(1, this.h);\n    const cx = w / 2;\n    const cy = h / 2;\n    const q = Math.pow(cx - cy, 2) / Math.pow(cx + cy, 2);\n    const p = _utils_mjs__WEBPACK_IMPORTED_MODULE_2__.PI * (cx + cy) * (1 + 3 * q / (10 + Math.sqrt(4 - 3 * q)));\n    const len = (0,_geometry_constants_mjs__WEBPACK_IMPORTED_MODULE_5__.getVerticesCountForLength)(p);\n    const step = _utils_mjs__WEBPACK_IMPORTED_MODULE_2__.PI2 / len;\n    const a = Math.cos(step);\n    const b = Math.sin(step);\n    let sin = 0;\n    let cos = 1;\n    let ts = 0;\n    let tc = 1;\n    const vertices = Array(len);\n    for (let i = 0; i < len; i++) {\n      vertices[i] = new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(cx + cx * cos, cy + cy * sin);\n      ts = b * cos + a * sin;\n      tc = a * cos - b * sin;\n      sin = ts;\n      cos = tc;\n    }\n    return vertices;\n  }\n  nearestPoint(A) {\n    let nearest;\n    let dist = Infinity;\n    let d;\n    let p;\n    for (const edge of this.edges) {\n      p = edge.nearestPoint(A);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(p, A);\n      if (d < dist) {\n        nearest = p;\n        dist = d;\n      }\n    }\n    if (!nearest)\n      throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  hitTestLineSegment(A, B) {\n    return this.edges.some((edge) => edge.hitTestLineSegment(A, B));\n  }\n  getBounds() {\n    return new _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box(0, 0, this.w, this.h);\n  }\n  getLength() {\n    const { w, h } = this;\n    const cx = w / 2;\n    const cy = h / 2;\n    const rx = Math.max(0, cx);\n    const ry = Math.max(0, cy);\n    return (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.perimeterOfEllipse)(rx, ry);\n  }\n  getSvgPathData(first = false) {\n    const { w, h } = this;\n    const cx = w / 2;\n    const cy = h / 2;\n    const rx = Math.max(0, cx);\n    const ry = Math.max(0, cy);\n    return `${first ? `M${cx - rx},${cy}` : ``} a${rx},${ry},0,1,1,${rx * 2},0a${rx},${ry},0,1,1,-${rx * 2},0`;\n  }\n}\n\n//# sourceMappingURL=Ellipse2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvRWxsaXBzZTJkLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWlDO0FBQ0E7QUFDMEI7QUFDckI7QUFDUTtBQUN1QjtBQUNyRSx3QkFBd0IsdURBQVU7QUFDbEM7QUFDQSxZQUFZLDJCQUEyQjtBQUN2QztBQUNBLFlBQVksZ0JBQWdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsV0FBVztBQUN6QjtBQUNBLDJDQUEyQyxPQUFPO0FBQ2xEO0FBQ0E7QUFDQSw2QkFBNkIsK0NBQU0sR0FBRyxZQUFZO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywwQ0FBRTtBQUNoQixnQkFBZ0Isa0ZBQXlCO0FBQ3pDLGlCQUFpQiwyQ0FBRztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCLHdCQUF3Qix5Q0FBRztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx5Q0FBRztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5Q0FBRztBQUNsQjtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4REFBa0I7QUFDN0I7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsWUFBWSxRQUFRLEdBQUcsR0FBRyxRQUFRLEdBQUcsR0FBRyxHQUFHLEdBQUcsU0FBUyxPQUFPLEtBQUssR0FBRyxHQUFHLEdBQUcsVUFBVSxPQUFPO0FBQzNHO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L0VsbGlwc2UyZC5tanM/ODhmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3ggfSBmcm9tIFwiLi4vQm94Lm1qc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uL1ZlYy5tanNcIjtcbmltcG9ydCB7IFBJLCBQSTIsIHBlcmltZXRlck9mRWxsaXBzZSB9IGZyb20gXCIuLi91dGlscy5tanNcIjtcbmltcG9ydCB7IEVkZ2UyZCB9IGZyb20gXCIuL0VkZ2UyZC5tanNcIjtcbmltcG9ydCB7IEdlb21ldHJ5MmQgfSBmcm9tIFwiLi9HZW9tZXRyeTJkLm1qc1wiO1xuaW1wb3J0IHsgZ2V0VmVydGljZXNDb3VudEZvckxlbmd0aCB9IGZyb20gXCIuL2dlb21ldHJ5LWNvbnN0YW50cy5tanNcIjtcbmNsYXNzIEVsbGlwc2UyZCBleHRlbmRzIEdlb21ldHJ5MmQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7IC4uLmNvbmZpZywgaXNDbG9zZWQ6IHRydWUgfSk7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBjb25maWc7XG4gICAgdGhpcy53ID0gd2lkdGg7XG4gICAgdGhpcy5oID0gaGVpZ2h0O1xuICB9XG4gIHc7XG4gIGg7XG4gIF9lZGdlcztcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBlZGdlcygpIHtcbiAgICBpZiAoIXRoaXMuX2VkZ2VzKSB7XG4gICAgICBjb25zdCB7IHZlcnRpY2VzIH0gPSB0aGlzO1xuICAgICAgdGhpcy5fZWRnZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gdmVydGljZXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gdmVydGljZXNbaV07XG4gICAgICAgIGNvbnN0IGVuZCA9IHZlcnRpY2VzWyhpICsgMSkgJSBuXTtcbiAgICAgICAgdGhpcy5fZWRnZXMucHVzaChuZXcgRWRnZTJkKHsgc3RhcnQsIGVuZCB9KSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lZGdlcztcbiAgfVxuICBnZXRWZXJ0aWNlcygpIHtcbiAgICBjb25zdCB3ID0gTWF0aC5tYXgoMSwgdGhpcy53KTtcbiAgICBjb25zdCBoID0gTWF0aC5tYXgoMSwgdGhpcy5oKTtcbiAgICBjb25zdCBjeCA9IHcgLyAyO1xuICAgIGNvbnN0IGN5ID0gaCAvIDI7XG4gICAgY29uc3QgcSA9IE1hdGgucG93KGN4IC0gY3ksIDIpIC8gTWF0aC5wb3coY3ggKyBjeSwgMik7XG4gICAgY29uc3QgcCA9IFBJICogKGN4ICsgY3kpICogKDEgKyAzICogcSAvICgxMCArIE1hdGguc3FydCg0IC0gMyAqIHEpKSk7XG4gICAgY29uc3QgbGVuID0gZ2V0VmVydGljZXNDb3VudEZvckxlbmd0aChwKTtcbiAgICBjb25zdCBzdGVwID0gUEkyIC8gbGVuO1xuICAgIGNvbnN0IGEgPSBNYXRoLmNvcyhzdGVwKTtcbiAgICBjb25zdCBiID0gTWF0aC5zaW4oc3RlcCk7XG4gICAgbGV0IHNpbiA9IDA7XG4gICAgbGV0IGNvcyA9IDE7XG4gICAgbGV0IHRzID0gMDtcbiAgICBsZXQgdGMgPSAxO1xuICAgIGNvbnN0IHZlcnRpY2VzID0gQXJyYXkobGVuKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2ZXJ0aWNlc1tpXSA9IG5ldyBWZWMoY3ggKyBjeCAqIGNvcywgY3kgKyBjeSAqIHNpbik7XG4gICAgICB0cyA9IGIgKiBjb3MgKyBhICogc2luO1xuICAgICAgdGMgPSBhICogY29zIC0gYiAqIHNpbjtcbiAgICAgIHNpbiA9IHRzO1xuICAgICAgY29zID0gdGM7XG4gICAgfVxuICAgIHJldHVybiB2ZXJ0aWNlcztcbiAgfVxuICBuZWFyZXN0UG9pbnQoQSkge1xuICAgIGxldCBuZWFyZXN0O1xuICAgIGxldCBkaXN0ID0gSW5maW5pdHk7XG4gICAgbGV0IGQ7XG4gICAgbGV0IHA7XG4gICAgZm9yIChjb25zdCBlZGdlIG9mIHRoaXMuZWRnZXMpIHtcbiAgICAgIHAgPSBlZGdlLm5lYXJlc3RQb2ludChBKTtcbiAgICAgIGQgPSBWZWMuRGlzdDIocCwgQSk7XG4gICAgICBpZiAoZCA8IGRpc3QpIHtcbiAgICAgICAgbmVhcmVzdCA9IHA7XG4gICAgICAgIGRpc3QgPSBkO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW5lYXJlc3QpXG4gICAgICB0aHJvdyBFcnJvcihcIm5lYXJlc3QgcG9pbnQgbm90IGZvdW5kXCIpO1xuICAgIHJldHVybiBuZWFyZXN0O1xuICB9XG4gIGhpdFRlc3RMaW5lU2VnbWVudChBLCBCKSB7XG4gICAgcmV0dXJuIHRoaXMuZWRnZXMuc29tZSgoZWRnZSkgPT4gZWRnZS5oaXRUZXN0TGluZVNlZ21lbnQoQSwgQikpO1xuICB9XG4gIGdldEJvdW5kcygpIHtcbiAgICByZXR1cm4gbmV3IEJveCgwLCAwLCB0aGlzLncsIHRoaXMuaCk7XG4gIH1cbiAgZ2V0TGVuZ3RoKCkge1xuICAgIGNvbnN0IHsgdywgaCB9ID0gdGhpcztcbiAgICBjb25zdCBjeCA9IHcgLyAyO1xuICAgIGNvbnN0IGN5ID0gaCAvIDI7XG4gICAgY29uc3QgcnggPSBNYXRoLm1heCgwLCBjeCk7XG4gICAgY29uc3QgcnkgPSBNYXRoLm1heCgwLCBjeSk7XG4gICAgcmV0dXJuIHBlcmltZXRlck9mRWxsaXBzZShyeCwgcnkpO1xuICB9XG4gIGdldFN2Z1BhdGhEYXRhKGZpcnN0ID0gZmFsc2UpIHtcbiAgICBjb25zdCB7IHcsIGggfSA9IHRoaXM7XG4gICAgY29uc3QgY3ggPSB3IC8gMjtcbiAgICBjb25zdCBjeSA9IGggLyAyO1xuICAgIGNvbnN0IHJ4ID0gTWF0aC5tYXgoMCwgY3gpO1xuICAgIGNvbnN0IHJ5ID0gTWF0aC5tYXgoMCwgY3kpO1xuICAgIHJldHVybiBgJHtmaXJzdCA/IGBNJHtjeCAtIHJ4fSwke2N5fWAgOiBgYH0gYSR7cnh9LCR7cnl9LDAsMSwxLCR7cnggKiAyfSwwYSR7cnh9LCR7cnl9LDAsMSwxLC0ke3J4ICogMn0sMGA7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEVsbGlwc2UyZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVsbGlwc2UyZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Ellipse2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Geometry2d: () => (/* binding */ Geometry2d)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\n\n\nclass Geometry2d {\n  isFilled = false;\n  isClosed = true;\n  isLabel = false;\n  debugColor;\n  ignore;\n  constructor(opts) {\n    this.isFilled = opts.isFilled;\n    this.isClosed = opts.isClosed;\n    this.isLabel = opts.isLabel ?? false;\n    this.debugColor = opts.debugColor;\n    this.ignore = opts.ignore;\n  }\n  // hitTestPoint(point: Vec, margin = 0, hitInside = false) {\n  // \t// We've removed the broad phase here; that should be done outside of the call\n  // \treturn this.distanceToPoint(point, hitInside) <= margin\n  // }\n  hitTestPoint(point, margin = 0, hitInside = false) {\n    if (this.isClosed && (this.isFilled || hitInside) && (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.pointInPolygon)(point, this.vertices)) {\n      return true;\n    }\n    return _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(point, this.nearestPoint(point)) <= margin * margin;\n  }\n  distanceToPoint(point, hitInside = false) {\n    return point.dist(this.nearestPoint(point)) * (this.isClosed && (this.isFilled || hitInside) && (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.pointInPolygon)(point, this.vertices) ? -1 : 1);\n  }\n  distanceToLineSegment(A, B) {\n    if (A.equals(B))\n      return this.distanceToPoint(A);\n    const { vertices } = this;\n    let nearest;\n    let dist = Infinity;\n    let d, p, q;\n    for (let i = 0; i < vertices.length; i++) {\n      p = vertices[i];\n      q = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.NearestPointOnLineSegment(A, B, p, true);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(p, q);\n      if (d < dist) {\n        dist = d;\n        nearest = q;\n      }\n    }\n    if (!nearest)\n      throw Error(\"nearest point not found\");\n    return this.isClosed && this.isFilled && (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.pointInPolygon)(nearest, this.vertices) ? -dist : dist;\n  }\n  hitTestLineSegment(A, B, distance = 0) {\n    return this.distanceToLineSegment(A, B) <= distance;\n  }\n  nearestPointOnLineSegment(A, B) {\n    const { vertices } = this;\n    let nearest;\n    let dist = Infinity;\n    let d, p, q;\n    for (let i = 0; i < vertices.length; i++) {\n      p = vertices[i];\n      q = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.NearestPointOnLineSegment(A, B, p, true);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(p, q);\n      if (d < dist) {\n        dist = d;\n        nearest = q;\n      }\n    }\n    if (!nearest)\n      throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  isPointInBounds(point, margin = 0) {\n    const { bounds } = this;\n    return !(point.x < bounds.minX - margin || point.y < bounds.minY - margin || point.x > bounds.maxX + margin || point.y > bounds.maxY + margin);\n  }\n  _vertices;\n  // eslint-disable-next-line no-restricted-syntax\n  get vertices() {\n    if (!this._vertices) {\n      this._vertices = this.getVertices();\n    }\n    return this._vertices;\n  }\n  getBounds() {\n    return _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box.FromPoints(this.vertices);\n  }\n  _bounds;\n  // eslint-disable-next-line no-restricted-syntax\n  get bounds() {\n    if (!this._bounds) {\n      this._bounds = this.getBounds();\n    }\n    return this._bounds;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get center() {\n    return this.bounds.center;\n  }\n  _area;\n  // eslint-disable-next-line no-restricted-syntax\n  get area() {\n    if (!this._area) {\n      this._area = this.getArea();\n    }\n    return this._area;\n  }\n  getArea() {\n    if (!this.isClosed) {\n      return 0;\n    }\n    const { vertices } = this;\n    let area = 0;\n    for (let i = 0, n = vertices.length; i < n; i++) {\n      const curr = vertices[i];\n      const next = vertices[(i + 1) % n];\n      area += curr.x * next.y - next.x * curr.y;\n    }\n    return area / 2;\n  }\n  toSimpleSvgPath() {\n    let path = \"\";\n    const { vertices } = this;\n    const n = vertices.length;\n    if (n === 0)\n      return path;\n    path += `M${vertices[0].x},${vertices[0].y}`;\n    for (let i = 1; i < n; i++) {\n      path += `L${vertices[i].x},${vertices[i].y}`;\n    }\n    if (this.isClosed) {\n      path += \"Z\";\n    }\n    return path;\n  }\n  _length;\n  // eslint-disable-next-line no-restricted-syntax\n  get length() {\n    if (this._length)\n      return this._length;\n    this._length = this.getLength();\n    return this._length;\n  }\n  getLength() {\n    const { vertices } = this;\n    let n1, p1 = vertices[0], length = 0;\n    for (let i = 1; i < vertices.length; i++) {\n      n1 = vertices[i];\n      length += _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(p1, n1);\n      p1 = n1;\n    }\n    return Math.sqrt(length);\n  }\n}\n\n//# sourceMappingURL=Geometry2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvR2VvbWV0cnkyZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNBO0FBQ2E7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQSx5REFBeUQsMERBQWM7QUFDdkU7QUFDQTtBQUNBLFdBQVcseUNBQUc7QUFDZDtBQUNBO0FBQ0Esb0dBQW9HLDBEQUFjO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxQkFBcUI7QUFDekM7QUFDQSxVQUFVLHlDQUFHO0FBQ2IsVUFBVSx5Q0FBRztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDBEQUFjO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFCQUFxQjtBQUN6QztBQUNBLFVBQVUseUNBQUc7QUFDYixVQUFVLHlDQUFHO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcseUNBQUc7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNBLHlDQUF5QyxPQUFPO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWMsR0FBRyxjQUFjO0FBQy9DLG9CQUFvQixPQUFPO0FBQzNCLGtCQUFrQixjQUFjLEdBQUcsY0FBYztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0EsZ0JBQWdCLHlDQUFHO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L0dlb21ldHJ5MmQubWpzPzNhNjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm94IH0gZnJvbSBcIi4uL0JveC5tanNcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBwb2ludEluUG9seWdvbiB9IGZyb20gXCIuLi91dGlscy5tanNcIjtcbmNsYXNzIEdlb21ldHJ5MmQge1xuICBpc0ZpbGxlZCA9IGZhbHNlO1xuICBpc0Nsb3NlZCA9IHRydWU7XG4gIGlzTGFiZWwgPSBmYWxzZTtcbiAgZGVidWdDb2xvcjtcbiAgaWdub3JlO1xuICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgdGhpcy5pc0ZpbGxlZCA9IG9wdHMuaXNGaWxsZWQ7XG4gICAgdGhpcy5pc0Nsb3NlZCA9IG9wdHMuaXNDbG9zZWQ7XG4gICAgdGhpcy5pc0xhYmVsID0gb3B0cy5pc0xhYmVsID8/IGZhbHNlO1xuICAgIHRoaXMuZGVidWdDb2xvciA9IG9wdHMuZGVidWdDb2xvcjtcbiAgICB0aGlzLmlnbm9yZSA9IG9wdHMuaWdub3JlO1xuICB9XG4gIC8vIGhpdFRlc3RQb2ludChwb2ludDogVmVjLCBtYXJnaW4gPSAwLCBoaXRJbnNpZGUgPSBmYWxzZSkge1xuICAvLyBcdC8vIFdlJ3ZlIHJlbW92ZWQgdGhlIGJyb2FkIHBoYXNlIGhlcmU7IHRoYXQgc2hvdWxkIGJlIGRvbmUgb3V0c2lkZSBvZiB0aGUgY2FsbFxuICAvLyBcdHJldHVybiB0aGlzLmRpc3RhbmNlVG9Qb2ludChwb2ludCwgaGl0SW5zaWRlKSA8PSBtYXJnaW5cbiAgLy8gfVxuICBoaXRUZXN0UG9pbnQocG9pbnQsIG1hcmdpbiA9IDAsIGhpdEluc2lkZSA9IGZhbHNlKSB7XG4gICAgaWYgKHRoaXMuaXNDbG9zZWQgJiYgKHRoaXMuaXNGaWxsZWQgfHwgaGl0SW5zaWRlKSAmJiBwb2ludEluUG9seWdvbihwb2ludCwgdGhpcy52ZXJ0aWNlcykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gVmVjLkRpc3QyKHBvaW50LCB0aGlzLm5lYXJlc3RQb2ludChwb2ludCkpIDw9IG1hcmdpbiAqIG1hcmdpbjtcbiAgfVxuICBkaXN0YW5jZVRvUG9pbnQocG9pbnQsIGhpdEluc2lkZSA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIHBvaW50LmRpc3QodGhpcy5uZWFyZXN0UG9pbnQocG9pbnQpKSAqICh0aGlzLmlzQ2xvc2VkICYmICh0aGlzLmlzRmlsbGVkIHx8IGhpdEluc2lkZSkgJiYgcG9pbnRJblBvbHlnb24ocG9pbnQsIHRoaXMudmVydGljZXMpID8gLTEgOiAxKTtcbiAgfVxuICBkaXN0YW5jZVRvTGluZVNlZ21lbnQoQSwgQikge1xuICAgIGlmIChBLmVxdWFscyhCKSlcbiAgICAgIHJldHVybiB0aGlzLmRpc3RhbmNlVG9Qb2ludChBKTtcbiAgICBjb25zdCB7IHZlcnRpY2VzIH0gPSB0aGlzO1xuICAgIGxldCBuZWFyZXN0O1xuICAgIGxldCBkaXN0ID0gSW5maW5pdHk7XG4gICAgbGV0IGQsIHAsIHE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgcCA9IHZlcnRpY2VzW2ldO1xuICAgICAgcSA9IFZlYy5OZWFyZXN0UG9pbnRPbkxpbmVTZWdtZW50KEEsIEIsIHAsIHRydWUpO1xuICAgICAgZCA9IFZlYy5EaXN0MihwLCBxKTtcbiAgICAgIGlmIChkIDwgZGlzdCkge1xuICAgICAgICBkaXN0ID0gZDtcbiAgICAgICAgbmVhcmVzdCA9IHE7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghbmVhcmVzdClcbiAgICAgIHRocm93IEVycm9yKFwibmVhcmVzdCBwb2ludCBub3QgZm91bmRcIik7XG4gICAgcmV0dXJuIHRoaXMuaXNDbG9zZWQgJiYgdGhpcy5pc0ZpbGxlZCAmJiBwb2ludEluUG9seWdvbihuZWFyZXN0LCB0aGlzLnZlcnRpY2VzKSA/IC1kaXN0IDogZGlzdDtcbiAgfVxuICBoaXRUZXN0TGluZVNlZ21lbnQoQSwgQiwgZGlzdGFuY2UgPSAwKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzdGFuY2VUb0xpbmVTZWdtZW50KEEsIEIpIDw9IGRpc3RhbmNlO1xuICB9XG4gIG5lYXJlc3RQb2ludE9uTGluZVNlZ21lbnQoQSwgQikge1xuICAgIGNvbnN0IHsgdmVydGljZXMgfSA9IHRoaXM7XG4gICAgbGV0IG5lYXJlc3Q7XG4gICAgbGV0IGRpc3QgPSBJbmZpbml0eTtcbiAgICBsZXQgZCwgcCwgcTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwID0gdmVydGljZXNbaV07XG4gICAgICBxID0gVmVjLk5lYXJlc3RQb2ludE9uTGluZVNlZ21lbnQoQSwgQiwgcCwgdHJ1ZSk7XG4gICAgICBkID0gVmVjLkRpc3QyKHAsIHEpO1xuICAgICAgaWYgKGQgPCBkaXN0KSB7XG4gICAgICAgIGRpc3QgPSBkO1xuICAgICAgICBuZWFyZXN0ID0gcTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuZWFyZXN0KVxuICAgICAgdGhyb3cgRXJyb3IoXCJuZWFyZXN0IHBvaW50IG5vdCBmb3VuZFwiKTtcbiAgICByZXR1cm4gbmVhcmVzdDtcbiAgfVxuICBpc1BvaW50SW5Cb3VuZHMocG9pbnQsIG1hcmdpbiA9IDApIHtcbiAgICBjb25zdCB7IGJvdW5kcyB9ID0gdGhpcztcbiAgICByZXR1cm4gIShwb2ludC54IDwgYm91bmRzLm1pblggLSBtYXJnaW4gfHwgcG9pbnQueSA8IGJvdW5kcy5taW5ZIC0gbWFyZ2luIHx8IHBvaW50LnggPiBib3VuZHMubWF4WCArIG1hcmdpbiB8fCBwb2ludC55ID4gYm91bmRzLm1heFkgKyBtYXJnaW4pO1xuICB9XG4gIF92ZXJ0aWNlcztcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCB2ZXJ0aWNlcygpIHtcbiAgICBpZiAoIXRoaXMuX3ZlcnRpY2VzKSB7XG4gICAgICB0aGlzLl92ZXJ0aWNlcyA9IHRoaXMuZ2V0VmVydGljZXMoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3ZlcnRpY2VzO1xuICB9XG4gIGdldEJvdW5kcygpIHtcbiAgICByZXR1cm4gQm94LkZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyk7XG4gIH1cbiAgX2JvdW5kcztcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBib3VuZHMoKSB7XG4gICAgaWYgKCF0aGlzLl9ib3VuZHMpIHtcbiAgICAgIHRoaXMuX2JvdW5kcyA9IHRoaXMuZ2V0Qm91bmRzKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9ib3VuZHM7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBjZW50ZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuYm91bmRzLmNlbnRlcjtcbiAgfVxuICBfYXJlYTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBhcmVhKCkge1xuICAgIGlmICghdGhpcy5fYXJlYSkge1xuICAgICAgdGhpcy5fYXJlYSA9IHRoaXMuZ2V0QXJlYSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYXJlYTtcbiAgfVxuICBnZXRBcmVhKCkge1xuICAgIGlmICghdGhpcy5pc0Nsb3NlZCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGNvbnN0IHsgdmVydGljZXMgfSA9IHRoaXM7XG4gICAgbGV0IGFyZWEgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gdmVydGljZXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBjb25zdCBjdXJyID0gdmVydGljZXNbaV07XG4gICAgICBjb25zdCBuZXh0ID0gdmVydGljZXNbKGkgKyAxKSAlIG5dO1xuICAgICAgYXJlYSArPSBjdXJyLnggKiBuZXh0LnkgLSBuZXh0LnggKiBjdXJyLnk7XG4gICAgfVxuICAgIHJldHVybiBhcmVhIC8gMjtcbiAgfVxuICB0b1NpbXBsZVN2Z1BhdGgoKSB7XG4gICAgbGV0IHBhdGggPSBcIlwiO1xuICAgIGNvbnN0IHsgdmVydGljZXMgfSA9IHRoaXM7XG4gICAgY29uc3QgbiA9IHZlcnRpY2VzLmxlbmd0aDtcbiAgICBpZiAobiA9PT0gMClcbiAgICAgIHJldHVybiBwYXRoO1xuICAgIHBhdGggKz0gYE0ke3ZlcnRpY2VzWzBdLnh9LCR7dmVydGljZXNbMF0ueX1gO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbjsgaSsrKSB7XG4gICAgICBwYXRoICs9IGBMJHt2ZXJ0aWNlc1tpXS54fSwke3ZlcnRpY2VzW2ldLnl9YDtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNDbG9zZWQpIHtcbiAgICAgIHBhdGggKz0gXCJaXCI7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xuICB9XG4gIF9sZW5ndGg7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgbGVuZ3RoKCkge1xuICAgIGlmICh0aGlzLl9sZW5ndGgpXG4gICAgICByZXR1cm4gdGhpcy5fbGVuZ3RoO1xuICAgIHRoaXMuX2xlbmd0aCA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgcmV0dXJuIHRoaXMuX2xlbmd0aDtcbiAgfVxuICBnZXRMZW5ndGgoKSB7XG4gICAgY29uc3QgeyB2ZXJ0aWNlcyB9ID0gdGhpcztcbiAgICBsZXQgbjEsIHAxID0gdmVydGljZXNbMF0sIGxlbmd0aCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbjEgPSB2ZXJ0aWNlc1tpXTtcbiAgICAgIGxlbmd0aCArPSBWZWMuRGlzdDIocDEsIG4xKTtcbiAgICAgIHAxID0gbjE7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLnNxcnQobGVuZ3RoKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgR2VvbWV0cnkyZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdlb21ldHJ5MmQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Group2d: () => (/* binding */ Group2d)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n\n\n\nclass Group2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__.Geometry2d {\n  children = [];\n  ignoredChildren = [];\n  constructor(config) {\n    super({ ...config, isClosed: true, isFilled: false });\n    for (const child of config.children) {\n      if (child.ignore) {\n        this.ignoredChildren.push(child);\n      } else {\n        this.children.push(child);\n      }\n    }\n    if (this.children.length === 0)\n      throw Error(\"Group2d must have at least one child\");\n  }\n  getVertices() {\n    return this.children.filter((c) => !c.isLabel).flatMap((c) => c.vertices);\n  }\n  nearestPoint(point) {\n    let dist = Infinity;\n    let nearest;\n    const { children } = this;\n    if (children.length === 0) {\n      throw Error(\"no children\");\n    }\n    let p;\n    let d;\n    for (const child of children) {\n      p = child.nearestPoint(point);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(p, point);\n      if (d < dist) {\n        dist = d;\n        nearest = p;\n      }\n    }\n    if (!nearest)\n      throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  distanceToPoint(point, hitInside = false) {\n    return Math.min(...this.children.map((c, i) => c.distanceToPoint(point, hitInside || i > 0)));\n  }\n  hitTestPoint(point, margin, hitInside) {\n    return !!this.children.filter((c) => !c.isLabel).find((c) => c.hitTestPoint(point, margin, hitInside));\n  }\n  hitTestLineSegment(A, B, zoom) {\n    return !!this.children.filter((c) => !c.isLabel).find((c) => c.hitTestLineSegment(A, B, zoom));\n  }\n  getArea() {\n    return this.children[0].area;\n  }\n  toSimpleSvgPath() {\n    let path = \"\";\n    for (const child of this.children) {\n      path += child.toSimpleSvgPath();\n    }\n    const corners = _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box.FromPoints(this.vertices).corners;\n    for (let i = 0, n = corners.length; i < n; i++) {\n      const corner = corners[i];\n      const prevCorner = corners[(i - 1 + n) % n];\n      const prevDist = corner.dist(prevCorner);\n      const nextCorner = corners[(i + 1) % n];\n      const nextDist = corner.dist(nextCorner);\n      const A = corner.clone().lrp(prevCorner, 4 / prevDist);\n      const B = corner;\n      const C = corner.clone().lrp(nextCorner, 4 / nextDist);\n      path += `M${A.x},${A.y} L${B.x},${B.y} L${C.x},${C.y} `;\n    }\n    return path;\n  }\n  getLength() {\n    return this.children.reduce((a, c) => c.isLabel ? a : a + c.length, 0);\n  }\n  getSvgPathData() {\n    return this.children.map((c, i) => c.isLabel ? \"\" : c.getSvgPathData(i === 0)).join(\" \");\n  }\n}\n\n//# sourceMappingURL=Group2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvR3JvdXAyZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNBO0FBQ2E7QUFDOUMsc0JBQXNCLHVEQUFVO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLFlBQVksNENBQTRDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlDQUFHO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix5Q0FBRztBQUN2Qix3Q0FBd0MsT0FBTztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLElBQUksR0FBRyxLQUFLLEdBQUcsSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLEdBQUcsS0FBSztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvR3JvdXAyZC5tanM/N2IzZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3ggfSBmcm9tIFwiLi4vQm94Lm1qc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uL1ZlYy5tanNcIjtcbmltcG9ydCB7IEdlb21ldHJ5MmQgfSBmcm9tIFwiLi9HZW9tZXRyeTJkLm1qc1wiO1xuY2xhc3MgR3JvdXAyZCBleHRlbmRzIEdlb21ldHJ5MmQge1xuICBjaGlsZHJlbiA9IFtdO1xuICBpZ25vcmVkQ2hpbGRyZW4gPSBbXTtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgc3VwZXIoeyAuLi5jb25maWcsIGlzQ2xvc2VkOiB0cnVlLCBpc0ZpbGxlZDogZmFsc2UgfSk7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBjb25maWcuY2hpbGRyZW4pIHtcbiAgICAgIGlmIChjaGlsZC5pZ25vcmUpIHtcbiAgICAgICAgdGhpcy5pZ25vcmVkQ2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5jaGlsZHJlbi5sZW5ndGggPT09IDApXG4gICAgICB0aHJvdyBFcnJvcihcIkdyb3VwMmQgbXVzdCBoYXZlIGF0IGxlYXN0IG9uZSBjaGlsZFwiKTtcbiAgfVxuICBnZXRWZXJ0aWNlcygpIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5maWx0ZXIoKGMpID0+ICFjLmlzTGFiZWwpLmZsYXRNYXAoKGMpID0+IGMudmVydGljZXMpO1xuICB9XG4gIG5lYXJlc3RQb2ludChwb2ludCkge1xuICAgIGxldCBkaXN0ID0gSW5maW5pdHk7XG4gICAgbGV0IG5lYXJlc3Q7XG4gICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gdGhpcztcbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBFcnJvcihcIm5vIGNoaWxkcmVuXCIpO1xuICAgIH1cbiAgICBsZXQgcDtcbiAgICBsZXQgZDtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XG4gICAgICBwID0gY2hpbGQubmVhcmVzdFBvaW50KHBvaW50KTtcbiAgICAgIGQgPSBWZWMuRGlzdDIocCwgcG9pbnQpO1xuICAgICAgaWYgKGQgPCBkaXN0KSB7XG4gICAgICAgIGRpc3QgPSBkO1xuICAgICAgICBuZWFyZXN0ID0gcDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuZWFyZXN0KVxuICAgICAgdGhyb3cgRXJyb3IoXCJuZWFyZXN0IHBvaW50IG5vdCBmb3VuZFwiKTtcbiAgICByZXR1cm4gbmVhcmVzdDtcbiAgfVxuICBkaXN0YW5jZVRvUG9pbnQocG9pbnQsIGhpdEluc2lkZSA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIE1hdGgubWluKC4uLnRoaXMuY2hpbGRyZW4ubWFwKChjLCBpKSA9PiBjLmRpc3RhbmNlVG9Qb2ludChwb2ludCwgaGl0SW5zaWRlIHx8IGkgPiAwKSkpO1xuICB9XG4gIGhpdFRlc3RQb2ludChwb2ludCwgbWFyZ2luLCBoaXRJbnNpZGUpIHtcbiAgICByZXR1cm4gISF0aGlzLmNoaWxkcmVuLmZpbHRlcigoYykgPT4gIWMuaXNMYWJlbCkuZmluZCgoYykgPT4gYy5oaXRUZXN0UG9pbnQocG9pbnQsIG1hcmdpbiwgaGl0SW5zaWRlKSk7XG4gIH1cbiAgaGl0VGVzdExpbmVTZWdtZW50KEEsIEIsIHpvb20pIHtcbiAgICByZXR1cm4gISF0aGlzLmNoaWxkcmVuLmZpbHRlcigoYykgPT4gIWMuaXNMYWJlbCkuZmluZCgoYykgPT4gYy5oaXRUZXN0TGluZVNlZ21lbnQoQSwgQiwgem9vbSkpO1xuICB9XG4gIGdldEFyZWEoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5bMF0uYXJlYTtcbiAgfVxuICB0b1NpbXBsZVN2Z1BhdGgoKSB7XG4gICAgbGV0IHBhdGggPSBcIlwiO1xuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbikge1xuICAgICAgcGF0aCArPSBjaGlsZC50b1NpbXBsZVN2Z1BhdGgoKTtcbiAgICB9XG4gICAgY29uc3QgY29ybmVycyA9IEJveC5Gcm9tUG9pbnRzKHRoaXMudmVydGljZXMpLmNvcm5lcnM7XG4gICAgZm9yIChsZXQgaSA9IDAsIG4gPSBjb3JuZXJzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgY29uc3QgY29ybmVyID0gY29ybmVyc1tpXTtcbiAgICAgIGNvbnN0IHByZXZDb3JuZXIgPSBjb3JuZXJzWyhpIC0gMSArIG4pICUgbl07XG4gICAgICBjb25zdCBwcmV2RGlzdCA9IGNvcm5lci5kaXN0KHByZXZDb3JuZXIpO1xuICAgICAgY29uc3QgbmV4dENvcm5lciA9IGNvcm5lcnNbKGkgKyAxKSAlIG5dO1xuICAgICAgY29uc3QgbmV4dERpc3QgPSBjb3JuZXIuZGlzdChuZXh0Q29ybmVyKTtcbiAgICAgIGNvbnN0IEEgPSBjb3JuZXIuY2xvbmUoKS5scnAocHJldkNvcm5lciwgNCAvIHByZXZEaXN0KTtcbiAgICAgIGNvbnN0IEIgPSBjb3JuZXI7XG4gICAgICBjb25zdCBDID0gY29ybmVyLmNsb25lKCkubHJwKG5leHRDb3JuZXIsIDQgLyBuZXh0RGlzdCk7XG4gICAgICBwYXRoICs9IGBNJHtBLnh9LCR7QS55fSBMJHtCLnh9LCR7Qi55fSBMJHtDLnh9LCR7Qy55fSBgO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aDtcbiAgfVxuICBnZXRMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4ucmVkdWNlKChhLCBjKSA9PiBjLmlzTGFiZWwgPyBhIDogYSArIGMubGVuZ3RoLCAwKTtcbiAgfVxuICBnZXRTdmdQYXRoRGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5tYXAoKGMsIGkpID0+IGMuaXNMYWJlbCA/IFwiXCIgOiBjLmdldFN2Z1BhdGhEYXRhKGkgPT09IDApKS5qb2luKFwiIFwiKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgR3JvdXAyZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdyb3VwMmQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Group2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Point2d.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Point2d.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Point2d: () => (/* binding */ Point2d)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n\n\nclass Point2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_1__.Geometry2d {\n  point;\n  constructor(config) {\n    super({ ...config, isClosed: true, isFilled: true });\n    const { point } = config;\n    this.point = point;\n  }\n  getVertices() {\n    return [this.point];\n  }\n  nearestPoint() {\n    return this.point;\n  }\n  hitTestLineSegment(A, B, margin) {\n    return _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.DistanceToLineSegment(A, B, this.point) < margin;\n  }\n  getSvgPathData() {\n    const { point } = this;\n    return `M${point.toFixed()}`;\n  }\n}\n\n//# sourceMappingURL=Point2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUG9pbnQyZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBQ2E7QUFDOUMsc0JBQXNCLHVEQUFVO0FBQ2hDO0FBQ0E7QUFDQSxZQUFZLDJDQUEyQztBQUN2RCxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5Q0FBRztBQUNkO0FBQ0E7QUFDQSxZQUFZLFFBQVE7QUFDcEIsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUG9pbnQyZC5tanM/NjMwZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vVmVjLm1qc1wiO1xuaW1wb3J0IHsgR2VvbWV0cnkyZCB9IGZyb20gXCIuL0dlb21ldHJ5MmQubWpzXCI7XG5jbGFzcyBQb2ludDJkIGV4dGVuZHMgR2VvbWV0cnkyZCB7XG4gIHBvaW50O1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7IC4uLmNvbmZpZywgaXNDbG9zZWQ6IHRydWUsIGlzRmlsbGVkOiB0cnVlIH0pO1xuICAgIGNvbnN0IHsgcG9pbnQgfSA9IGNvbmZpZztcbiAgICB0aGlzLnBvaW50ID0gcG9pbnQ7XG4gIH1cbiAgZ2V0VmVydGljZXMoKSB7XG4gICAgcmV0dXJuIFt0aGlzLnBvaW50XTtcbiAgfVxuICBuZWFyZXN0UG9pbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMucG9pbnQ7XG4gIH1cbiAgaGl0VGVzdExpbmVTZWdtZW50KEEsIEIsIG1hcmdpbikge1xuICAgIHJldHVybiBWZWMuRGlzdGFuY2VUb0xpbmVTZWdtZW50KEEsIEIsIHRoaXMucG9pbnQpIDwgbWFyZ2luO1xuICB9XG4gIGdldFN2Z1BhdGhEYXRhKCkge1xuICAgIGNvbnN0IHsgcG9pbnQgfSA9IHRoaXM7XG4gICAgcmV0dXJuIGBNJHtwb2ludC50b0ZpeGVkKCl9YDtcbiAgfVxufVxuZXhwb3J0IHtcbiAgUG9pbnQyZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvaW50MmQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Point2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polygon2d.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polygon2d.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Polygon2d: () => (/* binding */ Polygon2d)\n/* harmony export */ });\n/* harmony import */ var _Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Polyline2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs\");\n\nclass Polygon2d extends _Polyline2d_mjs__WEBPACK_IMPORTED_MODULE_0__.Polyline2d {\n  constructor(config) {\n    super({ ...config });\n    this.isClosed = true;\n  }\n}\n\n//# sourceMappingURL=Polygon2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUG9seWdvbjJkLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE4QztBQUM5Qyx3QkFBd0IsdURBQVU7QUFDbEM7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9Qb2x5Z29uMmQubWpzPzBkMjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUG9seWxpbmUyZCB9IGZyb20gXCIuL1BvbHlsaW5lMmQubWpzXCI7XG5jbGFzcyBQb2x5Z29uMmQgZXh0ZW5kcyBQb2x5bGluZTJkIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgc3VwZXIoeyAuLi5jb25maWcgfSk7XG4gICAgdGhpcy5pc0Nsb3NlZCA9IHRydWU7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIFBvbHlnb24yZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvbHlnb24yZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polygon2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Polyline2d: () => (/* binding */ Polyline2d)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Edge2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n\n\n\nclass Polyline2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_2__.Geometry2d {\n  points;\n  constructor(config) {\n    super({ isClosed: false, isFilled: false, ...config });\n    const { points } = config;\n    this.points = points;\n  }\n  _segments;\n  // eslint-disable-next-line no-restricted-syntax\n  get segments() {\n    if (!this._segments) {\n      this._segments = [];\n      const { vertices } = this;\n      for (let i = 0, n = vertices.length - 1; i < n; i++) {\n        const start = vertices[i];\n        const end = vertices[i + 1];\n        this._segments.push(new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_1__.Edge2d({ start, end }));\n      }\n      if (this.isClosed) {\n        this._segments.push(new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_1__.Edge2d({ start: vertices[vertices.length - 1], end: vertices[0] }));\n      }\n    }\n    return this._segments;\n  }\n  getLength() {\n    return this.segments.reduce((acc, segment) => acc + segment.length, 0);\n  }\n  getVertices() {\n    return this.points;\n  }\n  nearestPoint(A) {\n    const { segments } = this;\n    let nearest = this.points[0];\n    let dist = Infinity;\n    let p;\n    let d;\n    for (let i = 0; i < segments.length; i++) {\n      p = segments[i].nearestPoint(A);\n      d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist2(p, A);\n      if (d < dist) {\n        nearest = p;\n        dist = d;\n      }\n    }\n    if (!nearest)\n      throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  hitTestLineSegment(A, B, distance = 0) {\n    const { segments } = this;\n    for (let i = 0, n = segments.length; i < n; i++) {\n      if (segments[i].hitTestLineSegment(A, B, distance)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  getSvgPathData() {\n    const { vertices } = this;\n    if (vertices.length < 2)\n      return \"\";\n    return vertices.reduce((acc, vertex, i) => {\n      if (i === 0)\n        return `M ${vertex.x} ${vertex.y}`;\n      return `${acc} L ${vertex.x} ${vertex.y}`;\n    }, \"\");\n  }\n}\n\n//# sourceMappingURL=Polyline2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUG9seWxpbmUyZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQUNLO0FBQ1E7QUFDOUMseUJBQXlCLHVEQUFVO0FBQ25DO0FBQ0E7QUFDQSxZQUFZLDZDQUE2QztBQUN6RCxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFdBQVc7QUFDekIsK0NBQStDLE9BQU87QUFDdEQ7QUFDQTtBQUNBLGdDQUFnQywrQ0FBTSxHQUFHLFlBQVk7QUFDckQ7QUFDQTtBQUNBLGdDQUFnQywrQ0FBTSxHQUFHLHdEQUF3RDtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFCQUFxQjtBQUN6QztBQUNBLFVBQVUseUNBQUc7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2Qix5Q0FBeUMsT0FBTztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVLEVBQUUsU0FBUztBQUN6QyxnQkFBZ0IsS0FBSyxJQUFJLFVBQVUsRUFBRSxTQUFTO0FBQzlDLEtBQUs7QUFDTDtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9Qb2x5bGluZTJkLm1qcz9hZDNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBFZGdlMmQgfSBmcm9tIFwiLi9FZGdlMmQubWpzXCI7XG5pbXBvcnQgeyBHZW9tZXRyeTJkIH0gZnJvbSBcIi4vR2VvbWV0cnkyZC5tanNcIjtcbmNsYXNzIFBvbHlsaW5lMmQgZXh0ZW5kcyBHZW9tZXRyeTJkIHtcbiAgcG9pbnRzO1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7IGlzQ2xvc2VkOiBmYWxzZSwgaXNGaWxsZWQ6IGZhbHNlLCAuLi5jb25maWcgfSk7XG4gICAgY29uc3QgeyBwb2ludHMgfSA9IGNvbmZpZztcbiAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgfVxuICBfc2VnbWVudHM7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgc2VnbWVudHMoKSB7XG4gICAgaWYgKCF0aGlzLl9zZWdtZW50cykge1xuICAgICAgdGhpcy5fc2VnbWVudHMgPSBbXTtcbiAgICAgIGNvbnN0IHsgdmVydGljZXMgfSA9IHRoaXM7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbiA9IHZlcnRpY2VzLmxlbmd0aCAtIDE7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSB2ZXJ0aWNlc1tpXTtcbiAgICAgICAgY29uc3QgZW5kID0gdmVydGljZXNbaSArIDFdO1xuICAgICAgICB0aGlzLl9zZWdtZW50cy5wdXNoKG5ldyBFZGdlMmQoeyBzdGFydCwgZW5kIH0pKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzQ2xvc2VkKSB7XG4gICAgICAgIHRoaXMuX3NlZ21lbnRzLnB1c2gobmV3IEVkZ2UyZCh7IHN0YXJ0OiB2ZXJ0aWNlc1t2ZXJ0aWNlcy5sZW5ndGggLSAxXSwgZW5kOiB2ZXJ0aWNlc1swXSB9KSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zZWdtZW50cztcbiAgfVxuICBnZXRMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2VnbWVudHMucmVkdWNlKChhY2MsIHNlZ21lbnQpID0+IGFjYyArIHNlZ21lbnQubGVuZ3RoLCAwKTtcbiAgfVxuICBnZXRWZXJ0aWNlcygpIHtcbiAgICByZXR1cm4gdGhpcy5wb2ludHM7XG4gIH1cbiAgbmVhcmVzdFBvaW50KEEpIHtcbiAgICBjb25zdCB7IHNlZ21lbnRzIH0gPSB0aGlzO1xuICAgIGxldCBuZWFyZXN0ID0gdGhpcy5wb2ludHNbMF07XG4gICAgbGV0IGRpc3QgPSBJbmZpbml0eTtcbiAgICBsZXQgcDtcbiAgICBsZXQgZDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwID0gc2VnbWVudHNbaV0ubmVhcmVzdFBvaW50KEEpO1xuICAgICAgZCA9IFZlYy5EaXN0MihwLCBBKTtcbiAgICAgIGlmIChkIDwgZGlzdCkge1xuICAgICAgICBuZWFyZXN0ID0gcDtcbiAgICAgICAgZGlzdCA9IGQ7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghbmVhcmVzdClcbiAgICAgIHRocm93IEVycm9yKFwibmVhcmVzdCBwb2ludCBub3QgZm91bmRcIik7XG4gICAgcmV0dXJuIG5lYXJlc3Q7XG4gIH1cbiAgaGl0VGVzdExpbmVTZWdtZW50KEEsIEIsIGRpc3RhbmNlID0gMCkge1xuICAgIGNvbnN0IHsgc2VnbWVudHMgfSA9IHRoaXM7XG4gICAgZm9yIChsZXQgaSA9IDAsIG4gPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIGlmIChzZWdtZW50c1tpXS5oaXRUZXN0TGluZVNlZ21lbnQoQSwgQiwgZGlzdGFuY2UpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZ2V0U3ZnUGF0aERhdGEoKSB7XG4gICAgY29uc3QgeyB2ZXJ0aWNlcyB9ID0gdGhpcztcbiAgICBpZiAodmVydGljZXMubGVuZ3RoIDwgMilcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIHJldHVybiB2ZXJ0aWNlcy5yZWR1Y2UoKGFjYywgdmVydGV4LCBpKSA9PiB7XG4gICAgICBpZiAoaSA9PT0gMClcbiAgICAgICAgcmV0dXJuIGBNICR7dmVydGV4Lnh9ICR7dmVydGV4Lnl9YDtcbiAgICAgIHJldHVybiBgJHthY2N9IEwgJHt2ZXJ0ZXgueH0gJHt2ZXJ0ZXgueX1gO1xuICAgIH0sIFwiXCIpO1xuICB9XG59XG5leHBvcnQge1xuICBQb2x5bGluZTJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9seWxpbmUyZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polyline2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Rectangle2d.mjs":
/*!**************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Rectangle2d.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Rectangle2d: () => (/* binding */ Rectangle2d)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _Polygon2d_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Polygon2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Polygon2d.mjs\");\n\n\n\nclass Rectangle2d extends _Polygon2d_mjs__WEBPACK_IMPORTED_MODULE_2__.Polygon2d {\n  x;\n  y;\n  w;\n  h;\n  constructor(config) {\n    const { x = 0, y = 0, width, height } = config;\n    super({\n      ...config,\n      points: [\n        new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(x, y),\n        new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(x + width, y),\n        new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(x + width, y + height),\n        new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(x, y + height)\n      ]\n    });\n    this.x = x;\n    this.y = y;\n    this.w = width;\n    this.h = height;\n  }\n  getBounds() {\n    return new _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box(this.x, this.y, this.w, this.h);\n  }\n  getSvgPathData() {\n    const { x, y, w, h } = this;\n    return `M${x},${y} h${w} v${h} h-${w}z`;\n  }\n}\n\n//# sourceMappingURL=Rectangle2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvUmVjdGFuZ2xlMmQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUM7QUFDQTtBQUNXO0FBQzVDLDBCQUEwQixxREFBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4QkFBOEI7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5Q0FBRztBQUNmLFlBQVkseUNBQUc7QUFDZixZQUFZLHlDQUFHO0FBQ2YsWUFBWSx5Q0FBRztBQUNmO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QixlQUFlLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxFQUFFO0FBQ3pDO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL2dlb21ldHJ5L1JlY3RhbmdsZTJkLm1qcz9kZjYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJveCB9IGZyb20gXCIuLi9Cb3gubWpzXCI7XG5pbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vVmVjLm1qc1wiO1xuaW1wb3J0IHsgUG9seWdvbjJkIH0gZnJvbSBcIi4vUG9seWdvbjJkLm1qc1wiO1xuY2xhc3MgUmVjdGFuZ2xlMmQgZXh0ZW5kcyBQb2x5Z29uMmQge1xuICB4O1xuICB5O1xuICB3O1xuICBoO1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBjb25zdCB7IHggPSAwLCB5ID0gMCwgd2lkdGgsIGhlaWdodCB9ID0gY29uZmlnO1xuICAgIHN1cGVyKHtcbiAgICAgIC4uLmNvbmZpZyxcbiAgICAgIHBvaW50czogW1xuICAgICAgICBuZXcgVmVjKHgsIHkpLFxuICAgICAgICBuZXcgVmVjKHggKyB3aWR0aCwgeSksXG4gICAgICAgIG5ldyBWZWMoeCArIHdpZHRoLCB5ICsgaGVpZ2h0KSxcbiAgICAgICAgbmV3IFZlYyh4LCB5ICsgaGVpZ2h0KVxuICAgICAgXVxuICAgIH0pO1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLncgPSB3aWR0aDtcbiAgICB0aGlzLmggPSBoZWlnaHQ7XG4gIH1cbiAgZ2V0Qm91bmRzKCkge1xuICAgIHJldHVybiBuZXcgQm94KHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCk7XG4gIH1cbiAgZ2V0U3ZnUGF0aERhdGEoKSB7XG4gICAgY29uc3QgeyB4LCB5LCB3LCBoIH0gPSB0aGlzO1xuICAgIHJldHVybiBgTSR7eH0sJHt5fSBoJHt3fSB2JHtofSBoLSR7d316YDtcbiAgfVxufVxuZXhwb3J0IHtcbiAgUmVjdGFuZ2xlMmRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWN0YW5nbGUyZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Rectangle2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Stadium2d.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Stadium2d.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Stadium2d: () => (/* binding */ Stadium2d)\n/* harmony export */ });\n/* harmony import */ var _Box_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Box.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Box.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _Arc2d_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Arc2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Arc2d.mjs\");\n/* harmony import */ var _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Edge2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Edge2d.mjs\");\n/* harmony import */ var _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Geometry2d.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Geometry2d.mjs\");\n\n\n\n\n\n\nclass Stadium2d extends _Geometry2d_mjs__WEBPACK_IMPORTED_MODULE_5__.Geometry2d {\n  constructor(config) {\n    super({ ...config, isClosed: true });\n    this.config = config;\n    const { width: w, height: h } = config;\n    this.w = w;\n    this.h = h;\n    if (h > w) {\n      const r = w / 2;\n      this.a = new _Arc2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Arc2d({\n        start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(0, r),\n        end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w, r),\n        center: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w / 2, r),\n        sweepFlag: 1,\n        largeArcFlag: 1\n      });\n      this.b = new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Edge2d({ start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w, r), end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w, h - r) });\n      this.c = new _Arc2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Arc2d({\n        start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w, h - r),\n        end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(0, h - r),\n        center: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w / 2, h - r),\n        sweepFlag: 1,\n        largeArcFlag: 1\n      });\n      this.d = new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Edge2d({ start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(0, h - r), end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(0, r) });\n    } else {\n      const r = h / 2;\n      this.a = new _Arc2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Arc2d({\n        start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(r, h),\n        end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(r, 0),\n        center: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(r, r),\n        sweepFlag: 1,\n        largeArcFlag: 1\n      });\n      this.b = new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Edge2d({ start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(r, 0), end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w - r, 0) });\n      this.c = new _Arc2d_mjs__WEBPACK_IMPORTED_MODULE_3__.Arc2d({\n        start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w - r, 0),\n        end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w - r, h),\n        center: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w - r, r),\n        sweepFlag: 1,\n        largeArcFlag: 1\n      });\n      this.d = new _Edge2d_mjs__WEBPACK_IMPORTED_MODULE_4__.Edge2d({ start: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(w - r, h), end: new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(r, h) });\n    }\n  }\n  w;\n  h;\n  a;\n  b;\n  c;\n  d;\n  nearestPoint(A) {\n    let nearest;\n    let dist = Infinity;\n    let _d;\n    let p;\n    const { a, b, c, d } = this;\n    for (const part of [a, b, c, d]) {\n      p = part.nearestPoint(A);\n      _d = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Dist2(p, A);\n      if (_d < dist) {\n        nearest = p;\n        dist = _d;\n      }\n    }\n    if (!nearest)\n      throw Error(\"nearest point not found\");\n    return nearest;\n  }\n  hitTestLineSegment(A, B) {\n    const { a, b, c, d } = this;\n    return [a, b, c, d].some((edge) => edge.hitTestLineSegment(A, B));\n  }\n  getVertices() {\n    const { a, b, c, d } = this;\n    return [a, b, c, d].reduce((a2, p) => {\n      a2.push(...p.vertices);\n      return a2;\n    }, []);\n  }\n  getBounds() {\n    return new _Box_mjs__WEBPACK_IMPORTED_MODULE_0__.Box(0, 0, this.w, this.h);\n  }\n  getLength() {\n    const { h, w } = this;\n    if (h > w)\n      return (_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.PI * (w / 2) + (h - w)) * 2;\n    else\n      return (_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.PI * (h / 2) + (w - h)) * 2;\n  }\n  getSvgPathData() {\n    const { a, b, c, d } = this;\n    return [a, b, c, d].map((p, i) => p.getSvgPathData(i === 0)).join(\" \") + \" Z\";\n  }\n}\n\n//# sourceMappingURL=Stadium2d.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvU3RhZGl1bTJkLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWlDO0FBQ0E7QUFDQztBQUNFO0FBQ0U7QUFDUTtBQUM5Qyx3QkFBd0IsdURBQVU7QUFDbEM7QUFDQSxZQUFZLDJCQUEyQjtBQUN2QztBQUNBLFlBQVksc0JBQXNCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDZDQUFLO0FBQ3hCLG1CQUFtQix5Q0FBRztBQUN0QixpQkFBaUIseUNBQUc7QUFDcEIsb0JBQW9CLHlDQUFHO0FBQ3ZCO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsbUJBQW1CLCtDQUFNLEdBQUcsV0FBVyx5Q0FBRyxpQkFBaUIseUNBQUcsWUFBWTtBQUMxRSxtQkFBbUIsNkNBQUs7QUFDeEIsbUJBQW1CLHlDQUFHO0FBQ3RCLGlCQUFpQix5Q0FBRztBQUNwQixvQkFBb0IseUNBQUc7QUFDdkI7QUFDQTtBQUNBLE9BQU87QUFDUCxtQkFBbUIsK0NBQU0sR0FBRyxXQUFXLHlDQUFHLHFCQUFxQix5Q0FBRyxRQUFRO0FBQzFFLE1BQU07QUFDTjtBQUNBLG1CQUFtQiw2Q0FBSztBQUN4QixtQkFBbUIseUNBQUc7QUFDdEIsaUJBQWlCLHlDQUFHO0FBQ3BCLG9CQUFvQix5Q0FBRztBQUN2QjtBQUNBO0FBQ0EsT0FBTztBQUNQLG1CQUFtQiwrQ0FBTSxHQUFHLFdBQVcseUNBQUcsaUJBQWlCLHlDQUFHLFlBQVk7QUFDMUUsbUJBQW1CLDZDQUFLO0FBQ3hCLG1CQUFtQix5Q0FBRztBQUN0QixpQkFBaUIseUNBQUc7QUFDcEIsb0JBQW9CLHlDQUFHO0FBQ3ZCO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsbUJBQW1CLCtDQUFNLEdBQUcsV0FBVyx5Q0FBRyxxQkFBcUIseUNBQUcsUUFBUTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0EsV0FBVyx5Q0FBRztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBLGNBQWMsMENBQUU7QUFDaEI7QUFDQSxjQUFjLDBDQUFFO0FBQ2hCO0FBQ0E7QUFDQSxZQUFZLGFBQWE7QUFDekI7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvcHJpbWl0aXZlcy9nZW9tZXRyeS9TdGFkaXVtMmQubWpzPzY0OGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm94IH0gZnJvbSBcIi4uL0JveC5tanNcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCIuLi9WZWMubWpzXCI7XG5pbXBvcnQgeyBQSSB9IGZyb20gXCIuLi91dGlscy5tanNcIjtcbmltcG9ydCB7IEFyYzJkIH0gZnJvbSBcIi4vQXJjMmQubWpzXCI7XG5pbXBvcnQgeyBFZGdlMmQgfSBmcm9tIFwiLi9FZGdlMmQubWpzXCI7XG5pbXBvcnQgeyBHZW9tZXRyeTJkIH0gZnJvbSBcIi4vR2VvbWV0cnkyZC5tanNcIjtcbmNsYXNzIFN0YWRpdW0yZCBleHRlbmRzIEdlb21ldHJ5MmQge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcih7IC4uLmNvbmZpZywgaXNDbG9zZWQ6IHRydWUgfSk7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgY29uc3QgeyB3aWR0aDogdywgaGVpZ2h0OiBoIH0gPSBjb25maWc7XG4gICAgdGhpcy53ID0gdztcbiAgICB0aGlzLmggPSBoO1xuICAgIGlmIChoID4gdykge1xuICAgICAgY29uc3QgciA9IHcgLyAyO1xuICAgICAgdGhpcy5hID0gbmV3IEFyYzJkKHtcbiAgICAgICAgc3RhcnQ6IG5ldyBWZWMoMCwgciksXG4gICAgICAgIGVuZDogbmV3IFZlYyh3LCByKSxcbiAgICAgICAgY2VudGVyOiBuZXcgVmVjKHcgLyAyLCByKSxcbiAgICAgICAgc3dlZXBGbGFnOiAxLFxuICAgICAgICBsYXJnZUFyY0ZsYWc6IDFcbiAgICAgIH0pO1xuICAgICAgdGhpcy5iID0gbmV3IEVkZ2UyZCh7IHN0YXJ0OiBuZXcgVmVjKHcsIHIpLCBlbmQ6IG5ldyBWZWModywgaCAtIHIpIH0pO1xuICAgICAgdGhpcy5jID0gbmV3IEFyYzJkKHtcbiAgICAgICAgc3RhcnQ6IG5ldyBWZWModywgaCAtIHIpLFxuICAgICAgICBlbmQ6IG5ldyBWZWMoMCwgaCAtIHIpLFxuICAgICAgICBjZW50ZXI6IG5ldyBWZWModyAvIDIsIGggLSByKSxcbiAgICAgICAgc3dlZXBGbGFnOiAxLFxuICAgICAgICBsYXJnZUFyY0ZsYWc6IDFcbiAgICAgIH0pO1xuICAgICAgdGhpcy5kID0gbmV3IEVkZ2UyZCh7IHN0YXJ0OiBuZXcgVmVjKDAsIGggLSByKSwgZW5kOiBuZXcgVmVjKDAsIHIpIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByID0gaCAvIDI7XG4gICAgICB0aGlzLmEgPSBuZXcgQXJjMmQoe1xuICAgICAgICBzdGFydDogbmV3IFZlYyhyLCBoKSxcbiAgICAgICAgZW5kOiBuZXcgVmVjKHIsIDApLFxuICAgICAgICBjZW50ZXI6IG5ldyBWZWMociwgciksXG4gICAgICAgIHN3ZWVwRmxhZzogMSxcbiAgICAgICAgbGFyZ2VBcmNGbGFnOiAxXG4gICAgICB9KTtcbiAgICAgIHRoaXMuYiA9IG5ldyBFZGdlMmQoeyBzdGFydDogbmV3IFZlYyhyLCAwKSwgZW5kOiBuZXcgVmVjKHcgLSByLCAwKSB9KTtcbiAgICAgIHRoaXMuYyA9IG5ldyBBcmMyZCh7XG4gICAgICAgIHN0YXJ0OiBuZXcgVmVjKHcgLSByLCAwKSxcbiAgICAgICAgZW5kOiBuZXcgVmVjKHcgLSByLCBoKSxcbiAgICAgICAgY2VudGVyOiBuZXcgVmVjKHcgLSByLCByKSxcbiAgICAgICAgc3dlZXBGbGFnOiAxLFxuICAgICAgICBsYXJnZUFyY0ZsYWc6IDFcbiAgICAgIH0pO1xuICAgICAgdGhpcy5kID0gbmV3IEVkZ2UyZCh7IHN0YXJ0OiBuZXcgVmVjKHcgLSByLCBoKSwgZW5kOiBuZXcgVmVjKHIsIGgpIH0pO1xuICAgIH1cbiAgfVxuICB3O1xuICBoO1xuICBhO1xuICBiO1xuICBjO1xuICBkO1xuICBuZWFyZXN0UG9pbnQoQSkge1xuICAgIGxldCBuZWFyZXN0O1xuICAgIGxldCBkaXN0ID0gSW5maW5pdHk7XG4gICAgbGV0IF9kO1xuICAgIGxldCBwO1xuICAgIGNvbnN0IHsgYSwgYiwgYywgZCB9ID0gdGhpcztcbiAgICBmb3IgKGNvbnN0IHBhcnQgb2YgW2EsIGIsIGMsIGRdKSB7XG4gICAgICBwID0gcGFydC5uZWFyZXN0UG9pbnQoQSk7XG4gICAgICBfZCA9IFZlYy5EaXN0MihwLCBBKTtcbiAgICAgIGlmIChfZCA8IGRpc3QpIHtcbiAgICAgICAgbmVhcmVzdCA9IHA7XG4gICAgICAgIGRpc3QgPSBfZDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuZWFyZXN0KVxuICAgICAgdGhyb3cgRXJyb3IoXCJuZWFyZXN0IHBvaW50IG5vdCBmb3VuZFwiKTtcbiAgICByZXR1cm4gbmVhcmVzdDtcbiAgfVxuICBoaXRUZXN0TGluZVNlZ21lbnQoQSwgQikge1xuICAgIGNvbnN0IHsgYSwgYiwgYywgZCB9ID0gdGhpcztcbiAgICByZXR1cm4gW2EsIGIsIGMsIGRdLnNvbWUoKGVkZ2UpID0+IGVkZ2UuaGl0VGVzdExpbmVTZWdtZW50KEEsIEIpKTtcbiAgfVxuICBnZXRWZXJ0aWNlcygpIHtcbiAgICBjb25zdCB7IGEsIGIsIGMsIGQgfSA9IHRoaXM7XG4gICAgcmV0dXJuIFthLCBiLCBjLCBkXS5yZWR1Y2UoKGEyLCBwKSA9PiB7XG4gICAgICBhMi5wdXNoKC4uLnAudmVydGljZXMpO1xuICAgICAgcmV0dXJuIGEyO1xuICAgIH0sIFtdKTtcbiAgfVxuICBnZXRCb3VuZHMoKSB7XG4gICAgcmV0dXJuIG5ldyBCb3goMCwgMCwgdGhpcy53LCB0aGlzLmgpO1xuICB9XG4gIGdldExlbmd0aCgpIHtcbiAgICBjb25zdCB7IGgsIHcgfSA9IHRoaXM7XG4gICAgaWYgKGggPiB3KVxuICAgICAgcmV0dXJuIChQSSAqICh3IC8gMikgKyAoaCAtIHcpKSAqIDI7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIChQSSAqIChoIC8gMikgKyAodyAtIGgpKSAqIDI7XG4gIH1cbiAgZ2V0U3ZnUGF0aERhdGEoKSB7XG4gICAgY29uc3QgeyBhLCBiLCBjLCBkIH0gPSB0aGlzO1xuICAgIHJldHVybiBbYSwgYiwgYywgZF0ubWFwKChwLCBpKSA9PiBwLmdldFN2Z1BhdGhEYXRhKGkgPT09IDApKS5qb2luKFwiIFwiKSArIFwiIFpcIjtcbiAgfVxufVxuZXhwb3J0IHtcbiAgU3RhZGl1bTJkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RhZGl1bTJkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/Stadium2d.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/geometry-constants.mjs":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/geometry-constants.mjs ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getVerticesCountForLength: () => (/* binding */ getVerticesCountForLength)\n/* harmony export */ });\nconst SPACING = 20;\nconst MIN_COUNT = 8;\nfunction getVerticesCountForLength(length, spacing = SPACING) {\n  return Math.max(MIN_COUNT, Math.ceil(length / spacing));\n}\n\n//# sourceMappingURL=geometry-constants.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvZ2VvbWV0cnktY29uc3RhbnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvZ2VvbWV0cnkvZ2VvbWV0cnktY29uc3RhbnRzLm1qcz80ZWY0Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNQQUNJTkcgPSAyMDtcbmNvbnN0IE1JTl9DT1VOVCA9IDg7XG5mdW5jdGlvbiBnZXRWZXJ0aWNlc0NvdW50Rm9yTGVuZ3RoKGxlbmd0aCwgc3BhY2luZyA9IFNQQUNJTkcpIHtcbiAgcmV0dXJuIE1hdGgubWF4KE1JTl9DT1VOVCwgTWF0aC5jZWlsKGxlbmd0aCAvIHNwYWNpbmcpKTtcbn1cbmV4cG9ydCB7XG4gIGdldFZlcnRpY2VzQ291bnRGb3JMZW5ndGhcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZW9tZXRyeS1jb25zdGFudHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/geometry/geometry-constants.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   intersectCircleCircle: () => (/* binding */ intersectCircleCircle),\n/* harmony export */   intersectCirclePolygon: () => (/* binding */ intersectCirclePolygon),\n/* harmony export */   intersectCirclePolyline: () => (/* binding */ intersectCirclePolyline),\n/* harmony export */   intersectLineSegmentCircle: () => (/* binding */ intersectLineSegmentCircle),\n/* harmony export */   intersectLineSegmentLineSegment: () => (/* binding */ intersectLineSegmentLineSegment),\n/* harmony export */   intersectLineSegmentPolygon: () => (/* binding */ intersectLineSegmentPolygon),\n/* harmony export */   intersectLineSegmentPolyline: () => (/* binding */ intersectLineSegmentPolyline),\n/* harmony export */   intersectPolygonBounds: () => (/* binding */ intersectPolygonBounds),\n/* harmony export */   intersectPolygonPolygon: () => (/* binding */ intersectPolygonPolygon),\n/* harmony export */   linesIntersect: () => (/* binding */ linesIntersect),\n/* harmony export */   polygonIntersectsPolyline: () => (/* binding */ polygonIntersectsPolyline),\n/* harmony export */   polygonsIntersect: () => (/* binding */ polygonsIntersect)\n/* harmony export */ });\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\n\nfunction intersectLineSegmentLineSegment(a1, a2, b1, b2) {\n  const ABx = a1.x - b1.x;\n  const ABy = a1.y - b1.y;\n  const BVx = b2.x - b1.x;\n  const BVy = b2.y - b1.y;\n  const AVx = a2.x - a1.x;\n  const AVy = a2.y - a1.y;\n  const ua_t = BVx * ABy - BVy * ABx;\n  const ub_t = AVx * ABy - AVy * ABx;\n  const u_b = BVy * AVx - BVx * AVy;\n  if (ua_t === 0 || ub_t === 0)\n    return null;\n  if (u_b === 0)\n    return null;\n  if (u_b !== 0) {\n    const ua = ua_t / u_b;\n    const ub = ub_t / u_b;\n    if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n      return _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.AddXY(a1, ua * AVx, ua * AVy);\n    }\n  }\n  return null;\n}\nfunction intersectLineSegmentCircle(a1, a2, c, r) {\n  const a = (a2.x - a1.x) * (a2.x - a1.x) + (a2.y - a1.y) * (a2.y - a1.y);\n  const b = 2 * ((a2.x - a1.x) * (a1.x - c.x) + (a2.y - a1.y) * (a1.y - c.y));\n  const cc = c.x * c.x + c.y * c.y + a1.x * a1.x + a1.y * a1.y - 2 * (c.x * a1.x + c.y * a1.y) - r * r;\n  const deter = b * b - 4 * a * cc;\n  if (deter < 0)\n    return null;\n  if (deter === 0)\n    return null;\n  const e = Math.sqrt(deter);\n  const u1 = (-b + e) / (2 * a);\n  const u2 = (-b - e) / (2 * a);\n  if ((u1 < 0 || u1 > 1) && (u2 < 0 || u2 > 1)) {\n    return null;\n  }\n  const result = [];\n  if (0 <= u1 && u1 <= 1)\n    result.push(_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Lrp(a1, a2, u1));\n  if (0 <= u2 && u2 <= 1)\n    result.push(_Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Lrp(a1, a2, u2));\n  if (result.length === 0)\n    return null;\n  return result;\n}\nfunction intersectLineSegmentPolyline(a1, a2, points) {\n  const result = [];\n  let segmentIntersection;\n  for (let i = 0, n = points.length - 1; i < n; i++) {\n    segmentIntersection = intersectLineSegmentLineSegment(a1, a2, points[i], points[i + 1]);\n    if (segmentIntersection)\n      result.push(segmentIntersection);\n  }\n  if (result.length === 0)\n    return null;\n  return result;\n}\nfunction intersectLineSegmentPolygon(a1, a2, points) {\n  const result = [];\n  let segmentIntersection;\n  for (let i = 1, n = points.length; i < n + 1; i++) {\n    segmentIntersection = intersectLineSegmentLineSegment(\n      a1,\n      a2,\n      points[i - 1],\n      points[i % points.length]\n    );\n    if (segmentIntersection)\n      result.push(segmentIntersection);\n  }\n  if (result.length === 0)\n    return null;\n  return result;\n}\nfunction intersectCircleCircle(c1, r1, c2, r2) {\n  let dx = c2.x - c1.x;\n  let dy = c2.y - c1.y;\n  const d = Math.sqrt(dx * dx + dy * dy), x = (d * d - r2 * r2 + r1 * r1) / (2 * d), y = Math.sqrt(r1 * r1 - x * x);\n  dx /= d;\n  dy /= d;\n  return [\n    new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(c1.x + dx * x - dy * y, c1.y + dy * x + dx * y),\n    new _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec(c1.x + dx * x + dy * y, c1.y + dy * x - dx * y)\n  ];\n}\nfunction intersectCirclePolygon(c, r, points) {\n  const result = [];\n  let a, b, int;\n  for (let i = 0, n = points.length; i < n; i++) {\n    a = points[i];\n    b = points[(i + 1) % points.length];\n    int = intersectLineSegmentCircle(a, b, c, r);\n    if (int)\n      result.push(...int);\n  }\n  if (result.length === 0)\n    return null;\n  return result;\n}\nfunction intersectCirclePolyline(c, r, points) {\n  const result = [];\n  let a, b, int;\n  for (let i = 1, n = points.length; i < n; i++) {\n    a = points[i - 1];\n    b = points[i];\n    int = intersectLineSegmentCircle(a, b, c, r);\n    if (int)\n      result.push(...int);\n  }\n  if (result.length === 0)\n    return null;\n  return result;\n}\nfunction intersectPolygonBounds(points, bounds) {\n  const result = [];\n  let segmentIntersection;\n  for (const side of bounds.sides) {\n    segmentIntersection = intersectLineSegmentPolygon(side[0], side[1], points);\n    if (segmentIntersection)\n      result.push(...segmentIntersection);\n  }\n  if (result.length === 0)\n    return null;\n  return result;\n}\nfunction ccw(A, B, C) {\n  return (C.y - A.y) * (B.x - A.x) > (B.y - A.y) * (C.x - A.x);\n}\nfunction linesIntersect(A, B, C, D) {\n  return ccw(A, C, D) !== ccw(B, C, D) && ccw(A, B, C) !== ccw(A, B, D);\n}\nfunction intersectPolygonPolygon(polygonA, polygonB) {\n  const result = /* @__PURE__ */ new Map();\n  let a, b, c, d;\n  for (let i = 0, n = polygonA.length; i < n; i++) {\n    a = polygonA[i];\n    if ((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.pointInPolygon)(a, polygonB)) {\n      const id = getPointId(a);\n      if (!result.has(id)) {\n        result.set(id, a);\n      }\n    }\n  }\n  for (let i = 0, n = polygonB.length; i < n; i++) {\n    a = polygonB[i];\n    if ((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.pointInPolygon)(a, polygonA)) {\n      const id = getPointId(a);\n      if (!result.has(id)) {\n        result.set(id, a);\n      }\n    }\n  }\n  for (let i = 0, n = polygonA.length; i < n; i++) {\n    a = polygonA[i];\n    b = polygonA[(i + 1) % polygonA.length];\n    for (let j = 0, m = polygonB.length; j < m; j++) {\n      c = polygonB[j];\n      d = polygonB[(j + 1) % polygonB.length];\n      const intersection = intersectLineSegmentLineSegment(a, b, c, d);\n      if (intersection !== null) {\n        const id = getPointId(intersection);\n        if (!result.has(id)) {\n          result.set(id, intersection);\n        }\n      }\n    }\n  }\n  if (result.size === 0)\n    return null;\n  return orderClockwise([...result.values()]);\n}\nfunction getPointId(point) {\n  return `${point.x},${point.y}`;\n}\nfunction orderClockwise(points) {\n  const C = _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Average(points);\n  return points.sort((A, B) => _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Angle(C, A) - _Vec_mjs__WEBPACK_IMPORTED_MODULE_1__.Vec.Angle(C, B));\n}\nfunction polygonsIntersect(a, b) {\n  let a0, a1, b0, b1;\n  for (let i = 0, n = a.length; i < n; i++) {\n    a0 = a[i];\n    a1 = a[(i + 1) % n];\n    for (let j = 0, m = b.length; j < m; j++) {\n      b0 = b[j];\n      b1 = b[(j + 1) % m];\n      if (linesIntersect(a0, a1, b0, b1))\n        return true;\n    }\n  }\n  return false;\n}\nfunction polygonIntersectsPolyline(polygon, polyline) {\n  let a, b, c, d;\n  for (let i = 0, n = polygon.length; i < n; i++) {\n    a = polygon[i];\n    b = polygon[(i + 1) % n];\n    for (let j = 1, m = polyline.length; j < m; j++) {\n      c = polyline[j - 1];\n      d = polyline[j];\n      if (linesIntersect(a, b, c, d))\n        return true;\n    }\n  }\n  return false;\n}\n\n//# sourceMappingURL=intersect.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvaW50ZXJzZWN0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUE2QztBQUNiO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEseUNBQUc7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHlDQUFHO0FBQ25CO0FBQ0EsZ0JBQWdCLHlDQUFHO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLE9BQU87QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxXQUFXO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHlDQUFHO0FBQ1gsUUFBUSx5Q0FBRztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsT0FBTztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxPQUFPO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLE9BQU87QUFDOUM7QUFDQSxRQUFRLDBEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxPQUFPO0FBQzlDO0FBQ0EsUUFBUSwwREFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsT0FBTztBQUM5QztBQUNBO0FBQ0EseUNBQXlDLE9BQU87QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVEsR0FBRyxRQUFRO0FBQy9CO0FBQ0E7QUFDQSxZQUFZLHlDQUFHO0FBQ2YsK0JBQStCLHlDQUFHLGVBQWUseUNBQUc7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLE9BQU87QUFDdkM7QUFDQTtBQUNBLGtDQUFrQyxPQUFPO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLE9BQU87QUFDN0M7QUFDQTtBQUNBLHlDQUF5QyxPQUFPO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFjRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi9wcmltaXRpdmVzL2ludGVyc2VjdC5tanM/YTI4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwb2ludEluUG9seWdvbiB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4vVmVjLm1qc1wiO1xuZnVuY3Rpb24gaW50ZXJzZWN0TGluZVNlZ21lbnRMaW5lU2VnbWVudChhMSwgYTIsIGIxLCBiMikge1xuICBjb25zdCBBQnggPSBhMS54IC0gYjEueDtcbiAgY29uc3QgQUJ5ID0gYTEueSAtIGIxLnk7XG4gIGNvbnN0IEJWeCA9IGIyLnggLSBiMS54O1xuICBjb25zdCBCVnkgPSBiMi55IC0gYjEueTtcbiAgY29uc3QgQVZ4ID0gYTIueCAtIGExLng7XG4gIGNvbnN0IEFWeSA9IGEyLnkgLSBhMS55O1xuICBjb25zdCB1YV90ID0gQlZ4ICogQUJ5IC0gQlZ5ICogQUJ4O1xuICBjb25zdCB1Yl90ID0gQVZ4ICogQUJ5IC0gQVZ5ICogQUJ4O1xuICBjb25zdCB1X2IgPSBCVnkgKiBBVnggLSBCVnggKiBBVnk7XG4gIGlmICh1YV90ID09PSAwIHx8IHViX3QgPT09IDApXG4gICAgcmV0dXJuIG51bGw7XG4gIGlmICh1X2IgPT09IDApXG4gICAgcmV0dXJuIG51bGw7XG4gIGlmICh1X2IgIT09IDApIHtcbiAgICBjb25zdCB1YSA9IHVhX3QgLyB1X2I7XG4gICAgY29uc3QgdWIgPSB1Yl90IC8gdV9iO1xuICAgIGlmICgwIDw9IHVhICYmIHVhIDw9IDEgJiYgMCA8PSB1YiAmJiB1YiA8PSAxKSB7XG4gICAgICByZXR1cm4gVmVjLkFkZFhZKGExLCB1YSAqIEFWeCwgdWEgKiBBVnkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGludGVyc2VjdExpbmVTZWdtZW50Q2lyY2xlKGExLCBhMiwgYywgcikge1xuICBjb25zdCBhID0gKGEyLnggLSBhMS54KSAqIChhMi54IC0gYTEueCkgKyAoYTIueSAtIGExLnkpICogKGEyLnkgLSBhMS55KTtcbiAgY29uc3QgYiA9IDIgKiAoKGEyLnggLSBhMS54KSAqIChhMS54IC0gYy54KSArIChhMi55IC0gYTEueSkgKiAoYTEueSAtIGMueSkpO1xuICBjb25zdCBjYyA9IGMueCAqIGMueCArIGMueSAqIGMueSArIGExLnggKiBhMS54ICsgYTEueSAqIGExLnkgLSAyICogKGMueCAqIGExLnggKyBjLnkgKiBhMS55KSAtIHIgKiByO1xuICBjb25zdCBkZXRlciA9IGIgKiBiIC0gNCAqIGEgKiBjYztcbiAgaWYgKGRldGVyIDwgMClcbiAgICByZXR1cm4gbnVsbDtcbiAgaWYgKGRldGVyID09PSAwKVxuICAgIHJldHVybiBudWxsO1xuICBjb25zdCBlID0gTWF0aC5zcXJ0KGRldGVyKTtcbiAgY29uc3QgdTEgPSAoLWIgKyBlKSAvICgyICogYSk7XG4gIGNvbnN0IHUyID0gKC1iIC0gZSkgLyAoMiAqIGEpO1xuICBpZiAoKHUxIDwgMCB8fCB1MSA+IDEpICYmICh1MiA8IDAgfHwgdTIgPiAxKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBpZiAoMCA8PSB1MSAmJiB1MSA8PSAxKVxuICAgIHJlc3VsdC5wdXNoKFZlYy5McnAoYTEsIGEyLCB1MSkpO1xuICBpZiAoMCA8PSB1MiAmJiB1MiA8PSAxKVxuICAgIHJlc3VsdC5wdXNoKFZlYy5McnAoYTEsIGEyLCB1MikpO1xuICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMClcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGludGVyc2VjdExpbmVTZWdtZW50UG9seWxpbmUoYTEsIGEyLCBwb2ludHMpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGxldCBzZWdtZW50SW50ZXJzZWN0aW9uO1xuICBmb3IgKGxldCBpID0gMCwgbiA9IHBvaW50cy5sZW5ndGggLSAxOyBpIDwgbjsgaSsrKSB7XG4gICAgc2VnbWVudEludGVyc2VjdGlvbiA9IGludGVyc2VjdExpbmVTZWdtZW50TGluZVNlZ21lbnQoYTEsIGEyLCBwb2ludHNbaV0sIHBvaW50c1tpICsgMV0pO1xuICAgIGlmIChzZWdtZW50SW50ZXJzZWN0aW9uKVxuICAgICAgcmVzdWx0LnB1c2goc2VnbWVudEludGVyc2VjdGlvbik7XG4gIH1cbiAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApXG4gICAgcmV0dXJuIG51bGw7XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBpbnRlcnNlY3RMaW5lU2VnbWVudFBvbHlnb24oYTEsIGEyLCBwb2ludHMpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGxldCBzZWdtZW50SW50ZXJzZWN0aW9uO1xuICBmb3IgKGxldCBpID0gMSwgbiA9IHBvaW50cy5sZW5ndGg7IGkgPCBuICsgMTsgaSsrKSB7XG4gICAgc2VnbWVudEludGVyc2VjdGlvbiA9IGludGVyc2VjdExpbmVTZWdtZW50TGluZVNlZ21lbnQoXG4gICAgICBhMSxcbiAgICAgIGEyLFxuICAgICAgcG9pbnRzW2kgLSAxXSxcbiAgICAgIHBvaW50c1tpICUgcG9pbnRzLmxlbmd0aF1cbiAgICApO1xuICAgIGlmIChzZWdtZW50SW50ZXJzZWN0aW9uKVxuICAgICAgcmVzdWx0LnB1c2goc2VnbWVudEludGVyc2VjdGlvbik7XG4gIH1cbiAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApXG4gICAgcmV0dXJuIG51bGw7XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBpbnRlcnNlY3RDaXJjbGVDaXJjbGUoYzEsIHIxLCBjMiwgcjIpIHtcbiAgbGV0IGR4ID0gYzIueCAtIGMxLng7XG4gIGxldCBkeSA9IGMyLnkgLSBjMS55O1xuICBjb25zdCBkID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KSwgeCA9IChkICogZCAtIHIyICogcjIgKyByMSAqIHIxKSAvICgyICogZCksIHkgPSBNYXRoLnNxcnQocjEgKiByMSAtIHggKiB4KTtcbiAgZHggLz0gZDtcbiAgZHkgLz0gZDtcbiAgcmV0dXJuIFtcbiAgICBuZXcgVmVjKGMxLnggKyBkeCAqIHggLSBkeSAqIHksIGMxLnkgKyBkeSAqIHggKyBkeCAqIHkpLFxuICAgIG5ldyBWZWMoYzEueCArIGR4ICogeCArIGR5ICogeSwgYzEueSArIGR5ICogeCAtIGR4ICogeSlcbiAgXTtcbn1cbmZ1bmN0aW9uIGludGVyc2VjdENpcmNsZVBvbHlnb24oYywgciwgcG9pbnRzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBsZXQgYSwgYiwgaW50O1xuICBmb3IgKGxldCBpID0gMCwgbiA9IHBvaW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICBhID0gcG9pbnRzW2ldO1xuICAgIGIgPSBwb2ludHNbKGkgKyAxKSAlIHBvaW50cy5sZW5ndGhdO1xuICAgIGludCA9IGludGVyc2VjdExpbmVTZWdtZW50Q2lyY2xlKGEsIGIsIGMsIHIpO1xuICAgIGlmIChpbnQpXG4gICAgICByZXN1bHQucHVzaCguLi5pbnQpO1xuICB9XG4gIGlmIChyZXN1bHQubGVuZ3RoID09PSAwKVxuICAgIHJldHVybiBudWxsO1xuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gaW50ZXJzZWN0Q2lyY2xlUG9seWxpbmUoYywgciwgcG9pbnRzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBsZXQgYSwgYiwgaW50O1xuICBmb3IgKGxldCBpID0gMSwgbiA9IHBvaW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICBhID0gcG9pbnRzW2kgLSAxXTtcbiAgICBiID0gcG9pbnRzW2ldO1xuICAgIGludCA9IGludGVyc2VjdExpbmVTZWdtZW50Q2lyY2xlKGEsIGIsIGMsIHIpO1xuICAgIGlmIChpbnQpXG4gICAgICByZXN1bHQucHVzaCguLi5pbnQpO1xuICB9XG4gIGlmIChyZXN1bHQubGVuZ3RoID09PSAwKVxuICAgIHJldHVybiBudWxsO1xuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gaW50ZXJzZWN0UG9seWdvbkJvdW5kcyhwb2ludHMsIGJvdW5kcykge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgbGV0IHNlZ21lbnRJbnRlcnNlY3Rpb247XG4gIGZvciAoY29uc3Qgc2lkZSBvZiBib3VuZHMuc2lkZXMpIHtcbiAgICBzZWdtZW50SW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0TGluZVNlZ21lbnRQb2x5Z29uKHNpZGVbMF0sIHNpZGVbMV0sIHBvaW50cyk7XG4gICAgaWYgKHNlZ21lbnRJbnRlcnNlY3Rpb24pXG4gICAgICByZXN1bHQucHVzaCguLi5zZWdtZW50SW50ZXJzZWN0aW9uKTtcbiAgfVxuICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMClcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNjdyhBLCBCLCBDKSB7XG4gIHJldHVybiAoQy55IC0gQS55KSAqIChCLnggLSBBLngpID4gKEIueSAtIEEueSkgKiAoQy54IC0gQS54KTtcbn1cbmZ1bmN0aW9uIGxpbmVzSW50ZXJzZWN0KEEsIEIsIEMsIEQpIHtcbiAgcmV0dXJuIGNjdyhBLCBDLCBEKSAhPT0gY2N3KEIsIEMsIEQpICYmIGNjdyhBLCBCLCBDKSAhPT0gY2N3KEEsIEIsIEQpO1xufVxuZnVuY3Rpb24gaW50ZXJzZWN0UG9seWdvblBvbHlnb24ocG9seWdvbkEsIHBvbHlnb25CKSB7XG4gIGNvbnN0IHJlc3VsdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGxldCBhLCBiLCBjLCBkO1xuICBmb3IgKGxldCBpID0gMCwgbiA9IHBvbHlnb25BLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgIGEgPSBwb2x5Z29uQVtpXTtcbiAgICBpZiAocG9pbnRJblBvbHlnb24oYSwgcG9seWdvbkIpKSB7XG4gICAgICBjb25zdCBpZCA9IGdldFBvaW50SWQoYSk7XG4gICAgICBpZiAoIXJlc3VsdC5oYXMoaWQpKSB7XG4gICAgICAgIHJlc3VsdC5zZXQoaWQsIGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmb3IgKGxldCBpID0gMCwgbiA9IHBvbHlnb25CLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgIGEgPSBwb2x5Z29uQltpXTtcbiAgICBpZiAocG9pbnRJblBvbHlnb24oYSwgcG9seWdvbkEpKSB7XG4gICAgICBjb25zdCBpZCA9IGdldFBvaW50SWQoYSk7XG4gICAgICBpZiAoIXJlc3VsdC5oYXMoaWQpKSB7XG4gICAgICAgIHJlc3VsdC5zZXQoaWQsIGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmb3IgKGxldCBpID0gMCwgbiA9IHBvbHlnb25BLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgIGEgPSBwb2x5Z29uQVtpXTtcbiAgICBiID0gcG9seWdvbkFbKGkgKyAxKSAlIHBvbHlnb25BLmxlbmd0aF07XG4gICAgZm9yIChsZXQgaiA9IDAsIG0gPSBwb2x5Z29uQi5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgIGMgPSBwb2x5Z29uQltqXTtcbiAgICAgIGQgPSBwb2x5Z29uQlsoaiArIDEpICUgcG9seWdvbkIubGVuZ3RoXTtcbiAgICAgIGNvbnN0IGludGVyc2VjdGlvbiA9IGludGVyc2VjdExpbmVTZWdtZW50TGluZVNlZ21lbnQoYSwgYiwgYywgZCk7XG4gICAgICBpZiAoaW50ZXJzZWN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGlkID0gZ2V0UG9pbnRJZChpbnRlcnNlY3Rpb24pO1xuICAgICAgICBpZiAoIXJlc3VsdC5oYXMoaWQpKSB7XG4gICAgICAgICAgcmVzdWx0LnNldChpZCwgaW50ZXJzZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAocmVzdWx0LnNpemUgPT09IDApXG4gICAgcmV0dXJuIG51bGw7XG4gIHJldHVybiBvcmRlckNsb2Nrd2lzZShbLi4ucmVzdWx0LnZhbHVlcygpXSk7XG59XG5mdW5jdGlvbiBnZXRQb2ludElkKHBvaW50KSB7XG4gIHJldHVybiBgJHtwb2ludC54fSwke3BvaW50Lnl9YDtcbn1cbmZ1bmN0aW9uIG9yZGVyQ2xvY2t3aXNlKHBvaW50cykge1xuICBjb25zdCBDID0gVmVjLkF2ZXJhZ2UocG9pbnRzKTtcbiAgcmV0dXJuIHBvaW50cy5zb3J0KChBLCBCKSA9PiBWZWMuQW5nbGUoQywgQSkgLSBWZWMuQW5nbGUoQywgQikpO1xufVxuZnVuY3Rpb24gcG9seWdvbnNJbnRlcnNlY3QoYSwgYikge1xuICBsZXQgYTAsIGExLCBiMCwgYjE7XG4gIGZvciAobGV0IGkgPSAwLCBuID0gYS5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICBhMCA9IGFbaV07XG4gICAgYTEgPSBhWyhpICsgMSkgJSBuXTtcbiAgICBmb3IgKGxldCBqID0gMCwgbSA9IGIubGVuZ3RoOyBqIDwgbTsgaisrKSB7XG4gICAgICBiMCA9IGJbal07XG4gICAgICBiMSA9IGJbKGogKyAxKSAlIG1dO1xuICAgICAgaWYgKGxpbmVzSW50ZXJzZWN0KGEwLCBhMSwgYjAsIGIxKSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHBvbHlnb25JbnRlcnNlY3RzUG9seWxpbmUocG9seWdvbiwgcG9seWxpbmUpIHtcbiAgbGV0IGEsIGIsIGMsIGQ7XG4gIGZvciAobGV0IGkgPSAwLCBuID0gcG9seWdvbi5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICBhID0gcG9seWdvbltpXTtcbiAgICBiID0gcG9seWdvblsoaSArIDEpICUgbl07XG4gICAgZm9yIChsZXQgaiA9IDEsIG0gPSBwb2x5bGluZS5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgIGMgPSBwb2x5bGluZVtqIC0gMV07XG4gICAgICBkID0gcG9seWxpbmVbal07XG4gICAgICBpZiAobGluZXNJbnRlcnNlY3QoYSwgYiwgYywgZCkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQge1xuICBpbnRlcnNlY3RDaXJjbGVDaXJjbGUsXG4gIGludGVyc2VjdENpcmNsZVBvbHlnb24sXG4gIGludGVyc2VjdENpcmNsZVBvbHlsaW5lLFxuICBpbnRlcnNlY3RMaW5lU2VnbWVudENpcmNsZSxcbiAgaW50ZXJzZWN0TGluZVNlZ21lbnRMaW5lU2VnbWVudCxcbiAgaW50ZXJzZWN0TGluZVNlZ21lbnRQb2x5Z29uLFxuICBpbnRlcnNlY3RMaW5lU2VnbWVudFBvbHlsaW5lLFxuICBpbnRlcnNlY3RQb2x5Z29uQm91bmRzLFxuICBpbnRlcnNlY3RQb2x5Z29uUG9seWdvbixcbiAgbGluZXNJbnRlcnNlY3QsXG4gIHBvbHlnb25JbnRlcnNlY3RzUG9seWxpbmUsXG4gIHBvbHlnb25zSW50ZXJzZWN0XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/intersect.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HALF_PI: () => (/* binding */ HALF_PI),\n/* harmony export */   PI: () => (/* binding */ PI),\n/* harmony export */   PI2: () => (/* binding */ PI2),\n/* harmony export */   SIN: () => (/* binding */ SIN),\n/* harmony export */   angleDistance: () => (/* binding */ angleDistance),\n/* harmony export */   approximately: () => (/* binding */ approximately),\n/* harmony export */   areAnglesCompatible: () => (/* binding */ areAnglesCompatible),\n/* harmony export */   average: () => (/* binding */ average),\n/* harmony export */   canonicalizeRotation: () => (/* binding */ canonicalizeRotation),\n/* harmony export */   centerOfCircleFromThreePoints: () => (/* binding */ centerOfCircleFromThreePoints),\n/* harmony export */   clamp: () => (/* binding */ clamp),\n/* harmony export */   clampRadians: () => (/* binding */ clampRadians),\n/* harmony export */   clockwiseAngleDist: () => (/* binding */ clockwiseAngleDist),\n/* harmony export */   counterClockwiseAngleDist: () => (/* binding */ counterClockwiseAngleDist),\n/* harmony export */   degreesToRadians: () => (/* binding */ degreesToRadians),\n/* harmony export */   getArcMeasure: () => (/* binding */ getArcMeasure),\n/* harmony export */   getPointInArcT: () => (/* binding */ getPointInArcT),\n/* harmony export */   getPointOnCircle: () => (/* binding */ getPointOnCircle),\n/* harmony export */   getPointsOnArc: () => (/* binding */ getPointsOnArc),\n/* harmony export */   getPolygonVertices: () => (/* binding */ getPolygonVertices),\n/* harmony export */   isSafeFloat: () => (/* binding */ isSafeFloat),\n/* harmony export */   perimeterOfEllipse: () => (/* binding */ perimeterOfEllipse),\n/* harmony export */   pointInPolygon: () => (/* binding */ pointInPolygon),\n/* harmony export */   precise: () => (/* binding */ precise),\n/* harmony export */   radiansToDegrees: () => (/* binding */ radiansToDegrees),\n/* harmony export */   rangeIntersection: () => (/* binding */ rangeIntersection),\n/* harmony export */   rangesOverlap: () => (/* binding */ rangesOverlap),\n/* harmony export */   shortAngleDist: () => (/* binding */ shortAngleDist),\n/* harmony export */   snapAngle: () => (/* binding */ snapAngle),\n/* harmony export */   toDomPrecision: () => (/* binding */ toDomPrecision),\n/* harmony export */   toFixed: () => (/* binding */ toFixed),\n/* harmony export */   toPrecision: () => (/* binding */ toPrecision)\n/* harmony export */ });\n/* harmony import */ var _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\nfunction precise(A) {\n  return `${toDomPrecision(A.x)},${toDomPrecision(A.y)} `;\n}\nfunction average(A, B) {\n  return `${toDomPrecision((A.x + B.x) / 2)},${toDomPrecision((A.y + B.y) / 2)} `;\n}\nconst PI = Math.PI;\nconst HALF_PI = PI / 2;\nconst PI2 = PI * 2;\nconst SIN = Math.sin;\nfunction clamp(n, min, max) {\n  return Math.max(min, typeof max !== \"undefined\" ? Math.min(n, max) : n);\n}\nfunction toPrecision(n, precision = 1e10) {\n  if (!n)\n    return 0;\n  return Math.round(n * precision) / precision;\n}\nfunction approximately(a, b, precision = 1e-6) {\n  return Math.abs(a - b) <= precision;\n}\nfunction perimeterOfEllipse(rx, ry) {\n  const h = Math.pow(rx - ry, 2) / Math.pow(rx + ry, 2);\n  return PI * (rx + ry) * (1 + 3 * h / (10 + Math.sqrt(4 - 3 * h)));\n}\nfunction canonicalizeRotation(a) {\n  a = a % PI2;\n  if (a < 0) {\n    a = a + PI2;\n  } else if (a === 0) {\n    a = 0;\n  }\n  return a;\n}\nfunction clockwiseAngleDist(a0, a1) {\n  a0 = canonicalizeRotation(a0);\n  a1 = canonicalizeRotation(a1);\n  if (a0 > a1) {\n    a1 += PI2;\n  }\n  return a1 - a0;\n}\nfunction counterClockwiseAngleDist(a0, a1) {\n  return PI2 - clockwiseAngleDist(a0, a1);\n}\nfunction shortAngleDist(a0, a1) {\n  const da = (a1 - a0) % PI2;\n  return 2 * da % PI2 - da;\n}\nfunction clampRadians(r) {\n  return (PI2 + r) % PI2;\n}\nfunction snapAngle(r, segments) {\n  const seg = PI2 / segments;\n  let ang = Math.floor((clampRadians(r) + seg / 2) / seg) * seg % PI2;\n  if (ang < PI)\n    ang += PI2;\n  if (ang > PI)\n    ang -= PI2;\n  return ang;\n}\nfunction areAnglesCompatible(a, b) {\n  return a === b || approximately(a % (Math.PI / 2) - b % (Math.PI / 2), 0);\n}\nfunction degreesToRadians(d) {\n  return d * PI / 180;\n}\nfunction radiansToDegrees(r) {\n  return r * 180 / PI;\n}\nfunction getPointOnCircle(center, r, a) {\n  return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(center.x, center.y).add(_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.FromAngle(a, r));\n}\nfunction getPolygonVertices(width, height, sides) {\n  const cx = width / 2;\n  const cy = height / 2;\n  const pointsOnPerimeter = [];\n  let minX = Infinity;\n  let maxX = -Infinity;\n  let minY = Infinity;\n  let maxY = -Infinity;\n  for (let i = 0; i < sides; i++) {\n    const step = PI2 / sides;\n    const t = -HALF_PI + i * step;\n    const x = cx + cx * Math.cos(t);\n    const y = cy + cy * Math.sin(t);\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    pointsOnPerimeter.push(new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(x, y));\n  }\n  const w = maxX - minX;\n  const h = maxY - minY;\n  const dx = width - w;\n  const dy = height - h;\n  if (dx !== 0 || dy !== 0) {\n    for (let i = 0; i < pointsOnPerimeter.length; i++) {\n      const pt = pointsOnPerimeter[i];\n      pt.x = (pt.x - minX) / w * width;\n      pt.y = (pt.y - minY) / h * height;\n    }\n  }\n  return pointsOnPerimeter;\n}\nfunction rangesOverlap(a0, a1, b0, b1) {\n  return a0 < b1 && b0 < a1;\n}\nfunction rangeIntersection(a0, a1, b0, b1) {\n  const min = Math.max(a0, b0);\n  const max = Math.min(a1, b1);\n  if (min <= max) {\n    return [min, max];\n  }\n  return null;\n}\nfunction cross(x, y, z) {\n  return (y.x - x.x) * (z.y - x.y) - (z.x - x.x) * (y.y - x.y);\n}\nfunction pointInPolygon(A, points) {\n  let windingNumber = 0;\n  let a;\n  let b;\n  for (let i = 0; i < points.length; i++) {\n    a = points[i];\n    if (a.x === A.x && a.y === A.y)\n      return true;\n    b = points[(i + 1) % points.length];\n    if (_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist(A, a) + _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist(A, b) === _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Dist(a, b))\n      return true;\n    if (a.y <= A.y) {\n      if (b.y > A.y && cross(a, b, A) > 0) {\n        windingNumber += 1;\n      }\n    } else if (b.y <= A.y && cross(a, b, A) < 0) {\n      windingNumber -= 1;\n    }\n  }\n  return windingNumber !== 0;\n}\nfunction toDomPrecision(v) {\n  return Math.round(v * 1e4) / 1e4;\n}\nfunction toFixed(v) {\n  return Math.round(v * 100) / 100;\n}\nconst isSafeFloat = (n) => {\n  return Math.abs(n) < Number.MAX_SAFE_INTEGER;\n};\nfunction angleDistance(fromAngle, toAngle, direction) {\n  const dist = direction < 0 ? clockwiseAngleDist(fromAngle, toAngle) : counterClockwiseAngleDist(fromAngle, toAngle);\n  return dist;\n}\nfunction getPointInArcT(mAB, A, B, P) {\n  let mAP;\n  if (Math.abs(mAB) > PI) {\n    mAP = shortAngleDist(A, P);\n    const mPB = shortAngleDist(P, B);\n    if (Math.abs(mAP) < Math.abs(mPB)) {\n      return mAP / mAB;\n    } else {\n      return (mAB - mPB) / mAB;\n    }\n  } else {\n    mAP = shortAngleDist(A, P);\n    const t = mAP / mAB;\n    if (Math.sign(mAP) !== Math.sign(mAB)) {\n      return Math.abs(t) > 0.5 ? 1 : 0;\n    }\n    return t;\n  }\n}\nfunction getArcMeasure(A, B, sweepFlag, largeArcFlag) {\n  const m = 2 * ((B - A) % PI2) % PI2 - (B - A) % PI2;\n  if (!largeArcFlag)\n    return m;\n  return (PI2 - Math.abs(m)) * (sweepFlag ? 1 : -1);\n}\nfunction centerOfCircleFromThreePoints(a, b, c) {\n  const u = -2 * (a.x * (b.y - c.y) - a.y * (b.x - c.x) + b.x * c.y - c.x * b.y);\n  return new _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(\n    ((a.x * a.x + a.y * a.y) * (c.y - b.y) + (b.x * b.x + b.y * b.y) * (a.y - c.y) + (c.x * c.x + c.y * c.y) * (b.y - a.y)) / u,\n    ((a.x * a.x + a.y * a.y) * (b.x - c.x) + (b.x * b.x + b.y * b.y) * (c.x - a.x) + (c.x * c.x + c.y * c.y) * (a.x - b.x)) / u\n  );\n}\nfunction getPointsOnArc(startPoint, endPoint, center, radius, numPoints) {\n  if (center === null) {\n    return [_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.From(startPoint), _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.From(endPoint)];\n  }\n  const results = [];\n  const startAngle = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Angle(center, startPoint);\n  const endAngle = _Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec.Angle(center, endPoint);\n  const l = clockwiseAngleDist(startAngle, endAngle);\n  for (let i = 0; i < numPoints; i++) {\n    const t = i / (numPoints - 1);\n    const angle = startAngle + l * t;\n    const point = getPointOnCircle(center, radius, angle);\n    results.push(point);\n  }\n  return results;\n}\n\n//# sourceMappingURL=utils.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnQztBQUNoQztBQUNBLFlBQVksb0JBQW9CLEdBQUcscUJBQXFCO0FBQ3hEO0FBQ0E7QUFDQSxZQUFZLGdDQUFnQyxHQUFHLGlDQUFpQztBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEseUNBQUcseUJBQXlCLHlDQUFHO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixXQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix5Q0FBRztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOEJBQThCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEseUNBQUcsY0FBYyx5Q0FBRyxnQkFBZ0IseUNBQUc7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx5Q0FBRztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHlDQUFHLG1CQUFtQix5Q0FBRztBQUNyQztBQUNBO0FBQ0EscUJBQXFCLHlDQUFHO0FBQ3hCLG1CQUFtQix5Q0FBRztBQUN0QjtBQUNBLGtCQUFrQixlQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBa0NFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3ByaW1pdGl2ZXMvdXRpbHMubWpzP2RhYTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4vVmVjLm1qc1wiO1xuZnVuY3Rpb24gcHJlY2lzZShBKSB7XG4gIHJldHVybiBgJHt0b0RvbVByZWNpc2lvbihBLngpfSwke3RvRG9tUHJlY2lzaW9uKEEueSl9IGA7XG59XG5mdW5jdGlvbiBhdmVyYWdlKEEsIEIpIHtcbiAgcmV0dXJuIGAke3RvRG9tUHJlY2lzaW9uKChBLnggKyBCLngpIC8gMil9LCR7dG9Eb21QcmVjaXNpb24oKEEueSArIEIueSkgLyAyKX0gYDtcbn1cbmNvbnN0IFBJID0gTWF0aC5QSTtcbmNvbnN0IEhBTEZfUEkgPSBQSSAvIDI7XG5jb25zdCBQSTIgPSBQSSAqIDI7XG5jb25zdCBTSU4gPSBNYXRoLnNpbjtcbmZ1bmN0aW9uIGNsYW1wKG4sIG1pbiwgbWF4KSB7XG4gIHJldHVybiBNYXRoLm1heChtaW4sIHR5cGVvZiBtYXggIT09IFwidW5kZWZpbmVkXCIgPyBNYXRoLm1pbihuLCBtYXgpIDogbik7XG59XG5mdW5jdGlvbiB0b1ByZWNpc2lvbihuLCBwcmVjaXNpb24gPSAxZTEwKSB7XG4gIGlmICghbilcbiAgICByZXR1cm4gMDtcbiAgcmV0dXJuIE1hdGgucm91bmQobiAqIHByZWNpc2lvbikgLyBwcmVjaXNpb247XG59XG5mdW5jdGlvbiBhcHByb3hpbWF0ZWx5KGEsIGIsIHByZWNpc2lvbiA9IDFlLTYpIHtcbiAgcmV0dXJuIE1hdGguYWJzKGEgLSBiKSA8PSBwcmVjaXNpb247XG59XG5mdW5jdGlvbiBwZXJpbWV0ZXJPZkVsbGlwc2UocngsIHJ5KSB7XG4gIGNvbnN0IGggPSBNYXRoLnBvdyhyeCAtIHJ5LCAyKSAvIE1hdGgucG93KHJ4ICsgcnksIDIpO1xuICByZXR1cm4gUEkgKiAocnggKyByeSkgKiAoMSArIDMgKiBoIC8gKDEwICsgTWF0aC5zcXJ0KDQgLSAzICogaCkpKTtcbn1cbmZ1bmN0aW9uIGNhbm9uaWNhbGl6ZVJvdGF0aW9uKGEpIHtcbiAgYSA9IGEgJSBQSTI7XG4gIGlmIChhIDwgMCkge1xuICAgIGEgPSBhICsgUEkyO1xuICB9IGVsc2UgaWYgKGEgPT09IDApIHtcbiAgICBhID0gMDtcbiAgfVxuICByZXR1cm4gYTtcbn1cbmZ1bmN0aW9uIGNsb2Nrd2lzZUFuZ2xlRGlzdChhMCwgYTEpIHtcbiAgYTAgPSBjYW5vbmljYWxpemVSb3RhdGlvbihhMCk7XG4gIGExID0gY2Fub25pY2FsaXplUm90YXRpb24oYTEpO1xuICBpZiAoYTAgPiBhMSkge1xuICAgIGExICs9IFBJMjtcbiAgfVxuICByZXR1cm4gYTEgLSBhMDtcbn1cbmZ1bmN0aW9uIGNvdW50ZXJDbG9ja3dpc2VBbmdsZURpc3QoYTAsIGExKSB7XG4gIHJldHVybiBQSTIgLSBjbG9ja3dpc2VBbmdsZURpc3QoYTAsIGExKTtcbn1cbmZ1bmN0aW9uIHNob3J0QW5nbGVEaXN0KGEwLCBhMSkge1xuICBjb25zdCBkYSA9IChhMSAtIGEwKSAlIFBJMjtcbiAgcmV0dXJuIDIgKiBkYSAlIFBJMiAtIGRhO1xufVxuZnVuY3Rpb24gY2xhbXBSYWRpYW5zKHIpIHtcbiAgcmV0dXJuIChQSTIgKyByKSAlIFBJMjtcbn1cbmZ1bmN0aW9uIHNuYXBBbmdsZShyLCBzZWdtZW50cykge1xuICBjb25zdCBzZWcgPSBQSTIgLyBzZWdtZW50cztcbiAgbGV0IGFuZyA9IE1hdGguZmxvb3IoKGNsYW1wUmFkaWFucyhyKSArIHNlZyAvIDIpIC8gc2VnKSAqIHNlZyAlIFBJMjtcbiAgaWYgKGFuZyA8IFBJKVxuICAgIGFuZyArPSBQSTI7XG4gIGlmIChhbmcgPiBQSSlcbiAgICBhbmcgLT0gUEkyO1xuICByZXR1cm4gYW5nO1xufVxuZnVuY3Rpb24gYXJlQW5nbGVzQ29tcGF0aWJsZShhLCBiKSB7XG4gIHJldHVybiBhID09PSBiIHx8IGFwcHJveGltYXRlbHkoYSAlIChNYXRoLlBJIC8gMikgLSBiICUgKE1hdGguUEkgLyAyKSwgMCk7XG59XG5mdW5jdGlvbiBkZWdyZWVzVG9SYWRpYW5zKGQpIHtcbiAgcmV0dXJuIGQgKiBQSSAvIDE4MDtcbn1cbmZ1bmN0aW9uIHJhZGlhbnNUb0RlZ3JlZXMocikge1xuICByZXR1cm4gciAqIDE4MCAvIFBJO1xufVxuZnVuY3Rpb24gZ2V0UG9pbnRPbkNpcmNsZShjZW50ZXIsIHIsIGEpIHtcbiAgcmV0dXJuIG5ldyBWZWMoY2VudGVyLngsIGNlbnRlci55KS5hZGQoVmVjLkZyb21BbmdsZShhLCByKSk7XG59XG5mdW5jdGlvbiBnZXRQb2x5Z29uVmVydGljZXMod2lkdGgsIGhlaWdodCwgc2lkZXMpIHtcbiAgY29uc3QgY3ggPSB3aWR0aCAvIDI7XG4gIGNvbnN0IGN5ID0gaGVpZ2h0IC8gMjtcbiAgY29uc3QgcG9pbnRzT25QZXJpbWV0ZXIgPSBbXTtcbiAgbGV0IG1pblggPSBJbmZpbml0eTtcbiAgbGV0IG1heFggPSAtSW5maW5pdHk7XG4gIGxldCBtaW5ZID0gSW5maW5pdHk7XG4gIGxldCBtYXhZID0gLUluZmluaXR5O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNpZGVzOyBpKyspIHtcbiAgICBjb25zdCBzdGVwID0gUEkyIC8gc2lkZXM7XG4gICAgY29uc3QgdCA9IC1IQUxGX1BJICsgaSAqIHN0ZXA7XG4gICAgY29uc3QgeCA9IGN4ICsgY3ggKiBNYXRoLmNvcyh0KTtcbiAgICBjb25zdCB5ID0gY3kgKyBjeSAqIE1hdGguc2luKHQpO1xuICAgIGlmICh4IDwgbWluWClcbiAgICAgIG1pblggPSB4O1xuICAgIGlmICh5IDwgbWluWSlcbiAgICAgIG1pblkgPSB5O1xuICAgIGlmICh4ID4gbWF4WClcbiAgICAgIG1heFggPSB4O1xuICAgIGlmICh5ID4gbWF4WSlcbiAgICAgIG1heFkgPSB5O1xuICAgIHBvaW50c09uUGVyaW1ldGVyLnB1c2gobmV3IFZlYyh4LCB5KSk7XG4gIH1cbiAgY29uc3QgdyA9IG1heFggLSBtaW5YO1xuICBjb25zdCBoID0gbWF4WSAtIG1pblk7XG4gIGNvbnN0IGR4ID0gd2lkdGggLSB3O1xuICBjb25zdCBkeSA9IGhlaWdodCAtIGg7XG4gIGlmIChkeCAhPT0gMCB8fCBkeSAhPT0gMCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzT25QZXJpbWV0ZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHB0ID0gcG9pbnRzT25QZXJpbWV0ZXJbaV07XG4gICAgICBwdC54ID0gKHB0LnggLSBtaW5YKSAvIHcgKiB3aWR0aDtcbiAgICAgIHB0LnkgPSAocHQueSAtIG1pblkpIC8gaCAqIGhlaWdodDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBvaW50c09uUGVyaW1ldGVyO1xufVxuZnVuY3Rpb24gcmFuZ2VzT3ZlcmxhcChhMCwgYTEsIGIwLCBiMSkge1xuICByZXR1cm4gYTAgPCBiMSAmJiBiMCA8IGExO1xufVxuZnVuY3Rpb24gcmFuZ2VJbnRlcnNlY3Rpb24oYTAsIGExLCBiMCwgYjEpIHtcbiAgY29uc3QgbWluID0gTWF0aC5tYXgoYTAsIGIwKTtcbiAgY29uc3QgbWF4ID0gTWF0aC5taW4oYTEsIGIxKTtcbiAgaWYgKG1pbiA8PSBtYXgpIHtcbiAgICByZXR1cm4gW21pbiwgbWF4XTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGNyb3NzKHgsIHksIHopIHtcbiAgcmV0dXJuICh5LnggLSB4LngpICogKHoueSAtIHgueSkgLSAoei54IC0geC54KSAqICh5LnkgLSB4LnkpO1xufVxuZnVuY3Rpb24gcG9pbnRJblBvbHlnb24oQSwgcG9pbnRzKSB7XG4gIGxldCB3aW5kaW5nTnVtYmVyID0gMDtcbiAgbGV0IGE7XG4gIGxldCBiO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgIGEgPSBwb2ludHNbaV07XG4gICAgaWYgKGEueCA9PT0gQS54ICYmIGEueSA9PT0gQS55KVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgYiA9IHBvaW50c1soaSArIDEpICUgcG9pbnRzLmxlbmd0aF07XG4gICAgaWYgKFZlYy5EaXN0KEEsIGEpICsgVmVjLkRpc3QoQSwgYikgPT09IFZlYy5EaXN0KGEsIGIpKVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKGEueSA8PSBBLnkpIHtcbiAgICAgIGlmIChiLnkgPiBBLnkgJiYgY3Jvc3MoYSwgYiwgQSkgPiAwKSB7XG4gICAgICAgIHdpbmRpbmdOdW1iZXIgKz0gMTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGIueSA8PSBBLnkgJiYgY3Jvc3MoYSwgYiwgQSkgPCAwKSB7XG4gICAgICB3aW5kaW5nTnVtYmVyIC09IDE7XG4gICAgfVxuICB9XG4gIHJldHVybiB3aW5kaW5nTnVtYmVyICE9PSAwO1xufVxuZnVuY3Rpb24gdG9Eb21QcmVjaXNpb24odikge1xuICByZXR1cm4gTWF0aC5yb3VuZCh2ICogMWU0KSAvIDFlNDtcbn1cbmZ1bmN0aW9uIHRvRml4ZWQodikge1xuICByZXR1cm4gTWF0aC5yb3VuZCh2ICogMTAwKSAvIDEwMDtcbn1cbmNvbnN0IGlzU2FmZUZsb2F0ID0gKG4pID0+IHtcbiAgcmV0dXJuIE1hdGguYWJzKG4pIDwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG59O1xuZnVuY3Rpb24gYW5nbGVEaXN0YW5jZShmcm9tQW5nbGUsIHRvQW5nbGUsIGRpcmVjdGlvbikge1xuICBjb25zdCBkaXN0ID0gZGlyZWN0aW9uIDwgMCA/IGNsb2Nrd2lzZUFuZ2xlRGlzdChmcm9tQW5nbGUsIHRvQW5nbGUpIDogY291bnRlckNsb2Nrd2lzZUFuZ2xlRGlzdChmcm9tQW5nbGUsIHRvQW5nbGUpO1xuICByZXR1cm4gZGlzdDtcbn1cbmZ1bmN0aW9uIGdldFBvaW50SW5BcmNUKG1BQiwgQSwgQiwgUCkge1xuICBsZXQgbUFQO1xuICBpZiAoTWF0aC5hYnMobUFCKSA+IFBJKSB7XG4gICAgbUFQID0gc2hvcnRBbmdsZURpc3QoQSwgUCk7XG4gICAgY29uc3QgbVBCID0gc2hvcnRBbmdsZURpc3QoUCwgQik7XG4gICAgaWYgKE1hdGguYWJzKG1BUCkgPCBNYXRoLmFicyhtUEIpKSB7XG4gICAgICByZXR1cm4gbUFQIC8gbUFCO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKG1BQiAtIG1QQikgLyBtQUI7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG1BUCA9IHNob3J0QW5nbGVEaXN0KEEsIFApO1xuICAgIGNvbnN0IHQgPSBtQVAgLyBtQUI7XG4gICAgaWYgKE1hdGguc2lnbihtQVApICE9PSBNYXRoLnNpZ24obUFCKSkge1xuICAgICAgcmV0dXJuIE1hdGguYWJzKHQpID4gMC41ID8gMSA6IDA7XG4gICAgfVxuICAgIHJldHVybiB0O1xuICB9XG59XG5mdW5jdGlvbiBnZXRBcmNNZWFzdXJlKEEsIEIsIHN3ZWVwRmxhZywgbGFyZ2VBcmNGbGFnKSB7XG4gIGNvbnN0IG0gPSAyICogKChCIC0gQSkgJSBQSTIpICUgUEkyIC0gKEIgLSBBKSAlIFBJMjtcbiAgaWYgKCFsYXJnZUFyY0ZsYWcpXG4gICAgcmV0dXJuIG07XG4gIHJldHVybiAoUEkyIC0gTWF0aC5hYnMobSkpICogKHN3ZWVwRmxhZyA/IDEgOiAtMSk7XG59XG5mdW5jdGlvbiBjZW50ZXJPZkNpcmNsZUZyb21UaHJlZVBvaW50cyhhLCBiLCBjKSB7XG4gIGNvbnN0IHUgPSAtMiAqIChhLnggKiAoYi55IC0gYy55KSAtIGEueSAqIChiLnggLSBjLngpICsgYi54ICogYy55IC0gYy54ICogYi55KTtcbiAgcmV0dXJuIG5ldyBWZWMoXG4gICAgKChhLnggKiBhLnggKyBhLnkgKiBhLnkpICogKGMueSAtIGIueSkgKyAoYi54ICogYi54ICsgYi55ICogYi55KSAqIChhLnkgLSBjLnkpICsgKGMueCAqIGMueCArIGMueSAqIGMueSkgKiAoYi55IC0gYS55KSkgLyB1LFxuICAgICgoYS54ICogYS54ICsgYS55ICogYS55KSAqIChiLnggLSBjLngpICsgKGIueCAqIGIueCArIGIueSAqIGIueSkgKiAoYy54IC0gYS54KSArIChjLnggKiBjLnggKyBjLnkgKiBjLnkpICogKGEueCAtIGIueCkpIC8gdVxuICApO1xufVxuZnVuY3Rpb24gZ2V0UG9pbnRzT25BcmMoc3RhcnRQb2ludCwgZW5kUG9pbnQsIGNlbnRlciwgcmFkaXVzLCBudW1Qb2ludHMpIHtcbiAgaWYgKGNlbnRlciA9PT0gbnVsbCkge1xuICAgIHJldHVybiBbVmVjLkZyb20oc3RhcnRQb2ludCksIFZlYy5Gcm9tKGVuZFBvaW50KV07XG4gIH1cbiAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICBjb25zdCBzdGFydEFuZ2xlID0gVmVjLkFuZ2xlKGNlbnRlciwgc3RhcnRQb2ludCk7XG4gIGNvbnN0IGVuZEFuZ2xlID0gVmVjLkFuZ2xlKGNlbnRlciwgZW5kUG9pbnQpO1xuICBjb25zdCBsID0gY2xvY2t3aXNlQW5nbGVEaXN0KHN0YXJ0QW5nbGUsIGVuZEFuZ2xlKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Qb2ludHM7IGkrKykge1xuICAgIGNvbnN0IHQgPSBpIC8gKG51bVBvaW50cyAtIDEpO1xuICAgIGNvbnN0IGFuZ2xlID0gc3RhcnRBbmdsZSArIGwgKiB0O1xuICAgIGNvbnN0IHBvaW50ID0gZ2V0UG9pbnRPbkNpcmNsZShjZW50ZXIsIHJhZGl1cywgYW5nbGUpO1xuICAgIHJlc3VsdHMucHVzaChwb2ludCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdHM7XG59XG5leHBvcnQge1xuICBIQUxGX1BJLFxuICBQSSxcbiAgUEkyLFxuICBTSU4sXG4gIGFuZ2xlRGlzdGFuY2UsXG4gIGFwcHJveGltYXRlbHksXG4gIGFyZUFuZ2xlc0NvbXBhdGlibGUsXG4gIGF2ZXJhZ2UsXG4gIGNhbm9uaWNhbGl6ZVJvdGF0aW9uLFxuICBjZW50ZXJPZkNpcmNsZUZyb21UaHJlZVBvaW50cyxcbiAgY2xhbXAsXG4gIGNsYW1wUmFkaWFucyxcbiAgY2xvY2t3aXNlQW5nbGVEaXN0LFxuICBjb3VudGVyQ2xvY2t3aXNlQW5nbGVEaXN0LFxuICBkZWdyZWVzVG9SYWRpYW5zLFxuICBnZXRBcmNNZWFzdXJlLFxuICBnZXRQb2ludEluQXJjVCxcbiAgZ2V0UG9pbnRPbkNpcmNsZSxcbiAgZ2V0UG9pbnRzT25BcmMsXG4gIGdldFBvbHlnb25WZXJ0aWNlcyxcbiAgaXNTYWZlRmxvYXQsXG4gIHBlcmltZXRlck9mRWxsaXBzZSxcbiAgcG9pbnRJblBvbHlnb24sXG4gIHByZWNpc2UsXG4gIHJhZGlhbnNUb0RlZ3JlZXMsXG4gIHJhbmdlSW50ZXJzZWN0aW9uLFxuICByYW5nZXNPdmVybGFwLFxuICBzaG9ydEFuZ2xlRGlzdCxcbiAgc25hcEFuZ2xlLFxuICB0b0RvbVByZWNpc2lvbixcbiAgdG9GaXhlZCxcbiAgdG9QcmVjaXNpb25cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/SharedStylesMap.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/SharedStylesMap.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReadonlySharedStyleMap: () => (/* binding */ ReadonlySharedStyleMap),\n/* harmony export */   SharedStyleMap: () => (/* binding */ SharedStyleMap)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nfunction sharedStyleEquals(a, b) {\n  if (!b)\n    return false;\n  switch (a.type) {\n    case \"mixed\":\n      return b.type === \"mixed\";\n    case \"shared\":\n      return b.type === \"shared\" && a.value === b.value;\n    default:\n      throw (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.exhaustiveSwitchError)(a);\n  }\n}\nclass ReadonlySharedStyleMap {\n  /** @internal */\n  map;\n  constructor(entries) {\n    this.map = new Map(entries);\n  }\n  get(prop) {\n    return this.map.get(prop);\n  }\n  getAsKnownValue(prop) {\n    const value = this.get(prop);\n    if (!value)\n      return void 0;\n    if (value.type === \"mixed\")\n      return void 0;\n    return value.value;\n  }\n  // eslint-disable-next-line no-restricted-syntax\n  get size() {\n    return this.map.size;\n  }\n  equals(other) {\n    if (this.size !== other.size)\n      return false;\n    const checkedKeys = /* @__PURE__ */ new Set();\n    for (const [styleProp, value] of this) {\n      if (!sharedStyleEquals(value, other.get(styleProp)))\n        return false;\n      checkedKeys.add(styleProp);\n    }\n    for (const [styleProp, value] of other) {\n      if (checkedKeys.has(styleProp))\n        continue;\n      if (!sharedStyleEquals(value, this.get(styleProp)))\n        return false;\n    }\n    return true;\n  }\n  keys() {\n    return this.map.keys();\n  }\n  values() {\n    return this.map.values();\n  }\n  entries() {\n    return this.map.entries();\n  }\n  [Symbol.iterator]() {\n    return this.map[Symbol.iterator]();\n  }\n}\nclass SharedStyleMap extends ReadonlySharedStyleMap {\n  set(prop, value) {\n    this.map.set(prop, value);\n  }\n  applyValue(prop, value) {\n    const existingValue = this.get(prop);\n    if (!existingValue) {\n      this.set(prop, { type: \"shared\", value });\n      return;\n    }\n    switch (existingValue.type) {\n      case \"mixed\":\n        return;\n      case \"shared\":\n        if (existingValue.value !== value) {\n          this.set(prop, { type: \"mixed\" });\n        }\n        return;\n      default:\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.exhaustiveSwitchError)(existingValue, \"type\");\n    }\n  }\n}\n\n//# sourceMappingURL=SharedStylesMap.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL1NoYXJlZFN0eWxlc01hcC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0VBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1QkFBdUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZUFBZTtBQUMxQztBQUNBO0FBQ0E7QUFDQSxRQUFRLG9FQUFxQjtBQUM3QjtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi91dGlscy9TaGFyZWRTdHlsZXNNYXAubWpzPzMwZmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhoYXVzdGl2ZVN3aXRjaEVycm9yIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmZ1bmN0aW9uIHNoYXJlZFN0eWxlRXF1YWxzKGEsIGIpIHtcbiAgaWYgKCFiKVxuICAgIHJldHVybiBmYWxzZTtcbiAgc3dpdGNoIChhLnR5cGUpIHtcbiAgICBjYXNlIFwibWl4ZWRcIjpcbiAgICAgIHJldHVybiBiLnR5cGUgPT09IFwibWl4ZWRcIjtcbiAgICBjYXNlIFwic2hhcmVkXCI6XG4gICAgICByZXR1cm4gYi50eXBlID09PSBcInNoYXJlZFwiICYmIGEudmFsdWUgPT09IGIudmFsdWU7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IGV4aGF1c3RpdmVTd2l0Y2hFcnJvcihhKTtcbiAgfVxufVxuY2xhc3MgUmVhZG9ubHlTaGFyZWRTdHlsZU1hcCB7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgbWFwO1xuICBjb25zdHJ1Y3RvcihlbnRyaWVzKSB7XG4gICAgdGhpcy5tYXAgPSBuZXcgTWFwKGVudHJpZXMpO1xuICB9XG4gIGdldChwcm9wKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmdldChwcm9wKTtcbiAgfVxuICBnZXRBc0tub3duVmFsdWUocHJvcCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXQocHJvcCk7XG4gICAgaWYgKCF2YWx1ZSlcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgaWYgKHZhbHVlLnR5cGUgPT09IFwibWl4ZWRcIilcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgcmV0dXJuIHZhbHVlLnZhbHVlO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgc2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAuc2l6ZTtcbiAgfVxuICBlcXVhbHMob3RoZXIpIHtcbiAgICBpZiAodGhpcy5zaXplICE9PSBvdGhlci5zaXplKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IGNoZWNrZWRLZXlzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IFtzdHlsZVByb3AsIHZhbHVlXSBvZiB0aGlzKSB7XG4gICAgICBpZiAoIXNoYXJlZFN0eWxlRXF1YWxzKHZhbHVlLCBvdGhlci5nZXQoc3R5bGVQcm9wKSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIGNoZWNrZWRLZXlzLmFkZChzdHlsZVByb3ApO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtzdHlsZVByb3AsIHZhbHVlXSBvZiBvdGhlcikge1xuICAgICAgaWYgKGNoZWNrZWRLZXlzLmhhcyhzdHlsZVByb3ApKVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIGlmICghc2hhcmVkU3R5bGVFcXVhbHModmFsdWUsIHRoaXMuZ2V0KHN0eWxlUHJvcCkpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGtleXMoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmtleXMoKTtcbiAgfVxuICB2YWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLnZhbHVlcygpO1xuICB9XG4gIGVudHJpZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmVudHJpZXMoKTtcbiAgfVxuICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXBbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICB9XG59XG5jbGFzcyBTaGFyZWRTdHlsZU1hcCBleHRlbmRzIFJlYWRvbmx5U2hhcmVkU3R5bGVNYXAge1xuICBzZXQocHJvcCwgdmFsdWUpIHtcbiAgICB0aGlzLm1hcC5zZXQocHJvcCwgdmFsdWUpO1xuICB9XG4gIGFwcGx5VmFsdWUocHJvcCwgdmFsdWUpIHtcbiAgICBjb25zdCBleGlzdGluZ1ZhbHVlID0gdGhpcy5nZXQocHJvcCk7XG4gICAgaWYgKCFleGlzdGluZ1ZhbHVlKSB7XG4gICAgICB0aGlzLnNldChwcm9wLCB7IHR5cGU6IFwic2hhcmVkXCIsIHZhbHVlIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2ggKGV4aXN0aW5nVmFsdWUudHlwZSkge1xuICAgICAgY2FzZSBcIm1peGVkXCI6XG4gICAgICAgIHJldHVybjtcbiAgICAgIGNhc2UgXCJzaGFyZWRcIjpcbiAgICAgICAgaWYgKGV4aXN0aW5nVmFsdWUudmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgdGhpcy5zZXQocHJvcCwgeyB0eXBlOiBcIm1peGVkXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgZXhoYXVzdGl2ZVN3aXRjaEVycm9yKGV4aXN0aW5nVmFsdWUsIFwidHlwZVwiKTtcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCB7XG4gIFJlYWRvbmx5U2hhcmVkU3R5bGVNYXAsXG4gIFNoYXJlZFN0eWxlTWFwXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2hhcmVkU3R5bGVzTWFwLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/SharedStylesMap.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/assets.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/assets.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dataUrlToFile: () => (/* binding */ dataUrlToFile)\n/* harmony export */ });\nfunction dataUrlToFile(url, filename, mimeType) {\n  return fetch(url).then(function(res) {\n    return res.arrayBuffer();\n  }).then(function(buf) {\n    return new File([buf], filename, { type: mimeType });\n  });\n}\n\n//# sourceMappingURL=assets.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2Fzc2V0cy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCx1Q0FBdUMsZ0JBQWdCO0FBQ3ZELEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2Fzc2V0cy5tanM/MDk0YSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBkYXRhVXJsVG9GaWxlKHVybCwgZmlsZW5hbWUsIG1pbWVUeXBlKSB7XG4gIHJldHVybiBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgcmV0dXJuIHJlcy5hcnJheUJ1ZmZlcigpO1xuICB9KS50aGVuKGZ1bmN0aW9uKGJ1Zikge1xuICAgIHJldHVybiBuZXcgRmlsZShbYnVmXSwgZmlsZW5hbWUsIHsgdHlwZTogbWltZVR5cGUgfSk7XG4gIH0pO1xufVxuZXhwb3J0IHtcbiAgZGF0YVVybFRvRmlsZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzc2V0cy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/assets.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   debugFlags: () => (/* binding */ debugFlags),\n/* harmony export */   featureFlags: () => (/* binding */ featureFlags),\n/* harmony export */   pointerCaptureTrackingObject: () => (/* binding */ pointerCaptureTrackingObject)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\n\nconst featureFlags = {\n  // canMoveArrowLabel: createFeatureFlag('canMoveArrowLabel'),\n};\nconst pointerCaptureTrackingObject = createDebugValue(\n  \"pointerCaptureTrackingObject\",\n  // ideally we wouldn't store this mutable value in an atom but it's not\n  // a big deal for debug values\n  {\n    defaults: { all: /* @__PURE__ */ new Map() },\n    shouldStoreForSession: false\n  }\n);\nconst debugFlags = {\n  // --- DEBUG VALUES ---\n  logPreventDefaults: createDebugValue(\"logPreventDefaults\", {\n    defaults: { all: false }\n  }),\n  logPointerCaptures: createDebugValue(\"logPointerCaptures\", {\n    defaults: { all: false }\n  }),\n  logElementRemoves: createDebugValue(\"logElementRemoves\", {\n    defaults: { all: false }\n  }),\n  debugSvg: createDebugValue(\"debugSvg\", {\n    defaults: { all: false }\n  }),\n  showFps: createDebugValue(\"showFps\", {\n    defaults: { all: false }\n  }),\n  measurePerformance: createDebugValue(\"measurePerformance\", { defaults: { all: false } }),\n  throwToBlob: createDebugValue(\"throwToBlob\", {\n    defaults: { all: false }\n  }),\n  reconnectOnPing: createDebugValue(\"reconnectOnPing\", {\n    defaults: { all: false }\n  }),\n  debugCursors: createDebugValue(\"debugCursors\", {\n    defaults: { all: false }\n  }),\n  forceSrgb: createDebugValue(\"forceSrgbColors\", { defaults: { all: false } }),\n  debugGeometry: createDebugValue(\"debugGeometry\", { defaults: { all: false } }),\n  hideShapes: createDebugValue(\"hideShapes\", { defaults: { all: false } }),\n  editOnType: createDebugValue(\"editOnType\", { defaults: { all: false } })\n};\nif (typeof Element !== \"undefined\") {\n  const nativeElementRemoveChild = Element.prototype.removeChild;\n  (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.react)(\"element removal logging\", () => {\n    if (debugFlags.logElementRemoves.get()) {\n      Element.prototype.removeChild = function(child) {\n        console.warn(\"[tldraw] removing child:\", child);\n        return nativeElementRemoveChild.call(this, child);\n      };\n    } else {\n      Element.prototype.removeChild = nativeElementRemoveChild;\n    }\n  });\n}\nfunction createDebugValue(name, {\n  defaults,\n  shouldStoreForSession = true\n}) {\n  return createDebugValueBase({\n    name,\n    defaults,\n    shouldStoreForSession\n  });\n}\nfunction createDebugValueBase(def) {\n  const defaultValue = getDefaultValue(def);\n  const storedValue = def.shouldStoreForSession ? getStoredInitialValue(def.name) : null;\n  const valueAtom = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(`debug:${def.name}`, storedValue ?? defaultValue);\n  if (typeof window !== \"undefined\") {\n    if (def.shouldStoreForSession) {\n      (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.react)(`debug:${def.name}`, () => {\n        const currentValue = valueAtom.get();\n        if (currentValue === defaultValue) {\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.deleteFromSessionStorage)(`tldraw_debug:${def.name}`);\n        } else {\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.setInSessionStorage)(`tldraw_debug:${def.name}`, JSON.stringify(currentValue));\n        }\n      });\n    }\n    Object.defineProperty(window, `tldraw${def.name.replace(/^[a-z]/, (l) => l.toUpperCase())}`, {\n      get() {\n        return valueAtom.get();\n      },\n      set(newValue) {\n        valueAtom.set(newValue);\n      },\n      configurable: true\n    });\n  }\n  return Object.assign(valueAtom, def);\n}\nfunction getStoredInitialValue(name) {\n  try {\n    return JSON.parse((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.getFromSessionStorage)(`tldraw_debug:${name}`) ?? \"null\");\n  } catch (err) {\n    return null;\n  }\n}\nfunction readEnv(fn) {\n  try {\n    return fn();\n  } catch {\n    return null;\n  }\n}\nfunction getDefaultValue(def) {\n  const env = readEnv(() => process.env.TLDRAW_ENV) ?? readEnv(() => process.env.VERCEL_PUBLIC_TLDRAW_ENV) ?? readEnv(() => process.env.NEXT_PUBLIC_TLDRAW_ENV) ?? // default to production because if we don't have one of these, this is probably a library use\n  \"production\";\n  switch (env) {\n    case \"production\":\n      return def.defaults.production ?? def.defaults.all;\n    case \"preview\":\n    case \"staging\":\n      return def.defaults.staging ?? def.defaults.all;\n    default:\n      return def.defaults.development ?? def.defaults.all;\n  }\n}\n\n//# sourceMappingURL=debug-flags.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2RlYnVnLWZsYWdzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE0QztBQUN5RDtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdDQUFnQztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEIsR0FBRztBQUNIO0FBQ0EsZ0JBQWdCO0FBQ2hCLEdBQUc7QUFDSDtBQUNBLGdCQUFnQjtBQUNoQixHQUFHO0FBQ0g7QUFDQSxnQkFBZ0I7QUFDaEIsR0FBRztBQUNIO0FBQ0EsZ0JBQWdCO0FBQ2hCLEdBQUc7QUFDSCwrREFBK0QsWUFBWSxjQUFjO0FBQ3pGO0FBQ0EsZ0JBQWdCO0FBQ2hCLEdBQUc7QUFDSDtBQUNBLGdCQUFnQjtBQUNoQixHQUFHO0FBQ0g7QUFDQSxnQkFBZ0I7QUFDaEIsR0FBRztBQUNILG1EQUFtRCxZQUFZLGNBQWM7QUFDN0UscURBQXFELFlBQVksY0FBYztBQUMvRSwrQ0FBK0MsWUFBWSxjQUFjO0FBQ3pFLCtDQUErQyxZQUFZLGNBQWM7QUFDekU7QUFDQTtBQUNBO0FBQ0EsRUFBRSxvREFBSztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtREFBSSxVQUFVLFNBQVM7QUFDM0M7QUFDQTtBQUNBLE1BQU0sb0RBQUssVUFBVSxTQUFTO0FBQzlCO0FBQ0E7QUFDQSxVQUFVLHVFQUF3QixpQkFBaUIsU0FBUztBQUM1RCxVQUFVO0FBQ1YsVUFBVSxrRUFBbUIsaUJBQWlCLFNBQVM7QUFDdkQ7QUFDQSxPQUFPO0FBQ1A7QUFDQSwyQ0FBMkMsbURBQW1EO0FBQzlGO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG9FQUFxQixpQkFBaUIsS0FBSztBQUNqRSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvZGVidWctZmxhZ3MubWpzP2Q3NjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXRvbSwgcmVhY3QgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHsgZGVsZXRlRnJvbVNlc3Npb25TdG9yYWdlLCBnZXRGcm9tU2Vzc2lvblN0b3JhZ2UsIHNldEluU2Vzc2lvblN0b3JhZ2UgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuY29uc3QgZmVhdHVyZUZsYWdzID0ge1xuICAvLyBjYW5Nb3ZlQXJyb3dMYWJlbDogY3JlYXRlRmVhdHVyZUZsYWcoJ2Nhbk1vdmVBcnJvd0xhYmVsJyksXG59O1xuY29uc3QgcG9pbnRlckNhcHR1cmVUcmFja2luZ09iamVjdCA9IGNyZWF0ZURlYnVnVmFsdWUoXG4gIFwicG9pbnRlckNhcHR1cmVUcmFja2luZ09iamVjdFwiLFxuICAvLyBpZGVhbGx5IHdlIHdvdWxkbid0IHN0b3JlIHRoaXMgbXV0YWJsZSB2YWx1ZSBpbiBhbiBhdG9tIGJ1dCBpdCdzIG5vdFxuICAvLyBhIGJpZyBkZWFsIGZvciBkZWJ1ZyB2YWx1ZXNcbiAge1xuICAgIGRlZmF1bHRzOiB7IGFsbDogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSB9LFxuICAgIHNob3VsZFN0b3JlRm9yU2Vzc2lvbjogZmFsc2VcbiAgfVxuKTtcbmNvbnN0IGRlYnVnRmxhZ3MgPSB7XG4gIC8vIC0tLSBERUJVRyBWQUxVRVMgLS0tXG4gIGxvZ1ByZXZlbnREZWZhdWx0czogY3JlYXRlRGVidWdWYWx1ZShcImxvZ1ByZXZlbnREZWZhdWx0c1wiLCB7XG4gICAgZGVmYXVsdHM6IHsgYWxsOiBmYWxzZSB9XG4gIH0pLFxuICBsb2dQb2ludGVyQ2FwdHVyZXM6IGNyZWF0ZURlYnVnVmFsdWUoXCJsb2dQb2ludGVyQ2FwdHVyZXNcIiwge1xuICAgIGRlZmF1bHRzOiB7IGFsbDogZmFsc2UgfVxuICB9KSxcbiAgbG9nRWxlbWVudFJlbW92ZXM6IGNyZWF0ZURlYnVnVmFsdWUoXCJsb2dFbGVtZW50UmVtb3Zlc1wiLCB7XG4gICAgZGVmYXVsdHM6IHsgYWxsOiBmYWxzZSB9XG4gIH0pLFxuICBkZWJ1Z1N2ZzogY3JlYXRlRGVidWdWYWx1ZShcImRlYnVnU3ZnXCIsIHtcbiAgICBkZWZhdWx0czogeyBhbGw6IGZhbHNlIH1cbiAgfSksXG4gIHNob3dGcHM6IGNyZWF0ZURlYnVnVmFsdWUoXCJzaG93RnBzXCIsIHtcbiAgICBkZWZhdWx0czogeyBhbGw6IGZhbHNlIH1cbiAgfSksXG4gIG1lYXN1cmVQZXJmb3JtYW5jZTogY3JlYXRlRGVidWdWYWx1ZShcIm1lYXN1cmVQZXJmb3JtYW5jZVwiLCB7IGRlZmF1bHRzOiB7IGFsbDogZmFsc2UgfSB9KSxcbiAgdGhyb3dUb0Jsb2I6IGNyZWF0ZURlYnVnVmFsdWUoXCJ0aHJvd1RvQmxvYlwiLCB7XG4gICAgZGVmYXVsdHM6IHsgYWxsOiBmYWxzZSB9XG4gIH0pLFxuICByZWNvbm5lY3RPblBpbmc6IGNyZWF0ZURlYnVnVmFsdWUoXCJyZWNvbm5lY3RPblBpbmdcIiwge1xuICAgIGRlZmF1bHRzOiB7IGFsbDogZmFsc2UgfVxuICB9KSxcbiAgZGVidWdDdXJzb3JzOiBjcmVhdGVEZWJ1Z1ZhbHVlKFwiZGVidWdDdXJzb3JzXCIsIHtcbiAgICBkZWZhdWx0czogeyBhbGw6IGZhbHNlIH1cbiAgfSksXG4gIGZvcmNlU3JnYjogY3JlYXRlRGVidWdWYWx1ZShcImZvcmNlU3JnYkNvbG9yc1wiLCB7IGRlZmF1bHRzOiB7IGFsbDogZmFsc2UgfSB9KSxcbiAgZGVidWdHZW9tZXRyeTogY3JlYXRlRGVidWdWYWx1ZShcImRlYnVnR2VvbWV0cnlcIiwgeyBkZWZhdWx0czogeyBhbGw6IGZhbHNlIH0gfSksXG4gIGhpZGVTaGFwZXM6IGNyZWF0ZURlYnVnVmFsdWUoXCJoaWRlU2hhcGVzXCIsIHsgZGVmYXVsdHM6IHsgYWxsOiBmYWxzZSB9IH0pLFxuICBlZGl0T25UeXBlOiBjcmVhdGVEZWJ1Z1ZhbHVlKFwiZWRpdE9uVHlwZVwiLCB7IGRlZmF1bHRzOiB7IGFsbDogZmFsc2UgfSB9KVxufTtcbmlmICh0eXBlb2YgRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBjb25zdCBuYXRpdmVFbGVtZW50UmVtb3ZlQ2hpbGQgPSBFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVDaGlsZDtcbiAgcmVhY3QoXCJlbGVtZW50IHJlbW92YWwgbG9nZ2luZ1wiLCAoKSA9PiB7XG4gICAgaWYgKGRlYnVnRmxhZ3MubG9nRWxlbWVudFJlbW92ZXMuZ2V0KCkpIHtcbiAgICAgIEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiW3RsZHJhd10gcmVtb3ZpbmcgY2hpbGQ6XCIsIGNoaWxkKTtcbiAgICAgICAgcmV0dXJuIG5hdGl2ZUVsZW1lbnRSZW1vdmVDaGlsZC5jYWxsKHRoaXMsIGNoaWxkKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUNoaWxkID0gbmF0aXZlRWxlbWVudFJlbW92ZUNoaWxkO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVEZWJ1Z1ZhbHVlKG5hbWUsIHtcbiAgZGVmYXVsdHMsXG4gIHNob3VsZFN0b3JlRm9yU2Vzc2lvbiA9IHRydWVcbn0pIHtcbiAgcmV0dXJuIGNyZWF0ZURlYnVnVmFsdWVCYXNlKHtcbiAgICBuYW1lLFxuICAgIGRlZmF1bHRzLFxuICAgIHNob3VsZFN0b3JlRm9yU2Vzc2lvblxuICB9KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZURlYnVnVmFsdWVCYXNlKGRlZikge1xuICBjb25zdCBkZWZhdWx0VmFsdWUgPSBnZXREZWZhdWx0VmFsdWUoZGVmKTtcbiAgY29uc3Qgc3RvcmVkVmFsdWUgPSBkZWYuc2hvdWxkU3RvcmVGb3JTZXNzaW9uID8gZ2V0U3RvcmVkSW5pdGlhbFZhbHVlKGRlZi5uYW1lKSA6IG51bGw7XG4gIGNvbnN0IHZhbHVlQXRvbSA9IGF0b20oYGRlYnVnOiR7ZGVmLm5hbWV9YCwgc3RvcmVkVmFsdWUgPz8gZGVmYXVsdFZhbHVlKTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBpZiAoZGVmLnNob3VsZFN0b3JlRm9yU2Vzc2lvbikge1xuICAgICAgcmVhY3QoYGRlYnVnOiR7ZGVmLm5hbWV9YCwgKCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB2YWx1ZUF0b20uZ2V0KCk7XG4gICAgICAgIGlmIChjdXJyZW50VmFsdWUgPT09IGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgIGRlbGV0ZUZyb21TZXNzaW9uU3RvcmFnZShgdGxkcmF3X2RlYnVnOiR7ZGVmLm5hbWV9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0SW5TZXNzaW9uU3RvcmFnZShgdGxkcmF3X2RlYnVnOiR7ZGVmLm5hbWV9YCwgSlNPTi5zdHJpbmdpZnkoY3VycmVudFZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCBgdGxkcmF3JHtkZWYubmFtZS5yZXBsYWNlKC9eW2Etel0vLCAobCkgPT4gbC50b1VwcGVyQ2FzZSgpKX1gLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZUF0b20uZ2V0KCk7XG4gICAgICB9LFxuICAgICAgc2V0KG5ld1ZhbHVlKSB7XG4gICAgICAgIHZhbHVlQXRvbS5zZXQobmV3VmFsdWUpO1xuICAgICAgfSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBPYmplY3QuYXNzaWduKHZhbHVlQXRvbSwgZGVmKTtcbn1cbmZ1bmN0aW9uIGdldFN0b3JlZEluaXRpYWxWYWx1ZShuYW1lKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZ2V0RnJvbVNlc3Npb25TdG9yYWdlKGB0bGRyYXdfZGVidWc6JHtuYW1lfWApID8/IFwibnVsbFwiKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlYWRFbnYoZm4pIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZm4oKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldERlZmF1bHRWYWx1ZShkZWYpIHtcbiAgY29uc3QgZW52ID0gcmVhZEVudigoKSA9PiBwcm9jZXNzLmVudi5UTERSQVdfRU5WKSA/PyByZWFkRW52KCgpID0+IHByb2Nlc3MuZW52LlZFUkNFTF9QVUJMSUNfVExEUkFXX0VOVikgPz8gcmVhZEVudigoKSA9PiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19UTERSQVdfRU5WKSA/PyAvLyBkZWZhdWx0IHRvIHByb2R1Y3Rpb24gYmVjYXVzZSBpZiB3ZSBkb24ndCBoYXZlIG9uZSBvZiB0aGVzZSwgdGhpcyBpcyBwcm9iYWJseSBhIGxpYnJhcnkgdXNlXG4gIFwicHJvZHVjdGlvblwiO1xuICBzd2l0Y2ggKGVudikge1xuICAgIGNhc2UgXCJwcm9kdWN0aW9uXCI6XG4gICAgICByZXR1cm4gZGVmLmRlZmF1bHRzLnByb2R1Y3Rpb24gPz8gZGVmLmRlZmF1bHRzLmFsbDtcbiAgICBjYXNlIFwicHJldmlld1wiOlxuICAgIGNhc2UgXCJzdGFnaW5nXCI6XG4gICAgICByZXR1cm4gZGVmLmRlZmF1bHRzLnN0YWdpbmcgPz8gZGVmLmRlZmF1bHRzLmFsbDtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGRlZi5kZWZhdWx0cy5kZXZlbG9wbWVudCA/PyBkZWYuZGVmYXVsdHMuYWxsO1xuICB9XG59XG5leHBvcnQge1xuICBkZWJ1Z0ZsYWdzLFxuICBmZWF0dXJlRmxhZ3MsXG4gIHBvaW50ZXJDYXB0dXJlVHJhY2tpbmdPYmplY3Rcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWJ1Zy1mbGFncy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loopToHtmlElement: () => (/* binding */ loopToHtmlElement),\n/* harmony export */   preventDefault: () => (/* binding */ preventDefault),\n/* harmony export */   releasePointerCapture: () => (/* binding */ releasePointerCapture),\n/* harmony export */   setPointerCapture: () => (/* binding */ setPointerCapture),\n/* harmony export */   setStyleProperty: () => (/* binding */ setStyleProperty),\n/* harmony export */   stopEventPropagation: () => (/* binding */ stopEventPropagation)\n/* harmony export */ });\n/* harmony import */ var _debug_flags_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debug-flags.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/debug-flags.mjs\");\n\nfunction loopToHtmlElement(elm) {\n  if (elm instanceof HTMLElement)\n    return elm;\n  if (elm.parentElement)\n    return loopToHtmlElement(elm.parentElement);\n  else\n    throw Error(\"Could not find a parent element of an HTML type!\");\n}\nfunction preventDefault(event) {\n  event.preventDefault();\n  if (_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_0__.debugFlags.logPreventDefaults.get()) {\n    console.warn(\"preventDefault called on event:\", event);\n  }\n}\nfunction setPointerCapture(element, event) {\n  element.setPointerCapture(event.pointerId);\n  if (_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_0__.debugFlags.logPointerCaptures.get()) {\n    const trackingObj = _debug_flags_mjs__WEBPACK_IMPORTED_MODULE_0__.pointerCaptureTrackingObject.get();\n    trackingObj.set(element, (trackingObj.get(element) ?? 0) + 1);\n    console.warn(\"setPointerCapture called on element:\", element, event);\n  }\n}\nfunction releasePointerCapture(element, event) {\n  if (!element.hasPointerCapture(event.pointerId)) {\n    return;\n  }\n  element.releasePointerCapture(event.pointerId);\n  if (_debug_flags_mjs__WEBPACK_IMPORTED_MODULE_0__.debugFlags.logPointerCaptures.get()) {\n    const trackingObj = _debug_flags_mjs__WEBPACK_IMPORTED_MODULE_0__.pointerCaptureTrackingObject.get();\n    if (trackingObj.get(element) === 1) {\n      trackingObj.delete(element);\n    } else if (trackingObj.has(element)) {\n      trackingObj.set(element, trackingObj.get(element) - 1);\n    } else {\n      console.warn(\"Release without capture\");\n    }\n    console.warn(\"releasePointerCapture called on element:\", element, event);\n  }\n}\nconst stopEventPropagation = (e) => e.stopPropagation();\nconst setStyleProperty = (elm, property, value) => {\n  if (!elm)\n    return;\n  elm.style.setProperty(property, value);\n};\n\n//# sourceMappingURL=dom.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2RvbS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE2RTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sd0RBQVU7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sd0RBQVU7QUFDaEIsd0JBQXdCLDBFQUE0QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHdEQUFVO0FBQ2hCLHdCQUF3QiwwRUFBNEI7QUFDcEQ7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvZG9tLm1qcz8zZWNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlYnVnRmxhZ3MsIHBvaW50ZXJDYXB0dXJlVHJhY2tpbmdPYmplY3QgfSBmcm9tIFwiLi9kZWJ1Zy1mbGFncy5tanNcIjtcbmZ1bmN0aW9uIGxvb3BUb0h0bWxFbGVtZW50KGVsbSkge1xuICBpZiAoZWxtIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpXG4gICAgcmV0dXJuIGVsbTtcbiAgaWYgKGVsbS5wYXJlbnRFbGVtZW50KVxuICAgIHJldHVybiBsb29wVG9IdG1sRWxlbWVudChlbG0ucGFyZW50RWxlbWVudCk7XG4gIGVsc2VcbiAgICB0aHJvdyBFcnJvcihcIkNvdWxkIG5vdCBmaW5kIGEgcGFyZW50IGVsZW1lbnQgb2YgYW4gSFRNTCB0eXBlIVwiKTtcbn1cbmZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGlmIChkZWJ1Z0ZsYWdzLmxvZ1ByZXZlbnREZWZhdWx0cy5nZXQoKSkge1xuICAgIGNvbnNvbGUud2FybihcInByZXZlbnREZWZhdWx0IGNhbGxlZCBvbiBldmVudDpcIiwgZXZlbnQpO1xuICB9XG59XG5mdW5jdGlvbiBzZXRQb2ludGVyQ2FwdHVyZShlbGVtZW50LCBldmVudCkge1xuICBlbGVtZW50LnNldFBvaW50ZXJDYXB0dXJlKGV2ZW50LnBvaW50ZXJJZCk7XG4gIGlmIChkZWJ1Z0ZsYWdzLmxvZ1BvaW50ZXJDYXB0dXJlcy5nZXQoKSkge1xuICAgIGNvbnN0IHRyYWNraW5nT2JqID0gcG9pbnRlckNhcHR1cmVUcmFja2luZ09iamVjdC5nZXQoKTtcbiAgICB0cmFja2luZ09iai5zZXQoZWxlbWVudCwgKHRyYWNraW5nT2JqLmdldChlbGVtZW50KSA/PyAwKSArIDEpO1xuICAgIGNvbnNvbGUud2FybihcInNldFBvaW50ZXJDYXB0dXJlIGNhbGxlZCBvbiBlbGVtZW50OlwiLCBlbGVtZW50LCBldmVudCk7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlbGVhc2VQb2ludGVyQ2FwdHVyZShlbGVtZW50LCBldmVudCkge1xuICBpZiAoIWVsZW1lbnQuaGFzUG9pbnRlckNhcHR1cmUoZXZlbnQucG9pbnRlcklkKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBlbGVtZW50LnJlbGVhc2VQb2ludGVyQ2FwdHVyZShldmVudC5wb2ludGVySWQpO1xuICBpZiAoZGVidWdGbGFncy5sb2dQb2ludGVyQ2FwdHVyZXMuZ2V0KCkpIHtcbiAgICBjb25zdCB0cmFja2luZ09iaiA9IHBvaW50ZXJDYXB0dXJlVHJhY2tpbmdPYmplY3QuZ2V0KCk7XG4gICAgaWYgKHRyYWNraW5nT2JqLmdldChlbGVtZW50KSA9PT0gMSkge1xuICAgICAgdHJhY2tpbmdPYmouZGVsZXRlKGVsZW1lbnQpO1xuICAgIH0gZWxzZSBpZiAodHJhY2tpbmdPYmouaGFzKGVsZW1lbnQpKSB7XG4gICAgICB0cmFja2luZ09iai5zZXQoZWxlbWVudCwgdHJhY2tpbmdPYmouZ2V0KGVsZW1lbnQpIC0gMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlJlbGVhc2Ugd2l0aG91dCBjYXB0dXJlXCIpO1xuICAgIH1cbiAgICBjb25zb2xlLndhcm4oXCJyZWxlYXNlUG9pbnRlckNhcHR1cmUgY2FsbGVkIG9uIGVsZW1lbnQ6XCIsIGVsZW1lbnQsIGV2ZW50KTtcbiAgfVxufVxuY29uc3Qgc3RvcEV2ZW50UHJvcGFnYXRpb24gPSAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKTtcbmNvbnN0IHNldFN0eWxlUHJvcGVydHkgPSAoZWxtLCBwcm9wZXJ0eSwgdmFsdWUpID0+IHtcbiAgaWYgKCFlbG0pXG4gICAgcmV0dXJuO1xuICBlbG0uc3R5bGUuc2V0UHJvcGVydHkocHJvcGVydHksIHZhbHVlKTtcbn07XG5leHBvcnQge1xuICBsb29wVG9IdG1sRWxlbWVudCxcbiAgcHJldmVudERlZmF1bHQsXG4gIHJlbGVhc2VQb2ludGVyQ2FwdHVyZSxcbiAgc2V0UG9pbnRlckNhcHR1cmUsXG4gIHNldFN0eWxlUHJvcGVydHksXG4gIHN0b3BFdmVudFByb3BhZ2F0aW9uXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG9tLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/dom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/edgeScrolling.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/edgeScrolling.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   moveCameraWhenCloseToEdge: () => (/* binding */ moveCameraWhenCloseToEdge)\n/* harmony export */ });\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\nfunction getEdgeProximityFactor(editor, position, dimension, isCoarse, insetStart, insetEnd) {\n  const dist = editor.options.edgeScrollDistance;\n  const pw = isCoarse ? editor.options.coarsePointerWidth : 0;\n  const pMin = position - pw;\n  const pMax = position + pw;\n  const min = insetStart ? 0 : dist;\n  const max = insetEnd ? dimension : dimension - dist;\n  if (pMin < min) {\n    return Math.min(1, (min - pMin) / dist);\n  } else if (pMax > max) {\n    return -Math.min(1, (pMax - max) / dist);\n  }\n  return 0;\n}\nfunction moveCameraWhenCloseToEdge(editor) {\n  if (!editor.inputs.isDragging || editor.inputs.isPanning || editor.getCameraOptions().isLocked)\n    return;\n  const {\n    inputs: {\n      currentScreenPoint: { x, y }\n    }\n  } = editor;\n  const zoomLevel = editor.getZoomLevel();\n  const screenBounds = editor.getViewportScreenBounds();\n  const screenSizeFactorX = screenBounds.w < 1e3 ? 0.612 : 1;\n  const screenSizeFactorY = screenBounds.h < 1e3 ? 0.612 : 1;\n  const {\n    isCoarsePointer,\n    insets: [t, r, b, l]\n  } = editor.getInstanceState();\n  const proximityFactorX = getEdgeProximityFactor(editor, x, screenBounds.w, isCoarsePointer, l, r);\n  const proximityFactorY = getEdgeProximityFactor(editor, y, screenBounds.h, isCoarsePointer, t, b);\n  if (proximityFactorX === 0 && proximityFactorY === 0)\n    return;\n  const pxSpeed = editor.user.getEdgeScrollSpeed() * editor.options.edgeScrollSpeed;\n  const scrollDeltaX = pxSpeed * proximityFactorX * screenSizeFactorX / zoomLevel;\n  const scrollDeltaY = pxSpeed * proximityFactorY * screenSizeFactorY / zoomLevel;\n  const camera = editor.getCamera();\n  editor.setCamera(new _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_0__.Vec(camera.x + scrollDeltaX, camera.y + scrollDeltaY, camera.z));\n}\n\n//# sourceMappingURL=edgeScrolling.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2VkZ2VTY3JvbGxpbmcubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixvREFBRztBQUMxQjtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2VkZ2VTY3JvbGxpbmcubWpzP2YwM2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjIH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvVmVjLm1qc1wiO1xuZnVuY3Rpb24gZ2V0RWRnZVByb3hpbWl0eUZhY3RvcihlZGl0b3IsIHBvc2l0aW9uLCBkaW1lbnNpb24sIGlzQ29hcnNlLCBpbnNldFN0YXJ0LCBpbnNldEVuZCkge1xuICBjb25zdCBkaXN0ID0gZWRpdG9yLm9wdGlvbnMuZWRnZVNjcm9sbERpc3RhbmNlO1xuICBjb25zdCBwdyA9IGlzQ29hcnNlID8gZWRpdG9yLm9wdGlvbnMuY29hcnNlUG9pbnRlcldpZHRoIDogMDtcbiAgY29uc3QgcE1pbiA9IHBvc2l0aW9uIC0gcHc7XG4gIGNvbnN0IHBNYXggPSBwb3NpdGlvbiArIHB3O1xuICBjb25zdCBtaW4gPSBpbnNldFN0YXJ0ID8gMCA6IGRpc3Q7XG4gIGNvbnN0IG1heCA9IGluc2V0RW5kID8gZGltZW5zaW9uIDogZGltZW5zaW9uIC0gZGlzdDtcbiAgaWYgKHBNaW4gPCBtaW4pIHtcbiAgICByZXR1cm4gTWF0aC5taW4oMSwgKG1pbiAtIHBNaW4pIC8gZGlzdCk7XG4gIH0gZWxzZSBpZiAocE1heCA+IG1heCkge1xuICAgIHJldHVybiAtTWF0aC5taW4oMSwgKHBNYXggLSBtYXgpIC8gZGlzdCk7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5mdW5jdGlvbiBtb3ZlQ2FtZXJhV2hlbkNsb3NlVG9FZGdlKGVkaXRvcikge1xuICBpZiAoIWVkaXRvci5pbnB1dHMuaXNEcmFnZ2luZyB8fCBlZGl0b3IuaW5wdXRzLmlzUGFubmluZyB8fCBlZGl0b3IuZ2V0Q2FtZXJhT3B0aW9ucygpLmlzTG9ja2VkKVxuICAgIHJldHVybjtcbiAgY29uc3Qge1xuICAgIGlucHV0czoge1xuICAgICAgY3VycmVudFNjcmVlblBvaW50OiB7IHgsIHkgfVxuICAgIH1cbiAgfSA9IGVkaXRvcjtcbiAgY29uc3Qgem9vbUxldmVsID0gZWRpdG9yLmdldFpvb21MZXZlbCgpO1xuICBjb25zdCBzY3JlZW5Cb3VuZHMgPSBlZGl0b3IuZ2V0Vmlld3BvcnRTY3JlZW5Cb3VuZHMoKTtcbiAgY29uc3Qgc2NyZWVuU2l6ZUZhY3RvclggPSBzY3JlZW5Cb3VuZHMudyA8IDFlMyA/IDAuNjEyIDogMTtcbiAgY29uc3Qgc2NyZWVuU2l6ZUZhY3RvclkgPSBzY3JlZW5Cb3VuZHMuaCA8IDFlMyA/IDAuNjEyIDogMTtcbiAgY29uc3Qge1xuICAgIGlzQ29hcnNlUG9pbnRlcixcbiAgICBpbnNldHM6IFt0LCByLCBiLCBsXVxuICB9ID0gZWRpdG9yLmdldEluc3RhbmNlU3RhdGUoKTtcbiAgY29uc3QgcHJveGltaXR5RmFjdG9yWCA9IGdldEVkZ2VQcm94aW1pdHlGYWN0b3IoZWRpdG9yLCB4LCBzY3JlZW5Cb3VuZHMudywgaXNDb2Fyc2VQb2ludGVyLCBsLCByKTtcbiAgY29uc3QgcHJveGltaXR5RmFjdG9yWSA9IGdldEVkZ2VQcm94aW1pdHlGYWN0b3IoZWRpdG9yLCB5LCBzY3JlZW5Cb3VuZHMuaCwgaXNDb2Fyc2VQb2ludGVyLCB0LCBiKTtcbiAgaWYgKHByb3hpbWl0eUZhY3RvclggPT09IDAgJiYgcHJveGltaXR5RmFjdG9yWSA9PT0gMClcbiAgICByZXR1cm47XG4gIGNvbnN0IHB4U3BlZWQgPSBlZGl0b3IudXNlci5nZXRFZGdlU2Nyb2xsU3BlZWQoKSAqIGVkaXRvci5vcHRpb25zLmVkZ2VTY3JvbGxTcGVlZDtcbiAgY29uc3Qgc2Nyb2xsRGVsdGFYID0gcHhTcGVlZCAqIHByb3hpbWl0eUZhY3RvclggKiBzY3JlZW5TaXplRmFjdG9yWCAvIHpvb21MZXZlbDtcbiAgY29uc3Qgc2Nyb2xsRGVsdGFZID0gcHhTcGVlZCAqIHByb3hpbWl0eUZhY3RvclkgKiBzY3JlZW5TaXplRmFjdG9yWSAvIHpvb21MZXZlbDtcbiAgY29uc3QgY2FtZXJhID0gZWRpdG9yLmdldENhbWVyYSgpO1xuICBlZGl0b3Iuc2V0Q2FtZXJhKG5ldyBWZWMoY2FtZXJhLnggKyBzY3JvbGxEZWx0YVgsIGNhbWVyYS55ICsgc2Nyb2xsRGVsdGFZLCBjYW1lcmEueikpO1xufVxuZXhwb3J0IHtcbiAgbW92ZUNhbWVyYVdoZW5DbG9zZVRvRWRnZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVkZ2VTY3JvbGxpbmcubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/edgeScrolling.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getIncrementedName.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/getIncrementedName.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getIncrementedName: () => (/* binding */ getIncrementedName)\n/* harmony export */ });\nfunction getIncrementedName(name, others) {\n  let result = name;\n  const set = new Set(others);\n  while (set.has(result)) {\n    result = /^.*(\\d+)$/.exec(result)?.[1] ? result.replace(/(\\d+)(?=\\D?)$/, (m) => {\n      return (+m + 1).toString();\n    }) : `${result} 1`;\n  }\n  return result;\n}\n\n//# sourceMappingURL=getIncrementedName.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2dldEluY3JlbWVudGVkTmFtZS5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssT0FBTyxRQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2dldEluY3JlbWVudGVkTmFtZS5tanM/MmNiMSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBnZXRJbmNyZW1lbnRlZE5hbWUobmFtZSwgb3RoZXJzKSB7XG4gIGxldCByZXN1bHQgPSBuYW1lO1xuICBjb25zdCBzZXQgPSBuZXcgU2V0KG90aGVycyk7XG4gIHdoaWxlIChzZXQuaGFzKHJlc3VsdCkpIHtcbiAgICByZXN1bHQgPSAvXi4qKFxcZCspJC8uZXhlYyhyZXN1bHQpPy5bMV0gPyByZXN1bHQucmVwbGFjZSgvKFxcZCspKD89XFxEPykkLywgKG0pID0+IHtcbiAgICAgIHJldHVybiAoK20gKyAxKS50b1N0cmluZygpO1xuICAgIH0pIDogYCR7cmVzdWx0fSAxYDtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IHtcbiAgZ2V0SW5jcmVtZW50ZWROYW1lXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0SW5jcmVtZW50ZWROYW1lLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getIncrementedName.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getPointerInfo: () => (/* binding */ getPointerInfo)\n/* harmony export */ });\nfunction getPointerInfo(e) {\n  ;\n  e.isKilled = true;\n  return {\n    point: {\n      x: e.clientX,\n      y: e.clientY,\n      z: e.pressure\n    },\n    shiftKey: e.shiftKey,\n    altKey: e.altKey,\n    ctrlKey: e.metaKey || e.ctrlKey,\n    pointerId: e.pointerId,\n    button: e.button,\n    isPen: e.pointerType === \"pen\"\n  };\n}\n\n//# sourceMappingURL=getPointerInfo.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2dldFBvaW50ZXJJbmZvLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvZ2V0UG9pbnRlckluZm8ubWpzPzE4NjgiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZ2V0UG9pbnRlckluZm8oZSkge1xuICA7XG4gIGUuaXNLaWxsZWQgPSB0cnVlO1xuICByZXR1cm4ge1xuICAgIHBvaW50OiB7XG4gICAgICB4OiBlLmNsaWVudFgsXG4gICAgICB5OiBlLmNsaWVudFksXG4gICAgICB6OiBlLnByZXNzdXJlXG4gICAgfSxcbiAgICBzaGlmdEtleTogZS5zaGlmdEtleSxcbiAgICBhbHRLZXk6IGUuYWx0S2V5LFxuICAgIGN0cmxLZXk6IGUubWV0YUtleSB8fCBlLmN0cmxLZXksXG4gICAgcG9pbnRlcklkOiBlLnBvaW50ZXJJZCxcbiAgICBidXR0b246IGUuYnV0dG9uLFxuICAgIGlzUGVuOiBlLnBvaW50ZXJUeXBlID09PSBcInBlblwiXG4gIH07XG59XG5leHBvcnQge1xuICBnZXRQb2ludGVySW5mb1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldFBvaW50ZXJJbmZvLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getPointerInfo.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getSvgPathFromPoints.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/getSvgPathFromPoints.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSvgPathFromPoints: () => (/* binding */ getSvgPathFromPoints)\n/* harmony export */ });\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n\nfunction getSvgPathFromPoints(points, closed = true) {\n  const len = points.length;\n  if (len < 2) {\n    return \"\";\n  }\n  let a = points[0];\n  let b = points[1];\n  if (len === 2) {\n    return `M${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.precise)(a)}L${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.precise)(b)}`;\n  }\n  let result = \"\";\n  for (let i = 2, max = len - 1; i < max; i++) {\n    a = points[i];\n    b = points[i + 1];\n    result += (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.average)(a, b);\n  }\n  if (closed) {\n    return `M${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.average)(points[0], points[1])}Q${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.precise)(points[1])}${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.average)(\n      points[1],\n      points[2]\n    )}T${result}${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.average)(points[len - 1], points[0])}${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.average)(points[0], points[1])}Z`;\n  } else {\n    return `M${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.precise)(points[0])}Q${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.precise)(points[1])}${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.average)(points[1], points[2])}${points.length > 3 ? \"T\" : \"\"}${result}L${(0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.precise)(points[len - 1])}`;\n  }\n}\n\n//# sourceMappingURL=getSvgPathFromPoints.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2dldFN2Z1BhdGhGcm9tUG9pbnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4REFBTyxJQUFJLEdBQUcsOERBQU8sSUFBSTtBQUN4QztBQUNBO0FBQ0EsaUNBQWlDLFNBQVM7QUFDMUM7QUFDQTtBQUNBLGNBQWMsOERBQU87QUFDckI7QUFDQTtBQUNBLGVBQWUsOERBQU8sdUJBQXVCLEdBQUcsOERBQU8sWUFBWSxFQUFFLDhEQUFPO0FBQzVFO0FBQ0E7QUFDQSxNQUFNLEdBQUcsT0FBTyxFQUFFLDhEQUFPLDZCQUE2QixFQUFFLDhEQUFPLHVCQUF1QjtBQUN0RixJQUFJO0FBQ0osZUFBZSw4REFBTyxZQUFZLEdBQUcsOERBQU8sWUFBWSxFQUFFLDhEQUFPLHVCQUF1QixFQUFFLDZCQUE2QixFQUFFLE9BQU8sR0FBRyw4REFBTyxrQkFBa0I7QUFDNUo7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2dldFN2Z1BhdGhGcm9tUG9pbnRzLm1qcz9lNjVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF2ZXJhZ2UsIHByZWNpc2UgfSBmcm9tIFwiLi4vcHJpbWl0aXZlcy91dGlscy5tanNcIjtcbmZ1bmN0aW9uIGdldFN2Z1BhdGhGcm9tUG9pbnRzKHBvaW50cywgY2xvc2VkID0gdHJ1ZSkge1xuICBjb25zdCBsZW4gPSBwb2ludHMubGVuZ3RoO1xuICBpZiAobGVuIDwgMikge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG4gIGxldCBhID0gcG9pbnRzWzBdO1xuICBsZXQgYiA9IHBvaW50c1sxXTtcbiAgaWYgKGxlbiA9PT0gMikge1xuICAgIHJldHVybiBgTSR7cHJlY2lzZShhKX1MJHtwcmVjaXNlKGIpfWA7XG4gIH1cbiAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gIGZvciAobGV0IGkgPSAyLCBtYXggPSBsZW4gLSAxOyBpIDwgbWF4OyBpKyspIHtcbiAgICBhID0gcG9pbnRzW2ldO1xuICAgIGIgPSBwb2ludHNbaSArIDFdO1xuICAgIHJlc3VsdCArPSBhdmVyYWdlKGEsIGIpO1xuICB9XG4gIGlmIChjbG9zZWQpIHtcbiAgICByZXR1cm4gYE0ke2F2ZXJhZ2UocG9pbnRzWzBdLCBwb2ludHNbMV0pfVEke3ByZWNpc2UocG9pbnRzWzFdKX0ke2F2ZXJhZ2UoXG4gICAgICBwb2ludHNbMV0sXG4gICAgICBwb2ludHNbMl1cbiAgICApfVQke3Jlc3VsdH0ke2F2ZXJhZ2UocG9pbnRzW2xlbiAtIDFdLCBwb2ludHNbMF0pfSR7YXZlcmFnZShwb2ludHNbMF0sIHBvaW50c1sxXSl9WmA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGBNJHtwcmVjaXNlKHBvaW50c1swXSl9USR7cHJlY2lzZShwb2ludHNbMV0pfSR7YXZlcmFnZShwb2ludHNbMV0sIHBvaW50c1syXSl9JHtwb2ludHMubGVuZ3RoID4gMyA/IFwiVFwiIDogXCJcIn0ke3Jlc3VsdH1MJHtwcmVjaXNlKHBvaW50c1tsZW4gLSAxXSl9YDtcbiAgfVxufVxuZXhwb3J0IHtcbiAgZ2V0U3ZnUGF0aEZyb21Qb2ludHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRTdmdQYXRoRnJvbVBvaW50cy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/getSvgPathFromPoints.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/hardResetEditor.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/hardResetEditor.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hardResetEditor: () => (/* binding */ hardResetEditor)\n/* harmony export */ });\n/* harmony import */ var _runtime_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runtime.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs\");\n\nfunction hardResetEditor() {\n  _runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.runtime.hardReset();\n}\n\n//# sourceMappingURL=hardResetEditor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL2hhcmRSZXNldEVkaXRvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7QUFDeEM7QUFDQSxFQUFFLGlEQUFPO0FBQ1Q7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi91dGlscy9oYXJkUmVzZXRFZGl0b3IubWpzPzI4MmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcnVudGltZSB9IGZyb20gXCIuL3J1bnRpbWUubWpzXCI7XG5mdW5jdGlvbiBoYXJkUmVzZXRFZGl0b3IoKSB7XG4gIHJ1bnRpbWUuaGFyZFJlc2V0KCk7XG59XG5leHBvcnQge1xuICBoYXJkUmVzZXRFZGl0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYXJkUmVzZXRFZGl0b3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/hardResetEditor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/nearestMultiple.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/nearestMultiple.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   nearestMultiple: () => (/* binding */ nearestMultiple)\n/* harmony export */ });\nfunction gcd(a, b) {\n  return b === 0 ? a : gcd(b, a % b);\n}\nfunction nearestMultiple(float) {\n  const decimal = float.toString().split(\".\")[1];\n  if (!decimal)\n    return 1;\n  const denominator = Math.pow(10, decimal.length);\n  const numerator = parseInt(decimal, 10);\n  return denominator / gcd(numerator, denominator);\n}\n\n//# sourceMappingURL=nearestMultiple.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL25lYXJlc3RNdWx0aXBsZS5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi91dGlscy9uZWFyZXN0TXVsdGlwbGUubWpzP2NiODIiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZ2NkKGEsIGIpIHtcbiAgcmV0dXJuIGIgPT09IDAgPyBhIDogZ2NkKGIsIGEgJSBiKTtcbn1cbmZ1bmN0aW9uIG5lYXJlc3RNdWx0aXBsZShmbG9hdCkge1xuICBjb25zdCBkZWNpbWFsID0gZmxvYXQudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV07XG4gIGlmICghZGVjaW1hbClcbiAgICByZXR1cm4gMTtcbiAgY29uc3QgZGVub21pbmF0b3IgPSBNYXRoLnBvdygxMCwgZGVjaW1hbC5sZW5ndGgpO1xuICBjb25zdCBudW1lcmF0b3IgPSBwYXJzZUludChkZWNpbWFsLCAxMCk7XG4gIHJldHVybiBkZW5vbWluYXRvciAvIGdjZChudW1lcmF0b3IsIGRlbm9taW5hdG9yKTtcbn1cbmV4cG9ydCB7XG4gIG5lYXJlc3RNdWx0aXBsZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5lYXJlc3RNdWx0aXBsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/nearestMultiple.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/normalizeWheel.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/normalizeWheel.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalizeWheel: () => (/* binding */ normalizeWheel)\n/* harmony export */ });\nconst MAX_ZOOM_STEP = 10;\nconst IS_DARWIN = /Mac|iPod|iPhone|iPad/.test(\n  // eslint-disable-next-line deprecation/deprecation\n  typeof window === \"undefined\" ? \"node\" : window.navigator.platform\n);\nfunction normalizeWheel(event) {\n  let { deltaY, deltaX } = event;\n  let deltaZ = 0;\n  if (event.ctrlKey || event.altKey || event.metaKey) {\n    deltaZ = (Math.abs(deltaY) > MAX_ZOOM_STEP ? MAX_ZOOM_STEP * Math.sign(deltaY) : deltaY) / 100;\n  } else {\n    if (event.shiftKey && !IS_DARWIN) {\n      deltaX = deltaY;\n      deltaY = 0;\n    }\n  }\n  return { x: -deltaX, y: -deltaY, z: -deltaZ };\n}\n\n//# sourceMappingURL=normalizeWheel.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL25vcm1hbGl6ZVdoZWVsLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpQkFBaUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi91dGlscy9ub3JtYWxpemVXaGVlbC5tanM/NTRiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBNQVhfWk9PTV9TVEVQID0gMTA7XG5jb25zdCBJU19EQVJXSU4gPSAvTWFjfGlQb2R8aVBob25lfGlQYWQvLnRlc3QoXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvblxuICB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiID8gXCJub2RlXCIgOiB3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtXG4pO1xuZnVuY3Rpb24gbm9ybWFsaXplV2hlZWwoZXZlbnQpIHtcbiAgbGV0IHsgZGVsdGFZLCBkZWx0YVggfSA9IGV2ZW50O1xuICBsZXQgZGVsdGFaID0gMDtcbiAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuYWx0S2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcbiAgICBkZWx0YVogPSAoTWF0aC5hYnMoZGVsdGFZKSA+IE1BWF9aT09NX1NURVAgPyBNQVhfWk9PTV9TVEVQICogTWF0aC5zaWduKGRlbHRhWSkgOiBkZWx0YVkpIC8gMTAwO1xuICB9IGVsc2Uge1xuICAgIGlmIChldmVudC5zaGlmdEtleSAmJiAhSVNfREFSV0lOKSB7XG4gICAgICBkZWx0YVggPSBkZWx0YVk7XG4gICAgICBkZWx0YVkgPSAwO1xuICAgIH1cbiAgfVxuICByZXR1cm4geyB4OiAtZGVsdGFYLCB5OiAtZGVsdGFZLCB6OiAtZGVsdGFaIH07XG59XG5leHBvcnQge1xuICBub3JtYWxpemVXaGVlbFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5vcm1hbGl6ZVdoZWVsLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/normalizeWheel.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/refreshPage.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/refreshPage.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   refreshPage: () => (/* binding */ refreshPage)\n/* harmony export */ });\n/* harmony import */ var _runtime_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runtime.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs\");\n\nfunction refreshPage() {\n  _runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.runtime.refreshPage();\n}\n\n//# sourceMappingURL=refreshPage.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3JlZnJlc2hQYWdlLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QztBQUN4QztBQUNBLEVBQUUsaURBQU87QUFDVDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3JlZnJlc2hQYWdlLm1qcz9lNDgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJ1bnRpbWUgfSBmcm9tIFwiLi9ydW50aW1lLm1qc1wiO1xuZnVuY3Rpb24gcmVmcmVzaFBhZ2UoKSB7XG4gIHJ1bnRpbWUucmVmcmVzaFBhZ2UoKTtcbn1cbmV4cG9ydCB7XG4gIHJlZnJlc2hQYWdlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVmcmVzaFBhZ2UubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/refreshPage.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/reorderShapes.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/reorderShapes.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getReorderingShapesChanges: () => (/* binding */ getReorderingShapesChanges)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nfunction getReorderingShapesChanges(editor, operation, ids) {\n  if (ids.length === 0)\n    return [];\n  const parents = /* @__PURE__ */ new Map();\n  for (const shape of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.compact)(ids.map((id) => editor.getShape(id)))) {\n    const { parentId } = shape;\n    if (!parents.has(parentId)) {\n      parents.set(parentId, {\n        children: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.compact)(\n          editor.getSortedChildIdsForParent(parentId).map((id) => editor.getShape(id))\n        ),\n        moving: /* @__PURE__ */ new Set()\n      });\n    }\n    parents.get(parentId).moving.add(shape);\n  }\n  const changes = [];\n  switch (operation) {\n    case \"toBack\": {\n      parents.forEach(({ moving, children }) => reorderToBack(moving, children, changes));\n      break;\n    }\n    case \"toFront\": {\n      parents.forEach(({ moving, children }) => reorderToFront(moving, children, changes));\n      break;\n    }\n    case \"forward\": {\n      parents.forEach(({ moving, children }) => reorderForward(moving, children, changes));\n      break;\n    }\n    case \"backward\": {\n      parents.forEach(({ moving, children }) => reorderBackward(moving, children, changes));\n      break;\n    }\n  }\n  return changes;\n}\nfunction reorderToBack(moving, children, changes) {\n  const len = children.length;\n  if (moving.size === len)\n    return;\n  let below;\n  let above;\n  for (let i = 0; i < len; i++) {\n    const shape = children[i];\n    if (moving.has(shape)) {\n      below = shape.index;\n      moving.delete(shape);\n    } else {\n      above = shape.index;\n      break;\n    }\n  }\n  if (moving.size === 0) {\n    return;\n  } else {\n    const indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndicesBetween)(below, above, moving.size);\n    changes.push(\n      ...Array.from(moving.values()).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sortByIndex).map((shape, i) => ({ ...shape, index: indices[i] }))\n    );\n  }\n}\nfunction reorderToFront(moving, children, changes) {\n  const len = children.length;\n  if (moving.size === len)\n    return;\n  let below;\n  let above;\n  for (let i = len - 1; i > -1; i--) {\n    const shape = children[i];\n    if (moving.has(shape)) {\n      above = shape.index;\n      moving.delete(shape);\n    } else {\n      below = shape.index;\n      break;\n    }\n  }\n  if (moving.size === 0) {\n    return;\n  } else {\n    const indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndicesBetween)(below, above, moving.size);\n    changes.push(\n      ...Array.from(moving.values()).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sortByIndex).map((shape, i) => ({ ...shape, index: indices[i] }))\n    );\n  }\n}\nfunction reorderForward(moving, children, changes) {\n  const len = children.length;\n  if (moving.size === len)\n    return;\n  let state = { name: \"skipping\" };\n  for (let i = 0; i < len; i++) {\n    const isMoving = moving.has(children[i]);\n    switch (state.name) {\n      case \"skipping\": {\n        if (!isMoving)\n          continue;\n        state = { name: \"selecting\", selectIndex: i };\n        break;\n      }\n      case \"selecting\": {\n        if (isMoving)\n          continue;\n        const { selectIndex } = state;\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndicesBetween)(children[i].index, children[i + 1]?.index, i - selectIndex).forEach(\n          (index, k) => changes.push({ ...children[selectIndex + k], index })\n        );\n        state = { name: \"skipping\" };\n        break;\n      }\n    }\n  }\n}\nfunction reorderBackward(moving, children, changes) {\n  const len = children.length;\n  if (moving.size === len)\n    return;\n  let state = { name: \"skipping\" };\n  for (let i = len - 1; i > -1; i--) {\n    const isMoving = moving.has(children[i]);\n    switch (state.name) {\n      case \"skipping\": {\n        if (!isMoving)\n          continue;\n        state = { name: \"selecting\", selectIndex: i };\n        break;\n      }\n      case \"selecting\": {\n        if (isMoving)\n          continue;\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndicesBetween)(children[i - 1]?.index, children[i].index, state.selectIndex - i).forEach(\n          (index, k) => {\n            changes.push({ ...children[i + k + 1], index });\n          }\n        );\n        state = { name: \"skipping\" };\n        break;\n      }\n    }\n  }\n}\n\n//# sourceMappingURL=reorderShapes.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3Jlb3JkZXJTaGFwZXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdFO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNEQUFPO0FBQzdCLFlBQVksV0FBVztBQUN2QjtBQUNBO0FBQ0Esa0JBQWtCLHNEQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixrQkFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsU0FBUztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osb0JBQW9CLGdFQUFpQjtBQUNyQztBQUNBLDBDQUEwQyxzREFBVyx1QkFBdUIsNkJBQTZCO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixvQkFBb0IsZ0VBQWlCO0FBQ3JDO0FBQ0EsMENBQTBDLHNEQUFXLHVCQUF1Qiw2QkFBNkI7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEIsa0JBQWtCLFNBQVM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUIsUUFBUSxnRUFBaUI7QUFDekIsdUNBQXVDLHFDQUFxQztBQUM1RTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEIsd0JBQXdCLFFBQVE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnRUFBaUI7QUFDekI7QUFDQSwyQkFBMkIsK0JBQStCO0FBQzFEO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3Jlb3JkZXJTaGFwZXMubWpzPzBlZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tcGFjdCwgZ2V0SW5kaWNlc0JldHdlZW4sIHNvcnRCeUluZGV4IH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmZ1bmN0aW9uIGdldFJlb3JkZXJpbmdTaGFwZXNDaGFuZ2VzKGVkaXRvciwgb3BlcmF0aW9uLCBpZHMpIHtcbiAgaWYgKGlkcy5sZW5ndGggPT09IDApXG4gICAgcmV0dXJuIFtdO1xuICBjb25zdCBwYXJlbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgZm9yIChjb25zdCBzaGFwZSBvZiBjb21wYWN0KGlkcy5tYXAoKGlkKSA9PiBlZGl0b3IuZ2V0U2hhcGUoaWQpKSkpIHtcbiAgICBjb25zdCB7IHBhcmVudElkIH0gPSBzaGFwZTtcbiAgICBpZiAoIXBhcmVudHMuaGFzKHBhcmVudElkKSkge1xuICAgICAgcGFyZW50cy5zZXQocGFyZW50SWQsIHtcbiAgICAgICAgY2hpbGRyZW46IGNvbXBhY3QoXG4gICAgICAgICAgZWRpdG9yLmdldFNvcnRlZENoaWxkSWRzRm9yUGFyZW50KHBhcmVudElkKS5tYXAoKGlkKSA9PiBlZGl0b3IuZ2V0U2hhcGUoaWQpKVxuICAgICAgICApLFxuICAgICAgICBtb3Zpbmc6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KClcbiAgICAgIH0pO1xuICAgIH1cbiAgICBwYXJlbnRzLmdldChwYXJlbnRJZCkubW92aW5nLmFkZChzaGFwZSk7XG4gIH1cbiAgY29uc3QgY2hhbmdlcyA9IFtdO1xuICBzd2l0Y2ggKG9wZXJhdGlvbikge1xuICAgIGNhc2UgXCJ0b0JhY2tcIjoge1xuICAgICAgcGFyZW50cy5mb3JFYWNoKCh7IG1vdmluZywgY2hpbGRyZW4gfSkgPT4gcmVvcmRlclRvQmFjayhtb3ZpbmcsIGNoaWxkcmVuLCBjaGFuZ2VzKSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSBcInRvRnJvbnRcIjoge1xuICAgICAgcGFyZW50cy5mb3JFYWNoKCh7IG1vdmluZywgY2hpbGRyZW4gfSkgPT4gcmVvcmRlclRvRnJvbnQobW92aW5nLCBjaGlsZHJlbiwgY2hhbmdlcykpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgXCJmb3J3YXJkXCI6IHtcbiAgICAgIHBhcmVudHMuZm9yRWFjaCgoeyBtb3ZpbmcsIGNoaWxkcmVuIH0pID0+IHJlb3JkZXJGb3J3YXJkKG1vdmluZywgY2hpbGRyZW4sIGNoYW5nZXMpKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwiYmFja3dhcmRcIjoge1xuICAgICAgcGFyZW50cy5mb3JFYWNoKCh7IG1vdmluZywgY2hpbGRyZW4gfSkgPT4gcmVvcmRlckJhY2t3YXJkKG1vdmluZywgY2hpbGRyZW4sIGNoYW5nZXMpKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2hhbmdlcztcbn1cbmZ1bmN0aW9uIHJlb3JkZXJUb0JhY2sobW92aW5nLCBjaGlsZHJlbiwgY2hhbmdlcykge1xuICBjb25zdCBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7XG4gIGlmIChtb3Zpbmcuc2l6ZSA9PT0gbGVuKVxuICAgIHJldHVybjtcbiAgbGV0IGJlbG93O1xuICBsZXQgYWJvdmU7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCBzaGFwZSA9IGNoaWxkcmVuW2ldO1xuICAgIGlmIChtb3ZpbmcuaGFzKHNoYXBlKSkge1xuICAgICAgYmVsb3cgPSBzaGFwZS5pbmRleDtcbiAgICAgIG1vdmluZy5kZWxldGUoc2hhcGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhYm92ZSA9IHNoYXBlLmluZGV4O1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmIChtb3Zpbmcuc2l6ZSA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBpbmRpY2VzID0gZ2V0SW5kaWNlc0JldHdlZW4oYmVsb3csIGFib3ZlLCBtb3Zpbmcuc2l6ZSk7XG4gICAgY2hhbmdlcy5wdXNoKFxuICAgICAgLi4uQXJyYXkuZnJvbShtb3ZpbmcudmFsdWVzKCkpLnNvcnQoc29ydEJ5SW5kZXgpLm1hcCgoc2hhcGUsIGkpID0+ICh7IC4uLnNoYXBlLCBpbmRleDogaW5kaWNlc1tpXSB9KSlcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiByZW9yZGVyVG9Gcm9udChtb3ZpbmcsIGNoaWxkcmVuLCBjaGFuZ2VzKSB7XG4gIGNvbnN0IGxlbiA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgaWYgKG1vdmluZy5zaXplID09PSBsZW4pXG4gICAgcmV0dXJuO1xuICBsZXQgYmVsb3c7XG4gIGxldCBhYm92ZTtcbiAgZm9yIChsZXQgaSA9IGxlbiAtIDE7IGkgPiAtMTsgaS0tKSB7XG4gICAgY29uc3Qgc2hhcGUgPSBjaGlsZHJlbltpXTtcbiAgICBpZiAobW92aW5nLmhhcyhzaGFwZSkpIHtcbiAgICAgIGFib3ZlID0gc2hhcGUuaW5kZXg7XG4gICAgICBtb3ZpbmcuZGVsZXRlKHNoYXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYmVsb3cgPSBzaGFwZS5pbmRleDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAobW92aW5nLnNpemUgPT09IDApIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgaW5kaWNlcyA9IGdldEluZGljZXNCZXR3ZWVuKGJlbG93LCBhYm92ZSwgbW92aW5nLnNpemUpO1xuICAgIGNoYW5nZXMucHVzaChcbiAgICAgIC4uLkFycmF5LmZyb20obW92aW5nLnZhbHVlcygpKS5zb3J0KHNvcnRCeUluZGV4KS5tYXAoKHNoYXBlLCBpKSA9PiAoeyAuLi5zaGFwZSwgaW5kZXg6IGluZGljZXNbaV0gfSkpXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gcmVvcmRlckZvcndhcmQobW92aW5nLCBjaGlsZHJlbiwgY2hhbmdlcykge1xuICBjb25zdCBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7XG4gIGlmIChtb3Zpbmcuc2l6ZSA9PT0gbGVuKVxuICAgIHJldHVybjtcbiAgbGV0IHN0YXRlID0geyBuYW1lOiBcInNraXBwaW5nXCIgfTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IGlzTW92aW5nID0gbW92aW5nLmhhcyhjaGlsZHJlbltpXSk7XG4gICAgc3dpdGNoIChzdGF0ZS5uYW1lKSB7XG4gICAgICBjYXNlIFwic2tpcHBpbmdcIjoge1xuICAgICAgICBpZiAoIWlzTW92aW5nKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBzdGF0ZSA9IHsgbmFtZTogXCJzZWxlY3RpbmdcIiwgc2VsZWN0SW5kZXg6IGkgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwic2VsZWN0aW5nXCI6IHtcbiAgICAgICAgaWYgKGlzTW92aW5nKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCB7IHNlbGVjdEluZGV4IH0gPSBzdGF0ZTtcbiAgICAgICAgZ2V0SW5kaWNlc0JldHdlZW4oY2hpbGRyZW5baV0uaW5kZXgsIGNoaWxkcmVuW2kgKyAxXT8uaW5kZXgsIGkgLSBzZWxlY3RJbmRleCkuZm9yRWFjaChcbiAgICAgICAgICAoaW5kZXgsIGspID0+IGNoYW5nZXMucHVzaCh7IC4uLmNoaWxkcmVuW3NlbGVjdEluZGV4ICsga10sIGluZGV4IH0pXG4gICAgICAgICk7XG4gICAgICAgIHN0YXRlID0geyBuYW1lOiBcInNraXBwaW5nXCIgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiByZW9yZGVyQmFja3dhcmQobW92aW5nLCBjaGlsZHJlbiwgY2hhbmdlcykge1xuICBjb25zdCBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7XG4gIGlmIChtb3Zpbmcuc2l6ZSA9PT0gbGVuKVxuICAgIHJldHVybjtcbiAgbGV0IHN0YXRlID0geyBuYW1lOiBcInNraXBwaW5nXCIgfTtcbiAgZm9yIChsZXQgaSA9IGxlbiAtIDE7IGkgPiAtMTsgaS0tKSB7XG4gICAgY29uc3QgaXNNb3ZpbmcgPSBtb3ZpbmcuaGFzKGNoaWxkcmVuW2ldKTtcbiAgICBzd2l0Y2ggKHN0YXRlLm5hbWUpIHtcbiAgICAgIGNhc2UgXCJza2lwcGluZ1wiOiB7XG4gICAgICAgIGlmICghaXNNb3ZpbmcpXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIHN0YXRlID0geyBuYW1lOiBcInNlbGVjdGluZ1wiLCBzZWxlY3RJbmRleDogaSB9O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJzZWxlY3RpbmdcIjoge1xuICAgICAgICBpZiAoaXNNb3ZpbmcpXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGdldEluZGljZXNCZXR3ZWVuKGNoaWxkcmVuW2kgLSAxXT8uaW5kZXgsIGNoaWxkcmVuW2ldLmluZGV4LCBzdGF0ZS5zZWxlY3RJbmRleCAtIGkpLmZvckVhY2goXG4gICAgICAgICAgKGluZGV4LCBrKSA9PiB7XG4gICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyAuLi5jaGlsZHJlbltpICsgayArIDFdLCBpbmRleCB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHN0YXRlID0geyBuYW1lOiBcInNraXBwaW5nXCIgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5leHBvcnQge1xuICBnZXRSZW9yZGVyaW5nU2hhcGVzQ2hhbmdlc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlb3JkZXJTaGFwZXMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/reorderShapes.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/rotation.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/rotation.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyRotationToSnapshotShapes: () => (/* binding */ applyRotationToSnapshotShapes),\n/* harmony export */   getRotationSnapshot: () => (/* binding */ getRotationSnapshot)\n/* harmony export */ });\n/* harmony import */ var _tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/tlschema */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../primitives/Mat.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Mat.mjs\");\n/* harmony import */ var _primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../primitives/utils.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/utils.mjs\");\n/* harmony import */ var _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../primitives/Vec.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/primitives/Vec.mjs\");\n\n\n\n\n\nfunction getRotationSnapshot({ editor }) {\n  const selectedShapes = editor.getSelectedShapes();\n  const selectionRotation = editor.getSelectionRotation();\n  const selectionBounds = editor.getSelectionRotatedPageBounds();\n  const {\n    inputs: { originPagePoint }\n  } = editor;\n  if (!selectionBounds) {\n    return null;\n  }\n  const selectionPageCenter = selectionBounds.center.clone().rotWith(selectionBounds.point, selectionRotation);\n  return {\n    selectionPageCenter,\n    initialCursorAngle: selectionPageCenter.angle(originPagePoint),\n    initialSelectionRotation: selectionRotation,\n    shapeSnapshots: selectedShapes.map((shape) => ({\n      shape: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.structuredClone)(shape),\n      initialPagePoint: editor.getShapePageTransform(shape.id).point()\n    }))\n  };\n}\nfunction applyRotationToSnapshotShapes({\n  delta,\n  editor,\n  snapshot,\n  stage\n}) {\n  const { selectionPageCenter, shapeSnapshots } = snapshot;\n  editor.updateShapes(\n    shapeSnapshots.map(({ shape, initialPagePoint }) => {\n      const parentTransform = (0,_tldraw_tlschema__WEBPACK_IMPORTED_MODULE_0__.isShapeId)(shape.parentId) ? editor.getShapePageTransform(shape.parentId) : _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_2__.Mat.Identity();\n      const newPagePoint = _primitives_Vec_mjs__WEBPACK_IMPORTED_MODULE_4__.Vec.RotWith(initialPagePoint, selectionPageCenter, delta);\n      const newLocalPoint = _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_2__.Mat.applyToPoint(\n        // use the current parent transform in case it has moved/resized since the start\n        // (e.g. if rotating a shape at the edge of a group)\n        _primitives_Mat_mjs__WEBPACK_IMPORTED_MODULE_2__.Mat.Inverse(parentTransform),\n        newPagePoint\n      );\n      const newRotation = (0,_primitives_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.canonicalizeRotation)(shape.rotation + delta);\n      return {\n        id: shape.id,\n        type: shape.type,\n        x: newLocalPoint.x,\n        y: newLocalPoint.y,\n        rotation: newRotation\n      };\n    })\n  );\n  const changes = [];\n  shapeSnapshots.forEach(({ shape }) => {\n    const current = editor.getShape(shape.id);\n    if (!current)\n      return;\n    const util = editor.getShapeUtil(shape);\n    if (stage === \"start\" || stage === \"one-off\") {\n      const changeStart = util.onRotateStart?.(shape);\n      if (changeStart)\n        changes.push(changeStart);\n    }\n    const changeUpdate = util.onRotate?.(shape, current);\n    if (changeUpdate)\n      changes.push(changeUpdate);\n    if (stage === \"end\" || stage === \"one-off\") {\n      const changeEnd = util.onRotateEnd?.(shape, current);\n      if (changeEnd)\n        changes.push(changeEnd);\n    }\n  });\n  if (changes.length > 0) {\n    editor.updateShapes(changes);\n  }\n}\n\n//# sourceMappingURL=rotation.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3JvdGF0aW9uLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTZDO0FBQ0c7QUFDSjtBQUNtQjtBQUNuQjtBQUM1QywrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4REFBZTtBQUM1QjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxVQUFVLHNDQUFzQztBQUNoRDtBQUNBLDBCQUEwQix5QkFBeUI7QUFDbkQsOEJBQThCLDJEQUFTLGtFQUFrRSxvREFBRztBQUM1RywyQkFBMkIsb0RBQUc7QUFDOUIsNEJBQTRCLG9EQUFHO0FBQy9CO0FBQ0E7QUFDQSxRQUFRLG9EQUFHO0FBQ1g7QUFDQTtBQUNBLDBCQUEwQiwyRUFBb0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRCQUE0QixPQUFPO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi91dGlscy9yb3RhdGlvbi5tanM/ZTQ0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc1NoYXBlSWQgfSBmcm9tIFwiQHRsZHJhdy90bHNjaGVtYVwiO1xuaW1wb3J0IHsgc3RydWN0dXJlZENsb25lIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IE1hdCB9IGZyb20gXCIuLi9wcmltaXRpdmVzL01hdC5tanNcIjtcbmltcG9ydCB7IGNhbm9uaWNhbGl6ZVJvdGF0aW9uIH0gZnJvbSBcIi4uL3ByaW1pdGl2ZXMvdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBWZWMgfSBmcm9tIFwiLi4vcHJpbWl0aXZlcy9WZWMubWpzXCI7XG5mdW5jdGlvbiBnZXRSb3RhdGlvblNuYXBzaG90KHsgZWRpdG9yIH0pIHtcbiAgY29uc3Qgc2VsZWN0ZWRTaGFwZXMgPSBlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZXMoKTtcbiAgY29uc3Qgc2VsZWN0aW9uUm90YXRpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uUm90YXRpb24oKTtcbiAgY29uc3Qgc2VsZWN0aW9uQm91bmRzID0gZWRpdG9yLmdldFNlbGVjdGlvblJvdGF0ZWRQYWdlQm91bmRzKCk7XG4gIGNvbnN0IHtcbiAgICBpbnB1dHM6IHsgb3JpZ2luUGFnZVBvaW50IH1cbiAgfSA9IGVkaXRvcjtcbiAgaWYgKCFzZWxlY3Rpb25Cb3VuZHMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBzZWxlY3Rpb25QYWdlQ2VudGVyID0gc2VsZWN0aW9uQm91bmRzLmNlbnRlci5jbG9uZSgpLnJvdFdpdGgoc2VsZWN0aW9uQm91bmRzLnBvaW50LCBzZWxlY3Rpb25Sb3RhdGlvbik7XG4gIHJldHVybiB7XG4gICAgc2VsZWN0aW9uUGFnZUNlbnRlcixcbiAgICBpbml0aWFsQ3Vyc29yQW5nbGU6IHNlbGVjdGlvblBhZ2VDZW50ZXIuYW5nbGUob3JpZ2luUGFnZVBvaW50KSxcbiAgICBpbml0aWFsU2VsZWN0aW9uUm90YXRpb246IHNlbGVjdGlvblJvdGF0aW9uLFxuICAgIHNoYXBlU25hcHNob3RzOiBzZWxlY3RlZFNoYXBlcy5tYXAoKHNoYXBlKSA9PiAoe1xuICAgICAgc2hhcGU6IHN0cnVjdHVyZWRDbG9uZShzaGFwZSksXG4gICAgICBpbml0aWFsUGFnZVBvaW50OiBlZGl0b3IuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlLmlkKS5wb2ludCgpXG4gICAgfSkpXG4gIH07XG59XG5mdW5jdGlvbiBhcHBseVJvdGF0aW9uVG9TbmFwc2hvdFNoYXBlcyh7XG4gIGRlbHRhLFxuICBlZGl0b3IsXG4gIHNuYXBzaG90LFxuICBzdGFnZVxufSkge1xuICBjb25zdCB7IHNlbGVjdGlvblBhZ2VDZW50ZXIsIHNoYXBlU25hcHNob3RzIH0gPSBzbmFwc2hvdDtcbiAgZWRpdG9yLnVwZGF0ZVNoYXBlcyhcbiAgICBzaGFwZVNuYXBzaG90cy5tYXAoKHsgc2hhcGUsIGluaXRpYWxQYWdlUG9pbnQgfSkgPT4ge1xuICAgICAgY29uc3QgcGFyZW50VHJhbnNmb3JtID0gaXNTaGFwZUlkKHNoYXBlLnBhcmVudElkKSA/IGVkaXRvci5nZXRTaGFwZVBhZ2VUcmFuc2Zvcm0oc2hhcGUucGFyZW50SWQpIDogTWF0LklkZW50aXR5KCk7XG4gICAgICBjb25zdCBuZXdQYWdlUG9pbnQgPSBWZWMuUm90V2l0aChpbml0aWFsUGFnZVBvaW50LCBzZWxlY3Rpb25QYWdlQ2VudGVyLCBkZWx0YSk7XG4gICAgICBjb25zdCBuZXdMb2NhbFBvaW50ID0gTWF0LmFwcGx5VG9Qb2ludChcbiAgICAgICAgLy8gdXNlIHRoZSBjdXJyZW50IHBhcmVudCB0cmFuc2Zvcm0gaW4gY2FzZSBpdCBoYXMgbW92ZWQvcmVzaXplZCBzaW5jZSB0aGUgc3RhcnRcbiAgICAgICAgLy8gKGUuZy4gaWYgcm90YXRpbmcgYSBzaGFwZSBhdCB0aGUgZWRnZSBvZiBhIGdyb3VwKVxuICAgICAgICBNYXQuSW52ZXJzZShwYXJlbnRUcmFuc2Zvcm0pLFxuICAgICAgICBuZXdQYWdlUG9pbnRcbiAgICAgICk7XG4gICAgICBjb25zdCBuZXdSb3RhdGlvbiA9IGNhbm9uaWNhbGl6ZVJvdGF0aW9uKHNoYXBlLnJvdGF0aW9uICsgZGVsdGEpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHNoYXBlLmlkLFxuICAgICAgICB0eXBlOiBzaGFwZS50eXBlLFxuICAgICAgICB4OiBuZXdMb2NhbFBvaW50LngsXG4gICAgICAgIHk6IG5ld0xvY2FsUG9pbnQueSxcbiAgICAgICAgcm90YXRpb246IG5ld1JvdGF0aW9uXG4gICAgICB9O1xuICAgIH0pXG4gICk7XG4gIGNvbnN0IGNoYW5nZXMgPSBbXTtcbiAgc2hhcGVTbmFwc2hvdHMuZm9yRWFjaCgoeyBzaGFwZSB9KSA9PiB7XG4gICAgY29uc3QgY3VycmVudCA9IGVkaXRvci5nZXRTaGFwZShzaGFwZS5pZCk7XG4gICAgaWYgKCFjdXJyZW50KVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHV0aWwgPSBlZGl0b3IuZ2V0U2hhcGVVdGlsKHNoYXBlKTtcbiAgICBpZiAoc3RhZ2UgPT09IFwic3RhcnRcIiB8fCBzdGFnZSA9PT0gXCJvbmUtb2ZmXCIpIHtcbiAgICAgIGNvbnN0IGNoYW5nZVN0YXJ0ID0gdXRpbC5vblJvdGF0ZVN0YXJ0Py4oc2hhcGUpO1xuICAgICAgaWYgKGNoYW5nZVN0YXJ0KVxuICAgICAgICBjaGFuZ2VzLnB1c2goY2hhbmdlU3RhcnQpO1xuICAgIH1cbiAgICBjb25zdCBjaGFuZ2VVcGRhdGUgPSB1dGlsLm9uUm90YXRlPy4oc2hhcGUsIGN1cnJlbnQpO1xuICAgIGlmIChjaGFuZ2VVcGRhdGUpXG4gICAgICBjaGFuZ2VzLnB1c2goY2hhbmdlVXBkYXRlKTtcbiAgICBpZiAoc3RhZ2UgPT09IFwiZW5kXCIgfHwgc3RhZ2UgPT09IFwib25lLW9mZlwiKSB7XG4gICAgICBjb25zdCBjaGFuZ2VFbmQgPSB1dGlsLm9uUm90YXRlRW5kPy4oc2hhcGUsIGN1cnJlbnQpO1xuICAgICAgaWYgKGNoYW5nZUVuZClcbiAgICAgICAgY2hhbmdlcy5wdXNoKGNoYW5nZUVuZCk7XG4gICAgfVxuICB9KTtcbiAgaWYgKGNoYW5nZXMubGVuZ3RoID4gMCkge1xuICAgIGVkaXRvci51cGRhdGVTaGFwZXMoY2hhbmdlcyk7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIGFwcGx5Um90YXRpb25Ub1NuYXBzaG90U2hhcGVzLFxuICBnZXRSb3RhdGlvblNuYXBzaG90XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm90YXRpb24ubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/rotation.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   runtime: () => (/* binding */ runtime),\n/* harmony export */   setRuntimeOverrides: () => (/* binding */ setRuntimeOverrides)\n/* harmony export */ });\nconst runtime = {\n  openWindow: (url, target) => window.open(url, target, \"noopener noreferrer\"),\n  refreshPage: () => window.location.reload(),\n  hardReset: async () => await window.__tldraw__hardReset?.()\n};\nfunction setRuntimeOverrides(input) {\n  Object.assign(runtime, input);\n}\n\n//# sourceMappingURL=runtime.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3J1bnRpbWUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3J1bnRpbWUubWpzPzA2ZTAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcnVudGltZSA9IHtcbiAgb3BlbldpbmRvdzogKHVybCwgdGFyZ2V0KSA9PiB3aW5kb3cub3Blbih1cmwsIHRhcmdldCwgXCJub29wZW5lciBub3JlZmVycmVyXCIpLFxuICByZWZyZXNoUGFnZTogKCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpLFxuICBoYXJkUmVzZXQ6IGFzeW5jICgpID0+IGF3YWl0IHdpbmRvdy5fX3RsZHJhd19faGFyZFJlc2V0Py4oKVxufTtcbmZ1bmN0aW9uIHNldFJ1bnRpbWVPdmVycmlkZXMoaW5wdXQpIHtcbiAgT2JqZWN0LmFzc2lnbihydW50aW1lLCBpbnB1dCk7XG59XG5leHBvcnQge1xuICBydW50aW1lLFxuICBzZXRSdW50aW1lT3ZlcnJpZGVzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVudGltZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/TLLocalSyncClient.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/TLLocalSyncClient.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BroadcastChannelMock: () => (/* binding */ BroadcastChannelMock),\n/* harmony export */   TLLocalSyncClient: () => (/* binding */ TLLocalSyncClient)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../config/TLSessionStateSnapshot.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/config/TLSessionStateSnapshot.mjs\");\n/* harmony import */ var _alerts_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./alerts.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/alerts.mjs\");\n/* harmony import */ var _indexedDb_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./indexedDb.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/indexedDb.mjs\");\n\n\n\n\n\n\nconst PERSIST_THROTTLE_MS = 350;\nconst PERSIST_RETRY_THROTTLE_MS = 1e4;\nconst UPDATE_INSTANCE_STATE = Symbol(\"UPDATE_INSTANCE_STATE\");\nconst msg = (msg2) => msg2;\nclass BroadcastChannelMock {\n  onmessage;\n  constructor(_name) {\n  }\n  postMessage(_msg) {\n  }\n  close() {\n  }\n}\nconst BC = typeof BroadcastChannel === \"undefined\" ? BroadcastChannelMock : BroadcastChannel;\nclass TLLocalSyncClient {\n  constructor(store, {\n    persistenceKey,\n    sessionId = _config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_3__.TAB_ID,\n    onLoad,\n    onLoadError\n  }, channel = new BC(`tldraw-tab-sync-${persistenceKey}`)) {\n    this.store = store;\n    this.channel = channel;\n    if (typeof window !== \"undefined\") {\n      ;\n      window.tlsync = this;\n    }\n    this.persistenceKey = persistenceKey;\n    this.sessionId = sessionId;\n    this.serializedSchema = this.store.schema.serialize();\n    this.$sessionStateSnapshot = (0,_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStateSnapshotSignal)(this.store);\n    this.disposables.add(\n      // Set up a subscription to changes from the store: When\n      // the store changes (and if the change was made by the user)\n      // then immediately send the diff to other tabs via postMessage\n      // and schedule a persist.\n      store.listen(\n        ({ changes }) => {\n          this.diffQueue.push(changes);\n          this.channel.postMessage(\n            msg({\n              type: \"diff\",\n              storeId: this.store.id,\n              changes,\n              schema: this.serializedSchema\n            })\n          );\n          this.schedulePersist();\n        },\n        { source: \"user\", scope: \"document\" }\n      )\n    );\n    this.disposables.add(\n      store.listen(\n        () => {\n          this.diffQueue.push(UPDATE_INSTANCE_STATE);\n          this.schedulePersist();\n        },\n        { scope: \"session\" }\n      )\n    );\n    this.connect(onLoad, onLoadError);\n    this.documentTypes = new Set(\n      Object.values(this.store.schema.types).filter((t) => t.scope === \"document\").map((t) => t.typeName)\n    );\n  }\n  disposables = /* @__PURE__ */ new Set();\n  diffQueue = [];\n  didDispose = false;\n  shouldDoFullDBWrite = true;\n  isReloading = false;\n  persistenceKey;\n  sessionId;\n  serializedSchema;\n  isDebugging = false;\n  documentTypes;\n  $sessionStateSnapshot;\n  initTime = Date.now();\n  debug(...args) {\n    if (this.isDebugging) {\n      console.debug(...args);\n    }\n  }\n  async connect(onLoad, onLoadError) {\n    this.debug(\"connecting\");\n    let data;\n    try {\n      data = await (0,_indexedDb_mjs__WEBPACK_IMPORTED_MODULE_5__.loadDataFromStore)({\n        persistenceKey: this.persistenceKey,\n        sessionId: this.sessionId,\n        didCancel: () => this.didDispose\n      });\n    } catch (error) {\n      onLoadError(error);\n      (0,_alerts_mjs__WEBPACK_IMPORTED_MODULE_4__.showCantReadFromIndexDbAlert)();\n      if (typeof window !== \"undefined\") {\n        window.location.reload();\n      }\n      return;\n    }\n    this.debug(\"loaded data from store\", data, \"didDispose\", this.didDispose);\n    if (this.didDispose)\n      return;\n    try {\n      if (data) {\n        const documentSnapshot = Object.fromEntries(data.records.map((r) => [r.id, r]));\n        const sessionStateSnapshot = data.sessionStateSnapshot ?? (0,_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_3__.extractSessionStateFromLegacySnapshot)(documentSnapshot);\n        const migrationResult = this.store.schema.migrateStoreSnapshot({\n          store: documentSnapshot,\n          // eslint-disable-next-line deprecation/deprecation\n          schema: data.schema ?? this.store.schema.serializeEarliestVersion()\n        });\n        if (migrationResult.type === \"error\") {\n          console.error(\"failed to migrate store\", migrationResult);\n          onLoadError(new Error(`Failed to migrate store: ${migrationResult.reason}`));\n          return;\n        }\n        this.store.mergeRemoteChanges(() => {\n          this.store.put(\n            Object.values(migrationResult.value).filter((r) => this.documentTypes.has(r.typeName)),\n            \"initialize\"\n          );\n        });\n        if (sessionStateSnapshot) {\n          (0,_config_TLSessionStateSnapshot_mjs__WEBPACK_IMPORTED_MODULE_3__.loadSessionStateSnapshotIntoStore)(this.store, sessionStateSnapshot);\n        }\n      }\n      this.channel.onmessage = ({ data: data2 }) => {\n        this.debug(\"got message\", data2);\n        const msg2 = data2;\n        const res = this.store.schema.getMigrationsSince(msg2.schema);\n        if (!res.ok) {\n          const timeSinceInit = Date.now() - this.initTime;\n          if (timeSinceInit < 5e3) {\n            onLoadError(new Error(\"Schema mismatch, please close other tabs and reload the page\"));\n            return;\n          }\n          this.debug(\"reloading\");\n          this.isReloading = true;\n          window?.location?.reload?.();\n          return;\n        } else if (res.value.length > 0) {\n          this.debug(\"telling them to reload\");\n          this.channel.postMessage({ type: \"announce\", schema: this.serializedSchema });\n          this.shouldDoFullDBWrite = true;\n          this.persistIfNeeded();\n          return;\n        }\n        if (msg2.type === \"diff\") {\n          this.debug(\"applying diff\");\n          (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(() => {\n            this.store.mergeRemoteChanges(() => {\n              this.store.applyDiff(msg2.changes);\n              this.store.ensureStoreIsUsable();\n            });\n          });\n        }\n      };\n      this.channel.postMessage({ type: \"announce\", schema: this.serializedSchema });\n      this.disposables.add(() => {\n        this.channel.close();\n      });\n      onLoad(this);\n    } catch (e) {\n      this.debug(\"error loading data from store\", e);\n      if (this.didDispose)\n        return;\n      onLoadError(e);\n      return;\n    }\n  }\n  close() {\n    this.debug(\"closing\");\n    this.didDispose = true;\n    this.disposables.forEach((d) => d());\n  }\n  isPersisting = false;\n  didLastWriteError = false;\n  // eslint-disable-next-line no-restricted-globals\n  scheduledPersistTimeout = null;\n  /**\n   * Schedule a persist. Persists don't happen immediately: they are throttled to avoid writing too\n   * often, and will retry if failed.\n   *\n   * @internal\n   */\n  schedulePersist() {\n    this.debug(\"schedulePersist\", this.scheduledPersistTimeout);\n    if (this.scheduledPersistTimeout)\n      return;\n    this.scheduledPersistTimeout = setTimeout(\n      () => {\n        this.scheduledPersistTimeout = null;\n        this.persistIfNeeded();\n      },\n      this.didLastWriteError ? PERSIST_RETRY_THROTTLE_MS : PERSIST_THROTTLE_MS\n    );\n  }\n  /**\n   * Persist to IndexedDB only under certain circumstances:\n   *\n   * - If we're not already persisting\n   * - If we're not reloading the page\n   * - And we have something to persist (a full db write scheduled or changes in the diff queue)\n   *\n   * @internal\n   */\n  persistIfNeeded() {\n    this.debug(\"persistIfNeeded\", {\n      isPersisting: this.isPersisting,\n      isReloading: this.isReloading,\n      shouldDoFullDBWrite: this.shouldDoFullDBWrite,\n      diffQueueLength: this.diffQueue.length,\n      storeIsPossiblyCorrupt: this.store.isPossiblyCorrupted()\n    });\n    if (this.scheduledPersistTimeout) {\n      clearTimeout(this.scheduledPersistTimeout);\n      this.scheduledPersistTimeout = null;\n    }\n    if (this.isPersisting)\n      return;\n    if (this.isReloading)\n      return;\n    if (this.store.isPossiblyCorrupted())\n      return;\n    if (this.shouldDoFullDBWrite || this.diffQueue.length > 0) {\n      this.doPersist();\n    }\n  }\n  /**\n   * Actually persist to IndexedDB. If the write fails, then we'll retry with a full db write after\n   * a short delay.\n   */\n  async doPersist() {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_2__.assert)(!this.isPersisting, \"persist already in progress\");\n    this.isPersisting = true;\n    this.debug(\"doPersist start\");\n    const diffQueue = this.diffQueue;\n    this.diffQueue = [];\n    try {\n      if (this.shouldDoFullDBWrite) {\n        this.shouldDoFullDBWrite = false;\n        await (0,_indexedDb_mjs__WEBPACK_IMPORTED_MODULE_5__.storeSnapshotInIndexedDb)({\n          persistenceKey: this.persistenceKey,\n          schema: this.store.schema,\n          snapshot: this.store.serialize(),\n          didCancel: () => this.didDispose,\n          sessionId: this.sessionId,\n          sessionStateSnapshot: this.$sessionStateSnapshot.get()\n        });\n      } else {\n        const diffs = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_1__.squashRecordDiffs)(\n          diffQueue.filter((d) => d !== UPDATE_INSTANCE_STATE)\n        );\n        await (0,_indexedDb_mjs__WEBPACK_IMPORTED_MODULE_5__.storeChangesInIndexedDb)({\n          persistenceKey: this.persistenceKey,\n          changes: diffs,\n          schema: this.store.schema,\n          didCancel: () => this.didDispose,\n          sessionId: this.sessionId,\n          sessionStateSnapshot: this.$sessionStateSnapshot.get()\n        });\n      }\n      this.didLastWriteError = false;\n    } catch (e) {\n      this.shouldDoFullDBWrite = true;\n      this.didLastWriteError = true;\n      console.error(\"failed to store changes in indexed db\", e);\n      (0,_alerts_mjs__WEBPACK_IMPORTED_MODULE_4__.showCantWriteToIndexDbAlert)();\n      if (typeof window !== \"undefined\") {\n        window.location.reload();\n      }\n    }\n    this.isPersisting = false;\n    this.debug(\"doPersist end\");\n    this.schedulePersist();\n  }\n}\n\n//# sourceMappingURL=TLLocalSyncClient.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3N5bmMvVExMb2NhbFN5bmNDbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXlDO0FBQ1M7QUFDWDtBQU1VO0FBQ3dDO0FBQ2M7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzRUFBTTtBQUN0QjtBQUNBO0FBQ0EsR0FBRyxzQ0FBc0MsZUFBZTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsb0dBQWdDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNULFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUVBQWlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQSxNQUFNLHlFQUE0QjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLHlHQUFxQztBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNERBQTRELHVCQUF1QjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFVBQVUscUdBQWlDO0FBQzNDO0FBQ0E7QUFDQSxrQ0FBa0MsYUFBYTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLHFDQUFxQyxpREFBaUQ7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx1REFBUTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0E7QUFDQSxpQ0FBaUMsaURBQWlEO0FBQ2xGO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3RUFBd0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUixzQkFBc0IsZ0VBQWlCO0FBQ3ZDO0FBQ0E7QUFDQSxjQUFjLHVFQUF1QjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNLHdFQUEyQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvZWRpdG9yL2Rpc3QtZXNtL2xpYi91dGlscy9zeW5jL1RMTG9jYWxTeW5jQ2xpZW50Lm1qcz8xNzYzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRyYW5zYWN0IH0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IHNxdWFzaFJlY29yZERpZmZzIH0gZnJvbSBcIkB0bGRyYXcvc3RvcmVcIjtcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQge1xuICBUQUJfSUQsXG4gIGNyZWF0ZVNlc3Npb25TdGF0ZVNuYXBzaG90U2lnbmFsLFxuICBleHRyYWN0U2Vzc2lvblN0YXRlRnJvbUxlZ2FjeVNuYXBzaG90LFxuICBsb2FkU2Vzc2lvblN0YXRlU25hcHNob3RJbnRvU3RvcmVcbn0gZnJvbSBcIi4uLy4uL2NvbmZpZy9UTFNlc3Npb25TdGF0ZVNuYXBzaG90Lm1qc1wiO1xuaW1wb3J0IHsgc2hvd0NhbnRSZWFkRnJvbUluZGV4RGJBbGVydCwgc2hvd0NhbnRXcml0ZVRvSW5kZXhEYkFsZXJ0IH0gZnJvbSBcIi4vYWxlcnRzLm1qc1wiO1xuaW1wb3J0IHsgbG9hZERhdGFGcm9tU3RvcmUsIHN0b3JlQ2hhbmdlc0luSW5kZXhlZERiLCBzdG9yZVNuYXBzaG90SW5JbmRleGVkRGIgfSBmcm9tIFwiLi9pbmRleGVkRGIubWpzXCI7XG5jb25zdCBQRVJTSVNUX1RIUk9UVExFX01TID0gMzUwO1xuY29uc3QgUEVSU0lTVF9SRVRSWV9USFJPVFRMRV9NUyA9IDFlNDtcbmNvbnN0IFVQREFURV9JTlNUQU5DRV9TVEFURSA9IFN5bWJvbChcIlVQREFURV9JTlNUQU5DRV9TVEFURVwiKTtcbmNvbnN0IG1zZyA9IChtc2cyKSA9PiBtc2cyO1xuY2xhc3MgQnJvYWRjYXN0Q2hhbm5lbE1vY2sge1xuICBvbm1lc3NhZ2U7XG4gIGNvbnN0cnVjdG9yKF9uYW1lKSB7XG4gIH1cbiAgcG9zdE1lc3NhZ2UoX21zZykge1xuICB9XG4gIGNsb3NlKCkge1xuICB9XG59XG5jb25zdCBCQyA9IHR5cGVvZiBCcm9hZGNhc3RDaGFubmVsID09PSBcInVuZGVmaW5lZFwiID8gQnJvYWRjYXN0Q2hhbm5lbE1vY2sgOiBCcm9hZGNhc3RDaGFubmVsO1xuY2xhc3MgVExMb2NhbFN5bmNDbGllbnQge1xuICBjb25zdHJ1Y3RvcihzdG9yZSwge1xuICAgIHBlcnNpc3RlbmNlS2V5LFxuICAgIHNlc3Npb25JZCA9IFRBQl9JRCxcbiAgICBvbkxvYWQsXG4gICAgb25Mb2FkRXJyb3JcbiAgfSwgY2hhbm5lbCA9IG5ldyBCQyhgdGxkcmF3LXRhYi1zeW5jLSR7cGVyc2lzdGVuY2VLZXl9YCkpIHtcbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbDtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgO1xuICAgICAgd2luZG93LnRsc3luYyA9IHRoaXM7XG4gICAgfVxuICAgIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBwZXJzaXN0ZW5jZUtleTtcbiAgICB0aGlzLnNlc3Npb25JZCA9IHNlc3Npb25JZDtcbiAgICB0aGlzLnNlcmlhbGl6ZWRTY2hlbWEgPSB0aGlzLnN0b3JlLnNjaGVtYS5zZXJpYWxpemUoKTtcbiAgICB0aGlzLiRzZXNzaW9uU3RhdGVTbmFwc2hvdCA9IGNyZWF0ZVNlc3Npb25TdGF0ZVNuYXBzaG90U2lnbmFsKHRoaXMuc3RvcmUpO1xuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKFxuICAgICAgLy8gU2V0IHVwIGEgc3Vic2NyaXB0aW9uIHRvIGNoYW5nZXMgZnJvbSB0aGUgc3RvcmU6IFdoZW5cbiAgICAgIC8vIHRoZSBzdG9yZSBjaGFuZ2VzIChhbmQgaWYgdGhlIGNoYW5nZSB3YXMgbWFkZSBieSB0aGUgdXNlcilcbiAgICAgIC8vIHRoZW4gaW1tZWRpYXRlbHkgc2VuZCB0aGUgZGlmZiB0byBvdGhlciB0YWJzIHZpYSBwb3N0TWVzc2FnZVxuICAgICAgLy8gYW5kIHNjaGVkdWxlIGEgcGVyc2lzdC5cbiAgICAgIHN0b3JlLmxpc3RlbihcbiAgICAgICAgKHsgY2hhbmdlcyB9KSA9PiB7XG4gICAgICAgICAgdGhpcy5kaWZmUXVldWUucHVzaChjaGFuZ2VzKTtcbiAgICAgICAgICB0aGlzLmNoYW5uZWwucG9zdE1lc3NhZ2UoXG4gICAgICAgICAgICBtc2coe1xuICAgICAgICAgICAgICB0eXBlOiBcImRpZmZcIixcbiAgICAgICAgICAgICAgc3RvcmVJZDogdGhpcy5zdG9yZS5pZCxcbiAgICAgICAgICAgICAgY2hhbmdlcyxcbiAgICAgICAgICAgICAgc2NoZW1hOiB0aGlzLnNlcmlhbGl6ZWRTY2hlbWFcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLnNjaGVkdWxlUGVyc2lzdCgpO1xuICAgICAgICB9LFxuICAgICAgICB7IHNvdXJjZTogXCJ1c2VyXCIsIHNjb3BlOiBcImRvY3VtZW50XCIgfVxuICAgICAgKVxuICAgICk7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5hZGQoXG4gICAgICBzdG9yZS5saXN0ZW4oXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aGlzLmRpZmZRdWV1ZS5wdXNoKFVQREFURV9JTlNUQU5DRV9TVEFURSk7XG4gICAgICAgICAgdGhpcy5zY2hlZHVsZVBlcnNpc3QoKTtcbiAgICAgICAgfSxcbiAgICAgICAgeyBzY29wZTogXCJzZXNzaW9uXCIgfVxuICAgICAgKVxuICAgICk7XG4gICAgdGhpcy5jb25uZWN0KG9uTG9hZCwgb25Mb2FkRXJyb3IpO1xuICAgIHRoaXMuZG9jdW1lbnRUeXBlcyA9IG5ldyBTZXQoXG4gICAgICBPYmplY3QudmFsdWVzKHRoaXMuc3RvcmUuc2NoZW1hLnR5cGVzKS5maWx0ZXIoKHQpID0+IHQuc2NvcGUgPT09IFwiZG9jdW1lbnRcIikubWFwKCh0KSA9PiB0LnR5cGVOYW1lKVxuICAgICk7XG4gIH1cbiAgZGlzcG9zYWJsZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBkaWZmUXVldWUgPSBbXTtcbiAgZGlkRGlzcG9zZSA9IGZhbHNlO1xuICBzaG91bGREb0Z1bGxEQldyaXRlID0gdHJ1ZTtcbiAgaXNSZWxvYWRpbmcgPSBmYWxzZTtcbiAgcGVyc2lzdGVuY2VLZXk7XG4gIHNlc3Npb25JZDtcbiAgc2VyaWFsaXplZFNjaGVtYTtcbiAgaXNEZWJ1Z2dpbmcgPSBmYWxzZTtcbiAgZG9jdW1lbnRUeXBlcztcbiAgJHNlc3Npb25TdGF0ZVNuYXBzaG90O1xuICBpbml0VGltZSA9IERhdGUubm93KCk7XG4gIGRlYnVnKC4uLmFyZ3MpIHtcbiAgICBpZiAodGhpcy5pc0RlYnVnZ2luZykge1xuICAgICAgY29uc29sZS5kZWJ1ZyguLi5hcmdzKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgY29ubmVjdChvbkxvYWQsIG9uTG9hZEVycm9yKSB7XG4gICAgdGhpcy5kZWJ1ZyhcImNvbm5lY3RpbmdcIik7XG4gICAgbGV0IGRhdGE7XG4gICAgdHJ5IHtcbiAgICAgIGRhdGEgPSBhd2FpdCBsb2FkRGF0YUZyb21TdG9yZSh7XG4gICAgICAgIHBlcnNpc3RlbmNlS2V5OiB0aGlzLnBlcnNpc3RlbmNlS2V5LFxuICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICBkaWRDYW5jZWw6ICgpID0+IHRoaXMuZGlkRGlzcG9zZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG9uTG9hZEVycm9yKGVycm9yKTtcbiAgICAgIHNob3dDYW50UmVhZEZyb21JbmRleERiQWxlcnQoKTtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5kZWJ1ZyhcImxvYWRlZCBkYXRhIGZyb20gc3RvcmVcIiwgZGF0YSwgXCJkaWREaXNwb3NlXCIsIHRoaXMuZGlkRGlzcG9zZSk7XG4gICAgaWYgKHRoaXMuZGlkRGlzcG9zZSlcbiAgICAgIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgY29uc3QgZG9jdW1lbnRTbmFwc2hvdCA9IE9iamVjdC5mcm9tRW50cmllcyhkYXRhLnJlY29yZHMubWFwKChyKSA9PiBbci5pZCwgcl0pKTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvblN0YXRlU25hcHNob3QgPSBkYXRhLnNlc3Npb25TdGF0ZVNuYXBzaG90ID8/IGV4dHJhY3RTZXNzaW9uU3RhdGVGcm9tTGVnYWN5U25hcHNob3QoZG9jdW1lbnRTbmFwc2hvdCk7XG4gICAgICAgIGNvbnN0IG1pZ3JhdGlvblJlc3VsdCA9IHRoaXMuc3RvcmUuc2NoZW1hLm1pZ3JhdGVTdG9yZVNuYXBzaG90KHtcbiAgICAgICAgICBzdG9yZTogZG9jdW1lbnRTbmFwc2hvdCxcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb25cbiAgICAgICAgICBzY2hlbWE6IGRhdGEuc2NoZW1hID8/IHRoaXMuc3RvcmUuc2NoZW1hLnNlcmlhbGl6ZUVhcmxpZXN0VmVyc2lvbigpXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobWlncmF0aW9uUmVzdWx0LnR5cGUgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJmYWlsZWQgdG8gbWlncmF0ZSBzdG9yZVwiLCBtaWdyYXRpb25SZXN1bHQpO1xuICAgICAgICAgIG9uTG9hZEVycm9yKG5ldyBFcnJvcihgRmFpbGVkIHRvIG1pZ3JhdGUgc3RvcmU6ICR7bWlncmF0aW9uUmVzdWx0LnJlYXNvbn1gKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RvcmUubWVyZ2VSZW1vdGVDaGFuZ2VzKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnN0b3JlLnB1dChcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMobWlncmF0aW9uUmVzdWx0LnZhbHVlKS5maWx0ZXIoKHIpID0+IHRoaXMuZG9jdW1lbnRUeXBlcy5oYXMoci50eXBlTmFtZSkpLFxuICAgICAgICAgICAgXCJpbml0aWFsaXplXCJcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHNlc3Npb25TdGF0ZVNuYXBzaG90KSB7XG4gICAgICAgICAgbG9hZFNlc3Npb25TdGF0ZVNuYXBzaG90SW50b1N0b3JlKHRoaXMuc3RvcmUsIHNlc3Npb25TdGF0ZVNuYXBzaG90KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5jaGFubmVsLm9ubWVzc2FnZSA9ICh7IGRhdGE6IGRhdGEyIH0pID0+IHtcbiAgICAgICAgdGhpcy5kZWJ1ZyhcImdvdCBtZXNzYWdlXCIsIGRhdGEyKTtcbiAgICAgICAgY29uc3QgbXNnMiA9IGRhdGEyO1xuICAgICAgICBjb25zdCByZXMgPSB0aGlzLnN0b3JlLnNjaGVtYS5nZXRNaWdyYXRpb25zU2luY2UobXNnMi5zY2hlbWEpO1xuICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgIGNvbnN0IHRpbWVTaW5jZUluaXQgPSBEYXRlLm5vdygpIC0gdGhpcy5pbml0VGltZTtcbiAgICAgICAgICBpZiAodGltZVNpbmNlSW5pdCA8IDVlMykge1xuICAgICAgICAgICAgb25Mb2FkRXJyb3IobmV3IEVycm9yKFwiU2NoZW1hIG1pc21hdGNoLCBwbGVhc2UgY2xvc2Ugb3RoZXIgdGFicyBhbmQgcmVsb2FkIHRoZSBwYWdlXCIpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5kZWJ1ZyhcInJlbG9hZGluZ1wiKTtcbiAgICAgICAgICB0aGlzLmlzUmVsb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICB3aW5kb3c/LmxvY2F0aW9uPy5yZWxvYWQ/LigpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmIChyZXMudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuZGVidWcoXCJ0ZWxsaW5nIHRoZW0gdG8gcmVsb2FkXCIpO1xuICAgICAgICAgIHRoaXMuY2hhbm5lbC5wb3N0TWVzc2FnZSh7IHR5cGU6IFwiYW5ub3VuY2VcIiwgc2NoZW1hOiB0aGlzLnNlcmlhbGl6ZWRTY2hlbWEgfSk7XG4gICAgICAgICAgdGhpcy5zaG91bGREb0Z1bGxEQldyaXRlID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLnBlcnNpc3RJZk5lZWRlZCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobXNnMi50eXBlID09PSBcImRpZmZcIikge1xuICAgICAgICAgIHRoaXMuZGVidWcoXCJhcHBseWluZyBkaWZmXCIpO1xuICAgICAgICAgIHRyYW5zYWN0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RvcmUubWVyZ2VSZW1vdGVDaGFuZ2VzKCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5zdG9yZS5hcHBseURpZmYobXNnMi5jaGFuZ2VzKTtcbiAgICAgICAgICAgICAgdGhpcy5zdG9yZS5lbnN1cmVTdG9yZUlzVXNhYmxlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHRoaXMuY2hhbm5lbC5wb3N0TWVzc2FnZSh7IHR5cGU6IFwiYW5ub3VuY2VcIiwgc2NoZW1hOiB0aGlzLnNlcmlhbGl6ZWRTY2hlbWEgfSk7XG4gICAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZCgoKSA9PiB7XG4gICAgICAgIHRoaXMuY2hhbm5lbC5jbG9zZSgpO1xuICAgICAgfSk7XG4gICAgICBvbkxvYWQodGhpcyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5kZWJ1ZyhcImVycm9yIGxvYWRpbmcgZGF0YSBmcm9tIHN0b3JlXCIsIGUpO1xuICAgICAgaWYgKHRoaXMuZGlkRGlzcG9zZSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgb25Mb2FkRXJyb3IoZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuZGVidWcoXCJjbG9zaW5nXCIpO1xuICAgIHRoaXMuZGlkRGlzcG9zZSA9IHRydWU7XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5mb3JFYWNoKChkKSA9PiBkKCkpO1xuICB9XG4gIGlzUGVyc2lzdGluZyA9IGZhbHNlO1xuICBkaWRMYXN0V3JpdGVFcnJvciA9IGZhbHNlO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gIHNjaGVkdWxlZFBlcnNpc3RUaW1lb3V0ID0gbnVsbDtcbiAgLyoqXG4gICAqIFNjaGVkdWxlIGEgcGVyc2lzdC4gUGVyc2lzdHMgZG9uJ3QgaGFwcGVuIGltbWVkaWF0ZWx5OiB0aGV5IGFyZSB0aHJvdHRsZWQgdG8gYXZvaWQgd3JpdGluZyB0b29cbiAgICogb2Z0ZW4sIGFuZCB3aWxsIHJldHJ5IGlmIGZhaWxlZC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBzY2hlZHVsZVBlcnNpc3QoKSB7XG4gICAgdGhpcy5kZWJ1ZyhcInNjaGVkdWxlUGVyc2lzdFwiLCB0aGlzLnNjaGVkdWxlZFBlcnNpc3RUaW1lb3V0KTtcbiAgICBpZiAodGhpcy5zY2hlZHVsZWRQZXJzaXN0VGltZW91dClcbiAgICAgIHJldHVybjtcbiAgICB0aGlzLnNjaGVkdWxlZFBlcnNpc3RUaW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZWRQZXJzaXN0VGltZW91dCA9IG51bGw7XG4gICAgICAgIHRoaXMucGVyc2lzdElmTmVlZGVkKCk7XG4gICAgICB9LFxuICAgICAgdGhpcy5kaWRMYXN0V3JpdGVFcnJvciA/IFBFUlNJU1RfUkVUUllfVEhST1RUTEVfTVMgOiBQRVJTSVNUX1RIUk9UVExFX01TXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogUGVyc2lzdCB0byBJbmRleGVkREIgb25seSB1bmRlciBjZXJ0YWluIGNpcmN1bXN0YW5jZXM6XG4gICAqXG4gICAqIC0gSWYgd2UncmUgbm90IGFscmVhZHkgcGVyc2lzdGluZ1xuICAgKiAtIElmIHdlJ3JlIG5vdCByZWxvYWRpbmcgdGhlIHBhZ2VcbiAgICogLSBBbmQgd2UgaGF2ZSBzb21ldGhpbmcgdG8gcGVyc2lzdCAoYSBmdWxsIGRiIHdyaXRlIHNjaGVkdWxlZCBvciBjaGFuZ2VzIGluIHRoZSBkaWZmIHF1ZXVlKVxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHBlcnNpc3RJZk5lZWRlZCgpIHtcbiAgICB0aGlzLmRlYnVnKFwicGVyc2lzdElmTmVlZGVkXCIsIHtcbiAgICAgIGlzUGVyc2lzdGluZzogdGhpcy5pc1BlcnNpc3RpbmcsXG4gICAgICBpc1JlbG9hZGluZzogdGhpcy5pc1JlbG9hZGluZyxcbiAgICAgIHNob3VsZERvRnVsbERCV3JpdGU6IHRoaXMuc2hvdWxkRG9GdWxsREJXcml0ZSxcbiAgICAgIGRpZmZRdWV1ZUxlbmd0aDogdGhpcy5kaWZmUXVldWUubGVuZ3RoLFxuICAgICAgc3RvcmVJc1Bvc3NpYmx5Q29ycnVwdDogdGhpcy5zdG9yZS5pc1Bvc3NpYmx5Q29ycnVwdGVkKClcbiAgICB9KTtcbiAgICBpZiAodGhpcy5zY2hlZHVsZWRQZXJzaXN0VGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2NoZWR1bGVkUGVyc2lzdFRpbWVvdXQpO1xuICAgICAgdGhpcy5zY2hlZHVsZWRQZXJzaXN0VGltZW91dCA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmlzUGVyc2lzdGluZylcbiAgICAgIHJldHVybjtcbiAgICBpZiAodGhpcy5pc1JlbG9hZGluZylcbiAgICAgIHJldHVybjtcbiAgICBpZiAodGhpcy5zdG9yZS5pc1Bvc3NpYmx5Q29ycnVwdGVkKCkpXG4gICAgICByZXR1cm47XG4gICAgaWYgKHRoaXMuc2hvdWxkRG9GdWxsREJXcml0ZSB8fCB0aGlzLmRpZmZRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmRvUGVyc2lzdCgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQWN0dWFsbHkgcGVyc2lzdCB0byBJbmRleGVkREIuIElmIHRoZSB3cml0ZSBmYWlscywgdGhlbiB3ZSdsbCByZXRyeSB3aXRoIGEgZnVsbCBkYiB3cml0ZSBhZnRlclxuICAgKiBhIHNob3J0IGRlbGF5LlxuICAgKi9cbiAgYXN5bmMgZG9QZXJzaXN0KCkge1xuICAgIGFzc2VydCghdGhpcy5pc1BlcnNpc3RpbmcsIFwicGVyc2lzdCBhbHJlYWR5IGluIHByb2dyZXNzXCIpO1xuICAgIHRoaXMuaXNQZXJzaXN0aW5nID0gdHJ1ZTtcbiAgICB0aGlzLmRlYnVnKFwiZG9QZXJzaXN0IHN0YXJ0XCIpO1xuICAgIGNvbnN0IGRpZmZRdWV1ZSA9IHRoaXMuZGlmZlF1ZXVlO1xuICAgIHRoaXMuZGlmZlF1ZXVlID0gW107XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLnNob3VsZERvRnVsbERCV3JpdGUpIHtcbiAgICAgICAgdGhpcy5zaG91bGREb0Z1bGxEQldyaXRlID0gZmFsc2U7XG4gICAgICAgIGF3YWl0IHN0b3JlU25hcHNob3RJbkluZGV4ZWREYih7XG4gICAgICAgICAgcGVyc2lzdGVuY2VLZXk6IHRoaXMucGVyc2lzdGVuY2VLZXksXG4gICAgICAgICAgc2NoZW1hOiB0aGlzLnN0b3JlLnNjaGVtYSxcbiAgICAgICAgICBzbmFwc2hvdDogdGhpcy5zdG9yZS5zZXJpYWxpemUoKSxcbiAgICAgICAgICBkaWRDYW5jZWw6ICgpID0+IHRoaXMuZGlkRGlzcG9zZSxcbiAgICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICAgIHNlc3Npb25TdGF0ZVNuYXBzaG90OiB0aGlzLiRzZXNzaW9uU3RhdGVTbmFwc2hvdC5nZXQoKVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGRpZmZzID0gc3F1YXNoUmVjb3JkRGlmZnMoXG4gICAgICAgICAgZGlmZlF1ZXVlLmZpbHRlcigoZCkgPT4gZCAhPT0gVVBEQVRFX0lOU1RBTkNFX1NUQVRFKVxuICAgICAgICApO1xuICAgICAgICBhd2FpdCBzdG9yZUNoYW5nZXNJbkluZGV4ZWREYih7XG4gICAgICAgICAgcGVyc2lzdGVuY2VLZXk6IHRoaXMucGVyc2lzdGVuY2VLZXksXG4gICAgICAgICAgY2hhbmdlczogZGlmZnMsXG4gICAgICAgICAgc2NoZW1hOiB0aGlzLnN0b3JlLnNjaGVtYSxcbiAgICAgICAgICBkaWRDYW5jZWw6ICgpID0+IHRoaXMuZGlkRGlzcG9zZSxcbiAgICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICAgIHNlc3Npb25TdGF0ZVNuYXBzaG90OiB0aGlzLiRzZXNzaW9uU3RhdGVTbmFwc2hvdC5nZXQoKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZGlkTGFzdFdyaXRlRXJyb3IgPSBmYWxzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLnNob3VsZERvRnVsbERCV3JpdGUgPSB0cnVlO1xuICAgICAgdGhpcy5kaWRMYXN0V3JpdGVFcnJvciA9IHRydWU7XG4gICAgICBjb25zb2xlLmVycm9yKFwiZmFpbGVkIHRvIHN0b3JlIGNoYW5nZXMgaW4gaW5kZXhlZCBkYlwiLCBlKTtcbiAgICAgIHNob3dDYW50V3JpdGVUb0luZGV4RGJBbGVydCgpO1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmlzUGVyc2lzdGluZyA9IGZhbHNlO1xuICAgIHRoaXMuZGVidWcoXCJkb1BlcnNpc3QgZW5kXCIpO1xuICAgIHRoaXMuc2NoZWR1bGVQZXJzaXN0KCk7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEJyb2FkY2FzdENoYW5uZWxNb2NrLFxuICBUTExvY2FsU3luY0NsaWVudFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMTG9jYWxTeW5jQ2xpZW50Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/TLLocalSyncClient.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/alerts.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/alerts.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   showCantReadFromIndexDbAlert: () => (/* binding */ showCantReadFromIndexDbAlert),\n/* harmony export */   showCantWriteToIndexDbAlert: () => (/* binding */ showCantWriteToIndexDbAlert)\n/* harmony export */ });\nfunction showCantWriteToIndexDbAlert() {\n  window.alert(\n    `Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.\n\nKeep seeing this message?\n\\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.\n\\u2022 If your hard disk is full, try clearing up some space and then reload the page.`\n  );\n}\nfunction showCantReadFromIndexDbAlert() {\n  window.alert(\n    `Oops! We could not access your browser's storage\\u2014and the app won't work correctly without that. We now need to reload the page and try again.\n\nKeep seeing this message?\n\\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.`\n  );\n}\n\n//# sourceMappingURL=alerts.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3N5bmMvYWxlcnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvc3luYy9hbGVydHMubWpzPzJhMzUiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gc2hvd0NhbnRXcml0ZVRvSW5kZXhEYkFsZXJ0KCkge1xuICB3aW5kb3cuYWxlcnQoXG4gICAgYE9vcHMhIFdlIGNvdWxkIG5vdCBzYXZlIGNoYW5nZXMgdG8geW91ciBicm93c2VyJ3Mgc3RvcmFnZS4gV2Ugbm93IG5lZWQgdG8gcmVsb2FkIHRoZSBwYWdlIGFuZCB0cnkgYWdhaW4uXG5cbktlZXAgc2VlaW5nIHRoaXMgbWVzc2FnZT9cblxcdTIwMjIgSWYgeW91J3JlIHVzaW5nIHRsZHJhdyBpbiBhIHByaXZhdGUgb3IgXCJpbmNvZ25pdG9cIiB3aW5kb3csIHRyeSBsb2FkaW5nIHRsZHJhdyBpbiBhIHJlZ3VsYXIgd2luZG93IG9yIGluIGEgZGlmZmVyZW50IGJyb3dzZXIuXG5cXHUyMDIyIElmIHlvdXIgaGFyZCBkaXNrIGlzIGZ1bGwsIHRyeSBjbGVhcmluZyB1cCBzb21lIHNwYWNlIGFuZCB0aGVuIHJlbG9hZCB0aGUgcGFnZS5gXG4gICk7XG59XG5mdW5jdGlvbiBzaG93Q2FudFJlYWRGcm9tSW5kZXhEYkFsZXJ0KCkge1xuICB3aW5kb3cuYWxlcnQoXG4gICAgYE9vcHMhIFdlIGNvdWxkIG5vdCBhY2Nlc3MgeW91ciBicm93c2VyJ3Mgc3RvcmFnZVxcdTIwMTRhbmQgdGhlIGFwcCB3b24ndCB3b3JrIGNvcnJlY3RseSB3aXRob3V0IHRoYXQuIFdlIG5vdyBuZWVkIHRvIHJlbG9hZCB0aGUgcGFnZSBhbmQgdHJ5IGFnYWluLlxuXG5LZWVwIHNlZWluZyB0aGlzIG1lc3NhZ2U/XG5cXHUyMDIyIElmIHlvdSdyZSB1c2luZyB0bGRyYXcgaW4gYSBwcml2YXRlIG9yIFwiaW5jb2duaXRvXCIgd2luZG93LCB0cnkgbG9hZGluZyB0bGRyYXcgaW4gYSByZWd1bGFyIHdpbmRvdyBvciBpbiBhIGRpZmZlcmVudCBicm93c2VyLmBcbiAgKTtcbn1cbmV4cG9ydCB7XG4gIHNob3dDYW50UmVhZEZyb21JbmRleERiQWxlcnQsXG4gIHNob3dDYW50V3JpdGVUb0luZGV4RGJBbGVydFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFsZXJ0cy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/alerts.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/hardReset.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/hardReset.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hardReset: () => (/* binding */ hardReset)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var idb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! idb */ \"(ssr)/./node_modules/idb/build/index.js\");\n/* harmony import */ var _indexedDb_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./indexedDb.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/indexedDb.mjs\");\n\n\n\nasync function hardReset({ shouldReload = true } = {}) {\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.clearSessionStorage)();\n  await Promise.all((0,_indexedDb_mjs__WEBPACK_IMPORTED_MODULE_2__.getAllIndexDbNames)().map((db) => (0,idb__WEBPACK_IMPORTED_MODULE_1__.deleteDB)(db)));\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.clearLocalStorage)();\n  if (shouldReload) {\n    window.location.reload();\n  }\n}\nif (typeof window !== \"undefined\") {\n  if (true) {\n    ;\n    window.hardReset = hardReset;\n  }\n  ;\n  window.__tldraw__hardReset = hardReset;\n}\n\n//# sourceMappingURL=hardReset.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3N5bmMvaGFyZFJlc2V0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVFO0FBQ3hDO0FBQ3NCO0FBQ3JELDJCQUEyQixzQkFBc0IsSUFBSTtBQUNyRCxFQUFFLGtFQUFtQjtBQUNyQixvQkFBb0Isa0VBQWtCLGVBQWUsNkNBQVE7QUFDN0QsRUFBRSxnRUFBaUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sSUFBc0M7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvc3luYy9oYXJkUmVzZXQubWpzPzZlYTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2xlYXJMb2NhbFN0b3JhZ2UsIGNsZWFyU2Vzc2lvblN0b3JhZ2UgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgZGVsZXRlREIgfSBmcm9tIFwiaWRiXCI7XG5pbXBvcnQgeyBnZXRBbGxJbmRleERiTmFtZXMgfSBmcm9tIFwiLi9pbmRleGVkRGIubWpzXCI7XG5hc3luYyBmdW5jdGlvbiBoYXJkUmVzZXQoeyBzaG91bGRSZWxvYWQgPSB0cnVlIH0gPSB7fSkge1xuICBjbGVhclNlc3Npb25TdG9yYWdlKCk7XG4gIGF3YWl0IFByb21pc2UuYWxsKGdldEFsbEluZGV4RGJOYW1lcygpLm1hcCgoZGIpID0+IGRlbGV0ZURCKGRiKSkpO1xuICBjbGVhckxvY2FsU3RvcmFnZSgpO1xuICBpZiAoc2hvdWxkUmVsb2FkKSB7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICB9XG59XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xuICAgIDtcbiAgICB3aW5kb3cuaGFyZFJlc2V0ID0gaGFyZFJlc2V0O1xuICB9XG4gIDtcbiAgd2luZG93Ll9fdGxkcmF3X19oYXJkUmVzZXQgPSBoYXJkUmVzZXQ7XG59XG5leHBvcnQge1xuICBoYXJkUmVzZXRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYXJkUmVzZXQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/hardReset.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/indexedDb.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/indexedDb.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAllIndexDbNames: () => (/* binding */ getAllIndexDbNames),\n/* harmony export */   loadDataFromStore: () => (/* binding */ loadDataFromStore),\n/* harmony export */   storeChangesInIndexedDb: () => (/* binding */ storeChangesInIndexedDb),\n/* harmony export */   storeSnapshotInIndexedDb: () => (/* binding */ storeSnapshotInIndexedDb)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var idb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! idb */ \"(ssr)/./node_modules/idb/build/index.js\");\n\n\nconst STORE_PREFIX = \"TLDRAW_DOCUMENT_v2\";\nconst dbNameIndexKey = \"TLDRAW_DB_NAME_INDEX_v2\";\nconst Table = {\n  Records: \"records\",\n  Schema: \"schema\",\n  SessionState: \"session_state\"\n};\nasync function withDb(storeId, cb) {\n  addDbName(storeId);\n  const db = await (0,idb__WEBPACK_IMPORTED_MODULE_1__.openDB)(storeId, 3, {\n    upgrade(database) {\n      if (!database.objectStoreNames.contains(Table.Records)) {\n        database.createObjectStore(Table.Records);\n      }\n      if (!database.objectStoreNames.contains(Table.Schema)) {\n        database.createObjectStore(Table.Schema);\n      }\n      if (!database.objectStoreNames.contains(Table.SessionState)) {\n        database.createObjectStore(Table.SessionState);\n      }\n    }\n  });\n  try {\n    return await cb(db);\n  } finally {\n    db.close();\n  }\n}\nasync function loadDataFromStore({\n  persistenceKey,\n  sessionId,\n  didCancel\n}) {\n  const storeId = STORE_PREFIX + persistenceKey;\n  if (!getAllIndexDbNames().includes(storeId))\n    return void 0;\n  await pruneSessionState({ persistenceKey, didCancel });\n  return await withDb(storeId, async (db) => {\n    if (didCancel?.())\n      return void 0;\n    const tx = db.transaction([Table.Records, Table.Schema, Table.SessionState], \"readonly\");\n    const recordsStore = tx.objectStore(Table.Records);\n    const schemaStore = tx.objectStore(Table.Schema);\n    const sessionStateStore = tx.objectStore(Table.SessionState);\n    let sessionStateSnapshot = sessionId ? (await sessionStateStore.get(sessionId))?.snapshot : null;\n    if (!sessionStateSnapshot) {\n      const all = await sessionStateStore.getAll();\n      sessionStateSnapshot = all.sort((a, b) => a.updatedAt - b.updatedAt).pop()?.snapshot;\n    }\n    const result = {\n      records: await recordsStore.getAll(),\n      schema: await schemaStore.get(Table.Schema),\n      sessionStateSnapshot\n    };\n    if (didCancel?.()) {\n      tx.abort();\n      return void 0;\n    }\n    await tx.done;\n    return result;\n  });\n}\nasync function storeChangesInIndexedDb({\n  persistenceKey,\n  schema,\n  changes,\n  sessionId,\n  sessionStateSnapshot,\n  didCancel\n}) {\n  const storeId = STORE_PREFIX + persistenceKey;\n  await withDb(storeId, async (db) => {\n    const tx = db.transaction([Table.Records, Table.Schema, Table.SessionState], \"readwrite\");\n    const recordsStore = tx.objectStore(Table.Records);\n    const schemaStore = tx.objectStore(Table.Schema);\n    const sessionStateStore = tx.objectStore(Table.SessionState);\n    for (const [id, record] of Object.entries(changes.added)) {\n      await recordsStore.put(record, id);\n    }\n    for (const [_prev, updated] of Object.values(changes.updated)) {\n      await recordsStore.put(updated, updated.id);\n    }\n    for (const id of Object.keys(changes.removed)) {\n      await recordsStore.delete(id);\n    }\n    schemaStore.put(schema.serialize(), Table.Schema);\n    if (sessionStateSnapshot && sessionId) {\n      sessionStateStore.put(\n        {\n          snapshot: sessionStateSnapshot,\n          updatedAt: Date.now(),\n          id: sessionId\n        },\n        sessionId\n      );\n    } else if (sessionStateSnapshot || sessionId) {\n      console.error(\"sessionStateSnapshot and instanceId must be provided together\");\n    }\n    if (didCancel?.())\n      return tx.abort();\n    await tx.done;\n  });\n}\nasync function storeSnapshotInIndexedDb({\n  persistenceKey,\n  schema,\n  snapshot,\n  sessionId,\n  sessionStateSnapshot,\n  didCancel\n}) {\n  const storeId = STORE_PREFIX + persistenceKey;\n  await withDb(storeId, async (db) => {\n    const tx = db.transaction([Table.Records, Table.Schema, Table.SessionState], \"readwrite\");\n    const recordsStore = tx.objectStore(Table.Records);\n    const schemaStore = tx.objectStore(Table.Schema);\n    const sessionStateStore = tx.objectStore(Table.SessionState);\n    await recordsStore.clear();\n    for (const [id, record] of Object.entries(snapshot)) {\n      await recordsStore.put(record, id);\n    }\n    schemaStore.put(schema.serialize(), Table.Schema);\n    if (sessionStateSnapshot && sessionId) {\n      sessionStateStore.put(\n        {\n          snapshot: sessionStateSnapshot,\n          updatedAt: Date.now(),\n          id: sessionId\n        },\n        sessionId\n      );\n    } else if (sessionStateSnapshot || sessionId) {\n      console.error(\"sessionStateSnapshot and instanceId must be provided together\");\n    }\n    if (didCancel?.())\n      return tx.abort();\n    await tx.done;\n  });\n}\nasync function pruneSessionState({\n  persistenceKey,\n  didCancel\n}) {\n  await withDb(STORE_PREFIX + persistenceKey, async (db) => {\n    const tx = db.transaction([Table.SessionState], \"readwrite\");\n    const sessionStateStore = tx.objectStore(Table.SessionState);\n    const all = (await sessionStateStore.getAll()).sort((a, b) => a.updatedAt - b.updatedAt);\n    if (all.length < 10) {\n      await tx.done;\n      return;\n    }\n    const toDelete = all.slice(0, all.length - 10);\n    for (const { id } of toDelete) {\n      await sessionStateStore.delete(id);\n    }\n    if (didCancel?.())\n      return tx.abort();\n    await tx.done;\n  });\n}\nfunction getAllIndexDbNames() {\n  const result = JSON.parse((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getFromLocalStorage)(dbNameIndexKey) || \"[]\") ?? [];\n  if (!Array.isArray(result)) {\n    return [];\n  }\n  return result;\n}\nfunction addDbName(name) {\n  const all = new Set(getAllIndexDbNames());\n  all.add(name);\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.setInLocalStorage)(dbNameIndexKey, JSON.stringify([...all]));\n}\n\n//# sourceMappingURL=indexedDb.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3N5bmMvaW5kZXhlZERiLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUU7QUFDMUM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDJDQUFNO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsMkJBQTJCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsS0FBSztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSw0QkFBNEIsa0VBQW1CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGdFQUFpQjtBQUNuQjtBQU1FO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3N5bmMvaW5kZXhlZERiLm1qcz8xMzUzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEZyb21Mb2NhbFN0b3JhZ2UsIHNldEluTG9jYWxTdG9yYWdlIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IG9wZW5EQiB9IGZyb20gXCJpZGJcIjtcbmNvbnN0IFNUT1JFX1BSRUZJWCA9IFwiVExEUkFXX0RPQ1VNRU5UX3YyXCI7XG5jb25zdCBkYk5hbWVJbmRleEtleSA9IFwiVExEUkFXX0RCX05BTUVfSU5ERVhfdjJcIjtcbmNvbnN0IFRhYmxlID0ge1xuICBSZWNvcmRzOiBcInJlY29yZHNcIixcbiAgU2NoZW1hOiBcInNjaGVtYVwiLFxuICBTZXNzaW9uU3RhdGU6IFwic2Vzc2lvbl9zdGF0ZVwiXG59O1xuYXN5bmMgZnVuY3Rpb24gd2l0aERiKHN0b3JlSWQsIGNiKSB7XG4gIGFkZERiTmFtZShzdG9yZUlkKTtcbiAgY29uc3QgZGIgPSBhd2FpdCBvcGVuREIoc3RvcmVJZCwgMywge1xuICAgIHVwZ3JhZGUoZGF0YWJhc2UpIHtcbiAgICAgIGlmICghZGF0YWJhc2Uub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhUYWJsZS5SZWNvcmRzKSkge1xuICAgICAgICBkYXRhYmFzZS5jcmVhdGVPYmplY3RTdG9yZShUYWJsZS5SZWNvcmRzKTtcbiAgICAgIH1cbiAgICAgIGlmICghZGF0YWJhc2Uub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhUYWJsZS5TY2hlbWEpKSB7XG4gICAgICAgIGRhdGFiYXNlLmNyZWF0ZU9iamVjdFN0b3JlKFRhYmxlLlNjaGVtYSk7XG4gICAgICB9XG4gICAgICBpZiAoIWRhdGFiYXNlLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoVGFibGUuU2Vzc2lvblN0YXRlKSkge1xuICAgICAgICBkYXRhYmFzZS5jcmVhdGVPYmplY3RTdG9yZShUYWJsZS5TZXNzaW9uU3RhdGUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IGNiKGRiKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBkYi5jbG9zZSgpO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBsb2FkRGF0YUZyb21TdG9yZSh7XG4gIHBlcnNpc3RlbmNlS2V5LFxuICBzZXNzaW9uSWQsXG4gIGRpZENhbmNlbFxufSkge1xuICBjb25zdCBzdG9yZUlkID0gU1RPUkVfUFJFRklYICsgcGVyc2lzdGVuY2VLZXk7XG4gIGlmICghZ2V0QWxsSW5kZXhEYk5hbWVzKCkuaW5jbHVkZXMoc3RvcmVJZCkpXG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgYXdhaXQgcHJ1bmVTZXNzaW9uU3RhdGUoeyBwZXJzaXN0ZW5jZUtleSwgZGlkQ2FuY2VsIH0pO1xuICByZXR1cm4gYXdhaXQgd2l0aERiKHN0b3JlSWQsIGFzeW5jIChkYikgPT4ge1xuICAgIGlmIChkaWRDYW5jZWw/LigpKVxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKFtUYWJsZS5SZWNvcmRzLCBUYWJsZS5TY2hlbWEsIFRhYmxlLlNlc3Npb25TdGF0ZV0sIFwicmVhZG9ubHlcIik7XG4gICAgY29uc3QgcmVjb3Jkc1N0b3JlID0gdHgub2JqZWN0U3RvcmUoVGFibGUuUmVjb3Jkcyk7XG4gICAgY29uc3Qgc2NoZW1hU3RvcmUgPSB0eC5vYmplY3RTdG9yZShUYWJsZS5TY2hlbWEpO1xuICAgIGNvbnN0IHNlc3Npb25TdGF0ZVN0b3JlID0gdHgub2JqZWN0U3RvcmUoVGFibGUuU2Vzc2lvblN0YXRlKTtcbiAgICBsZXQgc2Vzc2lvblN0YXRlU25hcHNob3QgPSBzZXNzaW9uSWQgPyAoYXdhaXQgc2Vzc2lvblN0YXRlU3RvcmUuZ2V0KHNlc3Npb25JZCkpPy5zbmFwc2hvdCA6IG51bGw7XG4gICAgaWYgKCFzZXNzaW9uU3RhdGVTbmFwc2hvdCkge1xuICAgICAgY29uc3QgYWxsID0gYXdhaXQgc2Vzc2lvblN0YXRlU3RvcmUuZ2V0QWxsKCk7XG4gICAgICBzZXNzaW9uU3RhdGVTbmFwc2hvdCA9IGFsbC5zb3J0KChhLCBiKSA9PiBhLnVwZGF0ZWRBdCAtIGIudXBkYXRlZEF0KS5wb3AoKT8uc25hcHNob3Q7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIHJlY29yZHM6IGF3YWl0IHJlY29yZHNTdG9yZS5nZXRBbGwoKSxcbiAgICAgIHNjaGVtYTogYXdhaXQgc2NoZW1hU3RvcmUuZ2V0KFRhYmxlLlNjaGVtYSksXG4gICAgICBzZXNzaW9uU3RhdGVTbmFwc2hvdFxuICAgIH07XG4gICAgaWYgKGRpZENhbmNlbD8uKCkpIHtcbiAgICAgIHR4LmFib3J0KCk7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBhd2FpdCB0eC5kb25lO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gc3RvcmVDaGFuZ2VzSW5JbmRleGVkRGIoe1xuICBwZXJzaXN0ZW5jZUtleSxcbiAgc2NoZW1hLFxuICBjaGFuZ2VzLFxuICBzZXNzaW9uSWQsXG4gIHNlc3Npb25TdGF0ZVNuYXBzaG90LFxuICBkaWRDYW5jZWxcbn0pIHtcbiAgY29uc3Qgc3RvcmVJZCA9IFNUT1JFX1BSRUZJWCArIHBlcnNpc3RlbmNlS2V5O1xuICBhd2FpdCB3aXRoRGIoc3RvcmVJZCwgYXN5bmMgKGRiKSA9PiB7XG4gICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihbVGFibGUuUmVjb3JkcywgVGFibGUuU2NoZW1hLCBUYWJsZS5TZXNzaW9uU3RhdGVdLCBcInJlYWR3cml0ZVwiKTtcbiAgICBjb25zdCByZWNvcmRzU3RvcmUgPSB0eC5vYmplY3RTdG9yZShUYWJsZS5SZWNvcmRzKTtcbiAgICBjb25zdCBzY2hlbWFTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFRhYmxlLlNjaGVtYSk7XG4gICAgY29uc3Qgc2Vzc2lvblN0YXRlU3RvcmUgPSB0eC5vYmplY3RTdG9yZShUYWJsZS5TZXNzaW9uU3RhdGUpO1xuICAgIGZvciAoY29uc3QgW2lkLCByZWNvcmRdIG9mIE9iamVjdC5lbnRyaWVzKGNoYW5nZXMuYWRkZWQpKSB7XG4gICAgICBhd2FpdCByZWNvcmRzU3RvcmUucHV0KHJlY29yZCwgaWQpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtfcHJldiwgdXBkYXRlZF0gb2YgT2JqZWN0LnZhbHVlcyhjaGFuZ2VzLnVwZGF0ZWQpKSB7XG4gICAgICBhd2FpdCByZWNvcmRzU3RvcmUucHV0KHVwZGF0ZWQsIHVwZGF0ZWQuaWQpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGlkIG9mIE9iamVjdC5rZXlzKGNoYW5nZXMucmVtb3ZlZCkpIHtcbiAgICAgIGF3YWl0IHJlY29yZHNTdG9yZS5kZWxldGUoaWQpO1xuICAgIH1cbiAgICBzY2hlbWFTdG9yZS5wdXQoc2NoZW1hLnNlcmlhbGl6ZSgpLCBUYWJsZS5TY2hlbWEpO1xuICAgIGlmIChzZXNzaW9uU3RhdGVTbmFwc2hvdCAmJiBzZXNzaW9uSWQpIHtcbiAgICAgIHNlc3Npb25TdGF0ZVN0b3JlLnB1dChcbiAgICAgICAge1xuICAgICAgICAgIHNuYXBzaG90OiBzZXNzaW9uU3RhdGVTbmFwc2hvdCxcbiAgICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgICAgaWQ6IHNlc3Npb25JZFxuICAgICAgICB9LFxuICAgICAgICBzZXNzaW9uSWRcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChzZXNzaW9uU3RhdGVTbmFwc2hvdCB8fCBzZXNzaW9uSWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJzZXNzaW9uU3RhdGVTbmFwc2hvdCBhbmQgaW5zdGFuY2VJZCBtdXN0IGJlIHByb3ZpZGVkIHRvZ2V0aGVyXCIpO1xuICAgIH1cbiAgICBpZiAoZGlkQ2FuY2VsPy4oKSlcbiAgICAgIHJldHVybiB0eC5hYm9ydCgpO1xuICAgIGF3YWl0IHR4LmRvbmU7XG4gIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gc3RvcmVTbmFwc2hvdEluSW5kZXhlZERiKHtcbiAgcGVyc2lzdGVuY2VLZXksXG4gIHNjaGVtYSxcbiAgc25hcHNob3QsXG4gIHNlc3Npb25JZCxcbiAgc2Vzc2lvblN0YXRlU25hcHNob3QsXG4gIGRpZENhbmNlbFxufSkge1xuICBjb25zdCBzdG9yZUlkID0gU1RPUkVfUFJFRklYICsgcGVyc2lzdGVuY2VLZXk7XG4gIGF3YWl0IHdpdGhEYihzdG9yZUlkLCBhc3luYyAoZGIpID0+IHtcbiAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKFtUYWJsZS5SZWNvcmRzLCBUYWJsZS5TY2hlbWEsIFRhYmxlLlNlc3Npb25TdGF0ZV0sIFwicmVhZHdyaXRlXCIpO1xuICAgIGNvbnN0IHJlY29yZHNTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFRhYmxlLlJlY29yZHMpO1xuICAgIGNvbnN0IHNjaGVtYVN0b3JlID0gdHgub2JqZWN0U3RvcmUoVGFibGUuU2NoZW1hKTtcbiAgICBjb25zdCBzZXNzaW9uU3RhdGVTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFRhYmxlLlNlc3Npb25TdGF0ZSk7XG4gICAgYXdhaXQgcmVjb3Jkc1N0b3JlLmNsZWFyKCk7XG4gICAgZm9yIChjb25zdCBbaWQsIHJlY29yZF0gb2YgT2JqZWN0LmVudHJpZXMoc25hcHNob3QpKSB7XG4gICAgICBhd2FpdCByZWNvcmRzU3RvcmUucHV0KHJlY29yZCwgaWQpO1xuICAgIH1cbiAgICBzY2hlbWFTdG9yZS5wdXQoc2NoZW1hLnNlcmlhbGl6ZSgpLCBUYWJsZS5TY2hlbWEpO1xuICAgIGlmIChzZXNzaW9uU3RhdGVTbmFwc2hvdCAmJiBzZXNzaW9uSWQpIHtcbiAgICAgIHNlc3Npb25TdGF0ZVN0b3JlLnB1dChcbiAgICAgICAge1xuICAgICAgICAgIHNuYXBzaG90OiBzZXNzaW9uU3RhdGVTbmFwc2hvdCxcbiAgICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgICAgaWQ6IHNlc3Npb25JZFxuICAgICAgICB9LFxuICAgICAgICBzZXNzaW9uSWRcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChzZXNzaW9uU3RhdGVTbmFwc2hvdCB8fCBzZXNzaW9uSWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJzZXNzaW9uU3RhdGVTbmFwc2hvdCBhbmQgaW5zdGFuY2VJZCBtdXN0IGJlIHByb3ZpZGVkIHRvZ2V0aGVyXCIpO1xuICAgIH1cbiAgICBpZiAoZGlkQ2FuY2VsPy4oKSlcbiAgICAgIHJldHVybiB0eC5hYm9ydCgpO1xuICAgIGF3YWl0IHR4LmRvbmU7XG4gIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gcHJ1bmVTZXNzaW9uU3RhdGUoe1xuICBwZXJzaXN0ZW5jZUtleSxcbiAgZGlkQ2FuY2VsXG59KSB7XG4gIGF3YWl0IHdpdGhEYihTVE9SRV9QUkVGSVggKyBwZXJzaXN0ZW5jZUtleSwgYXN5bmMgKGRiKSA9PiB7XG4gICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihbVGFibGUuU2Vzc2lvblN0YXRlXSwgXCJyZWFkd3JpdGVcIik7XG4gICAgY29uc3Qgc2Vzc2lvblN0YXRlU3RvcmUgPSB0eC5vYmplY3RTdG9yZShUYWJsZS5TZXNzaW9uU3RhdGUpO1xuICAgIGNvbnN0IGFsbCA9IChhd2FpdCBzZXNzaW9uU3RhdGVTdG9yZS5nZXRBbGwoKSkuc29ydCgoYSwgYikgPT4gYS51cGRhdGVkQXQgLSBiLnVwZGF0ZWRBdCk7XG4gICAgaWYgKGFsbC5sZW5ndGggPCAxMCkge1xuICAgICAgYXdhaXQgdHguZG9uZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdG9EZWxldGUgPSBhbGwuc2xpY2UoMCwgYWxsLmxlbmd0aCAtIDEwKTtcbiAgICBmb3IgKGNvbnN0IHsgaWQgfSBvZiB0b0RlbGV0ZSkge1xuICAgICAgYXdhaXQgc2Vzc2lvblN0YXRlU3RvcmUuZGVsZXRlKGlkKTtcbiAgICB9XG4gICAgaWYgKGRpZENhbmNlbD8uKCkpXG4gICAgICByZXR1cm4gdHguYWJvcnQoKTtcbiAgICBhd2FpdCB0eC5kb25lO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEFsbEluZGV4RGJOYW1lcygpIHtcbiAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShnZXRGcm9tTG9jYWxTdG9yYWdlKGRiTmFtZUluZGV4S2V5KSB8fCBcIltdXCIpID8/IFtdO1xuICBpZiAoIUFycmF5LmlzQXJyYXkocmVzdWx0KSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gYWRkRGJOYW1lKG5hbWUpIHtcbiAgY29uc3QgYWxsID0gbmV3IFNldChnZXRBbGxJbmRleERiTmFtZXMoKSk7XG4gIGFsbC5hZGQobmFtZSk7XG4gIHNldEluTG9jYWxTdG9yYWdlKGRiTmFtZUluZGV4S2V5LCBKU09OLnN0cmluZ2lmeShbLi4uYWxsXSkpO1xufVxuZXhwb3J0IHtcbiAgZ2V0QWxsSW5kZXhEYk5hbWVzLFxuICBsb2FkRGF0YUZyb21TdG9yZSxcbiAgc3RvcmVDaGFuZ2VzSW5JbmRleGVkRGIsXG4gIHN0b3JlU25hcHNob3RJbkluZGV4ZWREYlxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4ZWREYi5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/sync/indexedDb.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniq.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/uniq.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   uniq: () => (/* binding */ uniq)\n/* harmony export */ });\n/* harmony import */ var lodash_uniq__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.uniq */ \"(ssr)/./node_modules/lodash.uniq/index.js\");\n\nfunction uniq(array) {\n  return lodash_uniq__WEBPACK_IMPORTED_MODULE_0__(array);\n}\n\n//# sourceMappingURL=uniq.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3VuaXEubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWdDO0FBQ2hDO0FBQ0EsU0FBUyx3Q0FBSztBQUNkO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L2VkaXRvci9kaXN0LWVzbS9saWIvdXRpbHMvdW5pcS5tanM/MDk4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX3VuaXEgZnJvbSBcImxvZGFzaC51bmlxXCI7XG5mdW5jdGlvbiB1bmlxKGFycmF5KSB7XG4gIHJldHVybiBfdW5pcShhcnJheSk7XG59XG5leHBvcnQge1xuICB1bmlxXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5pcS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniq.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   uniqueId: () => (/* binding */ uniqueId)\n/* harmony export */ });\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid */ \"(ssr)/./node_modules/@tldraw/editor/node_modules/nanoid/index.js\");\n\nfunction uniqueId() {\n  return (0,nanoid__WEBPACK_IMPORTED_MODULE_0__.nanoid)();\n}\n\n//# sourceMappingURL=uniqueId.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3VuaXF1ZUlkLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnQztBQUNoQztBQUNBLFNBQVMsOENBQU07QUFDZjtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3VuaXF1ZUlkLm1qcz9hM2Q4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG5hbm9pZCB9IGZyb20gXCJuYW5vaWRcIjtcbmZ1bmN0aW9uIHVuaXF1ZUlkKCkge1xuICByZXR1cm4gbmFub2lkKCk7XG59XG5leHBvcnQge1xuICB1bmlxdWVJZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuaXF1ZUlkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/uniqueId.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/window-open.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/dist-esm/lib/utils/window-open.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   openWindow: () => (/* binding */ openWindow)\n/* harmony export */ });\n/* harmony import */ var _runtime_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runtime.mjs */ \"(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/runtime.mjs\");\n\nfunction openWindow(url, target = \"_blank\") {\n  _runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.runtime.openWindow(url, target);\n}\n\n//# sourceMappingURL=window-open.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3dpbmRvdy1vcGVuLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QztBQUN4QztBQUNBLEVBQUUsaURBQU87QUFDVDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3IvZGlzdC1lc20vbGliL3V0aWxzL3dpbmRvdy1vcGVuLm1qcz8wYWMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJ1bnRpbWUgfSBmcm9tIFwiLi9ydW50aW1lLm1qc1wiO1xuZnVuY3Rpb24gb3BlbldpbmRvdyh1cmwsIHRhcmdldCA9IFwiX2JsYW5rXCIpIHtcbiAgcnVudGltZS5vcGVuV2luZG93KHVybCwgdGFyZ2V0KTtcbn1cbmV4cG9ydCB7XG4gIG9wZW5XaW5kb3dcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3ctb3Blbi5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/dist-esm/lib/utils/window-open.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/node_modules/nanoid/index.js":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/editor/node_modules/nanoid/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customAlphabet: () => (/* binding */ customAlphabet),\n/* harmony export */   customRandom: () => (/* binding */ customRandom),\n/* harmony export */   nanoid: () => (/* binding */ nanoid),\n/* harmony export */   random: () => (/* binding */ random),\n/* harmony export */   urlAlphabet: () => (/* reexport safe */ _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__.urlAlphabet)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./url-alphabet/index.js */ \"(ssr)/./node_modules/@tldraw/editor/node_modules/nanoid/url-alphabet/index.js\");\n\n\n\nconst POOL_SIZE_MULTIPLIER = 128\nlet pool, poolOffset\nlet fillPool = bytes => {\n  if (!pool || pool.length < bytes) {\n    pool = Buffer.allocUnsafe(bytes * POOL_SIZE_MULTIPLIER)\n    ;(0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomFillSync)(pool)\n    poolOffset = 0\n  } else if (poolOffset + bytes > pool.length) {\n    (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomFillSync)(pool)\n    poolOffset = 0\n  }\n  poolOffset += bytes\n}\nlet random = bytes => {\n  fillPool((bytes -= 0))\n  return pool.subarray(poolOffset - bytes, poolOffset)\n}\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (31 - Math.clz32((alphabet.length - 1) | 1))) - 1\n  let step = Math.ceil((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let i = step\n      while (i--) {\n        id += alphabet[bytes[i] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) => {\n  fillPool((size -= 0))\n  let id = ''\n  for (let i = poolOffset - size; i < poolOffset; i++) {\n    id += _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__.urlAlphabet[pool[i] & 63]\n  }\n  return id\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3Ivbm9kZV9tb2R1bGVzL25hbm9pZC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXVDO0FBQ2M7QUFDL0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksdURBQWM7QUFDbEI7QUFDQSxJQUFJO0FBQ0osSUFBSSxzREFBYztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNPO0FBQ1A7QUFDQTtBQUNBLGtDQUFrQyxnQkFBZ0I7QUFDbEQsVUFBVSwrREFBVztBQUNyQjtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3Ivbm9kZV9tb2R1bGVzL25hbm9pZC9pbmRleC5qcz85NjQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJhbmRvbUZpbGxTeW5jIH0gZnJvbSAnY3J5cHRvJ1xuaW1wb3J0IHsgdXJsQWxwaGFiZXQgfSBmcm9tICcuL3VybC1hbHBoYWJldC9pbmRleC5qcydcbmV4cG9ydCB7IHVybEFscGhhYmV0IH1cbmNvbnN0IFBPT0xfU0laRV9NVUxUSVBMSUVSID0gMTI4XG5sZXQgcG9vbCwgcG9vbE9mZnNldFxubGV0IGZpbGxQb29sID0gYnl0ZXMgPT4ge1xuICBpZiAoIXBvb2wgfHwgcG9vbC5sZW5ndGggPCBieXRlcykge1xuICAgIHBvb2wgPSBCdWZmZXIuYWxsb2NVbnNhZmUoYnl0ZXMgKiBQT09MX1NJWkVfTVVMVElQTElFUilcbiAgICByYW5kb21GaWxsU3luYyhwb29sKVxuICAgIHBvb2xPZmZzZXQgPSAwXG4gIH0gZWxzZSBpZiAocG9vbE9mZnNldCArIGJ5dGVzID4gcG9vbC5sZW5ndGgpIHtcbiAgICByYW5kb21GaWxsU3luYyhwb29sKVxuICAgIHBvb2xPZmZzZXQgPSAwXG4gIH1cbiAgcG9vbE9mZnNldCArPSBieXRlc1xufVxuZXhwb3J0IGxldCByYW5kb20gPSBieXRlcyA9PiB7XG4gIGZpbGxQb29sKChieXRlcyAtPSAwKSlcbiAgcmV0dXJuIHBvb2wuc3ViYXJyYXkocG9vbE9mZnNldCAtIGJ5dGVzLCBwb29sT2Zmc2V0KVxufVxuZXhwb3J0IGxldCBjdXN0b21SYW5kb20gPSAoYWxwaGFiZXQsIGRlZmF1bHRTaXplLCBnZXRSYW5kb20pID0+IHtcbiAgbGV0IG1hc2sgPSAoMiA8PCAoMzEgLSBNYXRoLmNsejMyKChhbHBoYWJldC5sZW5ndGggLSAxKSB8IDEpKSkgLSAxXG4gIGxldCBzdGVwID0gTWF0aC5jZWlsKCgxLjYgKiBtYXNrICogZGVmYXVsdFNpemUpIC8gYWxwaGFiZXQubGVuZ3RoKVxuICByZXR1cm4gKHNpemUgPSBkZWZhdWx0U2l6ZSkgPT4ge1xuICAgIGxldCBpZCA9ICcnXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGxldCBieXRlcyA9IGdldFJhbmRvbShzdGVwKVxuICAgICAgbGV0IGkgPSBzdGVwXG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGlkICs9IGFscGhhYmV0W2J5dGVzW2ldICYgbWFza10gfHwgJydcbiAgICAgICAgaWYgKGlkLmxlbmd0aCA9PT0gc2l6ZSkgcmV0dXJuIGlkXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5leHBvcnQgbGV0IGN1c3RvbUFscGhhYmV0ID0gKGFscGhhYmV0LCBzaXplID0gMjEpID0+XG4gIGN1c3RvbVJhbmRvbShhbHBoYWJldCwgc2l6ZSwgcmFuZG9tKVxuZXhwb3J0IGxldCBuYW5vaWQgPSAoc2l6ZSA9IDIxKSA9PiB7XG4gIGZpbGxQb29sKChzaXplIC09IDApKVxuICBsZXQgaWQgPSAnJ1xuICBmb3IgKGxldCBpID0gcG9vbE9mZnNldCAtIHNpemU7IGkgPCBwb29sT2Zmc2V0OyBpKyspIHtcbiAgICBpZCArPSB1cmxBbHBoYWJldFtwb29sW2ldICYgNjNdXG4gIH1cbiAgcmV0dXJuIGlkXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/node_modules/nanoid/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/editor/node_modules/nanoid/url-alphabet/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/editor/node_modules/nanoid/url-alphabet/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   urlAlphabet: () => (/* binding */ urlAlphabet)\n/* harmony export */ });\nconst urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3Ivbm9kZV9tb2R1bGVzL25hbm9pZC91cmwtYWxwaGFiZXQvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1AiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9lZGl0b3Ivbm9kZV9tb2R1bGVzL25hbm9pZC91cmwtYWxwaGFiZXQvaW5kZXguanM/ZGUxYiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdXJsQWxwaGFiZXQgPVxuICAndXNlYW5kb20tMjZUMTk4MzQwUFg3NXB4SkFDS1ZFUllNSU5EQlVTSFdPTEZfR1FaYmZnaGprbHF2d3l6cmljdCdcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/editor/node_modules/nanoid/url-alphabet/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArraySet: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.ArraySet),\n/* harmony export */   EMPTY_ARRAY: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY),\n/* harmony export */   EffectScheduler: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.EffectScheduler),\n/* harmony export */   RESET_VALUE: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE),\n/* harmony export */   UNINITIALIZED: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.UNINITIALIZED),\n/* harmony export */   atom: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.atom),\n/* harmony export */   computed: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.computed),\n/* harmony export */   getComputedInstance: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.getComputedInstance),\n/* harmony export */   isAtom: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isAtom),\n/* harmony export */   isSignal: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isSignal),\n/* harmony export */   isUninitialized: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isUninitialized),\n/* harmony export */   react: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.react),\n/* harmony export */   reactor: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.reactor),\n/* harmony export */   track: () => (/* reexport safe */ _lib_react_index_mjs__WEBPACK_IMPORTED_MODULE_1__.track),\n/* harmony export */   transact: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.transact),\n/* harmony export */   transaction: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.transaction),\n/* harmony export */   unsafe__withoutCapture: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.unsafe__withoutCapture),\n/* harmony export */   useAtom: () => (/* reexport safe */ _lib_react_index_mjs__WEBPACK_IMPORTED_MODULE_1__.useAtom),\n/* harmony export */   useComputed: () => (/* reexport safe */ _lib_react_index_mjs__WEBPACK_IMPORTED_MODULE_1__.useComputed),\n/* harmony export */   useQuickReactor: () => (/* reexport safe */ _lib_react_index_mjs__WEBPACK_IMPORTED_MODULE_1__.useQuickReactor),\n/* harmony export */   useReactor: () => (/* reexport safe */ _lib_react_index_mjs__WEBPACK_IMPORTED_MODULE_1__.useReactor),\n/* harmony export */   useStateTracking: () => (/* reexport safe */ _lib_react_index_mjs__WEBPACK_IMPORTED_MODULE_1__.useStateTracking),\n/* harmony export */   useValue: () => (/* reexport safe */ _lib_react_index_mjs__WEBPACK_IMPORTED_MODULE_1__.useValue),\n/* harmony export */   whyAmIRunning: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.whyAmIRunning),\n/* harmony export */   withDiff: () => (/* reexport safe */ _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__.withDiff)\n/* harmony export */ });\n/* harmony import */ var _lib_core_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/core/index.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/index.mjs\");\n/* harmony import */ var _lib_react_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/react/index.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/index.mjs\");\n\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXFDO0FBQ0M7QUFDdEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9pbmRleC5tanM/Njc3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9saWIvY29yZS9pbmRleC5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2xpYi9yZWFjdC9pbmRleC5tanNcIjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/ArraySet.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/ArraySet.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ARRAY_SIZE_THRESHOLD: () => (/* binding */ ARRAY_SIZE_THRESHOLD),\n/* harmony export */   ArraySet: () => (/* binding */ ArraySet)\n/* harmony export */ });\nconst ARRAY_SIZE_THRESHOLD = 8;\nclass ArraySet {\n  arraySize = 0;\n  array = Array(ARRAY_SIZE_THRESHOLD);\n  set = null;\n  /**\n   * Get whether this ArraySet has any elements.\n   *\n   * @returns True if this ArraySet has any elements, false otherwise.\n   */\n  // eslint-disable-next-line no-restricted-syntax\n  get isEmpty() {\n    if (this.array) {\n      return this.arraySize === 0;\n    }\n    if (this.set) {\n      return this.set.size === 0;\n    }\n    throw new Error(\"no set or array\");\n  }\n  /**\n   * Add an item to the ArraySet if it is not already present.\n   *\n   * @param elem - The element to add.\n   */\n  add(elem) {\n    if (this.array) {\n      const idx = this.array.indexOf(elem);\n      if (idx !== -1) {\n        return false;\n      }\n      if (this.arraySize < ARRAY_SIZE_THRESHOLD) {\n        this.array[this.arraySize] = elem;\n        this.arraySize++;\n        return true;\n      } else {\n        this.set = new Set(this.array);\n        this.array = null;\n        this.set.add(elem);\n        return true;\n      }\n    }\n    if (this.set) {\n      if (this.set.has(elem)) {\n        return false;\n      }\n      this.set.add(elem);\n      return true;\n    }\n    throw new Error(\"no set or array\");\n  }\n  /**\n   * Remove an item from the ArraySet if it is present.\n   *\n   * @param elem - The element to remove\n   */\n  remove(elem) {\n    if (this.array) {\n      const idx = this.array.indexOf(elem);\n      if (idx === -1) {\n        return false;\n      }\n      this.array[idx] = void 0;\n      this.arraySize--;\n      if (idx !== this.arraySize) {\n        this.array[idx] = this.array[this.arraySize];\n        this.array[this.arraySize] = void 0;\n      }\n      return true;\n    }\n    if (this.set) {\n      if (!this.set.has(elem)) {\n        return false;\n      }\n      this.set.delete(elem);\n      return true;\n    }\n    throw new Error(\"no set or array\");\n  }\n  /**\n   * Run a callback for each element in the ArraySet.\n   *\n   * @param visitor - The callback to run for each element.\n   */\n  visit(visitor) {\n    if (this.array) {\n      for (let i = 0; i < this.arraySize; i++) {\n        const elem = this.array[i];\n        if (typeof elem !== \"undefined\") {\n          visitor(elem);\n        }\n      }\n      return;\n    }\n    if (this.set) {\n      this.set.forEach(visitor);\n      return;\n    }\n    throw new Error(\"no set or array\");\n  }\n  has(elem) {\n    if (this.array) {\n      return this.array.indexOf(elem) !== -1;\n    } else {\n      return this.set.has(elem);\n    }\n  }\n  clear() {\n    if (this.set) {\n      this.set.clear();\n    } else {\n      this.arraySize = 0;\n      this.array = [];\n    }\n  }\n  size() {\n    if (this.set) {\n      return this.set.size;\n    } else {\n      return this.arraySize;\n    }\n  }\n}\n\n//# sourceMappingURL=ArraySet.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9BcnJheVNldC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isb0JBQW9CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9BcnJheVNldC5tanM/YWUxMyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBBUlJBWV9TSVpFX1RIUkVTSE9MRCA9IDg7XG5jbGFzcyBBcnJheVNldCB7XG4gIGFycmF5U2l6ZSA9IDA7XG4gIGFycmF5ID0gQXJyYXkoQVJSQVlfU0laRV9USFJFU0hPTEQpO1xuICBzZXQgPSBudWxsO1xuICAvKipcbiAgICogR2V0IHdoZXRoZXIgdGhpcyBBcnJheVNldCBoYXMgYW55IGVsZW1lbnRzLlxuICAgKlxuICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoaXMgQXJyYXlTZXQgaGFzIGFueSBlbGVtZW50cywgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gIGdldCBpc0VtcHR5KCkge1xuICAgIGlmICh0aGlzLmFycmF5KSB7XG4gICAgICByZXR1cm4gdGhpcy5hcnJheVNpemUgPT09IDA7XG4gICAgfVxuICAgIGlmICh0aGlzLnNldCkge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0LnNpemUgPT09IDA7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIm5vIHNldCBvciBhcnJheVwiKTtcbiAgfVxuICAvKipcbiAgICogQWRkIGFuIGl0ZW0gdG8gdGhlIEFycmF5U2V0IGlmIGl0IGlzIG5vdCBhbHJlYWR5IHByZXNlbnQuXG4gICAqXG4gICAqIEBwYXJhbSBlbGVtIC0gVGhlIGVsZW1lbnQgdG8gYWRkLlxuICAgKi9cbiAgYWRkKGVsZW0pIHtcbiAgICBpZiAodGhpcy5hcnJheSkge1xuICAgICAgY29uc3QgaWR4ID0gdGhpcy5hcnJheS5pbmRleE9mKGVsZW0pO1xuICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXJyYXlTaXplIDwgQVJSQVlfU0laRV9USFJFU0hPTEQpIHtcbiAgICAgICAgdGhpcy5hcnJheVt0aGlzLmFycmF5U2l6ZV0gPSBlbGVtO1xuICAgICAgICB0aGlzLmFycmF5U2l6ZSsrO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0ID0gbmV3IFNldCh0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5hcnJheSA9IG51bGw7XG4gICAgICAgIHRoaXMuc2V0LmFkZChlbGVtKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnNldCkge1xuICAgICAgaWYgKHRoaXMuc2V0LmhhcyhlbGVtKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB0aGlzLnNldC5hZGQoZWxlbSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwibm8gc2V0IG9yIGFycmF5XCIpO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gaXRlbSBmcm9tIHRoZSBBcnJheVNldCBpZiBpdCBpcyBwcmVzZW50LlxuICAgKlxuICAgKiBAcGFyYW0gZWxlbSAtIFRoZSBlbGVtZW50IHRvIHJlbW92ZVxuICAgKi9cbiAgcmVtb3ZlKGVsZW0pIHtcbiAgICBpZiAodGhpcy5hcnJheSkge1xuICAgICAgY29uc3QgaWR4ID0gdGhpcy5hcnJheS5pbmRleE9mKGVsZW0pO1xuICAgICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdGhpcy5hcnJheVtpZHhdID0gdm9pZCAwO1xuICAgICAgdGhpcy5hcnJheVNpemUtLTtcbiAgICAgIGlmIChpZHggIT09IHRoaXMuYXJyYXlTaXplKSB7XG4gICAgICAgIHRoaXMuYXJyYXlbaWR4XSA9IHRoaXMuYXJyYXlbdGhpcy5hcnJheVNpemVdO1xuICAgICAgICB0aGlzLmFycmF5W3RoaXMuYXJyYXlTaXplXSA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZXQpIHtcbiAgICAgIGlmICghdGhpcy5zZXQuaGFzKGVsZW0pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0LmRlbGV0ZShlbGVtKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJubyBzZXQgb3IgYXJyYXlcIik7XG4gIH1cbiAgLyoqXG4gICAqIFJ1biBhIGNhbGxiYWNrIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIEFycmF5U2V0LlxuICAgKlxuICAgKiBAcGFyYW0gdmlzaXRvciAtIFRoZSBjYWxsYmFjayB0byBydW4gZm9yIGVhY2ggZWxlbWVudC5cbiAgICovXG4gIHZpc2l0KHZpc2l0b3IpIHtcbiAgICBpZiAodGhpcy5hcnJheSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFycmF5U2l6ZTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGVsZW0gPSB0aGlzLmFycmF5W2ldO1xuICAgICAgICBpZiAodHlwZW9mIGVsZW0gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICB2aXNpdG9yKGVsZW0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnNldCkge1xuICAgICAgdGhpcy5zZXQuZm9yRWFjaCh2aXNpdG9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwibm8gc2V0IG9yIGFycmF5XCIpO1xuICB9XG4gIGhhcyhlbGVtKSB7XG4gICAgaWYgKHRoaXMuYXJyYXkpIHtcbiAgICAgIHJldHVybiB0aGlzLmFycmF5LmluZGV4T2YoZWxlbSkgIT09IC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXQuaGFzKGVsZW0pO1xuICAgIH1cbiAgfVxuICBjbGVhcigpIHtcbiAgICBpZiAodGhpcy5zZXQpIHtcbiAgICAgIHRoaXMuc2V0LmNsZWFyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYXJyYXlTaXplID0gMDtcbiAgICAgIHRoaXMuYXJyYXkgPSBbXTtcbiAgICB9XG4gIH1cbiAgc2l6ZSgpIHtcbiAgICBpZiAodGhpcy5zZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldC5zaXplO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5hcnJheVNpemU7XG4gICAgfVxuICB9XG59XG5leHBvcnQge1xuICBBUlJBWV9TSVpFX1RIUkVTSE9MRCxcbiAgQXJyYXlTZXRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BcnJheVNldC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/ArraySet.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/Atom.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/Atom.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _Atom: () => (/* binding */ _Atom),\n/* harmony export */   atom: () => (/* binding */ atom),\n/* harmony export */   isAtom: () => (/* binding */ isAtom)\n/* harmony export */ });\n/* harmony import */ var _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ArraySet.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/ArraySet.mjs\");\n/* harmony import */ var _HistoryBuffer_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./HistoryBuffer.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/HistoryBuffer.mjs\");\n/* harmony import */ var _capture_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./capture.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/capture.mjs\");\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helpers.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/helpers.mjs\");\n/* harmony import */ var _transactions_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./transactions.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/transactions.mjs\");\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/types.mjs\");\n\n\n\n\n\n\nclass __Atom__ {\n  constructor(name, current, options) {\n    this.name = name;\n    this.current = current;\n    this.isEqual = options?.isEqual ?? null;\n    if (!options)\n      return;\n    if (options.historyLength) {\n      this.historyBuffer = new _HistoryBuffer_mjs__WEBPACK_IMPORTED_MODULE_1__.HistoryBuffer(options.historyLength);\n    }\n    this.computeDiff = options.computeDiff;\n  }\n  isEqual;\n  computeDiff;\n  lastChangedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)();\n  children = new _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_0__.ArraySet();\n  historyBuffer;\n  __unsafe__getWithoutCapture(_ignoreErrors) {\n    return this.current;\n  }\n  get() {\n    (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeCaptureParent)(this);\n    return this.current;\n  }\n  set(value, diff) {\n    if (this.isEqual?.(this.current, value) ?? (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.equals)(this.current, value)) {\n      return this.current;\n    }\n    (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.advanceGlobalEpoch)();\n    if (this.historyBuffer) {\n      this.historyBuffer.pushEntry(\n        this.lastChangedEpoch,\n        (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)(),\n        diff ?? this.computeDiff?.(this.current, value, this.lastChangedEpoch, (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)()) ?? _types_mjs__WEBPACK_IMPORTED_MODULE_5__.RESET_VALUE\n      );\n    }\n    this.lastChangedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)();\n    const oldValue = this.current;\n    this.current = value;\n    (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.atomDidChange)(this, oldValue);\n    return value;\n  }\n  update(updater) {\n    return this.set(updater(this.current));\n  }\n  getDiffSince(epoch) {\n    (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeCaptureParent)(this);\n    if (epoch >= this.lastChangedEpoch) {\n      return _helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.EMPTY_ARRAY;\n    }\n    return this.historyBuffer?.getChangesSince(epoch) ?? _types_mjs__WEBPACK_IMPORTED_MODULE_5__.RESET_VALUE;\n  }\n}\nconst _Atom = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.singleton)(\"Atom\", () => __Atom__);\nfunction atom(name, initialValue, options) {\n  return new _Atom(name, initialValue, options);\n}\nfunction isAtom(value) {\n  return value instanceof _Atom;\n}\n\n//# sourceMappingURL=Atom.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9BdG9tLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBMEM7QUFDVTtBQUNEO0FBQ1k7QUFDd0I7QUFDN0M7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw2REFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGlFQUFjO0FBQ25DLGlCQUFpQixtREFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxnRUFBa0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLG9EQUFNO0FBQ3JEO0FBQ0E7QUFDQSxJQUFJLHFFQUFrQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFjO0FBQ3RCLCtFQUErRSxpRUFBYyxPQUFPLG1EQUFXO0FBQy9HO0FBQ0E7QUFDQSw0QkFBNEIsaUVBQWM7QUFDMUM7QUFDQTtBQUNBLElBQUksZ0VBQWE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxnRUFBa0I7QUFDdEI7QUFDQSxhQUFhLHFEQUFXO0FBQ3hCO0FBQ0EseURBQXlELG1EQUFXO0FBQ3BFO0FBQ0E7QUFDQSxjQUFjLHVEQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9BdG9tLm1qcz9hODY2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFycmF5U2V0IH0gZnJvbSBcIi4vQXJyYXlTZXQubWpzXCI7XG5pbXBvcnQgeyBIaXN0b3J5QnVmZmVyIH0gZnJvbSBcIi4vSGlzdG9yeUJ1ZmZlci5tanNcIjtcbmltcG9ydCB7IG1heWJlQ2FwdHVyZVBhcmVudCB9IGZyb20gXCIuL2NhcHR1cmUubWpzXCI7XG5pbXBvcnQgeyBFTVBUWV9BUlJBWSwgZXF1YWxzLCBzaW5nbGV0b24gfSBmcm9tIFwiLi9oZWxwZXJzLm1qc1wiO1xuaW1wb3J0IHsgYWR2YW5jZUdsb2JhbEVwb2NoLCBhdG9tRGlkQ2hhbmdlLCBnZXRHbG9iYWxFcG9jaCB9IGZyb20gXCIuL3RyYW5zYWN0aW9ucy5tanNcIjtcbmltcG9ydCB7IFJFU0VUX1ZBTFVFIH0gZnJvbSBcIi4vdHlwZXMubWpzXCI7XG5jbGFzcyBfX0F0b21fXyB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIGN1cnJlbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuY3VycmVudCA9IGN1cnJlbnQ7XG4gICAgdGhpcy5pc0VxdWFsID0gb3B0aW9ucz8uaXNFcXVhbCA/PyBudWxsO1xuICAgIGlmICghb3B0aW9ucylcbiAgICAgIHJldHVybjtcbiAgICBpZiAob3B0aW9ucy5oaXN0b3J5TGVuZ3RoKSB7XG4gICAgICB0aGlzLmhpc3RvcnlCdWZmZXIgPSBuZXcgSGlzdG9yeUJ1ZmZlcihvcHRpb25zLmhpc3RvcnlMZW5ndGgpO1xuICAgIH1cbiAgICB0aGlzLmNvbXB1dGVEaWZmID0gb3B0aW9ucy5jb21wdXRlRGlmZjtcbiAgfVxuICBpc0VxdWFsO1xuICBjb21wdXRlRGlmZjtcbiAgbGFzdENoYW5nZWRFcG9jaCA9IGdldEdsb2JhbEVwb2NoKCk7XG4gIGNoaWxkcmVuID0gbmV3IEFycmF5U2V0KCk7XG4gIGhpc3RvcnlCdWZmZXI7XG4gIF9fdW5zYWZlX19nZXRXaXRob3V0Q2FwdHVyZShfaWdub3JlRXJyb3JzKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudDtcbiAgfVxuICBnZXQoKSB7XG4gICAgbWF5YmVDYXB0dXJlUGFyZW50KHRoaXMpO1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnQ7XG4gIH1cbiAgc2V0KHZhbHVlLCBkaWZmKSB7XG4gICAgaWYgKHRoaXMuaXNFcXVhbD8uKHRoaXMuY3VycmVudCwgdmFsdWUpID8/IGVxdWFscyh0aGlzLmN1cnJlbnQsIHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudDtcbiAgICB9XG4gICAgYWR2YW5jZUdsb2JhbEVwb2NoKCk7XG4gICAgaWYgKHRoaXMuaGlzdG9yeUJ1ZmZlcikge1xuICAgICAgdGhpcy5oaXN0b3J5QnVmZmVyLnB1c2hFbnRyeShcbiAgICAgICAgdGhpcy5sYXN0Q2hhbmdlZEVwb2NoLFxuICAgICAgICBnZXRHbG9iYWxFcG9jaCgpLFxuICAgICAgICBkaWZmID8/IHRoaXMuY29tcHV0ZURpZmY/Lih0aGlzLmN1cnJlbnQsIHZhbHVlLCB0aGlzLmxhc3RDaGFuZ2VkRXBvY2gsIGdldEdsb2JhbEVwb2NoKCkpID8/IFJFU0VUX1ZBTFVFXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLmxhc3RDaGFuZ2VkRXBvY2ggPSBnZXRHbG9iYWxFcG9jaCgpO1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5jdXJyZW50O1xuICAgIHRoaXMuY3VycmVudCA9IHZhbHVlO1xuICAgIGF0b21EaWRDaGFuZ2UodGhpcywgb2xkVmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICB1cGRhdGUodXBkYXRlcikge1xuICAgIHJldHVybiB0aGlzLnNldCh1cGRhdGVyKHRoaXMuY3VycmVudCkpO1xuICB9XG4gIGdldERpZmZTaW5jZShlcG9jaCkge1xuICAgIG1heWJlQ2FwdHVyZVBhcmVudCh0aGlzKTtcbiAgICBpZiAoZXBvY2ggPj0gdGhpcy5sYXN0Q2hhbmdlZEVwb2NoKSB7XG4gICAgICByZXR1cm4gRU1QVFlfQVJSQVk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmhpc3RvcnlCdWZmZXI/LmdldENoYW5nZXNTaW5jZShlcG9jaCkgPz8gUkVTRVRfVkFMVUU7XG4gIH1cbn1cbmNvbnN0IF9BdG9tID0gc2luZ2xldG9uKFwiQXRvbVwiLCAoKSA9PiBfX0F0b21fXyk7XG5mdW5jdGlvbiBhdG9tKG5hbWUsIGluaXRpYWxWYWx1ZSwgb3B0aW9ucykge1xuICByZXR1cm4gbmV3IF9BdG9tKG5hbWUsIGluaXRpYWxWYWx1ZSwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBpc0F0b20odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgX0F0b207XG59XG5leHBvcnQge1xuICBfQXRvbSxcbiAgYXRvbSxcbiAgaXNBdG9tXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXRvbS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/Atom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/Computed.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/Computed.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UNINITIALIZED: () => (/* binding */ UNINITIALIZED),\n/* harmony export */   WithDiff: () => (/* binding */ WithDiff),\n/* harmony export */   _Computed: () => (/* binding */ _Computed),\n/* harmony export */   computed: () => (/* binding */ computed),\n/* harmony export */   getComputedInstance: () => (/* binding */ getComputedInstance),\n/* harmony export */   isComputed: () => (/* binding */ isComputed),\n/* harmony export */   isUninitialized: () => (/* binding */ isUninitialized),\n/* harmony export */   withDiff: () => (/* binding */ withDiff)\n/* harmony export */ });\n/* harmony import */ var _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ArraySet.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/ArraySet.mjs\");\n/* harmony import */ var _HistoryBuffer_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./HistoryBuffer.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/HistoryBuffer.mjs\");\n/* harmony import */ var _capture_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./capture.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/capture.mjs\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/constants.mjs\");\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helpers.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/helpers.mjs\");\n/* harmony import */ var _transactions_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./transactions.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/transactions.mjs\");\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./types.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/types.mjs\");\n/* harmony import */ var _warnings_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./warnings.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/warnings.mjs\");\n\n\n\n\n\n\n\n\nconst UNINITIALIZED = Symbol.for(\"com.tldraw.state/UNINITIALIZED\");\nconst isUninitialized = (value) => {\n  return value === UNINITIALIZED;\n};\nconst WithDiff = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_4__.singleton)(\n  \"WithDiff\",\n  () => (class WithDiff {\n    constructor(value, diff) {\n      this.value = value;\n      this.diff = diff;\n    }\n  })\n);\nfunction withDiff(value, diff) {\n  return new WithDiff(value, diff);\n}\nclass __UNSAFE__Computed {\n  constructor(name, derive, options) {\n    this.name = name;\n    this.derive = derive;\n    if (options?.historyLength) {\n      this.historyBuffer = new _HistoryBuffer_mjs__WEBPACK_IMPORTED_MODULE_1__.HistoryBuffer(options.historyLength);\n    }\n    this.computeDiff = options?.computeDiff;\n    this.isEqual = options?.isEqual ?? _helpers_mjs__WEBPACK_IMPORTED_MODULE_4__.equals;\n  }\n  lastChangedEpoch = _constants_mjs__WEBPACK_IMPORTED_MODULE_3__.GLOBAL_START_EPOCH;\n  lastTraversedEpoch = _constants_mjs__WEBPACK_IMPORTED_MODULE_3__.GLOBAL_START_EPOCH;\n  /**\n   * The epoch when the reactor was last checked.\n   */\n  lastCheckedEpoch = _constants_mjs__WEBPACK_IMPORTED_MODULE_3__.GLOBAL_START_EPOCH;\n  parentSet = new _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_0__.ArraySet();\n  parents = [];\n  parentEpochs = [];\n  children = new _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_0__.ArraySet();\n  // eslint-disable-next-line no-restricted-syntax\n  get isActivelyListening() {\n    return !this.children.isEmpty;\n  }\n  historyBuffer;\n  // The last-computed value of this signal.\n  state = UNINITIALIZED;\n  // If the signal throws an error we stash it so we can rethrow it on the next get()\n  error = null;\n  computeDiff;\n  isEqual;\n  __unsafe__getWithoutCapture(ignoreErrors) {\n    const isNew = this.lastChangedEpoch === _constants_mjs__WEBPACK_IMPORTED_MODULE_3__.GLOBAL_START_EPOCH;\n    const globalEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_5__.getGlobalEpoch)();\n    if (!isNew && (this.lastCheckedEpoch === globalEpoch || this.isActivelyListening && (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_5__.getIsReacting)() && this.lastTraversedEpoch < (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_5__.getReactionEpoch)() || !(0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_4__.haveParentsChanged)(this))) {\n      this.lastCheckedEpoch = globalEpoch;\n      if (this.error) {\n        if (!ignoreErrors) {\n          throw this.error.thrownValue;\n        } else {\n          return this.state;\n        }\n      } else {\n        return this.state;\n      }\n    }\n    try {\n      (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_2__.startCapturingParents)(this);\n      const result = this.derive(this.state, this.lastCheckedEpoch);\n      const newState = result instanceof WithDiff ? result.value : result;\n      const isUninitialized2 = this.state === UNINITIALIZED;\n      if (isUninitialized2 || !this.isEqual(newState, this.state)) {\n        if (this.historyBuffer && !isUninitialized2) {\n          const diff = result instanceof WithDiff ? result.diff : void 0;\n          this.historyBuffer.pushEntry(\n            this.lastChangedEpoch,\n            (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_5__.getGlobalEpoch)(),\n            diff ?? this.computeDiff?.(this.state, newState, this.lastCheckedEpoch, (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_5__.getGlobalEpoch)()) ?? _types_mjs__WEBPACK_IMPORTED_MODULE_6__.RESET_VALUE\n          );\n        }\n        this.lastChangedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_5__.getGlobalEpoch)();\n        this.state = newState;\n      }\n      this.error = null;\n      this.lastCheckedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_5__.getGlobalEpoch)();\n      return this.state;\n    } catch (e) {\n      if (this.state !== UNINITIALIZED) {\n        this.state = UNINITIALIZED;\n        this.lastChangedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_5__.getGlobalEpoch)();\n      }\n      this.lastCheckedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_5__.getGlobalEpoch)();\n      if (this.historyBuffer) {\n        this.historyBuffer.clear();\n      }\n      this.error = { thrownValue: e };\n      if (!ignoreErrors)\n        throw e;\n      return this.state;\n    } finally {\n      (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_2__.stopCapturingParents)();\n    }\n  }\n  get() {\n    try {\n      return this.__unsafe__getWithoutCapture();\n    } finally {\n      (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeCaptureParent)(this);\n    }\n  }\n  getDiffSince(epoch) {\n    this.__unsafe__getWithoutCapture(true);\n    (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeCaptureParent)(this);\n    if (epoch >= this.lastChangedEpoch) {\n      return _helpers_mjs__WEBPACK_IMPORTED_MODULE_4__.EMPTY_ARRAY;\n    }\n    return this.historyBuffer?.getChangesSince(epoch) ?? _types_mjs__WEBPACK_IMPORTED_MODULE_6__.RESET_VALUE;\n  }\n}\nconst _Computed = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_4__.singleton)(\"Computed\", () => __UNSAFE__Computed);\nfunction computedMethodAnnotation(options = {}, _target, key, descriptor) {\n  const originalMethod = descriptor.value;\n  const derivationKey = Symbol.for(\"__@tldraw/state__computed__\" + key);\n  descriptor.value = function() {\n    let d = this[derivationKey];\n    if (!d) {\n      d = new _Computed(key, originalMethod.bind(this), options);\n      Object.defineProperty(this, derivationKey, {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: d\n      });\n    }\n    return d.get();\n  };\n  descriptor.value[isComputedMethodKey] = true;\n  return descriptor;\n}\nfunction computedAnnotation(options = {}, _target, key, descriptor) {\n  if (descriptor.get) {\n    (0,_warnings_mjs__WEBPACK_IMPORTED_MODULE_7__.logComputedGetterWarning)();\n    return computedGetterAnnotation(options, _target, key, descriptor);\n  } else {\n    return computedMethodAnnotation(options, _target, key, descriptor);\n  }\n}\nfunction computedGetterAnnotation(options = {}, _target, key, descriptor) {\n  const originalMethod = descriptor.get;\n  const derivationKey = Symbol.for(\"__@tldraw/state__computed__\" + key);\n  descriptor.get = function() {\n    let d = this[derivationKey];\n    if (!d) {\n      d = new _Computed(key, originalMethod.bind(this), options);\n      Object.defineProperty(this, derivationKey, {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: d\n      });\n    }\n    return d.get();\n  };\n  return descriptor;\n}\nconst isComputedMethodKey = \"@@__isComputedMethod__@@\";\nfunction getComputedInstance(obj, propertyName) {\n  const key = Symbol.for(\"__@tldraw/state__computed__\" + propertyName.toString());\n  let inst = obj[key];\n  if (!inst) {\n    const val = obj[propertyName];\n    if (typeof val === \"function\" && val[isComputedMethodKey]) {\n      val.call(obj);\n    }\n    inst = obj[key];\n  }\n  return inst;\n}\nfunction computed() {\n  if (arguments.length === 1) {\n    const options = arguments[0];\n    return (target, key, descriptor) => computedAnnotation(options, target, key, descriptor);\n  } else if (typeof arguments[0] === \"string\") {\n    return new _Computed(arguments[0], arguments[1], arguments[2]);\n  } else {\n    return computedAnnotation(void 0, arguments[0], arguments[1], arguments[2]);\n  }\n}\nfunction isComputed(value) {\n  return value && value instanceof _Computed;\n}\n\n//# sourceMappingURL=Computed.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9Db21wdXRlZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwQztBQUNVO0FBQzRDO0FBQzNDO0FBQzhCO0FBQ0U7QUFDM0M7QUFDZ0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdURBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw2REFBYTtBQUM1QztBQUNBO0FBQ0EsdUNBQXVDLGdEQUFNO0FBQzdDO0FBQ0EscUJBQXFCLDhEQUFrQjtBQUN2Qyx1QkFBdUIsOERBQWtCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw4REFBa0I7QUFDdkMsa0JBQWtCLG1EQUFRO0FBQzFCO0FBQ0E7QUFDQSxpQkFBaUIsbURBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDhEQUFrQjtBQUM5RCx3QkFBd0IsaUVBQWM7QUFDdEMsd0ZBQXdGLGdFQUFhLGdDQUFnQyxtRUFBZ0IsT0FBTyxnRUFBa0I7QUFDOUs7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sbUVBQXFCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlFQUFjO0FBQzFCLG9GQUFvRixpRUFBYyxPQUFPLG1EQUFXO0FBQ3BIO0FBQ0E7QUFDQSxnQ0FBZ0MsaUVBQWM7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlFQUFjO0FBQzVDO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxnQ0FBZ0MsaUVBQWM7QUFDOUM7QUFDQSw4QkFBOEIsaUVBQWM7QUFDNUM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixNQUFNLGtFQUFvQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU0sZ0VBQWtCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxnRUFBa0I7QUFDdEI7QUFDQSxhQUFhLHFEQUFXO0FBQ3hCO0FBQ0EseURBQXlELG1EQUFXO0FBQ3BFO0FBQ0E7QUFDQSxrQkFBa0IsdURBQVM7QUFDM0IsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0EsSUFBSSx1RUFBd0I7QUFDNUI7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlL2Rpc3QtZXNtL2xpYi9jb3JlL0NvbXB1dGVkLm1qcz9mMjI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFycmF5U2V0IH0gZnJvbSBcIi4vQXJyYXlTZXQubWpzXCI7XG5pbXBvcnQgeyBIaXN0b3J5QnVmZmVyIH0gZnJvbSBcIi4vSGlzdG9yeUJ1ZmZlci5tanNcIjtcbmltcG9ydCB7IG1heWJlQ2FwdHVyZVBhcmVudCwgc3RhcnRDYXB0dXJpbmdQYXJlbnRzLCBzdG9wQ2FwdHVyaW5nUGFyZW50cyB9IGZyb20gXCIuL2NhcHR1cmUubWpzXCI7XG5pbXBvcnQgeyBHTE9CQUxfU1RBUlRfRVBPQ0ggfSBmcm9tIFwiLi9jb25zdGFudHMubWpzXCI7XG5pbXBvcnQgeyBFTVBUWV9BUlJBWSwgZXF1YWxzLCBoYXZlUGFyZW50c0NoYW5nZWQsIHNpbmdsZXRvbiB9IGZyb20gXCIuL2hlbHBlcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxFcG9jaCwgZ2V0SXNSZWFjdGluZywgZ2V0UmVhY3Rpb25FcG9jaCB9IGZyb20gXCIuL3RyYW5zYWN0aW9ucy5tanNcIjtcbmltcG9ydCB7IFJFU0VUX1ZBTFVFIH0gZnJvbSBcIi4vdHlwZXMubWpzXCI7XG5pbXBvcnQgeyBsb2dDb21wdXRlZEdldHRlcldhcm5pbmcgfSBmcm9tIFwiLi93YXJuaW5ncy5tanNcIjtcbmNvbnN0IFVOSU5JVElBTElaRUQgPSBTeW1ib2wuZm9yKFwiY29tLnRsZHJhdy5zdGF0ZS9VTklOSVRJQUxJWkVEXCIpO1xuY29uc3QgaXNVbmluaXRpYWxpemVkID0gKHZhbHVlKSA9PiB7XG4gIHJldHVybiB2YWx1ZSA9PT0gVU5JTklUSUFMSVpFRDtcbn07XG5jb25zdCBXaXRoRGlmZiA9IHNpbmdsZXRvbihcbiAgXCJXaXRoRGlmZlwiLFxuICAoKSA9PiAoY2xhc3MgV2l0aERpZmYge1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlLCBkaWZmKSB7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLmRpZmYgPSBkaWZmO1xuICAgIH1cbiAgfSlcbik7XG5mdW5jdGlvbiB3aXRoRGlmZih2YWx1ZSwgZGlmZikge1xuICByZXR1cm4gbmV3IFdpdGhEaWZmKHZhbHVlLCBkaWZmKTtcbn1cbmNsYXNzIF9fVU5TQUZFX19Db21wdXRlZCB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIGRlcml2ZSwgb3B0aW9ucykge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5kZXJpdmUgPSBkZXJpdmU7XG4gICAgaWYgKG9wdGlvbnM/Lmhpc3RvcnlMZW5ndGgpIHtcbiAgICAgIHRoaXMuaGlzdG9yeUJ1ZmZlciA9IG5ldyBIaXN0b3J5QnVmZmVyKG9wdGlvbnMuaGlzdG9yeUxlbmd0aCk7XG4gICAgfVxuICAgIHRoaXMuY29tcHV0ZURpZmYgPSBvcHRpb25zPy5jb21wdXRlRGlmZjtcbiAgICB0aGlzLmlzRXF1YWwgPSBvcHRpb25zPy5pc0VxdWFsID8/IGVxdWFscztcbiAgfVxuICBsYXN0Q2hhbmdlZEVwb2NoID0gR0xPQkFMX1NUQVJUX0VQT0NIO1xuICBsYXN0VHJhdmVyc2VkRXBvY2ggPSBHTE9CQUxfU1RBUlRfRVBPQ0g7XG4gIC8qKlxuICAgKiBUaGUgZXBvY2ggd2hlbiB0aGUgcmVhY3RvciB3YXMgbGFzdCBjaGVja2VkLlxuICAgKi9cbiAgbGFzdENoZWNrZWRFcG9jaCA9IEdMT0JBTF9TVEFSVF9FUE9DSDtcbiAgcGFyZW50U2V0ID0gbmV3IEFycmF5U2V0KCk7XG4gIHBhcmVudHMgPSBbXTtcbiAgcGFyZW50RXBvY2hzID0gW107XG4gIGNoaWxkcmVuID0gbmV3IEFycmF5U2V0KCk7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgaXNBY3RpdmVseUxpc3RlbmluZygpIHtcbiAgICByZXR1cm4gIXRoaXMuY2hpbGRyZW4uaXNFbXB0eTtcbiAgfVxuICBoaXN0b3J5QnVmZmVyO1xuICAvLyBUaGUgbGFzdC1jb21wdXRlZCB2YWx1ZSBvZiB0aGlzIHNpZ25hbC5cbiAgc3RhdGUgPSBVTklOSVRJQUxJWkVEO1xuICAvLyBJZiB0aGUgc2lnbmFsIHRocm93cyBhbiBlcnJvciB3ZSBzdGFzaCBpdCBzbyB3ZSBjYW4gcmV0aHJvdyBpdCBvbiB0aGUgbmV4dCBnZXQoKVxuICBlcnJvciA9IG51bGw7XG4gIGNvbXB1dGVEaWZmO1xuICBpc0VxdWFsO1xuICBfX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUoaWdub3JlRXJyb3JzKSB7XG4gICAgY29uc3QgaXNOZXcgPSB0aGlzLmxhc3RDaGFuZ2VkRXBvY2ggPT09IEdMT0JBTF9TVEFSVF9FUE9DSDtcbiAgICBjb25zdCBnbG9iYWxFcG9jaCA9IGdldEdsb2JhbEVwb2NoKCk7XG4gICAgaWYgKCFpc05ldyAmJiAodGhpcy5sYXN0Q2hlY2tlZEVwb2NoID09PSBnbG9iYWxFcG9jaCB8fCB0aGlzLmlzQWN0aXZlbHlMaXN0ZW5pbmcgJiYgZ2V0SXNSZWFjdGluZygpICYmIHRoaXMubGFzdFRyYXZlcnNlZEVwb2NoIDwgZ2V0UmVhY3Rpb25FcG9jaCgpIHx8ICFoYXZlUGFyZW50c0NoYW5nZWQodGhpcykpKSB7XG4gICAgICB0aGlzLmxhc3RDaGVja2VkRXBvY2ggPSBnbG9iYWxFcG9jaDtcbiAgICAgIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICAgIGlmICghaWdub3JlRXJyb3JzKSB7XG4gICAgICAgICAgdGhyb3cgdGhpcy5lcnJvci50aHJvd25WYWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gICAgICB9XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBzdGFydENhcHR1cmluZ1BhcmVudHModGhpcyk7XG4gICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmRlcml2ZSh0aGlzLnN0YXRlLCB0aGlzLmxhc3RDaGVja2VkRXBvY2gpO1xuICAgICAgY29uc3QgbmV3U3RhdGUgPSByZXN1bHQgaW5zdGFuY2VvZiBXaXRoRGlmZiA/IHJlc3VsdC52YWx1ZSA6IHJlc3VsdDtcbiAgICAgIGNvbnN0IGlzVW5pbml0aWFsaXplZDIgPSB0aGlzLnN0YXRlID09PSBVTklOSVRJQUxJWkVEO1xuICAgICAgaWYgKGlzVW5pbml0aWFsaXplZDIgfHwgIXRoaXMuaXNFcXVhbChuZXdTdGF0ZSwgdGhpcy5zdGF0ZSkpIHtcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUJ1ZmZlciAmJiAhaXNVbmluaXRpYWxpemVkMikge1xuICAgICAgICAgIGNvbnN0IGRpZmYgPSByZXN1bHQgaW5zdGFuY2VvZiBXaXRoRGlmZiA/IHJlc3VsdC5kaWZmIDogdm9pZCAwO1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUJ1ZmZlci5wdXNoRW50cnkoXG4gICAgICAgICAgICB0aGlzLmxhc3RDaGFuZ2VkRXBvY2gsXG4gICAgICAgICAgICBnZXRHbG9iYWxFcG9jaCgpLFxuICAgICAgICAgICAgZGlmZiA/PyB0aGlzLmNvbXB1dGVEaWZmPy4odGhpcy5zdGF0ZSwgbmV3U3RhdGUsIHRoaXMubGFzdENoZWNrZWRFcG9jaCwgZ2V0R2xvYmFsRXBvY2goKSkgPz8gUkVTRVRfVkFMVUVcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdENoYW5nZWRFcG9jaCA9IGdldEdsb2JhbEVwb2NoKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgdGhpcy5sYXN0Q2hlY2tlZEVwb2NoID0gZ2V0R2xvYmFsRXBvY2goKTtcbiAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBVTklOSVRJQUxJWkVEKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBVTklOSVRJQUxJWkVEO1xuICAgICAgICB0aGlzLmxhc3RDaGFuZ2VkRXBvY2ggPSBnZXRHbG9iYWxFcG9jaCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5sYXN0Q2hlY2tlZEVwb2NoID0gZ2V0R2xvYmFsRXBvY2goKTtcbiAgICAgIGlmICh0aGlzLmhpc3RvcnlCdWZmZXIpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5QnVmZmVyLmNsZWFyKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmVycm9yID0geyB0aHJvd25WYWx1ZTogZSB9O1xuICAgICAgaWYgKCFpZ25vcmVFcnJvcnMpXG4gICAgICAgIHRocm93IGU7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc3RvcENhcHR1cmluZ1BhcmVudHMoKTtcbiAgICB9XG4gIH1cbiAgZ2V0KCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdGhpcy5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgbWF5YmVDYXB0dXJlUGFyZW50KHRoaXMpO1xuICAgIH1cbiAgfVxuICBnZXREaWZmU2luY2UoZXBvY2gpIHtcbiAgICB0aGlzLl9fdW5zYWZlX19nZXRXaXRob3V0Q2FwdHVyZSh0cnVlKTtcbiAgICBtYXliZUNhcHR1cmVQYXJlbnQodGhpcyk7XG4gICAgaWYgKGVwb2NoID49IHRoaXMubGFzdENoYW5nZWRFcG9jaCkge1xuICAgICAgcmV0dXJuIEVNUFRZX0FSUkFZO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5QnVmZmVyPy5nZXRDaGFuZ2VzU2luY2UoZXBvY2gpID8/IFJFU0VUX1ZBTFVFO1xuICB9XG59XG5jb25zdCBfQ29tcHV0ZWQgPSBzaW5nbGV0b24oXCJDb21wdXRlZFwiLCAoKSA9PiBfX1VOU0FGRV9fQ29tcHV0ZWQpO1xuZnVuY3Rpb24gY29tcHV0ZWRNZXRob2RBbm5vdGF0aW9uKG9wdGlvbnMgPSB7fSwgX3RhcmdldCwga2V5LCBkZXNjcmlwdG9yKSB7XG4gIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcbiAgY29uc3QgZGVyaXZhdGlvbktleSA9IFN5bWJvbC5mb3IoXCJfX0B0bGRyYXcvc3RhdGVfX2NvbXB1dGVkX19cIiArIGtleSk7XG4gIGRlc2NyaXB0b3IudmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICBsZXQgZCA9IHRoaXNbZGVyaXZhdGlvbktleV07XG4gICAgaWYgKCFkKSB7XG4gICAgICBkID0gbmV3IF9Db21wdXRlZChrZXksIG9yaWdpbmFsTWV0aG9kLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGRlcml2YXRpb25LZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IGRcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZC5nZXQoKTtcbiAgfTtcbiAgZGVzY3JpcHRvci52YWx1ZVtpc0NvbXB1dGVkTWV0aG9kS2V5XSA9IHRydWU7XG4gIHJldHVybiBkZXNjcmlwdG9yO1xufVxuZnVuY3Rpb24gY29tcHV0ZWRBbm5vdGF0aW9uKG9wdGlvbnMgPSB7fSwgX3RhcmdldCwga2V5LCBkZXNjcmlwdG9yKSB7XG4gIGlmIChkZXNjcmlwdG9yLmdldCkge1xuICAgIGxvZ0NvbXB1dGVkR2V0dGVyV2FybmluZygpO1xuICAgIHJldHVybiBjb21wdXRlZEdldHRlckFubm90YXRpb24ob3B0aW9ucywgX3RhcmdldCwga2V5LCBkZXNjcmlwdG9yKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY29tcHV0ZWRNZXRob2RBbm5vdGF0aW9uKG9wdGlvbnMsIF90YXJnZXQsIGtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cbmZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyQW5ub3RhdGlvbihvcHRpb25zID0ge30sIF90YXJnZXQsIGtleSwgZGVzY3JpcHRvcikge1xuICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IuZ2V0O1xuICBjb25zdCBkZXJpdmF0aW9uS2V5ID0gU3ltYm9sLmZvcihcIl9fQHRsZHJhdy9zdGF0ZV9fY29tcHV0ZWRfX1wiICsga2V5KTtcbiAgZGVzY3JpcHRvci5nZXQgPSBmdW5jdGlvbigpIHtcbiAgICBsZXQgZCA9IHRoaXNbZGVyaXZhdGlvbktleV07XG4gICAgaWYgKCFkKSB7XG4gICAgICBkID0gbmV3IF9Db21wdXRlZChrZXksIG9yaWdpbmFsTWV0aG9kLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGRlcml2YXRpb25LZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IGRcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZC5nZXQoKTtcbiAgfTtcbiAgcmV0dXJuIGRlc2NyaXB0b3I7XG59XG5jb25zdCBpc0NvbXB1dGVkTWV0aG9kS2V5ID0gXCJAQF9faXNDb21wdXRlZE1ldGhvZF9fQEBcIjtcbmZ1bmN0aW9uIGdldENvbXB1dGVkSW5zdGFuY2Uob2JqLCBwcm9wZXJ0eU5hbWUpIHtcbiAgY29uc3Qga2V5ID0gU3ltYm9sLmZvcihcIl9fQHRsZHJhdy9zdGF0ZV9fY29tcHV0ZWRfX1wiICsgcHJvcGVydHlOYW1lLnRvU3RyaW5nKCkpO1xuICBsZXQgaW5zdCA9IG9ialtrZXldO1xuICBpZiAoIWluc3QpIHtcbiAgICBjb25zdCB2YWwgPSBvYmpbcHJvcGVydHlOYW1lXTtcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiICYmIHZhbFtpc0NvbXB1dGVkTWV0aG9kS2V5XSkge1xuICAgICAgdmFsLmNhbGwob2JqKTtcbiAgICB9XG4gICAgaW5zdCA9IG9ialtrZXldO1xuICB9XG4gIHJldHVybiBpbnN0O1xufVxuZnVuY3Rpb24gY29tcHV0ZWQoKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGFyZ3VtZW50c1swXTtcbiAgICByZXR1cm4gKHRhcmdldCwga2V5LCBkZXNjcmlwdG9yKSA9PiBjb21wdXRlZEFubm90YXRpb24ob3B0aW9ucywgdGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gbmV3IF9Db21wdXRlZChhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY29tcHV0ZWRBbm5vdGF0aW9uKHZvaWQgMCwgYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzQ29tcHV0ZWQodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICYmIHZhbHVlIGluc3RhbmNlb2YgX0NvbXB1dGVkO1xufVxuZXhwb3J0IHtcbiAgVU5JTklUSUFMSVpFRCxcbiAgV2l0aERpZmYsXG4gIF9Db21wdXRlZCxcbiAgY29tcHV0ZWQsXG4gIGdldENvbXB1dGVkSW5zdGFuY2UsXG4gIGlzQ29tcHV0ZWQsXG4gIGlzVW5pbml0aWFsaXplZCxcbiAgd2l0aERpZmZcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db21wdXRlZC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/Computed.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/EffectScheduler.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/EffectScheduler.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EffectScheduler: () => (/* binding */ EffectScheduler),\n/* harmony export */   react: () => (/* binding */ react),\n/* harmony export */   reactor: () => (/* binding */ reactor)\n/* harmony export */ });\n/* harmony import */ var _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ArraySet.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/ArraySet.mjs\");\n/* harmony import */ var _capture_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./capture.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/capture.mjs\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/constants.mjs\");\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helpers.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/helpers.mjs\");\n/* harmony import */ var _transactions_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./transactions.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/transactions.mjs\");\n\n\n\n\n\nclass __EffectScheduler__ {\n  constructor(name, runEffect, options) {\n    this.name = name;\n    this.runEffect = runEffect;\n    this._scheduleEffect = options?.scheduleEffect;\n  }\n  _isActivelyListening = false;\n  /**\n   * Whether this scheduler is attached and actively listening to its parents.\n   * @public\n   */\n  // eslint-disable-next-line no-restricted-syntax\n  get isActivelyListening() {\n    return this._isActivelyListening;\n  }\n  /** @internal */\n  lastTraversedEpoch = _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.GLOBAL_START_EPOCH;\n  lastReactedEpoch = _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.GLOBAL_START_EPOCH;\n  _scheduleCount = 0;\n  /**\n   * The number of times this effect has been scheduled.\n   * @public\n   */\n  // eslint-disable-next-line no-restricted-syntax\n  get scheduleCount() {\n    return this._scheduleCount;\n  }\n  /** @internal */\n  parentSet = new _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_0__.ArraySet();\n  /** @internal */\n  parentEpochs = [];\n  /** @internal */\n  parents = [];\n  _scheduleEffect;\n  /** @internal */\n  maybeScheduleEffect() {\n    if (!this._isActivelyListening)\n      return;\n    if (this.lastReactedEpoch === (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)())\n      return;\n    if (this.parents.length && !(0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.haveParentsChanged)(this)) {\n      this.lastReactedEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)();\n      return;\n    }\n    this.scheduleEffect();\n  }\n  /** @internal */\n  scheduleEffect() {\n    this._scheduleCount++;\n    if (this._scheduleEffect) {\n      this._scheduleEffect(this.maybeExecute);\n    } else {\n      this.execute();\n    }\n  }\n  /** @internal */\n  maybeExecute = () => {\n    if (!this._isActivelyListening)\n      return;\n    this.execute();\n  };\n  /**\n   * Makes this scheduler become 'actively listening' to its parents.\n   * If it has been executed before it will immediately become eligible to receive 'maybeScheduleEffect' calls.\n   * If it has not executed before it will need to be manually executed once to become eligible for scheduling, i.e. by calling [[EffectScheduler.execute]].\n   * @public\n   */\n  attach() {\n    this._isActivelyListening = true;\n    for (let i = 0, n = this.parents.length; i < n; i++) {\n      (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.attach)(this.parents[i], this);\n    }\n  }\n  /**\n   * Makes this scheduler stop 'actively listening' to its parents.\n   * It will no longer be eligible to receive 'maybeScheduleEffect' calls until [[EffectScheduler.attach]] is called again.\n   */\n  detach() {\n    this._isActivelyListening = false;\n    for (let i = 0, n = this.parents.length; i < n; i++) {\n      (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.detach)(this.parents[i], this);\n    }\n  }\n  /**\n   * Executes the effect immediately and returns the result.\n   * @returns The result of the effect.\n   */\n  execute() {\n    try {\n      (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_1__.startCapturingParents)(this);\n      const currentEpoch = (0,_transactions_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalEpoch)();\n      const result = this.runEffect(this.lastReactedEpoch);\n      this.lastReactedEpoch = currentEpoch;\n      return result;\n    } finally {\n      (0,_capture_mjs__WEBPACK_IMPORTED_MODULE_1__.stopCapturingParents)();\n    }\n  }\n}\nconst EffectScheduler = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_3__.singleton)(\n  \"EffectScheduler\",\n  () => __EffectScheduler__\n);\nfunction react(name, fn, options) {\n  const scheduler = new EffectScheduler(name, fn, options);\n  scheduler.attach();\n  scheduler.scheduleEffect();\n  return () => {\n    scheduler.detach();\n  };\n}\nfunction reactor(name, fn, options) {\n  const scheduler = new EffectScheduler(name, fn, options);\n  return {\n    scheduler,\n    start: (options2) => {\n      const force = options2?.force ?? false;\n      scheduler.attach();\n      if (force) {\n        scheduler.scheduleEffect();\n      } else {\n        scheduler.maybeScheduleEffect();\n      }\n    },\n    stop: () => {\n      scheduler.detach();\n    }\n  };\n}\n\n//# sourceMappingURL=EffectScheduler.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9FZmZlY3RTY2hlZHVsZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ2tDO0FBQ3ZCO0FBQ3lCO0FBQzFCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDhEQUFrQjtBQUN6QyxxQkFBcUIsOERBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG1EQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxpRUFBYztBQUNoRDtBQUNBLGdDQUFnQyxnRUFBa0I7QUFDbEQsOEJBQThCLGlFQUFjO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLE9BQU87QUFDcEQsTUFBTSxvREFBTTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsT0FBTztBQUNwRCxNQUFNLG9EQUFNO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sbUVBQXFCO0FBQzNCLDJCQUEyQixpRUFBYztBQUN6QztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sTUFBTSxrRUFBb0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVEQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlL2Rpc3QtZXNtL2xpYi9jb3JlL0VmZmVjdFNjaGVkdWxlci5tanM/NWFkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcnJheVNldCB9IGZyb20gXCIuL0FycmF5U2V0Lm1qc1wiO1xuaW1wb3J0IHsgc3RhcnRDYXB0dXJpbmdQYXJlbnRzLCBzdG9wQ2FwdHVyaW5nUGFyZW50cyB9IGZyb20gXCIuL2NhcHR1cmUubWpzXCI7XG5pbXBvcnQgeyBHTE9CQUxfU1RBUlRfRVBPQ0ggfSBmcm9tIFwiLi9jb25zdGFudHMubWpzXCI7XG5pbXBvcnQgeyBhdHRhY2gsIGRldGFjaCwgaGF2ZVBhcmVudHNDaGFuZ2VkLCBzaW5nbGV0b24gfSBmcm9tIFwiLi9oZWxwZXJzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0R2xvYmFsRXBvY2ggfSBmcm9tIFwiLi90cmFuc2FjdGlvbnMubWpzXCI7XG5jbGFzcyBfX0VmZmVjdFNjaGVkdWxlcl9fIHtcbiAgY29uc3RydWN0b3IobmFtZSwgcnVuRWZmZWN0LCBvcHRpb25zKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnJ1bkVmZmVjdCA9IHJ1bkVmZmVjdDtcbiAgICB0aGlzLl9zY2hlZHVsZUVmZmVjdCA9IG9wdGlvbnM/LnNjaGVkdWxlRWZmZWN0O1xuICB9XG4gIF9pc0FjdGl2ZWx5TGlzdGVuaW5nID0gZmFsc2U7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoaXMgc2NoZWR1bGVyIGlzIGF0dGFjaGVkIGFuZCBhY3RpdmVseSBsaXN0ZW5pbmcgdG8gaXRzIHBhcmVudHMuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgaXNBY3RpdmVseUxpc3RlbmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5faXNBY3RpdmVseUxpc3RlbmluZztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGxhc3RUcmF2ZXJzZWRFcG9jaCA9IEdMT0JBTF9TVEFSVF9FUE9DSDtcbiAgbGFzdFJlYWN0ZWRFcG9jaCA9IEdMT0JBTF9TVEFSVF9FUE9DSDtcbiAgX3NjaGVkdWxlQ291bnQgPSAwO1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiB0aW1lcyB0aGlzIGVmZmVjdCBoYXMgYmVlbiBzY2hlZHVsZWQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICBnZXQgc2NoZWR1bGVDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVDb3VudDtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIHBhcmVudFNldCA9IG5ldyBBcnJheVNldCgpO1xuICAvKiogQGludGVybmFsICovXG4gIHBhcmVudEVwb2NocyA9IFtdO1xuICAvKiogQGludGVybmFsICovXG4gIHBhcmVudHMgPSBbXTtcbiAgX3NjaGVkdWxlRWZmZWN0O1xuICAvKiogQGludGVybmFsICovXG4gIG1heWJlU2NoZWR1bGVFZmZlY3QoKSB7XG4gICAgaWYgKCF0aGlzLl9pc0FjdGl2ZWx5TGlzdGVuaW5nKVxuICAgICAgcmV0dXJuO1xuICAgIGlmICh0aGlzLmxhc3RSZWFjdGVkRXBvY2ggPT09IGdldEdsb2JhbEVwb2NoKCkpXG4gICAgICByZXR1cm47XG4gICAgaWYgKHRoaXMucGFyZW50cy5sZW5ndGggJiYgIWhhdmVQYXJlbnRzQ2hhbmdlZCh0aGlzKSkge1xuICAgICAgdGhpcy5sYXN0UmVhY3RlZEVwb2NoID0gZ2V0R2xvYmFsRXBvY2goKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zY2hlZHVsZUVmZmVjdCgpO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgc2NoZWR1bGVFZmZlY3QoKSB7XG4gICAgdGhpcy5fc2NoZWR1bGVDb3VudCsrO1xuICAgIGlmICh0aGlzLl9zY2hlZHVsZUVmZmVjdCkge1xuICAgICAgdGhpcy5fc2NoZWR1bGVFZmZlY3QodGhpcy5tYXliZUV4ZWN1dGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV4ZWN1dGUoKTtcbiAgICB9XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBtYXliZUV4ZWN1dGUgPSAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLl9pc0FjdGl2ZWx5TGlzdGVuaW5nKVxuICAgICAgcmV0dXJuO1xuICAgIHRoaXMuZXhlY3V0ZSgpO1xuICB9O1xuICAvKipcbiAgICogTWFrZXMgdGhpcyBzY2hlZHVsZXIgYmVjb21lICdhY3RpdmVseSBsaXN0ZW5pbmcnIHRvIGl0cyBwYXJlbnRzLlxuICAgKiBJZiBpdCBoYXMgYmVlbiBleGVjdXRlZCBiZWZvcmUgaXQgd2lsbCBpbW1lZGlhdGVseSBiZWNvbWUgZWxpZ2libGUgdG8gcmVjZWl2ZSAnbWF5YmVTY2hlZHVsZUVmZmVjdCcgY2FsbHMuXG4gICAqIElmIGl0IGhhcyBub3QgZXhlY3V0ZWQgYmVmb3JlIGl0IHdpbGwgbmVlZCB0byBiZSBtYW51YWxseSBleGVjdXRlZCBvbmNlIHRvIGJlY29tZSBlbGlnaWJsZSBmb3Igc2NoZWR1bGluZywgaS5lLiBieSBjYWxsaW5nIFtbRWZmZWN0U2NoZWR1bGVyLmV4ZWN1dGVdXS5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYXR0YWNoKCkge1xuICAgIHRoaXMuX2lzQWN0aXZlbHlMaXN0ZW5pbmcgPSB0cnVlO1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gdGhpcy5wYXJlbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgYXR0YWNoKHRoaXMucGFyZW50c1tpXSwgdGhpcyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBNYWtlcyB0aGlzIHNjaGVkdWxlciBzdG9wICdhY3RpdmVseSBsaXN0ZW5pbmcnIHRvIGl0cyBwYXJlbnRzLlxuICAgKiBJdCB3aWxsIG5vIGxvbmdlciBiZSBlbGlnaWJsZSB0byByZWNlaXZlICdtYXliZVNjaGVkdWxlRWZmZWN0JyBjYWxscyB1bnRpbCBbW0VmZmVjdFNjaGVkdWxlci5hdHRhY2hdXSBpcyBjYWxsZWQgYWdhaW4uXG4gICAqL1xuICBkZXRhY2goKSB7XG4gICAgdGhpcy5faXNBY3RpdmVseUxpc3RlbmluZyA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gdGhpcy5wYXJlbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgZGV0YWNoKHRoaXMucGFyZW50c1tpXSwgdGhpcyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBFeGVjdXRlcyB0aGUgZWZmZWN0IGltbWVkaWF0ZWx5IGFuZCByZXR1cm5zIHRoZSByZXN1bHQuXG4gICAqIEByZXR1cm5zIFRoZSByZXN1bHQgb2YgdGhlIGVmZmVjdC5cbiAgICovXG4gIGV4ZWN1dGUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHN0YXJ0Q2FwdHVyaW5nUGFyZW50cyh0aGlzKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRFcG9jaCA9IGdldEdsb2JhbEVwb2NoKCk7XG4gICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJ1bkVmZmVjdCh0aGlzLmxhc3RSZWFjdGVkRXBvY2gpO1xuICAgICAgdGhpcy5sYXN0UmVhY3RlZEVwb2NoID0gY3VycmVudEVwb2NoO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc3RvcENhcHR1cmluZ1BhcmVudHMoKTtcbiAgICB9XG4gIH1cbn1cbmNvbnN0IEVmZmVjdFNjaGVkdWxlciA9IHNpbmdsZXRvbihcbiAgXCJFZmZlY3RTY2hlZHVsZXJcIixcbiAgKCkgPT4gX19FZmZlY3RTY2hlZHVsZXJfX1xuKTtcbmZ1bmN0aW9uIHJlYWN0KG5hbWUsIGZuLCBvcHRpb25zKSB7XG4gIGNvbnN0IHNjaGVkdWxlciA9IG5ldyBFZmZlY3RTY2hlZHVsZXIobmFtZSwgZm4sIG9wdGlvbnMpO1xuICBzY2hlZHVsZXIuYXR0YWNoKCk7XG4gIHNjaGVkdWxlci5zY2hlZHVsZUVmZmVjdCgpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHNjaGVkdWxlci5kZXRhY2goKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIHJlYWN0b3IobmFtZSwgZm4sIG9wdGlvbnMpIHtcbiAgY29uc3Qgc2NoZWR1bGVyID0gbmV3IEVmZmVjdFNjaGVkdWxlcihuYW1lLCBmbiwgb3B0aW9ucyk7XG4gIHJldHVybiB7XG4gICAgc2NoZWR1bGVyLFxuICAgIHN0YXJ0OiAob3B0aW9uczIpID0+IHtcbiAgICAgIGNvbnN0IGZvcmNlID0gb3B0aW9uczI/LmZvcmNlID8/IGZhbHNlO1xuICAgICAgc2NoZWR1bGVyLmF0dGFjaCgpO1xuICAgICAgaWYgKGZvcmNlKSB7XG4gICAgICAgIHNjaGVkdWxlci5zY2hlZHVsZUVmZmVjdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2NoZWR1bGVyLm1heWJlU2NoZWR1bGVFZmZlY3QoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHN0b3A6ICgpID0+IHtcbiAgICAgIHNjaGVkdWxlci5kZXRhY2goKTtcbiAgICB9XG4gIH07XG59XG5leHBvcnQge1xuICBFZmZlY3RTY2hlZHVsZXIsXG4gIHJlYWN0LFxuICByZWFjdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RWZmZWN0U2NoZWR1bGVyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/EffectScheduler.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/HistoryBuffer.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/HistoryBuffer.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HistoryBuffer: () => (/* binding */ HistoryBuffer)\n/* harmony export */ });\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/types.mjs\");\n\nclass HistoryBuffer {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.buffer = new Array(capacity);\n  }\n  index = 0;\n  // use a wrap around buffer to store the last N values\n  buffer;\n  /**\n   * Add a diff to the history buffer.\n   *\n   * @param lastComputedEpoch - The epoch when the diff was computed.\n   * @param currentEpoch - The current epoch.\n   * @param diff - The diff to add, or else a reset value.\n   */\n  pushEntry(lastComputedEpoch, currentEpoch, diff) {\n    if (diff === void 0) {\n      return;\n    }\n    if (diff === _types_mjs__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) {\n      this.clear();\n      return;\n    }\n    this.buffer[this.index] = [lastComputedEpoch, currentEpoch, diff];\n    this.index = (this.index + 1) % this.capacity;\n  }\n  /**\n   * Clear the history buffer.\n   */\n  clear() {\n    this.index = 0;\n    this.buffer.fill(void 0);\n  }\n  /**\n   * Get the diffs since the given epoch.\n   *\n   * @param epoch - The epoch to get diffs since.\n   * @returns An array of diffs or a flag to reset the history buffer.\n   */\n  getChangesSince(sinceEpoch) {\n    const { index, capacity, buffer } = this;\n    for (let i = 0; i < capacity; i++) {\n      const offset = (index - 1 + capacity - i) % capacity;\n      const elem = buffer[offset];\n      if (!elem) {\n        return _types_mjs__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE;\n      }\n      const [fromEpoch, toEpoch] = elem;\n      if (i === 0 && sinceEpoch >= toEpoch) {\n        return [];\n      }\n      if (fromEpoch <= sinceEpoch && sinceEpoch < toEpoch) {\n        const len = i + 1;\n        const result = new Array(len);\n        for (let j = 0; j < len; j++) {\n          result[j] = buffer[(offset + j) % capacity][2];\n        }\n        return result;\n      }\n    }\n    return _types_mjs__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE;\n  }\n}\n\n//# sourceMappingURL=HistoryBuffer.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9IaXN0b3J5QnVmZmVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtREFBVztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwQkFBMEI7QUFDdEMsb0JBQW9CLGNBQWM7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFNBQVM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbURBQVc7QUFDdEI7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9IaXN0b3J5QnVmZmVyLm1qcz9iZWNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJFU0VUX1ZBTFVFIH0gZnJvbSBcIi4vdHlwZXMubWpzXCI7XG5jbGFzcyBIaXN0b3J5QnVmZmVyIHtcbiAgY29uc3RydWN0b3IoY2FwYWNpdHkpIHtcbiAgICB0aGlzLmNhcGFjaXR5ID0gY2FwYWNpdHk7XG4gICAgdGhpcy5idWZmZXIgPSBuZXcgQXJyYXkoY2FwYWNpdHkpO1xuICB9XG4gIGluZGV4ID0gMDtcbiAgLy8gdXNlIGEgd3JhcCBhcm91bmQgYnVmZmVyIHRvIHN0b3JlIHRoZSBsYXN0IE4gdmFsdWVzXG4gIGJ1ZmZlcjtcbiAgLyoqXG4gICAqIEFkZCBhIGRpZmYgdG8gdGhlIGhpc3RvcnkgYnVmZmVyLlxuICAgKlxuICAgKiBAcGFyYW0gbGFzdENvbXB1dGVkRXBvY2ggLSBUaGUgZXBvY2ggd2hlbiB0aGUgZGlmZiB3YXMgY29tcHV0ZWQuXG4gICAqIEBwYXJhbSBjdXJyZW50RXBvY2ggLSBUaGUgY3VycmVudCBlcG9jaC5cbiAgICogQHBhcmFtIGRpZmYgLSBUaGUgZGlmZiB0byBhZGQsIG9yIGVsc2UgYSByZXNldCB2YWx1ZS5cbiAgICovXG4gIHB1c2hFbnRyeShsYXN0Q29tcHV0ZWRFcG9jaCwgY3VycmVudEVwb2NoLCBkaWZmKSB7XG4gICAgaWYgKGRpZmYgPT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZGlmZiA9PT0gUkVTRVRfVkFMVUUpIHtcbiAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5idWZmZXJbdGhpcy5pbmRleF0gPSBbbGFzdENvbXB1dGVkRXBvY2gsIGN1cnJlbnRFcG9jaCwgZGlmZl07XG4gICAgdGhpcy5pbmRleCA9ICh0aGlzLmluZGV4ICsgMSkgJSB0aGlzLmNhcGFjaXR5O1xuICB9XG4gIC8qKlxuICAgKiBDbGVhciB0aGUgaGlzdG9yeSBidWZmZXIuXG4gICAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB0aGlzLmJ1ZmZlci5maWxsKHZvaWQgMCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgZGlmZnMgc2luY2UgdGhlIGdpdmVuIGVwb2NoLlxuICAgKlxuICAgKiBAcGFyYW0gZXBvY2ggLSBUaGUgZXBvY2ggdG8gZ2V0IGRpZmZzIHNpbmNlLlxuICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBkaWZmcyBvciBhIGZsYWcgdG8gcmVzZXQgdGhlIGhpc3RvcnkgYnVmZmVyLlxuICAgKi9cbiAgZ2V0Q2hhbmdlc1NpbmNlKHNpbmNlRXBvY2gpIHtcbiAgICBjb25zdCB7IGluZGV4LCBjYXBhY2l0eSwgYnVmZmVyIH0gPSB0aGlzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FwYWNpdHk7IGkrKykge1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gKGluZGV4IC0gMSArIGNhcGFjaXR5IC0gaSkgJSBjYXBhY2l0eTtcbiAgICAgIGNvbnN0IGVsZW0gPSBidWZmZXJbb2Zmc2V0XTtcbiAgICAgIGlmICghZWxlbSkge1xuICAgICAgICByZXR1cm4gUkVTRVRfVkFMVUU7XG4gICAgICB9XG4gICAgICBjb25zdCBbZnJvbUVwb2NoLCB0b0Vwb2NoXSA9IGVsZW07XG4gICAgICBpZiAoaSA9PT0gMCAmJiBzaW5jZUVwb2NoID49IHRvRXBvY2gpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKGZyb21FcG9jaCA8PSBzaW5jZUVwb2NoICYmIHNpbmNlRXBvY2ggPCB0b0Vwb2NoKSB7XG4gICAgICAgIGNvbnN0IGxlbiA9IGkgKyAxO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIHJlc3VsdFtqXSA9IGJ1ZmZlclsob2Zmc2V0ICsgaikgJSBjYXBhY2l0eV1bMl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFJFU0VUX1ZBTFVFO1xuICB9XG59XG5leHBvcnQge1xuICBIaXN0b3J5QnVmZmVyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SGlzdG9yeUJ1ZmZlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/HistoryBuffer.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/capture.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/capture.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   maybeCaptureParent: () => (/* binding */ maybeCaptureParent),\n/* harmony export */   startCapturingParents: () => (/* binding */ startCapturingParents),\n/* harmony export */   stopCapturingParents: () => (/* binding */ stopCapturingParents),\n/* harmony export */   unsafe__withoutCapture: () => (/* binding */ unsafe__withoutCapture),\n/* harmony export */   whyAmIRunning: () => (/* binding */ whyAmIRunning)\n/* harmony export */ });\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/helpers.mjs\");\n\nclass CaptureStackFrame {\n  constructor(below, child) {\n    this.below = below;\n    this.child = child;\n  }\n  offset = 0;\n  maybeRemoved;\n}\nconst inst = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.singleton)(\"capture\", () => ({ stack: null }));\nfunction unsafe__withoutCapture(fn) {\n  const oldStack = inst.stack;\n  inst.stack = null;\n  try {\n    return fn();\n  } finally {\n    inst.stack = oldStack;\n  }\n}\nfunction startCapturingParents(child) {\n  inst.stack = new CaptureStackFrame(inst.stack, child);\n  child.parentSet.clear();\n}\nfunction stopCapturingParents() {\n  const frame = inst.stack;\n  inst.stack = frame.below;\n  if (frame.offset < frame.child.parents.length) {\n    for (let i = frame.offset; i < frame.child.parents.length; i++) {\n      const maybeRemovedParent = frame.child.parents[i];\n      if (!frame.child.parentSet.has(maybeRemovedParent)) {\n        (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.detach)(maybeRemovedParent, frame.child);\n      }\n    }\n    frame.child.parents.length = frame.offset;\n    frame.child.parentEpochs.length = frame.offset;\n  }\n  if (frame.maybeRemoved) {\n    for (let i = 0; i < frame.maybeRemoved.length; i++) {\n      const maybeRemovedParent = frame.maybeRemoved[i];\n      if (!frame.child.parentSet.has(maybeRemovedParent)) {\n        (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.detach)(maybeRemovedParent, frame.child);\n      }\n    }\n  }\n}\nfunction maybeCaptureParent(p) {\n  if (inst.stack) {\n    const wasCapturedAlready = inst.stack.child.parentSet.has(p);\n    if (wasCapturedAlready) {\n      return;\n    }\n    inst.stack.child.parentSet.add(p);\n    if (inst.stack.child.isActivelyListening) {\n      (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.attach)(p, inst.stack.child);\n    }\n    if (inst.stack.offset < inst.stack.child.parents.length) {\n      const maybeRemovedParent = inst.stack.child.parents[inst.stack.offset];\n      if (maybeRemovedParent !== p) {\n        if (!inst.stack.maybeRemoved) {\n          inst.stack.maybeRemoved = [maybeRemovedParent];\n        } else {\n          inst.stack.maybeRemoved.push(maybeRemovedParent);\n        }\n      }\n    }\n    inst.stack.child.parents[inst.stack.offset] = p;\n    inst.stack.child.parentEpochs[inst.stack.offset] = p.lastChangedEpoch;\n    inst.stack.offset++;\n  }\n}\nfunction whyAmIRunning() {\n  const child = inst.stack?.child;\n  if (!child) {\n    throw new Error(\"whyAmIRunning() called outside of a reactive context\");\n  }\n  const changedParents = [];\n  for (let i = 0; i < child.parents.length; i++) {\n    const parent = child.parents[i];\n    if (parent.lastChangedEpoch > child.parentEpochs[i]) {\n      changedParents.push(parent);\n    }\n  }\n  if (changedParents.length === 0) {\n    console.log(child.name, \"is running but none of the parents changed\");\n  } else {\n    console.log(child.name, \"is running because:\");\n    for (const changedParent of changedParents) {\n      console.log(\n        \"\t\",\n        changedParent.name,\n        \"changed =>\",\n        changedParent.__unsafe__getWithoutCapture(true)\n      );\n    }\n  }\n}\n\n//# sourceMappingURL=capture.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9jYXB0dXJlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdURBQVMscUJBQXFCLGFBQWE7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdDQUFnQztBQUMvRDtBQUNBO0FBQ0EsUUFBUSxvREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwrQkFBK0I7QUFDbkQ7QUFDQTtBQUNBLFFBQVEsb0RBQU07QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG9EQUFNO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwwQkFBMEI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9FO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9jYXB0dXJlLm1qcz81YTQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0dGFjaCwgZGV0YWNoLCBzaW5nbGV0b24gfSBmcm9tIFwiLi9oZWxwZXJzLm1qc1wiO1xuY2xhc3MgQ2FwdHVyZVN0YWNrRnJhbWUge1xuICBjb25zdHJ1Y3RvcihiZWxvdywgY2hpbGQpIHtcbiAgICB0aGlzLmJlbG93ID0gYmVsb3c7XG4gICAgdGhpcy5jaGlsZCA9IGNoaWxkO1xuICB9XG4gIG9mZnNldCA9IDA7XG4gIG1heWJlUmVtb3ZlZDtcbn1cbmNvbnN0IGluc3QgPSBzaW5nbGV0b24oXCJjYXB0dXJlXCIsICgpID0+ICh7IHN0YWNrOiBudWxsIH0pKTtcbmZ1bmN0aW9uIHVuc2FmZV9fd2l0aG91dENhcHR1cmUoZm4pIHtcbiAgY29uc3Qgb2xkU3RhY2sgPSBpbnN0LnN0YWNrO1xuICBpbnN0LnN0YWNrID0gbnVsbDtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZm4oKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBpbnN0LnN0YWNrID0gb2xkU3RhY2s7XG4gIH1cbn1cbmZ1bmN0aW9uIHN0YXJ0Q2FwdHVyaW5nUGFyZW50cyhjaGlsZCkge1xuICBpbnN0LnN0YWNrID0gbmV3IENhcHR1cmVTdGFja0ZyYW1lKGluc3Quc3RhY2ssIGNoaWxkKTtcbiAgY2hpbGQucGFyZW50U2V0LmNsZWFyKCk7XG59XG5mdW5jdGlvbiBzdG9wQ2FwdHVyaW5nUGFyZW50cygpIHtcbiAgY29uc3QgZnJhbWUgPSBpbnN0LnN0YWNrO1xuICBpbnN0LnN0YWNrID0gZnJhbWUuYmVsb3c7XG4gIGlmIChmcmFtZS5vZmZzZXQgPCBmcmFtZS5jaGlsZC5wYXJlbnRzLmxlbmd0aCkge1xuICAgIGZvciAobGV0IGkgPSBmcmFtZS5vZmZzZXQ7IGkgPCBmcmFtZS5jaGlsZC5wYXJlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBtYXliZVJlbW92ZWRQYXJlbnQgPSBmcmFtZS5jaGlsZC5wYXJlbnRzW2ldO1xuICAgICAgaWYgKCFmcmFtZS5jaGlsZC5wYXJlbnRTZXQuaGFzKG1heWJlUmVtb3ZlZFBhcmVudCkpIHtcbiAgICAgICAgZGV0YWNoKG1heWJlUmVtb3ZlZFBhcmVudCwgZnJhbWUuY2hpbGQpO1xuICAgICAgfVxuICAgIH1cbiAgICBmcmFtZS5jaGlsZC5wYXJlbnRzLmxlbmd0aCA9IGZyYW1lLm9mZnNldDtcbiAgICBmcmFtZS5jaGlsZC5wYXJlbnRFcG9jaHMubGVuZ3RoID0gZnJhbWUub2Zmc2V0O1xuICB9XG4gIGlmIChmcmFtZS5tYXliZVJlbW92ZWQpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyYW1lLm1heWJlUmVtb3ZlZC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbWF5YmVSZW1vdmVkUGFyZW50ID0gZnJhbWUubWF5YmVSZW1vdmVkW2ldO1xuICAgICAgaWYgKCFmcmFtZS5jaGlsZC5wYXJlbnRTZXQuaGFzKG1heWJlUmVtb3ZlZFBhcmVudCkpIHtcbiAgICAgICAgZGV0YWNoKG1heWJlUmVtb3ZlZFBhcmVudCwgZnJhbWUuY2hpbGQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gbWF5YmVDYXB0dXJlUGFyZW50KHApIHtcbiAgaWYgKGluc3Quc3RhY2spIHtcbiAgICBjb25zdCB3YXNDYXB0dXJlZEFscmVhZHkgPSBpbnN0LnN0YWNrLmNoaWxkLnBhcmVudFNldC5oYXMocCk7XG4gICAgaWYgKHdhc0NhcHR1cmVkQWxyZWFkeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpbnN0LnN0YWNrLmNoaWxkLnBhcmVudFNldC5hZGQocCk7XG4gICAgaWYgKGluc3Quc3RhY2suY2hpbGQuaXNBY3RpdmVseUxpc3RlbmluZykge1xuICAgICAgYXR0YWNoKHAsIGluc3Quc3RhY2suY2hpbGQpO1xuICAgIH1cbiAgICBpZiAoaW5zdC5zdGFjay5vZmZzZXQgPCBpbnN0LnN0YWNrLmNoaWxkLnBhcmVudHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBtYXliZVJlbW92ZWRQYXJlbnQgPSBpbnN0LnN0YWNrLmNoaWxkLnBhcmVudHNbaW5zdC5zdGFjay5vZmZzZXRdO1xuICAgICAgaWYgKG1heWJlUmVtb3ZlZFBhcmVudCAhPT0gcCkge1xuICAgICAgICBpZiAoIWluc3Quc3RhY2subWF5YmVSZW1vdmVkKSB7XG4gICAgICAgICAgaW5zdC5zdGFjay5tYXliZVJlbW92ZWQgPSBbbWF5YmVSZW1vdmVkUGFyZW50XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbnN0LnN0YWNrLm1heWJlUmVtb3ZlZC5wdXNoKG1heWJlUmVtb3ZlZFBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaW5zdC5zdGFjay5jaGlsZC5wYXJlbnRzW2luc3Quc3RhY2sub2Zmc2V0XSA9IHA7XG4gICAgaW5zdC5zdGFjay5jaGlsZC5wYXJlbnRFcG9jaHNbaW5zdC5zdGFjay5vZmZzZXRdID0gcC5sYXN0Q2hhbmdlZEVwb2NoO1xuICAgIGluc3Quc3RhY2sub2Zmc2V0Kys7XG4gIH1cbn1cbmZ1bmN0aW9uIHdoeUFtSVJ1bm5pbmcoKSB7XG4gIGNvbnN0IGNoaWxkID0gaW5zdC5zdGFjaz8uY2hpbGQ7XG4gIGlmICghY2hpbGQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ3aHlBbUlSdW5uaW5nKCkgY2FsbGVkIG91dHNpZGUgb2YgYSByZWFjdGl2ZSBjb250ZXh0XCIpO1xuICB9XG4gIGNvbnN0IGNoYW5nZWRQYXJlbnRzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGQucGFyZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHBhcmVudCA9IGNoaWxkLnBhcmVudHNbaV07XG4gICAgaWYgKHBhcmVudC5sYXN0Q2hhbmdlZEVwb2NoID4gY2hpbGQucGFyZW50RXBvY2hzW2ldKSB7XG4gICAgICBjaGFuZ2VkUGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgfVxuICB9XG4gIGlmIChjaGFuZ2VkUGFyZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBjb25zb2xlLmxvZyhjaGlsZC5uYW1lLCBcImlzIHJ1bm5pbmcgYnV0IG5vbmUgb2YgdGhlIHBhcmVudHMgY2hhbmdlZFwiKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhjaGlsZC5uYW1lLCBcImlzIHJ1bm5pbmcgYmVjYXVzZTpcIik7XG4gICAgZm9yIChjb25zdCBjaGFuZ2VkUGFyZW50IG9mIGNoYW5nZWRQYXJlbnRzKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJcdFwiLFxuICAgICAgICBjaGFuZ2VkUGFyZW50Lm5hbWUsXG4gICAgICAgIFwiY2hhbmdlZCA9PlwiLFxuICAgICAgICBjaGFuZ2VkUGFyZW50Ll9fdW5zYWZlX19nZXRXaXRob3V0Q2FwdHVyZSh0cnVlKVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCB7XG4gIG1heWJlQ2FwdHVyZVBhcmVudCxcbiAgc3RhcnRDYXB0dXJpbmdQYXJlbnRzLFxuICBzdG9wQ2FwdHVyaW5nUGFyZW50cyxcbiAgdW5zYWZlX193aXRob3V0Q2FwdHVyZSxcbiAgd2h5QW1JUnVubmluZ1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhcHR1cmUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/capture.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/constants.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/constants.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GLOBAL_START_EPOCH: () => (/* binding */ GLOBAL_START_EPOCH)\n/* harmony export */ });\nconst GLOBAL_START_EPOCH = -1;\n\n//# sourceMappingURL=constants.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9jb25zdGFudHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9jb25zdGFudHMubWpzPzBjYjYiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgR0xPQkFMX1NUQVJUX0VQT0NIID0gLTE7XG5leHBvcnQge1xuICBHTE9CQUxfU1RBUlRfRVBPQ0hcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25zdGFudHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/constants.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/helpers.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/helpers.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EMPTY_ARRAY: () => (/* binding */ EMPTY_ARRAY),\n/* harmony export */   attach: () => (/* binding */ attach),\n/* harmony export */   detach: () => (/* binding */ detach),\n/* harmony export */   equals: () => (/* binding */ equals),\n/* harmony export */   haveParentsChanged: () => (/* binding */ haveParentsChanged),\n/* harmony export */   singleton: () => (/* binding */ singleton)\n/* harmony export */ });\nfunction isChild(x) {\n  return x && typeof x === \"object\" && \"parents\" in x;\n}\nfunction haveParentsChanged(child) {\n  for (let i = 0, n = child.parents.length; i < n; i++) {\n    child.parents[i].__unsafe__getWithoutCapture(true);\n    if (child.parents[i].lastChangedEpoch !== child.parentEpochs[i]) {\n      return true;\n    }\n  }\n  return false;\n}\nconst detach = (parent, child) => {\n  if (!parent.children.remove(child)) {\n    return;\n  }\n  if (parent.children.isEmpty && isChild(parent)) {\n    for (let i = 0, n = parent.parents.length; i < n; i++) {\n      detach(parent.parents[i], parent);\n    }\n  }\n};\nconst attach = (parent, child) => {\n  if (!parent.children.add(child)) {\n    return;\n  }\n  if (isChild(parent)) {\n    for (let i = 0, n = parent.parents.length; i < n; i++) {\n      attach(parent.parents[i], parent);\n    }\n  }\n};\nfunction equals(a, b) {\n  const shallowEquals = a === b || Object.is(a, b) || Boolean(a && b && typeof a.equals === \"function\" && a.equals(b));\n  return shallowEquals;\n}\nfunction singleton(key, init) {\n  const symbol = Symbol.for(`com.tldraw.state/${key}`);\n  const global = globalThis;\n  global[symbol] ??= init();\n  return global[symbol];\n}\nconst EMPTY_ARRAY = singleton(\"empty_array\", () => Object.freeze([]));\n\n//# sourceMappingURL=helpers.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9oZWxwZXJzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxPQUFPO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxPQUFPO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxPQUFPO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxJQUFJO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RhdGUvZGlzdC1lc20vbGliL2NvcmUvaGVscGVycy5tanM/NGEyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBpc0NoaWxkKHgpIHtcbiAgcmV0dXJuIHggJiYgdHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiYgXCJwYXJlbnRzXCIgaW4geDtcbn1cbmZ1bmN0aW9uIGhhdmVQYXJlbnRzQ2hhbmdlZChjaGlsZCkge1xuICBmb3IgKGxldCBpID0gMCwgbiA9IGNoaWxkLnBhcmVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgY2hpbGQucGFyZW50c1tpXS5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUodHJ1ZSk7XG4gICAgaWYgKGNoaWxkLnBhcmVudHNbaV0ubGFzdENoYW5nZWRFcG9jaCAhPT0gY2hpbGQucGFyZW50RXBvY2hzW2ldKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuY29uc3QgZGV0YWNoID0gKHBhcmVudCwgY2hpbGQpID0+IHtcbiAgaWYgKCFwYXJlbnQuY2hpbGRyZW4ucmVtb3ZlKGNoaWxkKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAocGFyZW50LmNoaWxkcmVuLmlzRW1wdHkgJiYgaXNDaGlsZChwYXJlbnQpKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIG4gPSBwYXJlbnQucGFyZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIGRldGFjaChwYXJlbnQucGFyZW50c1tpXSwgcGFyZW50KTtcbiAgICB9XG4gIH1cbn07XG5jb25zdCBhdHRhY2ggPSAocGFyZW50LCBjaGlsZCkgPT4ge1xuICBpZiAoIXBhcmVudC5jaGlsZHJlbi5hZGQoY2hpbGQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpc0NoaWxkKHBhcmVudCkpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IHBhcmVudC5wYXJlbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgYXR0YWNoKHBhcmVudC5wYXJlbnRzW2ldLCBwYXJlbnQpO1xuICAgIH1cbiAgfVxufTtcbmZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gIGNvbnN0IHNoYWxsb3dFcXVhbHMgPSBhID09PSBiIHx8IE9iamVjdC5pcyhhLCBiKSB8fCBCb29sZWFuKGEgJiYgYiAmJiB0eXBlb2YgYS5lcXVhbHMgPT09IFwiZnVuY3Rpb25cIiAmJiBhLmVxdWFscyhiKSk7XG4gIHJldHVybiBzaGFsbG93RXF1YWxzO1xufVxuZnVuY3Rpb24gc2luZ2xldG9uKGtleSwgaW5pdCkge1xuICBjb25zdCBzeW1ib2wgPSBTeW1ib2wuZm9yKGBjb20udGxkcmF3LnN0YXRlLyR7a2V5fWApO1xuICBjb25zdCBnbG9iYWwgPSBnbG9iYWxUaGlzO1xuICBnbG9iYWxbc3ltYm9sXSA/Pz0gaW5pdCgpO1xuICByZXR1cm4gZ2xvYmFsW3N5bWJvbF07XG59XG5jb25zdCBFTVBUWV9BUlJBWSA9IHNpbmdsZXRvbihcImVtcHR5X2FycmF5XCIsICgpID0+IE9iamVjdC5mcmVlemUoW10pKTtcbmV4cG9ydCB7XG4gIEVNUFRZX0FSUkFZLFxuICBhdHRhY2gsXG4gIGRldGFjaCxcbiAgZXF1YWxzLFxuICBoYXZlUGFyZW50c0NoYW5nZWQsXG4gIHNpbmdsZXRvblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlbHBlcnMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/helpers.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/index.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/index.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArraySet: () => (/* reexport safe */ _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_1__.ArraySet),\n/* harmony export */   EMPTY_ARRAY: () => (/* reexport safe */ _helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY),\n/* harmony export */   EffectScheduler: () => (/* reexport safe */ _EffectScheduler_mjs__WEBPACK_IMPORTED_MODULE_4__.EffectScheduler),\n/* harmony export */   RESET_VALUE: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_8__.RESET_VALUE),\n/* harmony export */   UNINITIALIZED: () => (/* reexport safe */ _Computed_mjs__WEBPACK_IMPORTED_MODULE_3__.UNINITIALIZED),\n/* harmony export */   atom: () => (/* reexport safe */ _Atom_mjs__WEBPACK_IMPORTED_MODULE_2__.atom),\n/* harmony export */   computed: () => (/* reexport safe */ _Computed_mjs__WEBPACK_IMPORTED_MODULE_3__.computed),\n/* harmony export */   getComputedInstance: () => (/* reexport safe */ _Computed_mjs__WEBPACK_IMPORTED_MODULE_3__.getComputedInstance),\n/* harmony export */   isAtom: () => (/* reexport safe */ _Atom_mjs__WEBPACK_IMPORTED_MODULE_2__.isAtom),\n/* harmony export */   isSignal: () => (/* reexport safe */ _isSignal_mjs__WEBPACK_IMPORTED_MODULE_6__.isSignal),\n/* harmony export */   isUninitialized: () => (/* reexport safe */ _Computed_mjs__WEBPACK_IMPORTED_MODULE_3__.isUninitialized),\n/* harmony export */   react: () => (/* reexport safe */ _EffectScheduler_mjs__WEBPACK_IMPORTED_MODULE_4__.react),\n/* harmony export */   reactor: () => (/* reexport safe */ _EffectScheduler_mjs__WEBPACK_IMPORTED_MODULE_4__.reactor),\n/* harmony export */   transact: () => (/* reexport safe */ _transactions_mjs__WEBPACK_IMPORTED_MODULE_7__.transact),\n/* harmony export */   transaction: () => (/* reexport safe */ _transactions_mjs__WEBPACK_IMPORTED_MODULE_7__.transaction),\n/* harmony export */   unsafe__withoutCapture: () => (/* reexport safe */ _capture_mjs__WEBPACK_IMPORTED_MODULE_5__.unsafe__withoutCapture),\n/* harmony export */   whyAmIRunning: () => (/* reexport safe */ _capture_mjs__WEBPACK_IMPORTED_MODULE_5__.whyAmIRunning),\n/* harmony export */   withDiff: () => (/* reexport safe */ _Computed_mjs__WEBPACK_IMPORTED_MODULE_3__.withDiff)\n/* harmony export */ });\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/helpers.mjs\");\n/* harmony import */ var _ArraySet_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ArraySet.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/ArraySet.mjs\");\n/* harmony import */ var _Atom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Atom.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/Atom.mjs\");\n/* harmony import */ var _Computed_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Computed.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/Computed.mjs\");\n/* harmony import */ var _EffectScheduler_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./EffectScheduler.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/EffectScheduler.mjs\");\n/* harmony import */ var _capture_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./capture.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/capture.mjs\");\n/* harmony import */ var _isSignal_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./isSignal.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/isSignal.mjs\");\n/* harmony import */ var _transactions_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./transactions.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/transactions.mjs\");\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./types.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/types.mjs\");\n\n\n\n\n\n\n\n\n\n\nconst currentApiVersion = 1;\nconst actualApiVersion = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_0__.singleton)(\"apiVersion\", () => currentApiVersion);\nif (actualApiVersion !== currentApiVersion) {\n  throw new Error(\n    `You have multiple incompatible versions of @tldraw/state in your app. Please deduplicate the package.`\n  );\n}\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ0E7QUFDQTtBQUMrRDtBQUNqQztBQUNGO0FBQzFCO0FBQ0Y7QUFDaUI7QUFDakI7QUFDMUM7QUFDQSx5QkFBeUIsdURBQVM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW9CRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RhdGUvZGlzdC1lc20vbGliL2NvcmUvaW5kZXgubWpzP2M2MDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2luZ2xldG9uIH0gZnJvbSBcIi4vaGVscGVycy5tanNcIjtcbmltcG9ydCB7IEFycmF5U2V0IH0gZnJvbSBcIi4vQXJyYXlTZXQubWpzXCI7XG5pbXBvcnQgeyBhdG9tLCBpc0F0b20gfSBmcm9tIFwiLi9BdG9tLm1qc1wiO1xuaW1wb3J0IHsgVU5JTklUSUFMSVpFRCwgY29tcHV0ZWQsIGdldENvbXB1dGVkSW5zdGFuY2UsIGlzVW5pbml0aWFsaXplZCwgd2l0aERpZmYgfSBmcm9tIFwiLi9Db21wdXRlZC5tanNcIjtcbmltcG9ydCB7IEVmZmVjdFNjaGVkdWxlciwgcmVhY3QsIHJlYWN0b3IgfSBmcm9tIFwiLi9FZmZlY3RTY2hlZHVsZXIubWpzXCI7XG5pbXBvcnQgeyB1bnNhZmVfX3dpdGhvdXRDYXB0dXJlLCB3aHlBbUlSdW5uaW5nIH0gZnJvbSBcIi4vY2FwdHVyZS5tanNcIjtcbmltcG9ydCB7IEVNUFRZX0FSUkFZIH0gZnJvbSBcIi4vaGVscGVycy5tanNcIjtcbmltcG9ydCB7IGlzU2lnbmFsIH0gZnJvbSBcIi4vaXNTaWduYWwubWpzXCI7XG5pbXBvcnQgeyB0cmFuc2FjdCwgdHJhbnNhY3Rpb24gfSBmcm9tIFwiLi90cmFuc2FjdGlvbnMubWpzXCI7XG5pbXBvcnQgeyBSRVNFVF9WQUxVRSB9IGZyb20gXCIuL3R5cGVzLm1qc1wiO1xuY29uc3QgY3VycmVudEFwaVZlcnNpb24gPSAxO1xuY29uc3QgYWN0dWFsQXBpVmVyc2lvbiA9IHNpbmdsZXRvbihcImFwaVZlcnNpb25cIiwgKCkgPT4gY3VycmVudEFwaVZlcnNpb24pO1xuaWYgKGFjdHVhbEFwaVZlcnNpb24gIT09IGN1cnJlbnRBcGlWZXJzaW9uKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBgWW91IGhhdmUgbXVsdGlwbGUgaW5jb21wYXRpYmxlIHZlcnNpb25zIG9mIEB0bGRyYXcvc3RhdGUgaW4geW91ciBhcHAuIFBsZWFzZSBkZWR1cGxpY2F0ZSB0aGUgcGFja2FnZS5gXG4gICk7XG59XG5leHBvcnQge1xuICBBcnJheVNldCxcbiAgRU1QVFlfQVJSQVksXG4gIEVmZmVjdFNjaGVkdWxlcixcbiAgUkVTRVRfVkFMVUUsXG4gIFVOSU5JVElBTElaRUQsXG4gIGF0b20sXG4gIGNvbXB1dGVkLFxuICBnZXRDb21wdXRlZEluc3RhbmNlLFxuICBpc0F0b20sXG4gIGlzU2lnbmFsLFxuICBpc1VuaW5pdGlhbGl6ZWQsXG4gIHJlYWN0LFxuICByZWFjdG9yLFxuICB0cmFuc2FjdCxcbiAgdHJhbnNhY3Rpb24sXG4gIHVuc2FmZV9fd2l0aG91dENhcHR1cmUsXG4gIHdoeUFtSVJ1bm5pbmcsXG4gIHdpdGhEaWZmXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/isSignal.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/isSignal.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isSignal: () => (/* binding */ isSignal)\n/* harmony export */ });\n/* harmony import */ var _Atom_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Atom.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/Atom.mjs\");\n/* harmony import */ var _Computed_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Computed.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/Computed.mjs\");\n\n\nfunction isSignal(value) {\n  return value instanceof _Atom_mjs__WEBPACK_IMPORTED_MODULE_0__._Atom || value instanceof _Computed_mjs__WEBPACK_IMPORTED_MODULE_1__._Computed;\n}\n\n//# sourceMappingURL=isSignal.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS9pc1NpZ25hbC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1DO0FBQ1E7QUFDM0M7QUFDQSwwQkFBMEIsNENBQUsscUJBQXFCLG9EQUFTO0FBQzdEO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlL2Rpc3QtZXNtL2xpYi9jb3JlL2lzU2lnbmFsLm1qcz9jMWRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9BdG9tIH0gZnJvbSBcIi4vQXRvbS5tanNcIjtcbmltcG9ydCB7IF9Db21wdXRlZCB9IGZyb20gXCIuL0NvbXB1dGVkLm1qc1wiO1xuZnVuY3Rpb24gaXNTaWduYWwodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgX0F0b20gfHwgdmFsdWUgaW5zdGFuY2VvZiBfQ29tcHV0ZWQ7XG59XG5leHBvcnQge1xuICBpc1NpZ25hbFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzU2lnbmFsLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/isSignal.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/transactions.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/transactions.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   advanceGlobalEpoch: () => (/* binding */ advanceGlobalEpoch),\n/* harmony export */   atomDidChange: () => (/* binding */ atomDidChange),\n/* harmony export */   getGlobalEpoch: () => (/* binding */ getGlobalEpoch),\n/* harmony export */   getIsReacting: () => (/* binding */ getIsReacting),\n/* harmony export */   getReactionEpoch: () => (/* binding */ getReactionEpoch),\n/* harmony export */   transact: () => (/* binding */ transact),\n/* harmony export */   transaction: () => (/* binding */ transaction)\n/* harmony export */ });\n/* harmony import */ var _EffectScheduler_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EffectScheduler.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/EffectScheduler.mjs\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/constants.mjs\");\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/helpers.mjs\");\n\n\n\nclass Transaction {\n  constructor(parent) {\n    this.parent = parent;\n  }\n  initialAtomValues = /* @__PURE__ */ new Map();\n  /**\n   * Get whether this transaction is a root (no parents).\n   *\n   * @public\n   */\n  // eslint-disable-next-line no-restricted-syntax\n  get isRoot() {\n    return this.parent === null;\n  }\n  /**\n   * Commit the transaction's changes.\n   *\n   * @public\n   */\n  commit() {\n    if (this.isRoot) {\n      flushChanges(this.initialAtomValues.keys());\n    } else {\n      this.initialAtomValues.forEach((value, atom) => {\n        if (!this.parent.initialAtomValues.has(atom)) {\n          this.parent.initialAtomValues.set(atom, value);\n        }\n      });\n    }\n  }\n  /**\n   * Abort the transaction.\n   *\n   * @public\n   */\n  abort() {\n    inst.globalEpoch++;\n    this.initialAtomValues.forEach((value, atom) => {\n      atom.set(value);\n      atom.historyBuffer?.clear();\n    });\n    this.commit();\n  }\n}\nconst inst = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_2__.singleton)(\"transactions\", () => ({\n  // The current epoch (global to all atoms).\n  globalEpoch: _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.GLOBAL_START_EPOCH + 1,\n  // Whether any transaction is reacting.\n  globalIsReacting: false,\n  currentTransaction: null,\n  cleanupReactors: null,\n  reactionEpoch: _constants_mjs__WEBPACK_IMPORTED_MODULE_1__.GLOBAL_START_EPOCH + 1\n}));\nfunction getReactionEpoch() {\n  return inst.reactionEpoch;\n}\nfunction getGlobalEpoch() {\n  return inst.globalEpoch;\n}\nfunction getIsReacting() {\n  return inst.globalIsReacting;\n}\nfunction traverse(reactors, child) {\n  if (child.lastTraversedEpoch === inst.globalEpoch) {\n    return;\n  }\n  child.lastTraversedEpoch = inst.globalEpoch;\n  if (child instanceof _EffectScheduler_mjs__WEBPACK_IMPORTED_MODULE_0__.EffectScheduler) {\n    reactors.add(child);\n  } else {\n    ;\n    child.children.visit((c) => traverse(reactors, c));\n  }\n}\nfunction flushChanges(atoms) {\n  if (inst.globalIsReacting) {\n    throw new Error(\"cannot change atoms during reaction cycle\");\n  }\n  try {\n    inst.globalIsReacting = true;\n    inst.reactionEpoch = inst.globalEpoch;\n    const reactors = /* @__PURE__ */ new Set();\n    for (const atom of atoms) {\n      atom.children.visit((child) => traverse(reactors, child));\n    }\n    for (const r of reactors) {\n      r.maybeScheduleEffect();\n    }\n    let updateDepth = 0;\n    while (inst.cleanupReactors?.size) {\n      if (updateDepth++ > 1e3) {\n        throw new Error(\"Reaction update depth limit exceeded\");\n      }\n      const reactors2 = inst.cleanupReactors;\n      inst.cleanupReactors = null;\n      for (const r of reactors2) {\n        r.maybeScheduleEffect();\n      }\n    }\n  } finally {\n    inst.cleanupReactors = null;\n    inst.globalIsReacting = false;\n  }\n}\nfunction atomDidChange(atom, previousValue) {\n  if (inst.globalIsReacting) {\n    const rs = inst.cleanupReactors ??= /* @__PURE__ */ new Set();\n    atom.children.visit((child) => traverse(rs, child));\n  } else if (!inst.currentTransaction) {\n    flushChanges([atom]);\n  } else if (!inst.currentTransaction.initialAtomValues.has(atom)) {\n    inst.currentTransaction.initialAtomValues.set(atom, previousValue);\n  }\n}\nfunction advanceGlobalEpoch() {\n  inst.globalEpoch++;\n}\nfunction transaction(fn) {\n  const txn = new Transaction(inst.currentTransaction);\n  inst.currentTransaction = txn;\n  try {\n    let result = void 0;\n    let rollback = false;\n    try {\n      result = fn(() => rollback = true);\n    } catch (e) {\n      txn.abort();\n      throw e;\n    }\n    if (rollback) {\n      txn.abort();\n    } else {\n      txn.commit();\n    }\n    return result;\n  } finally {\n    inst.currentTransaction = inst.currentTransaction.parent;\n  }\n}\nfunction transact(fn) {\n  if (inst.currentTransaction) {\n    return fn();\n  }\n  return transaction(fn);\n}\n\n//# sourceMappingURL=transactions.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS90cmFuc2FjdGlvbnMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDSDtBQUNYO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxhQUFhLHVEQUFTO0FBQ3RCO0FBQ0EsZUFBZSw4REFBa0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsOERBQWtCO0FBQ25DLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlFQUFlO0FBQ3RDO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS90cmFuc2FjdGlvbnMubWpzP2Q5NmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRWZmZWN0U2NoZWR1bGVyIH0gZnJvbSBcIi4vRWZmZWN0U2NoZWR1bGVyLm1qc1wiO1xuaW1wb3J0IHsgR0xPQkFMX1NUQVJUX0VQT0NIIH0gZnJvbSBcIi4vY29uc3RhbnRzLm1qc1wiO1xuaW1wb3J0IHsgc2luZ2xldG9uIH0gZnJvbSBcIi4vaGVscGVycy5tanNcIjtcbmNsYXNzIFRyYW5zYWN0aW9uIHtcbiAgY29uc3RydWN0b3IocGFyZW50KSB7XG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gIH1cbiAgaW5pdGlhbEF0b21WYWx1ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAvKipcbiAgICogR2V0IHdoZXRoZXIgdGhpcyB0cmFuc2FjdGlvbiBpcyBhIHJvb3QgKG5vIHBhcmVudHMpLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgZ2V0IGlzUm9vdCgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnQgPT09IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIENvbW1pdCB0aGUgdHJhbnNhY3Rpb24ncyBjaGFuZ2VzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjb21taXQoKSB7XG4gICAgaWYgKHRoaXMuaXNSb290KSB7XG4gICAgICBmbHVzaENoYW5nZXModGhpcy5pbml0aWFsQXRvbVZhbHVlcy5rZXlzKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluaXRpYWxBdG9tVmFsdWVzLmZvckVhY2goKHZhbHVlLCBhdG9tKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5wYXJlbnQuaW5pdGlhbEF0b21WYWx1ZXMuaGFzKGF0b20pKSB7XG4gICAgICAgICAgdGhpcy5wYXJlbnQuaW5pdGlhbEF0b21WYWx1ZXMuc2V0KGF0b20sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBYm9ydCB0aGUgdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFib3J0KCkge1xuICAgIGluc3QuZ2xvYmFsRXBvY2grKztcbiAgICB0aGlzLmluaXRpYWxBdG9tVmFsdWVzLmZvckVhY2goKHZhbHVlLCBhdG9tKSA9PiB7XG4gICAgICBhdG9tLnNldCh2YWx1ZSk7XG4gICAgICBhdG9tLmhpc3RvcnlCdWZmZXI/LmNsZWFyKCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb21taXQoKTtcbiAgfVxufVxuY29uc3QgaW5zdCA9IHNpbmdsZXRvbihcInRyYW5zYWN0aW9uc1wiLCAoKSA9PiAoe1xuICAvLyBUaGUgY3VycmVudCBlcG9jaCAoZ2xvYmFsIHRvIGFsbCBhdG9tcykuXG4gIGdsb2JhbEVwb2NoOiBHTE9CQUxfU1RBUlRfRVBPQ0ggKyAxLFxuICAvLyBXaGV0aGVyIGFueSB0cmFuc2FjdGlvbiBpcyByZWFjdGluZy5cbiAgZ2xvYmFsSXNSZWFjdGluZzogZmFsc2UsXG4gIGN1cnJlbnRUcmFuc2FjdGlvbjogbnVsbCxcbiAgY2xlYW51cFJlYWN0b3JzOiBudWxsLFxuICByZWFjdGlvbkVwb2NoOiBHTE9CQUxfU1RBUlRfRVBPQ0ggKyAxXG59KSk7XG5mdW5jdGlvbiBnZXRSZWFjdGlvbkVwb2NoKCkge1xuICByZXR1cm4gaW5zdC5yZWFjdGlvbkVwb2NoO1xufVxuZnVuY3Rpb24gZ2V0R2xvYmFsRXBvY2goKSB7XG4gIHJldHVybiBpbnN0Lmdsb2JhbEVwb2NoO1xufVxuZnVuY3Rpb24gZ2V0SXNSZWFjdGluZygpIHtcbiAgcmV0dXJuIGluc3QuZ2xvYmFsSXNSZWFjdGluZztcbn1cbmZ1bmN0aW9uIHRyYXZlcnNlKHJlYWN0b3JzLCBjaGlsZCkge1xuICBpZiAoY2hpbGQubGFzdFRyYXZlcnNlZEVwb2NoID09PSBpbnN0Lmdsb2JhbEVwb2NoKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNoaWxkLmxhc3RUcmF2ZXJzZWRFcG9jaCA9IGluc3QuZ2xvYmFsRXBvY2g7XG4gIGlmIChjaGlsZCBpbnN0YW5jZW9mIEVmZmVjdFNjaGVkdWxlcikge1xuICAgIHJlYWN0b3JzLmFkZChjaGlsZCk7XG4gIH0gZWxzZSB7XG4gICAgO1xuICAgIGNoaWxkLmNoaWxkcmVuLnZpc2l0KChjKSA9PiB0cmF2ZXJzZShyZWFjdG9ycywgYykpO1xuICB9XG59XG5mdW5jdGlvbiBmbHVzaENoYW5nZXMoYXRvbXMpIHtcbiAgaWYgKGluc3QuZ2xvYmFsSXNSZWFjdGluZykge1xuICAgIHRocm93IG5ldyBFcnJvcihcImNhbm5vdCBjaGFuZ2UgYXRvbXMgZHVyaW5nIHJlYWN0aW9uIGN5Y2xlXCIpO1xuICB9XG4gIHRyeSB7XG4gICAgaW5zdC5nbG9iYWxJc1JlYWN0aW5nID0gdHJ1ZTtcbiAgICBpbnN0LnJlYWN0aW9uRXBvY2ggPSBpbnN0Lmdsb2JhbEVwb2NoO1xuICAgIGNvbnN0IHJlYWN0b3JzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IGF0b20gb2YgYXRvbXMpIHtcbiAgICAgIGF0b20uY2hpbGRyZW4udmlzaXQoKGNoaWxkKSA9PiB0cmF2ZXJzZShyZWFjdG9ycywgY2hpbGQpKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCByIG9mIHJlYWN0b3JzKSB7XG4gICAgICByLm1heWJlU2NoZWR1bGVFZmZlY3QoKTtcbiAgICB9XG4gICAgbGV0IHVwZGF0ZURlcHRoID0gMDtcbiAgICB3aGlsZSAoaW5zdC5jbGVhbnVwUmVhY3RvcnM/LnNpemUpIHtcbiAgICAgIGlmICh1cGRhdGVEZXB0aCsrID4gMWUzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlYWN0aW9uIHVwZGF0ZSBkZXB0aCBsaW1pdCBleGNlZWRlZFwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlYWN0b3JzMiA9IGluc3QuY2xlYW51cFJlYWN0b3JzO1xuICAgICAgaW5zdC5jbGVhbnVwUmVhY3RvcnMgPSBudWxsO1xuICAgICAgZm9yIChjb25zdCByIG9mIHJlYWN0b3JzMikge1xuICAgICAgICByLm1heWJlU2NoZWR1bGVFZmZlY3QoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgaW5zdC5jbGVhbnVwUmVhY3RvcnMgPSBudWxsO1xuICAgIGluc3QuZ2xvYmFsSXNSZWFjdGluZyA9IGZhbHNlO1xuICB9XG59XG5mdW5jdGlvbiBhdG9tRGlkQ2hhbmdlKGF0b20sIHByZXZpb3VzVmFsdWUpIHtcbiAgaWYgKGluc3QuZ2xvYmFsSXNSZWFjdGluZykge1xuICAgIGNvbnN0IHJzID0gaW5zdC5jbGVhbnVwUmVhY3RvcnMgPz89IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgYXRvbS5jaGlsZHJlbi52aXNpdCgoY2hpbGQpID0+IHRyYXZlcnNlKHJzLCBjaGlsZCkpO1xuICB9IGVsc2UgaWYgKCFpbnN0LmN1cnJlbnRUcmFuc2FjdGlvbikge1xuICAgIGZsdXNoQ2hhbmdlcyhbYXRvbV0pO1xuICB9IGVsc2UgaWYgKCFpbnN0LmN1cnJlbnRUcmFuc2FjdGlvbi5pbml0aWFsQXRvbVZhbHVlcy5oYXMoYXRvbSkpIHtcbiAgICBpbnN0LmN1cnJlbnRUcmFuc2FjdGlvbi5pbml0aWFsQXRvbVZhbHVlcy5zZXQoYXRvbSwgcHJldmlvdXNWYWx1ZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGFkdmFuY2VHbG9iYWxFcG9jaCgpIHtcbiAgaW5zdC5nbG9iYWxFcG9jaCsrO1xufVxuZnVuY3Rpb24gdHJhbnNhY3Rpb24oZm4pIHtcbiAgY29uc3QgdHhuID0gbmV3IFRyYW5zYWN0aW9uKGluc3QuY3VycmVudFRyYW5zYWN0aW9uKTtcbiAgaW5zdC5jdXJyZW50VHJhbnNhY3Rpb24gPSB0eG47XG4gIHRyeSB7XG4gICAgbGV0IHJlc3VsdCA9IHZvaWQgMDtcbiAgICBsZXQgcm9sbGJhY2sgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gZm4oKCkgPT4gcm9sbGJhY2sgPSB0cnVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0eG4uYWJvcnQoKTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIGlmIChyb2xsYmFjaykge1xuICAgICAgdHhuLmFib3J0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHR4bi5jb21taXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBmaW5hbGx5IHtcbiAgICBpbnN0LmN1cnJlbnRUcmFuc2FjdGlvbiA9IGluc3QuY3VycmVudFRyYW5zYWN0aW9uLnBhcmVudDtcbiAgfVxufVxuZnVuY3Rpb24gdHJhbnNhY3QoZm4pIHtcbiAgaWYgKGluc3QuY3VycmVudFRyYW5zYWN0aW9uKSB7XG4gICAgcmV0dXJuIGZuKCk7XG4gIH1cbiAgcmV0dXJuIHRyYW5zYWN0aW9uKGZuKTtcbn1cbmV4cG9ydCB7XG4gIGFkdmFuY2VHbG9iYWxFcG9jaCxcbiAgYXRvbURpZENoYW5nZSxcbiAgZ2V0R2xvYmFsRXBvY2gsXG4gIGdldElzUmVhY3RpbmcsXG4gIGdldFJlYWN0aW9uRXBvY2gsXG4gIHRyYW5zYWN0LFxuICB0cmFuc2FjdGlvblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zYWN0aW9ucy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/transactions.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/types.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/types.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RESET_VALUE: () => (/* binding */ RESET_VALUE)\n/* harmony export */ });\nconst RESET_VALUE = Symbol.for(\"com.tldraw.state/RESET_VALUE\");\n\n//# sourceMappingURL=types.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS90eXBlcy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlL2Rpc3QtZXNtL2xpYi9jb3JlL3R5cGVzLm1qcz9kMjYwIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJFU0VUX1ZBTFVFID0gU3ltYm9sLmZvcihcImNvbS50bGRyYXcuc3RhdGUvUkVTRVRfVkFMVUVcIik7XG5leHBvcnQge1xuICBSRVNFVF9WQUxVRVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/types.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/warnings.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/core/warnings.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logComputedGetterWarning: () => (/* binding */ logComputedGetterWarning)\n/* harmony export */ });\nlet didWarnComputedGetter = false;\nfunction logComputedGetterWarning() {\n  if (didWarnComputedGetter)\n    return;\n  didWarnComputedGetter = true;\n  console.warn(\n    `Using \\`@computed\\` as a decorator for getters is deprecated and will be removed in the near future. Please refactor to use \\`@computed\\` as a decorator for methods.\n\n// Before\n@computed\nget foo() {\n\treturn 'foo'\n}\n\n// After\n@computed\ngetFoo() {\n\treturn 'foo'\n}\n`\n  );\n}\n\n//# sourceMappingURL=warnings.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS93YXJuaW5ncy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvY29yZS93YXJuaW5ncy5tanM/MDliMSJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgZGlkV2FybkNvbXB1dGVkR2V0dGVyID0gZmFsc2U7XG5mdW5jdGlvbiBsb2dDb21wdXRlZEdldHRlcldhcm5pbmcoKSB7XG4gIGlmIChkaWRXYXJuQ29tcHV0ZWRHZXR0ZXIpXG4gICAgcmV0dXJuO1xuICBkaWRXYXJuQ29tcHV0ZWRHZXR0ZXIgPSB0cnVlO1xuICBjb25zb2xlLndhcm4oXG4gICAgYFVzaW5nIFxcYEBjb21wdXRlZFxcYCBhcyBhIGRlY29yYXRvciBmb3IgZ2V0dGVycyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5lYXIgZnV0dXJlLiBQbGVhc2UgcmVmYWN0b3IgdG8gdXNlIFxcYEBjb21wdXRlZFxcYCBhcyBhIGRlY29yYXRvciBmb3IgbWV0aG9kcy5cblxuLy8gQmVmb3JlXG5AY29tcHV0ZWRcbmdldCBmb28oKSB7XG5cdHJldHVybiAnZm9vJ1xufVxuXG4vLyBBZnRlclxuQGNvbXB1dGVkXG5nZXRGb28oKSB7XG5cdHJldHVybiAnZm9vJ1xufVxuYFxuICApO1xufVxuZXhwb3J0IHtcbiAgbG9nQ29tcHV0ZWRHZXR0ZXJXYXJuaW5nXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2FybmluZ3MubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/warnings.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/index.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/react/index.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   track: () => (/* reexport safe */ _track_mjs__WEBPACK_IMPORTED_MODULE_0__.track),\n/* harmony export */   useAtom: () => (/* reexport safe */ _useAtom_mjs__WEBPACK_IMPORTED_MODULE_1__.useAtom),\n/* harmony export */   useComputed: () => (/* reexport safe */ _useComputed_mjs__WEBPACK_IMPORTED_MODULE_2__.useComputed),\n/* harmony export */   useQuickReactor: () => (/* reexport safe */ _useQuickReactor_mjs__WEBPACK_IMPORTED_MODULE_3__.useQuickReactor),\n/* harmony export */   useReactor: () => (/* reexport safe */ _useReactor_mjs__WEBPACK_IMPORTED_MODULE_4__.useReactor),\n/* harmony export */   useStateTracking: () => (/* reexport safe */ _useStateTracking_mjs__WEBPACK_IMPORTED_MODULE_5__.useStateTracking),\n/* harmony export */   useValue: () => (/* reexport safe */ _useValue_mjs__WEBPACK_IMPORTED_MODULE_6__.useValue)\n/* harmony export */ });\n/* harmony import */ var _track_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./track.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/track.mjs\");\n/* harmony import */ var _useAtom_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAtom.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useAtom.mjs\");\n/* harmony import */ var _useComputed_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useComputed.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useComputed.mjs\");\n/* harmony import */ var _useQuickReactor_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useQuickReactor.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useQuickReactor.mjs\");\n/* harmony import */ var _useReactor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useReactor.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useReactor.mjs\");\n/* harmony import */ var _useStateTracking_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useStateTracking.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useStateTracking.mjs\");\n/* harmony import */ var _useValue_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./useValue.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useValue.mjs\");\n\n\n\n\n\n\n\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvcmVhY3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9DO0FBQ0k7QUFDUTtBQUNRO0FBQ1Y7QUFDWTtBQUNoQjtBQVN4QztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RhdGUvZGlzdC1lc20vbGliL3JlYWN0L2luZGV4Lm1qcz9jZjRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRyYWNrIH0gZnJvbSBcIi4vdHJhY2subWpzXCI7XG5pbXBvcnQgeyB1c2VBdG9tIH0gZnJvbSBcIi4vdXNlQXRvbS5tanNcIjtcbmltcG9ydCB7IHVzZUNvbXB1dGVkIH0gZnJvbSBcIi4vdXNlQ29tcHV0ZWQubWpzXCI7XG5pbXBvcnQgeyB1c2VRdWlja1JlYWN0b3IgfSBmcm9tIFwiLi91c2VRdWlja1JlYWN0b3IubWpzXCI7XG5pbXBvcnQgeyB1c2VSZWFjdG9yIH0gZnJvbSBcIi4vdXNlUmVhY3Rvci5tanNcIjtcbmltcG9ydCB7IHVzZVN0YXRlVHJhY2tpbmcgfSBmcm9tIFwiLi91c2VTdGF0ZVRyYWNraW5nLm1qc1wiO1xuaW1wb3J0IHsgdXNlVmFsdWUgfSBmcm9tIFwiLi91c2VWYWx1ZS5tanNcIjtcbmV4cG9ydCB7XG4gIHRyYWNrLFxuICB1c2VBdG9tLFxuICB1c2VDb21wdXRlZCxcbiAgdXNlUXVpY2tSZWFjdG9yLFxuICB1c2VSZWFjdG9yLFxuICB1c2VTdGF0ZVRyYWNraW5nLFxuICB1c2VWYWx1ZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/track.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/react/track.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProxyHandlers: () => (/* binding */ ProxyHandlers),\n/* harmony export */   ReactForwardRefSymbol: () => (/* binding */ ReactForwardRefSymbol),\n/* harmony export */   ReactMemoSymbol: () => (/* binding */ ReactMemoSymbol),\n/* harmony export */   track: () => (/* binding */ track)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _useStateTracking_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useStateTracking.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useStateTracking.mjs\");\n\n\nconst ProxyHandlers = {\n  /**\n   * This is a function call trap for functional components. When this is called, we know it means\n   * React did run 'Component()', that means we can use any hooks here to setup our effect and\n   * store.\n   *\n   * With the native Proxy, all other calls such as access/setting to/of properties will be\n   * forwarded to the target Component, so we don't need to copy the Component's own or inherited\n   * properties.\n   *\n   * @see https://github.com/facebook/react/blob/2d80a0cd690bb5650b6c8a6c079a87b5dc42bd15/packages/react-reconciler/src/ReactFiberHooks.old.js#L460\n   */\n  apply(Component, thisArg, argumentsList) {\n    return (0,_useStateTracking_mjs__WEBPACK_IMPORTED_MODULE_1__.useStateTracking)(\n      Component.displayName ?? Component.name ?? \"tracked(???)\",\n      () => Component.apply(thisArg, argumentsList)\n    );\n  }\n};\nconst ReactMemoSymbol = Symbol.for(\"react.memo\");\nconst ReactForwardRefSymbol = Symbol.for(\"react.forward_ref\");\nfunction track(baseComponent) {\n  let compare = null;\n  const $$typeof = baseComponent[\"$$typeof\"];\n  if ($$typeof === ReactMemoSymbol) {\n    baseComponent = baseComponent.type;\n    compare = baseComponent.compare;\n  }\n  if ($$typeof === ReactForwardRefSymbol) {\n    return (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)((0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(new Proxy(baseComponent.render, ProxyHandlers)));\n  }\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(new Proxy(baseComponent, ProxyHandlers), compare);\n}\n\n//# sourceMappingURL=track.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvcmVhY3QvdHJhY2subWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF5QztBQUNpQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsdUVBQWdCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMkNBQUksQ0FBQyxpREFBVTtBQUMxQjtBQUNBLFNBQVMsMkNBQUk7QUFDYjtBQU1FO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvcmVhY3QvdHJhY2subWpzPzc1M2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9yd2FyZFJlZiwgbWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlU3RhdGVUcmFja2luZyB9IGZyb20gXCIuL3VzZVN0YXRlVHJhY2tpbmcubWpzXCI7XG5jb25zdCBQcm94eUhhbmRsZXJzID0ge1xuICAvKipcbiAgICogVGhpcyBpcyBhIGZ1bmN0aW9uIGNhbGwgdHJhcCBmb3IgZnVuY3Rpb25hbCBjb21wb25lbnRzLiBXaGVuIHRoaXMgaXMgY2FsbGVkLCB3ZSBrbm93IGl0IG1lYW5zXG4gICAqIFJlYWN0IGRpZCBydW4gJ0NvbXBvbmVudCgpJywgdGhhdCBtZWFucyB3ZSBjYW4gdXNlIGFueSBob29rcyBoZXJlIHRvIHNldHVwIG91ciBlZmZlY3QgYW5kXG4gICAqIHN0b3JlLlxuICAgKlxuICAgKiBXaXRoIHRoZSBuYXRpdmUgUHJveHksIGFsbCBvdGhlciBjYWxscyBzdWNoIGFzIGFjY2Vzcy9zZXR0aW5nIHRvL29mIHByb3BlcnRpZXMgd2lsbCBiZVxuICAgKiBmb3J3YXJkZWQgdG8gdGhlIHRhcmdldCBDb21wb25lbnQsIHNvIHdlIGRvbid0IG5lZWQgdG8gY29weSB0aGUgQ29tcG9uZW50J3Mgb3duIG9yIGluaGVyaXRlZFxuICAgKiBwcm9wZXJ0aWVzLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9ibG9iLzJkODBhMGNkNjkwYmI1NjUwYjZjOGE2YzA3OWE4N2I1ZGM0MmJkMTUvcGFja2FnZXMvcmVhY3QtcmVjb25jaWxlci9zcmMvUmVhY3RGaWJlckhvb2tzLm9sZC5qcyNMNDYwXG4gICAqL1xuICBhcHBseShDb21wb25lbnQsIHRoaXNBcmcsIGFyZ3VtZW50c0xpc3QpIHtcbiAgICByZXR1cm4gdXNlU3RhdGVUcmFja2luZyhcbiAgICAgIENvbXBvbmVudC5kaXNwbGF5TmFtZSA/PyBDb21wb25lbnQubmFtZSA/PyBcInRyYWNrZWQoPz8/KVwiLFxuICAgICAgKCkgPT4gQ29tcG9uZW50LmFwcGx5KHRoaXNBcmcsIGFyZ3VtZW50c0xpc3QpXG4gICAgKTtcbiAgfVxufTtcbmNvbnN0IFJlYWN0TWVtb1N5bWJvbCA9IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vXCIpO1xuY29uc3QgUmVhY3RGb3J3YXJkUmVmU3ltYm9sID0gU3ltYm9sLmZvcihcInJlYWN0LmZvcndhcmRfcmVmXCIpO1xuZnVuY3Rpb24gdHJhY2soYmFzZUNvbXBvbmVudCkge1xuICBsZXQgY29tcGFyZSA9IG51bGw7XG4gIGNvbnN0ICQkdHlwZW9mID0gYmFzZUNvbXBvbmVudFtcIiQkdHlwZW9mXCJdO1xuICBpZiAoJCR0eXBlb2YgPT09IFJlYWN0TWVtb1N5bWJvbCkge1xuICAgIGJhc2VDb21wb25lbnQgPSBiYXNlQ29tcG9uZW50LnR5cGU7XG4gICAgY29tcGFyZSA9IGJhc2VDb21wb25lbnQuY29tcGFyZTtcbiAgfVxuICBpZiAoJCR0eXBlb2YgPT09IFJlYWN0Rm9yd2FyZFJlZlN5bWJvbCkge1xuICAgIHJldHVybiBtZW1vKGZvcndhcmRSZWYobmV3IFByb3h5KGJhc2VDb21wb25lbnQucmVuZGVyLCBQcm94eUhhbmRsZXJzKSkpO1xuICB9XG4gIHJldHVybiBtZW1vKG5ldyBQcm94eShiYXNlQ29tcG9uZW50LCBQcm94eUhhbmRsZXJzKSwgY29tcGFyZSk7XG59XG5leHBvcnQge1xuICBQcm94eUhhbmRsZXJzLFxuICBSZWFjdEZvcndhcmRSZWZTeW1ib2wsXG4gIFJlYWN0TWVtb1N5bWJvbCxcbiAgdHJhY2tcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjay5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/track.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useAtom.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/react/useAtom.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAtom: () => (/* binding */ useAtom)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _core_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/index.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/index.mjs\");\n\n\nfunction useAtom(name, valueOrInitialiser, options) {\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => {\n    const initialValue = typeof valueOrInitialiser === \"function\" ? valueOrInitialiser() : valueOrInitialiser;\n    return (0,_core_index_mjs__WEBPACK_IMPORTED_MODULE_1__.atom)(`useAtom(${name})`, initialValue, options);\n  })[0];\n}\n\n//# sourceMappingURL=useAtom.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvcmVhY3QvdXNlQXRvbS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBQ1E7QUFDekM7QUFDQSxTQUFTLCtDQUFRO0FBQ2pCO0FBQ0EsV0FBVyxxREFBSSxZQUFZLEtBQUs7QUFDaEMsR0FBRztBQUNIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlL2Rpc3QtZXNtL2xpYi9yZWFjdC91c2VBdG9tLm1qcz9iZGZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBhdG9tIH0gZnJvbSBcIi4uL2NvcmUvaW5kZXgubWpzXCI7XG5mdW5jdGlvbiB1c2VBdG9tKG5hbWUsIHZhbHVlT3JJbml0aWFsaXNlciwgb3B0aW9ucykge1xuICByZXR1cm4gdXNlU3RhdGUoKCkgPT4ge1xuICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9IHR5cGVvZiB2YWx1ZU9ySW5pdGlhbGlzZXIgPT09IFwiZnVuY3Rpb25cIiA/IHZhbHVlT3JJbml0aWFsaXNlcigpIDogdmFsdWVPckluaXRpYWxpc2VyO1xuICAgIHJldHVybiBhdG9tKGB1c2VBdG9tKCR7bmFtZX0pYCwgaW5pdGlhbFZhbHVlLCBvcHRpb25zKTtcbiAgfSlbMF07XG59XG5leHBvcnQge1xuICB1c2VBdG9tXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlQXRvbS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useAtom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useComputed.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/react/useComputed.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useComputed: () => (/* binding */ useComputed)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _core_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/index.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/index.mjs\");\n\n\nfunction useComputed() {\n  const name = arguments[0];\n  const compute = arguments[1];\n  const opts = arguments.length === 3 ? void 0 : arguments[2];\n  const deps = arguments.length === 3 ? arguments[2] : arguments[3];\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_core_index_mjs__WEBPACK_IMPORTED_MODULE_1__.computed)(`useComputed(${name})`, compute, opts), deps);\n}\n\n//# sourceMappingURL=useComputed.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvcmVhY3QvdXNlQ29tcHV0ZWQubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUNhO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDhDQUFPLE9BQU8seURBQVEsZ0JBQWdCLEtBQUs7QUFDcEQ7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RhdGUvZGlzdC1lc20vbGliL3JlYWN0L3VzZUNvbXB1dGVkLm1qcz8zNWI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSBcIi4uL2NvcmUvaW5kZXgubWpzXCI7XG5mdW5jdGlvbiB1c2VDb21wdXRlZCgpIHtcbiAgY29uc3QgbmFtZSA9IGFyZ3VtZW50c1swXTtcbiAgY29uc3QgY29tcHV0ZSA9IGFyZ3VtZW50c1sxXTtcbiAgY29uc3Qgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDMgPyB2b2lkIDAgOiBhcmd1bWVudHNbMl07XG4gIGNvbnN0IGRlcHMgPSBhcmd1bWVudHMubGVuZ3RoID09PSAzID8gYXJndW1lbnRzWzJdIDogYXJndW1lbnRzWzNdO1xuICByZXR1cm4gdXNlTWVtbygoKSA9PiBjb21wdXRlZChgdXNlQ29tcHV0ZWQoJHtuYW1lfSlgLCBjb21wdXRlLCBvcHRzKSwgZGVwcyk7XG59XG5leHBvcnQge1xuICB1c2VDb21wdXRlZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUNvbXB1dGVkLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useComputed.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useQuickReactor.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/react/useQuickReactor.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useQuickReactor: () => (/* binding */ useQuickReactor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _core_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/index.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/index.mjs\");\n\n\nfunction useQuickReactor(name, reactFn, deps = _core_index_mjs__WEBPACK_IMPORTED_MODULE_1__.EMPTY_ARRAY) {\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const scheduler = new _core_index_mjs__WEBPACK_IMPORTED_MODULE_1__.EffectScheduler(name, reactFn);\n    scheduler.attach();\n    scheduler.execute();\n    return () => {\n      scheduler.detach();\n    };\n  }, deps);\n}\n\n//# sourceMappingURL=useQuickReactor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvcmVhY3QvdXNlUXVpY2tSZWFjdG9yLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBa0M7QUFDK0I7QUFDakUsK0NBQStDLHdEQUFXO0FBQzFELEVBQUUsZ0RBQVM7QUFDWCwwQkFBMEIsNERBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvcmVhY3QvdXNlUXVpY2tSZWFjdG9yLm1qcz8yYzIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRU1QVFlfQVJSQVksIEVmZmVjdFNjaGVkdWxlciB9IGZyb20gXCIuLi9jb3JlL2luZGV4Lm1qc1wiO1xuZnVuY3Rpb24gdXNlUXVpY2tSZWFjdG9yKG5hbWUsIHJlYWN0Rm4sIGRlcHMgPSBFTVBUWV9BUlJBWSkge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHNjaGVkdWxlciA9IG5ldyBFZmZlY3RTY2hlZHVsZXIobmFtZSwgcmVhY3RGbik7XG4gICAgc2NoZWR1bGVyLmF0dGFjaCgpO1xuICAgIHNjaGVkdWxlci5leGVjdXRlKCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHNjaGVkdWxlci5kZXRhY2goKTtcbiAgICB9O1xuICB9LCBkZXBzKTtcbn1cbmV4cG9ydCB7XG4gIHVzZVF1aWNrUmVhY3RvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZVF1aWNrUmVhY3Rvci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useQuickReactor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useReactor.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/react/useReactor.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useReactor: () => (/* binding */ useReactor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _core_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/index.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/index.mjs\");\n\n\nfunction useReactor(name, reactFn, deps = []) {\n  const raf = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(-1);\n  const scheduler = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => new _core_index_mjs__WEBPACK_IMPORTED_MODULE_1__.EffectScheduler(name, reactFn, {\n      scheduleEffect: (cb) => {\n        const rafId = requestAnimationFrame(cb);\n        raf.current = rafId;\n        return rafId;\n      }\n    }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    deps\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    scheduler.attach();\n    scheduler.execute();\n    return () => {\n      scheduler.detach();\n      cancelAnimationFrame(raf.current);\n    };\n  }, [scheduler]);\n}\n\n//# sourceMappingURL=useReactor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvcmVhY3QvdXNlUmVhY3Rvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1EO0FBQ0M7QUFDcEQ7QUFDQSxjQUFjLDZDQUFNO0FBQ3BCLG9CQUFvQiw4Q0FBTztBQUMzQixjQUFjLDREQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvcmVhY3QvdXNlUmVhY3Rvci5tanM/ZTAwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRWZmZWN0U2NoZWR1bGVyIH0gZnJvbSBcIi4uL2NvcmUvaW5kZXgubWpzXCI7XG5mdW5jdGlvbiB1c2VSZWFjdG9yKG5hbWUsIHJlYWN0Rm4sIGRlcHMgPSBbXSkge1xuICBjb25zdCByYWYgPSB1c2VSZWYoLTEpO1xuICBjb25zdCBzY2hlZHVsZXIgPSB1c2VNZW1vKFxuICAgICgpID0+IG5ldyBFZmZlY3RTY2hlZHVsZXIobmFtZSwgcmVhY3RGbiwge1xuICAgICAgc2NoZWR1bGVFZmZlY3Q6IChjYikgPT4ge1xuICAgICAgICBjb25zdCByYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShjYik7XG4gICAgICAgIHJhZi5jdXJyZW50ID0gcmFmSWQ7XG4gICAgICAgIHJldHVybiByYWZJZDtcbiAgICAgIH1cbiAgICB9KSxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgZGVwc1xuICApO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNjaGVkdWxlci5hdHRhY2goKTtcbiAgICBzY2hlZHVsZXIuZXhlY3V0ZSgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzY2hlZHVsZXIuZGV0YWNoKCk7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShyYWYuY3VycmVudCk7XG4gICAgfTtcbiAgfSwgW3NjaGVkdWxlcl0pO1xufVxuZXhwb3J0IHtcbiAgdXNlUmVhY3RvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZVJlYWN0b3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useReactor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useStateTracking.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/react/useStateTracking.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useStateTracking: () => (/* binding */ useStateTracking)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _core_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/index.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/index.mjs\");\n\n\nfunction useStateTracking(name, render) {\n  const renderRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(render);\n  renderRef.current = render;\n  const [scheduler, subscribe, getSnapshot] = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    let scheduleUpdate = null;\n    const subscribe2 = (cb) => {\n      scheduleUpdate = cb;\n      return () => {\n        scheduleUpdate = null;\n      };\n    };\n    const scheduler2 = new _core_index_mjs__WEBPACK_IMPORTED_MODULE_1__.EffectScheduler(\n      `useStateTracking(${name})`,\n      // this is what `scheduler.execute()` will call\n      () => renderRef.current?.(),\n      // this is what will be invoked when @tldraw/state detects a change in an upstream reactive value\n      {\n        scheduleEffect() {\n          scheduleUpdate?.();\n        }\n      }\n    );\n    const getSnapshot2 = () => scheduler2.scheduleCount;\n    return [scheduler2, subscribe2, getSnapshot2];\n  }, [name]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore(subscribe, getSnapshot, getSnapshot);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    scheduler.attach();\n    scheduler.maybeScheduleEffect();\n    return () => {\n      scheduler.detach();\n    };\n  }, [scheduler]);\n  return scheduler.execute();\n}\n\n//# sourceMappingURL=useStateTracking.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvcmVhY3QvdXNlU3RhdGVUcmFja2luZy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBCO0FBQzBCO0FBQ3BEO0FBQ0Esb0JBQW9CLHlDQUFZO0FBQ2hDO0FBQ0EsOENBQThDLDBDQUFhO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDREQUFlO0FBQzFDLDBCQUEwQixLQUFLO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSx1REFBMEI7QUFDNUIsRUFBRSw0Q0FBZTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RhdGUvZGlzdC1lc20vbGliL3JlYWN0L3VzZVN0YXRlVHJhY2tpbmcubWpzPzlkYmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRWZmZWN0U2NoZWR1bGVyIH0gZnJvbSBcIi4uL2NvcmUvaW5kZXgubWpzXCI7XG5mdW5jdGlvbiB1c2VTdGF0ZVRyYWNraW5nKG5hbWUsIHJlbmRlcikge1xuICBjb25zdCByZW5kZXJSZWYgPSBSZWFjdC51c2VSZWYocmVuZGVyKTtcbiAgcmVuZGVyUmVmLmN1cnJlbnQgPSByZW5kZXI7XG4gIGNvbnN0IFtzY2hlZHVsZXIsIHN1YnNjcmliZSwgZ2V0U25hcHNob3RdID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgbGV0IHNjaGVkdWxlVXBkYXRlID0gbnVsbDtcbiAgICBjb25zdCBzdWJzY3JpYmUyID0gKGNiKSA9PiB7XG4gICAgICBzY2hlZHVsZVVwZGF0ZSA9IGNiO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgc2NoZWR1bGVVcGRhdGUgPSBudWxsO1xuICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHNjaGVkdWxlcjIgPSBuZXcgRWZmZWN0U2NoZWR1bGVyKFxuICAgICAgYHVzZVN0YXRlVHJhY2tpbmcoJHtuYW1lfSlgLFxuICAgICAgLy8gdGhpcyBpcyB3aGF0IGBzY2hlZHVsZXIuZXhlY3V0ZSgpYCB3aWxsIGNhbGxcbiAgICAgICgpID0+IHJlbmRlclJlZi5jdXJyZW50Py4oKSxcbiAgICAgIC8vIHRoaXMgaXMgd2hhdCB3aWxsIGJlIGludm9rZWQgd2hlbiBAdGxkcmF3L3N0YXRlIGRldGVjdHMgYSBjaGFuZ2UgaW4gYW4gdXBzdHJlYW0gcmVhY3RpdmUgdmFsdWVcbiAgICAgIHtcbiAgICAgICAgc2NoZWR1bGVFZmZlY3QoKSB7XG4gICAgICAgICAgc2NoZWR1bGVVcGRhdGU/LigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCBnZXRTbmFwc2hvdDIgPSAoKSA9PiBzY2hlZHVsZXIyLnNjaGVkdWxlQ291bnQ7XG4gICAgcmV0dXJuIFtzY2hlZHVsZXIyLCBzdWJzY3JpYmUyLCBnZXRTbmFwc2hvdDJdO1xuICB9LCBbbmFtZV0pO1xuICBSZWFjdC51c2VTeW5jRXh0ZXJuYWxTdG9yZShzdWJzY3JpYmUsIGdldFNuYXBzaG90LCBnZXRTbmFwc2hvdCk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2NoZWR1bGVyLmF0dGFjaCgpO1xuICAgIHNjaGVkdWxlci5tYXliZVNjaGVkdWxlRWZmZWN0KCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHNjaGVkdWxlci5kZXRhY2goKTtcbiAgICB9O1xuICB9LCBbc2NoZWR1bGVyXSk7XG4gIHJldHVybiBzY2hlZHVsZXIuZXhlY3V0ZSgpO1xufVxuZXhwb3J0IHtcbiAgdXNlU3RhdGVUcmFja2luZ1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZVN0YXRlVHJhY2tpbmcubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useStateTracking.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useValue.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/state/dist-esm/lib/react/useValue.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useValue: () => (/* binding */ useValue)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _core_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/index.mjs */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/lib/core/index.mjs\");\n\n\nfunction useValue() {\n  const args = arguments;\n  const deps = args.length === 3 ? args[2] : [args[0]];\n  const name = args.length === 3 ? args[0] : `useValue(${args[0].name})`;\n  const isInRender = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\n  isInRender.current = true;\n  const $val = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (args.length === 1) {\n      return args[0];\n    }\n    return (0,_core_index_mjs__WEBPACK_IMPORTED_MODULE_1__.computed)(name, () => {\n      if (isInRender.current) {\n        return args[1]();\n      } else {\n        try {\n          return args[1]();\n        } catch {\n          return {};\n        }\n      }\n    });\n  }, deps);\n  try {\n    const { subscribe, getSnapshot } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n      return {\n        subscribe: (listen) => {\n          return (0,_core_index_mjs__WEBPACK_IMPORTED_MODULE_1__.react)(`useValue(${name})`, () => {\n            $val.get();\n            listen();\n          });\n        },\n        getSnapshot: () => $val.get()\n      };\n    }, [$val]);\n    return (0,react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore)(subscribe, getSnapshot, getSnapshot);\n  } finally {\n    isInRender.current = false;\n  }\n}\n\n//# sourceMappingURL=useValue.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdGF0ZS9kaXN0LWVzbS9saWIvcmVhY3QvdXNlVmFsdWUubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4RDtBQUNWO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxhQUFhO0FBQ3RFLHFCQUFxQiw2Q0FBTTtBQUMzQjtBQUNBLGVBQWUsOENBQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5REFBUTtBQUNuQjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLFlBQVkseUJBQXlCLEVBQUUsOENBQU87QUFDOUM7QUFDQTtBQUNBLGlCQUFpQixzREFBSyxhQUFhLEtBQUs7QUFDeEM7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTCxXQUFXLDJEQUFvQjtBQUMvQixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0YXRlL2Rpc3QtZXNtL2xpYi9yZWFjdC91c2VWYWx1ZS5tanM/NDA2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VNZW1vLCB1c2VSZWYsIHVzZVN5bmNFeHRlcm5hbFN0b3JlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjb21wdXRlZCwgcmVhY3QgfSBmcm9tIFwiLi4vY29yZS9pbmRleC5tanNcIjtcbmZ1bmN0aW9uIHVzZVZhbHVlKCkge1xuICBjb25zdCBhcmdzID0gYXJndW1lbnRzO1xuICBjb25zdCBkZXBzID0gYXJncy5sZW5ndGggPT09IDMgPyBhcmdzWzJdIDogW2FyZ3NbMF1dO1xuICBjb25zdCBuYW1lID0gYXJncy5sZW5ndGggPT09IDMgPyBhcmdzWzBdIDogYHVzZVZhbHVlKCR7YXJnc1swXS5uYW1lfSlgO1xuICBjb25zdCBpc0luUmVuZGVyID0gdXNlUmVmKHRydWUpO1xuICBpc0luUmVuZGVyLmN1cnJlbnQgPSB0cnVlO1xuICBjb25zdCAkdmFsID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gYXJnc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXB1dGVkKG5hbWUsICgpID0+IHtcbiAgICAgIGlmIChpc0luUmVuZGVyLmN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3NbMV0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIGFyZ3NbMV0oKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIGRlcHMpO1xuICB0cnkge1xuICAgIGNvbnN0IHsgc3Vic2NyaWJlLCBnZXRTbmFwc2hvdCB9ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWJzY3JpYmU6IChsaXN0ZW4pID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVhY3QoYHVzZVZhbHVlKCR7bmFtZX0pYCwgKCkgPT4ge1xuICAgICAgICAgICAgJHZhbC5nZXQoKTtcbiAgICAgICAgICAgIGxpc3RlbigpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRTbmFwc2hvdDogKCkgPT4gJHZhbC5nZXQoKVxuICAgICAgfTtcbiAgICB9LCBbJHZhbF0pO1xuICAgIHJldHVybiB1c2VTeW5jRXh0ZXJuYWxTdG9yZShzdWJzY3JpYmUsIGdldFNuYXBzaG90LCBnZXRTbmFwc2hvdCk7XG4gIH0gZmluYWxseSB7XG4gICAgaXNJblJlbmRlci5jdXJyZW50ID0gZmFsc2U7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIHVzZVZhbHVlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlVmFsdWUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/state/dist-esm/lib/react/useValue.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IncrementalSetConstructor: () => (/* reexport safe */ _lib_IncrementalSetConstructor_mjs__WEBPACK_IMPORTED_MODULE_0__.IncrementalSetConstructor),\n/* harmony export */   MigrationFailureReason: () => (/* reexport safe */ _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_8__.MigrationFailureReason),\n/* harmony export */   RecordType: () => (/* reexport safe */ _lib_RecordType_mjs__WEBPACK_IMPORTED_MODULE_1__.RecordType),\n/* harmony export */   Store: () => (/* reexport safe */ _lib_Store_mjs__WEBPACK_IMPORTED_MODULE_3__.Store),\n/* harmony export */   StoreQueries: () => (/* reexport safe */ _lib_StoreQueries_mjs__WEBPACK_IMPORTED_MODULE_4__.StoreQueries),\n/* harmony export */   StoreSchema: () => (/* reexport safe */ _lib_StoreSchema_mjs__WEBPACK_IMPORTED_MODULE_5__.StoreSchema),\n/* harmony export */   StoreSideEffects: () => (/* reexport safe */ _lib_StoreSideEffects_mjs__WEBPACK_IMPORTED_MODULE_6__.StoreSideEffects),\n/* harmony export */   assertIdType: () => (/* reexport safe */ _lib_RecordType_mjs__WEBPACK_IMPORTED_MODULE_1__.assertIdType),\n/* harmony export */   createComputedCache: () => (/* reexport safe */ _lib_Store_mjs__WEBPACK_IMPORTED_MODULE_3__.createComputedCache),\n/* harmony export */   createEmptyRecordsDiff: () => (/* reexport safe */ _lib_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_2__.createEmptyRecordsDiff),\n/* harmony export */   createMigrationIds: () => (/* reexport safe */ _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_8__.createMigrationIds),\n/* harmony export */   createMigrationSequence: () => (/* reexport safe */ _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_8__.createMigrationSequence),\n/* harmony export */   createRecordMigrationSequence: () => (/* reexport safe */ _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_8__.createRecordMigrationSequence),\n/* harmony export */   createRecordType: () => (/* reexport safe */ _lib_RecordType_mjs__WEBPACK_IMPORTED_MODULE_1__.createRecordType),\n/* harmony export */   defineMigrations: () => (/* reexport safe */ _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_8__.defineMigrations),\n/* harmony export */   devFreeze: () => (/* reexport safe */ _lib_devFreeze_mjs__WEBPACK_IMPORTED_MODULE_7__.devFreeze),\n/* harmony export */   isRecordsDiffEmpty: () => (/* reexport safe */ _lib_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_2__.isRecordsDiffEmpty),\n/* harmony export */   parseMigrationId: () => (/* reexport safe */ _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_8__.parseMigrationId),\n/* harmony export */   reverseRecordsDiff: () => (/* reexport safe */ _lib_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_2__.reverseRecordsDiff),\n/* harmony export */   squashRecordDiffs: () => (/* reexport safe */ _lib_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_2__.squashRecordDiffs),\n/* harmony export */   squashRecordDiffsMutable: () => (/* reexport safe */ _lib_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_2__.squashRecordDiffsMutable)\n/* harmony export */ });\n/* harmony import */ var _lib_IncrementalSetConstructor_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/IncrementalSetConstructor.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/IncrementalSetConstructor.mjs\");\n/* harmony import */ var _lib_RecordType_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/RecordType.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordType.mjs\");\n/* harmony import */ var _lib_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/RecordsDiff.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordsDiff.mjs\");\n/* harmony import */ var _lib_Store_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/Store.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/Store.mjs\");\n/* harmony import */ var _lib_StoreQueries_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/StoreQueries.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreQueries.mjs\");\n/* harmony import */ var _lib_StoreSchema_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/StoreSchema.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSchema.mjs\");\n/* harmony import */ var _lib_StoreSideEffects_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/StoreSideEffects.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSideEffects.mjs\");\n/* harmony import */ var _lib_devFreeze_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/devFreeze.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/devFreeze.mjs\");\n/* harmony import */ var _lib_migrate_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/migrate.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/migrate.mjs\");\n\n\n\n\n\n\n\n\n\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWdGO0FBQ0U7QUFPbkQ7QUFJTjtBQUM2QjtBQUNGO0FBR2hCO0FBQ1k7QUFRckI7QUF1QnpCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9pbmRleC5tanM/ZGRiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmNyZW1lbnRhbFNldENvbnN0cnVjdG9yIH0gZnJvbSBcIi4vbGliL0luY3JlbWVudGFsU2V0Q29uc3RydWN0b3IubWpzXCI7XG5pbXBvcnQgeyBSZWNvcmRUeXBlLCBhc3NlcnRJZFR5cGUsIGNyZWF0ZVJlY29yZFR5cGUgfSBmcm9tIFwiLi9saWIvUmVjb3JkVHlwZS5tanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZUVtcHR5UmVjb3Jkc0RpZmYsXG4gIGlzUmVjb3Jkc0RpZmZFbXB0eSxcbiAgcmV2ZXJzZVJlY29yZHNEaWZmLFxuICBzcXVhc2hSZWNvcmREaWZmcyxcbiAgc3F1YXNoUmVjb3JkRGlmZnNNdXRhYmxlXG59IGZyb20gXCIuL2xpYi9SZWNvcmRzRGlmZi5tanNcIjtcbmltcG9ydCB7XG4gIFN0b3JlLFxuICBjcmVhdGVDb21wdXRlZENhY2hlXG59IGZyb20gXCIuL2xpYi9TdG9yZS5tanNcIjtcbmltcG9ydCB7IFN0b3JlUXVlcmllcyB9IGZyb20gXCIuL2xpYi9TdG9yZVF1ZXJpZXMubWpzXCI7XG5pbXBvcnQgeyBTdG9yZVNjaGVtYSB9IGZyb20gXCIuL2xpYi9TdG9yZVNjaGVtYS5tanNcIjtcbmltcG9ydCB7XG4gIFN0b3JlU2lkZUVmZmVjdHNcbn0gZnJvbSBcIi4vbGliL1N0b3JlU2lkZUVmZmVjdHMubWpzXCI7XG5pbXBvcnQgeyBkZXZGcmVlemUgfSBmcm9tIFwiLi9saWIvZGV2RnJlZXplLm1qc1wiO1xuaW1wb3J0IHtcbiAgTWlncmF0aW9uRmFpbHVyZVJlYXNvbixcbiAgY3JlYXRlTWlncmF0aW9uSWRzLFxuICBjcmVhdGVNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2UsXG4gIGRlZmluZU1pZ3JhdGlvbnMsXG4gIHBhcnNlTWlncmF0aW9uSWRcbn0gZnJvbSBcIi4vbGliL21pZ3JhdGUubWpzXCI7XG5leHBvcnQge1xuICBJbmNyZW1lbnRhbFNldENvbnN0cnVjdG9yLFxuICBNaWdyYXRpb25GYWlsdXJlUmVhc29uLFxuICBSZWNvcmRUeXBlLFxuICBTdG9yZSxcbiAgU3RvcmVRdWVyaWVzLFxuICBTdG9yZVNjaGVtYSxcbiAgU3RvcmVTaWRlRWZmZWN0cyxcbiAgYXNzZXJ0SWRUeXBlLFxuICBjcmVhdGVDb21wdXRlZENhY2hlLFxuICBjcmVhdGVFbXB0eVJlY29yZHNEaWZmLFxuICBjcmVhdGVNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZU1pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlUmVjb3JkVHlwZSxcbiAgZGVmaW5lTWlncmF0aW9ucyxcbiAgZGV2RnJlZXplLFxuICBpc1JlY29yZHNEaWZmRW1wdHksXG4gIHBhcnNlTWlncmF0aW9uSWQsXG4gIHJldmVyc2VSZWNvcmRzRGlmZixcbiAgc3F1YXNoUmVjb3JkRGlmZnMsXG4gIHNxdWFzaFJlY29yZERpZmZzTXV0YWJsZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/IncrementalSetConstructor.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/IncrementalSetConstructor.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IncrementalSetConstructor: () => (/* binding */ IncrementalSetConstructor)\n/* harmony export */ });\nclass IncrementalSetConstructor {\n  constructor(previousValue) {\n    this.previousValue = previousValue;\n  }\n  /**\n   * The next value of the set.\n   *\n   * @internal\n   */\n  nextValue;\n  /**\n   * The diff of the set.\n   *\n   * @internal\n   */\n  diff;\n  /**\n   * Get the next value of the set.\n   *\n   * @public\n   */\n  get() {\n    const numRemoved = this.diff?.removed?.size ?? 0;\n    const numAdded = this.diff?.added?.size ?? 0;\n    if (numRemoved === 0 && numAdded === 0) {\n      return void 0;\n    }\n    return { value: this.nextValue, diff: this.diff };\n  }\n  /**\n   * Add an item to the set.\n   *\n   * @param item - The item to add.\n   * @param wasAlreadyPresent - Whether the item was already present in the set.\n   * @internal\n   */\n  _add(item, wasAlreadyPresent) {\n    this.nextValue ??= new Set(this.previousValue);\n    this.nextValue.add(item);\n    this.diff ??= {};\n    if (wasAlreadyPresent) {\n      this.diff.removed?.delete(item);\n    } else {\n      this.diff.added ??= /* @__PURE__ */ new Set();\n      this.diff.added.add(item);\n    }\n  }\n  /**\n   * Add an item to the set.\n   *\n   * @param item - The item to add.\n   * @public\n   */\n  add(item) {\n    const wasAlreadyPresent = this.previousValue.has(item);\n    if (wasAlreadyPresent) {\n      const wasRemoved = this.diff?.removed?.has(item);\n      if (!wasRemoved)\n        return;\n      return this._add(item, wasAlreadyPresent);\n    }\n    const isCurrentlyPresent = this.nextValue?.has(item);\n    if (isCurrentlyPresent)\n      return;\n    this._add(item, wasAlreadyPresent);\n  }\n  /**\n   * Remove an item from the set.\n   *\n   * @param item - The item to remove.\n   * @param wasAlreadyPresent - Whether the item was already present in the set.\n   * @internal\n   */\n  _remove(item, wasAlreadyPresent) {\n    this.nextValue ??= new Set(this.previousValue);\n    this.nextValue.delete(item);\n    this.diff ??= {};\n    if (wasAlreadyPresent) {\n      this.diff.removed ??= /* @__PURE__ */ new Set();\n      this.diff.removed.add(item);\n    } else {\n      this.diff.added?.delete(item);\n    }\n  }\n  /**\n   * Remove an item from the set.\n   *\n   * @param item - The item to remove.\n   * @public\n   */\n  remove(item) {\n    const wasAlreadyPresent = this.previousValue.has(item);\n    if (!wasAlreadyPresent) {\n      const wasAdded = this.diff?.added?.has(item);\n      if (!wasAdded)\n        return;\n      return this._remove(item, wasAlreadyPresent);\n    }\n    const hasAlreadyBeenRemoved = this.diff?.removed?.has(item);\n    if (hasAlreadyBeenRemoved)\n      return;\n    this._remove(item, wasAlreadyPresent);\n  }\n}\n\n//# sourceMappingURL=IncrementalSetConstructor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvSW5jcmVtZW50YWxTZXRDb25zdHJ1Y3Rvci5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RvcmUvZGlzdC1lc20vbGliL0luY3JlbWVudGFsU2V0Q29uc3RydWN0b3IubWpzP2Y2N2EiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgSW5jcmVtZW50YWxTZXRDb25zdHJ1Y3RvciB7XG4gIGNvbnN0cnVjdG9yKHByZXZpb3VzVmFsdWUpIHtcbiAgICB0aGlzLnByZXZpb3VzVmFsdWUgPSBwcmV2aW91c1ZhbHVlO1xuICB9XG4gIC8qKlxuICAgKiBUaGUgbmV4dCB2YWx1ZSBvZiB0aGUgc2V0LlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG5leHRWYWx1ZTtcbiAgLyoqXG4gICAqIFRoZSBkaWZmIG9mIHRoZSBzZXQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZGlmZjtcbiAgLyoqXG4gICAqIEdldCB0aGUgbmV4dCB2YWx1ZSBvZiB0aGUgc2V0LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXQoKSB7XG4gICAgY29uc3QgbnVtUmVtb3ZlZCA9IHRoaXMuZGlmZj8ucmVtb3ZlZD8uc2l6ZSA/PyAwO1xuICAgIGNvbnN0IG51bUFkZGVkID0gdGhpcy5kaWZmPy5hZGRlZD8uc2l6ZSA/PyAwO1xuICAgIGlmIChudW1SZW1vdmVkID09PSAwICYmIG51bUFkZGVkID09PSAwKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICByZXR1cm4geyB2YWx1ZTogdGhpcy5uZXh0VmFsdWUsIGRpZmY6IHRoaXMuZGlmZiB9O1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYW4gaXRlbSB0byB0aGUgc2V0LlxuICAgKlxuICAgKiBAcGFyYW0gaXRlbSAtIFRoZSBpdGVtIHRvIGFkZC5cbiAgICogQHBhcmFtIHdhc0FscmVhZHlQcmVzZW50IC0gV2hldGhlciB0aGUgaXRlbSB3YXMgYWxyZWFkeSBwcmVzZW50IGluIHRoZSBzZXQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX2FkZChpdGVtLCB3YXNBbHJlYWR5UHJlc2VudCkge1xuICAgIHRoaXMubmV4dFZhbHVlID8/PSBuZXcgU2V0KHRoaXMucHJldmlvdXNWYWx1ZSk7XG4gICAgdGhpcy5uZXh0VmFsdWUuYWRkKGl0ZW0pO1xuICAgIHRoaXMuZGlmZiA/Pz0ge307XG4gICAgaWYgKHdhc0FscmVhZHlQcmVzZW50KSB7XG4gICAgICB0aGlzLmRpZmYucmVtb3ZlZD8uZGVsZXRlKGl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpZmYuYWRkZWQgPz89IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICB0aGlzLmRpZmYuYWRkZWQuYWRkKGl0ZW0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQWRkIGFuIGl0ZW0gdG8gdGhlIHNldC5cbiAgICpcbiAgICogQHBhcmFtIGl0ZW0gLSBUaGUgaXRlbSB0byBhZGQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFkZChpdGVtKSB7XG4gICAgY29uc3Qgd2FzQWxyZWFkeVByZXNlbnQgPSB0aGlzLnByZXZpb3VzVmFsdWUuaGFzKGl0ZW0pO1xuICAgIGlmICh3YXNBbHJlYWR5UHJlc2VudCkge1xuICAgICAgY29uc3Qgd2FzUmVtb3ZlZCA9IHRoaXMuZGlmZj8ucmVtb3ZlZD8uaGFzKGl0ZW0pO1xuICAgICAgaWYgKCF3YXNSZW1vdmVkKVxuICAgICAgICByZXR1cm47XG4gICAgICByZXR1cm4gdGhpcy5fYWRkKGl0ZW0sIHdhc0FscmVhZHlQcmVzZW50KTtcbiAgICB9XG4gICAgY29uc3QgaXNDdXJyZW50bHlQcmVzZW50ID0gdGhpcy5uZXh0VmFsdWU/LmhhcyhpdGVtKTtcbiAgICBpZiAoaXNDdXJyZW50bHlQcmVzZW50KVxuICAgICAgcmV0dXJuO1xuICAgIHRoaXMuX2FkZChpdGVtLCB3YXNBbHJlYWR5UHJlc2VudCk7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBpdGVtIGZyb20gdGhlIHNldC5cbiAgICpcbiAgICogQHBhcmFtIGl0ZW0gLSBUaGUgaXRlbSB0byByZW1vdmUuXG4gICAqIEBwYXJhbSB3YXNBbHJlYWR5UHJlc2VudCAtIFdoZXRoZXIgdGhlIGl0ZW0gd2FzIGFscmVhZHkgcHJlc2VudCBpbiB0aGUgc2V0LlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9yZW1vdmUoaXRlbSwgd2FzQWxyZWFkeVByZXNlbnQpIHtcbiAgICB0aGlzLm5leHRWYWx1ZSA/Pz0gbmV3IFNldCh0aGlzLnByZXZpb3VzVmFsdWUpO1xuICAgIHRoaXMubmV4dFZhbHVlLmRlbGV0ZShpdGVtKTtcbiAgICB0aGlzLmRpZmYgPz89IHt9O1xuICAgIGlmICh3YXNBbHJlYWR5UHJlc2VudCkge1xuICAgICAgdGhpcy5kaWZmLnJlbW92ZWQgPz89IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICB0aGlzLmRpZmYucmVtb3ZlZC5hZGQoaXRlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlmZi5hZGRlZD8uZGVsZXRlKGl0ZW0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGFuIGl0ZW0gZnJvbSB0aGUgc2V0LlxuICAgKlxuICAgKiBAcGFyYW0gaXRlbSAtIFRoZSBpdGVtIHRvIHJlbW92ZS5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVtb3ZlKGl0ZW0pIHtcbiAgICBjb25zdCB3YXNBbHJlYWR5UHJlc2VudCA9IHRoaXMucHJldmlvdXNWYWx1ZS5oYXMoaXRlbSk7XG4gICAgaWYgKCF3YXNBbHJlYWR5UHJlc2VudCkge1xuICAgICAgY29uc3Qgd2FzQWRkZWQgPSB0aGlzLmRpZmY/LmFkZGVkPy5oYXMoaXRlbSk7XG4gICAgICBpZiAoIXdhc0FkZGVkKVxuICAgICAgICByZXR1cm47XG4gICAgICByZXR1cm4gdGhpcy5fcmVtb3ZlKGl0ZW0sIHdhc0FscmVhZHlQcmVzZW50KTtcbiAgICB9XG4gICAgY29uc3QgaGFzQWxyZWFkeUJlZW5SZW1vdmVkID0gdGhpcy5kaWZmPy5yZW1vdmVkPy5oYXMoaXRlbSk7XG4gICAgaWYgKGhhc0FscmVhZHlCZWVuUmVtb3ZlZClcbiAgICAgIHJldHVybjtcbiAgICB0aGlzLl9yZW1vdmUoaXRlbSwgd2FzQWxyZWFkeVByZXNlbnQpO1xuICB9XG59XG5leHBvcnQge1xuICBJbmNyZW1lbnRhbFNldENvbnN0cnVjdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5jcmVtZW50YWxTZXRDb25zdHJ1Y3Rvci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/IncrementalSetConstructor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordType.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/RecordType.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RecordType: () => (/* binding */ RecordType),\n/* harmony export */   assertIdType: () => (/* binding */ assertIdType),\n/* harmony export */   createRecordType: () => (/* binding */ createRecordType)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nanoid */ \"(ssr)/./node_modules/@tldraw/store/node_modules/nanoid/index.js\");\n\n\nclass RecordType {\n  constructor(typeName, config) {\n    this.typeName = typeName;\n    this.createDefaultProperties = config.createDefaultProperties;\n    this.validator = config.validator ?? { validate: (r) => r };\n    this.scope = config.scope ?? \"document\";\n    this.ephemeralKeys = config.ephemeralKeys;\n    const ephemeralKeySet = /* @__PURE__ */ new Set();\n    if (config.ephemeralKeys) {\n      for (const [key, isEphemeral] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapEntries)(config.ephemeralKeys)) {\n        if (isEphemeral)\n          ephemeralKeySet.add(key);\n      }\n    }\n    this.ephemeralKeySet = ephemeralKeySet;\n  }\n  createDefaultProperties;\n  validator;\n  ephemeralKeys;\n  ephemeralKeySet;\n  scope;\n  /**\n   * Create a new record of this type.\n   *\n   * @param properties - The properties of the record.\n   * @returns The new record.\n   */\n  create(properties) {\n    const result = { ...this.createDefaultProperties(), id: this.createId() };\n    for (const [k, v] of Object.entries(properties)) {\n      if (v !== void 0) {\n        result[k] = v;\n      }\n    }\n    result.typeName = this.typeName;\n    return result;\n  }\n  /**\n   * Clone a record of this type.\n   *\n   * @param record - The record to clone.\n   * @returns The cloned record.\n   * @public\n   */\n  clone(record) {\n    return { ...(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(record), id: this.createId() };\n  }\n  /**\n   * Create a new ID for this record type.\n   *\n   * @example\n   *\n   * ```ts\n   * const id = recordType.createId()\n   * ```\n   *\n   * @returns The new ID.\n   * @public\n   */\n  createId(customUniquePart) {\n    return this.typeName + \":\" + (customUniquePart ?? (0,nanoid__WEBPACK_IMPORTED_MODULE_1__.nanoid)());\n  }\n  /**\n   * Create a new ID for this record type based on the given ID.\n   *\n   * @example\n   *\n   * ```ts\n   * const id = recordType.createCustomId('myId')\n   * ```\n   *\n   * @deprecated - Use `createId` instead.\n   * @param id - The ID to base the new ID on.\n   * @returns The new ID.\n   */\n  createCustomId(id) {\n    return this.typeName + \":\" + id;\n  }\n  /**\n   * Takes an id like `user:123` and returns the part after the colon `123`\n   *\n   * @param id - The id\n   * @returns\n   */\n  parseId(id) {\n    if (!this.isId(id)) {\n      throw new Error(`ID \"${id}\" is not a valid ID for type \"${this.typeName}\"`);\n    }\n    return id.slice(this.typeName.length + 1);\n  }\n  /**\n   * Check whether a record is an instance of this record type.\n   *\n   * @example\n   *\n   * ```ts\n   * const result = recordType.isInstance(someRecord)\n   * ```\n   *\n   * @param record - The record to check.\n   * @returns Whether the record is an instance of this record type.\n   */\n  isInstance = (record) => {\n    return record?.typeName === this.typeName;\n  };\n  /**\n   * Check whether an id is an id of this type.\n   *\n   * @example\n   *\n   * ```ts\n   * const result = recordType.isIn('someId')\n   * ```\n   *\n   * @param id - The id to check.\n   * @returns Whether the id is an id of this type.\n   */\n  isId(id) {\n    if (!id)\n      return false;\n    for (let i = 0; i < this.typeName.length; i++) {\n      if (id[i] !== this.typeName[i])\n        return false;\n    }\n    return id[this.typeName.length] === \":\";\n  }\n  /**\n   * Create a new RecordType that has the same type name as this RecordType and includes the given\n   * default properties.\n   *\n   * @example\n   *\n   * ```ts\n   * const authorType = createRecordType('author', () => ({ living: true }))\n   * const deadAuthorType = authorType.withDefaultProperties({ living: false })\n   * ```\n   *\n   * @param fn - A function that returns the default properties of the new RecordType.\n   * @returns The new RecordType.\n   */\n  withDefaultProperties(createDefaultProperties) {\n    return new RecordType(this.typeName, {\n      createDefaultProperties,\n      validator: this.validator,\n      scope: this.scope,\n      ephemeralKeys: this.ephemeralKeys\n    });\n  }\n  /**\n   * Check that the passed in record passes the validations for this type. Returns its input\n   * correctly typed if it does, but throws an error otherwise.\n   */\n  validate(record, recordBefore) {\n    if (recordBefore && this.validator.validateUsingKnownGoodVersion) {\n      return this.validator.validateUsingKnownGoodVersion(recordBefore, record);\n    }\n    return this.validator.validate(record);\n  }\n}\nfunction createRecordType(typeName, config) {\n  return new RecordType(typeName, {\n    createDefaultProperties: () => ({}),\n    validator: config.validator,\n    scope: config.scope,\n    ephemeralKeys: config.ephemeralKeys\n  });\n}\nfunction assertIdType(id, type) {\n  if (!id || !type.isId(id)) {\n    throw new Error(`string ${JSON.stringify(id)} is not a valid ${type.typeName} id`);\n  }\n}\n\n//# sourceMappingURL=RecordType.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvUmVjb3JkVHlwZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0U7QUFDbEM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsK0RBQWdCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsR0FBRyw4REFBZTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELDhDQUFNO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLEdBQUcsZ0NBQWdDLGNBQWM7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBCQUEwQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsY0FBYztBQUMxRSwrREFBK0QsZUFBZTtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixvQkFBb0IsaUJBQWlCLGVBQWU7QUFDbEY7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvUmVjb3JkVHlwZS5tanM/NGFhYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBvYmplY3RNYXBFbnRyaWVzLCBzdHJ1Y3R1cmVkQ2xvbmUgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSBcIm5hbm9pZFwiO1xuY2xhc3MgUmVjb3JkVHlwZSB7XG4gIGNvbnN0cnVjdG9yKHR5cGVOYW1lLCBjb25maWcpIHtcbiAgICB0aGlzLnR5cGVOYW1lID0gdHlwZU5hbWU7XG4gICAgdGhpcy5jcmVhdGVEZWZhdWx0UHJvcGVydGllcyA9IGNvbmZpZy5jcmVhdGVEZWZhdWx0UHJvcGVydGllcztcbiAgICB0aGlzLnZhbGlkYXRvciA9IGNvbmZpZy52YWxpZGF0b3IgPz8geyB2YWxpZGF0ZTogKHIpID0+IHIgfTtcbiAgICB0aGlzLnNjb3BlID0gY29uZmlnLnNjb3BlID8/IFwiZG9jdW1lbnRcIjtcbiAgICB0aGlzLmVwaGVtZXJhbEtleXMgPSBjb25maWcuZXBoZW1lcmFsS2V5cztcbiAgICBjb25zdCBlcGhlbWVyYWxLZXlTZXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIGlmIChjb25maWcuZXBoZW1lcmFsS2V5cykge1xuICAgICAgZm9yIChjb25zdCBba2V5LCBpc0VwaGVtZXJhbF0gb2Ygb2JqZWN0TWFwRW50cmllcyhjb25maWcuZXBoZW1lcmFsS2V5cykpIHtcbiAgICAgICAgaWYgKGlzRXBoZW1lcmFsKVxuICAgICAgICAgIGVwaGVtZXJhbEtleVNldC5hZGQoa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5lcGhlbWVyYWxLZXlTZXQgPSBlcGhlbWVyYWxLZXlTZXQ7XG4gIH1cbiAgY3JlYXRlRGVmYXVsdFByb3BlcnRpZXM7XG4gIHZhbGlkYXRvcjtcbiAgZXBoZW1lcmFsS2V5cztcbiAgZXBoZW1lcmFsS2V5U2V0O1xuICBzY29wZTtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyByZWNvcmQgb2YgdGhpcyB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0gcHJvcGVydGllcyAtIFRoZSBwcm9wZXJ0aWVzIG9mIHRoZSByZWNvcmQuXG4gICAqIEByZXR1cm5zIFRoZSBuZXcgcmVjb3JkLlxuICAgKi9cbiAgY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7IC4uLnRoaXMuY3JlYXRlRGVmYXVsdFByb3BlcnRpZXMoKSwgaWQ6IHRoaXMuY3JlYXRlSWQoKSB9O1xuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpKSB7XG4gICAgICBpZiAodiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJlc3VsdFtrXSA9IHY7XG4gICAgICB9XG4gICAgfVxuICAgIHJlc3VsdC50eXBlTmFtZSA9IHRoaXMudHlwZU5hbWU7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQ2xvbmUgYSByZWNvcmQgb2YgdGhpcyB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0gcmVjb3JkIC0gVGhlIHJlY29yZCB0byBjbG9uZS5cbiAgICogQHJldHVybnMgVGhlIGNsb25lZCByZWNvcmQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNsb25lKHJlY29yZCkge1xuICAgIHJldHVybiB7IC4uLnN0cnVjdHVyZWRDbG9uZShyZWNvcmQpLCBpZDogdGhpcy5jcmVhdGVJZCgpIH07XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBJRCBmb3IgdGhpcyByZWNvcmQgdHlwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBgdHNcbiAgICogY29uc3QgaWQgPSByZWNvcmRUeXBlLmNyZWF0ZUlkKClcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBuZXcgSUQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNyZWF0ZUlkKGN1c3RvbVVuaXF1ZVBhcnQpIHtcbiAgICByZXR1cm4gdGhpcy50eXBlTmFtZSArIFwiOlwiICsgKGN1c3RvbVVuaXF1ZVBhcnQgPz8gbmFub2lkKCkpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgSUQgZm9yIHRoaXMgcmVjb3JkIHR5cGUgYmFzZWQgb24gdGhlIGdpdmVuIElELlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBjb25zdCBpZCA9IHJlY29yZFR5cGUuY3JlYXRlQ3VzdG9tSWQoJ215SWQnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgLSBVc2UgYGNyZWF0ZUlkYCBpbnN0ZWFkLlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgSUQgdG8gYmFzZSB0aGUgbmV3IElEIG9uLlxuICAgKiBAcmV0dXJucyBUaGUgbmV3IElELlxuICAgKi9cbiAgY3JlYXRlQ3VzdG9tSWQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy50eXBlTmFtZSArIFwiOlwiICsgaWQ7XG4gIH1cbiAgLyoqXG4gICAqIFRha2VzIGFuIGlkIGxpa2UgYHVzZXI6MTIzYCBhbmQgcmV0dXJucyB0aGUgcGFydCBhZnRlciB0aGUgY29sb24gYDEyM2BcbiAgICpcbiAgICogQHBhcmFtIGlkIC0gVGhlIGlkXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBwYXJzZUlkKGlkKSB7XG4gICAgaWYgKCF0aGlzLmlzSWQoaWQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYElEIFwiJHtpZH1cIiBpcyBub3QgYSB2YWxpZCBJRCBmb3IgdHlwZSBcIiR7dGhpcy50eXBlTmFtZX1cImApO1xuICAgIH1cbiAgICByZXR1cm4gaWQuc2xpY2UodGhpcy50eXBlTmFtZS5sZW5ndGggKyAxKTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgd2hldGhlciBhIHJlY29yZCBpcyBhbiBpbnN0YW5jZSBvZiB0aGlzIHJlY29yZCB0eXBlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBjb25zdCByZXN1bHQgPSByZWNvcmRUeXBlLmlzSW5zdGFuY2Uoc29tZVJlY29yZClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSByZWNvcmQgLSBUaGUgcmVjb3JkIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyBXaGV0aGVyIHRoZSByZWNvcmQgaXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyByZWNvcmQgdHlwZS5cbiAgICovXG4gIGlzSW5zdGFuY2UgPSAocmVjb3JkKSA9PiB7XG4gICAgcmV0dXJuIHJlY29yZD8udHlwZU5hbWUgPT09IHRoaXMudHlwZU5hbWU7XG4gIH07XG4gIC8qKlxuICAgKiBDaGVjayB3aGV0aGVyIGFuIGlkIGlzIGFuIGlkIG9mIHRoaXMgdHlwZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBgdHNcbiAgICogY29uc3QgcmVzdWx0ID0gcmVjb3JkVHlwZS5pc0luKCdzb21lSWQnKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGlkIC0gVGhlIGlkIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyBXaGV0aGVyIHRoZSBpZCBpcyBhbiBpZCBvZiB0aGlzIHR5cGUuXG4gICAqL1xuICBpc0lkKGlkKSB7XG4gICAgaWYgKCFpZClcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHlwZU5hbWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpZFtpXSAhPT0gdGhpcy50eXBlTmFtZVtpXSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gaWRbdGhpcy50eXBlTmFtZS5sZW5ndGhdID09PSBcIjpcIjtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFJlY29yZFR5cGUgdGhhdCBoYXMgdGhlIHNhbWUgdHlwZSBuYW1lIGFzIHRoaXMgUmVjb3JkVHlwZSBhbmQgaW5jbHVkZXMgdGhlIGdpdmVuXG4gICAqIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBgdHNcbiAgICogY29uc3QgYXV0aG9yVHlwZSA9IGNyZWF0ZVJlY29yZFR5cGUoJ2F1dGhvcicsICgpID0+ICh7IGxpdmluZzogdHJ1ZSB9KSlcbiAgICogY29uc3QgZGVhZEF1dGhvclR5cGUgPSBhdXRob3JUeXBlLndpdGhEZWZhdWx0UHJvcGVydGllcyh7IGxpdmluZzogZmFsc2UgfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBmbiAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBkZWZhdWx0IHByb3BlcnRpZXMgb2YgdGhlIG5ldyBSZWNvcmRUeXBlLlxuICAgKiBAcmV0dXJucyBUaGUgbmV3IFJlY29yZFR5cGUuXG4gICAqL1xuICB3aXRoRGVmYXVsdFByb3BlcnRpZXMoY3JlYXRlRGVmYXVsdFByb3BlcnRpZXMpIHtcbiAgICByZXR1cm4gbmV3IFJlY29yZFR5cGUodGhpcy50eXBlTmFtZSwge1xuICAgICAgY3JlYXRlRGVmYXVsdFByb3BlcnRpZXMsXG4gICAgICB2YWxpZGF0b3I6IHRoaXMudmFsaWRhdG9yLFxuICAgICAgc2NvcGU6IHRoaXMuc2NvcGUsXG4gICAgICBlcGhlbWVyYWxLZXlzOiB0aGlzLmVwaGVtZXJhbEtleXNcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgdGhhdCB0aGUgcGFzc2VkIGluIHJlY29yZCBwYXNzZXMgdGhlIHZhbGlkYXRpb25zIGZvciB0aGlzIHR5cGUuIFJldHVybnMgaXRzIGlucHV0XG4gICAqIGNvcnJlY3RseSB0eXBlZCBpZiBpdCBkb2VzLCBidXQgdGhyb3dzIGFuIGVycm9yIG90aGVyd2lzZS5cbiAgICovXG4gIHZhbGlkYXRlKHJlY29yZCwgcmVjb3JkQmVmb3JlKSB7XG4gICAgaWYgKHJlY29yZEJlZm9yZSAmJiB0aGlzLnZhbGlkYXRvci52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbikge1xuICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdG9yLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uKHJlY29yZEJlZm9yZSwgcmVjb3JkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmFsaWRhdG9yLnZhbGlkYXRlKHJlY29yZCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlY29yZFR5cGUodHlwZU5hbWUsIGNvbmZpZykge1xuICByZXR1cm4gbmV3IFJlY29yZFR5cGUodHlwZU5hbWUsIHtcbiAgICBjcmVhdGVEZWZhdWx0UHJvcGVydGllczogKCkgPT4gKHt9KSxcbiAgICB2YWxpZGF0b3I6IGNvbmZpZy52YWxpZGF0b3IsXG4gICAgc2NvcGU6IGNvbmZpZy5zY29wZSxcbiAgICBlcGhlbWVyYWxLZXlzOiBjb25maWcuZXBoZW1lcmFsS2V5c1xuICB9KTtcbn1cbmZ1bmN0aW9uIGFzc2VydElkVHlwZShpZCwgdHlwZSkge1xuICBpZiAoIWlkIHx8ICF0eXBlLmlzSWQoaWQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBzdHJpbmcgJHtKU09OLnN0cmluZ2lmeShpZCl9IGlzIG5vdCBhIHZhbGlkICR7dHlwZS50eXBlTmFtZX0gaWRgKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgUmVjb3JkVHlwZSxcbiAgYXNzZXJ0SWRUeXBlLFxuICBjcmVhdGVSZWNvcmRUeXBlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVjb3JkVHlwZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordType.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordsDiff.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/RecordsDiff.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEmptyRecordsDiff: () => (/* binding */ createEmptyRecordsDiff),\n/* harmony export */   isRecordsDiffEmpty: () => (/* binding */ isRecordsDiffEmpty),\n/* harmony export */   reverseRecordsDiff: () => (/* binding */ reverseRecordsDiff),\n/* harmony export */   squashRecordDiffs: () => (/* binding */ squashRecordDiffs),\n/* harmony export */   squashRecordDiffsMutable: () => (/* binding */ squashRecordDiffsMutable)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nfunction createEmptyRecordsDiff() {\n  return { added: {}, updated: {}, removed: {} };\n}\nfunction reverseRecordsDiff(diff) {\n  const result = { added: diff.removed, removed: diff.added, updated: {} };\n  for (const [from, to] of Object.values(diff.updated)) {\n    result.updated[from.id] = [to, from];\n  }\n  return result;\n}\nfunction isRecordsDiffEmpty(diff) {\n  return Object.keys(diff.added).length === 0 && Object.keys(diff.updated).length === 0 && Object.keys(diff.removed).length === 0;\n}\nfunction squashRecordDiffs(diffs) {\n  const result = { added: {}, removed: {}, updated: {} };\n  squashRecordDiffsMutable(result, diffs);\n  return result;\n}\nfunction squashRecordDiffsMutable(target, diffs) {\n  for (const diff of diffs) {\n    for (const [id, value] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapEntries)(diff.added)) {\n      if (target.removed[id]) {\n        const original = target.removed[id];\n        delete target.removed[id];\n        if (original !== value) {\n          target.updated[id] = [original, value];\n        }\n      } else {\n        target.added[id] = value;\n      }\n    }\n    for (const [id, [_from, to]] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapEntries)(diff.updated)) {\n      if (target.added[id]) {\n        target.added[id] = to;\n        delete target.updated[id];\n        delete target.removed[id];\n        continue;\n      }\n      if (target.updated[id]) {\n        target.updated[id] = [target.updated[id][0], to];\n        delete target.removed[id];\n        continue;\n      }\n      target.updated[id] = diff.updated[id];\n      delete target.removed[id];\n    }\n    for (const [id, value] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapEntries)(diff.removed)) {\n      if (target.added[id]) {\n        delete target.added[id];\n      } else if (target.updated[id]) {\n        target.removed[id] = target.updated[id][0];\n        delete target.updated[id];\n      } else {\n        target.removed[id] = value;\n      }\n    }\n  }\n}\n\n//# sourceMappingURL=RecordsDiff.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvUmVjb3Jkc0RpZmYubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpRDtBQUNqRDtBQUNBLFdBQVcsU0FBUyxhQUFhO0FBQ2pDO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFNBQVMsYUFBYTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtEQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLCtEQUFnQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtEQUFnQjtBQUM5QztBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9FO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvUmVjb3Jkc0RpZmYubWpzPzY0YmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb2JqZWN0TWFwRW50cmllcyB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5mdW5jdGlvbiBjcmVhdGVFbXB0eVJlY29yZHNEaWZmKCkge1xuICByZXR1cm4geyBhZGRlZDoge30sIHVwZGF0ZWQ6IHt9LCByZW1vdmVkOiB7fSB9O1xufVxuZnVuY3Rpb24gcmV2ZXJzZVJlY29yZHNEaWZmKGRpZmYpIHtcbiAgY29uc3QgcmVzdWx0ID0geyBhZGRlZDogZGlmZi5yZW1vdmVkLCByZW1vdmVkOiBkaWZmLmFkZGVkLCB1cGRhdGVkOiB7fSB9O1xuICBmb3IgKGNvbnN0IFtmcm9tLCB0b10gb2YgT2JqZWN0LnZhbHVlcyhkaWZmLnVwZGF0ZWQpKSB7XG4gICAgcmVzdWx0LnVwZGF0ZWRbZnJvbS5pZF0gPSBbdG8sIGZyb21dO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBpc1JlY29yZHNEaWZmRW1wdHkoZGlmZikge1xuICByZXR1cm4gT2JqZWN0LmtleXMoZGlmZi5hZGRlZCkubGVuZ3RoID09PSAwICYmIE9iamVjdC5rZXlzKGRpZmYudXBkYXRlZCkubGVuZ3RoID09PSAwICYmIE9iamVjdC5rZXlzKGRpZmYucmVtb3ZlZCkubGVuZ3RoID09PSAwO1xufVxuZnVuY3Rpb24gc3F1YXNoUmVjb3JkRGlmZnMoZGlmZnMpIHtcbiAgY29uc3QgcmVzdWx0ID0geyBhZGRlZDoge30sIHJlbW92ZWQ6IHt9LCB1cGRhdGVkOiB7fSB9O1xuICBzcXVhc2hSZWNvcmREaWZmc011dGFibGUocmVzdWx0LCBkaWZmcyk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBzcXVhc2hSZWNvcmREaWZmc011dGFibGUodGFyZ2V0LCBkaWZmcykge1xuICBmb3IgKGNvbnN0IGRpZmYgb2YgZGlmZnMpIHtcbiAgICBmb3IgKGNvbnN0IFtpZCwgdmFsdWVdIG9mIG9iamVjdE1hcEVudHJpZXMoZGlmZi5hZGRlZCkpIHtcbiAgICAgIGlmICh0YXJnZXQucmVtb3ZlZFtpZF0pIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSB0YXJnZXQucmVtb3ZlZFtpZF07XG4gICAgICAgIGRlbGV0ZSB0YXJnZXQucmVtb3ZlZFtpZF07XG4gICAgICAgIGlmIChvcmlnaW5hbCAhPT0gdmFsdWUpIHtcbiAgICAgICAgICB0YXJnZXQudXBkYXRlZFtpZF0gPSBbb3JpZ2luYWwsIHZhbHVlXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0LmFkZGVkW2lkXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtpZCwgW19mcm9tLCB0b11dIG9mIG9iamVjdE1hcEVudHJpZXMoZGlmZi51cGRhdGVkKSkge1xuICAgICAgaWYgKHRhcmdldC5hZGRlZFtpZF0pIHtcbiAgICAgICAgdGFyZ2V0LmFkZGVkW2lkXSA9IHRvO1xuICAgICAgICBkZWxldGUgdGFyZ2V0LnVwZGF0ZWRbaWRdO1xuICAgICAgICBkZWxldGUgdGFyZ2V0LnJlbW92ZWRbaWRdO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0YXJnZXQudXBkYXRlZFtpZF0pIHtcbiAgICAgICAgdGFyZ2V0LnVwZGF0ZWRbaWRdID0gW3RhcmdldC51cGRhdGVkW2lkXVswXSwgdG9dO1xuICAgICAgICBkZWxldGUgdGFyZ2V0LnJlbW92ZWRbaWRdO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHRhcmdldC51cGRhdGVkW2lkXSA9IGRpZmYudXBkYXRlZFtpZF07XG4gICAgICBkZWxldGUgdGFyZ2V0LnJlbW92ZWRbaWRdO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtpZCwgdmFsdWVdIG9mIG9iamVjdE1hcEVudHJpZXMoZGlmZi5yZW1vdmVkKSkge1xuICAgICAgaWYgKHRhcmdldC5hZGRlZFtpZF0pIHtcbiAgICAgICAgZGVsZXRlIHRhcmdldC5hZGRlZFtpZF07XG4gICAgICB9IGVsc2UgaWYgKHRhcmdldC51cGRhdGVkW2lkXSkge1xuICAgICAgICB0YXJnZXQucmVtb3ZlZFtpZF0gPSB0YXJnZXQudXBkYXRlZFtpZF1bMF07XG4gICAgICAgIGRlbGV0ZSB0YXJnZXQudXBkYXRlZFtpZF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQucmVtb3ZlZFtpZF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmV4cG9ydCB7XG4gIGNyZWF0ZUVtcHR5UmVjb3Jkc0RpZmYsXG4gIGlzUmVjb3Jkc0RpZmZFbXB0eSxcbiAgcmV2ZXJzZVJlY29yZHNEaWZmLFxuICBzcXVhc2hSZWNvcmREaWZmcyxcbiAgc3F1YXNoUmVjb3JkRGlmZnNNdXRhYmxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVjb3Jkc0RpZmYubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordsDiff.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/Store.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/Store.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Store: () => (/* binding */ Store),\n/* harmony export */   createComputedCache: () => (/* binding */ createComputedCache)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! nanoid */ \"(ssr)/./node_modules/@tldraw/store/node_modules/nanoid/index.js\");\n/* harmony import */ var _RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RecordsDiff.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/RecordsDiff.mjs\");\n/* harmony import */ var _StoreQueries_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./StoreQueries.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreQueries.mjs\");\n/* harmony import */ var _StoreSideEffects_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./StoreSideEffects.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSideEffects.mjs\");\n/* harmony import */ var _devFreeze_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./devFreeze.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/devFreeze.mjs\");\n\n\n\n\n\n\n\nclass Store {\n  /**\n   * The random id of the store.\n   */\n  id;\n  /**\n   * An atom containing the store's atoms.\n   *\n   * @internal\n   * @readonly\n   */\n  atoms = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"store_atoms\", {});\n  /**\n   * An atom containing the store's history.\n   *\n   * @public\n   * @readonly\n   */\n  history = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"history\", 0, {\n    historyLength: 1e3\n  });\n  /**\n   * A StoreQueries instance for this store.\n   *\n   * @public\n   * @readonly\n   */\n  query = new _StoreQueries_mjs__WEBPACK_IMPORTED_MODULE_3__.StoreQueries(this.atoms, this.history);\n  /**\n   * A set containing listeners that have been added to this store.\n   *\n   * @internal\n   */\n  listeners = /* @__PURE__ */ new Set();\n  /**\n   * An array of history entries that have not yet been flushed.\n   *\n   * @internal\n   */\n  historyAccumulator = new HistoryAccumulator();\n  /**\n   * A reactor that responds to changes to the history by squashing the accumulated history and\n   * notifying listeners of the changes.\n   *\n   * @internal\n   */\n  historyReactor;\n  schema;\n  props;\n  scopedTypes;\n  sideEffects = new _StoreSideEffects_mjs__WEBPACK_IMPORTED_MODULE_4__.StoreSideEffects(this);\n  constructor(config) {\n    const { initialData, schema, id } = config;\n    this.id = id ?? (0,nanoid__WEBPACK_IMPORTED_MODULE_6__.nanoid)();\n    this.schema = schema;\n    this.props = config.props;\n    if (initialData) {\n      this.atoms.set(\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapFromEntries)(\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapEntries)(initialData).map(([id2, record]) => [\n            id2,\n            (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\n              \"atom:\" + id2,\n              (0,_devFreeze_mjs__WEBPACK_IMPORTED_MODULE_5__.devFreeze)(this.schema.validateRecord(this, record, \"initialize\", null))\n            )\n          ])\n        )\n      );\n    }\n    this.historyReactor = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.reactor)(\n      \"Store.historyReactor\",\n      () => {\n        this.history.get();\n        this._flushHistory();\n      },\n      { scheduleEffect: (cb) => (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.throttleToNextFrame)(cb) }\n    );\n    this.scopedTypes = {\n      document: new Set(\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(this.schema.types).filter((t) => t.scope === \"document\").map((t) => t.typeName)\n      ),\n      session: new Set(\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(this.schema.types).filter((t) => t.scope === \"session\").map((t) => t.typeName)\n      ),\n      presence: new Set(\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(this.schema.types).filter((t) => t.scope === \"presence\").map((t) => t.typeName)\n      )\n    };\n  }\n  _flushHistory() {\n    if (this.historyAccumulator.hasChanges()) {\n      const entries = this.historyAccumulator.flush();\n      for (const { changes, source } of entries) {\n        let instanceChanges = null;\n        let documentChanges = null;\n        let presenceChanges = null;\n        for (const { onHistory, filters } of this.listeners) {\n          if (filters.source !== \"all\" && filters.source !== source) {\n            continue;\n          }\n          if (filters.scope !== \"all\") {\n            if (filters.scope === \"document\") {\n              documentChanges ??= this.filterChangesByScope(changes, \"document\");\n              if (!documentChanges)\n                continue;\n              onHistory({ changes: documentChanges, source });\n            } else if (filters.scope === \"session\") {\n              instanceChanges ??= this.filterChangesByScope(changes, \"session\");\n              if (!instanceChanges)\n                continue;\n              onHistory({ changes: instanceChanges, source });\n            } else {\n              presenceChanges ??= this.filterChangesByScope(changes, \"presence\");\n              if (!presenceChanges)\n                continue;\n              onHistory({ changes: presenceChanges, source });\n            }\n          } else {\n            onHistory({ changes, source });\n          }\n        }\n      }\n    }\n  }\n  /**\n   * Filters out non-document changes from a diff. Returns null if there are no changes left.\n   * @param change - the records diff\n   * @returns\n   */\n  filterChangesByScope(change, scope) {\n    const result = {\n      added: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.filterEntries)(change.added, (_, r) => this.scopedTypes[scope].has(r.typeName)),\n      updated: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.filterEntries)(change.updated, (_, r) => this.scopedTypes[scope].has(r[1].typeName)),\n      removed: (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.filterEntries)(change.removed, (_, r) => this.scopedTypes[scope].has(r.typeName))\n    };\n    if (Object.keys(result.added).length === 0 && Object.keys(result.updated).length === 0 && Object.keys(result.removed).length === 0) {\n      return null;\n    }\n    return result;\n  }\n  /**\n   * Update the history with a diff of changes.\n   *\n   * @param changes - The changes to add to the history.\n   */\n  updateHistory(changes) {\n    this.historyAccumulator.add({\n      changes,\n      source: this.isMergingRemoteChanges ? \"remote\" : \"user\"\n    });\n    if (this.listeners.size === 0) {\n      this.historyAccumulator.clear();\n    }\n    this.history.set(this.history.get() + 1, changes);\n  }\n  validate(phase) {\n    this.allRecords().forEach((record) => this.schema.validateRecord(this, record, phase, null));\n  }\n  /**\n   * Add some records to the store. It's an error if they already exist.\n   *\n   * @param records - The records to add.\n   * @public\n   */\n  put = (records, phaseOverride) => {\n    this.atomic(() => {\n      const updates = {};\n      const additions = {};\n      const currentMap = this.atoms.__unsafe__getWithoutCapture();\n      let map = null;\n      let record;\n      let didChange = false;\n      const source = this.isMergingRemoteChanges ? \"remote\" : \"user\";\n      for (let i = 0, n = records.length; i < n; i++) {\n        record = records[i];\n        const recordAtom = (map ?? currentMap)[record.id];\n        if (recordAtom) {\n          const initialValue = recordAtom.__unsafe__getWithoutCapture();\n          record = this.sideEffects.handleBeforeChange(initialValue, record, source);\n          const validated = this.schema.validateRecord(\n            this,\n            record,\n            phaseOverride ?? \"updateRecord\",\n            initialValue\n          );\n          if (validated === initialValue)\n            continue;\n          recordAtom.set((0,_devFreeze_mjs__WEBPACK_IMPORTED_MODULE_5__.devFreeze)(record));\n          didChange = true;\n          const updated = recordAtom.__unsafe__getWithoutCapture();\n          updates[record.id] = [initialValue, updated];\n          this.addDiffForAfterEvent(initialValue, updated);\n        } else {\n          record = this.sideEffects.handleBeforeCreate(record, source);\n          didChange = true;\n          record = this.schema.validateRecord(\n            this,\n            record,\n            phaseOverride ?? \"createRecord\",\n            null\n          );\n          additions[record.id] = record;\n          this.addDiffForAfterEvent(null, record);\n          if (!map) {\n            map = { ...currentMap };\n          }\n          map[record.id] = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.atom)(\"atom:\" + record.id, record);\n        }\n      }\n      if (map) {\n        this.atoms.set(map);\n      }\n      if (!didChange)\n        return;\n      this.updateHistory({\n        added: additions,\n        updated: updates,\n        removed: {}\n      });\n    });\n  };\n  /**\n   * Remove some records from the store via their ids.\n   *\n   * @param ids - The ids of the records to remove.\n   * @public\n   */\n  remove = (ids) => {\n    this.atomic(() => {\n      const cancelled = /* @__PURE__ */ new Set();\n      const source = this.isMergingRemoteChanges ? \"remote\" : \"user\";\n      if (this.sideEffects.isEnabled()) {\n        for (const id of ids) {\n          const atom2 = this.atoms.__unsafe__getWithoutCapture()[id];\n          if (!atom2)\n            continue;\n          if (this.sideEffects.handleBeforeDelete(atom2.get(), source) === false) {\n            cancelled.add(id);\n          }\n        }\n      }\n      let removed = void 0;\n      this.atoms.update((atoms) => {\n        let result = void 0;\n        for (const id of ids) {\n          if (cancelled.has(id))\n            continue;\n          if (!(id in atoms))\n            continue;\n          if (!result)\n            result = { ...atoms };\n          if (!removed)\n            removed = {};\n          delete result[id];\n          const record = atoms[id].get();\n          removed[id] = record;\n          this.addDiffForAfterEvent(record, null);\n        }\n        return result ?? atoms;\n      });\n      if (!removed)\n        return;\n      this.updateHistory({ added: {}, updated: {}, removed });\n    });\n  };\n  /**\n   * Get the value of a store record by its id.\n   *\n   * @param id - The id of the record to get.\n   * @public\n   */\n  get = (id) => {\n    return this.atoms.get()[id]?.get();\n  };\n  /**\n   * Get the value of a store record by its id without updating its epoch.\n   *\n   * @param id - The id of the record to get.\n   * @public\n   */\n  unsafeGetWithoutCapture = (id) => {\n    return this.atoms.get()[id]?.__unsafe__getWithoutCapture();\n  };\n  /**\n   * Creates a JSON payload from the record store.\n   *\n   * @param scope - The scope of records to serialize. Defaults to 'document'.\n   * @returns The record store snapshot as a JSON payload.\n   */\n  serialize = (scope = \"document\") => {\n    const result = {};\n    for (const [id, atom2] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapEntries)(this.atoms.get())) {\n      const record = atom2.get();\n      if (scope === \"all\" || this.scopedTypes[scope].has(record.typeName)) {\n        result[id] = record;\n      }\n    }\n    return result;\n  };\n  /**\n   * Get a serialized snapshot of the store and its schema.\n   *\n   * ```ts\n   * const snapshot = store.getStoreSnapshot()\n   * store.loadStoreSnapshot(snapshot)\n   * ```\n   *\n   * @param scope - The scope of records to serialize. Defaults to 'document'.\n   *\n   * @public\n   */\n  getStoreSnapshot(scope = \"document\") {\n    return {\n      store: this.serialize(scope),\n      schema: this.schema.serialize()\n    };\n  }\n  /**\n   * @deprecated use `getSnapshot` from the 'tldraw' package instead.\n   */\n  getSnapshot(scope = \"document\") {\n    console.warn(\n      \"[tldraw] `Store.getSnapshot` is deprecated and will be removed in a future release. Use `getSnapshot` from the `tldraw` package instead.\"\n    );\n    return this.getStoreSnapshot(scope);\n  }\n  /**\n   * Migrate a serialized snapshot of the store and its schema.\n   *\n   * ```ts\n   * const snapshot = store.getSnapshot()\n   * store.migrateSnapshot(snapshot)\n   * ```\n   *\n   * @param snapshot - The snapshot to load.\n   * @public\n   */\n  migrateSnapshot(snapshot) {\n    const migrationResult = this.schema.migrateStoreSnapshot(snapshot);\n    if (migrationResult.type === \"error\") {\n      throw new Error(`Failed to migrate snapshot: ${migrationResult.reason}`);\n    }\n    return {\n      store: migrationResult.value,\n      schema: this.schema.serialize()\n    };\n  }\n  /**\n   * Load a serialized snapshot.\n   *\n   * ```ts\n   * const snapshot = store.getStoreSnapshot()\n   * store.loadStoreSnapshot(snapshot)\n   * ```\n   *\n   * @param snapshot - The snapshot to load.\n   * @public\n   */\n  loadStoreSnapshot(snapshot) {\n    const migrationResult = this.schema.migrateStoreSnapshot(snapshot);\n    if (migrationResult.type === \"error\") {\n      throw new Error(`Failed to migrate snapshot: ${migrationResult.reason}`);\n    }\n    const prevSideEffectsEnabled = this.sideEffects.isEnabled();\n    try {\n      this.sideEffects.setIsEnabled(false);\n      this.atomic(() => {\n        this.clear();\n        this.put(Object.values(migrationResult.value));\n        this.ensureStoreIsUsable();\n      });\n    } finally {\n      this.sideEffects.setIsEnabled(prevSideEffectsEnabled);\n    }\n  }\n  /**\n   * @public\n   * @deprecated use `loadSnapshot` from the 'tldraw' package instead.\n   */\n  loadSnapshot(snapshot) {\n    console.warn(\n      \"[tldraw] `Store.loadSnapshot` is deprecated and will be removed in a future release. Use `loadSnapshot` from the 'tldraw' package instead.\"\n    );\n    this.loadStoreSnapshot(snapshot);\n  }\n  /**\n   * Get an array of all values in the store.\n   *\n   * @returns An array of all values in the store.\n   * @public\n   */\n  allRecords = () => {\n    return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(this.atoms.get()).map((atom2) => atom2.get());\n  };\n  /**\n   * Removes all records from the store.\n   *\n   * @public\n   */\n  clear = () => {\n    this.remove((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapKeys)(this.atoms.get()));\n  };\n  /**\n   * Update a record. To update multiple records at once, use the `update` method of the\n   * `TypedStore` class.\n   *\n   * @param id - The id of the record to update.\n   * @param updater - A function that updates the record.\n   */\n  update = (id, updater) => {\n    const atom2 = this.atoms.get()[id];\n    if (!atom2) {\n      console.error(`Record ${id} not found. This is probably an error`);\n      return;\n    }\n    this.put([updater(atom2.__unsafe__getWithoutCapture())]);\n  };\n  /**\n   * Get whether the record store has a id.\n   *\n   * @param id - The id of the record to check.\n   * @public\n   */\n  has = (id) => {\n    return !!this.atoms.get()[id];\n  };\n  /**\n   * Add a new listener to the store.\n   *\n   * @param onHistory - The listener to call when the store updates.\n   * @param filters - Filters to apply to the listener.\n   * @returns A function to remove the listener.\n   */\n  listen = (onHistory, filters) => {\n    this._flushHistory();\n    const listener = {\n      onHistory,\n      filters: {\n        source: filters?.source ?? \"all\",\n        scope: filters?.scope ?? \"all\"\n      }\n    };\n    this.listeners.add(listener);\n    if (!this.historyReactor.scheduler.isActivelyListening) {\n      this.historyReactor.start();\n    }\n    return () => {\n      this.listeners.delete(listener);\n      if (this.listeners.size === 0) {\n        this.historyReactor.stop();\n      }\n    };\n  };\n  isMergingRemoteChanges = false;\n  /**\n   * Merge changes from a remote source without triggering listeners.\n   *\n   * @param fn - A function that merges the external changes.\n   * @public\n   */\n  mergeRemoteChanges = (fn) => {\n    if (this.isMergingRemoteChanges) {\n      return fn();\n    }\n    if (this._isInAtomicOp) {\n      throw new Error(\"Cannot merge remote changes while in atomic operation\");\n    }\n    try {\n      this.isMergingRemoteChanges = true;\n      (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(fn);\n    } finally {\n      this.isMergingRemoteChanges = false;\n    }\n  };\n  /**\n   * Run `fn` and return a {@link RecordsDiff} of the changes that occurred as a result.\n   */\n  extractingChanges(fn) {\n    const changes = [];\n    const dispose = this.historyAccumulator.addInterceptor((entry) => changes.push(entry.changes));\n    try {\n      (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(fn);\n      return (0,_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_2__.squashRecordDiffs)(changes);\n    } finally {\n      dispose();\n    }\n  }\n  applyDiff(diff, {\n    runCallbacks = true,\n    ignoreEphemeralKeys = false\n  } = {}) {\n    this.atomic(() => {\n      const toPut = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(diff.added);\n      for (const [_from, to] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(diff.updated)) {\n        const type = this.schema.getType(to.typeName);\n        if (ignoreEphemeralKeys && type.ephemeralKeySet.size) {\n          const existing = this.get(to.id);\n          if (!existing) {\n            toPut.push(to);\n            continue;\n          }\n          let changed = null;\n          for (const [key, value] of Object.entries(to)) {\n            if (type.ephemeralKeySet.has(key) || Object.is(value, (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.getOwnProperty)(existing, key))) {\n              continue;\n            }\n            if (!changed)\n              changed = { ...existing };\n            changed[key] = value;\n          }\n          if (changed)\n            toPut.push(changed);\n        } else {\n          toPut.push(to);\n        }\n      }\n      const toRemove = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapKeys)(diff.removed);\n      if (toPut.length) {\n        this.put(toPut);\n      }\n      if (toRemove.length) {\n        this.remove(toRemove);\n      }\n    }, runCallbacks);\n  }\n  /**\n   * Create a computed cache.\n   *\n   * @param name - The name of the derivation cache.\n   * @param derive - A function used to derive the value of the cache.\n   * @public\n   */\n  createComputedCache = (name, derive, isEqual) => {\n    const cache = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.WeakCache();\n    return {\n      get: (id) => {\n        const atom2 = this.atoms.get()[id];\n        if (!atom2) {\n          return void 0;\n        }\n        return cache.get(atom2, () => {\n          const recordSignal = isEqual ? (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(atom2.name + \":equals\", () => atom2.get(), { isEqual }) : atom2;\n          return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(name + \":\" + id, () => {\n            return derive(recordSignal.get());\n          });\n        }).get();\n      }\n    };\n  };\n  /**\n   * Create a computed cache from a selector\n   *\n   * @param name - The name of the derivation cache.\n   * @param selector - A function that returns a subset of the original shape\n   * @param derive - A function used to derive the value of the cache.\n   * @public\n   */\n  createSelectedComputedCache = (name, selector, derive) => {\n    const cache = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.WeakCache();\n    return {\n      get: (id) => {\n        const atom2 = this.atoms.get()[id];\n        if (!atom2) {\n          return void 0;\n        }\n        return cache.get(atom2, () => {\n          const d = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\n            name + \":\" + id + \":selector\",\n            () => selector(atom2.get())\n          );\n          return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(name + \":\" + id, () => derive(d.get()));\n        }).get();\n      }\n    };\n  };\n  _integrityChecker;\n  /** @internal */\n  ensureStoreIsUsable() {\n    this.atomic(() => {\n      this._integrityChecker ??= this.schema.createIntegrityChecker(this);\n      this._integrityChecker?.();\n    });\n  }\n  _isPossiblyCorrupted = false;\n  /** @internal */\n  markAsPossiblyCorrupted() {\n    this._isPossiblyCorrupted = true;\n  }\n  /** @internal */\n  isPossiblyCorrupted() {\n    return this._isPossiblyCorrupted;\n  }\n  pendingAfterEvents = null;\n  addDiffForAfterEvent(before, after) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(this.pendingAfterEvents, \"must be in event operation\");\n    if (before === after)\n      return;\n    if (before && after)\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(before.id === after.id);\n    if (!before && !after)\n      return;\n    const id = (before || after).id;\n    const existing = this.pendingAfterEvents.get(id);\n    if (existing) {\n      existing.after = after;\n    } else {\n      this.pendingAfterEvents.set(id, { before, after });\n    }\n  }\n  flushAtomicCallbacks() {\n    let updateDepth = 0;\n    const source = this.isMergingRemoteChanges ? \"remote\" : \"user\";\n    while (this.pendingAfterEvents) {\n      const events = this.pendingAfterEvents;\n      this.pendingAfterEvents = null;\n      if (!this.sideEffects.isEnabled())\n        continue;\n      updateDepth++;\n      if (updateDepth > 100) {\n        throw new Error(\"Maximum store update depth exceeded, bailing out\");\n      }\n      for (const { before, after } of events.values()) {\n        if (before && after) {\n          this.sideEffects.handleAfterChange(before, after, source);\n        } else if (before && !after) {\n          this.sideEffects.handleAfterDelete(before, source);\n        } else if (!before && after) {\n          this.sideEffects.handleAfterCreate(after, source);\n        }\n      }\n      if (!this.pendingAfterEvents) {\n        this.sideEffects.handleOperationComplete(source);\n      }\n    }\n  }\n  _isInAtomicOp = false;\n  /** @internal */\n  atomic(fn, runCallbacks = true) {\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.transact)(() => {\n      if (this._isInAtomicOp) {\n        if (!this.pendingAfterEvents)\n          this.pendingAfterEvents = /* @__PURE__ */ new Map();\n        return fn();\n      }\n      this.pendingAfterEvents = /* @__PURE__ */ new Map();\n      const prevSideEffectsEnabled = this.sideEffects.isEnabled();\n      this.sideEffects.setIsEnabled(runCallbacks ?? prevSideEffectsEnabled);\n      this._isInAtomicOp = true;\n      try {\n        const result = fn();\n        this.flushAtomicCallbacks();\n        return result;\n      } finally {\n        this.pendingAfterEvents = null;\n        this.sideEffects.setIsEnabled(prevSideEffectsEnabled);\n        this._isInAtomicOp = false;\n      }\n    });\n  }\n  /** @internal */\n  addHistoryInterceptor(fn) {\n    return this.historyAccumulator.addInterceptor(\n      (entry) => fn(entry, this.isMergingRemoteChanges ? \"remote\" : \"user\")\n    );\n  }\n}\nfunction squashHistoryEntries(entries) {\n  if (entries.length === 0)\n    return [];\n  const chunked = [];\n  let chunk = [entries[0]];\n  let entry;\n  for (let i = 1, n = entries.length; i < n; i++) {\n    entry = entries[i];\n    if (chunk[0].source !== entry.source) {\n      chunked.push(chunk);\n      chunk = [];\n    }\n    chunk.push(entry);\n  }\n  chunked.push(chunk);\n  return (0,_devFreeze_mjs__WEBPACK_IMPORTED_MODULE_5__.devFreeze)(\n    chunked.map((chunk2) => ({\n      source: chunk2[0].source,\n      changes: (0,_RecordsDiff_mjs__WEBPACK_IMPORTED_MODULE_2__.squashRecordDiffs)(chunk2.map((e) => e.changes))\n    }))\n  );\n}\nclass HistoryAccumulator {\n  _history = [];\n  _interceptors = /* @__PURE__ */ new Set();\n  addInterceptor(fn) {\n    this._interceptors.add(fn);\n    return () => {\n      this._interceptors.delete(fn);\n    };\n  }\n  add(entry) {\n    this._history.push(entry);\n    for (const interceptor of this._interceptors) {\n      interceptor(entry);\n    }\n  }\n  flush() {\n    const history = squashHistoryEntries(this._history);\n    this._history = [];\n    return history;\n  }\n  clear() {\n    this._history = [];\n  }\n  hasChanges() {\n    return this._history.length > 0;\n  }\n}\nfunction createComputedCache(name, derive, isEqual) {\n  const cache = new _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.WeakCache();\n  return {\n    get(context, id) {\n      const computedCache = cache.get(context, () => {\n        const store = context instanceof Store ? context : context.store;\n        return store.createComputedCache(name, (record) => derive(context, record), isEqual);\n      });\n      return computedCache.get(id);\n    }\n  };\n}\n\n//# sourceMappingURL=Store.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvU3RvcmUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFrRTtBQVczQztBQUNTO0FBQ3NCO0FBQ0o7QUFDUTtBQUNkO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG1EQUFJLGtCQUFrQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1EQUFJO0FBQ2hCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMkRBQVk7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUVBQWdCO0FBQ3BDO0FBQ0EsWUFBWSwwQkFBMEI7QUFDdEMsb0JBQW9CLDhDQUFNO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtRUFBb0I7QUFDNUIsVUFBVSwrREFBZ0I7QUFDMUI7QUFDQSxZQUFZLG1EQUFJO0FBQ2hCO0FBQ0EsY0FBYyx5REFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNEQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLFFBQVEsd0JBQXdCLGtFQUFtQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFlO0FBQ3ZCO0FBQ0E7QUFDQSxRQUFRLDhEQUFlO0FBQ3ZCO0FBQ0E7QUFDQSxRQUFRLDhEQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrQkFBa0I7QUFDckM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHFCQUFxQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtDQUFrQztBQUM1RCxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtDQUFrQztBQUM1RCxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtDQUFrQztBQUM1RDtBQUNBLFlBQVk7QUFDWix3QkFBd0IsaUJBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNERBQWE7QUFDMUIsZUFBZSw0REFBYTtBQUM1QixlQUFlLDREQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLE9BQU87QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIseURBQVM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBLDJCQUEyQixtREFBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsMkJBQTJCLFNBQVMsYUFBYSxXQUFXO0FBQzVELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0RBQWdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCx1QkFBdUI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCx1QkFBdUI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsOERBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNERBQWE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixJQUFJO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHVEQUFRO0FBQ2QsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1CQUFtQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx1REFBUTtBQUNkLGFBQWEsbUVBQWlCO0FBQzlCLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjtBQUNBLG9CQUFvQiw4REFBZTtBQUNuQyxnQ0FBZ0MsOERBQWU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLDZEQUFjO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNERBQWE7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixvREFBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx1REFBUSw4Q0FBOEMsU0FBUztBQUN4RyxpQkFBaUIsdURBQVE7QUFDekI7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixvREFBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix1REFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdURBQVE7QUFDekIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFEQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsTUFBTSxxREFBTTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTix3Q0FBd0MsZUFBZTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGdCQUFnQjtBQUNuQztBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVEQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsT0FBTztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx5REFBUztBQUNsQjtBQUNBO0FBQ0EsZUFBZSxtRUFBaUI7QUFDaEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvREFBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0b3JlL2Rpc3QtZXNtL2xpYi9TdG9yZS5tanM/OWM3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdG9tLCBjb21wdXRlZCwgcmVhY3RvciwgdHJhbnNhY3QgfSBmcm9tIFwiQHRsZHJhdy9zdGF0ZVwiO1xuaW1wb3J0IHtcbiAgV2Vha0NhY2hlLFxuICBhc3NlcnQsXG4gIGZpbHRlckVudHJpZXMsXG4gIGdldE93blByb3BlcnR5LFxuICBvYmplY3RNYXBFbnRyaWVzLFxuICBvYmplY3RNYXBGcm9tRW50cmllcyxcbiAgb2JqZWN0TWFwS2V5cyxcbiAgb2JqZWN0TWFwVmFsdWVzLFxuICB0aHJvdHRsZVRvTmV4dEZyYW1lXG59IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tIFwibmFub2lkXCI7XG5pbXBvcnQgeyBzcXVhc2hSZWNvcmREaWZmcyB9IGZyb20gXCIuL1JlY29yZHNEaWZmLm1qc1wiO1xuaW1wb3J0IHsgU3RvcmVRdWVyaWVzIH0gZnJvbSBcIi4vU3RvcmVRdWVyaWVzLm1qc1wiO1xuaW1wb3J0IHsgU3RvcmVTaWRlRWZmZWN0cyB9IGZyb20gXCIuL1N0b3JlU2lkZUVmZmVjdHMubWpzXCI7XG5pbXBvcnQgeyBkZXZGcmVlemUgfSBmcm9tIFwiLi9kZXZGcmVlemUubWpzXCI7XG5jbGFzcyBTdG9yZSB7XG4gIC8qKlxuICAgKiBUaGUgcmFuZG9tIGlkIG9mIHRoZSBzdG9yZS5cbiAgICovXG4gIGlkO1xuICAvKipcbiAgICogQW4gYXRvbSBjb250YWluaW5nIHRoZSBzdG9yZSdzIGF0b21zLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBhdG9tcyA9IGF0b20oXCJzdG9yZV9hdG9tc1wiLCB7fSk7XG4gIC8qKlxuICAgKiBBbiBhdG9tIGNvbnRhaW5pbmcgdGhlIHN0b3JlJ3MgaGlzdG9yeS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGhpc3RvcnkgPSBhdG9tKFwiaGlzdG9yeVwiLCAwLCB7XG4gICAgaGlzdG9yeUxlbmd0aDogMWUzXG4gIH0pO1xuICAvKipcbiAgICogQSBTdG9yZVF1ZXJpZXMgaW5zdGFuY2UgZm9yIHRoaXMgc3RvcmUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBxdWVyeSA9IG5ldyBTdG9yZVF1ZXJpZXModGhpcy5hdG9tcywgdGhpcy5oaXN0b3J5KTtcbiAgLyoqXG4gICAqIEEgc2V0IGNvbnRhaW5pbmcgbGlzdGVuZXJzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoaXMgc3RvcmUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgLyoqXG4gICAqIEFuIGFycmF5IG9mIGhpc3RvcnkgZW50cmllcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGZsdXNoZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgaGlzdG9yeUFjY3VtdWxhdG9yID0gbmV3IEhpc3RvcnlBY2N1bXVsYXRvcigpO1xuICAvKipcbiAgICogQSByZWFjdG9yIHRoYXQgcmVzcG9uZHMgdG8gY2hhbmdlcyB0byB0aGUgaGlzdG9yeSBieSBzcXVhc2hpbmcgdGhlIGFjY3VtdWxhdGVkIGhpc3RvcnkgYW5kXG4gICAqIG5vdGlmeWluZyBsaXN0ZW5lcnMgb2YgdGhlIGNoYW5nZXMuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgaGlzdG9yeVJlYWN0b3I7XG4gIHNjaGVtYTtcbiAgcHJvcHM7XG4gIHNjb3BlZFR5cGVzO1xuICBzaWRlRWZmZWN0cyA9IG5ldyBTdG9yZVNpZGVFZmZlY3RzKHRoaXMpO1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBjb25zdCB7IGluaXRpYWxEYXRhLCBzY2hlbWEsIGlkIH0gPSBjb25maWc7XG4gICAgdGhpcy5pZCA9IGlkID8/IG5hbm9pZCgpO1xuICAgIHRoaXMuc2NoZW1hID0gc2NoZW1hO1xuICAgIHRoaXMucHJvcHMgPSBjb25maWcucHJvcHM7XG4gICAgaWYgKGluaXRpYWxEYXRhKSB7XG4gICAgICB0aGlzLmF0b21zLnNldChcbiAgICAgICAgb2JqZWN0TWFwRnJvbUVudHJpZXMoXG4gICAgICAgICAgb2JqZWN0TWFwRW50cmllcyhpbml0aWFsRGF0YSkubWFwKChbaWQyLCByZWNvcmRdKSA9PiBbXG4gICAgICAgICAgICBpZDIsXG4gICAgICAgICAgICBhdG9tKFxuICAgICAgICAgICAgICBcImF0b206XCIgKyBpZDIsXG4gICAgICAgICAgICAgIGRldkZyZWV6ZSh0aGlzLnNjaGVtYS52YWxpZGF0ZVJlY29yZCh0aGlzLCByZWNvcmQsIFwiaW5pdGlhbGl6ZVwiLCBudWxsKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICBdKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLmhpc3RvcnlSZWFjdG9yID0gcmVhY3RvcihcbiAgICAgIFwiU3RvcmUuaGlzdG9yeVJlYWN0b3JcIixcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5oaXN0b3J5LmdldCgpO1xuICAgICAgICB0aGlzLl9mbHVzaEhpc3RvcnkoKTtcbiAgICAgIH0sXG4gICAgICB7IHNjaGVkdWxlRWZmZWN0OiAoY2IpID0+IHRocm90dGxlVG9OZXh0RnJhbWUoY2IpIH1cbiAgICApO1xuICAgIHRoaXMuc2NvcGVkVHlwZXMgPSB7XG4gICAgICBkb2N1bWVudDogbmV3IFNldChcbiAgICAgICAgb2JqZWN0TWFwVmFsdWVzKHRoaXMuc2NoZW1hLnR5cGVzKS5maWx0ZXIoKHQpID0+IHQuc2NvcGUgPT09IFwiZG9jdW1lbnRcIikubWFwKCh0KSA9PiB0LnR5cGVOYW1lKVxuICAgICAgKSxcbiAgICAgIHNlc3Npb246IG5ldyBTZXQoXG4gICAgICAgIG9iamVjdE1hcFZhbHVlcyh0aGlzLnNjaGVtYS50eXBlcykuZmlsdGVyKCh0KSA9PiB0LnNjb3BlID09PSBcInNlc3Npb25cIikubWFwKCh0KSA9PiB0LnR5cGVOYW1lKVxuICAgICAgKSxcbiAgICAgIHByZXNlbmNlOiBuZXcgU2V0KFxuICAgICAgICBvYmplY3RNYXBWYWx1ZXModGhpcy5zY2hlbWEudHlwZXMpLmZpbHRlcigodCkgPT4gdC5zY29wZSA9PT0gXCJwcmVzZW5jZVwiKS5tYXAoKHQpID0+IHQudHlwZU5hbWUpXG4gICAgICApXG4gICAgfTtcbiAgfVxuICBfZmx1c2hIaXN0b3J5KCkge1xuICAgIGlmICh0aGlzLmhpc3RvcnlBY2N1bXVsYXRvci5oYXNDaGFuZ2VzKCkpIHtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSB0aGlzLmhpc3RvcnlBY2N1bXVsYXRvci5mbHVzaCgpO1xuICAgICAgZm9yIChjb25zdCB7IGNoYW5nZXMsIHNvdXJjZSB9IG9mIGVudHJpZXMpIHtcbiAgICAgICAgbGV0IGluc3RhbmNlQ2hhbmdlcyA9IG51bGw7XG4gICAgICAgIGxldCBkb2N1bWVudENoYW5nZXMgPSBudWxsO1xuICAgICAgICBsZXQgcHJlc2VuY2VDaGFuZ2VzID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCB7IG9uSGlzdG9yeSwgZmlsdGVycyB9IG9mIHRoaXMubGlzdGVuZXJzKSB7XG4gICAgICAgICAgaWYgKGZpbHRlcnMuc291cmNlICE9PSBcImFsbFwiICYmIGZpbHRlcnMuc291cmNlICE9PSBzb3VyY2UpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZmlsdGVycy5zY29wZSAhPT0gXCJhbGxcIikge1xuICAgICAgICAgICAgaWYgKGZpbHRlcnMuc2NvcGUgPT09IFwiZG9jdW1lbnRcIikge1xuICAgICAgICAgICAgICBkb2N1bWVudENoYW5nZXMgPz89IHRoaXMuZmlsdGVyQ2hhbmdlc0J5U2NvcGUoY2hhbmdlcywgXCJkb2N1bWVudFwiKTtcbiAgICAgICAgICAgICAgaWYgKCFkb2N1bWVudENoYW5nZXMpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIG9uSGlzdG9yeSh7IGNoYW5nZXM6IGRvY3VtZW50Q2hhbmdlcywgc291cmNlIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXJzLnNjb3BlID09PSBcInNlc3Npb25cIikge1xuICAgICAgICAgICAgICBpbnN0YW5jZUNoYW5nZXMgPz89IHRoaXMuZmlsdGVyQ2hhbmdlc0J5U2NvcGUoY2hhbmdlcywgXCJzZXNzaW9uXCIpO1xuICAgICAgICAgICAgICBpZiAoIWluc3RhbmNlQ2hhbmdlcylcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgb25IaXN0b3J5KHsgY2hhbmdlczogaW5zdGFuY2VDaGFuZ2VzLCBzb3VyY2UgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwcmVzZW5jZUNoYW5nZXMgPz89IHRoaXMuZmlsdGVyQ2hhbmdlc0J5U2NvcGUoY2hhbmdlcywgXCJwcmVzZW5jZVwiKTtcbiAgICAgICAgICAgICAgaWYgKCFwcmVzZW5jZUNoYW5nZXMpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIG9uSGlzdG9yeSh7IGNoYW5nZXM6IHByZXNlbmNlQ2hhbmdlcywgc291cmNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvbkhpc3RvcnkoeyBjaGFuZ2VzLCBzb3VyY2UgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBGaWx0ZXJzIG91dCBub24tZG9jdW1lbnQgY2hhbmdlcyBmcm9tIGEgZGlmZi4gUmV0dXJucyBudWxsIGlmIHRoZXJlIGFyZSBubyBjaGFuZ2VzIGxlZnQuXG4gICAqIEBwYXJhbSBjaGFuZ2UgLSB0aGUgcmVjb3JkcyBkaWZmXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBmaWx0ZXJDaGFuZ2VzQnlTY29wZShjaGFuZ2UsIHNjb3BlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgYWRkZWQ6IGZpbHRlckVudHJpZXMoY2hhbmdlLmFkZGVkLCAoXywgcikgPT4gdGhpcy5zY29wZWRUeXBlc1tzY29wZV0uaGFzKHIudHlwZU5hbWUpKSxcbiAgICAgIHVwZGF0ZWQ6IGZpbHRlckVudHJpZXMoY2hhbmdlLnVwZGF0ZWQsIChfLCByKSA9PiB0aGlzLnNjb3BlZFR5cGVzW3Njb3BlXS5oYXMoclsxXS50eXBlTmFtZSkpLFxuICAgICAgcmVtb3ZlZDogZmlsdGVyRW50cmllcyhjaGFuZ2UucmVtb3ZlZCwgKF8sIHIpID0+IHRoaXMuc2NvcGVkVHlwZXNbc2NvcGVdLmhhcyhyLnR5cGVOYW1lKSlcbiAgICB9O1xuICAgIGlmIChPYmplY3Qua2V5cyhyZXN1bHQuYWRkZWQpLmxlbmd0aCA9PT0gMCAmJiBPYmplY3Qua2V5cyhyZXN1bHQudXBkYXRlZCkubGVuZ3RoID09PSAwICYmIE9iamVjdC5rZXlzKHJlc3VsdC5yZW1vdmVkKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGhpc3Rvcnkgd2l0aCBhIGRpZmYgb2YgY2hhbmdlcy5cbiAgICpcbiAgICogQHBhcmFtIGNoYW5nZXMgLSBUaGUgY2hhbmdlcyB0byBhZGQgdG8gdGhlIGhpc3RvcnkuXG4gICAqL1xuICB1cGRhdGVIaXN0b3J5KGNoYW5nZXMpIHtcbiAgICB0aGlzLmhpc3RvcnlBY2N1bXVsYXRvci5hZGQoe1xuICAgICAgY2hhbmdlcyxcbiAgICAgIHNvdXJjZTogdGhpcy5pc01lcmdpbmdSZW1vdGVDaGFuZ2VzID8gXCJyZW1vdGVcIiA6IFwidXNlclwiXG4gICAgfSk7XG4gICAgaWYgKHRoaXMubGlzdGVuZXJzLnNpemUgPT09IDApIHtcbiAgICAgIHRoaXMuaGlzdG9yeUFjY3VtdWxhdG9yLmNsZWFyKCk7XG4gICAgfVxuICAgIHRoaXMuaGlzdG9yeS5zZXQodGhpcy5oaXN0b3J5LmdldCgpICsgMSwgY2hhbmdlcyk7XG4gIH1cbiAgdmFsaWRhdGUocGhhc2UpIHtcbiAgICB0aGlzLmFsbFJlY29yZHMoKS5mb3JFYWNoKChyZWNvcmQpID0+IHRoaXMuc2NoZW1hLnZhbGlkYXRlUmVjb3JkKHRoaXMsIHJlY29yZCwgcGhhc2UsIG51bGwpKTtcbiAgfVxuICAvKipcbiAgICogQWRkIHNvbWUgcmVjb3JkcyB0byB0aGUgc3RvcmUuIEl0J3MgYW4gZXJyb3IgaWYgdGhleSBhbHJlYWR5IGV4aXN0LlxuICAgKlxuICAgKiBAcGFyYW0gcmVjb3JkcyAtIFRoZSByZWNvcmRzIHRvIGFkZC5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcHV0ID0gKHJlY29yZHMsIHBoYXNlT3ZlcnJpZGUpID0+IHtcbiAgICB0aGlzLmF0b21pYygoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVzID0ge307XG4gICAgICBjb25zdCBhZGRpdGlvbnMgPSB7fTtcbiAgICAgIGNvbnN0IGN1cnJlbnRNYXAgPSB0aGlzLmF0b21zLl9fdW5zYWZlX19nZXRXaXRob3V0Q2FwdHVyZSgpO1xuICAgICAgbGV0IG1hcCA9IG51bGw7XG4gICAgICBsZXQgcmVjb3JkO1xuICAgICAgbGV0IGRpZENoYW5nZSA9IGZhbHNlO1xuICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5pc01lcmdpbmdSZW1vdGVDaGFuZ2VzID8gXCJyZW1vdGVcIiA6IFwidXNlclwiO1xuICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSByZWNvcmRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICByZWNvcmQgPSByZWNvcmRzW2ldO1xuICAgICAgICBjb25zdCByZWNvcmRBdG9tID0gKG1hcCA/PyBjdXJyZW50TWFwKVtyZWNvcmQuaWRdO1xuICAgICAgICBpZiAocmVjb3JkQXRvbSkge1xuICAgICAgICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9IHJlY29yZEF0b20uX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKCk7XG4gICAgICAgICAgcmVjb3JkID0gdGhpcy5zaWRlRWZmZWN0cy5oYW5kbGVCZWZvcmVDaGFuZ2UoaW5pdGlhbFZhbHVlLCByZWNvcmQsIHNvdXJjZSk7XG4gICAgICAgICAgY29uc3QgdmFsaWRhdGVkID0gdGhpcy5zY2hlbWEudmFsaWRhdGVSZWNvcmQoXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgcmVjb3JkLFxuICAgICAgICAgICAgcGhhc2VPdmVycmlkZSA/PyBcInVwZGF0ZVJlY29yZFwiLFxuICAgICAgICAgICAgaW5pdGlhbFZhbHVlXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAodmFsaWRhdGVkID09PSBpbml0aWFsVmFsdWUpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICByZWNvcmRBdG9tLnNldChkZXZGcmVlemUocmVjb3JkKSk7XG4gICAgICAgICAgZGlkQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkID0gcmVjb3JkQXRvbS5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUoKTtcbiAgICAgICAgICB1cGRhdGVzW3JlY29yZC5pZF0gPSBbaW5pdGlhbFZhbHVlLCB1cGRhdGVkXTtcbiAgICAgICAgICB0aGlzLmFkZERpZmZGb3JBZnRlckV2ZW50KGluaXRpYWxWYWx1ZSwgdXBkYXRlZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVjb3JkID0gdGhpcy5zaWRlRWZmZWN0cy5oYW5kbGVCZWZvcmVDcmVhdGUocmVjb3JkLCBzb3VyY2UpO1xuICAgICAgICAgIGRpZENoYW5nZSA9IHRydWU7XG4gICAgICAgICAgcmVjb3JkID0gdGhpcy5zY2hlbWEudmFsaWRhdGVSZWNvcmQoXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgcmVjb3JkLFxuICAgICAgICAgICAgcGhhc2VPdmVycmlkZSA/PyBcImNyZWF0ZVJlY29yZFwiLFxuICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICk7XG4gICAgICAgICAgYWRkaXRpb25zW3JlY29yZC5pZF0gPSByZWNvcmQ7XG4gICAgICAgICAgdGhpcy5hZGREaWZmRm9yQWZ0ZXJFdmVudChudWxsLCByZWNvcmQpO1xuICAgICAgICAgIGlmICghbWFwKSB7XG4gICAgICAgICAgICBtYXAgPSB7IC4uLmN1cnJlbnRNYXAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbWFwW3JlY29yZC5pZF0gPSBhdG9tKFwiYXRvbTpcIiArIHJlY29yZC5pZCwgcmVjb3JkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1hcCkge1xuICAgICAgICB0aGlzLmF0b21zLnNldChtYXApO1xuICAgICAgfVxuICAgICAgaWYgKCFkaWRDaGFuZ2UpXG4gICAgICAgIHJldHVybjtcbiAgICAgIHRoaXMudXBkYXRlSGlzdG9yeSh7XG4gICAgICAgIGFkZGVkOiBhZGRpdGlvbnMsXG4gICAgICAgIHVwZGF0ZWQ6IHVwZGF0ZXMsXG4gICAgICAgIHJlbW92ZWQ6IHt9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgLyoqXG4gICAqIFJlbW92ZSBzb21lIHJlY29yZHMgZnJvbSB0aGUgc3RvcmUgdmlhIHRoZWlyIGlkcy5cbiAgICpcbiAgICogQHBhcmFtIGlkcyAtIFRoZSBpZHMgb2YgdGhlIHJlY29yZHMgdG8gcmVtb3ZlLlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZW1vdmUgPSAoaWRzKSA9PiB7XG4gICAgdGhpcy5hdG9taWMoKCkgPT4ge1xuICAgICAgY29uc3QgY2FuY2VsbGVkID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuaXNNZXJnaW5nUmVtb3RlQ2hhbmdlcyA/IFwicmVtb3RlXCIgOiBcInVzZXJcIjtcbiAgICAgIGlmICh0aGlzLnNpZGVFZmZlY3RzLmlzRW5hYmxlZCgpKSB7XG4gICAgICAgIGZvciAoY29uc3QgaWQgb2YgaWRzKSB7XG4gICAgICAgICAgY29uc3QgYXRvbTIgPSB0aGlzLmF0b21zLl9fdW5zYWZlX19nZXRXaXRob3V0Q2FwdHVyZSgpW2lkXTtcbiAgICAgICAgICBpZiAoIWF0b20yKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgaWYgKHRoaXMuc2lkZUVmZmVjdHMuaGFuZGxlQmVmb3JlRGVsZXRlKGF0b20yLmdldCgpLCBzb3VyY2UpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY2FuY2VsbGVkLmFkZChpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgcmVtb3ZlZCA9IHZvaWQgMDtcbiAgICAgIHRoaXMuYXRvbXMudXBkYXRlKChhdG9tcykgPT4ge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdm9pZCAwO1xuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykge1xuICAgICAgICAgIGlmIChjYW5jZWxsZWQuaGFzKGlkKSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIGlmICghKGlkIGluIGF0b21zKSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIGlmICghcmVzdWx0KVxuICAgICAgICAgICAgcmVzdWx0ID0geyAuLi5hdG9tcyB9O1xuICAgICAgICAgIGlmICghcmVtb3ZlZClcbiAgICAgICAgICAgIHJlbW92ZWQgPSB7fTtcbiAgICAgICAgICBkZWxldGUgcmVzdWx0W2lkXTtcbiAgICAgICAgICBjb25zdCByZWNvcmQgPSBhdG9tc1tpZF0uZ2V0KCk7XG4gICAgICAgICAgcmVtb3ZlZFtpZF0gPSByZWNvcmQ7XG4gICAgICAgICAgdGhpcy5hZGREaWZmRm9yQWZ0ZXJFdmVudChyZWNvcmQsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQgPz8gYXRvbXM7XG4gICAgICB9KTtcbiAgICAgIGlmICghcmVtb3ZlZClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgdGhpcy51cGRhdGVIaXN0b3J5KHsgYWRkZWQ6IHt9LCB1cGRhdGVkOiB7fSwgcmVtb3ZlZCB9KTtcbiAgICB9KTtcbiAgfTtcbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgYSBzdG9yZSByZWNvcmQgYnkgaXRzIGlkLlxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIHJlY29yZCB0byBnZXQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldCA9IChpZCkgPT4ge1xuICAgIHJldHVybiB0aGlzLmF0b21zLmdldCgpW2lkXT8uZ2V0KCk7XG4gIH07XG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGEgc3RvcmUgcmVjb3JkIGJ5IGl0cyBpZCB3aXRob3V0IHVwZGF0aW5nIGl0cyBlcG9jaC5cbiAgICpcbiAgICogQHBhcmFtIGlkIC0gVGhlIGlkIG9mIHRoZSByZWNvcmQgdG8gZ2V0LlxuICAgKiBAcHVibGljXG4gICAqL1xuICB1bnNhZmVHZXRXaXRob3V0Q2FwdHVyZSA9IChpZCkgPT4ge1xuICAgIHJldHVybiB0aGlzLmF0b21zLmdldCgpW2lkXT8uX191bnNhZmVfX2dldFdpdGhvdXRDYXB0dXJlKCk7XG4gIH07XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgSlNPTiBwYXlsb2FkIGZyb20gdGhlIHJlY29yZCBzdG9yZS5cbiAgICpcbiAgICogQHBhcmFtIHNjb3BlIC0gVGhlIHNjb3BlIG9mIHJlY29yZHMgdG8gc2VyaWFsaXplLiBEZWZhdWx0cyB0byAnZG9jdW1lbnQnLlxuICAgKiBAcmV0dXJucyBUaGUgcmVjb3JkIHN0b3JlIHNuYXBzaG90IGFzIGEgSlNPTiBwYXlsb2FkLlxuICAgKi9cbiAgc2VyaWFsaXplID0gKHNjb3BlID0gXCJkb2N1bWVudFwiKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBbaWQsIGF0b20yXSBvZiBvYmplY3RNYXBFbnRyaWVzKHRoaXMuYXRvbXMuZ2V0KCkpKSB7XG4gICAgICBjb25zdCByZWNvcmQgPSBhdG9tMi5nZXQoKTtcbiAgICAgIGlmIChzY29wZSA9PT0gXCJhbGxcIiB8fCB0aGlzLnNjb3BlZFR5cGVzW3Njb3BlXS5oYXMocmVjb3JkLnR5cGVOYW1lKSkge1xuICAgICAgICByZXN1bHRbaWRdID0gcmVjb3JkO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICAvKipcbiAgICogR2V0IGEgc2VyaWFsaXplZCBzbmFwc2hvdCBvZiB0aGUgc3RvcmUgYW5kIGl0cyBzY2hlbWEuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IHNuYXBzaG90ID0gc3RvcmUuZ2V0U3RvcmVTbmFwc2hvdCgpXG4gICAqIHN0b3JlLmxvYWRTdG9yZVNuYXBzaG90KHNuYXBzaG90KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNjb3BlIC0gVGhlIHNjb3BlIG9mIHJlY29yZHMgdG8gc2VyaWFsaXplLiBEZWZhdWx0cyB0byAnZG9jdW1lbnQnLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRTdG9yZVNuYXBzaG90KHNjb3BlID0gXCJkb2N1bWVudFwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0b3JlOiB0aGlzLnNlcmlhbGl6ZShzY29wZSksXG4gICAgICBzY2hlbWE6IHRoaXMuc2NoZW1hLnNlcmlhbGl6ZSgpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGBnZXRTbmFwc2hvdGAgZnJvbSB0aGUgJ3RsZHJhdycgcGFja2FnZSBpbnN0ZWFkLlxuICAgKi9cbiAgZ2V0U25hcHNob3Qoc2NvcGUgPSBcImRvY3VtZW50XCIpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIlt0bGRyYXddIGBTdG9yZS5nZXRTbmFwc2hvdGAgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHJlbGVhc2UuIFVzZSBgZ2V0U25hcHNob3RgIGZyb20gdGhlIGB0bGRyYXdgIHBhY2thZ2UgaW5zdGVhZC5cIlxuICAgICk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RvcmVTbmFwc2hvdChzY29wZSk7XG4gIH1cbiAgLyoqXG4gICAqIE1pZ3JhdGUgYSBzZXJpYWxpemVkIHNuYXBzaG90IG9mIHRoZSBzdG9yZSBhbmQgaXRzIHNjaGVtYS5cbiAgICpcbiAgICogYGBgdHNcbiAgICogY29uc3Qgc25hcHNob3QgPSBzdG9yZS5nZXRTbmFwc2hvdCgpXG4gICAqIHN0b3JlLm1pZ3JhdGVTbmFwc2hvdChzbmFwc2hvdClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBzbmFwc2hvdCAtIFRoZSBzbmFwc2hvdCB0byBsb2FkLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBtaWdyYXRlU25hcHNob3Qoc25hcHNob3QpIHtcbiAgICBjb25zdCBtaWdyYXRpb25SZXN1bHQgPSB0aGlzLnNjaGVtYS5taWdyYXRlU3RvcmVTbmFwc2hvdChzbmFwc2hvdCk7XG4gICAgaWYgKG1pZ3JhdGlvblJlc3VsdC50eXBlID09PSBcImVycm9yXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIG1pZ3JhdGUgc25hcHNob3Q6ICR7bWlncmF0aW9uUmVzdWx0LnJlYXNvbn1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0b3JlOiBtaWdyYXRpb25SZXN1bHQudmFsdWUsXG4gICAgICBzY2hlbWE6IHRoaXMuc2NoZW1hLnNlcmlhbGl6ZSgpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogTG9hZCBhIHNlcmlhbGl6ZWQgc25hcHNob3QuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IHNuYXBzaG90ID0gc3RvcmUuZ2V0U3RvcmVTbmFwc2hvdCgpXG4gICAqIHN0b3JlLmxvYWRTdG9yZVNuYXBzaG90KHNuYXBzaG90KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHNuYXBzaG90IC0gVGhlIHNuYXBzaG90IHRvIGxvYWQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGxvYWRTdG9yZVNuYXBzaG90KHNuYXBzaG90KSB7XG4gICAgY29uc3QgbWlncmF0aW9uUmVzdWx0ID0gdGhpcy5zY2hlbWEubWlncmF0ZVN0b3JlU25hcHNob3Qoc25hcHNob3QpO1xuICAgIGlmIChtaWdyYXRpb25SZXN1bHQudHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBtaWdyYXRlIHNuYXBzaG90OiAke21pZ3JhdGlvblJlc3VsdC5yZWFzb259YCk7XG4gICAgfVxuICAgIGNvbnN0IHByZXZTaWRlRWZmZWN0c0VuYWJsZWQgPSB0aGlzLnNpZGVFZmZlY3RzLmlzRW5hYmxlZCgpO1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnNpZGVFZmZlY3RzLnNldElzRW5hYmxlZChmYWxzZSk7XG4gICAgICB0aGlzLmF0b21pYygoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5wdXQoT2JqZWN0LnZhbHVlcyhtaWdyYXRpb25SZXN1bHQudmFsdWUpKTtcbiAgICAgICAgdGhpcy5lbnN1cmVTdG9yZUlzVXNhYmxlKCk7XG4gICAgICB9KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5zaWRlRWZmZWN0cy5zZXRJc0VuYWJsZWQocHJldlNpZGVFZmZlY3RzRW5hYmxlZCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqIEBkZXByZWNhdGVkIHVzZSBgbG9hZFNuYXBzaG90YCBmcm9tIHRoZSAndGxkcmF3JyBwYWNrYWdlIGluc3RlYWQuXG4gICAqL1xuICBsb2FkU25hcHNob3Qoc25hcHNob3QpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIlt0bGRyYXddIGBTdG9yZS5sb2FkU25hcHNob3RgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSByZWxlYXNlLiBVc2UgYGxvYWRTbmFwc2hvdGAgZnJvbSB0aGUgJ3RsZHJhdycgcGFja2FnZSBpbnN0ZWFkLlwiXG4gICAgKTtcbiAgICB0aGlzLmxvYWRTdG9yZVNuYXBzaG90KHNuYXBzaG90KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIGFycmF5IG9mIGFsbCB2YWx1ZXMgaW4gdGhlIHN0b3JlLlxuICAgKlxuICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBhbGwgdmFsdWVzIGluIHRoZSBzdG9yZS5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYWxsUmVjb3JkcyA9ICgpID0+IHtcbiAgICByZXR1cm4gb2JqZWN0TWFwVmFsdWVzKHRoaXMuYXRvbXMuZ2V0KCkpLm1hcCgoYXRvbTIpID0+IGF0b20yLmdldCgpKTtcbiAgfTtcbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIHJlY29yZHMgZnJvbSB0aGUgc3RvcmUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNsZWFyID0gKCkgPT4ge1xuICAgIHRoaXMucmVtb3ZlKG9iamVjdE1hcEtleXModGhpcy5hdG9tcy5nZXQoKSkpO1xuICB9O1xuICAvKipcbiAgICogVXBkYXRlIGEgcmVjb3JkLiBUbyB1cGRhdGUgbXVsdGlwbGUgcmVjb3JkcyBhdCBvbmNlLCB1c2UgdGhlIGB1cGRhdGVgIG1ldGhvZCBvZiB0aGVcbiAgICogYFR5cGVkU3RvcmVgIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIHJlY29yZCB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB1cGRhdGVyIC0gQSBmdW5jdGlvbiB0aGF0IHVwZGF0ZXMgdGhlIHJlY29yZC5cbiAgICovXG4gIHVwZGF0ZSA9IChpZCwgdXBkYXRlcikgPT4ge1xuICAgIGNvbnN0IGF0b20yID0gdGhpcy5hdG9tcy5nZXQoKVtpZF07XG4gICAgaWYgKCFhdG9tMikge1xuICAgICAgY29uc29sZS5lcnJvcihgUmVjb3JkICR7aWR9IG5vdCBmb3VuZC4gVGhpcyBpcyBwcm9iYWJseSBhbiBlcnJvcmApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnB1dChbdXBkYXRlcihhdG9tMi5fX3Vuc2FmZV9fZ2V0V2l0aG91dENhcHR1cmUoKSldKTtcbiAgfTtcbiAgLyoqXG4gICAqIEdldCB3aGV0aGVyIHRoZSByZWNvcmQgc3RvcmUgaGFzIGEgaWQuXG4gICAqXG4gICAqIEBwYXJhbSBpZCAtIFRoZSBpZCBvZiB0aGUgcmVjb3JkIHRvIGNoZWNrLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBoYXMgPSAoaWQpID0+IHtcbiAgICByZXR1cm4gISF0aGlzLmF0b21zLmdldCgpW2lkXTtcbiAgfTtcbiAgLyoqXG4gICAqIEFkZCBhIG5ldyBsaXN0ZW5lciB0byB0aGUgc3RvcmUuXG4gICAqXG4gICAqIEBwYXJhbSBvbkhpc3RvcnkgLSBUaGUgbGlzdGVuZXIgdG8gY2FsbCB3aGVuIHRoZSBzdG9yZSB1cGRhdGVzLlxuICAgKiBAcGFyYW0gZmlsdGVycyAtIEZpbHRlcnMgdG8gYXBwbHkgdG8gdGhlIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRvIHJlbW92ZSB0aGUgbGlzdGVuZXIuXG4gICAqL1xuICBsaXN0ZW4gPSAob25IaXN0b3J5LCBmaWx0ZXJzKSA9PiB7XG4gICAgdGhpcy5fZmx1c2hIaXN0b3J5KCk7XG4gICAgY29uc3QgbGlzdGVuZXIgPSB7XG4gICAgICBvbkhpc3RvcnksXG4gICAgICBmaWx0ZXJzOiB7XG4gICAgICAgIHNvdXJjZTogZmlsdGVycz8uc291cmNlID8/IFwiYWxsXCIsXG4gICAgICAgIHNjb3BlOiBmaWx0ZXJzPy5zY29wZSA/PyBcImFsbFwiXG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xuICAgIGlmICghdGhpcy5oaXN0b3J5UmVhY3Rvci5zY2hlZHVsZXIuaXNBY3RpdmVseUxpc3RlbmluZykge1xuICAgICAgdGhpcy5oaXN0b3J5UmVhY3Rvci5zdGFydCgpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy5saXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICAgIGlmICh0aGlzLmxpc3RlbmVycy5zaXplID09PSAwKSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeVJlYWN0b3Iuc3RvcCgpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG4gIGlzTWVyZ2luZ1JlbW90ZUNoYW5nZXMgPSBmYWxzZTtcbiAgLyoqXG4gICAqIE1lcmdlIGNoYW5nZXMgZnJvbSBhIHJlbW90ZSBzb3VyY2Ugd2l0aG91dCB0cmlnZ2VyaW5nIGxpc3RlbmVycy5cbiAgICpcbiAgICogQHBhcmFtIGZuIC0gQSBmdW5jdGlvbiB0aGF0IG1lcmdlcyB0aGUgZXh0ZXJuYWwgY2hhbmdlcy5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgbWVyZ2VSZW1vdGVDaGFuZ2VzID0gKGZuKSA9PiB7XG4gICAgaWYgKHRoaXMuaXNNZXJnaW5nUmVtb3RlQ2hhbmdlcykge1xuICAgICAgcmV0dXJuIGZuKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9pc0luQXRvbWljT3ApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBtZXJnZSByZW1vdGUgY2hhbmdlcyB3aGlsZSBpbiBhdG9taWMgb3BlcmF0aW9uXCIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgdGhpcy5pc01lcmdpbmdSZW1vdGVDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgIHRyYW5zYWN0KGZuKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5pc01lcmdpbmdSZW1vdGVDaGFuZ2VzID0gZmFsc2U7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogUnVuIGBmbmAgYW5kIHJldHVybiBhIHtAbGluayBSZWNvcmRzRGlmZn0gb2YgdGhlIGNoYW5nZXMgdGhhdCBvY2N1cnJlZCBhcyBhIHJlc3VsdC5cbiAgICovXG4gIGV4dHJhY3RpbmdDaGFuZ2VzKGZuKSB7XG4gICAgY29uc3QgY2hhbmdlcyA9IFtdO1xuICAgIGNvbnN0IGRpc3Bvc2UgPSB0aGlzLmhpc3RvcnlBY2N1bXVsYXRvci5hZGRJbnRlcmNlcHRvcigoZW50cnkpID0+IGNoYW5nZXMucHVzaChlbnRyeS5jaGFuZ2VzKSk7XG4gICAgdHJ5IHtcbiAgICAgIHRyYW5zYWN0KGZuKTtcbiAgICAgIHJldHVybiBzcXVhc2hSZWNvcmREaWZmcyhjaGFuZ2VzKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgZGlzcG9zZSgpO1xuICAgIH1cbiAgfVxuICBhcHBseURpZmYoZGlmZiwge1xuICAgIHJ1bkNhbGxiYWNrcyA9IHRydWUsXG4gICAgaWdub3JlRXBoZW1lcmFsS2V5cyA9IGZhbHNlXG4gIH0gPSB7fSkge1xuICAgIHRoaXMuYXRvbWljKCgpID0+IHtcbiAgICAgIGNvbnN0IHRvUHV0ID0gb2JqZWN0TWFwVmFsdWVzKGRpZmYuYWRkZWQpO1xuICAgICAgZm9yIChjb25zdCBbX2Zyb20sIHRvXSBvZiBvYmplY3RNYXBWYWx1ZXMoZGlmZi51cGRhdGVkKSkge1xuICAgICAgICBjb25zdCB0eXBlID0gdGhpcy5zY2hlbWEuZ2V0VHlwZSh0by50eXBlTmFtZSk7XG4gICAgICAgIGlmIChpZ25vcmVFcGhlbWVyYWxLZXlzICYmIHR5cGUuZXBoZW1lcmFsS2V5U2V0LnNpemUpIHtcbiAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZ2V0KHRvLmlkKTtcbiAgICAgICAgICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgICAgICAgICB0b1B1dC5wdXNoKHRvKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgY2hhbmdlZCA9IG51bGw7XG4gICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModG8pKSB7XG4gICAgICAgICAgICBpZiAodHlwZS5lcGhlbWVyYWxLZXlTZXQuaGFzKGtleSkgfHwgT2JqZWN0LmlzKHZhbHVlLCBnZXRPd25Qcm9wZXJ0eShleGlzdGluZywga2V5KSkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNoYW5nZWQpXG4gICAgICAgICAgICAgIGNoYW5nZWQgPSB7IC4uLmV4aXN0aW5nIH07XG4gICAgICAgICAgICBjaGFuZ2VkW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNoYW5nZWQpXG4gICAgICAgICAgICB0b1B1dC5wdXNoKGNoYW5nZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvUHV0LnB1c2godG8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCB0b1JlbW92ZSA9IG9iamVjdE1hcEtleXMoZGlmZi5yZW1vdmVkKTtcbiAgICAgIGlmICh0b1B1dC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5wdXQodG9QdXQpO1xuICAgICAgfVxuICAgICAgaWYgKHRvUmVtb3ZlLmxlbmd0aCkge1xuICAgICAgICB0aGlzLnJlbW92ZSh0b1JlbW92ZSk7XG4gICAgICB9XG4gICAgfSwgcnVuQ2FsbGJhY2tzKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgY29tcHV0ZWQgY2FjaGUuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGRlcml2YXRpb24gY2FjaGUuXG4gICAqIEBwYXJhbSBkZXJpdmUgLSBBIGZ1bmN0aW9uIHVzZWQgdG8gZGVyaXZlIHRoZSB2YWx1ZSBvZiB0aGUgY2FjaGUuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNyZWF0ZUNvbXB1dGVkQ2FjaGUgPSAobmFtZSwgZGVyaXZlLCBpc0VxdWFsKSA9PiB7XG4gICAgY29uc3QgY2FjaGUgPSBuZXcgV2Vha0NhY2hlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldDogKGlkKSA9PiB7XG4gICAgICAgIGNvbnN0IGF0b20yID0gdGhpcy5hdG9tcy5nZXQoKVtpZF07XG4gICAgICAgIGlmICghYXRvbTIpIHtcbiAgICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWNoZS5nZXQoYXRvbTIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCByZWNvcmRTaWduYWwgPSBpc0VxdWFsID8gY29tcHV0ZWQoYXRvbTIubmFtZSArIFwiOmVxdWFsc1wiLCAoKSA9PiBhdG9tMi5nZXQoKSwgeyBpc0VxdWFsIH0pIDogYXRvbTI7XG4gICAgICAgICAgcmV0dXJuIGNvbXB1dGVkKG5hbWUgKyBcIjpcIiArIGlkLCAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGVyaXZlKHJlY29yZFNpZ25hbC5nZXQoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pLmdldCgpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjb21wdXRlZCBjYWNoZSBmcm9tIGEgc2VsZWN0b3JcbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZGVyaXZhdGlvbiBjYWNoZS5cbiAgICogQHBhcmFtIHNlbGVjdG9yIC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdWJzZXQgb2YgdGhlIG9yaWdpbmFsIHNoYXBlXG4gICAqIEBwYXJhbSBkZXJpdmUgLSBBIGZ1bmN0aW9uIHVzZWQgdG8gZGVyaXZlIHRoZSB2YWx1ZSBvZiB0aGUgY2FjaGUuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNyZWF0ZVNlbGVjdGVkQ29tcHV0ZWRDYWNoZSA9IChuYW1lLCBzZWxlY3RvciwgZGVyaXZlKSA9PiB7XG4gICAgY29uc3QgY2FjaGUgPSBuZXcgV2Vha0NhY2hlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldDogKGlkKSA9PiB7XG4gICAgICAgIGNvbnN0IGF0b20yID0gdGhpcy5hdG9tcy5nZXQoKVtpZF07XG4gICAgICAgIGlmICghYXRvbTIpIHtcbiAgICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWNoZS5nZXQoYXRvbTIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBkID0gY29tcHV0ZWQoXG4gICAgICAgICAgICBuYW1lICsgXCI6XCIgKyBpZCArIFwiOnNlbGVjdG9yXCIsXG4gICAgICAgICAgICAoKSA9PiBzZWxlY3RvcihhdG9tMi5nZXQoKSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBjb21wdXRlZChuYW1lICsgXCI6XCIgKyBpZCwgKCkgPT4gZGVyaXZlKGQuZ2V0KCkpKTtcbiAgICAgICAgfSkuZ2V0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbiAgX2ludGVncml0eUNoZWNrZXI7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZW5zdXJlU3RvcmVJc1VzYWJsZSgpIHtcbiAgICB0aGlzLmF0b21pYygoKSA9PiB7XG4gICAgICB0aGlzLl9pbnRlZ3JpdHlDaGVja2VyID8/PSB0aGlzLnNjaGVtYS5jcmVhdGVJbnRlZ3JpdHlDaGVja2VyKHRoaXMpO1xuICAgICAgdGhpcy5faW50ZWdyaXR5Q2hlY2tlcj8uKCk7XG4gICAgfSk7XG4gIH1cbiAgX2lzUG9zc2libHlDb3JydXB0ZWQgPSBmYWxzZTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBtYXJrQXNQb3NzaWJseUNvcnJ1cHRlZCgpIHtcbiAgICB0aGlzLl9pc1Bvc3NpYmx5Q29ycnVwdGVkID0gdHJ1ZTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGlzUG9zc2libHlDb3JydXB0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzUG9zc2libHlDb3JydXB0ZWQ7XG4gIH1cbiAgcGVuZGluZ0FmdGVyRXZlbnRzID0gbnVsbDtcbiAgYWRkRGlmZkZvckFmdGVyRXZlbnQoYmVmb3JlLCBhZnRlcikge1xuICAgIGFzc2VydCh0aGlzLnBlbmRpbmdBZnRlckV2ZW50cywgXCJtdXN0IGJlIGluIGV2ZW50IG9wZXJhdGlvblwiKTtcbiAgICBpZiAoYmVmb3JlID09PSBhZnRlcilcbiAgICAgIHJldHVybjtcbiAgICBpZiAoYmVmb3JlICYmIGFmdGVyKVxuICAgICAgYXNzZXJ0KGJlZm9yZS5pZCA9PT0gYWZ0ZXIuaWQpO1xuICAgIGlmICghYmVmb3JlICYmICFhZnRlcilcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBpZCA9IChiZWZvcmUgfHwgYWZ0ZXIpLmlkO1xuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5wZW5kaW5nQWZ0ZXJFdmVudHMuZ2V0KGlkKTtcbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIGV4aXN0aW5nLmFmdGVyID0gYWZ0ZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGVuZGluZ0FmdGVyRXZlbnRzLnNldChpZCwgeyBiZWZvcmUsIGFmdGVyIH0pO1xuICAgIH1cbiAgfVxuICBmbHVzaEF0b21pY0NhbGxiYWNrcygpIHtcbiAgICBsZXQgdXBkYXRlRGVwdGggPSAwO1xuICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuaXNNZXJnaW5nUmVtb3RlQ2hhbmdlcyA/IFwicmVtb3RlXCIgOiBcInVzZXJcIjtcbiAgICB3aGlsZSAodGhpcy5wZW5kaW5nQWZ0ZXJFdmVudHMpIHtcbiAgICAgIGNvbnN0IGV2ZW50cyA9IHRoaXMucGVuZGluZ0FmdGVyRXZlbnRzO1xuICAgICAgdGhpcy5wZW5kaW5nQWZ0ZXJFdmVudHMgPSBudWxsO1xuICAgICAgaWYgKCF0aGlzLnNpZGVFZmZlY3RzLmlzRW5hYmxlZCgpKVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIHVwZGF0ZURlcHRoKys7XG4gICAgICBpZiAodXBkYXRlRGVwdGggPiAxMDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWF4aW11bSBzdG9yZSB1cGRhdGUgZGVwdGggZXhjZWVkZWQsIGJhaWxpbmcgb3V0XCIpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCB7IGJlZm9yZSwgYWZ0ZXIgfSBvZiBldmVudHMudmFsdWVzKCkpIHtcbiAgICAgICAgaWYgKGJlZm9yZSAmJiBhZnRlcikge1xuICAgICAgICAgIHRoaXMuc2lkZUVmZmVjdHMuaGFuZGxlQWZ0ZXJDaGFuZ2UoYmVmb3JlLCBhZnRlciwgc291cmNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChiZWZvcmUgJiYgIWFmdGVyKSB7XG4gICAgICAgICAgdGhpcy5zaWRlRWZmZWN0cy5oYW5kbGVBZnRlckRlbGV0ZShiZWZvcmUsIHNvdXJjZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWJlZm9yZSAmJiBhZnRlcikge1xuICAgICAgICAgIHRoaXMuc2lkZUVmZmVjdHMuaGFuZGxlQWZ0ZXJDcmVhdGUoYWZ0ZXIsIHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5wZW5kaW5nQWZ0ZXJFdmVudHMpIHtcbiAgICAgICAgdGhpcy5zaWRlRWZmZWN0cy5oYW5kbGVPcGVyYXRpb25Db21wbGV0ZShzb3VyY2UpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBfaXNJbkF0b21pY09wID0gZmFsc2U7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgYXRvbWljKGZuLCBydW5DYWxsYmFja3MgPSB0cnVlKSB7XG4gICAgcmV0dXJuIHRyYW5zYWN0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9pc0luQXRvbWljT3ApIHtcbiAgICAgICAgaWYgKCF0aGlzLnBlbmRpbmdBZnRlckV2ZW50cylcbiAgICAgICAgICB0aGlzLnBlbmRpbmdBZnRlckV2ZW50cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgICAgfVxuICAgICAgdGhpcy5wZW5kaW5nQWZ0ZXJFdmVudHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgY29uc3QgcHJldlNpZGVFZmZlY3RzRW5hYmxlZCA9IHRoaXMuc2lkZUVmZmVjdHMuaXNFbmFibGVkKCk7XG4gICAgICB0aGlzLnNpZGVFZmZlY3RzLnNldElzRW5hYmxlZChydW5DYWxsYmFja3MgPz8gcHJldlNpZGVFZmZlY3RzRW5hYmxlZCk7XG4gICAgICB0aGlzLl9pc0luQXRvbWljT3AgPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZm4oKTtcbiAgICAgICAgdGhpcy5mbHVzaEF0b21pY0NhbGxiYWNrcygpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdGhpcy5wZW5kaW5nQWZ0ZXJFdmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLnNpZGVFZmZlY3RzLnNldElzRW5hYmxlZChwcmV2U2lkZUVmZmVjdHNFbmFibGVkKTtcbiAgICAgICAgdGhpcy5faXNJbkF0b21pY09wID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhZGRIaXN0b3J5SW50ZXJjZXB0b3IoZm4pIHtcbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5QWNjdW11bGF0b3IuYWRkSW50ZXJjZXB0b3IoXG4gICAgICAoZW50cnkpID0+IGZuKGVudHJ5LCB0aGlzLmlzTWVyZ2luZ1JlbW90ZUNoYW5nZXMgPyBcInJlbW90ZVwiIDogXCJ1c2VyXCIpXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gc3F1YXNoSGlzdG9yeUVudHJpZXMoZW50cmllcykge1xuICBpZiAoZW50cmllcy5sZW5ndGggPT09IDApXG4gICAgcmV0dXJuIFtdO1xuICBjb25zdCBjaHVua2VkID0gW107XG4gIGxldCBjaHVuayA9IFtlbnRyaWVzWzBdXTtcbiAgbGV0IGVudHJ5O1xuICBmb3IgKGxldCBpID0gMSwgbiA9IGVudHJpZXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgZW50cnkgPSBlbnRyaWVzW2ldO1xuICAgIGlmIChjaHVua1swXS5zb3VyY2UgIT09IGVudHJ5LnNvdXJjZSkge1xuICAgICAgY2h1bmtlZC5wdXNoKGNodW5rKTtcbiAgICAgIGNodW5rID0gW107XG4gICAgfVxuICAgIGNodW5rLnB1c2goZW50cnkpO1xuICB9XG4gIGNodW5rZWQucHVzaChjaHVuayk7XG4gIHJldHVybiBkZXZGcmVlemUoXG4gICAgY2h1bmtlZC5tYXAoKGNodW5rMikgPT4gKHtcbiAgICAgIHNvdXJjZTogY2h1bmsyWzBdLnNvdXJjZSxcbiAgICAgIGNoYW5nZXM6IHNxdWFzaFJlY29yZERpZmZzKGNodW5rMi5tYXAoKGUpID0+IGUuY2hhbmdlcykpXG4gICAgfSkpXG4gICk7XG59XG5jbGFzcyBIaXN0b3J5QWNjdW11bGF0b3Ige1xuICBfaGlzdG9yeSA9IFtdO1xuICBfaW50ZXJjZXB0b3JzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgYWRkSW50ZXJjZXB0b3IoZm4pIHtcbiAgICB0aGlzLl9pbnRlcmNlcHRvcnMuYWRkKGZuKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy5faW50ZXJjZXB0b3JzLmRlbGV0ZShmbik7XG4gICAgfTtcbiAgfVxuICBhZGQoZW50cnkpIHtcbiAgICB0aGlzLl9oaXN0b3J5LnB1c2goZW50cnkpO1xuICAgIGZvciAoY29uc3QgaW50ZXJjZXB0b3Igb2YgdGhpcy5faW50ZXJjZXB0b3JzKSB7XG4gICAgICBpbnRlcmNlcHRvcihlbnRyeSk7XG4gICAgfVxuICB9XG4gIGZsdXNoKCkge1xuICAgIGNvbnN0IGhpc3RvcnkgPSBzcXVhc2hIaXN0b3J5RW50cmllcyh0aGlzLl9oaXN0b3J5KTtcbiAgICB0aGlzLl9oaXN0b3J5ID0gW107XG4gICAgcmV0dXJuIGhpc3Rvcnk7XG4gIH1cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5faGlzdG9yeSA9IFtdO1xuICB9XG4gIGhhc0NoYW5nZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hpc3RvcnkubGVuZ3RoID4gMDtcbiAgfVxufVxuZnVuY3Rpb24gY3JlYXRlQ29tcHV0ZWRDYWNoZShuYW1lLCBkZXJpdmUsIGlzRXF1YWwpIHtcbiAgY29uc3QgY2FjaGUgPSBuZXcgV2Vha0NhY2hlKCk7XG4gIHJldHVybiB7XG4gICAgZ2V0KGNvbnRleHQsIGlkKSB7XG4gICAgICBjb25zdCBjb21wdXRlZENhY2hlID0gY2FjaGUuZ2V0KGNvbnRleHQsICgpID0+IHtcbiAgICAgICAgY29uc3Qgc3RvcmUgPSBjb250ZXh0IGluc3RhbmNlb2YgU3RvcmUgPyBjb250ZXh0IDogY29udGV4dC5zdG9yZTtcbiAgICAgICAgcmV0dXJuIHN0b3JlLmNyZWF0ZUNvbXB1dGVkQ2FjaGUobmFtZSwgKHJlY29yZCkgPT4gZGVyaXZlKGNvbnRleHQsIHJlY29yZCksIGlzRXF1YWwpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gY29tcHV0ZWRDYWNoZS5nZXQoaWQpO1xuICAgIH1cbiAgfTtcbn1cbmV4cG9ydCB7XG4gIFN0b3JlLFxuICBjcmVhdGVDb21wdXRlZENhY2hlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RvcmUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/Store.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreQueries.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/StoreQueries.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StoreQueries: () => (/* binding */ StoreQueries)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash.isequal */ \"(ssr)/./node_modules/lodash.isequal/index.js\");\n/* harmony import */ var _executeQuery_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./executeQuery.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/executeQuery.mjs\");\n/* harmony import */ var _IncrementalSetConstructor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./IncrementalSetConstructor.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/IncrementalSetConstructor.mjs\");\n/* harmony import */ var _setUtils_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./setUtils.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/setUtils.mjs\");\n\n\n\n\n\n\nclass StoreQueries {\n  constructor(atoms, history) {\n    this.atoms = atoms;\n    this.history = history;\n  }\n  /**\n   * A cache of derivations (indexes).\n   *\n   * @internal\n   */\n  indexCache = /* @__PURE__ */ new Map();\n  /**\n   * A cache of derivations (filtered histories).\n   *\n   * @internal\n   */\n  historyCache = /* @__PURE__ */ new Map();\n  /**\n   * Create a derivation that contains the history for a given type\n   *\n   * @param typeName - The name of the type to filter by.\n   * @returns A derivation that returns the ids of all records of the given type.\n   * @public\n   */\n  filterHistory(typeName) {\n    if (this.historyCache.has(typeName)) {\n      return this.historyCache.get(typeName);\n    }\n    const filtered = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\n      \"filterHistory:\" + typeName,\n      (lastValue, lastComputedEpoch) => {\n        if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(lastValue)) {\n          return this.history.get();\n        }\n        const diff = this.history.getDiffSince(lastComputedEpoch);\n        if (diff === _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE)\n          return this.history.get();\n        const res = { added: {}, removed: {}, updated: {} };\n        let numAdded = 0;\n        let numRemoved = 0;\n        let numUpdated = 0;\n        for (const changes of diff) {\n          for (const added of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.added)) {\n            if (added.typeName === typeName) {\n              if (res.removed[added.id]) {\n                const original = res.removed[added.id];\n                delete res.removed[added.id];\n                numRemoved--;\n                if (original !== added) {\n                  res.updated[added.id] = [original, added];\n                  numUpdated++;\n                }\n              } else {\n                res.added[added.id] = added;\n                numAdded++;\n              }\n            }\n          }\n          for (const [from, to] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.updated)) {\n            if (to.typeName === typeName) {\n              if (res.added[to.id]) {\n                res.added[to.id] = to;\n              } else if (res.updated[to.id]) {\n                res.updated[to.id] = [res.updated[to.id][0], to];\n              } else {\n                res.updated[to.id] = [from, to];\n                numUpdated++;\n              }\n            }\n          }\n          for (const removed of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.removed)) {\n            if (removed.typeName === typeName) {\n              if (res.added[removed.id]) {\n                delete res.added[removed.id];\n                numAdded--;\n              } else if (res.updated[removed.id]) {\n                res.removed[removed.id] = res.updated[removed.id][0];\n                delete res.updated[removed.id];\n                numUpdated--;\n                numRemoved++;\n              } else {\n                res.removed[removed.id] = removed;\n                numRemoved++;\n              }\n            }\n          }\n        }\n        if (numAdded || numRemoved || numUpdated) {\n          return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.withDiff)(this.history.get(), res);\n        } else {\n          return lastValue;\n        }\n      },\n      { historyLength: 100 }\n    );\n    this.historyCache.set(typeName, filtered);\n    return filtered;\n  }\n  /**\n   * Create a derivation that returns an index on a property for the given type.\n   *\n   * @param typeName - The name of the type.\n   * @param property - The name of the property.\n   * @public\n   */\n  index(typeName, property) {\n    const cacheKey = typeName + \":\" + property;\n    if (this.indexCache.has(cacheKey)) {\n      return this.indexCache.get(cacheKey);\n    }\n    const index = this.__uncached_createIndex(typeName, property);\n    this.indexCache.set(cacheKey, index);\n    return index;\n  }\n  /**\n   * Create a derivation that returns an index on a property for the given type.\n   *\n   * @param typeName - The name of the type?.\n   * @param property - The name of the property?.\n   * @internal\n   */\n  __uncached_createIndex(typeName, property) {\n    const typeHistory = this.filterHistory(typeName);\n    const fromScratch = () => {\n      typeHistory.get();\n      const res = /* @__PURE__ */ new Map();\n      for (const atom of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(this.atoms.get())) {\n        const record = atom.get();\n        if (record.typeName === typeName) {\n          const value = record[property];\n          if (!res.has(value)) {\n            res.set(value, /* @__PURE__ */ new Set());\n          }\n          res.get(value).add(record.id);\n        }\n      }\n      return res;\n    };\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\n      \"index:\" + typeName + \":\" + property,\n      (prevValue, lastComputedEpoch) => {\n        if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(prevValue))\n          return fromScratch();\n        const history = typeHistory.getDiffSince(lastComputedEpoch);\n        if (history === _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) {\n          return fromScratch();\n        }\n        const setConstructors = /* @__PURE__ */ new Map();\n        const add = (value, id) => {\n          let setConstructor = setConstructors.get(value);\n          if (!setConstructor)\n            setConstructor = new _IncrementalSetConstructor_mjs__WEBPACK_IMPORTED_MODULE_4__.IncrementalSetConstructor(\n              prevValue.get(value) ?? /* @__PURE__ */ new Set()\n            );\n          setConstructor.add(id);\n          setConstructors.set(value, setConstructor);\n        };\n        const remove = (value, id) => {\n          let set = setConstructors.get(value);\n          if (!set)\n            set = new _IncrementalSetConstructor_mjs__WEBPACK_IMPORTED_MODULE_4__.IncrementalSetConstructor(prevValue.get(value) ?? /* @__PURE__ */ new Set());\n          set.remove(id);\n          setConstructors.set(value, set);\n        };\n        for (const changes of history) {\n          for (const record of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.added)) {\n            if (record.typeName === typeName) {\n              const value = record[property];\n              add(value, record.id);\n            }\n          }\n          for (const [from, to] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.updated)) {\n            if (to.typeName === typeName) {\n              const prev = from[property];\n              const next = to[property];\n              if (prev !== next) {\n                remove(prev, to.id);\n                add(next, to.id);\n              }\n            }\n          }\n          for (const record of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.removed)) {\n            if (record.typeName === typeName) {\n              const value = record[property];\n              remove(value, record.id);\n            }\n          }\n        }\n        let nextValue = void 0;\n        let nextDiff = void 0;\n        for (const [value, setConstructor] of setConstructors) {\n          const result = setConstructor.get();\n          if (!result)\n            continue;\n          if (!nextValue)\n            nextValue = new Map(prevValue);\n          if (!nextDiff)\n            nextDiff = /* @__PURE__ */ new Map();\n          if (result.value.size === 0) {\n            nextValue.delete(value);\n          } else {\n            nextValue.set(value, result.value);\n          }\n          nextDiff.set(value, result.diff);\n        }\n        if (nextValue && nextDiff) {\n          return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.withDiff)(nextValue, nextDiff);\n        }\n        return prevValue;\n      },\n      { historyLength: 100 }\n    );\n  }\n  /**\n   * Create a derivation that will return a signle record matching the given query.\n   *\n   * It will return undefined if there is no matching record\n   *\n   * @param typeName - The name of the type?\n   * @param queryCreator - A function that returns the query expression.\n   * @param name - (optinal) The name of the query.\n   */\n  record(typeName, queryCreator = () => ({}), name = \"record:\" + typeName + (queryCreator ? \":\" + queryCreator.toString() : \"\")) {\n    const ids = this.ids(typeName, queryCreator, name);\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(name, () => {\n      for (const id of ids.get()) {\n        return this.atoms.get()[id]?.get();\n      }\n      return void 0;\n    });\n  }\n  /**\n   * Create a derivation that will return an array of records matching the given query\n   *\n   * @param typeName - The name of the type?\n   * @param queryCreator - A function that returns the query expression.\n   * @param name - (optinal) The name of the query.\n   */\n  records(typeName, queryCreator = () => ({}), name = \"records:\" + typeName + (queryCreator ? \":\" + queryCreator.toString() : \"\")) {\n    const ids = this.ids(typeName, queryCreator, \"ids:\" + name);\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(name, () => {\n      return [...ids.get()].map((id) => {\n        const atom = this.atoms.get()[id];\n        if (!atom) {\n          throw new Error(\"no atom found for record id: \" + id);\n        }\n        return atom.get();\n      });\n    });\n  }\n  /**\n   * Create a derivation that will return the ids of all records of the given type.\n   *\n   * @param typeName - The name of the type.\n   * @param queryCreator - A function that returns the query expression.\n   * @param name - (optinal) The name of the query.\n   */\n  ids(typeName, queryCreator = () => ({}), name = \"ids:\" + typeName + (queryCreator ? \":\" + queryCreator.toString() : \"\")) {\n    const typeHistory = this.filterHistory(typeName);\n    const fromScratch = () => {\n      typeHistory.get();\n      const query = queryCreator();\n      if (Object.keys(query).length === 0) {\n        return new Set(\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(this.atoms.get()).flatMap((v) => {\n            const r = v.get();\n            if (r.typeName === typeName) {\n              return r.id;\n            } else {\n              return [];\n            }\n          })\n        );\n      }\n      return (0,_executeQuery_mjs__WEBPACK_IMPORTED_MODULE_3__.executeQuery)(this, typeName, query);\n    };\n    const fromScratchWithDiff = (prevValue) => {\n      const nextValue = fromScratch();\n      const diff = (0,_setUtils_mjs__WEBPACK_IMPORTED_MODULE_5__.diffSets)(prevValue, nextValue);\n      if (diff) {\n        return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.withDiff)(nextValue, diff);\n      } else {\n        return prevValue;\n      }\n    };\n    const cachedQuery = (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"ids_query:\" + name, queryCreator, {\n      isEqual: lodash_isequal__WEBPACK_IMPORTED_MODULE_2__\n    });\n    return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\n      \"query:\" + name,\n      (prevValue, lastComputedEpoch) => {\n        const query = cachedQuery.get();\n        if ((0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.isUninitialized)(prevValue)) {\n          return fromScratch();\n        }\n        if (lastComputedEpoch < cachedQuery.lastChangedEpoch) {\n          return fromScratchWithDiff(prevValue);\n        }\n        const history = typeHistory.getDiffSince(lastComputedEpoch);\n        if (history === _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.RESET_VALUE) {\n          return fromScratchWithDiff(prevValue);\n        }\n        const setConstructor = new _IncrementalSetConstructor_mjs__WEBPACK_IMPORTED_MODULE_4__.IncrementalSetConstructor(\n          prevValue\n        );\n        for (const changes of history) {\n          for (const added of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.added)) {\n            if (added.typeName === typeName && (0,_executeQuery_mjs__WEBPACK_IMPORTED_MODULE_3__.objectMatchesQuery)(query, added)) {\n              setConstructor.add(added.id);\n            }\n          }\n          for (const [_, updated] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.updated)) {\n            if (updated.typeName === typeName) {\n              if ((0,_executeQuery_mjs__WEBPACK_IMPORTED_MODULE_3__.objectMatchesQuery)(query, updated)) {\n                setConstructor.add(updated.id);\n              } else {\n                setConstructor.remove(updated.id);\n              }\n            }\n          }\n          for (const removed of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(changes.removed)) {\n            if (removed.typeName === typeName) {\n              setConstructor.remove(removed.id);\n            }\n          }\n        }\n        const result = setConstructor.get();\n        if (!result) {\n          return prevValue;\n        }\n        return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.withDiff)(result.value, result.diff);\n      },\n      { historyLength: 50 }\n    );\n  }\n  exec(typeName, query) {\n    const ids = (0,_executeQuery_mjs__WEBPACK_IMPORTED_MODULE_3__.executeQuery)(this, typeName, query);\n    if (ids.size === 0) {\n      return _tldraw_state__WEBPACK_IMPORTED_MODULE_0__.EMPTY_ARRAY;\n    }\n    const atoms = this.atoms.get();\n    return [...ids].map((id) => atoms[id].get());\n  }\n}\n\n//# sourceMappingURL=StoreQueries.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvU3RvcmVRdWVyaWVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBTXVCO0FBQ3lCO0FBQ1g7QUFDaUM7QUFDTTtBQUNsQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1REFBUTtBQUM3QjtBQUNBO0FBQ0EsWUFBWSw4REFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsc0RBQVc7QUFDaEM7QUFDQSxzQkFBc0IsU0FBUyxhQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDhEQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDhEQUFlO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDhEQUFlO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVEQUFRO0FBQ3pCLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDhEQUFlO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVEQUFRO0FBQ25CO0FBQ0E7QUFDQSxZQUFZLDhEQUFlO0FBQzNCO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHFGQUF5QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHFGQUF5QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4REFBZTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDhEQUFlO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4REFBZTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1REFBUTtBQUN6QjtBQUNBO0FBQ0EsT0FBTztBQUNQLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0EsV0FBVyx1REFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0EsV0FBVyx1REFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw4REFBZTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsYUFBYSwrREFBWTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsdURBQVE7QUFDM0I7QUFDQSxlQUFlLHVEQUFRO0FBQ3ZCLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdURBQVE7QUFDaEMsYUFBYTtBQUNiLEtBQUs7QUFDTCxXQUFXLHVEQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLFlBQVksOERBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFXO0FBQ25DO0FBQ0E7QUFDQSxtQ0FBbUMscUZBQXlCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw4REFBZTtBQUM3QywrQ0FBK0MscUVBQWtCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyw4REFBZTtBQUNwRDtBQUNBLGtCQUFrQixxRUFBa0I7QUFDcEM7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsOERBQWU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1REFBUTtBQUN2QixPQUFPO0FBQ1AsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwrREFBWTtBQUM1QjtBQUNBLGFBQWEsc0RBQVc7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvU3RvcmVRdWVyaWVzLm1qcz9kYjM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGNvbXB1dGVkLFxuICBFTVBUWV9BUlJBWSxcbiAgaXNVbmluaXRpYWxpemVkLFxuICBSRVNFVF9WQUxVRSxcbiAgd2l0aERpZmZcbn0gZnJvbSBcIkB0bGRyYXcvc3RhdGVcIjtcbmltcG9ydCB7IG9iamVjdE1hcFZhbHVlcyB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgaXNFcXVhbCBmcm9tIFwibG9kYXNoLmlzZXF1YWxcIjtcbmltcG9ydCB7IGV4ZWN1dGVRdWVyeSwgb2JqZWN0TWF0Y2hlc1F1ZXJ5IH0gZnJvbSBcIi4vZXhlY3V0ZVF1ZXJ5Lm1qc1wiO1xuaW1wb3J0IHsgSW5jcmVtZW50YWxTZXRDb25zdHJ1Y3RvciB9IGZyb20gXCIuL0luY3JlbWVudGFsU2V0Q29uc3RydWN0b3IubWpzXCI7XG5pbXBvcnQgeyBkaWZmU2V0cyB9IGZyb20gXCIuL3NldFV0aWxzLm1qc1wiO1xuY2xhc3MgU3RvcmVRdWVyaWVzIHtcbiAgY29uc3RydWN0b3IoYXRvbXMsIGhpc3RvcnkpIHtcbiAgICB0aGlzLmF0b21zID0gYXRvbXM7XG4gICAgdGhpcy5oaXN0b3J5ID0gaGlzdG9yeTtcbiAgfVxuICAvKipcbiAgICogQSBjYWNoZSBvZiBkZXJpdmF0aW9ucyAoaW5kZXhlcykuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgaW5kZXhDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8qKlxuICAgKiBBIGNhY2hlIG9mIGRlcml2YXRpb25zIChmaWx0ZXJlZCBoaXN0b3JpZXMpLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGhpc3RvcnlDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBkZXJpdmF0aW9uIHRoYXQgY29udGFpbnMgdGhlIGhpc3RvcnkgZm9yIGEgZ2l2ZW4gdHlwZVxuICAgKlxuICAgKiBAcGFyYW0gdHlwZU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdHlwZSB0byBmaWx0ZXIgYnkuXG4gICAqIEByZXR1cm5zIEEgZGVyaXZhdGlvbiB0aGF0IHJldHVybnMgdGhlIGlkcyBvZiBhbGwgcmVjb3JkcyBvZiB0aGUgZ2l2ZW4gdHlwZS5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZmlsdGVySGlzdG9yeSh0eXBlTmFtZSkge1xuICAgIGlmICh0aGlzLmhpc3RvcnlDYWNoZS5oYXModHlwZU5hbWUpKSB7XG4gICAgICByZXR1cm4gdGhpcy5oaXN0b3J5Q2FjaGUuZ2V0KHR5cGVOYW1lKTtcbiAgICB9XG4gICAgY29uc3QgZmlsdGVyZWQgPSBjb21wdXRlZChcbiAgICAgIFwiZmlsdGVySGlzdG9yeTpcIiArIHR5cGVOYW1lLFxuICAgICAgKGxhc3RWYWx1ZSwgbGFzdENvbXB1dGVkRXBvY2gpID0+IHtcbiAgICAgICAgaWYgKGlzVW5pbml0aWFsaXplZChsYXN0VmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGlzdG9yeS5nZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaWZmID0gdGhpcy5oaXN0b3J5LmdldERpZmZTaW5jZShsYXN0Q29tcHV0ZWRFcG9jaCk7XG4gICAgICAgIGlmIChkaWZmID09PSBSRVNFVF9WQUxVRSlcbiAgICAgICAgICByZXR1cm4gdGhpcy5oaXN0b3J5LmdldCgpO1xuICAgICAgICBjb25zdCByZXMgPSB7IGFkZGVkOiB7fSwgcmVtb3ZlZDoge30sIHVwZGF0ZWQ6IHt9IH07XG4gICAgICAgIGxldCBudW1BZGRlZCA9IDA7XG4gICAgICAgIGxldCBudW1SZW1vdmVkID0gMDtcbiAgICAgICAgbGV0IG51bVVwZGF0ZWQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNoYW5nZXMgb2YgZGlmZikge1xuICAgICAgICAgIGZvciAoY29uc3QgYWRkZWQgb2Ygb2JqZWN0TWFwVmFsdWVzKGNoYW5nZXMuYWRkZWQpKSB7XG4gICAgICAgICAgICBpZiAoYWRkZWQudHlwZU5hbWUgPT09IHR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgIGlmIChyZXMucmVtb3ZlZFthZGRlZC5pZF0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9IHJlcy5yZW1vdmVkW2FkZGVkLmlkXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVzLnJlbW92ZWRbYWRkZWQuaWRdO1xuICAgICAgICAgICAgICAgIG51bVJlbW92ZWQtLTtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwgIT09IGFkZGVkKSB7XG4gICAgICAgICAgICAgICAgICByZXMudXBkYXRlZFthZGRlZC5pZF0gPSBbb3JpZ2luYWwsIGFkZGVkXTtcbiAgICAgICAgICAgICAgICAgIG51bVVwZGF0ZWQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLmFkZGVkW2FkZGVkLmlkXSA9IGFkZGVkO1xuICAgICAgICAgICAgICAgIG51bUFkZGVkKys7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCBbZnJvbSwgdG9dIG9mIG9iamVjdE1hcFZhbHVlcyhjaGFuZ2VzLnVwZGF0ZWQpKSB7XG4gICAgICAgICAgICBpZiAodG8udHlwZU5hbWUgPT09IHR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgIGlmIChyZXMuYWRkZWRbdG8uaWRdKSB7XG4gICAgICAgICAgICAgICAgcmVzLmFkZGVkW3RvLmlkXSA9IHRvO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy51cGRhdGVkW3RvLmlkXSkge1xuICAgICAgICAgICAgICAgIHJlcy51cGRhdGVkW3RvLmlkXSA9IFtyZXMudXBkYXRlZFt0by5pZF1bMF0sIHRvXTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMudXBkYXRlZFt0by5pZF0gPSBbZnJvbSwgdG9dO1xuICAgICAgICAgICAgICAgIG51bVVwZGF0ZWQrKztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IHJlbW92ZWQgb2Ygb2JqZWN0TWFwVmFsdWVzKGNoYW5nZXMucmVtb3ZlZCkpIHtcbiAgICAgICAgICAgIGlmIChyZW1vdmVkLnR5cGVOYW1lID09PSB0eXBlTmFtZSkge1xuICAgICAgICAgICAgICBpZiAocmVzLmFkZGVkW3JlbW92ZWQuaWRdKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlcy5hZGRlZFtyZW1vdmVkLmlkXTtcbiAgICAgICAgICAgICAgICBudW1BZGRlZC0tO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy51cGRhdGVkW3JlbW92ZWQuaWRdKSB7XG4gICAgICAgICAgICAgICAgcmVzLnJlbW92ZWRbcmVtb3ZlZC5pZF0gPSByZXMudXBkYXRlZFtyZW1vdmVkLmlkXVswXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVzLnVwZGF0ZWRbcmVtb3ZlZC5pZF07XG4gICAgICAgICAgICAgICAgbnVtVXBkYXRlZC0tO1xuICAgICAgICAgICAgICAgIG51bVJlbW92ZWQrKztcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMucmVtb3ZlZFtyZW1vdmVkLmlkXSA9IHJlbW92ZWQ7XG4gICAgICAgICAgICAgICAgbnVtUmVtb3ZlZCsrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChudW1BZGRlZCB8fCBudW1SZW1vdmVkIHx8IG51bVVwZGF0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gd2l0aERpZmYodGhpcy5oaXN0b3J5LmdldCgpLCByZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBsYXN0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IGhpc3RvcnlMZW5ndGg6IDEwMCB9XG4gICAgKTtcbiAgICB0aGlzLmhpc3RvcnlDYWNoZS5zZXQodHlwZU5hbWUsIGZpbHRlcmVkKTtcbiAgICByZXR1cm4gZmlsdGVyZWQ7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGRlcml2YXRpb24gdGhhdCByZXR1cm5zIGFuIGluZGV4IG9uIGEgcHJvcGVydHkgZm9yIHRoZSBnaXZlbiB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0gdHlwZU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdHlwZS5cbiAgICogQHBhcmFtIHByb3BlcnR5IC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5LlxuICAgKiBAcHVibGljXG4gICAqL1xuICBpbmRleCh0eXBlTmFtZSwgcHJvcGVydHkpIHtcbiAgICBjb25zdCBjYWNoZUtleSA9IHR5cGVOYW1lICsgXCI6XCIgKyBwcm9wZXJ0eTtcbiAgICBpZiAodGhpcy5pbmRleENhY2hlLmhhcyhjYWNoZUtleSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmluZGV4Q2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLl9fdW5jYWNoZWRfY3JlYXRlSW5kZXgodHlwZU5hbWUsIHByb3BlcnR5KTtcbiAgICB0aGlzLmluZGV4Q2FjaGUuc2V0KGNhY2hlS2V5LCBpbmRleCk7XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBkZXJpdmF0aW9uIHRoYXQgcmV0dXJucyBhbiBpbmRleCBvbiBhIHByb3BlcnR5IGZvciB0aGUgZ2l2ZW4gdHlwZS5cbiAgICpcbiAgICogQHBhcmFtIHR5cGVOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHR5cGU/LlxuICAgKiBAcGFyYW0gcHJvcGVydHkgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHk/LlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9fdW5jYWNoZWRfY3JlYXRlSW5kZXgodHlwZU5hbWUsIHByb3BlcnR5KSB7XG4gICAgY29uc3QgdHlwZUhpc3RvcnkgPSB0aGlzLmZpbHRlckhpc3RvcnkodHlwZU5hbWUpO1xuICAgIGNvbnN0IGZyb21TY3JhdGNoID0gKCkgPT4ge1xuICAgICAgdHlwZUhpc3RvcnkuZ2V0KCk7XG4gICAgICBjb25zdCByZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgZm9yIChjb25zdCBhdG9tIG9mIG9iamVjdE1hcFZhbHVlcyh0aGlzLmF0b21zLmdldCgpKSkge1xuICAgICAgICBjb25zdCByZWNvcmQgPSBhdG9tLmdldCgpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGVOYW1lID09PSB0eXBlTmFtZSkge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmVjb3JkW3Byb3BlcnR5XTtcbiAgICAgICAgICBpZiAoIXJlcy5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICByZXMuc2V0KHZhbHVlLCAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzLmdldCh2YWx1ZSkuYWRkKHJlY29yZC5pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICByZXR1cm4gY29tcHV0ZWQoXG4gICAgICBcImluZGV4OlwiICsgdHlwZU5hbWUgKyBcIjpcIiArIHByb3BlcnR5LFxuICAgICAgKHByZXZWYWx1ZSwgbGFzdENvbXB1dGVkRXBvY2gpID0+IHtcbiAgICAgICAgaWYgKGlzVW5pbml0aWFsaXplZChwcmV2VmFsdWUpKVxuICAgICAgICAgIHJldHVybiBmcm9tU2NyYXRjaCgpO1xuICAgICAgICBjb25zdCBoaXN0b3J5ID0gdHlwZUhpc3RvcnkuZ2V0RGlmZlNpbmNlKGxhc3RDb21wdXRlZEVwb2NoKTtcbiAgICAgICAgaWYgKGhpc3RvcnkgPT09IFJFU0VUX1ZBTFVFKSB7XG4gICAgICAgICAgcmV0dXJuIGZyb21TY3JhdGNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2V0Q29uc3RydWN0b3JzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgYWRkID0gKHZhbHVlLCBpZCkgPT4ge1xuICAgICAgICAgIGxldCBzZXRDb25zdHJ1Y3RvciA9IHNldENvbnN0cnVjdG9ycy5nZXQodmFsdWUpO1xuICAgICAgICAgIGlmICghc2V0Q29uc3RydWN0b3IpXG4gICAgICAgICAgICBzZXRDb25zdHJ1Y3RvciA9IG5ldyBJbmNyZW1lbnRhbFNldENvbnN0cnVjdG9yKFxuICAgICAgICAgICAgICBwcmV2VmFsdWUuZ2V0KHZhbHVlKSA/PyAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIHNldENvbnN0cnVjdG9yLmFkZChpZCk7XG4gICAgICAgICAgc2V0Q29uc3RydWN0b3JzLnNldCh2YWx1ZSwgc2V0Q29uc3RydWN0b3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZW1vdmUgPSAodmFsdWUsIGlkKSA9PiB7XG4gICAgICAgICAgbGV0IHNldCA9IHNldENvbnN0cnVjdG9ycy5nZXQodmFsdWUpO1xuICAgICAgICAgIGlmICghc2V0KVxuICAgICAgICAgICAgc2V0ID0gbmV3IEluY3JlbWVudGFsU2V0Q29uc3RydWN0b3IocHJldlZhbHVlLmdldCh2YWx1ZSkgPz8gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG4gICAgICAgICAgc2V0LnJlbW92ZShpZCk7XG4gICAgICAgICAgc2V0Q29uc3RydWN0b3JzLnNldCh2YWx1ZSwgc2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBjaGFuZ2VzIG9mIGhpc3RvcnkpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBvYmplY3RNYXBWYWx1ZXMoY2hhbmdlcy5hZGRlZCkpIHtcbiAgICAgICAgICAgIGlmIChyZWNvcmQudHlwZU5hbWUgPT09IHR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmVjb3JkW3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgYWRkKHZhbHVlLCByZWNvcmQuaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IFtmcm9tLCB0b10gb2Ygb2JqZWN0TWFwVmFsdWVzKGNoYW5nZXMudXBkYXRlZCkpIHtcbiAgICAgICAgICAgIGlmICh0by50eXBlTmFtZSA9PT0gdHlwZU5hbWUpIHtcbiAgICAgICAgICAgICAgY29uc3QgcHJldiA9IGZyb21bcHJvcGVydHldO1xuICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gdG9bcHJvcGVydHldO1xuICAgICAgICAgICAgICBpZiAocHJldiAhPT0gbmV4dCkge1xuICAgICAgICAgICAgICAgIHJlbW92ZShwcmV2LCB0by5pZCk7XG4gICAgICAgICAgICAgICAgYWRkKG5leHQsIHRvLmlkKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBvYmplY3RNYXBWYWx1ZXMoY2hhbmdlcy5yZW1vdmVkKSkge1xuICAgICAgICAgICAgaWYgKHJlY29yZC50eXBlTmFtZSA9PT0gdHlwZU5hbWUpIHtcbiAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByZWNvcmRbcHJvcGVydHldO1xuICAgICAgICAgICAgICByZW1vdmUodmFsdWUsIHJlY29yZC5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBuZXh0VmFsdWUgPSB2b2lkIDA7XG4gICAgICAgIGxldCBuZXh0RGlmZiA9IHZvaWQgMDtcbiAgICAgICAgZm9yIChjb25zdCBbdmFsdWUsIHNldENvbnN0cnVjdG9yXSBvZiBzZXRDb25zdHJ1Y3RvcnMpIHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBzZXRDb25zdHJ1Y3Rvci5nZXQoKTtcbiAgICAgICAgICBpZiAoIXJlc3VsdClcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIGlmICghbmV4dFZhbHVlKVxuICAgICAgICAgICAgbmV4dFZhbHVlID0gbmV3IE1hcChwcmV2VmFsdWUpO1xuICAgICAgICAgIGlmICghbmV4dERpZmYpXG4gICAgICAgICAgICBuZXh0RGlmZiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZS5zaXplID09PSAwKSB7XG4gICAgICAgICAgICBuZXh0VmFsdWUuZGVsZXRlKHZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV4dFZhbHVlLnNldCh2YWx1ZSwgcmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV4dERpZmYuc2V0KHZhbHVlLCByZXN1bHQuZGlmZik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5leHRWYWx1ZSAmJiBuZXh0RGlmZikge1xuICAgICAgICAgIHJldHVybiB3aXRoRGlmZihuZXh0VmFsdWUsIG5leHREaWZmKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJldlZhbHVlO1xuICAgICAgfSxcbiAgICAgIHsgaGlzdG9yeUxlbmd0aDogMTAwIH1cbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBkZXJpdmF0aW9uIHRoYXQgd2lsbCByZXR1cm4gYSBzaWdubGUgcmVjb3JkIG1hdGNoaW5nIHRoZSBnaXZlbiBxdWVyeS5cbiAgICpcbiAgICogSXQgd2lsbCByZXR1cm4gdW5kZWZpbmVkIGlmIHRoZXJlIGlzIG5vIG1hdGNoaW5nIHJlY29yZFxuICAgKlxuICAgKiBAcGFyYW0gdHlwZU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdHlwZT9cbiAgICogQHBhcmFtIHF1ZXJ5Q3JlYXRvciAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBxdWVyeSBleHByZXNzaW9uLlxuICAgKiBAcGFyYW0gbmFtZSAtIChvcHRpbmFsKSBUaGUgbmFtZSBvZiB0aGUgcXVlcnkuXG4gICAqL1xuICByZWNvcmQodHlwZU5hbWUsIHF1ZXJ5Q3JlYXRvciA9ICgpID0+ICh7fSksIG5hbWUgPSBcInJlY29yZDpcIiArIHR5cGVOYW1lICsgKHF1ZXJ5Q3JlYXRvciA/IFwiOlwiICsgcXVlcnlDcmVhdG9yLnRvU3RyaW5nKCkgOiBcIlwiKSkge1xuICAgIGNvbnN0IGlkcyA9IHRoaXMuaWRzKHR5cGVOYW1lLCBxdWVyeUNyZWF0b3IsIG5hbWUpO1xuICAgIHJldHVybiBjb21wdXRlZChuYW1lLCAoKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcy5nZXQoKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdG9tcy5nZXQoKVtpZF0/LmdldCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgZGVyaXZhdGlvbiB0aGF0IHdpbGwgcmV0dXJuIGFuIGFycmF5IG9mIHJlY29yZHMgbWF0Y2hpbmcgdGhlIGdpdmVuIHF1ZXJ5XG4gICAqXG4gICAqIEBwYXJhbSB0eXBlTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0eXBlP1xuICAgKiBAcGFyYW0gcXVlcnlDcmVhdG9yIC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHF1ZXJ5IGV4cHJlc3Npb24uXG4gICAqIEBwYXJhbSBuYW1lIC0gKG9wdGluYWwpIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS5cbiAgICovXG4gIHJlY29yZHModHlwZU5hbWUsIHF1ZXJ5Q3JlYXRvciA9ICgpID0+ICh7fSksIG5hbWUgPSBcInJlY29yZHM6XCIgKyB0eXBlTmFtZSArIChxdWVyeUNyZWF0b3IgPyBcIjpcIiArIHF1ZXJ5Q3JlYXRvci50b1N0cmluZygpIDogXCJcIikpIHtcbiAgICBjb25zdCBpZHMgPSB0aGlzLmlkcyh0eXBlTmFtZSwgcXVlcnlDcmVhdG9yLCBcImlkczpcIiArIG5hbWUpO1xuICAgIHJldHVybiBjb21wdXRlZChuYW1lLCAoKSA9PiB7XG4gICAgICByZXR1cm4gWy4uLmlkcy5nZXQoKV0ubWFwKChpZCkgPT4ge1xuICAgICAgICBjb25zdCBhdG9tID0gdGhpcy5hdG9tcy5nZXQoKVtpZF07XG4gICAgICAgIGlmICghYXRvbSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vIGF0b20gZm91bmQgZm9yIHJlY29yZCBpZDogXCIgKyBpZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF0b20uZ2V0KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgZGVyaXZhdGlvbiB0aGF0IHdpbGwgcmV0dXJuIHRoZSBpZHMgb2YgYWxsIHJlY29yZHMgb2YgdGhlIGdpdmVuIHR5cGUuXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0eXBlLlxuICAgKiBAcGFyYW0gcXVlcnlDcmVhdG9yIC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHF1ZXJ5IGV4cHJlc3Npb24uXG4gICAqIEBwYXJhbSBuYW1lIC0gKG9wdGluYWwpIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS5cbiAgICovXG4gIGlkcyh0eXBlTmFtZSwgcXVlcnlDcmVhdG9yID0gKCkgPT4gKHt9KSwgbmFtZSA9IFwiaWRzOlwiICsgdHlwZU5hbWUgKyAocXVlcnlDcmVhdG9yID8gXCI6XCIgKyBxdWVyeUNyZWF0b3IudG9TdHJpbmcoKSA6IFwiXCIpKSB7XG4gICAgY29uc3QgdHlwZUhpc3RvcnkgPSB0aGlzLmZpbHRlckhpc3RvcnkodHlwZU5hbWUpO1xuICAgIGNvbnN0IGZyb21TY3JhdGNoID0gKCkgPT4ge1xuICAgICAgdHlwZUhpc3RvcnkuZ2V0KCk7XG4gICAgICBjb25zdCBxdWVyeSA9IHF1ZXJ5Q3JlYXRvcigpO1xuICAgICAgaWYgKE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZXQoXG4gICAgICAgICAgb2JqZWN0TWFwVmFsdWVzKHRoaXMuYXRvbXMuZ2V0KCkpLmZsYXRNYXAoKHYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB2LmdldCgpO1xuICAgICAgICAgICAgaWYgKHIudHlwZU5hbWUgPT09IHR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgIHJldHVybiByLmlkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZXhlY3V0ZVF1ZXJ5KHRoaXMsIHR5cGVOYW1lLCBxdWVyeSk7XG4gICAgfTtcbiAgICBjb25zdCBmcm9tU2NyYXRjaFdpdGhEaWZmID0gKHByZXZWYWx1ZSkgPT4ge1xuICAgICAgY29uc3QgbmV4dFZhbHVlID0gZnJvbVNjcmF0Y2goKTtcbiAgICAgIGNvbnN0IGRpZmYgPSBkaWZmU2V0cyhwcmV2VmFsdWUsIG5leHRWYWx1ZSk7XG4gICAgICBpZiAoZGlmZikge1xuICAgICAgICByZXR1cm4gd2l0aERpZmYobmV4dFZhbHVlLCBkaWZmKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwcmV2VmFsdWU7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjYWNoZWRRdWVyeSA9IGNvbXB1dGVkKFwiaWRzX3F1ZXJ5OlwiICsgbmFtZSwgcXVlcnlDcmVhdG9yLCB7XG4gICAgICBpc0VxdWFsXG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbXB1dGVkKFxuICAgICAgXCJxdWVyeTpcIiArIG5hbWUsXG4gICAgICAocHJldlZhbHVlLCBsYXN0Q29tcHV0ZWRFcG9jaCkgPT4ge1xuICAgICAgICBjb25zdCBxdWVyeSA9IGNhY2hlZFF1ZXJ5LmdldCgpO1xuICAgICAgICBpZiAoaXNVbmluaXRpYWxpemVkKHByZXZWYWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gZnJvbVNjcmF0Y2goKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFzdENvbXB1dGVkRXBvY2ggPCBjYWNoZWRRdWVyeS5sYXN0Q2hhbmdlZEVwb2NoKSB7XG4gICAgICAgICAgcmV0dXJuIGZyb21TY3JhdGNoV2l0aERpZmYocHJldlZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoaXN0b3J5ID0gdHlwZUhpc3RvcnkuZ2V0RGlmZlNpbmNlKGxhc3RDb21wdXRlZEVwb2NoKTtcbiAgICAgICAgaWYgKGhpc3RvcnkgPT09IFJFU0VUX1ZBTFVFKSB7XG4gICAgICAgICAgcmV0dXJuIGZyb21TY3JhdGNoV2l0aERpZmYocHJldlZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXRDb25zdHJ1Y3RvciA9IG5ldyBJbmNyZW1lbnRhbFNldENvbnN0cnVjdG9yKFxuICAgICAgICAgIHByZXZWYWx1ZVxuICAgICAgICApO1xuICAgICAgICBmb3IgKGNvbnN0IGNoYW5nZXMgb2YgaGlzdG9yeSkge1xuICAgICAgICAgIGZvciAoY29uc3QgYWRkZWQgb2Ygb2JqZWN0TWFwVmFsdWVzKGNoYW5nZXMuYWRkZWQpKSB7XG4gICAgICAgICAgICBpZiAoYWRkZWQudHlwZU5hbWUgPT09IHR5cGVOYW1lICYmIG9iamVjdE1hdGNoZXNRdWVyeShxdWVyeSwgYWRkZWQpKSB7XG4gICAgICAgICAgICAgIHNldENvbnN0cnVjdG9yLmFkZChhZGRlZC5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3QgW18sIHVwZGF0ZWRdIG9mIG9iamVjdE1hcFZhbHVlcyhjaGFuZ2VzLnVwZGF0ZWQpKSB7XG4gICAgICAgICAgICBpZiAodXBkYXRlZC50eXBlTmFtZSA9PT0gdHlwZU5hbWUpIHtcbiAgICAgICAgICAgICAgaWYgKG9iamVjdE1hdGNoZXNRdWVyeShxdWVyeSwgdXBkYXRlZCkpIHtcbiAgICAgICAgICAgICAgICBzZXRDb25zdHJ1Y3Rvci5hZGQodXBkYXRlZC5pZCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0Q29uc3RydWN0b3IucmVtb3ZlKHVwZGF0ZWQuaWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3QgcmVtb3ZlZCBvZiBvYmplY3RNYXBWYWx1ZXMoY2hhbmdlcy5yZW1vdmVkKSkge1xuICAgICAgICAgICAgaWYgKHJlbW92ZWQudHlwZU5hbWUgPT09IHR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgIHNldENvbnN0cnVjdG9yLnJlbW92ZShyZW1vdmVkLmlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gc2V0Q29uc3RydWN0b3IuZ2V0KCk7XG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHByZXZWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2l0aERpZmYocmVzdWx0LnZhbHVlLCByZXN1bHQuZGlmZik7XG4gICAgICB9LFxuICAgICAgeyBoaXN0b3J5TGVuZ3RoOiA1MCB9XG4gICAgKTtcbiAgfVxuICBleGVjKHR5cGVOYW1lLCBxdWVyeSkge1xuICAgIGNvbnN0IGlkcyA9IGV4ZWN1dGVRdWVyeSh0aGlzLCB0eXBlTmFtZSwgcXVlcnkpO1xuICAgIGlmIChpZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuIEVNUFRZX0FSUkFZO1xuICAgIH1cbiAgICBjb25zdCBhdG9tcyA9IHRoaXMuYXRvbXMuZ2V0KCk7XG4gICAgcmV0dXJuIFsuLi5pZHNdLm1hcCgoaWQpID0+IGF0b21zW2lkXS5nZXQoKSk7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIFN0b3JlUXVlcmllc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0b3JlUXVlcmllcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreQueries.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSchema.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/StoreSchema.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StoreSchema: () => (/* binding */ StoreSchema),\n/* harmony export */   upgradeSchema: () => (/* binding */ upgradeSchema)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./migrate.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/migrate.mjs\");\n\n\nfunction upgradeSchema(schema) {\n  if (schema.schemaVersion > 2 || schema.schemaVersion < 1)\n    return _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result.err(\"Bad schema version\");\n  if (schema.schemaVersion === 2)\n    return _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result.ok(schema);\n  const result = {\n    schemaVersion: 2,\n    sequences: {}\n  };\n  for (const [typeName, recordVersion] of Object.entries(schema.recordVersions)) {\n    result.sequences[`com.tldraw.${typeName}`] = recordVersion.version;\n    if (\"subTypeKey\" in recordVersion) {\n      for (const [subType, version] of Object.entries(recordVersion.subTypeVersions)) {\n        result.sequences[`com.tldraw.${typeName}.${subType}`] = version;\n      }\n    }\n  }\n  return _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result.ok(result);\n}\nclass StoreSchema {\n  constructor(types, options) {\n    this.types = types;\n    this.options = options;\n    for (const m of options.migrations ?? []) {\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(!this.migrations[m.sequenceId], `Duplicate migration sequenceId ${m.sequenceId}`);\n      (0,_migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.validateMigrations)(m);\n      this.migrations[m.sequenceId] = m;\n    }\n    const allMigrations = Object.values(this.migrations).flatMap((m) => m.sequence);\n    this.sortedMigrations = (0,_migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.sortMigrations)(allMigrations);\n    for (const migration of this.sortedMigrations) {\n      if (!migration.dependsOn?.length)\n        continue;\n      for (const dep of migration.dependsOn) {\n        const depMigration = allMigrations.find((m) => m.id === dep);\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(depMigration, `Migration '${migration.id}' depends on missing migration '${dep}'`);\n      }\n    }\n  }\n  static create(types, options) {\n    return new StoreSchema(types, options ?? {});\n  }\n  migrations = {};\n  sortedMigrations;\n  validateRecord(store, record, phase, recordBefore) {\n    try {\n      const recordType = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(this.types, record.typeName);\n      if (!recordType) {\n        throw new Error(`Missing definition for record type ${record.typeName}`);\n      }\n      return recordType.validate(record, recordBefore ?? void 0);\n    } catch (error) {\n      if (this.options.onValidationFailure) {\n        return this.options.onValidationFailure({\n          store,\n          record,\n          phase,\n          recordBefore,\n          error\n        });\n      } else {\n        throw error;\n      }\n    }\n  }\n  // TODO: use a weakmap to store the result of this function\n  getMigrationsSince(persistedSchema) {\n    const upgradeResult = upgradeSchema(persistedSchema);\n    if (!upgradeResult.ok) {\n      return upgradeResult;\n    }\n    const schema = upgradeResult.value;\n    const sequenceIdsToInclude = new Set(\n      // start with any shared sequences\n      Object.keys(schema.sequences).filter((sequenceId) => this.migrations[sequenceId])\n    );\n    for (const sequenceId in this.migrations) {\n      if (schema.sequences[sequenceId] === void 0 && this.migrations[sequenceId].retroactive) {\n        sequenceIdsToInclude.add(sequenceId);\n      }\n    }\n    if (sequenceIdsToInclude.size === 0) {\n      return _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result.ok([]);\n    }\n    const allMigrationsToInclude = /* @__PURE__ */ new Set();\n    for (const sequenceId of sequenceIdsToInclude) {\n      const theirVersion = schema.sequences[sequenceId];\n      if (typeof theirVersion !== \"number\" && this.migrations[sequenceId].retroactive || theirVersion === 0) {\n        for (const migration of this.migrations[sequenceId].sequence) {\n          allMigrationsToInclude.add(migration.id);\n        }\n        continue;\n      }\n      const theirVersionId = `${sequenceId}/${theirVersion}`;\n      const idx = this.migrations[sequenceId].sequence.findIndex((m) => m.id === theirVersionId);\n      if (idx === -1) {\n        return _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result.err(\"Incompatible schema?\");\n      }\n      for (const migration of this.migrations[sequenceId].sequence.slice(idx + 1)) {\n        allMigrationsToInclude.add(migration.id);\n      }\n    }\n    return _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.Result.ok(this.sortedMigrations.filter(({ id }) => allMigrationsToInclude.has(id)));\n  }\n  migratePersistedRecord(record, persistedSchema, direction = \"up\") {\n    const migrations = this.getMigrationsSince(persistedSchema);\n    if (!migrations.ok) {\n      console.error(\"Error migrating record\", migrations.error);\n      return { type: \"error\", reason: _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.MigrationError };\n    }\n    let migrationsToApply = migrations.value;\n    if (migrationsToApply.length === 0) {\n      return { type: \"success\", value: record };\n    }\n    if (migrationsToApply.some((m) => m.scope === \"store\")) {\n      return {\n        type: \"error\",\n        reason: direction === \"down\" ? _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.TargetVersionTooOld : _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.TargetVersionTooNew\n      };\n    }\n    if (direction === \"down\") {\n      if (!migrationsToApply.every((m) => m.down)) {\n        return {\n          type: \"error\",\n          reason: _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.TargetVersionTooOld\n        };\n      }\n      migrationsToApply = migrationsToApply.slice().reverse();\n    }\n    record = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(record);\n    try {\n      for (const migration of migrationsToApply) {\n        if (migration.scope === \"store\")\n          throw new Error(\n            /* won't happen, just for TS */\n          );\n        const shouldApply = migration.filter ? migration.filter(record) : true;\n        if (!shouldApply)\n          continue;\n        const result = migration[direction](record);\n        if (result) {\n          record = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(result);\n        }\n      }\n    } catch (e) {\n      console.error(\"Error migrating record\", e);\n      return { type: \"error\", reason: _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.MigrationError };\n    }\n    return { type: \"success\", value: record };\n  }\n  migrateStoreSnapshot(snapshot) {\n    let { store } = snapshot;\n    const migrations = this.getMigrationsSince(snapshot.schema);\n    if (!migrations.ok) {\n      console.error(\"Error migrating store\", migrations.error);\n      return { type: \"error\", reason: _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.MigrationError };\n    }\n    const migrationsToApply = migrations.value;\n    if (migrationsToApply.length === 0) {\n      return { type: \"success\", value: store };\n    }\n    store = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(store);\n    try {\n      for (const migration of migrationsToApply) {\n        if (migration.scope === \"record\") {\n          for (const [id, record] of Object.entries(store)) {\n            const shouldApply = migration.filter ? migration.filter(record) : true;\n            if (!shouldApply)\n              continue;\n            const result = migration.up(record);\n            if (result) {\n              store[id] = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(result);\n            }\n          }\n        } else if (migration.scope === \"store\") {\n          const result = migration.up(store);\n          if (result) {\n            store = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(result);\n          }\n        } else {\n          (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.exhaustiveSwitchError)(migration);\n        }\n      }\n    } catch (e) {\n      console.error(\"Error migrating store\", e);\n      return { type: \"error\", reason: _migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.MigrationFailureReason.MigrationError };\n    }\n    return { type: \"success\", value: store };\n  }\n  /** @internal */\n  createIntegrityChecker(store) {\n    return this.options.createIntegrityChecker?.(store) ?? void 0;\n  }\n  serialize() {\n    return {\n      schemaVersion: 2,\n      sequences: Object.fromEntries(\n        Object.values(this.migrations).map(({ sequenceId, sequence }) => [\n          sequenceId,\n          sequence.length ? (0,_migrate_mjs__WEBPACK_IMPORTED_MODULE_1__.parseMigrationId)(sequence.at(-1).id).version : 0\n        ])\n      )\n    };\n  }\n  /**\n   * @deprecated This is only here for legacy reasons, don't use it unless you have david's blessing!\n   */\n  serializeEarliestVersion() {\n    return {\n      schemaVersion: 2,\n      sequences: Object.fromEntries(\n        Object.values(this.migrations).map(({ sequenceId }) => [sequenceId, 0])\n      )\n    };\n  }\n  /** @internal */\n  getType(typeName) {\n    const type = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(this.types, typeName);\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(type, \"record type does not exists\");\n    return type;\n  }\n}\n\n//# sourceMappingURL=StoreSchema.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvU3RvcmVTY2hlbWEubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFNdUI7QUFNQTtBQUN2QjtBQUNBO0FBQ0EsV0FBVyxpREFBTTtBQUNqQjtBQUNBLFdBQVcsaURBQU07QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxTQUFTO0FBQzVDO0FBQ0E7QUFDQSx1Q0FBdUMsU0FBUyxHQUFHLFFBQVE7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsU0FBUyxpREFBTTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0scURBQU0sbUVBQW1FLGFBQWE7QUFDNUYsTUFBTSxnRUFBa0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDREQUFjO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFEQUFNLDZCQUE2QixhQUFhLGtDQUFrQyxJQUFJO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNkRBQWM7QUFDdkM7QUFDQSw4REFBOEQsZ0JBQWdCO0FBQzlFO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsaURBQU07QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsV0FBVyxHQUFHLGFBQWE7QUFDM0Q7QUFDQTtBQUNBLGVBQWUsaURBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaURBQU0sb0NBQW9DLElBQUk7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdUJBQXVCLGdFQUFzQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsZ0VBQXNCLHVCQUF1QixnRUFBc0I7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdFQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsOERBQWU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw4REFBZTtBQUNsQztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsZUFBZSx1QkFBdUIsZ0VBQXNCO0FBQzVEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxVQUFVLFFBQVE7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1QkFBdUIsZ0VBQXNCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLFlBQVksOERBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDhEQUFlO0FBQ3pDO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLG9CQUFvQiw4REFBZTtBQUNuQztBQUNBLFVBQVU7QUFDVixVQUFVLG9FQUFxQjtBQUMvQjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsZUFBZSx1QkFBdUIsZ0VBQXNCO0FBQzVEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxzQkFBc0I7QUFDcEU7QUFDQSw0QkFBNEIsOERBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsWUFBWTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDZEQUFjO0FBQy9CLElBQUkscURBQU07QUFDVjtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RvcmUvZGlzdC1lc20vbGliL1N0b3JlU2NoZW1hLm1qcz81MmE2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIFJlc3VsdCxcbiAgYXNzZXJ0LFxuICBleGhhdXN0aXZlU3dpdGNoRXJyb3IsXG4gIGdldE93blByb3BlcnR5LFxuICBzdHJ1Y3R1cmVkQ2xvbmVcbn0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7XG4gIE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24sXG4gIHBhcnNlTWlncmF0aW9uSWQsXG4gIHNvcnRNaWdyYXRpb25zLFxuICB2YWxpZGF0ZU1pZ3JhdGlvbnNcbn0gZnJvbSBcIi4vbWlncmF0ZS5tanNcIjtcbmZ1bmN0aW9uIHVwZ3JhZGVTY2hlbWEoc2NoZW1hKSB7XG4gIGlmIChzY2hlbWEuc2NoZW1hVmVyc2lvbiA+IDIgfHwgc2NoZW1hLnNjaGVtYVZlcnNpb24gPCAxKVxuICAgIHJldHVybiBSZXN1bHQuZXJyKFwiQmFkIHNjaGVtYSB2ZXJzaW9uXCIpO1xuICBpZiAoc2NoZW1hLnNjaGVtYVZlcnNpb24gPT09IDIpXG4gICAgcmV0dXJuIFJlc3VsdC5vayhzY2hlbWEpO1xuICBjb25zdCByZXN1bHQgPSB7XG4gICAgc2NoZW1hVmVyc2lvbjogMixcbiAgICBzZXF1ZW5jZXM6IHt9XG4gIH07XG4gIGZvciAoY29uc3QgW3R5cGVOYW1lLCByZWNvcmRWZXJzaW9uXSBvZiBPYmplY3QuZW50cmllcyhzY2hlbWEucmVjb3JkVmVyc2lvbnMpKSB7XG4gICAgcmVzdWx0LnNlcXVlbmNlc1tgY29tLnRsZHJhdy4ke3R5cGVOYW1lfWBdID0gcmVjb3JkVmVyc2lvbi52ZXJzaW9uO1xuICAgIGlmIChcInN1YlR5cGVLZXlcIiBpbiByZWNvcmRWZXJzaW9uKSB7XG4gICAgICBmb3IgKGNvbnN0IFtzdWJUeXBlLCB2ZXJzaW9uXSBvZiBPYmplY3QuZW50cmllcyhyZWNvcmRWZXJzaW9uLnN1YlR5cGVWZXJzaW9ucykpIHtcbiAgICAgICAgcmVzdWx0LnNlcXVlbmNlc1tgY29tLnRsZHJhdy4ke3R5cGVOYW1lfS4ke3N1YlR5cGV9YF0gPSB2ZXJzaW9uO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gUmVzdWx0Lm9rKHJlc3VsdCk7XG59XG5jbGFzcyBTdG9yZVNjaGVtYSB7XG4gIGNvbnN0cnVjdG9yKHR5cGVzLCBvcHRpb25zKSB7XG4gICAgdGhpcy50eXBlcyA9IHR5cGVzO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgZm9yIChjb25zdCBtIG9mIG9wdGlvbnMubWlncmF0aW9ucyA/PyBbXSkge1xuICAgICAgYXNzZXJ0KCF0aGlzLm1pZ3JhdGlvbnNbbS5zZXF1ZW5jZUlkXSwgYER1cGxpY2F0ZSBtaWdyYXRpb24gc2VxdWVuY2VJZCAke20uc2VxdWVuY2VJZH1gKTtcbiAgICAgIHZhbGlkYXRlTWlncmF0aW9ucyhtKTtcbiAgICAgIHRoaXMubWlncmF0aW9uc1ttLnNlcXVlbmNlSWRdID0gbTtcbiAgICB9XG4gICAgY29uc3QgYWxsTWlncmF0aW9ucyA9IE9iamVjdC52YWx1ZXModGhpcy5taWdyYXRpb25zKS5mbGF0TWFwKChtKSA9PiBtLnNlcXVlbmNlKTtcbiAgICB0aGlzLnNvcnRlZE1pZ3JhdGlvbnMgPSBzb3J0TWlncmF0aW9ucyhhbGxNaWdyYXRpb25zKTtcbiAgICBmb3IgKGNvbnN0IG1pZ3JhdGlvbiBvZiB0aGlzLnNvcnRlZE1pZ3JhdGlvbnMpIHtcbiAgICAgIGlmICghbWlncmF0aW9uLmRlcGVuZHNPbj8ubGVuZ3RoKVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIGZvciAoY29uc3QgZGVwIG9mIG1pZ3JhdGlvbi5kZXBlbmRzT24pIHtcbiAgICAgICAgY29uc3QgZGVwTWlncmF0aW9uID0gYWxsTWlncmF0aW9ucy5maW5kKChtKSA9PiBtLmlkID09PSBkZXApO1xuICAgICAgICBhc3NlcnQoZGVwTWlncmF0aW9uLCBgTWlncmF0aW9uICcke21pZ3JhdGlvbi5pZH0nIGRlcGVuZHMgb24gbWlzc2luZyBtaWdyYXRpb24gJyR7ZGVwfSdgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgc3RhdGljIGNyZWF0ZSh0eXBlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgU3RvcmVTY2hlbWEodHlwZXMsIG9wdGlvbnMgPz8ge30pO1xuICB9XG4gIG1pZ3JhdGlvbnMgPSB7fTtcbiAgc29ydGVkTWlncmF0aW9ucztcbiAgdmFsaWRhdGVSZWNvcmQoc3RvcmUsIHJlY29yZCwgcGhhc2UsIHJlY29yZEJlZm9yZSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWNvcmRUeXBlID0gZ2V0T3duUHJvcGVydHkodGhpcy50eXBlcywgcmVjb3JkLnR5cGVOYW1lKTtcbiAgICAgIGlmICghcmVjb3JkVHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgZGVmaW5pdGlvbiBmb3IgcmVjb3JkIHR5cGUgJHtyZWNvcmQudHlwZU5hbWV9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVjb3JkVHlwZS52YWxpZGF0ZShyZWNvcmQsIHJlY29yZEJlZm9yZSA/PyB2b2lkIDApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm9uVmFsaWRhdGlvbkZhaWx1cmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5vblZhbGlkYXRpb25GYWlsdXJlKHtcbiAgICAgICAgICBzdG9yZSxcbiAgICAgICAgICByZWNvcmQsXG4gICAgICAgICAgcGhhc2UsXG4gICAgICAgICAgcmVjb3JkQmVmb3JlLFxuICAgICAgICAgIGVycm9yXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIFRPRE86IHVzZSBhIHdlYWttYXAgdG8gc3RvcmUgdGhlIHJlc3VsdCBvZiB0aGlzIGZ1bmN0aW9uXG4gIGdldE1pZ3JhdGlvbnNTaW5jZShwZXJzaXN0ZWRTY2hlbWEpIHtcbiAgICBjb25zdCB1cGdyYWRlUmVzdWx0ID0gdXBncmFkZVNjaGVtYShwZXJzaXN0ZWRTY2hlbWEpO1xuICAgIGlmICghdXBncmFkZVJlc3VsdC5vaykge1xuICAgICAgcmV0dXJuIHVwZ3JhZGVSZXN1bHQ7XG4gICAgfVxuICAgIGNvbnN0IHNjaGVtYSA9IHVwZ3JhZGVSZXN1bHQudmFsdWU7XG4gICAgY29uc3Qgc2VxdWVuY2VJZHNUb0luY2x1ZGUgPSBuZXcgU2V0KFxuICAgICAgLy8gc3RhcnQgd2l0aCBhbnkgc2hhcmVkIHNlcXVlbmNlc1xuICAgICAgT2JqZWN0LmtleXMoc2NoZW1hLnNlcXVlbmNlcykuZmlsdGVyKChzZXF1ZW5jZUlkKSA9PiB0aGlzLm1pZ3JhdGlvbnNbc2VxdWVuY2VJZF0pXG4gICAgKTtcbiAgICBmb3IgKGNvbnN0IHNlcXVlbmNlSWQgaW4gdGhpcy5taWdyYXRpb25zKSB7XG4gICAgICBpZiAoc2NoZW1hLnNlcXVlbmNlc1tzZXF1ZW5jZUlkXSA9PT0gdm9pZCAwICYmIHRoaXMubWlncmF0aW9uc1tzZXF1ZW5jZUlkXS5yZXRyb2FjdGl2ZSkge1xuICAgICAgICBzZXF1ZW5jZUlkc1RvSW5jbHVkZS5hZGQoc2VxdWVuY2VJZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzZXF1ZW5jZUlkc1RvSW5jbHVkZS5zaXplID09PSAwKSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKFtdKTtcbiAgICB9XG4gICAgY29uc3QgYWxsTWlncmF0aW9uc1RvSW5jbHVkZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBzZXF1ZW5jZUlkIG9mIHNlcXVlbmNlSWRzVG9JbmNsdWRlKSB7XG4gICAgICBjb25zdCB0aGVpclZlcnNpb24gPSBzY2hlbWEuc2VxdWVuY2VzW3NlcXVlbmNlSWRdO1xuICAgICAgaWYgKHR5cGVvZiB0aGVpclZlcnNpb24gIT09IFwibnVtYmVyXCIgJiYgdGhpcy5taWdyYXRpb25zW3NlcXVlbmNlSWRdLnJldHJvYWN0aXZlIHx8IHRoZWlyVmVyc2lvbiA9PT0gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IG1pZ3JhdGlvbiBvZiB0aGlzLm1pZ3JhdGlvbnNbc2VxdWVuY2VJZF0uc2VxdWVuY2UpIHtcbiAgICAgICAgICBhbGxNaWdyYXRpb25zVG9JbmNsdWRlLmFkZChtaWdyYXRpb24uaWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgdGhlaXJWZXJzaW9uSWQgPSBgJHtzZXF1ZW5jZUlkfS8ke3RoZWlyVmVyc2lvbn1gO1xuICAgICAgY29uc3QgaWR4ID0gdGhpcy5taWdyYXRpb25zW3NlcXVlbmNlSWRdLnNlcXVlbmNlLmZpbmRJbmRleCgobSkgPT4gbS5pZCA9PT0gdGhlaXJWZXJzaW9uSWQpO1xuICAgICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnIoXCJJbmNvbXBhdGlibGUgc2NoZW1hP1wiKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgbWlncmF0aW9uIG9mIHRoaXMubWlncmF0aW9uc1tzZXF1ZW5jZUlkXS5zZXF1ZW5jZS5zbGljZShpZHggKyAxKSkge1xuICAgICAgICBhbGxNaWdyYXRpb25zVG9JbmNsdWRlLmFkZChtaWdyYXRpb24uaWQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gUmVzdWx0Lm9rKHRoaXMuc29ydGVkTWlncmF0aW9ucy5maWx0ZXIoKHsgaWQgfSkgPT4gYWxsTWlncmF0aW9uc1RvSW5jbHVkZS5oYXMoaWQpKSk7XG4gIH1cbiAgbWlncmF0ZVBlcnNpc3RlZFJlY29yZChyZWNvcmQsIHBlcnNpc3RlZFNjaGVtYSwgZGlyZWN0aW9uID0gXCJ1cFwiKSB7XG4gICAgY29uc3QgbWlncmF0aW9ucyA9IHRoaXMuZ2V0TWlncmF0aW9uc1NpbmNlKHBlcnNpc3RlZFNjaGVtYSk7XG4gICAgaWYgKCFtaWdyYXRpb25zLm9rKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbWlncmF0aW5nIHJlY29yZFwiLCBtaWdyYXRpb25zLmVycm9yKTtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwiZXJyb3JcIiwgcmVhc29uOiBNaWdyYXRpb25GYWlsdXJlUmVhc29uLk1pZ3JhdGlvbkVycm9yIH07XG4gICAgfVxuICAgIGxldCBtaWdyYXRpb25zVG9BcHBseSA9IG1pZ3JhdGlvbnMudmFsdWU7XG4gICAgaWYgKG1pZ3JhdGlvbnNUb0FwcGx5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJzdWNjZXNzXCIsIHZhbHVlOiByZWNvcmQgfTtcbiAgICB9XG4gICAgaWYgKG1pZ3JhdGlvbnNUb0FwcGx5LnNvbWUoKG0pID0+IG0uc2NvcGUgPT09IFwic3RvcmVcIikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiZXJyb3JcIixcbiAgICAgICAgcmVhc29uOiBkaXJlY3Rpb24gPT09IFwiZG93blwiID8gTWlncmF0aW9uRmFpbHVyZVJlYXNvbi5UYXJnZXRWZXJzaW9uVG9vT2xkIDogTWlncmF0aW9uRmFpbHVyZVJlYXNvbi5UYXJnZXRWZXJzaW9uVG9vTmV3XG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoZGlyZWN0aW9uID09PSBcImRvd25cIikge1xuICAgICAgaWYgKCFtaWdyYXRpb25zVG9BcHBseS5ldmVyeSgobSkgPT4gbS5kb3duKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IFwiZXJyb3JcIixcbiAgICAgICAgICByZWFzb246IE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24uVGFyZ2V0VmVyc2lvblRvb09sZFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgbWlncmF0aW9uc1RvQXBwbHkgPSBtaWdyYXRpb25zVG9BcHBseS5zbGljZSgpLnJldmVyc2UoKTtcbiAgICB9XG4gICAgcmVjb3JkID0gc3RydWN0dXJlZENsb25lKHJlY29yZCk7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAoY29uc3QgbWlncmF0aW9uIG9mIG1pZ3JhdGlvbnNUb0FwcGx5KSB7XG4gICAgICAgIGlmIChtaWdyYXRpb24uc2NvcGUgPT09IFwic3RvcmVcIilcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAvKiB3b24ndCBoYXBwZW4sIGp1c3QgZm9yIFRTICovXG4gICAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgc2hvdWxkQXBwbHkgPSBtaWdyYXRpb24uZmlsdGVyID8gbWlncmF0aW9uLmZpbHRlcihyZWNvcmQpIDogdHJ1ZTtcbiAgICAgICAgaWYgKCFzaG91bGRBcHBseSlcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbWlncmF0aW9uW2RpcmVjdGlvbl0ocmVjb3JkKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIHJlY29yZCA9IHN0cnVjdHVyZWRDbG9uZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1pZ3JhdGluZyByZWNvcmRcIiwgZSk7XG4gICAgICByZXR1cm4geyB0eXBlOiBcImVycm9yXCIsIHJlYXNvbjogTWlncmF0aW9uRmFpbHVyZVJlYXNvbi5NaWdyYXRpb25FcnJvciB9O1xuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiBcInN1Y2Nlc3NcIiwgdmFsdWU6IHJlY29yZCB9O1xuICB9XG4gIG1pZ3JhdGVTdG9yZVNuYXBzaG90KHNuYXBzaG90KSB7XG4gICAgbGV0IHsgc3RvcmUgfSA9IHNuYXBzaG90O1xuICAgIGNvbnN0IG1pZ3JhdGlvbnMgPSB0aGlzLmdldE1pZ3JhdGlvbnNTaW5jZShzbmFwc2hvdC5zY2hlbWEpO1xuICAgIGlmICghbWlncmF0aW9ucy5vaykge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG1pZ3JhdGluZyBzdG9yZVwiLCBtaWdyYXRpb25zLmVycm9yKTtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwiZXJyb3JcIiwgcmVhc29uOiBNaWdyYXRpb25GYWlsdXJlUmVhc29uLk1pZ3JhdGlvbkVycm9yIH07XG4gICAgfVxuICAgIGNvbnN0IG1pZ3JhdGlvbnNUb0FwcGx5ID0gbWlncmF0aW9ucy52YWx1ZTtcbiAgICBpZiAobWlncmF0aW9uc1RvQXBwbHkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcInN1Y2Nlc3NcIiwgdmFsdWU6IHN0b3JlIH07XG4gICAgfVxuICAgIHN0b3JlID0gc3RydWN0dXJlZENsb25lKHN0b3JlKTtcbiAgICB0cnkge1xuICAgICAgZm9yIChjb25zdCBtaWdyYXRpb24gb2YgbWlncmF0aW9uc1RvQXBwbHkpIHtcbiAgICAgICAgaWYgKG1pZ3JhdGlvbi5zY29wZSA9PT0gXCJyZWNvcmRcIikge1xuICAgICAgICAgIGZvciAoY29uc3QgW2lkLCByZWNvcmRdIG9mIE9iamVjdC5lbnRyaWVzKHN0b3JlKSkge1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkQXBwbHkgPSBtaWdyYXRpb24uZmlsdGVyID8gbWlncmF0aW9uLmZpbHRlcihyZWNvcmQpIDogdHJ1ZTtcbiAgICAgICAgICAgIGlmICghc2hvdWxkQXBwbHkpXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbWlncmF0aW9uLnVwKHJlY29yZCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgIHN0b3JlW2lkXSA9IHN0cnVjdHVyZWRDbG9uZShyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChtaWdyYXRpb24uc2NvcGUgPT09IFwic3RvcmVcIikge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG1pZ3JhdGlvbi51cChzdG9yZSk7XG4gICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgc3RvcmUgPSBzdHJ1Y3R1cmVkQ2xvbmUocmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXhoYXVzdGl2ZVN3aXRjaEVycm9yKG1pZ3JhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbWlncmF0aW5nIHN0b3JlXCIsIGUpO1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJlcnJvclwiLCByZWFzb246IE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24uTWlncmF0aW9uRXJyb3IgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdHlwZTogXCJzdWNjZXNzXCIsIHZhbHVlOiBzdG9yZSB9O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgY3JlYXRlSW50ZWdyaXR5Q2hlY2tlcihzdG9yZSkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY3JlYXRlSW50ZWdyaXR5Q2hlY2tlcj8uKHN0b3JlKSA/PyB2b2lkIDA7XG4gIH1cbiAgc2VyaWFsaXplKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzY2hlbWFWZXJzaW9uOiAyLFxuICAgICAgc2VxdWVuY2VzOiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5taWdyYXRpb25zKS5tYXAoKHsgc2VxdWVuY2VJZCwgc2VxdWVuY2UgfSkgPT4gW1xuICAgICAgICAgIHNlcXVlbmNlSWQsXG4gICAgICAgICAgc2VxdWVuY2UubGVuZ3RoID8gcGFyc2VNaWdyYXRpb25JZChzZXF1ZW5jZS5hdCgtMSkuaWQpLnZlcnNpb24gOiAwXG4gICAgICAgIF0pXG4gICAgICApXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgVGhpcyBpcyBvbmx5IGhlcmUgZm9yIGxlZ2FjeSByZWFzb25zLCBkb24ndCB1c2UgaXQgdW5sZXNzIHlvdSBoYXZlIGRhdmlkJ3MgYmxlc3NpbmchXG4gICAqL1xuICBzZXJpYWxpemVFYXJsaWVzdFZlcnNpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjaGVtYVZlcnNpb246IDIsXG4gICAgICBzZXF1ZW5jZXM6IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLm1pZ3JhdGlvbnMpLm1hcCgoeyBzZXF1ZW5jZUlkIH0pID0+IFtzZXF1ZW5jZUlkLCAwXSlcbiAgICAgIClcbiAgICB9O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZ2V0VHlwZSh0eXBlTmFtZSkge1xuICAgIGNvbnN0IHR5cGUgPSBnZXRPd25Qcm9wZXJ0eSh0aGlzLnR5cGVzLCB0eXBlTmFtZSk7XG4gICAgYXNzZXJ0KHR5cGUsIFwicmVjb3JkIHR5cGUgZG9lcyBub3QgZXhpc3RzXCIpO1xuICAgIHJldHVybiB0eXBlO1xuICB9XG59XG5leHBvcnQge1xuICBTdG9yZVNjaGVtYSxcbiAgdXBncmFkZVNjaGVtYVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0b3JlU2NoZW1hLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSchema.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSideEffects.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/StoreSideEffects.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StoreSideEffects: () => (/* binding */ StoreSideEffects)\n/* harmony export */ });\nclass StoreSideEffects {\n  constructor(store) {\n    this.store = store;\n  }\n  _beforeCreateHandlers = {};\n  _afterCreateHandlers = {};\n  _beforeChangeHandlers = {};\n  _afterChangeHandlers = {};\n  _beforeDeleteHandlers = {};\n  _afterDeleteHandlers = {};\n  _operationCompleteHandlers = [];\n  _isEnabled = true;\n  /** @internal */\n  isEnabled() {\n    return this._isEnabled;\n  }\n  /** @internal */\n  setIsEnabled(enabled) {\n    this._isEnabled = enabled;\n  }\n  /** @internal */\n  handleBeforeCreate(record, source) {\n    if (!this._isEnabled)\n      return record;\n    const handlers = this._beforeCreateHandlers[record.typeName];\n    if (handlers) {\n      let r = record;\n      for (const handler of handlers) {\n        r = handler(r, source);\n      }\n      return r;\n    }\n    return record;\n  }\n  /** @internal */\n  handleAfterCreate(record, source) {\n    if (!this._isEnabled)\n      return;\n    const handlers = this._afterCreateHandlers[record.typeName];\n    if (handlers) {\n      for (const handler of handlers) {\n        handler(record, source);\n      }\n    }\n  }\n  /** @internal */\n  handleBeforeChange(prev, next, source) {\n    if (!this._isEnabled)\n      return next;\n    const handlers = this._beforeChangeHandlers[next.typeName];\n    if (handlers) {\n      let r = next;\n      for (const handler of handlers) {\n        r = handler(prev, r, source);\n      }\n      return r;\n    }\n    return next;\n  }\n  /** @internal */\n  handleAfterChange(prev, next, source) {\n    if (!this._isEnabled)\n      return;\n    const handlers = this._afterChangeHandlers[next.typeName];\n    if (handlers) {\n      for (const handler of handlers) {\n        handler(prev, next, source);\n      }\n    }\n  }\n  /** @internal */\n  handleBeforeDelete(record, source) {\n    if (!this._isEnabled)\n      return true;\n    const handlers = this._beforeDeleteHandlers[record.typeName];\n    if (handlers) {\n      for (const handler of handlers) {\n        if (handler(record, source) === false) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n  /** @internal */\n  handleAfterDelete(record, source) {\n    if (!this._isEnabled)\n      return;\n    const handlers = this._afterDeleteHandlers[record.typeName];\n    if (handlers) {\n      for (const handler of handlers) {\n        handler(record, source);\n      }\n    }\n  }\n  /** @internal */\n  handleOperationComplete(source) {\n    if (!this._isEnabled)\n      return;\n    for (const handler of this._operationCompleteHandlers) {\n      handler(source);\n    }\n  }\n  /**\n   * Internal helper for registering a bunch of side effects at once and keeping them organized.\n   * @internal\n   */\n  register(handlersByType) {\n    const disposes = [];\n    for (const [type, handlers] of Object.entries(handlersByType)) {\n      if (handlers?.beforeCreate) {\n        disposes.push(this.registerBeforeCreateHandler(type, handlers.beforeCreate));\n      }\n      if (handlers?.afterCreate) {\n        disposes.push(this.registerAfterCreateHandler(type, handlers.afterCreate));\n      }\n      if (handlers?.beforeChange) {\n        disposes.push(this.registerBeforeChangeHandler(type, handlers.beforeChange));\n      }\n      if (handlers?.afterChange) {\n        disposes.push(this.registerAfterChangeHandler(type, handlers.afterChange));\n      }\n      if (handlers?.beforeDelete) {\n        disposes.push(this.registerBeforeDeleteHandler(type, handlers.beforeDelete));\n      }\n      if (handlers?.afterDelete) {\n        disposes.push(this.registerAfterDeleteHandler(type, handlers.afterDelete));\n      }\n    }\n    return () => {\n      for (const dispose of disposes)\n        dispose();\n    };\n  }\n  /**\n   * Register a handler to be called before a record of a certain type is created. Return a\n   * modified record from the handler to change the record that will be created.\n   *\n   * Use this handle only to modify the creation of the record itself. If you want to trigger a\n   * side-effect on a different record (for example, moving one shape when another is created),\n   * use {@link StoreSideEffects.registerAfterCreateHandler} instead.\n   *\n   * @example\n   * ```ts\n   * editor.sideEffects.registerBeforeCreateHandler('shape', (shape, source) => {\n   *     // only modify shapes created by the user\n   *     if (source !== 'user') return shape\n   *\n   *     //by default, arrow shapes have no label. Let's make sure they always have a label.\n   *     if (shape.type === 'arrow') {\n   *         return {...shape, props: {...shape.props, text: 'an arrow'}}\n   *     }\n   *\n   *     // other shapes get returned unmodified\n   *     return shape\n   * })\n   * ```\n   *\n   * @param typeName - The type of record to listen for\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   */\n  registerBeforeCreateHandler(typeName, handler) {\n    const handlers = this._beforeCreateHandlers[typeName];\n    if (!handlers)\n      this._beforeCreateHandlers[typeName] = [];\n    this._beforeCreateHandlers[typeName].push(handler);\n    return () => remove(this._beforeCreateHandlers[typeName], handler);\n  }\n  /**\n   * Register a handler to be called after a record is created. This is useful for side-effects\n   * that would update _other_ records. If you want to modify the record being created use\n   * {@link StoreSideEffects.registerBeforeCreateHandler} instead.\n   *\n   * @example\n   * ```ts\n   * editor.sideEffects.registerAfterCreateHandler('page', (page, source) => {\n   *     // Automatically create a shape when a page is created\n   *     editor.createShape({\n   *         id: createShapeId(),\n   *         type: 'text',\n   *         props: { text: page.name },\n   *     })\n   * })\n   * ```\n   *\n   * @param typeName - The type of record to listen for\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   */\n  registerAfterCreateHandler(typeName, handler) {\n    const handlers = this._afterCreateHandlers[typeName];\n    if (!handlers)\n      this._afterCreateHandlers[typeName] = [];\n    this._afterCreateHandlers[typeName].push(handler);\n    return () => remove(this._afterCreateHandlers[typeName], handler);\n  }\n  /**\n   * Register a handler to be called before a record is changed. The handler is given the old and\n   * new record - you can return a modified record to apply a different update, or the old record\n   * to block the update entirely.\n   *\n   * Use this handler only for intercepting updates to the record itself. If you want to update\n   * other records in response to a change, use\n   * {@link StoreSideEffects.registerAfterChangeHandler} instead.\n   *\n   * @example\n   * ```ts\n   * editor.sideEffects.registerBeforeChangeHandler('shape', (prev, next, source) => {\n   *     if (next.isLocked && !prev.isLocked) {\n   *         // prevent shapes from ever being locked:\n   *         return prev\n   *     }\n   *     // other types of change are allowed\n   *     return next\n   * })\n   * ```\n   *\n   * @param typeName - The type of record to listen for\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   */\n  registerBeforeChangeHandler(typeName, handler) {\n    const handlers = this._beforeChangeHandlers[typeName];\n    if (!handlers)\n      this._beforeChangeHandlers[typeName] = [];\n    this._beforeChangeHandlers[typeName].push(handler);\n    return () => remove(this._beforeChangeHandlers[typeName], handler);\n  }\n  /**\n   * Register a handler to be called after a record is changed. This is useful for side-effects\n   * that would update _other_ records - if you want to modify the record being changed, use\n   * {@link StoreSideEffects.registerBeforeChangeHandler} instead.\n   *\n   * @example\n   * ```ts\n   * editor.sideEffects.registerAfterChangeHandler('shape', (prev, next, source) => {\n   *     if (next.props.color === 'red') {\n   *         // there can only be one red shape at a time:\n   *         const otherRedShapes = editor.getCurrentPageShapes().filter(s => s.props.color === 'red' && s.id !== next.id)\n   *         editor.updateShapes(otherRedShapes.map(s => ({...s, props: {...s.props, color: 'blue'}})))\n   *     }\n   * })\n   * ```\n   *\n   * @param typeName - The type of record to listen for\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   */\n  registerAfterChangeHandler(typeName, handler) {\n    const handlers = this._afterChangeHandlers[typeName];\n    if (!handlers)\n      this._afterChangeHandlers[typeName] = [];\n    this._afterChangeHandlers[typeName].push(handler);\n    return () => remove(this._afterChangeHandlers[typeName], handler);\n  }\n  /**\n   * Register a handler to be called before a record is deleted. The handler can return `false` to\n   * prevent the deletion.\n   *\n   * Use this handler only for intercepting deletions of the record itself. If you want to do\n   * something to other records in response to a deletion, use\n   * {@link StoreSideEffects.registerAfterDeleteHandler} instead.\n   *\n   * @example\n   * ```ts\n   * editor.sideEffects.registerBeforeDeleteHandler('shape', (shape, source) => {\n   *     if (shape.props.color === 'red') {\n   *         // prevent red shapes from being deleted\n   * \t       return false\n   *     }\n   * })\n   * ```\n   *\n   * @param typeName - The type of record to listen for\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   */\n  registerBeforeDeleteHandler(typeName, handler) {\n    const handlers = this._beforeDeleteHandlers[typeName];\n    if (!handlers)\n      this._beforeDeleteHandlers[typeName] = [];\n    this._beforeDeleteHandlers[typeName].push(handler);\n    return () => remove(this._beforeDeleteHandlers[typeName], handler);\n  }\n  /**\n   * Register a handler to be called after a record is deleted. This is useful for side-effects\n   * that would update _other_ records - if you want to block the deletion of the record itself,\n   * use {@link StoreSideEffects.registerBeforeDeleteHandler} instead.\n   *\n   * @example\n   * ```ts\n   * editor.sideEffects.registerAfterDeleteHandler('shape', (shape, source) => {\n   *     // if the last shape in a frame is deleted, delete the frame too:\n   *     const parentFrame = editor.getShape(shape.parentId)\n   *     if (!parentFrame || parentFrame.type !== 'frame') return\n   *\n   *     const siblings = editor.getSortedChildIdsForParent(parentFrame)\n   *     if (siblings.length === 0) {\n   *         editor.deleteShape(parentFrame.id)\n   *     }\n   * })\n   * ```\n   *\n   * @param typeName - The type of record to listen for\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   */\n  registerAfterDeleteHandler(typeName, handler) {\n    const handlers = this._afterDeleteHandlers[typeName];\n    if (!handlers)\n      this._afterDeleteHandlers[typeName] = [];\n    this._afterDeleteHandlers[typeName].push(handler);\n    return () => remove(this._afterDeleteHandlers[typeName], handler);\n  }\n  /**\n   * Register a handler to be called when a store completes an atomic operation.\n   *\n   * @example\n   * ```ts\n   * let count = 0\n   *\n   * editor.sideEffects.registerOperationCompleteHandler(() => count++)\n   *\n   * editor.selectAll()\n   * expect(count).toBe(1)\n   *\n   * editor.store.atomic(() => {\n   *\teditor.selectNone()\n   * \teditor.selectAll()\n   * })\n   *\n   * expect(count).toBe(2)\n   * ```\n   *\n   * @param handler - The handler to call\n   *\n   * @returns A callback that removes the handler.\n   *\n   * @public\n   */\n  registerOperationCompleteHandler(handler) {\n    this._operationCompleteHandlers.push(handler);\n    return () => remove(this._operationCompleteHandlers, handler);\n  }\n}\nfunction remove(array, item) {\n  const index = array.indexOf(item);\n  if (index >= 0) {\n    array.splice(index, 1);\n  }\n}\n\n//# sourceMappingURL=StoreSideEffects.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvU3RvcmVTaWRlRWZmZWN0cy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG1EQUFtRDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG9EQUFvRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlCQUFpQjtBQUN2QyxVQUFVO0FBQ1YsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sbURBQW1EO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG9EQUFvRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxjQUFjLDJCQUEyQjtBQUNwRztBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxtREFBbUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxvREFBb0Q7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0b3JlL2Rpc3QtZXNtL2xpYi9TdG9yZVNpZGVFZmZlY3RzLm1qcz8wY2Y1Il0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFN0b3JlU2lkZUVmZmVjdHMge1xuICBjb25zdHJ1Y3RvcihzdG9yZSkge1xuICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgfVxuICBfYmVmb3JlQ3JlYXRlSGFuZGxlcnMgPSB7fTtcbiAgX2FmdGVyQ3JlYXRlSGFuZGxlcnMgPSB7fTtcbiAgX2JlZm9yZUNoYW5nZUhhbmRsZXJzID0ge307XG4gIF9hZnRlckNoYW5nZUhhbmRsZXJzID0ge307XG4gIF9iZWZvcmVEZWxldGVIYW5kbGVycyA9IHt9O1xuICBfYWZ0ZXJEZWxldGVIYW5kbGVycyA9IHt9O1xuICBfb3BlcmF0aW9uQ29tcGxldGVIYW5kbGVycyA9IFtdO1xuICBfaXNFbmFibGVkID0gdHJ1ZTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBpc0VuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzRW5hYmxlZDtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIHNldElzRW5hYmxlZChlbmFibGVkKSB7XG4gICAgdGhpcy5faXNFbmFibGVkID0gZW5hYmxlZDtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGhhbmRsZUJlZm9yZUNyZWF0ZShyZWNvcmQsIHNvdXJjZSkge1xuICAgIGlmICghdGhpcy5faXNFbmFibGVkKVxuICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2JlZm9yZUNyZWF0ZUhhbmRsZXJzW3JlY29yZC50eXBlTmFtZV07XG4gICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICBsZXQgciA9IHJlY29yZDtcbiAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xuICAgICAgICByID0gaGFuZGxlcihyLCBzb3VyY2UpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHI7XG4gICAgfVxuICAgIHJldHVybiByZWNvcmQ7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBoYW5kbGVBZnRlckNyZWF0ZShyZWNvcmQsIHNvdXJjZSkge1xuICAgIGlmICghdGhpcy5faXNFbmFibGVkKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYWZ0ZXJDcmVhdGVIYW5kbGVyc1tyZWNvcmQudHlwZU5hbWVdO1xuICAgIGlmIChoYW5kbGVycykge1xuICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGhhbmRsZXJzKSB7XG4gICAgICAgIGhhbmRsZXIocmVjb3JkLCBzb3VyY2UpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGhhbmRsZUJlZm9yZUNoYW5nZShwcmV2LCBuZXh0LCBzb3VyY2UpIHtcbiAgICBpZiAoIXRoaXMuX2lzRW5hYmxlZClcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYmVmb3JlQ2hhbmdlSGFuZGxlcnNbbmV4dC50eXBlTmFtZV07XG4gICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICBsZXQgciA9IG5leHQ7XG4gICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgaGFuZGxlcnMpIHtcbiAgICAgICAgciA9IGhhbmRsZXIocHJldiwgciwgc291cmNlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByO1xuICAgIH1cbiAgICByZXR1cm4gbmV4dDtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGhhbmRsZUFmdGVyQ2hhbmdlKHByZXYsIG5leHQsIHNvdXJjZSkge1xuICAgIGlmICghdGhpcy5faXNFbmFibGVkKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYWZ0ZXJDaGFuZ2VIYW5kbGVyc1tuZXh0LnR5cGVOYW1lXTtcbiAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xuICAgICAgICBoYW5kbGVyKHByZXYsIG5leHQsIHNvdXJjZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgaGFuZGxlQmVmb3JlRGVsZXRlKHJlY29yZCwgc291cmNlKSB7XG4gICAgaWYgKCF0aGlzLl9pc0VuYWJsZWQpXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2JlZm9yZURlbGV0ZUhhbmRsZXJzW3JlY29yZC50eXBlTmFtZV07XG4gICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgaGFuZGxlcnMpIHtcbiAgICAgICAgaWYgKGhhbmRsZXIocmVjb3JkLCBzb3VyY2UpID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGhhbmRsZUFmdGVyRGVsZXRlKHJlY29yZCwgc291cmNlKSB7XG4gICAgaWYgKCF0aGlzLl9pc0VuYWJsZWQpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLl9hZnRlckRlbGV0ZUhhbmRsZXJzW3JlY29yZC50eXBlTmFtZV07XG4gICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgaGFuZGxlcnMpIHtcbiAgICAgICAgaGFuZGxlcihyZWNvcmQsIHNvdXJjZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgaGFuZGxlT3BlcmF0aW9uQ29tcGxldGUoc291cmNlKSB7XG4gICAgaWYgKCF0aGlzLl9pc0VuYWJsZWQpXG4gICAgICByZXR1cm47XG4gICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIHRoaXMuX29wZXJhdGlvbkNvbXBsZXRlSGFuZGxlcnMpIHtcbiAgICAgIGhhbmRsZXIoc291cmNlKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEludGVybmFsIGhlbHBlciBmb3IgcmVnaXN0ZXJpbmcgYSBidW5jaCBvZiBzaWRlIGVmZmVjdHMgYXQgb25jZSBhbmQga2VlcGluZyB0aGVtIG9yZ2FuaXplZC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICByZWdpc3RlcihoYW5kbGVyc0J5VHlwZSkge1xuICAgIGNvbnN0IGRpc3Bvc2VzID0gW107XG4gICAgZm9yIChjb25zdCBbdHlwZSwgaGFuZGxlcnNdIG9mIE9iamVjdC5lbnRyaWVzKGhhbmRsZXJzQnlUeXBlKSkge1xuICAgICAgaWYgKGhhbmRsZXJzPy5iZWZvcmVDcmVhdGUpIHtcbiAgICAgICAgZGlzcG9zZXMucHVzaCh0aGlzLnJlZ2lzdGVyQmVmb3JlQ3JlYXRlSGFuZGxlcih0eXBlLCBoYW5kbGVycy5iZWZvcmVDcmVhdGUpKTtcbiAgICAgIH1cbiAgICAgIGlmIChoYW5kbGVycz8uYWZ0ZXJDcmVhdGUpIHtcbiAgICAgICAgZGlzcG9zZXMucHVzaCh0aGlzLnJlZ2lzdGVyQWZ0ZXJDcmVhdGVIYW5kbGVyKHR5cGUsIGhhbmRsZXJzLmFmdGVyQ3JlYXRlKSk7XG4gICAgICB9XG4gICAgICBpZiAoaGFuZGxlcnM/LmJlZm9yZUNoYW5nZSkge1xuICAgICAgICBkaXNwb3Nlcy5wdXNoKHRoaXMucmVnaXN0ZXJCZWZvcmVDaGFuZ2VIYW5kbGVyKHR5cGUsIGhhbmRsZXJzLmJlZm9yZUNoYW5nZSkpO1xuICAgICAgfVxuICAgICAgaWYgKGhhbmRsZXJzPy5hZnRlckNoYW5nZSkge1xuICAgICAgICBkaXNwb3Nlcy5wdXNoKHRoaXMucmVnaXN0ZXJBZnRlckNoYW5nZUhhbmRsZXIodHlwZSwgaGFuZGxlcnMuYWZ0ZXJDaGFuZ2UpKTtcbiAgICAgIH1cbiAgICAgIGlmIChoYW5kbGVycz8uYmVmb3JlRGVsZXRlKSB7XG4gICAgICAgIGRpc3Bvc2VzLnB1c2godGhpcy5yZWdpc3RlckJlZm9yZURlbGV0ZUhhbmRsZXIodHlwZSwgaGFuZGxlcnMuYmVmb3JlRGVsZXRlKSk7XG4gICAgICB9XG4gICAgICBpZiAoaGFuZGxlcnM/LmFmdGVyRGVsZXRlKSB7XG4gICAgICAgIGRpc3Bvc2VzLnB1c2godGhpcy5yZWdpc3RlckFmdGVyRGVsZXRlSGFuZGxlcih0eXBlLCBoYW5kbGVycy5hZnRlckRlbGV0ZSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZm9yIChjb25zdCBkaXNwb3NlIG9mIGRpc3Bvc2VzKVxuICAgICAgICBkaXNwb3NlKCk7XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBoYW5kbGVyIHRvIGJlIGNhbGxlZCBiZWZvcmUgYSByZWNvcmQgb2YgYSBjZXJ0YWluIHR5cGUgaXMgY3JlYXRlZC4gUmV0dXJuIGFcbiAgICogbW9kaWZpZWQgcmVjb3JkIGZyb20gdGhlIGhhbmRsZXIgdG8gY2hhbmdlIHRoZSByZWNvcmQgdGhhdCB3aWxsIGJlIGNyZWF0ZWQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGhhbmRsZSBvbmx5IHRvIG1vZGlmeSB0aGUgY3JlYXRpb24gb2YgdGhlIHJlY29yZCBpdHNlbGYuIElmIHlvdSB3YW50IHRvIHRyaWdnZXIgYVxuICAgKiBzaWRlLWVmZmVjdCBvbiBhIGRpZmZlcmVudCByZWNvcmQgKGZvciBleGFtcGxlLCBtb3Zpbmcgb25lIHNoYXBlIHdoZW4gYW5vdGhlciBpcyBjcmVhdGVkKSxcbiAgICogdXNlIHtAbGluayBTdG9yZVNpZGVFZmZlY3RzLnJlZ2lzdGVyQWZ0ZXJDcmVhdGVIYW5kbGVyfSBpbnN0ZWFkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2lkZUVmZmVjdHMucmVnaXN0ZXJCZWZvcmVDcmVhdGVIYW5kbGVyKCdzaGFwZScsIChzaGFwZSwgc291cmNlKSA9PiB7XG4gICAqICAgICAvLyBvbmx5IG1vZGlmeSBzaGFwZXMgY3JlYXRlZCBieSB0aGUgdXNlclxuICAgKiAgICAgaWYgKHNvdXJjZSAhPT0gJ3VzZXInKSByZXR1cm4gc2hhcGVcbiAgICpcbiAgICogICAgIC8vYnkgZGVmYXVsdCwgYXJyb3cgc2hhcGVzIGhhdmUgbm8gbGFiZWwuIExldCdzIG1ha2Ugc3VyZSB0aGV5IGFsd2F5cyBoYXZlIGEgbGFiZWwuXG4gICAqICAgICBpZiAoc2hhcGUudHlwZSA9PT0gJ2Fycm93Jykge1xuICAgKiAgICAgICAgIHJldHVybiB7Li4uc2hhcGUsIHByb3BzOiB7Li4uc2hhcGUucHJvcHMsIHRleHQ6ICdhbiBhcnJvdyd9fVxuICAgKiAgICAgfVxuICAgKlxuICAgKiAgICAgLy8gb3RoZXIgc2hhcGVzIGdldCByZXR1cm5lZCB1bm1vZGlmaWVkXG4gICAqICAgICByZXR1cm4gc2hhcGVcbiAgICogfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlTmFtZSAtIFRoZSB0eXBlIG9mIHJlY29yZCB0byBsaXN0ZW4gZm9yXG4gICAqIEBwYXJhbSBoYW5kbGVyIC0gVGhlIGhhbmRsZXIgdG8gY2FsbFxuICAgKlxuICAgKiBAcmV0dXJucyBBIGNhbGxiYWNrIHRoYXQgcmVtb3ZlcyB0aGUgaGFuZGxlci5cbiAgICovXG4gIHJlZ2lzdGVyQmVmb3JlQ3JlYXRlSGFuZGxlcih0eXBlTmFtZSwgaGFuZGxlcikge1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYmVmb3JlQ3JlYXRlSGFuZGxlcnNbdHlwZU5hbWVdO1xuICAgIGlmICghaGFuZGxlcnMpXG4gICAgICB0aGlzLl9iZWZvcmVDcmVhdGVIYW5kbGVyc1t0eXBlTmFtZV0gPSBbXTtcbiAgICB0aGlzLl9iZWZvcmVDcmVhdGVIYW5kbGVyc1t0eXBlTmFtZV0ucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4gKCkgPT4gcmVtb3ZlKHRoaXMuX2JlZm9yZUNyZWF0ZUhhbmRsZXJzW3R5cGVOYW1lXSwgaGFuZGxlcik7XG4gIH1cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgaGFuZGxlciB0byBiZSBjYWxsZWQgYWZ0ZXIgYSByZWNvcmQgaXMgY3JlYXRlZC4gVGhpcyBpcyB1c2VmdWwgZm9yIHNpZGUtZWZmZWN0c1xuICAgKiB0aGF0IHdvdWxkIHVwZGF0ZSBfb3RoZXJfIHJlY29yZHMuIElmIHlvdSB3YW50IHRvIG1vZGlmeSB0aGUgcmVjb3JkIGJlaW5nIGNyZWF0ZWQgdXNlXG4gICAqIHtAbGluayBTdG9yZVNpZGVFZmZlY3RzLnJlZ2lzdGVyQmVmb3JlQ3JlYXRlSGFuZGxlcn0gaW5zdGVhZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNpZGVFZmZlY3RzLnJlZ2lzdGVyQWZ0ZXJDcmVhdGVIYW5kbGVyKCdwYWdlJywgKHBhZ2UsIHNvdXJjZSkgPT4ge1xuICAgKiAgICAgLy8gQXV0b21hdGljYWxseSBjcmVhdGUgYSBzaGFwZSB3aGVuIGEgcGFnZSBpcyBjcmVhdGVkXG4gICAqICAgICBlZGl0b3IuY3JlYXRlU2hhcGUoe1xuICAgKiAgICAgICAgIGlkOiBjcmVhdGVTaGFwZUlkKCksXG4gICAqICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgKiAgICAgICAgIHByb3BzOiB7IHRleHQ6IHBhZ2UubmFtZSB9LFxuICAgKiAgICAgfSlcbiAgICogfSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlTmFtZSAtIFRoZSB0eXBlIG9mIHJlY29yZCB0byBsaXN0ZW4gZm9yXG4gICAqIEBwYXJhbSBoYW5kbGVyIC0gVGhlIGhhbmRsZXIgdG8gY2FsbFxuICAgKlxuICAgKiBAcmV0dXJucyBBIGNhbGxiYWNrIHRoYXQgcmVtb3ZlcyB0aGUgaGFuZGxlci5cbiAgICovXG4gIHJlZ2lzdGVyQWZ0ZXJDcmVhdGVIYW5kbGVyKHR5cGVOYW1lLCBoYW5kbGVyKSB7XG4gICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLl9hZnRlckNyZWF0ZUhhbmRsZXJzW3R5cGVOYW1lXTtcbiAgICBpZiAoIWhhbmRsZXJzKVxuICAgICAgdGhpcy5fYWZ0ZXJDcmVhdGVIYW5kbGVyc1t0eXBlTmFtZV0gPSBbXTtcbiAgICB0aGlzLl9hZnRlckNyZWF0ZUhhbmRsZXJzW3R5cGVOYW1lXS5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiByZW1vdmUodGhpcy5fYWZ0ZXJDcmVhdGVIYW5kbGVyc1t0eXBlTmFtZV0sIGhhbmRsZXIpO1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGhhbmRsZXIgdG8gYmUgY2FsbGVkIGJlZm9yZSBhIHJlY29yZCBpcyBjaGFuZ2VkLiBUaGUgaGFuZGxlciBpcyBnaXZlbiB0aGUgb2xkIGFuZFxuICAgKiBuZXcgcmVjb3JkIC0geW91IGNhbiByZXR1cm4gYSBtb2RpZmllZCByZWNvcmQgdG8gYXBwbHkgYSBkaWZmZXJlbnQgdXBkYXRlLCBvciB0aGUgb2xkIHJlY29yZFxuICAgKiB0byBibG9jayB0aGUgdXBkYXRlIGVudGlyZWx5LlxuICAgKlxuICAgKiBVc2UgdGhpcyBoYW5kbGVyIG9ubHkgZm9yIGludGVyY2VwdGluZyB1cGRhdGVzIHRvIHRoZSByZWNvcmQgaXRzZWxmLiBJZiB5b3Ugd2FudCB0byB1cGRhdGVcbiAgICogb3RoZXIgcmVjb3JkcyBpbiByZXNwb25zZSB0byBhIGNoYW5nZSwgdXNlXG4gICAqIHtAbGluayBTdG9yZVNpZGVFZmZlY3RzLnJlZ2lzdGVyQWZ0ZXJDaGFuZ2VIYW5kbGVyfSBpbnN0ZWFkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2lkZUVmZmVjdHMucmVnaXN0ZXJCZWZvcmVDaGFuZ2VIYW5kbGVyKCdzaGFwZScsIChwcmV2LCBuZXh0LCBzb3VyY2UpID0+IHtcbiAgICogICAgIGlmIChuZXh0LmlzTG9ja2VkICYmICFwcmV2LmlzTG9ja2VkKSB7XG4gICAqICAgICAgICAgLy8gcHJldmVudCBzaGFwZXMgZnJvbSBldmVyIGJlaW5nIGxvY2tlZDpcbiAgICogICAgICAgICByZXR1cm4gcHJldlxuICAgKiAgICAgfVxuICAgKiAgICAgLy8gb3RoZXIgdHlwZXMgb2YgY2hhbmdlIGFyZSBhbGxvd2VkXG4gICAqICAgICByZXR1cm4gbmV4dFxuICAgKiB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHR5cGVOYW1lIC0gVGhlIHR5cGUgb2YgcmVjb3JkIHRvIGxpc3RlbiBmb3JcbiAgICogQHBhcmFtIGhhbmRsZXIgLSBUaGUgaGFuZGxlciB0byBjYWxsXG4gICAqXG4gICAqIEByZXR1cm5zIEEgY2FsbGJhY2sgdGhhdCByZW1vdmVzIHRoZSBoYW5kbGVyLlxuICAgKi9cbiAgcmVnaXN0ZXJCZWZvcmVDaGFuZ2VIYW5kbGVyKHR5cGVOYW1lLCBoYW5kbGVyKSB7XG4gICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLl9iZWZvcmVDaGFuZ2VIYW5kbGVyc1t0eXBlTmFtZV07XG4gICAgaWYgKCFoYW5kbGVycylcbiAgICAgIHRoaXMuX2JlZm9yZUNoYW5nZUhhbmRsZXJzW3R5cGVOYW1lXSA9IFtdO1xuICAgIHRoaXMuX2JlZm9yZUNoYW5nZUhhbmRsZXJzW3R5cGVOYW1lXS5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiByZW1vdmUodGhpcy5fYmVmb3JlQ2hhbmdlSGFuZGxlcnNbdHlwZU5hbWVdLCBoYW5kbGVyKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBoYW5kbGVyIHRvIGJlIGNhbGxlZCBhZnRlciBhIHJlY29yZCBpcyBjaGFuZ2VkLiBUaGlzIGlzIHVzZWZ1bCBmb3Igc2lkZS1lZmZlY3RzXG4gICAqIHRoYXQgd291bGQgdXBkYXRlIF9vdGhlcl8gcmVjb3JkcyAtIGlmIHlvdSB3YW50IHRvIG1vZGlmeSB0aGUgcmVjb3JkIGJlaW5nIGNoYW5nZWQsIHVzZVxuICAgKiB7QGxpbmsgU3RvcmVTaWRlRWZmZWN0cy5yZWdpc3RlckJlZm9yZUNoYW5nZUhhbmRsZXJ9IGluc3RlYWQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGVkaXRvci5zaWRlRWZmZWN0cy5yZWdpc3RlckFmdGVyQ2hhbmdlSGFuZGxlcignc2hhcGUnLCAocHJldiwgbmV4dCwgc291cmNlKSA9PiB7XG4gICAqICAgICBpZiAobmV4dC5wcm9wcy5jb2xvciA9PT0gJ3JlZCcpIHtcbiAgICogICAgICAgICAvLyB0aGVyZSBjYW4gb25seSBiZSBvbmUgcmVkIHNoYXBlIGF0IGEgdGltZTpcbiAgICogICAgICAgICBjb25zdCBvdGhlclJlZFNoYXBlcyA9IGVkaXRvci5nZXRDdXJyZW50UGFnZVNoYXBlcygpLmZpbHRlcihzID0+IHMucHJvcHMuY29sb3IgPT09ICdyZWQnICYmIHMuaWQgIT09IG5leHQuaWQpXG4gICAqICAgICAgICAgZWRpdG9yLnVwZGF0ZVNoYXBlcyhvdGhlclJlZFNoYXBlcy5tYXAocyA9PiAoey4uLnMsIHByb3BzOiB7Li4ucy5wcm9wcywgY29sb3I6ICdibHVlJ319KSkpXG4gICAqICAgICB9XG4gICAqIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdHlwZU5hbWUgLSBUaGUgdHlwZSBvZiByZWNvcmQgdG8gbGlzdGVuIGZvclxuICAgKiBAcGFyYW0gaGFuZGxlciAtIFRoZSBoYW5kbGVyIHRvIGNhbGxcbiAgICpcbiAgICogQHJldHVybnMgQSBjYWxsYmFjayB0aGF0IHJlbW92ZXMgdGhlIGhhbmRsZXIuXG4gICAqL1xuICByZWdpc3RlckFmdGVyQ2hhbmdlSGFuZGxlcih0eXBlTmFtZSwgaGFuZGxlcikge1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYWZ0ZXJDaGFuZ2VIYW5kbGVyc1t0eXBlTmFtZV07XG4gICAgaWYgKCFoYW5kbGVycylcbiAgICAgIHRoaXMuX2FmdGVyQ2hhbmdlSGFuZGxlcnNbdHlwZU5hbWVdID0gW107XG4gICAgdGhpcy5fYWZ0ZXJDaGFuZ2VIYW5kbGVyc1t0eXBlTmFtZV0ucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4gKCkgPT4gcmVtb3ZlKHRoaXMuX2FmdGVyQ2hhbmdlSGFuZGxlcnNbdHlwZU5hbWVdLCBoYW5kbGVyKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBoYW5kbGVyIHRvIGJlIGNhbGxlZCBiZWZvcmUgYSByZWNvcmQgaXMgZGVsZXRlZC4gVGhlIGhhbmRsZXIgY2FuIHJldHVybiBgZmFsc2VgIHRvXG4gICAqIHByZXZlbnQgdGhlIGRlbGV0aW9uLlxuICAgKlxuICAgKiBVc2UgdGhpcyBoYW5kbGVyIG9ubHkgZm9yIGludGVyY2VwdGluZyBkZWxldGlvbnMgb2YgdGhlIHJlY29yZCBpdHNlbGYuIElmIHlvdSB3YW50IHRvIGRvXG4gICAqIHNvbWV0aGluZyB0byBvdGhlciByZWNvcmRzIGluIHJlc3BvbnNlIHRvIGEgZGVsZXRpb24sIHVzZVxuICAgKiB7QGxpbmsgU3RvcmVTaWRlRWZmZWN0cy5yZWdpc3RlckFmdGVyRGVsZXRlSGFuZGxlcn0gaW5zdGVhZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogZWRpdG9yLnNpZGVFZmZlY3RzLnJlZ2lzdGVyQmVmb3JlRGVsZXRlSGFuZGxlcignc2hhcGUnLCAoc2hhcGUsIHNvdXJjZSkgPT4ge1xuICAgKiAgICAgaWYgKHNoYXBlLnByb3BzLmNvbG9yID09PSAncmVkJykge1xuICAgKiAgICAgICAgIC8vIHByZXZlbnQgcmVkIHNoYXBlcyBmcm9tIGJlaW5nIGRlbGV0ZWRcbiAgICogXHQgICAgICAgcmV0dXJuIGZhbHNlXG4gICAqICAgICB9XG4gICAqIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdHlwZU5hbWUgLSBUaGUgdHlwZSBvZiByZWNvcmQgdG8gbGlzdGVuIGZvclxuICAgKiBAcGFyYW0gaGFuZGxlciAtIFRoZSBoYW5kbGVyIHRvIGNhbGxcbiAgICpcbiAgICogQHJldHVybnMgQSBjYWxsYmFjayB0aGF0IHJlbW92ZXMgdGhlIGhhbmRsZXIuXG4gICAqL1xuICByZWdpc3RlckJlZm9yZURlbGV0ZUhhbmRsZXIodHlwZU5hbWUsIGhhbmRsZXIpIHtcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2JlZm9yZURlbGV0ZUhhbmRsZXJzW3R5cGVOYW1lXTtcbiAgICBpZiAoIWhhbmRsZXJzKVxuICAgICAgdGhpcy5fYmVmb3JlRGVsZXRlSGFuZGxlcnNbdHlwZU5hbWVdID0gW107XG4gICAgdGhpcy5fYmVmb3JlRGVsZXRlSGFuZGxlcnNbdHlwZU5hbWVdLnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuICgpID0+IHJlbW92ZSh0aGlzLl9iZWZvcmVEZWxldGVIYW5kbGVyc1t0eXBlTmFtZV0sIGhhbmRsZXIpO1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGhhbmRsZXIgdG8gYmUgY2FsbGVkIGFmdGVyIGEgcmVjb3JkIGlzIGRlbGV0ZWQuIFRoaXMgaXMgdXNlZnVsIGZvciBzaWRlLWVmZmVjdHNcbiAgICogdGhhdCB3b3VsZCB1cGRhdGUgX290aGVyXyByZWNvcmRzIC0gaWYgeW91IHdhbnQgdG8gYmxvY2sgdGhlIGRlbGV0aW9uIG9mIHRoZSByZWNvcmQgaXRzZWxmLFxuICAgKiB1c2Uge0BsaW5rIFN0b3JlU2lkZUVmZmVjdHMucmVnaXN0ZXJCZWZvcmVEZWxldGVIYW5kbGVyfSBpbnN0ZWFkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBlZGl0b3Iuc2lkZUVmZmVjdHMucmVnaXN0ZXJBZnRlckRlbGV0ZUhhbmRsZXIoJ3NoYXBlJywgKHNoYXBlLCBzb3VyY2UpID0+IHtcbiAgICogICAgIC8vIGlmIHRoZSBsYXN0IHNoYXBlIGluIGEgZnJhbWUgaXMgZGVsZXRlZCwgZGVsZXRlIHRoZSBmcmFtZSB0b286XG4gICAqICAgICBjb25zdCBwYXJlbnRGcmFtZSA9IGVkaXRvci5nZXRTaGFwZShzaGFwZS5wYXJlbnRJZClcbiAgICogICAgIGlmICghcGFyZW50RnJhbWUgfHwgcGFyZW50RnJhbWUudHlwZSAhPT0gJ2ZyYW1lJykgcmV0dXJuXG4gICAqXG4gICAqICAgICBjb25zdCBzaWJsaW5ncyA9IGVkaXRvci5nZXRTb3J0ZWRDaGlsZElkc0ZvclBhcmVudChwYXJlbnRGcmFtZSlcbiAgICogICAgIGlmIChzaWJsaW5ncy5sZW5ndGggPT09IDApIHtcbiAgICogICAgICAgICBlZGl0b3IuZGVsZXRlU2hhcGUocGFyZW50RnJhbWUuaWQpXG4gICAqICAgICB9XG4gICAqIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gdHlwZU5hbWUgLSBUaGUgdHlwZSBvZiByZWNvcmQgdG8gbGlzdGVuIGZvclxuICAgKiBAcGFyYW0gaGFuZGxlciAtIFRoZSBoYW5kbGVyIHRvIGNhbGxcbiAgICpcbiAgICogQHJldHVybnMgQSBjYWxsYmFjayB0aGF0IHJlbW92ZXMgdGhlIGhhbmRsZXIuXG4gICAqL1xuICByZWdpc3RlckFmdGVyRGVsZXRlSGFuZGxlcih0eXBlTmFtZSwgaGFuZGxlcikge1xuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fYWZ0ZXJEZWxldGVIYW5kbGVyc1t0eXBlTmFtZV07XG4gICAgaWYgKCFoYW5kbGVycylcbiAgICAgIHRoaXMuX2FmdGVyRGVsZXRlSGFuZGxlcnNbdHlwZU5hbWVdID0gW107XG4gICAgdGhpcy5fYWZ0ZXJEZWxldGVIYW5kbGVyc1t0eXBlTmFtZV0ucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4gKCkgPT4gcmVtb3ZlKHRoaXMuX2FmdGVyRGVsZXRlSGFuZGxlcnNbdHlwZU5hbWVdLCBoYW5kbGVyKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBoYW5kbGVyIHRvIGJlIGNhbGxlZCB3aGVuIGEgc3RvcmUgY29tcGxldGVzIGFuIGF0b21pYyBvcGVyYXRpb24uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGxldCBjb3VudCA9IDBcbiAgICpcbiAgICogZWRpdG9yLnNpZGVFZmZlY3RzLnJlZ2lzdGVyT3BlcmF0aW9uQ29tcGxldGVIYW5kbGVyKCgpID0+IGNvdW50KyspXG4gICAqXG4gICAqIGVkaXRvci5zZWxlY3RBbGwoKVxuICAgKiBleHBlY3QoY291bnQpLnRvQmUoMSlcbiAgICpcbiAgICogZWRpdG9yLnN0b3JlLmF0b21pYygoKSA9PiB7XG4gICAqXHRlZGl0b3Iuc2VsZWN0Tm9uZSgpXG4gICAqIFx0ZWRpdG9yLnNlbGVjdEFsbCgpXG4gICAqIH0pXG4gICAqXG4gICAqIGV4cGVjdChjb3VudCkudG9CZSgyKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGhhbmRsZXIgLSBUaGUgaGFuZGxlciB0byBjYWxsXG4gICAqXG4gICAqIEByZXR1cm5zIEEgY2FsbGJhY2sgdGhhdCByZW1vdmVzIHRoZSBoYW5kbGVyLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZWdpc3Rlck9wZXJhdGlvbkNvbXBsZXRlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgdGhpcy5fb3BlcmF0aW9uQ29tcGxldGVIYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiByZW1vdmUodGhpcy5fb3BlcmF0aW9uQ29tcGxldGVIYW5kbGVycywgaGFuZGxlcik7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlbW92ZShhcnJheSwgaXRlbSkge1xuICBjb25zdCBpbmRleCA9IGFycmF5LmluZGV4T2YoaXRlbSk7XG4gIGlmIChpbmRleCA+PSAwKSB7XG4gICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgU3RvcmVTaWRlRWZmZWN0c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0b3JlU2lkZUVmZmVjdHMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/StoreSideEffects.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/devFreeze.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/devFreeze.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   devFreeze: () => (/* binding */ devFreeze)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nfunction devFreeze(object) {\n  if (false) {}\n  const proto = Object.getPrototypeOf(object);\n  if (proto && !(Array.isArray(object) || proto === Object.prototype || proto === null || proto === _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.STRUCTURED_CLONE_OBJECT_PROTOTYPE)) {\n    console.error(\"cannot include non-js data in a record\", object);\n    throw new Error(\"cannot include non-js data in a record\");\n  }\n  const propNames = Object.getOwnPropertyNames(object);\n  for (const name of propNames) {\n    const value = object[name];\n    if (value && typeof value === \"object\") {\n      devFreeze(value);\n    }\n  }\n  return Object.freeze(object);\n}\n\n//# sourceMappingURL=devFreeze.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvZGV2RnJlZXplLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFrRTtBQUNsRTtBQUNBLE1BQU0sS0FBcUMsRUFBRSxFQUUxQztBQUNIO0FBQ0Esb0dBQW9HLDRFQUFpQztBQUNySTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RvcmUvZGlzdC1lc20vbGliL2RldkZyZWV6ZS5tanM/Y2NhYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTVFJVQ1RVUkVEX0NMT05FX09CSkVDVF9QUk9UT1RZUEUgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuZnVuY3Rpb24gZGV2RnJlZXplKG9iamVjdCkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuICBjb25zdCBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpO1xuICBpZiAocHJvdG8gJiYgIShBcnJheS5pc0FycmF5KG9iamVjdCkgfHwgcHJvdG8gPT09IE9iamVjdC5wcm90b3R5cGUgfHwgcHJvdG8gPT09IG51bGwgfHwgcHJvdG8gPT09IFNUUlVDVFVSRURfQ0xPTkVfT0JKRUNUX1BST1RPVFlQRSkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiY2Fubm90IGluY2x1ZGUgbm9uLWpzIGRhdGEgaW4gYSByZWNvcmRcIiwgb2JqZWN0KTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYW5ub3QgaW5jbHVkZSBub24tanMgZGF0YSBpbiBhIHJlY29yZFwiKTtcbiAgfVxuICBjb25zdCBwcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmplY3QpO1xuICBmb3IgKGNvbnN0IG5hbWUgb2YgcHJvcE5hbWVzKSB7XG4gICAgY29uc3QgdmFsdWUgPSBvYmplY3RbbmFtZV07XG4gICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgZGV2RnJlZXplKHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5mcmVlemUob2JqZWN0KTtcbn1cbmV4cG9ydCB7XG4gIGRldkZyZWV6ZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRldkZyZWV6ZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/devFreeze.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/executeQuery.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/executeQuery.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   executeQuery: () => (/* binding */ executeQuery),\n/* harmony export */   objectMatchesQuery: () => (/* binding */ objectMatchesQuery)\n/* harmony export */ });\n/* harmony import */ var _setUtils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setUtils.mjs */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/lib/setUtils.mjs\");\n\nfunction objectMatchesQuery(query, object) {\n  for (const [key, _matcher] of Object.entries(query)) {\n    const matcher = _matcher;\n    const value = object[key];\n    if (\"eq\" in matcher && value !== matcher.eq)\n      return false;\n    if (\"neq\" in matcher && value === matcher.neq)\n      return false;\n    if (\"gt\" in matcher && (typeof value !== \"number\" || value <= matcher.gt))\n      return false;\n  }\n  return true;\n}\nfunction executeQuery(store, typeName, query) {\n  const matchIds = Object.fromEntries(Object.keys(query).map((key) => [key, /* @__PURE__ */ new Set()]));\n  for (const [k, matcher] of Object.entries(query)) {\n    if (\"eq\" in matcher) {\n      const index = store.index(typeName, k);\n      const ids = index.get().get(matcher.eq);\n      if (ids) {\n        for (const id of ids) {\n          matchIds[k].add(id);\n        }\n      }\n    } else if (\"neq\" in matcher) {\n      const index = store.index(typeName, k);\n      for (const [value, ids] of index.get()) {\n        if (value !== matcher.neq) {\n          for (const id of ids) {\n            matchIds[k].add(id);\n          }\n        }\n      }\n    } else if (\"gt\" in matcher) {\n      const index = store.index(typeName, k);\n      for (const [value, ids] of index.get()) {\n        if (value > matcher.gt) {\n          for (const id of ids) {\n            matchIds[k].add(id);\n          }\n        }\n      }\n    }\n  }\n  return (0,_setUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.intersectSets)(Object.values(matchIds));\n}\n\n//# sourceMappingURL=executeQuery.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvZXhlY3V0ZVF1ZXJ5Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFhO0FBQ3RCO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0b3JlL2Rpc3QtZXNtL2xpYi9leGVjdXRlUXVlcnkubWpzPzRkOTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW50ZXJzZWN0U2V0cyB9IGZyb20gXCIuL3NldFV0aWxzLm1qc1wiO1xuZnVuY3Rpb24gb2JqZWN0TWF0Y2hlc1F1ZXJ5KHF1ZXJ5LCBvYmplY3QpIHtcbiAgZm9yIChjb25zdCBba2V5LCBfbWF0Y2hlcl0gb2YgT2JqZWN0LmVudHJpZXMocXVlcnkpKSB7XG4gICAgY29uc3QgbWF0Y2hlciA9IF9tYXRjaGVyO1xuICAgIGNvbnN0IHZhbHVlID0gb2JqZWN0W2tleV07XG4gICAgaWYgKFwiZXFcIiBpbiBtYXRjaGVyICYmIHZhbHVlICE9PSBtYXRjaGVyLmVxKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChcIm5lcVwiIGluIG1hdGNoZXIgJiYgdmFsdWUgPT09IG1hdGNoZXIubmVxKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChcImd0XCIgaW4gbWF0Y2hlciAmJiAodHlwZW9mIHZhbHVlICE9PSBcIm51bWJlclwiIHx8IHZhbHVlIDw9IG1hdGNoZXIuZ3QpKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gZXhlY3V0ZVF1ZXJ5KHN0b3JlLCB0eXBlTmFtZSwgcXVlcnkpIHtcbiAgY29uc3QgbWF0Y2hJZHMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmtleXMocXVlcnkpLm1hcCgoa2V5KSA9PiBba2V5LCAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpXSkpO1xuICBmb3IgKGNvbnN0IFtrLCBtYXRjaGVyXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeSkpIHtcbiAgICBpZiAoXCJlcVwiIGluIG1hdGNoZXIpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gc3RvcmUuaW5kZXgodHlwZU5hbWUsIGspO1xuICAgICAgY29uc3QgaWRzID0gaW5kZXguZ2V0KCkuZ2V0KG1hdGNoZXIuZXEpO1xuICAgICAgaWYgKGlkcykge1xuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykge1xuICAgICAgICAgIG1hdGNoSWRzW2tdLmFkZChpZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKFwibmVxXCIgaW4gbWF0Y2hlcikge1xuICAgICAgY29uc3QgaW5kZXggPSBzdG9yZS5pbmRleCh0eXBlTmFtZSwgayk7XG4gICAgICBmb3IgKGNvbnN0IFt2YWx1ZSwgaWRzXSBvZiBpbmRleC5nZXQoKSkge1xuICAgICAgICBpZiAodmFsdWUgIT09IG1hdGNoZXIubmVxKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBpZCBvZiBpZHMpIHtcbiAgICAgICAgICAgIG1hdGNoSWRzW2tdLmFkZChpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChcImd0XCIgaW4gbWF0Y2hlcikge1xuICAgICAgY29uc3QgaW5kZXggPSBzdG9yZS5pbmRleCh0eXBlTmFtZSwgayk7XG4gICAgICBmb3IgKGNvbnN0IFt2YWx1ZSwgaWRzXSBvZiBpbmRleC5nZXQoKSkge1xuICAgICAgICBpZiAodmFsdWUgPiBtYXRjaGVyLmd0KSB7XG4gICAgICAgICAgZm9yIChjb25zdCBpZCBvZiBpZHMpIHtcbiAgICAgICAgICAgIG1hdGNoSWRzW2tdLmFkZChpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBpbnRlcnNlY3RTZXRzKE9iamVjdC52YWx1ZXMobWF0Y2hJZHMpKTtcbn1cbmV4cG9ydCB7XG4gIGV4ZWN1dGVRdWVyeSxcbiAgb2JqZWN0TWF0Y2hlc1F1ZXJ5XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXhlY3V0ZVF1ZXJ5Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/executeQuery.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/migrate.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/migrate.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MigrationFailureReason: () => (/* binding */ MigrationFailureReason),\n/* harmony export */   createMigrationIds: () => (/* binding */ createMigrationIds),\n/* harmony export */   createMigrationSequence: () => (/* binding */ createMigrationSequence),\n/* harmony export */   createRecordMigrationSequence: () => (/* binding */ createRecordMigrationSequence),\n/* harmony export */   defineMigrations: () => (/* binding */ defineMigrations),\n/* harmony export */   parseMigrationId: () => (/* binding */ parseMigrationId),\n/* harmony export */   sortMigrations: () => (/* binding */ sortMigrations),\n/* harmony export */   validateMigrations: () => (/* binding */ validateMigrations)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nlet didWarn = false;\nfunction defineMigrations(opts) {\n  const { currentVersion, firstVersion, migrators = {}, subTypeKey, subTypeMigrations } = opts;\n  if (!didWarn) {\n    console.warn(\n      `The 'defineMigrations' function is deprecated and will be removed in a future release. Use the new migrations API instead. See the migration guide for more info: https://tldraw.dev/docs/persistence#Updating-legacy-shape-migrations-defineMigrations`\n    );\n    didWarn = true;\n  }\n  if (typeof currentVersion === \"number\" && typeof firstVersion === \"number\") {\n    if (currentVersion === firstVersion) {\n      throw Error(`Current version is equal to initial version.`);\n    } else if (currentVersion < firstVersion) {\n      throw Error(`Current version is lower than initial version.`);\n    }\n  }\n  return {\n    firstVersion: firstVersion ?? 0,\n    // defaults\n    currentVersion: currentVersion ?? 0,\n    // defaults\n    migrators,\n    subTypeKey,\n    subTypeMigrations\n  };\n}\nfunction squashDependsOn(sequence) {\n  const result = [];\n  for (let i = sequence.length - 1; i >= 0; i--) {\n    const elem = sequence[i];\n    if (!(\"id\" in elem)) {\n      const dependsOn = elem.dependsOn;\n      const prev = result[0];\n      if (prev) {\n        result[0] = {\n          ...prev,\n          dependsOn: dependsOn.concat(prev.dependsOn ?? [])\n        };\n      }\n    } else {\n      result.unshift(elem);\n    }\n  }\n  return result;\n}\nfunction createMigrationSequence({\n  sequence,\n  sequenceId,\n  retroactive = true\n}) {\n  const migrations = {\n    sequenceId,\n    retroactive,\n    sequence: squashDependsOn(sequence)\n  };\n  validateMigrations(migrations);\n  return migrations;\n}\nfunction createMigrationIds(sequenceId, versions) {\n  return Object.fromEntries(\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapEntries)(versions).map(([key, version]) => [key, `${sequenceId}/${version}`])\n  );\n}\nfunction createRecordMigrationSequence(opts) {\n  const sequenceId = opts.sequenceId;\n  return createMigrationSequence({\n    sequenceId,\n    retroactive: opts.retroactive ?? true,\n    sequence: opts.sequence.map(\n      (m) => \"id\" in m ? {\n        ...m,\n        scope: \"record\",\n        filter: (r) => r.typeName === opts.recordType && (m.filter?.(r) ?? true) && (opts.filter?.(r) ?? true)\n      } : m\n    )\n  });\n}\nfunction sortMigrations(migrations) {\n  const byId = new Map(migrations.map((m) => [m.id, m]));\n  const isProcessing = /* @__PURE__ */ new Set();\n  const result = [];\n  function process(m) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(!isProcessing.has(m.id), `Circular dependency in migrations: ${m.id}`);\n    isProcessing.add(m.id);\n    const { version, sequenceId } = parseMigrationId(m.id);\n    const parent = byId.get(`${sequenceId}/${version - 1}`);\n    if (parent) {\n      process(parent);\n    }\n    if (m.dependsOn) {\n      for (const dep of m.dependsOn) {\n        const depMigration = byId.get(dep);\n        if (depMigration) {\n          process(depMigration);\n        }\n      }\n    }\n    byId.delete(m.id);\n    result.push(m);\n  }\n  for (const m of byId.values()) {\n    process(m);\n  }\n  return result;\n}\nfunction parseMigrationId(id) {\n  const [sequenceId, version] = id.split(\"/\");\n  return { sequenceId, version: parseInt(version) };\n}\nfunction validateMigrationId(id, expectedSequenceId) {\n  if (expectedSequenceId) {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(\n      id.startsWith(expectedSequenceId + \"/\"),\n      `Every migration in sequence '${expectedSequenceId}' must have an id starting with '${expectedSequenceId}/'. Got invalid id: '${id}'`\n    );\n  }\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(id.match(/^(.*?)\\/(0|[1-9]\\d*)$/), `Invalid migration id: '${id}'`);\n}\nfunction validateMigrations(migrations) {\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(\n    !migrations.sequenceId.includes(\"/\"),\n    `sequenceId cannot contain a '/', got ${migrations.sequenceId}`\n  );\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(migrations.sequenceId.length, \"sequenceId must be a non-empty string\");\n  if (migrations.sequence.length === 0) {\n    return;\n  }\n  validateMigrationId(migrations.sequence[0].id, migrations.sequenceId);\n  let n = parseMigrationId(migrations.sequence[0].id).version;\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(\n    n === 1,\n    `Expected the first migrationId to be '${migrations.sequenceId}/1' but got '${migrations.sequence[0].id}'`\n  );\n  for (let i = 1; i < migrations.sequence.length; i++) {\n    const id = migrations.sequence[i].id;\n    validateMigrationId(id, migrations.sequenceId);\n    const m = parseMigrationId(id).version;\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.assert)(\n      m === n + 1,\n      `Migration id numbers must increase in increments of 1, expected ${migrations.sequenceId}/${n + 1} but got '${migrations.sequence[i].id}'`\n    );\n    n = m;\n  }\n}\nvar MigrationFailureReason = /* @__PURE__ */ ((MigrationFailureReason2) => {\n  MigrationFailureReason2[\"IncompatibleSubtype\"] = \"incompatible-subtype\";\n  MigrationFailureReason2[\"UnknownType\"] = \"unknown-type\";\n  MigrationFailureReason2[\"TargetVersionTooNew\"] = \"target-version-too-new\";\n  MigrationFailureReason2[\"TargetVersionTooOld\"] = \"target-version-too-old\";\n  MigrationFailureReason2[\"MigrationError\"] = \"migration-error\";\n  MigrationFailureReason2[\"UnrecognizedSubtype\"] = \"unrecognized-subtype\";\n  return MigrationFailureReason2;\n})(MigrationFailureReason || {});\n\n//# sourceMappingURL=migrate.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvbWlncmF0ZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXlEO0FBQ3pEO0FBQ0E7QUFDQSxVQUFVLDRDQUE0QyxrQ0FBa0M7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxRQUFRO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksK0RBQWdCLDRDQUE0QyxXQUFXLEdBQUcsUUFBUTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBTSxnRUFBZ0UsS0FBSztBQUMvRTtBQUNBLFlBQVksc0JBQXNCO0FBQ2xDLCtCQUErQixXQUFXLEdBQUcsWUFBWTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBTTtBQUNWO0FBQ0Esc0NBQXNDLG1CQUFtQixtQ0FBbUMsbUJBQW1CLHVCQUF1QixHQUFHO0FBQ3pJO0FBQ0E7QUFDQSxFQUFFLHFEQUFNLDhEQUE4RCxHQUFHO0FBQ3pFO0FBQ0E7QUFDQSxFQUFFLHFEQUFNO0FBQ1I7QUFDQSw0Q0FBNEMsc0JBQXNCO0FBQ2xFO0FBQ0EsRUFBRSxxREFBTTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLHFEQUFNO0FBQ1I7QUFDQSw2Q0FBNkMsc0JBQXNCLGVBQWUsMEJBQTBCO0FBQzVHO0FBQ0Esa0JBQWtCLGdDQUFnQztBQUNsRDtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFEQUFNO0FBQ1Y7QUFDQSx5RUFBeUUsc0JBQXNCLEdBQUcsT0FBTyxXQUFXLDBCQUEwQjtBQUM5STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhCQUE4QjtBQVU3QjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvc3RvcmUvZGlzdC1lc20vbGliL21pZ3JhdGUubWpzPzA2ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXNzZXJ0LCBvYmplY3RNYXBFbnRyaWVzIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmxldCBkaWRXYXJuID0gZmFsc2U7XG5mdW5jdGlvbiBkZWZpbmVNaWdyYXRpb25zKG9wdHMpIHtcbiAgY29uc3QgeyBjdXJyZW50VmVyc2lvbiwgZmlyc3RWZXJzaW9uLCBtaWdyYXRvcnMgPSB7fSwgc3ViVHlwZUtleSwgc3ViVHlwZU1pZ3JhdGlvbnMgfSA9IG9wdHM7XG4gIGlmICghZGlkV2Fybikge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGBUaGUgJ2RlZmluZU1pZ3JhdGlvbnMnIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSByZWxlYXNlLiBVc2UgdGhlIG5ldyBtaWdyYXRpb25zIEFQSSBpbnN0ZWFkLiBTZWUgdGhlIG1pZ3JhdGlvbiBndWlkZSBmb3IgbW9yZSBpbmZvOiBodHRwczovL3RsZHJhdy5kZXYvZG9jcy9wZXJzaXN0ZW5jZSNVcGRhdGluZy1sZWdhY3ktc2hhcGUtbWlncmF0aW9ucy1kZWZpbmVNaWdyYXRpb25zYFxuICAgICk7XG4gICAgZGlkV2FybiA9IHRydWU7XG4gIH1cbiAgaWYgKHR5cGVvZiBjdXJyZW50VmVyc2lvbiA9PT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgZmlyc3RWZXJzaW9uID09PSBcIm51bWJlclwiKSB7XG4gICAgaWYgKGN1cnJlbnRWZXJzaW9uID09PSBmaXJzdFZlcnNpb24pIHtcbiAgICAgIHRocm93IEVycm9yKGBDdXJyZW50IHZlcnNpb24gaXMgZXF1YWwgdG8gaW5pdGlhbCB2ZXJzaW9uLmApO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudFZlcnNpb24gPCBmaXJzdFZlcnNpb24pIHtcbiAgICAgIHRocm93IEVycm9yKGBDdXJyZW50IHZlcnNpb24gaXMgbG93ZXIgdGhhbiBpbml0aWFsIHZlcnNpb24uYCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgZmlyc3RWZXJzaW9uOiBmaXJzdFZlcnNpb24gPz8gMCxcbiAgICAvLyBkZWZhdWx0c1xuICAgIGN1cnJlbnRWZXJzaW9uOiBjdXJyZW50VmVyc2lvbiA/PyAwLFxuICAgIC8vIGRlZmF1bHRzXG4gICAgbWlncmF0b3JzLFxuICAgIHN1YlR5cGVLZXksXG4gICAgc3ViVHlwZU1pZ3JhdGlvbnNcbiAgfTtcbn1cbmZ1bmN0aW9uIHNxdWFzaERlcGVuZHNPbihzZXF1ZW5jZSkge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgZm9yIChsZXQgaSA9IHNlcXVlbmNlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgY29uc3QgZWxlbSA9IHNlcXVlbmNlW2ldO1xuICAgIGlmICghKFwiaWRcIiBpbiBlbGVtKSkge1xuICAgICAgY29uc3QgZGVwZW5kc09uID0gZWxlbS5kZXBlbmRzT247XG4gICAgICBjb25zdCBwcmV2ID0gcmVzdWx0WzBdO1xuICAgICAgaWYgKHByZXYpIHtcbiAgICAgICAgcmVzdWx0WzBdID0ge1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgZGVwZW5kc09uOiBkZXBlbmRzT24uY29uY2F0KHByZXYuZGVwZW5kc09uID8/IFtdKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQudW5zaGlmdChlbGVtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZU1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2UsXG4gIHNlcXVlbmNlSWQsXG4gIHJldHJvYWN0aXZlID0gdHJ1ZVxufSkge1xuICBjb25zdCBtaWdyYXRpb25zID0ge1xuICAgIHNlcXVlbmNlSWQsXG4gICAgcmV0cm9hY3RpdmUsXG4gICAgc2VxdWVuY2U6IHNxdWFzaERlcGVuZHNPbihzZXF1ZW5jZSlcbiAgfTtcbiAgdmFsaWRhdGVNaWdyYXRpb25zKG1pZ3JhdGlvbnMpO1xuICByZXR1cm4gbWlncmF0aW9ucztcbn1cbmZ1bmN0aW9uIGNyZWF0ZU1pZ3JhdGlvbklkcyhzZXF1ZW5jZUlkLCB2ZXJzaW9ucykge1xuICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIG9iamVjdE1hcEVudHJpZXModmVyc2lvbnMpLm1hcCgoW2tleSwgdmVyc2lvbl0pID0+IFtrZXksIGAke3NlcXVlbmNlSWR9LyR7dmVyc2lvbn1gXSlcbiAgKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlKG9wdHMpIHtcbiAgY29uc3Qgc2VxdWVuY2VJZCA9IG9wdHMuc2VxdWVuY2VJZDtcbiAgcmV0dXJuIGNyZWF0ZU1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgICBzZXF1ZW5jZUlkLFxuICAgIHJldHJvYWN0aXZlOiBvcHRzLnJldHJvYWN0aXZlID8/IHRydWUsXG4gICAgc2VxdWVuY2U6IG9wdHMuc2VxdWVuY2UubWFwKFxuICAgICAgKG0pID0+IFwiaWRcIiBpbiBtID8ge1xuICAgICAgICAuLi5tLFxuICAgICAgICBzY29wZTogXCJyZWNvcmRcIixcbiAgICAgICAgZmlsdGVyOiAocikgPT4gci50eXBlTmFtZSA9PT0gb3B0cy5yZWNvcmRUeXBlICYmIChtLmZpbHRlcj8uKHIpID8/IHRydWUpICYmIChvcHRzLmZpbHRlcj8uKHIpID8/IHRydWUpXG4gICAgICB9IDogbVxuICAgIClcbiAgfSk7XG59XG5mdW5jdGlvbiBzb3J0TWlncmF0aW9ucyhtaWdyYXRpb25zKSB7XG4gIGNvbnN0IGJ5SWQgPSBuZXcgTWFwKG1pZ3JhdGlvbnMubWFwKChtKSA9PiBbbS5pZCwgbV0pKTtcbiAgY29uc3QgaXNQcm9jZXNzaW5nID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGZ1bmN0aW9uIHByb2Nlc3MobSkge1xuICAgIGFzc2VydCghaXNQcm9jZXNzaW5nLmhhcyhtLmlkKSwgYENpcmN1bGFyIGRlcGVuZGVuY3kgaW4gbWlncmF0aW9uczogJHttLmlkfWApO1xuICAgIGlzUHJvY2Vzc2luZy5hZGQobS5pZCk7XG4gICAgY29uc3QgeyB2ZXJzaW9uLCBzZXF1ZW5jZUlkIH0gPSBwYXJzZU1pZ3JhdGlvbklkKG0uaWQpO1xuICAgIGNvbnN0IHBhcmVudCA9IGJ5SWQuZ2V0KGAke3NlcXVlbmNlSWR9LyR7dmVyc2lvbiAtIDF9YCk7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgcHJvY2VzcyhwYXJlbnQpO1xuICAgIH1cbiAgICBpZiAobS5kZXBlbmRzT24pIHtcbiAgICAgIGZvciAoY29uc3QgZGVwIG9mIG0uZGVwZW5kc09uKSB7XG4gICAgICAgIGNvbnN0IGRlcE1pZ3JhdGlvbiA9IGJ5SWQuZ2V0KGRlcCk7XG4gICAgICAgIGlmIChkZXBNaWdyYXRpb24pIHtcbiAgICAgICAgICBwcm9jZXNzKGRlcE1pZ3JhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgYnlJZC5kZWxldGUobS5pZCk7XG4gICAgcmVzdWx0LnB1c2gobSk7XG4gIH1cbiAgZm9yIChjb25zdCBtIG9mIGJ5SWQudmFsdWVzKCkpIHtcbiAgICBwcm9jZXNzKG0pO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBwYXJzZU1pZ3JhdGlvbklkKGlkKSB7XG4gIGNvbnN0IFtzZXF1ZW5jZUlkLCB2ZXJzaW9uXSA9IGlkLnNwbGl0KFwiL1wiKTtcbiAgcmV0dXJuIHsgc2VxdWVuY2VJZCwgdmVyc2lvbjogcGFyc2VJbnQodmVyc2lvbikgfTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlTWlncmF0aW9uSWQoaWQsIGV4cGVjdGVkU2VxdWVuY2VJZCkge1xuICBpZiAoZXhwZWN0ZWRTZXF1ZW5jZUlkKSB7XG4gICAgYXNzZXJ0KFxuICAgICAgaWQuc3RhcnRzV2l0aChleHBlY3RlZFNlcXVlbmNlSWQgKyBcIi9cIiksXG4gICAgICBgRXZlcnkgbWlncmF0aW9uIGluIHNlcXVlbmNlICcke2V4cGVjdGVkU2VxdWVuY2VJZH0nIG11c3QgaGF2ZSBhbiBpZCBzdGFydGluZyB3aXRoICcke2V4cGVjdGVkU2VxdWVuY2VJZH0vJy4gR290IGludmFsaWQgaWQ6ICcke2lkfSdgXG4gICAgKTtcbiAgfVxuICBhc3NlcnQoaWQubWF0Y2goL14oLio/KVxcLygwfFsxLTldXFxkKikkLyksIGBJbnZhbGlkIG1pZ3JhdGlvbiBpZDogJyR7aWR9J2ApO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVNaWdyYXRpb25zKG1pZ3JhdGlvbnMpIHtcbiAgYXNzZXJ0KFxuICAgICFtaWdyYXRpb25zLnNlcXVlbmNlSWQuaW5jbHVkZXMoXCIvXCIpLFxuICAgIGBzZXF1ZW5jZUlkIGNhbm5vdCBjb250YWluIGEgJy8nLCBnb3QgJHttaWdyYXRpb25zLnNlcXVlbmNlSWR9YFxuICApO1xuICBhc3NlcnQobWlncmF0aW9ucy5zZXF1ZW5jZUlkLmxlbmd0aCwgXCJzZXF1ZW5jZUlkIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nXCIpO1xuICBpZiAobWlncmF0aW9ucy5zZXF1ZW5jZS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFsaWRhdGVNaWdyYXRpb25JZChtaWdyYXRpb25zLnNlcXVlbmNlWzBdLmlkLCBtaWdyYXRpb25zLnNlcXVlbmNlSWQpO1xuICBsZXQgbiA9IHBhcnNlTWlncmF0aW9uSWQobWlncmF0aW9ucy5zZXF1ZW5jZVswXS5pZCkudmVyc2lvbjtcbiAgYXNzZXJ0KFxuICAgIG4gPT09IDEsXG4gICAgYEV4cGVjdGVkIHRoZSBmaXJzdCBtaWdyYXRpb25JZCB0byBiZSAnJHttaWdyYXRpb25zLnNlcXVlbmNlSWR9LzEnIGJ1dCBnb3QgJyR7bWlncmF0aW9ucy5zZXF1ZW5jZVswXS5pZH0nYFxuICApO1xuICBmb3IgKGxldCBpID0gMTsgaSA8IG1pZ3JhdGlvbnMuc2VxdWVuY2UubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBpZCA9IG1pZ3JhdGlvbnMuc2VxdWVuY2VbaV0uaWQ7XG4gICAgdmFsaWRhdGVNaWdyYXRpb25JZChpZCwgbWlncmF0aW9ucy5zZXF1ZW5jZUlkKTtcbiAgICBjb25zdCBtID0gcGFyc2VNaWdyYXRpb25JZChpZCkudmVyc2lvbjtcbiAgICBhc3NlcnQoXG4gICAgICBtID09PSBuICsgMSxcbiAgICAgIGBNaWdyYXRpb24gaWQgbnVtYmVycyBtdXN0IGluY3JlYXNlIGluIGluY3JlbWVudHMgb2YgMSwgZXhwZWN0ZWQgJHttaWdyYXRpb25zLnNlcXVlbmNlSWR9LyR7biArIDF9IGJ1dCBnb3QgJyR7bWlncmF0aW9ucy5zZXF1ZW5jZVtpXS5pZH0nYFxuICAgICk7XG4gICAgbiA9IG07XG4gIH1cbn1cbnZhciBNaWdyYXRpb25GYWlsdXJlUmVhc29uID0gLyogQF9fUFVSRV9fICovICgoTWlncmF0aW9uRmFpbHVyZVJlYXNvbjIpID0+IHtcbiAgTWlncmF0aW9uRmFpbHVyZVJlYXNvbjJbXCJJbmNvbXBhdGlibGVTdWJ0eXBlXCJdID0gXCJpbmNvbXBhdGlibGUtc3VidHlwZVwiO1xuICBNaWdyYXRpb25GYWlsdXJlUmVhc29uMltcIlVua25vd25UeXBlXCJdID0gXCJ1bmtub3duLXR5cGVcIjtcbiAgTWlncmF0aW9uRmFpbHVyZVJlYXNvbjJbXCJUYXJnZXRWZXJzaW9uVG9vTmV3XCJdID0gXCJ0YXJnZXQtdmVyc2lvbi10b28tbmV3XCI7XG4gIE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24yW1wiVGFyZ2V0VmVyc2lvblRvb09sZFwiXSA9IFwidGFyZ2V0LXZlcnNpb24tdG9vLW9sZFwiO1xuICBNaWdyYXRpb25GYWlsdXJlUmVhc29uMltcIk1pZ3JhdGlvbkVycm9yXCJdID0gXCJtaWdyYXRpb24tZXJyb3JcIjtcbiAgTWlncmF0aW9uRmFpbHVyZVJlYXNvbjJbXCJVbnJlY29nbml6ZWRTdWJ0eXBlXCJdID0gXCJ1bnJlY29nbml6ZWQtc3VidHlwZVwiO1xuICByZXR1cm4gTWlncmF0aW9uRmFpbHVyZVJlYXNvbjI7XG59KShNaWdyYXRpb25GYWlsdXJlUmVhc29uIHx8IHt9KTtcbmV4cG9ydCB7XG4gIE1pZ3JhdGlvbkZhaWx1cmVSZWFzb24sXG4gIGNyZWF0ZU1pZ3JhdGlvbklkcyxcbiAgY3JlYXRlTWlncmF0aW9uU2VxdWVuY2UsXG4gIGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlLFxuICBkZWZpbmVNaWdyYXRpb25zLFxuICBwYXJzZU1pZ3JhdGlvbklkLFxuICBzb3J0TWlncmF0aW9ucyxcbiAgdmFsaWRhdGVNaWdyYXRpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWlncmF0ZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/migrate.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/dist-esm/lib/setUtils.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/store/dist-esm/lib/setUtils.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   diffSets: () => (/* binding */ diffSets),\n/* harmony export */   intersectSets: () => (/* binding */ intersectSets)\n/* harmony export */ });\nfunction intersectSets(sets) {\n  if (sets.length === 0)\n    return /* @__PURE__ */ new Set();\n  const first = sets[0];\n  const rest = sets.slice(1);\n  const result = /* @__PURE__ */ new Set();\n  for (const val of first) {\n    if (rest.every((set) => set.has(val))) {\n      result.add(val);\n    }\n  }\n  return result;\n}\nfunction diffSets(prev, next) {\n  const result = {};\n  for (const val of next) {\n    if (!prev.has(val)) {\n      result.added ??= /* @__PURE__ */ new Set();\n      result.added.add(val);\n    }\n  }\n  for (const val of prev) {\n    if (!next.has(val)) {\n      result.removed ??= /* @__PURE__ */ new Set();\n      result.removed.add(val);\n    }\n  }\n  return result.added || result.removed ? result : void 0;\n}\n\n//# sourceMappingURL=setUtils.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvc2V0VXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9kaXN0LWVzbS9saWIvc2V0VXRpbHMubWpzP2JkNmUiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaW50ZXJzZWN0U2V0cyhzZXRzKSB7XG4gIGlmIChzZXRzLmxlbmd0aCA9PT0gMClcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgY29uc3QgZmlyc3QgPSBzZXRzWzBdO1xuICBjb25zdCByZXN0ID0gc2V0cy5zbGljZSgxKTtcbiAgY29uc3QgcmVzdWx0ID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgZm9yIChjb25zdCB2YWwgb2YgZmlyc3QpIHtcbiAgICBpZiAocmVzdC5ldmVyeSgoc2V0KSA9PiBzZXQuaGFzKHZhbCkpKSB7XG4gICAgICByZXN1bHQuYWRkKHZhbCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBkaWZmU2V0cyhwcmV2LCBuZXh0KSB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xuICBmb3IgKGNvbnN0IHZhbCBvZiBuZXh0KSB7XG4gICAgaWYgKCFwcmV2Lmhhcyh2YWwpKSB7XG4gICAgICByZXN1bHQuYWRkZWQgPz89IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICByZXN1bHQuYWRkZWQuYWRkKHZhbCk7XG4gICAgfVxuICB9XG4gIGZvciAoY29uc3QgdmFsIG9mIHByZXYpIHtcbiAgICBpZiAoIW5leHQuaGFzKHZhbCkpIHtcbiAgICAgIHJlc3VsdC5yZW1vdmVkID8/PSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgcmVzdWx0LnJlbW92ZWQuYWRkKHZhbCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQuYWRkZWQgfHwgcmVzdWx0LnJlbW92ZWQgPyByZXN1bHQgOiB2b2lkIDA7XG59XG5leHBvcnQge1xuICBkaWZmU2V0cyxcbiAgaW50ZXJzZWN0U2V0c1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNldFV0aWxzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/dist-esm/lib/setUtils.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/node_modules/nanoid/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/store/node_modules/nanoid/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customAlphabet: () => (/* binding */ customAlphabet),\n/* harmony export */   customRandom: () => (/* binding */ customRandom),\n/* harmony export */   nanoid: () => (/* binding */ nanoid),\n/* harmony export */   random: () => (/* binding */ random),\n/* harmony export */   urlAlphabet: () => (/* reexport safe */ _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__.urlAlphabet)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./url-alphabet/index.js */ \"(ssr)/./node_modules/@tldraw/store/node_modules/nanoid/url-alphabet/index.js\");\n\n\n\nconst POOL_SIZE_MULTIPLIER = 128\nlet pool, poolOffset\nlet fillPool = bytes => {\n  if (!pool || pool.length < bytes) {\n    pool = Buffer.allocUnsafe(bytes * POOL_SIZE_MULTIPLIER)\n    ;(0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomFillSync)(pool)\n    poolOffset = 0\n  } else if (poolOffset + bytes > pool.length) {\n    (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomFillSync)(pool)\n    poolOffset = 0\n  }\n  poolOffset += bytes\n}\nlet random = bytes => {\n  fillPool((bytes -= 0))\n  return pool.subarray(poolOffset - bytes, poolOffset)\n}\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (31 - Math.clz32((alphabet.length - 1) | 1))) - 1\n  let step = Math.ceil((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let i = step\n      while (i--) {\n        id += alphabet[bytes[i] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) => {\n  fillPool((size -= 0))\n  let id = ''\n  for (let i = poolOffset - size; i < poolOffset; i++) {\n    id += _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__.urlAlphabet[pool[i] & 63]\n  }\n  return id\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9ub2RlX21vZHVsZXMvbmFub2lkL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBdUM7QUFDYztBQUMvQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx1REFBYztBQUNsQjtBQUNBLElBQUk7QUFDSixJQUFJLHNEQUFjO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ087QUFDUDtBQUNBO0FBQ0Esa0NBQWtDLGdCQUFnQjtBQUNsRCxVQUFVLCtEQUFXO0FBQ3JCO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0b3JlL25vZGVfbW9kdWxlcy9uYW5vaWQvaW5kZXguanM/YTYyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByYW5kb21GaWxsU3luYyB9IGZyb20gJ2NyeXB0bydcbmltcG9ydCB7IHVybEFscGhhYmV0IH0gZnJvbSAnLi91cmwtYWxwaGFiZXQvaW5kZXguanMnXG5leHBvcnQgeyB1cmxBbHBoYWJldCB9XG5jb25zdCBQT09MX1NJWkVfTVVMVElQTElFUiA9IDEyOFxubGV0IHBvb2wsIHBvb2xPZmZzZXRcbmxldCBmaWxsUG9vbCA9IGJ5dGVzID0+IHtcbiAgaWYgKCFwb29sIHx8IHBvb2wubGVuZ3RoIDwgYnl0ZXMpIHtcbiAgICBwb29sID0gQnVmZmVyLmFsbG9jVW5zYWZlKGJ5dGVzICogUE9PTF9TSVpFX01VTFRJUExJRVIpXG4gICAgcmFuZG9tRmlsbFN5bmMocG9vbClcbiAgICBwb29sT2Zmc2V0ID0gMFxuICB9IGVsc2UgaWYgKHBvb2xPZmZzZXQgKyBieXRlcyA+IHBvb2wubGVuZ3RoKSB7XG4gICAgcmFuZG9tRmlsbFN5bmMocG9vbClcbiAgICBwb29sT2Zmc2V0ID0gMFxuICB9XG4gIHBvb2xPZmZzZXQgKz0gYnl0ZXNcbn1cbmV4cG9ydCBsZXQgcmFuZG9tID0gYnl0ZXMgPT4ge1xuICBmaWxsUG9vbCgoYnl0ZXMgLT0gMCkpXG4gIHJldHVybiBwb29sLnN1YmFycmF5KHBvb2xPZmZzZXQgLSBieXRlcywgcG9vbE9mZnNldClcbn1cbmV4cG9ydCBsZXQgY3VzdG9tUmFuZG9tID0gKGFscGhhYmV0LCBkZWZhdWx0U2l6ZSwgZ2V0UmFuZG9tKSA9PiB7XG4gIGxldCBtYXNrID0gKDIgPDwgKDMxIC0gTWF0aC5jbHozMigoYWxwaGFiZXQubGVuZ3RoIC0gMSkgfCAxKSkpIC0gMVxuICBsZXQgc3RlcCA9IE1hdGguY2VpbCgoMS42ICogbWFzayAqIGRlZmF1bHRTaXplKSAvIGFscGhhYmV0Lmxlbmd0aClcbiAgcmV0dXJuIChzaXplID0gZGVmYXVsdFNpemUpID0+IHtcbiAgICBsZXQgaWQgPSAnJ1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBsZXQgYnl0ZXMgPSBnZXRSYW5kb20oc3RlcClcbiAgICAgIGxldCBpID0gc3RlcFxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBpZCArPSBhbHBoYWJldFtieXRlc1tpXSAmIG1hc2tdIHx8ICcnXG4gICAgICAgIGlmIChpZC5sZW5ndGggPT09IHNpemUpIHJldHVybiBpZFxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZXhwb3J0IGxldCBjdXN0b21BbHBoYWJldCA9IChhbHBoYWJldCwgc2l6ZSA9IDIxKSA9PlxuICBjdXN0b21SYW5kb20oYWxwaGFiZXQsIHNpemUsIHJhbmRvbSlcbmV4cG9ydCBsZXQgbmFub2lkID0gKHNpemUgPSAyMSkgPT4ge1xuICBmaWxsUG9vbCgoc2l6ZSAtPSAwKSlcbiAgbGV0IGlkID0gJydcbiAgZm9yIChsZXQgaSA9IHBvb2xPZmZzZXQgLSBzaXplOyBpIDwgcG9vbE9mZnNldDsgaSsrKSB7XG4gICAgaWQgKz0gdXJsQWxwaGFiZXRbcG9vbFtpXSAmIDYzXVxuICB9XG4gIHJldHVybiBpZFxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/node_modules/nanoid/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/store/node_modules/nanoid/url-alphabet/index.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@tldraw/store/node_modules/nanoid/url-alphabet/index.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   urlAlphabet: () => (/* binding */ urlAlphabet)\n/* harmony export */ });\nconst urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy9zdG9yZS9ub2RlX21vZHVsZXMvbmFub2lkL3VybC1hbHBoYWJldC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUCIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3N0b3JlL25vZGVfbW9kdWxlcy9uYW5vaWQvdXJsLWFscGhhYmV0L2luZGV4LmpzP2VkYTMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHVybEFscGhhYmV0ID1cbiAgJ3VzZWFuZG9tLTI2VDE5ODM0MFBYNzVweEpBQ0tWRVJZTUlOREJVU0hXT0xGX0dRWmJmZ2hqa2xxdnd5enJpY3QnXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/store/node_modules/nanoid/url-alphabet/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/TLStore.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/TLStore.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createIntegrityChecker: () => (/* binding */ createIntegrityChecker),\n/* harmony export */   onValidationFailure: () => (/* binding */ onValidationFailure)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./records/TLCamera.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs\");\n/* harmony import */ var _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./records/TLDocument.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLDocument.mjs\");\n/* harmony import */ var _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./records/TLInstance.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs\");\n/* harmony import */ var _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./records/TLPage.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs\");\n/* harmony import */ var _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./records/TLPageState.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs\");\n/* harmony import */ var _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./records/TLPointer.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs\");\n\n\n\n\n\n\n\nfunction sortByIndex(a, b) {\n  if (a.index < b.index) {\n    return -1;\n  } else if (a.index > b.index) {\n    return 1;\n  }\n  return 0;\n}\nfunction redactRecordForErrorReporting(record) {\n  if (record.typeName === \"asset\") {\n    if (\"src\" in record) {\n      record.src = \"<redacted>\";\n    }\n    if (\"src\" in record.props) {\n      record.props.src = \"<redacted>\";\n    }\n  }\n}\nconst onValidationFailure = ({ error, phase, record, recordBefore }) => {\n  const isExistingValidationIssue = (\n    // if we're initializing the store for the first time, we should\n    // allow invalid records so people can load old buggy data:\n    (phase === \"initialize\")\n  );\n  (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.annotateError)(error, {\n    tags: {\n      origin: \"store.validateRecord\",\n      storePhase: phase,\n      isExistingValidationIssue\n    },\n    extras: {\n      recordBefore: recordBefore ? redactRecordForErrorReporting((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(recordBefore)) : void 0,\n      recordAfter: redactRecordForErrorReporting((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.structuredClone)(record))\n    }\n  });\n  throw error;\n};\nfunction getDefaultPages() {\n  return [\n    _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_4__.PageRecordType.create({\n      id: \"page:page\",\n      name: \"Page 1\",\n      index: \"a1\",\n      meta: {}\n    })\n  ];\n}\nfunction createIntegrityChecker(store) {\n  const $pageIds = store.query.ids(\"page\");\n  const ensureStoreIsUsable = () => {\n    if (!store.has(_records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_2__.TLDOCUMENT_ID)) {\n      store.put([_records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_2__.DocumentRecordType.create({ id: _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_2__.TLDOCUMENT_ID, name: store.props.defaultName })]);\n      return ensureStoreIsUsable();\n    }\n    if (!store.has(_records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_6__.TLPOINTER_ID)) {\n      store.put([_records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_6__.PointerRecordType.create({ id: _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_6__.TLPOINTER_ID })]);\n      return ensureStoreIsUsable();\n    }\n    const pageIds = $pageIds.get();\n    if (pageIds.size === 0) {\n      store.put(getDefaultPages());\n      return ensureStoreIsUsable();\n    }\n    const getFirstPageId = () => [...pageIds].map((id) => store.get(id)).sort(sortByIndex)[0].id;\n    const instanceState = store.get(_records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_3__.TLINSTANCE_ID);\n    if (!instanceState) {\n      store.put([\n        store.schema.types.instance.create({\n          id: _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_3__.TLINSTANCE_ID,\n          currentPageId: getFirstPageId(),\n          exportBackground: true\n        })\n      ]);\n      return ensureStoreIsUsable();\n    } else if (!pageIds.has(instanceState.currentPageId)) {\n      store.put([{ ...instanceState, currentPageId: getFirstPageId() }]);\n      return ensureStoreIsUsable();\n    }\n    const missingPageStateIds = /* @__PURE__ */ new Set();\n    const missingCameraIds = /* @__PURE__ */ new Set();\n    for (const id of pageIds) {\n      const pageStateId = _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_5__.InstancePageStateRecordType.createId(id);\n      if (!store.has(pageStateId)) {\n        missingPageStateIds.add(pageStateId);\n      }\n      const cameraId = _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_1__.CameraRecordType.createId(id);\n      if (!store.has(cameraId)) {\n        missingCameraIds.add(cameraId);\n      }\n    }\n    if (missingPageStateIds.size > 0) {\n      store.put(\n        [...missingPageStateIds].map(\n          (id) => _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_5__.InstancePageStateRecordType.create({\n            id,\n            pageId: _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_5__.InstancePageStateRecordType.parseId(id)\n          })\n        )\n      );\n    }\n    if (missingCameraIds.size > 0) {\n      store.put([...missingCameraIds].map((id) => _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_1__.CameraRecordType.create({ id })));\n    }\n  };\n  return ensureStoreIsUsable;\n}\n\n//# sourceMappingURL=TLStore.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9UTFN0b3JlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBK0Q7QUFDTDtBQUNtQjtBQUNwQjtBQUNIO0FBQ2tCO0FBQ0U7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isb0NBQW9DO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDREQUFhO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxpRUFBaUUsOERBQWU7QUFDaEYsaURBQWlELDhEQUFlO0FBQ2hFO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwrREFBYztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtFQUFhO0FBQ2hDLGlCQUFpQix1RUFBa0IsVUFBVSxJQUFJLGtFQUFhLGlDQUFpQztBQUMvRjtBQUNBO0FBQ0EsbUJBQW1CLGdFQUFZO0FBQy9CLGlCQUFpQixxRUFBaUIsVUFBVSxJQUFJLGdFQUFZLEVBQUU7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxrRUFBYTtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxjQUFjLGtFQUFhO0FBQzNCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE1BQU07QUFDTixtQkFBbUIsbURBQW1EO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsaUZBQTJCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtRUFBZ0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUZBQTJCO0FBQzdDO0FBQ0Esb0JBQW9CLGlGQUEyQjtBQUMvQyxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsbUVBQWdCLFVBQVUsSUFBSTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9UTFN0b3JlLm1qcz9hN2Q3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFubm90YXRlRXJyb3IsIHN0cnVjdHVyZWRDbG9uZSB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBDYW1lcmFSZWNvcmRUeXBlIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTENhbWVyYS5tanNcIjtcbmltcG9ydCB7IERvY3VtZW50UmVjb3JkVHlwZSwgVExET0NVTUVOVF9JRCB9IGZyb20gXCIuL3JlY29yZHMvVExEb2N1bWVudC5tanNcIjtcbmltcG9ydCB7IFRMSU5TVEFOQ0VfSUQgfSBmcm9tIFwiLi9yZWNvcmRzL1RMSW5zdGFuY2UubWpzXCI7XG5pbXBvcnQgeyBQYWdlUmVjb3JkVHlwZSB9IGZyb20gXCIuL3JlY29yZHMvVExQYWdlLm1qc1wiO1xuaW1wb3J0IHsgSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTFBhZ2VTdGF0ZS5tanNcIjtcbmltcG9ydCB7IFBvaW50ZXJSZWNvcmRUeXBlLCBUTFBPSU5URVJfSUQgfSBmcm9tIFwiLi9yZWNvcmRzL1RMUG9pbnRlci5tanNcIjtcbmZ1bmN0aW9uIHNvcnRCeUluZGV4KGEsIGIpIHtcbiAgaWYgKGEuaW5kZXggPCBiLmluZGV4KSB7XG4gICAgcmV0dXJuIC0xO1xuICB9IGVsc2UgaWYgKGEuaW5kZXggPiBiLmluZGV4KSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5mdW5jdGlvbiByZWRhY3RSZWNvcmRGb3JFcnJvclJlcG9ydGluZyhyZWNvcmQpIHtcbiAgaWYgKHJlY29yZC50eXBlTmFtZSA9PT0gXCJhc3NldFwiKSB7XG4gICAgaWYgKFwic3JjXCIgaW4gcmVjb3JkKSB7XG4gICAgICByZWNvcmQuc3JjID0gXCI8cmVkYWN0ZWQ+XCI7XG4gICAgfVxuICAgIGlmIChcInNyY1wiIGluIHJlY29yZC5wcm9wcykge1xuICAgICAgcmVjb3JkLnByb3BzLnNyYyA9IFwiPHJlZGFjdGVkPlwiO1xuICAgIH1cbiAgfVxufVxuY29uc3Qgb25WYWxpZGF0aW9uRmFpbHVyZSA9ICh7IGVycm9yLCBwaGFzZSwgcmVjb3JkLCByZWNvcmRCZWZvcmUgfSkgPT4ge1xuICBjb25zdCBpc0V4aXN0aW5nVmFsaWRhdGlvbklzc3VlID0gKFxuICAgIC8vIGlmIHdlJ3JlIGluaXRpYWxpemluZyB0aGUgc3RvcmUgZm9yIHRoZSBmaXJzdCB0aW1lLCB3ZSBzaG91bGRcbiAgICAvLyBhbGxvdyBpbnZhbGlkIHJlY29yZHMgc28gcGVvcGxlIGNhbiBsb2FkIG9sZCBidWdneSBkYXRhOlxuICAgIChwaGFzZSA9PT0gXCJpbml0aWFsaXplXCIpXG4gICk7XG4gIGFubm90YXRlRXJyb3IoZXJyb3IsIHtcbiAgICB0YWdzOiB7XG4gICAgICBvcmlnaW46IFwic3RvcmUudmFsaWRhdGVSZWNvcmRcIixcbiAgICAgIHN0b3JlUGhhc2U6IHBoYXNlLFxuICAgICAgaXNFeGlzdGluZ1ZhbGlkYXRpb25Jc3N1ZVxuICAgIH0sXG4gICAgZXh0cmFzOiB7XG4gICAgICByZWNvcmRCZWZvcmU6IHJlY29yZEJlZm9yZSA/IHJlZGFjdFJlY29yZEZvckVycm9yUmVwb3J0aW5nKHN0cnVjdHVyZWRDbG9uZShyZWNvcmRCZWZvcmUpKSA6IHZvaWQgMCxcbiAgICAgIHJlY29yZEFmdGVyOiByZWRhY3RSZWNvcmRGb3JFcnJvclJlcG9ydGluZyhzdHJ1Y3R1cmVkQ2xvbmUocmVjb3JkKSlcbiAgICB9XG4gIH0pO1xuICB0aHJvdyBlcnJvcjtcbn07XG5mdW5jdGlvbiBnZXREZWZhdWx0UGFnZXMoKSB7XG4gIHJldHVybiBbXG4gICAgUGFnZVJlY29yZFR5cGUuY3JlYXRlKHtcbiAgICAgIGlkOiBcInBhZ2U6cGFnZVwiLFxuICAgICAgbmFtZTogXCJQYWdlIDFcIixcbiAgICAgIGluZGV4OiBcImExXCIsXG4gICAgICBtZXRhOiB7fVxuICAgIH0pXG4gIF07XG59XG5mdW5jdGlvbiBjcmVhdGVJbnRlZ3JpdHlDaGVja2VyKHN0b3JlKSB7XG4gIGNvbnN0ICRwYWdlSWRzID0gc3RvcmUucXVlcnkuaWRzKFwicGFnZVwiKTtcbiAgY29uc3QgZW5zdXJlU3RvcmVJc1VzYWJsZSA9ICgpID0+IHtcbiAgICBpZiAoIXN0b3JlLmhhcyhUTERPQ1VNRU5UX0lEKSkge1xuICAgICAgc3RvcmUucHV0KFtEb2N1bWVudFJlY29yZFR5cGUuY3JlYXRlKHsgaWQ6IFRMRE9DVU1FTlRfSUQsIG5hbWU6IHN0b3JlLnByb3BzLmRlZmF1bHROYW1lIH0pXSk7XG4gICAgICByZXR1cm4gZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICAgIH1cbiAgICBpZiAoIXN0b3JlLmhhcyhUTFBPSU5URVJfSUQpKSB7XG4gICAgICBzdG9yZS5wdXQoW1BvaW50ZXJSZWNvcmRUeXBlLmNyZWF0ZSh7IGlkOiBUTFBPSU5URVJfSUQgfSldKTtcbiAgICAgIHJldHVybiBlbnN1cmVTdG9yZUlzVXNhYmxlKCk7XG4gICAgfVxuICAgIGNvbnN0IHBhZ2VJZHMgPSAkcGFnZUlkcy5nZXQoKTtcbiAgICBpZiAocGFnZUlkcy5zaXplID09PSAwKSB7XG4gICAgICBzdG9yZS5wdXQoZ2V0RGVmYXVsdFBhZ2VzKCkpO1xuICAgICAgcmV0dXJuIGVuc3VyZVN0b3JlSXNVc2FibGUoKTtcbiAgICB9XG4gICAgY29uc3QgZ2V0Rmlyc3RQYWdlSWQgPSAoKSA9PiBbLi4ucGFnZUlkc10ubWFwKChpZCkgPT4gc3RvcmUuZ2V0KGlkKSkuc29ydChzb3J0QnlJbmRleClbMF0uaWQ7XG4gICAgY29uc3QgaW5zdGFuY2VTdGF0ZSA9IHN0b3JlLmdldChUTElOU1RBTkNFX0lEKTtcbiAgICBpZiAoIWluc3RhbmNlU3RhdGUpIHtcbiAgICAgIHN0b3JlLnB1dChbXG4gICAgICAgIHN0b3JlLnNjaGVtYS50eXBlcy5pbnN0YW5jZS5jcmVhdGUoe1xuICAgICAgICAgIGlkOiBUTElOU1RBTkNFX0lELFxuICAgICAgICAgIGN1cnJlbnRQYWdlSWQ6IGdldEZpcnN0UGFnZUlkKCksXG4gICAgICAgICAgZXhwb3J0QmFja2dyb3VuZDogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgXSk7XG4gICAgICByZXR1cm4gZW5zdXJlU3RvcmVJc1VzYWJsZSgpO1xuICAgIH0gZWxzZSBpZiAoIXBhZ2VJZHMuaGFzKGluc3RhbmNlU3RhdGUuY3VycmVudFBhZ2VJZCkpIHtcbiAgICAgIHN0b3JlLnB1dChbeyAuLi5pbnN0YW5jZVN0YXRlLCBjdXJyZW50UGFnZUlkOiBnZXRGaXJzdFBhZ2VJZCgpIH1dKTtcbiAgICAgIHJldHVybiBlbnN1cmVTdG9yZUlzVXNhYmxlKCk7XG4gICAgfVxuICAgIGNvbnN0IG1pc3NpbmdQYWdlU3RhdGVJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIGNvbnN0IG1pc3NpbmdDYW1lcmFJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3QgaWQgb2YgcGFnZUlkcykge1xuICAgICAgY29uc3QgcGFnZVN0YXRlSWQgPSBJbnN0YW5jZVBhZ2VTdGF0ZVJlY29yZFR5cGUuY3JlYXRlSWQoaWQpO1xuICAgICAgaWYgKCFzdG9yZS5oYXMocGFnZVN0YXRlSWQpKSB7XG4gICAgICAgIG1pc3NpbmdQYWdlU3RhdGVJZHMuYWRkKHBhZ2VTdGF0ZUlkKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNhbWVyYUlkID0gQ2FtZXJhUmVjb3JkVHlwZS5jcmVhdGVJZChpZCk7XG4gICAgICBpZiAoIXN0b3JlLmhhcyhjYW1lcmFJZCkpIHtcbiAgICAgICAgbWlzc2luZ0NhbWVyYUlkcy5hZGQoY2FtZXJhSWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWlzc2luZ1BhZ2VTdGF0ZUlkcy5zaXplID4gMCkge1xuICAgICAgc3RvcmUucHV0KFxuICAgICAgICBbLi4ubWlzc2luZ1BhZ2VTdGF0ZUlkc10ubWFwKFxuICAgICAgICAgIChpZCkgPT4gSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlLmNyZWF0ZSh7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIHBhZ2VJZDogSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlLnBhcnNlSWQoaWQpXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKG1pc3NpbmdDYW1lcmFJZHMuc2l6ZSA+IDApIHtcbiAgICAgIHN0b3JlLnB1dChbLi4ubWlzc2luZ0NhbWVyYUlkc10ubWFwKChpZCkgPT4gQ2FtZXJhUmVjb3JkVHlwZS5jcmVhdGUoeyBpZCB9KSkpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGVuc3VyZVN0b3JlSXNVc2FibGU7XG59XG5leHBvcnQge1xuICBjcmVhdGVJbnRlZ3JpdHlDaGVja2VyLFxuICBvblZhbGlkYXRpb25GYWlsdXJlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExTdG9yZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/TLStore.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assetIdValidator: () => (/* binding */ assetIdValidator),\n/* harmony export */   createAssetValidator: () => (/* binding */ createAssetValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n\n\nconst assetIdValidator = (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_1__.idValidator)(\"asset\");\nfunction createAssetValidator(type, props) {\n  return _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n    id: assetIdValidator,\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literal(\"asset\"),\n    type: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literal(type),\n    props,\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.jsonValue\n  });\n}\n\n//# sourceMappingURL=TLBaseAsset.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9hc3NldHMvVExCYXNlQXNzZXQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBcUM7QUFDa0I7QUFDdkQseUJBQXlCLG1FQUFXO0FBQ3BDO0FBQ0EsU0FBUyxzREFBUTtBQUNqQjtBQUNBLGNBQWMsdURBQVM7QUFDdkIsVUFBVSx1REFBUztBQUNuQjtBQUNBLFVBQVUseURBQVc7QUFDckIsR0FBRztBQUNIO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL2Fzc2V0cy9UTEJhc2VBc3NldC5tanM/YzIwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGlkVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvaWQtdmFsaWRhdG9yLm1qc1wiO1xuY29uc3QgYXNzZXRJZFZhbGlkYXRvciA9IGlkVmFsaWRhdG9yKFwiYXNzZXRcIik7XG5mdW5jdGlvbiBjcmVhdGVBc3NldFZhbGlkYXRvcih0eXBlLCBwcm9wcykge1xuICByZXR1cm4gVC5vYmplY3Qoe1xuICAgIGlkOiBhc3NldElkVmFsaWRhdG9yLFxuICAgIHR5cGVOYW1lOiBULmxpdGVyYWwoXCJhc3NldFwiKSxcbiAgICB0eXBlOiBULmxpdGVyYWwodHlwZSksXG4gICAgcHJvcHMsXG4gICAgbWV0YTogVC5qc29uVmFsdWVcbiAgfSk7XG59XG5leHBvcnQge1xuICBhc3NldElkVmFsaWRhdG9yLFxuICBjcmVhdGVBc3NldFZhbGlkYXRvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMQmFzZUFzc2V0Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBookmarkAsset.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/assets/TLBookmarkAsset.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bookmarkAssetMigrations: () => (/* binding */ bookmarkAssetMigrations),\n/* harmony export */   bookmarkAssetValidator: () => (/* binding */ bookmarkAssetValidator),\n/* harmony export */   bookmarkAssetVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n\n\n\nconst bookmarkAssetValidator = (0,_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_2__.createAssetValidator)(\n  \"bookmark\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    title: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    description: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    image: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    favicon: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    src: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.nullable()\n  })\n);\nconst Versions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.asset.bookmark\", {\n  MakeUrlsValid: 1,\n  AddFavicon: 2\n});\nconst bookmarkAssetMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.asset.bookmark\",\n  recordType: \"asset\",\n  filter: (asset) => asset.type === \"bookmark\",\n  sequence: [\n    {\n      id: Versions.MakeUrlsValid,\n      up: (asset) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.isValid(asset.props.src)) {\n          asset.props.src = \"\";\n        }\n      },\n      down: (_asset) => {\n      }\n    },\n    {\n      id: Versions.AddFavicon,\n      up: (asset) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.isValid(asset.props.favicon)) {\n          asset.props.favicon = \"\";\n        }\n      },\n      down: (asset) => {\n        delete asset.props.favicon;\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLBookmarkAsset.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9hc3NldHMvVExCb29rbWFya0Fzc2V0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0Y7QUFDN0M7QUFDb0I7QUFDekQsK0JBQStCLHNFQUFvQjtBQUNuRDtBQUNBLEVBQUUsc0RBQVE7QUFDVixXQUFXLHNEQUFRO0FBQ25CLGlCQUFpQixzREFBUTtBQUN6QixXQUFXLHNEQUFRO0FBQ25CLGFBQWEsc0RBQVE7QUFDckIsU0FBUyxzREFBUTtBQUNqQixHQUFHO0FBQ0g7QUFDQSxpQkFBaUIsaUVBQWtCO0FBQ25DO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsZ0NBQWdDLDRFQUE2QjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsc0RBQVE7QUFDckI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGFBQWEsc0RBQVE7QUFDckI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUtDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9hc3NldHMvVExCb29rbWFya0Fzc2V0Lm1qcz82NmU4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZU1pZ3JhdGlvbklkcywgY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2UgfSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBjcmVhdGVBc3NldFZhbGlkYXRvciB9IGZyb20gXCIuL1RMQmFzZUFzc2V0Lm1qc1wiO1xuY29uc3QgYm9va21hcmtBc3NldFZhbGlkYXRvciA9IGNyZWF0ZUFzc2V0VmFsaWRhdG9yKFxuICBcImJvb2ttYXJrXCIsXG4gIFQub2JqZWN0KHtcbiAgICB0aXRsZTogVC5zdHJpbmcsXG4gICAgZGVzY3JpcHRpb246IFQuc3RyaW5nLFxuICAgIGltYWdlOiBULnN0cmluZyxcbiAgICBmYXZpY29uOiBULnN0cmluZyxcbiAgICBzcmM6IFQuc3JjVXJsLm51bGxhYmxlKClcbiAgfSlcbik7XG5jb25zdCBWZXJzaW9ucyA9IGNyZWF0ZU1pZ3JhdGlvbklkcyhcImNvbS50bGRyYXcuYXNzZXQuYm9va21hcmtcIiwge1xuICBNYWtlVXJsc1ZhbGlkOiAxLFxuICBBZGRGYXZpY29uOiAyXG59KTtcbmNvbnN0IGJvb2ttYXJrQXNzZXRNaWdyYXRpb25zID0gY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZUlkOiBcImNvbS50bGRyYXcuYXNzZXQuYm9va21hcmtcIixcbiAgcmVjb3JkVHlwZTogXCJhc3NldFwiLFxuICBmaWx0ZXI6IChhc3NldCkgPT4gYXNzZXQudHlwZSA9PT0gXCJib29rbWFya1wiLFxuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5NYWtlVXJsc1ZhbGlkLFxuICAgICAgdXA6IChhc3NldCkgPT4ge1xuICAgICAgICBpZiAoIVQuc3JjVXJsLmlzVmFsaWQoYXNzZXQucHJvcHMuc3JjKSkge1xuICAgICAgICAgIGFzc2V0LnByb3BzLnNyYyA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkb3duOiAoX2Fzc2V0KSA9PiB7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuQWRkRmF2aWNvbixcbiAgICAgIHVwOiAoYXNzZXQpID0+IHtcbiAgICAgICAgaWYgKCFULnNyY1VybC5pc1ZhbGlkKGFzc2V0LnByb3BzLmZhdmljb24pKSB7XG4gICAgICAgICAgYXNzZXQucHJvcHMuZmF2aWNvbiA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkb3duOiAoYXNzZXQpID0+IHtcbiAgICAgICAgZGVsZXRlIGFzc2V0LnByb3BzLmZhdmljb247XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmV4cG9ydCB7XG4gIGJvb2ttYXJrQXNzZXRNaWdyYXRpb25zLFxuICBib29rbWFya0Fzc2V0VmFsaWRhdG9yLFxuICBWZXJzaW9ucyBhcyBib29rbWFya0Fzc2V0VmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEJvb2ttYXJrQXNzZXQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBookmarkAsset.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLImageAsset.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/assets/TLImageAsset.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   imageAssetMigrations: () => (/* binding */ imageAssetMigrations),\n/* harmony export */   imageAssetValidator: () => (/* binding */ imageAssetValidator),\n/* harmony export */   imageAssetVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n\n\n\nconst imageAssetValidator = (0,_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_2__.createAssetValidator)(\n  \"image\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    name: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    isAnimated: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.boolean,\n    mimeType: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string.nullable(),\n    src: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.nullable()\n  })\n);\nconst Versions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.asset.image\", {\n  AddIsAnimated: 1,\n  RenameWidthHeight: 2,\n  MakeUrlsValid: 3\n});\nconst imageAssetMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.asset.image\",\n  recordType: \"asset\",\n  filter: (asset) => asset.type === \"image\",\n  sequence: [\n    {\n      id: Versions.AddIsAnimated,\n      up: (asset) => {\n        asset.props.isAnimated = false;\n      },\n      down: (asset) => {\n        delete asset.props.isAnimated;\n      }\n    },\n    {\n      id: Versions.RenameWidthHeight,\n      up: (asset) => {\n        asset.props.w = asset.props.width;\n        asset.props.h = asset.props.height;\n        delete asset.props.width;\n        delete asset.props.height;\n      },\n      down: (asset) => {\n        asset.props.width = asset.props.w;\n        asset.props.height = asset.props.h;\n        delete asset.props.w;\n        delete asset.props.h;\n      }\n    },\n    {\n      id: Versions.MakeUrlsValid,\n      up: (asset) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.isValid(asset.props.src)) {\n          asset.props.src = \"\";\n        }\n      },\n      down: (_asset) => {\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLImageAsset.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9hc3NldHMvVExJbWFnZUFzc2V0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0Y7QUFDN0M7QUFDb0I7QUFDekQsNEJBQTRCLHNFQUFvQjtBQUNoRDtBQUNBLEVBQUUsc0RBQVE7QUFDVixPQUFPLHNEQUFRO0FBQ2YsT0FBTyxzREFBUTtBQUNmLFVBQVUsc0RBQVE7QUFDbEIsZ0JBQWdCLHVEQUFTO0FBQ3pCLGNBQWMsc0RBQVE7QUFDdEIsU0FBUyxzREFBUTtBQUNqQixHQUFHO0FBQ0g7QUFDQSxpQkFBaUIsaUVBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw2QkFBNkIsNEVBQTZCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxhQUFhLHNEQUFRO0FBQ3JCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBS0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL2Fzc2V0cy9UTEltYWdlQXNzZXQubWpzPzJhZmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlTWlncmF0aW9uSWRzLCBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSB9IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGNyZWF0ZUFzc2V0VmFsaWRhdG9yIH0gZnJvbSBcIi4vVExCYXNlQXNzZXQubWpzXCI7XG5jb25zdCBpbWFnZUFzc2V0VmFsaWRhdG9yID0gY3JlYXRlQXNzZXRWYWxpZGF0b3IoXG4gIFwiaW1hZ2VcIixcbiAgVC5vYmplY3Qoe1xuICAgIHc6IFQubnVtYmVyLFxuICAgIGg6IFQubnVtYmVyLFxuICAgIG5hbWU6IFQuc3RyaW5nLFxuICAgIGlzQW5pbWF0ZWQ6IFQuYm9vbGVhbixcbiAgICBtaW1lVHlwZTogVC5zdHJpbmcubnVsbGFibGUoKSxcbiAgICBzcmM6IFQuc3JjVXJsLm51bGxhYmxlKClcbiAgfSlcbik7XG5jb25zdCBWZXJzaW9ucyA9IGNyZWF0ZU1pZ3JhdGlvbklkcyhcImNvbS50bGRyYXcuYXNzZXQuaW1hZ2VcIiwge1xuICBBZGRJc0FuaW1hdGVkOiAxLFxuICBSZW5hbWVXaWR0aEhlaWdodDogMixcbiAgTWFrZVVybHNWYWxpZDogM1xufSk7XG5jb25zdCBpbWFnZUFzc2V0TWlncmF0aW9ucyA9IGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2VJZDogXCJjb20udGxkcmF3LmFzc2V0LmltYWdlXCIsXG4gIHJlY29yZFR5cGU6IFwiYXNzZXRcIixcbiAgZmlsdGVyOiAoYXNzZXQpID0+IGFzc2V0LnR5cGUgPT09IFwiaW1hZ2VcIixcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuQWRkSXNBbmltYXRlZCxcbiAgICAgIHVwOiAoYXNzZXQpID0+IHtcbiAgICAgICAgYXNzZXQucHJvcHMuaXNBbmltYXRlZCA9IGZhbHNlO1xuICAgICAgfSxcbiAgICAgIGRvd246IChhc3NldCkgPT4ge1xuICAgICAgICBkZWxldGUgYXNzZXQucHJvcHMuaXNBbmltYXRlZDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5SZW5hbWVXaWR0aEhlaWdodCxcbiAgICAgIHVwOiAoYXNzZXQpID0+IHtcbiAgICAgICAgYXNzZXQucHJvcHMudyA9IGFzc2V0LnByb3BzLndpZHRoO1xuICAgICAgICBhc3NldC5wcm9wcy5oID0gYXNzZXQucHJvcHMuaGVpZ2h0O1xuICAgICAgICBkZWxldGUgYXNzZXQucHJvcHMud2lkdGg7XG4gICAgICAgIGRlbGV0ZSBhc3NldC5wcm9wcy5oZWlnaHQ7XG4gICAgICB9LFxuICAgICAgZG93bjogKGFzc2V0KSA9PiB7XG4gICAgICAgIGFzc2V0LnByb3BzLndpZHRoID0gYXNzZXQucHJvcHMudztcbiAgICAgICAgYXNzZXQucHJvcHMuaGVpZ2h0ID0gYXNzZXQucHJvcHMuaDtcbiAgICAgICAgZGVsZXRlIGFzc2V0LnByb3BzLnc7XG4gICAgICAgIGRlbGV0ZSBhc3NldC5wcm9wcy5oO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLk1ha2VVcmxzVmFsaWQsXG4gICAgICB1cDogKGFzc2V0KSA9PiB7XG4gICAgICAgIGlmICghVC5zcmNVcmwuaXNWYWxpZChhc3NldC5wcm9wcy5zcmMpKSB7XG4gICAgICAgICAgYXNzZXQucHJvcHMuc3JjID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IChfYXNzZXQpID0+IHtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuZXhwb3J0IHtcbiAgaW1hZ2VBc3NldE1pZ3JhdGlvbnMsXG4gIGltYWdlQXNzZXRWYWxpZGF0b3IsXG4gIFZlcnNpb25zIGFzIGltYWdlQXNzZXRWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMSW1hZ2VBc3NldC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLImageAsset.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLVideoAsset.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/assets/TLVideoAsset.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   videoAssetMigrations: () => (/* binding */ videoAssetMigrations),\n/* harmony export */   videoAssetValidator: () => (/* binding */ videoAssetValidator),\n/* harmony export */   videoAssetVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n\n\n\nconst videoAssetValidator = (0,_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_2__.createAssetValidator)(\n  \"video\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    name: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    isAnimated: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.boolean,\n    mimeType: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string.nullable(),\n    src: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.nullable()\n  })\n);\nconst Versions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.asset.video\", {\n  AddIsAnimated: 1,\n  RenameWidthHeight: 2,\n  MakeUrlsValid: 3\n});\nconst videoAssetMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.asset.video\",\n  recordType: \"asset\",\n  filter: (asset) => asset.type === \"video\",\n  sequence: [\n    {\n      id: Versions.AddIsAnimated,\n      up: (asset) => {\n        asset.props.isAnimated = false;\n      },\n      down: (asset) => {\n        delete asset.props.isAnimated;\n      }\n    },\n    {\n      id: Versions.RenameWidthHeight,\n      up: (asset) => {\n        asset.props.w = asset.props.width;\n        asset.props.h = asset.props.height;\n        delete asset.props.width;\n        delete asset.props.height;\n      },\n      down: (asset) => {\n        asset.props.width = asset.props.w;\n        asset.props.height = asset.props.h;\n        delete asset.props.w;\n        delete asset.props.h;\n      }\n    },\n    {\n      id: Versions.MakeUrlsValid,\n      up: (asset) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.srcUrl.isValid(asset.props.src)) {\n          asset.props.src = \"\";\n        }\n      },\n      down: (_asset) => {\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLVideoAsset.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9hc3NldHMvVExWaWRlb0Fzc2V0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0Y7QUFDN0M7QUFDb0I7QUFDekQsNEJBQTRCLHNFQUFvQjtBQUNoRDtBQUNBLEVBQUUsc0RBQVE7QUFDVixPQUFPLHNEQUFRO0FBQ2YsT0FBTyxzREFBUTtBQUNmLFVBQVUsc0RBQVE7QUFDbEIsZ0JBQWdCLHVEQUFTO0FBQ3pCLGNBQWMsc0RBQVE7QUFDdEIsU0FBUyxzREFBUTtBQUNqQixHQUFHO0FBQ0g7QUFDQSxpQkFBaUIsaUVBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw2QkFBNkIsNEVBQTZCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxhQUFhLHNEQUFRO0FBQ3JCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBS0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL2Fzc2V0cy9UTFZpZGVvQXNzZXQubWpzPzU4OTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlTWlncmF0aW9uSWRzLCBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSB9IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGNyZWF0ZUFzc2V0VmFsaWRhdG9yIH0gZnJvbSBcIi4vVExCYXNlQXNzZXQubWpzXCI7XG5jb25zdCB2aWRlb0Fzc2V0VmFsaWRhdG9yID0gY3JlYXRlQXNzZXRWYWxpZGF0b3IoXG4gIFwidmlkZW9cIixcbiAgVC5vYmplY3Qoe1xuICAgIHc6IFQubnVtYmVyLFxuICAgIGg6IFQubnVtYmVyLFxuICAgIG5hbWU6IFQuc3RyaW5nLFxuICAgIGlzQW5pbWF0ZWQ6IFQuYm9vbGVhbixcbiAgICBtaW1lVHlwZTogVC5zdHJpbmcubnVsbGFibGUoKSxcbiAgICBzcmM6IFQuc3JjVXJsLm51bGxhYmxlKClcbiAgfSlcbik7XG5jb25zdCBWZXJzaW9ucyA9IGNyZWF0ZU1pZ3JhdGlvbklkcyhcImNvbS50bGRyYXcuYXNzZXQudmlkZW9cIiwge1xuICBBZGRJc0FuaW1hdGVkOiAxLFxuICBSZW5hbWVXaWR0aEhlaWdodDogMixcbiAgTWFrZVVybHNWYWxpZDogM1xufSk7XG5jb25zdCB2aWRlb0Fzc2V0TWlncmF0aW9ucyA9IGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2VJZDogXCJjb20udGxkcmF3LmFzc2V0LnZpZGVvXCIsXG4gIHJlY29yZFR5cGU6IFwiYXNzZXRcIixcbiAgZmlsdGVyOiAoYXNzZXQpID0+IGFzc2V0LnR5cGUgPT09IFwidmlkZW9cIixcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuQWRkSXNBbmltYXRlZCxcbiAgICAgIHVwOiAoYXNzZXQpID0+IHtcbiAgICAgICAgYXNzZXQucHJvcHMuaXNBbmltYXRlZCA9IGZhbHNlO1xuICAgICAgfSxcbiAgICAgIGRvd246IChhc3NldCkgPT4ge1xuICAgICAgICBkZWxldGUgYXNzZXQucHJvcHMuaXNBbmltYXRlZDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5SZW5hbWVXaWR0aEhlaWdodCxcbiAgICAgIHVwOiAoYXNzZXQpID0+IHtcbiAgICAgICAgYXNzZXQucHJvcHMudyA9IGFzc2V0LnByb3BzLndpZHRoO1xuICAgICAgICBhc3NldC5wcm9wcy5oID0gYXNzZXQucHJvcHMuaGVpZ2h0O1xuICAgICAgICBkZWxldGUgYXNzZXQucHJvcHMud2lkdGg7XG4gICAgICAgIGRlbGV0ZSBhc3NldC5wcm9wcy5oZWlnaHQ7XG4gICAgICB9LFxuICAgICAgZG93bjogKGFzc2V0KSA9PiB7XG4gICAgICAgIGFzc2V0LnByb3BzLndpZHRoID0gYXNzZXQucHJvcHMudztcbiAgICAgICAgYXNzZXQucHJvcHMuaGVpZ2h0ID0gYXNzZXQucHJvcHMuaDtcbiAgICAgICAgZGVsZXRlIGFzc2V0LnByb3BzLnc7XG4gICAgICAgIGRlbGV0ZSBhc3NldC5wcm9wcy5oO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLk1ha2VVcmxzVmFsaWQsXG4gICAgICB1cDogKGFzc2V0KSA9PiB7XG4gICAgICAgIGlmICghVC5zcmNVcmwuaXNWYWxpZChhc3NldC5wcm9wcy5zcmMpKSB7XG4gICAgICAgICAgYXNzZXQucHJvcHMuc3JjID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IChfYXNzZXQpID0+IHtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuZXhwb3J0IHtcbiAgdmlkZW9Bc3NldE1pZ3JhdGlvbnMsXG4gIHZpZGVvQXNzZXRWYWxpZGF0b3IsXG4gIFZlcnNpb25zIGFzIHZpZGVvQXNzZXRWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMVmlkZW9Bc3NldC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLVideoAsset.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLArrowBinding.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/bindings/TLArrowBinding.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   arrowBindingMigrations: () => (/* binding */ arrowBindingMigrations),\n/* harmony export */   arrowBindingProps: () => (/* binding */ arrowBindingProps),\n/* harmony export */   arrowBindingVersions: () => (/* binding */ arrowBindingVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../records/TLBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs\");\n/* harmony import */ var _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shapes/TLArrowShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLArrowShape.mjs\");\n\n\n\n\nconst arrowBindingProps = {\n  terminal: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literalEnum(\"start\", \"end\"),\n  normalizedAnchor: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_1__.vecModelValidator,\n  isExact: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  isPrecise: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean\n};\nconst arrowBindingVersions = {};\nconst arrowBindingMigrations = (0,_records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_2__.createBindingPropsMigrationSequence)({\n  sequence: [{ dependsOn: [_shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_3__.arrowShapeVersions.ExtractBindings] }]\n});\n\n//# sourceMappingURL=TLArrowBinding.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9iaW5kaW5ncy9UTEFycm93QmluZGluZy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxQztBQUMwQjtBQUNnQjtBQUNmO0FBQ2hFO0FBQ0EsWUFBWSwyREFBYTtBQUN6QixvQkFBb0IsdUVBQWlCO0FBQ3JDLFdBQVcsdURBQVM7QUFDcEIsYUFBYSx1REFBUztBQUN0QjtBQUNBO0FBQ0EsK0JBQStCLDJGQUFtQztBQUNsRSxlQUFlLFlBQVksd0VBQWtCLG1CQUFtQjtBQUNoRSxDQUFDO0FBS0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL2JpbmRpbmdzL1RMQXJyb3dCaW5kaW5nLm1qcz8xNDBlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgdmVjTW9kZWxWYWxpZGF0b3IgfSBmcm9tIFwiLi4vbWlzYy9nZW9tZXRyeS10eXBlcy5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUJpbmRpbmdQcm9wc01pZ3JhdGlvblNlcXVlbmNlIH0gZnJvbSBcIi4uL3JlY29yZHMvVExCaW5kaW5nLm1qc1wiO1xuaW1wb3J0IHsgYXJyb3dTaGFwZVZlcnNpb25zIH0gZnJvbSBcIi4uL3NoYXBlcy9UTEFycm93U2hhcGUubWpzXCI7XG5jb25zdCBhcnJvd0JpbmRpbmdQcm9wcyA9IHtcbiAgdGVybWluYWw6IFQubGl0ZXJhbEVudW0oXCJzdGFydFwiLCBcImVuZFwiKSxcbiAgbm9ybWFsaXplZEFuY2hvcjogdmVjTW9kZWxWYWxpZGF0b3IsXG4gIGlzRXhhY3Q6IFQuYm9vbGVhbixcbiAgaXNQcmVjaXNlOiBULmJvb2xlYW5cbn07XG5jb25zdCBhcnJvd0JpbmRpbmdWZXJzaW9ucyA9IHt9O1xuY29uc3QgYXJyb3dCaW5kaW5nTWlncmF0aW9ucyA9IGNyZWF0ZUJpbmRpbmdQcm9wc01pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2U6IFt7IGRlcGVuZHNPbjogW2Fycm93U2hhcGVWZXJzaW9ucy5FeHRyYWN0QmluZGluZ3NdIH1dXG59KTtcbmV4cG9ydCB7XG4gIGFycm93QmluZGluZ01pZ3JhdGlvbnMsXG4gIGFycm93QmluZGluZ1Byb3BzLFxuICBhcnJvd0JpbmRpbmdWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMQXJyb3dCaW5kaW5nLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLArrowBinding.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLBaseBinding.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/bindings/TLBaseBinding.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bindingIdValidator: () => (/* binding */ bindingIdValidator),\n/* harmony export */   createBindingValidator: () => (/* binding */ createBindingValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n/* harmony import */ var _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shapes/TLBaseShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs\");\n\n\n\nconst bindingIdValidator = (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_1__.idValidator)(\"binding\");\nfunction createBindingValidator(type, props, meta) {\n  return _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n    id: bindingIdValidator,\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literal(\"binding\"),\n    type: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literal(type),\n    fromId: _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_2__.shapeIdValidator,\n    toId: _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_2__.shapeIdValidator,\n    props: props ? _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object(props) : _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.jsonValue,\n    meta: meta ? _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object(meta) : _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.jsonValue\n  });\n}\n\n//# sourceMappingURL=TLBaseBinding.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9iaW5kaW5ncy9UTEJhc2VCaW5kaW5nLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFxQztBQUNrQjtBQUNNO0FBQzdELDJCQUEyQixtRUFBVztBQUN0QztBQUNBLFNBQVMsc0RBQVE7QUFDakI7QUFDQSxjQUFjLHVEQUFTO0FBQ3ZCLFVBQVUsdURBQVM7QUFDbkIsWUFBWSxxRUFBZ0I7QUFDNUIsVUFBVSxxRUFBZ0I7QUFDMUIsbUJBQW1CLHNEQUFRLFVBQVUseURBQVc7QUFDaEQsaUJBQWlCLHNEQUFRLFNBQVMseURBQVc7QUFDN0MsR0FBRztBQUNIO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL2JpbmRpbmdzL1RMQmFzZUJpbmRpbmcubWpzPzVjYTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBpZFZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL2lkLXZhbGlkYXRvci5tanNcIjtcbmltcG9ydCB7IHNoYXBlSWRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vc2hhcGVzL1RMQmFzZVNoYXBlLm1qc1wiO1xuY29uc3QgYmluZGluZ0lkVmFsaWRhdG9yID0gaWRWYWxpZGF0b3IoXCJiaW5kaW5nXCIpO1xuZnVuY3Rpb24gY3JlYXRlQmluZGluZ1ZhbGlkYXRvcih0eXBlLCBwcm9wcywgbWV0YSkge1xuICByZXR1cm4gVC5vYmplY3Qoe1xuICAgIGlkOiBiaW5kaW5nSWRWYWxpZGF0b3IsXG4gICAgdHlwZU5hbWU6IFQubGl0ZXJhbChcImJpbmRpbmdcIiksXG4gICAgdHlwZTogVC5saXRlcmFsKHR5cGUpLFxuICAgIGZyb21JZDogc2hhcGVJZFZhbGlkYXRvcixcbiAgICB0b0lkOiBzaGFwZUlkVmFsaWRhdG9yLFxuICAgIHByb3BzOiBwcm9wcyA/IFQub2JqZWN0KHByb3BzKSA6IFQuanNvblZhbHVlLFxuICAgIG1ldGE6IG1ldGEgPyBULm9iamVjdChtZXRhKSA6IFQuanNvblZhbHVlXG4gIH0pO1xufVxuZXhwb3J0IHtcbiAgYmluZGluZ0lkVmFsaWRhdG9yLFxuICBjcmVhdGVCaW5kaW5nVmFsaWRhdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExCYXNlQmluZGluZy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLBaseBinding.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/createPresenceStateDerivation.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/createPresenceStateDerivation.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPresenceStateDerivation: () => (/* binding */ createPresenceStateDerivation)\n/* harmony export */ });\n/* harmony import */ var _tldraw_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/state */ \"(ssr)/./node_modules/@tldraw/state/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./records/TLCamera.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs\");\n/* harmony import */ var _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./records/TLInstance.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs\");\n/* harmony import */ var _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./records/TLPageState.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs\");\n/* harmony import */ var _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./records/TLPointer.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs\");\n/* harmony import */ var _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./records/TLPresence.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPresence.mjs\");\n\n\n\n\n\n\nconst createPresenceStateDerivation = ($user, instanceId) => (store) => {\n  return (0,_tldraw_state__WEBPACK_IMPORTED_MODULE_0__.computed)(\"instancePresence\", () => {\n    const instance = store.get(_records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_2__.TLINSTANCE_ID);\n    const pageState = store.get(_records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_3__.InstancePageStateRecordType.createId(instance?.currentPageId));\n    const camera = store.get(_records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_1__.CameraRecordType.createId(instance?.currentPageId));\n    const pointer = store.get(_records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_4__.TLPOINTER_ID);\n    const user = $user.get();\n    if (!pageState || !instance || !camera || !pointer || !user) {\n      return null;\n    }\n    return _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_5__.InstancePresenceRecordType.create({\n      id: instanceId ?? _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_5__.InstancePresenceRecordType.createId(store.id),\n      selectedShapeIds: pageState.selectedShapeIds,\n      brush: instance.brush,\n      scribbles: instance.scribbles,\n      userId: user.id,\n      userName: user.name,\n      followingUserId: instance.followingUserId,\n      camera: {\n        x: camera.x,\n        y: camera.y,\n        z: camera.z\n      },\n      color: user.color,\n      currentPageId: instance.currentPageId,\n      cursor: {\n        x: pointer.x,\n        y: pointer.y,\n        rotation: instance.cursor.rotation,\n        type: instance.cursor.type\n      },\n      lastActivityTimestamp: pointer.lastActivityTimestamp,\n      screenBounds: instance.screenBounds,\n      chatMessage: instance.chatMessage,\n      meta: {}\n    });\n  });\n};\n\n//# sourceMappingURL=createPresenceStateDerivation.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9jcmVhdGVQcmVzZW5jZVN0YXRlRGVyaXZhdGlvbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF5QztBQUNpQjtBQUNEO0FBQ2U7QUFDakI7QUFDZTtBQUN0RTtBQUNBLFNBQVMsdURBQVE7QUFDakIsK0JBQStCLGtFQUFhO0FBQzVDLGdDQUFnQyxpRkFBMkI7QUFDM0QsNkJBQTZCLG1FQUFnQjtBQUM3Qyw4QkFBOEIsZ0VBQVk7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtFQUEwQjtBQUNyQyx3QkFBd0IsK0VBQTBCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9jcmVhdGVQcmVzZW5jZVN0YXRlRGVyaXZhdGlvbi5tanM/ZmRmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gXCJAdGxkcmF3L3N0YXRlXCI7XG5pbXBvcnQgeyBDYW1lcmFSZWNvcmRUeXBlIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTENhbWVyYS5tanNcIjtcbmltcG9ydCB7IFRMSU5TVEFOQ0VfSUQgfSBmcm9tIFwiLi9yZWNvcmRzL1RMSW5zdGFuY2UubWpzXCI7XG5pbXBvcnQgeyBJbnN0YW5jZVBhZ2VTdGF0ZVJlY29yZFR5cGUgfSBmcm9tIFwiLi9yZWNvcmRzL1RMUGFnZVN0YXRlLm1qc1wiO1xuaW1wb3J0IHsgVExQT0lOVEVSX0lEIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTFBvaW50ZXIubWpzXCI7XG5pbXBvcnQgeyBJbnN0YW5jZVByZXNlbmNlUmVjb3JkVHlwZSB9IGZyb20gXCIuL3JlY29yZHMvVExQcmVzZW5jZS5tanNcIjtcbmNvbnN0IGNyZWF0ZVByZXNlbmNlU3RhdGVEZXJpdmF0aW9uID0gKCR1c2VyLCBpbnN0YW5jZUlkKSA9PiAoc3RvcmUpID0+IHtcbiAgcmV0dXJuIGNvbXB1dGVkKFwiaW5zdGFuY2VQcmVzZW5jZVwiLCAoKSA9PiB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBzdG9yZS5nZXQoVExJTlNUQU5DRV9JRCk7XG4gICAgY29uc3QgcGFnZVN0YXRlID0gc3RvcmUuZ2V0KEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZS5jcmVhdGVJZChpbnN0YW5jZT8uY3VycmVudFBhZ2VJZCkpO1xuICAgIGNvbnN0IGNhbWVyYSA9IHN0b3JlLmdldChDYW1lcmFSZWNvcmRUeXBlLmNyZWF0ZUlkKGluc3RhbmNlPy5jdXJyZW50UGFnZUlkKSk7XG4gICAgY29uc3QgcG9pbnRlciA9IHN0b3JlLmdldChUTFBPSU5URVJfSUQpO1xuICAgIGNvbnN0IHVzZXIgPSAkdXNlci5nZXQoKTtcbiAgICBpZiAoIXBhZ2VTdGF0ZSB8fCAhaW5zdGFuY2UgfHwgIWNhbWVyYSB8fCAhcG9pbnRlciB8fCAhdXNlcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBJbnN0YW5jZVByZXNlbmNlUmVjb3JkVHlwZS5jcmVhdGUoe1xuICAgICAgaWQ6IGluc3RhbmNlSWQgPz8gSW5zdGFuY2VQcmVzZW5jZVJlY29yZFR5cGUuY3JlYXRlSWQoc3RvcmUuaWQpLFxuICAgICAgc2VsZWN0ZWRTaGFwZUlkczogcGFnZVN0YXRlLnNlbGVjdGVkU2hhcGVJZHMsXG4gICAgICBicnVzaDogaW5zdGFuY2UuYnJ1c2gsXG4gICAgICBzY3JpYmJsZXM6IGluc3RhbmNlLnNjcmliYmxlcyxcbiAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgIHVzZXJOYW1lOiB1c2VyLm5hbWUsXG4gICAgICBmb2xsb3dpbmdVc2VySWQ6IGluc3RhbmNlLmZvbGxvd2luZ1VzZXJJZCxcbiAgICAgIGNhbWVyYToge1xuICAgICAgICB4OiBjYW1lcmEueCxcbiAgICAgICAgeTogY2FtZXJhLnksXG4gICAgICAgIHo6IGNhbWVyYS56XG4gICAgICB9LFxuICAgICAgY29sb3I6IHVzZXIuY29sb3IsXG4gICAgICBjdXJyZW50UGFnZUlkOiBpbnN0YW5jZS5jdXJyZW50UGFnZUlkLFxuICAgICAgY3Vyc29yOiB7XG4gICAgICAgIHg6IHBvaW50ZXIueCxcbiAgICAgICAgeTogcG9pbnRlci55LFxuICAgICAgICByb3RhdGlvbjogaW5zdGFuY2UuY3Vyc29yLnJvdGF0aW9uLFxuICAgICAgICB0eXBlOiBpbnN0YW5jZS5jdXJzb3IudHlwZVxuICAgICAgfSxcbiAgICAgIGxhc3RBY3Rpdml0eVRpbWVzdGFtcDogcG9pbnRlci5sYXN0QWN0aXZpdHlUaW1lc3RhbXAsXG4gICAgICBzY3JlZW5Cb3VuZHM6IGluc3RhbmNlLnNjcmVlbkJvdW5kcyxcbiAgICAgIGNoYXRNZXNzYWdlOiBpbnN0YW5jZS5jaGF0TWVzc2FnZSxcbiAgICAgIG1ldGE6IHt9XG4gICAgfSk7XG4gIH0pO1xufTtcbmV4cG9ydCB7XG4gIGNyZWF0ZVByZXNlbmNlU3RhdGVEZXJpdmF0aW9uXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlUHJlc2VuY2VTdGF0ZURlcml2YXRpb24ubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/createPresenceStateDerivation.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/createTLSchema.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/createTLSchema.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTLSchema: () => (/* binding */ createTLSchema),\n/* harmony export */   defaultBindingSchemas: () => (/* binding */ defaultBindingSchemas),\n/* harmony export */   defaultShapeSchemas: () => (/* binding */ defaultShapeSchemas)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _TLStore_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TLStore.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/TLStore.mjs\");\n/* harmony import */ var _assets_TLBookmarkAsset_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./assets/TLBookmarkAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBookmarkAsset.mjs\");\n/* harmony import */ var _assets_TLImageAsset_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./assets/TLImageAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLImageAsset.mjs\");\n/* harmony import */ var _assets_TLVideoAsset_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./assets/TLVideoAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLVideoAsset.mjs\");\n/* harmony import */ var _bindings_TLArrowBinding_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./bindings/TLArrowBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLArrowBinding.mjs\");\n/* harmony import */ var _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./records/TLAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLAsset.mjs\");\n/* harmony import */ var _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./records/TLBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs\");\n/* harmony import */ var _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./records/TLCamera.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs\");\n/* harmony import */ var _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./records/TLDocument.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLDocument.mjs\");\n/* harmony import */ var _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./records/TLInstance.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs\");\n/* harmony import */ var _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./records/TLPage.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs\");\n/* harmony import */ var _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./records/TLPageState.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs\");\n/* harmony import */ var _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./records/TLPointer.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs\");\n/* harmony import */ var _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./records/TLPresence.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPresence.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _recordsWithProps_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./recordsWithProps.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/recordsWithProps.mjs\");\n/* harmony import */ var _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./shapes/TLArrowShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLArrowShape.mjs\");\n/* harmony import */ var _shapes_TLBookmarkShape_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./shapes/TLBookmarkShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBookmarkShape.mjs\");\n/* harmony import */ var _shapes_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./shapes/TLDrawShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLDrawShape.mjs\");\n/* harmony import */ var _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./shapes/TLEmbedShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLEmbedShape.mjs\");\n/* harmony import */ var _shapes_TLFrameShape_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./shapes/TLFrameShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLFrameShape.mjs\");\n/* harmony import */ var _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./shapes/TLGeoShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGeoShape.mjs\");\n/* harmony import */ var _shapes_TLGroupShape_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./shapes/TLGroupShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGroupShape.mjs\");\n/* harmony import */ var _shapes_TLHighlightShape_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./shapes/TLHighlightShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLHighlightShape.mjs\");\n/* harmony import */ var _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./shapes/TLImageShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLImageShape.mjs\");\n/* harmony import */ var _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./shapes/TLLineShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLLineShape.mjs\");\n/* harmony import */ var _shapes_TLNoteShape_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./shapes/TLNoteShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLNoteShape.mjs\");\n/* harmony import */ var _shapes_TLTextShape_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./shapes/TLTextShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLTextShape.mjs\");\n/* harmony import */ var _shapes_TLVideoShape_mjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./shapes/TLVideoShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLVideoShape.mjs\");\n/* harmony import */ var _store_migrations_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./store-migrations.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/store-migrations.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultShapeSchemas = {\n  arrow: { migrations: _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_18__.arrowShapeMigrations, props: _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_18__.arrowShapeProps },\n  bookmark: { migrations: _shapes_TLBookmarkShape_mjs__WEBPACK_IMPORTED_MODULE_19__.bookmarkShapeMigrations, props: _shapes_TLBookmarkShape_mjs__WEBPACK_IMPORTED_MODULE_19__.bookmarkShapeProps },\n  draw: { migrations: _shapes_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_20__.drawShapeMigrations, props: _shapes_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_20__.drawShapeProps },\n  embed: { migrations: _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_21__.embedShapeMigrations, props: _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_21__.embedShapeProps },\n  frame: { migrations: _shapes_TLFrameShape_mjs__WEBPACK_IMPORTED_MODULE_22__.frameShapeMigrations, props: _shapes_TLFrameShape_mjs__WEBPACK_IMPORTED_MODULE_22__.frameShapeProps },\n  geo: { migrations: _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_23__.geoShapeMigrations, props: _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_23__.geoShapeProps },\n  group: { migrations: _shapes_TLGroupShape_mjs__WEBPACK_IMPORTED_MODULE_24__.groupShapeMigrations, props: _shapes_TLGroupShape_mjs__WEBPACK_IMPORTED_MODULE_24__.groupShapeProps },\n  highlight: { migrations: _shapes_TLHighlightShape_mjs__WEBPACK_IMPORTED_MODULE_25__.highlightShapeMigrations, props: _shapes_TLHighlightShape_mjs__WEBPACK_IMPORTED_MODULE_25__.highlightShapeProps },\n  image: { migrations: _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_26__.imageShapeMigrations, props: _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_26__.imageShapeProps },\n  line: { migrations: _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_27__.lineShapeMigrations, props: _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_27__.lineShapeProps },\n  note: { migrations: _shapes_TLNoteShape_mjs__WEBPACK_IMPORTED_MODULE_28__.noteShapeMigrations, props: _shapes_TLNoteShape_mjs__WEBPACK_IMPORTED_MODULE_28__.noteShapeProps },\n  text: { migrations: _shapes_TLTextShape_mjs__WEBPACK_IMPORTED_MODULE_29__.textShapeMigrations, props: _shapes_TLTextShape_mjs__WEBPACK_IMPORTED_MODULE_29__.textShapeProps },\n  video: { migrations: _shapes_TLVideoShape_mjs__WEBPACK_IMPORTED_MODULE_30__.videoShapeMigrations, props: _shapes_TLVideoShape_mjs__WEBPACK_IMPORTED_MODULE_30__.videoShapeProps }\n};\nconst defaultBindingSchemas = {\n  arrow: { migrations: _bindings_TLArrowBinding_mjs__WEBPACK_IMPORTED_MODULE_6__.arrowBindingMigrations, props: _bindings_TLArrowBinding_mjs__WEBPACK_IMPORTED_MODULE_6__.arrowBindingProps }\n};\nfunction createTLSchema({\n  shapes = defaultShapeSchemas,\n  bindings = defaultBindingSchemas,\n  migrations\n} = {}) {\n  const stylesById = /* @__PURE__ */ new Map();\n  for (const shape of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapValues)(shapes)) {\n    for (const style of (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_16__.getShapePropKeysByStyle)(shape.props ?? {}).keys()) {\n      if (stylesById.has(style.id) && stylesById.get(style.id) !== style) {\n        throw new Error(`Multiple StyleProp instances with the same id: ${style.id}`);\n      }\n      stylesById.set(style.id, style);\n    }\n  }\n  const ShapeRecordType = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_16__.createShapeRecordType)(shapes);\n  const BindingRecordType = (0,_records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_8__.createBindingRecordType)(bindings);\n  const InstanceRecordType = (0,_records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_11__.createInstanceRecordType)(stylesById);\n  return _tldraw_store__WEBPACK_IMPORTED_MODULE_0__.StoreSchema.create(\n    {\n      asset: _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_7__.AssetRecordType,\n      binding: BindingRecordType,\n      camera: _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_9__.CameraRecordType,\n      document: _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_10__.DocumentRecordType,\n      instance: InstanceRecordType,\n      instance_page_state: _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_13__.InstancePageStateRecordType,\n      page: _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_12__.PageRecordType,\n      instance_presence: _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_15__.InstancePresenceRecordType,\n      pointer: _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_14__.PointerRecordType,\n      shape: ShapeRecordType\n    },\n    {\n      migrations: [\n        _store_migrations_mjs__WEBPACK_IMPORTED_MODULE_31__.storeMigrations,\n        _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_7__.assetMigrations,\n        _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_9__.cameraMigrations,\n        _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_10__.documentMigrations,\n        _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_11__.instanceMigrations,\n        _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_13__.instancePageStateMigrations,\n        _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_12__.pageMigrations,\n        _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_15__.instancePresenceMigrations,\n        _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_14__.pointerMigrations,\n        _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_16__.rootShapeMigrations,\n        _assets_TLBookmarkAsset_mjs__WEBPACK_IMPORTED_MODULE_3__.bookmarkAssetMigrations,\n        _assets_TLImageAsset_mjs__WEBPACK_IMPORTED_MODULE_4__.imageAssetMigrations,\n        _assets_TLVideoAsset_mjs__WEBPACK_IMPORTED_MODULE_5__.videoAssetMigrations,\n        ...(0,_recordsWithProps_mjs__WEBPACK_IMPORTED_MODULE_17__.processPropsMigrations)(\"shape\", shapes),\n        ...(0,_recordsWithProps_mjs__WEBPACK_IMPORTED_MODULE_17__.processPropsMigrations)(\"binding\", bindings),\n        ...(migrations ?? [])\n      ],\n      onValidationFailure: _TLStore_mjs__WEBPACK_IMPORTED_MODULE_2__.onValidationFailure,\n      createIntegrityChecker: _TLStore_mjs__WEBPACK_IMPORTED_MODULE_2__.createIntegrityChecker\n    }\n  );\n}\n\n//# sourceMappingURL=createTLSchema.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9jcmVhdGVUTFNjaGVtYS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNEM7QUFDSTtBQUM0QjtBQUNMO0FBQ047QUFDQTtBQUN5QjtBQUNqQjtBQUNQO0FBQ1U7QUFDTTtBQUNNO0FBQ2xCO0FBQytCO0FBQ3RCO0FBQ21CO0FBS25FO0FBQ2lDO0FBQ2tCO0FBQ1M7QUFDWjtBQUNHO0FBQ0E7QUFDTjtBQUNNO0FBQ1k7QUFDWjtBQUNIO0FBQ0E7QUFDQTtBQUNHO0FBQ3pCO0FBQ3pEO0FBQ0EsV0FBVyxZQUFZLDJFQUFvQixTQUFTLHNFQUFlLEVBQUU7QUFDckUsY0FBYyxZQUFZLGlGQUF1QixTQUFTLDRFQUFrQixFQUFFO0FBQzlFLFVBQVUsWUFBWSx5RUFBbUIsU0FBUyxvRUFBYyxFQUFFO0FBQ2xFLFdBQVcsWUFBWSwyRUFBb0IsU0FBUyxzRUFBZSxFQUFFO0FBQ3JFLFdBQVcsWUFBWSwyRUFBb0IsU0FBUyxzRUFBZSxFQUFFO0FBQ3JFLFNBQVMsWUFBWSx1RUFBa0IsU0FBUyxrRUFBYSxFQUFFO0FBQy9ELFdBQVcsWUFBWSwyRUFBb0IsU0FBUyxzRUFBZSxFQUFFO0FBQ3JFLGVBQWUsWUFBWSxtRkFBd0IsU0FBUyw4RUFBbUIsRUFBRTtBQUNqRixXQUFXLFlBQVksMkVBQW9CLFNBQVMsc0VBQWUsRUFBRTtBQUNyRSxVQUFVLFlBQVkseUVBQW1CLFNBQVMsb0VBQWMsRUFBRTtBQUNsRSxVQUFVLFlBQVkseUVBQW1CLFNBQVMsb0VBQWMsRUFBRTtBQUNsRSxVQUFVLFlBQVkseUVBQW1CLFNBQVMsb0VBQWMsRUFBRTtBQUNsRSxXQUFXLFlBQVksMkVBQW9CLFNBQVMsc0VBQWU7QUFDbkU7QUFDQTtBQUNBLFdBQVcsWUFBWSxnRkFBc0IsU0FBUywyRUFBaUI7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsSUFBSTtBQUNOO0FBQ0Esc0JBQXNCLDhEQUFlO0FBQ3JDLHdCQUF3Qiw4RUFBdUIsa0JBQWtCO0FBQ2pFO0FBQ0EsMEVBQTBFLFNBQVM7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNEVBQXFCO0FBQy9DLDRCQUE0QiwrRUFBdUI7QUFDbkQsNkJBQTZCLGtGQUF3QjtBQUNyRCxTQUFTLHNEQUFXO0FBQ3BCO0FBQ0EsYUFBYSxpRUFBZTtBQUM1QjtBQUNBLGNBQWMsbUVBQWdCO0FBQzlCLGdCQUFnQix3RUFBa0I7QUFDbEM7QUFDQSwyQkFBMkIsa0ZBQTJCO0FBQ3RELFlBQVksZ0VBQWM7QUFDMUIseUJBQXlCLGdGQUEwQjtBQUNuRCxlQUFlLHNFQUFpQjtBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsUUFBUSxtRUFBZTtBQUN2QixRQUFRLGlFQUFlO0FBQ3ZCLFFBQVEsbUVBQWdCO0FBQ3hCLFFBQVEsd0VBQWtCO0FBQzFCLFFBQVEsd0VBQWtCO0FBQzFCLFFBQVEsa0ZBQTJCO0FBQ25DLFFBQVEsZ0VBQWM7QUFDdEIsUUFBUSxnRkFBMEI7QUFDbEMsUUFBUSxzRUFBaUI7QUFDekIsUUFBUSxzRUFBbUI7QUFDM0IsUUFBUSxnRkFBdUI7QUFDL0IsUUFBUSwwRUFBb0I7QUFDNUIsUUFBUSwwRUFBb0I7QUFDNUIsV0FBVyw4RUFBc0I7QUFDakMsV0FBVyw4RUFBc0I7QUFDakM7QUFDQTtBQUNBLHlCQUF5QjtBQUN6Qiw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL2NyZWF0ZVRMU2NoZW1hLm1qcz81YzdmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0b3JlU2NoZW1hIH0gZnJvbSBcIkB0bGRyYXcvc3RvcmVcIjtcbmltcG9ydCB7IG9iamVjdE1hcFZhbHVlcyB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBjcmVhdGVJbnRlZ3JpdHlDaGVja2VyLCBvblZhbGlkYXRpb25GYWlsdXJlIH0gZnJvbSBcIi4vVExTdG9yZS5tanNcIjtcbmltcG9ydCB7IGJvb2ttYXJrQXNzZXRNaWdyYXRpb25zIH0gZnJvbSBcIi4vYXNzZXRzL1RMQm9va21hcmtBc3NldC5tanNcIjtcbmltcG9ydCB7IGltYWdlQXNzZXRNaWdyYXRpb25zIH0gZnJvbSBcIi4vYXNzZXRzL1RMSW1hZ2VBc3NldC5tanNcIjtcbmltcG9ydCB7IHZpZGVvQXNzZXRNaWdyYXRpb25zIH0gZnJvbSBcIi4vYXNzZXRzL1RMVmlkZW9Bc3NldC5tanNcIjtcbmltcG9ydCB7IGFycm93QmluZGluZ01pZ3JhdGlvbnMsIGFycm93QmluZGluZ1Byb3BzIH0gZnJvbSBcIi4vYmluZGluZ3MvVExBcnJvd0JpbmRpbmcubWpzXCI7XG5pbXBvcnQgeyBBc3NldFJlY29yZFR5cGUsIGFzc2V0TWlncmF0aW9ucyB9IGZyb20gXCIuL3JlY29yZHMvVExBc3NldC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUJpbmRpbmdSZWNvcmRUeXBlIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTEJpbmRpbmcubWpzXCI7XG5pbXBvcnQgeyBDYW1lcmFSZWNvcmRUeXBlLCBjYW1lcmFNaWdyYXRpb25zIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTENhbWVyYS5tanNcIjtcbmltcG9ydCB7IERvY3VtZW50UmVjb3JkVHlwZSwgZG9jdW1lbnRNaWdyYXRpb25zIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTERvY3VtZW50Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlSW5zdGFuY2VSZWNvcmRUeXBlLCBpbnN0YW5jZU1pZ3JhdGlvbnMgfSBmcm9tIFwiLi9yZWNvcmRzL1RMSW5zdGFuY2UubWpzXCI7XG5pbXBvcnQgeyBQYWdlUmVjb3JkVHlwZSwgcGFnZU1pZ3JhdGlvbnMgfSBmcm9tIFwiLi9yZWNvcmRzL1RMUGFnZS5tanNcIjtcbmltcG9ydCB7IEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZSwgaW5zdGFuY2VQYWdlU3RhdGVNaWdyYXRpb25zIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTFBhZ2VTdGF0ZS5tanNcIjtcbmltcG9ydCB7IFBvaW50ZXJSZWNvcmRUeXBlLCBwb2ludGVyTWlncmF0aW9ucyB9IGZyb20gXCIuL3JlY29yZHMvVExQb2ludGVyLm1qc1wiO1xuaW1wb3J0IHsgSW5zdGFuY2VQcmVzZW5jZVJlY29yZFR5cGUsIGluc3RhbmNlUHJlc2VuY2VNaWdyYXRpb25zIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTFByZXNlbmNlLm1qc1wiO1xuaW1wb3J0IHtcbiAgY3JlYXRlU2hhcGVSZWNvcmRUeXBlLFxuICBnZXRTaGFwZVByb3BLZXlzQnlTdHlsZSxcbiAgcm9vdFNoYXBlTWlncmF0aW9uc1xufSBmcm9tIFwiLi9yZWNvcmRzL1RMU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBwcm9jZXNzUHJvcHNNaWdyYXRpb25zIH0gZnJvbSBcIi4vcmVjb3Jkc1dpdGhQcm9wcy5tanNcIjtcbmltcG9ydCB7IGFycm93U2hhcGVNaWdyYXRpb25zLCBhcnJvd1NoYXBlUHJvcHMgfSBmcm9tIFwiLi9zaGFwZXMvVExBcnJvd1NoYXBlLm1qc1wiO1xuaW1wb3J0IHsgYm9va21hcmtTaGFwZU1pZ3JhdGlvbnMsIGJvb2ttYXJrU2hhcGVQcm9wcyB9IGZyb20gXCIuL3NoYXBlcy9UTEJvb2ttYXJrU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBkcmF3U2hhcGVNaWdyYXRpb25zLCBkcmF3U2hhcGVQcm9wcyB9IGZyb20gXCIuL3NoYXBlcy9UTERyYXdTaGFwZS5tanNcIjtcbmltcG9ydCB7IGVtYmVkU2hhcGVNaWdyYXRpb25zLCBlbWJlZFNoYXBlUHJvcHMgfSBmcm9tIFwiLi9zaGFwZXMvVExFbWJlZFNoYXBlLm1qc1wiO1xuaW1wb3J0IHsgZnJhbWVTaGFwZU1pZ3JhdGlvbnMsIGZyYW1lU2hhcGVQcm9wcyB9IGZyb20gXCIuL3NoYXBlcy9UTEZyYW1lU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBnZW9TaGFwZU1pZ3JhdGlvbnMsIGdlb1NoYXBlUHJvcHMgfSBmcm9tIFwiLi9zaGFwZXMvVExHZW9TaGFwZS5tanNcIjtcbmltcG9ydCB7IGdyb3VwU2hhcGVNaWdyYXRpb25zLCBncm91cFNoYXBlUHJvcHMgfSBmcm9tIFwiLi9zaGFwZXMvVExHcm91cFNoYXBlLm1qc1wiO1xuaW1wb3J0IHsgaGlnaGxpZ2h0U2hhcGVNaWdyYXRpb25zLCBoaWdobGlnaHRTaGFwZVByb3BzIH0gZnJvbSBcIi4vc2hhcGVzL1RMSGlnaGxpZ2h0U2hhcGUubWpzXCI7XG5pbXBvcnQgeyBpbWFnZVNoYXBlTWlncmF0aW9ucywgaW1hZ2VTaGFwZVByb3BzIH0gZnJvbSBcIi4vc2hhcGVzL1RMSW1hZ2VTaGFwZS5tanNcIjtcbmltcG9ydCB7IGxpbmVTaGFwZU1pZ3JhdGlvbnMsIGxpbmVTaGFwZVByb3BzIH0gZnJvbSBcIi4vc2hhcGVzL1RMTGluZVNoYXBlLm1qc1wiO1xuaW1wb3J0IHsgbm90ZVNoYXBlTWlncmF0aW9ucywgbm90ZVNoYXBlUHJvcHMgfSBmcm9tIFwiLi9zaGFwZXMvVExOb3RlU2hhcGUubWpzXCI7XG5pbXBvcnQgeyB0ZXh0U2hhcGVNaWdyYXRpb25zLCB0ZXh0U2hhcGVQcm9wcyB9IGZyb20gXCIuL3NoYXBlcy9UTFRleHRTaGFwZS5tanNcIjtcbmltcG9ydCB7IHZpZGVvU2hhcGVNaWdyYXRpb25zLCB2aWRlb1NoYXBlUHJvcHMgfSBmcm9tIFwiLi9zaGFwZXMvVExWaWRlb1NoYXBlLm1qc1wiO1xuaW1wb3J0IHsgc3RvcmVNaWdyYXRpb25zIH0gZnJvbSBcIi4vc3RvcmUtbWlncmF0aW9ucy5tanNcIjtcbmNvbnN0IGRlZmF1bHRTaGFwZVNjaGVtYXMgPSB7XG4gIGFycm93OiB7IG1pZ3JhdGlvbnM6IGFycm93U2hhcGVNaWdyYXRpb25zLCBwcm9wczogYXJyb3dTaGFwZVByb3BzIH0sXG4gIGJvb2ttYXJrOiB7IG1pZ3JhdGlvbnM6IGJvb2ttYXJrU2hhcGVNaWdyYXRpb25zLCBwcm9wczogYm9va21hcmtTaGFwZVByb3BzIH0sXG4gIGRyYXc6IHsgbWlncmF0aW9uczogZHJhd1NoYXBlTWlncmF0aW9ucywgcHJvcHM6IGRyYXdTaGFwZVByb3BzIH0sXG4gIGVtYmVkOiB7IG1pZ3JhdGlvbnM6IGVtYmVkU2hhcGVNaWdyYXRpb25zLCBwcm9wczogZW1iZWRTaGFwZVByb3BzIH0sXG4gIGZyYW1lOiB7IG1pZ3JhdGlvbnM6IGZyYW1lU2hhcGVNaWdyYXRpb25zLCBwcm9wczogZnJhbWVTaGFwZVByb3BzIH0sXG4gIGdlbzogeyBtaWdyYXRpb25zOiBnZW9TaGFwZU1pZ3JhdGlvbnMsIHByb3BzOiBnZW9TaGFwZVByb3BzIH0sXG4gIGdyb3VwOiB7IG1pZ3JhdGlvbnM6IGdyb3VwU2hhcGVNaWdyYXRpb25zLCBwcm9wczogZ3JvdXBTaGFwZVByb3BzIH0sXG4gIGhpZ2hsaWdodDogeyBtaWdyYXRpb25zOiBoaWdobGlnaHRTaGFwZU1pZ3JhdGlvbnMsIHByb3BzOiBoaWdobGlnaHRTaGFwZVByb3BzIH0sXG4gIGltYWdlOiB7IG1pZ3JhdGlvbnM6IGltYWdlU2hhcGVNaWdyYXRpb25zLCBwcm9wczogaW1hZ2VTaGFwZVByb3BzIH0sXG4gIGxpbmU6IHsgbWlncmF0aW9uczogbGluZVNoYXBlTWlncmF0aW9ucywgcHJvcHM6IGxpbmVTaGFwZVByb3BzIH0sXG4gIG5vdGU6IHsgbWlncmF0aW9uczogbm90ZVNoYXBlTWlncmF0aW9ucywgcHJvcHM6IG5vdGVTaGFwZVByb3BzIH0sXG4gIHRleHQ6IHsgbWlncmF0aW9uczogdGV4dFNoYXBlTWlncmF0aW9ucywgcHJvcHM6IHRleHRTaGFwZVByb3BzIH0sXG4gIHZpZGVvOiB7IG1pZ3JhdGlvbnM6IHZpZGVvU2hhcGVNaWdyYXRpb25zLCBwcm9wczogdmlkZW9TaGFwZVByb3BzIH1cbn07XG5jb25zdCBkZWZhdWx0QmluZGluZ1NjaGVtYXMgPSB7XG4gIGFycm93OiB7IG1pZ3JhdGlvbnM6IGFycm93QmluZGluZ01pZ3JhdGlvbnMsIHByb3BzOiBhcnJvd0JpbmRpbmdQcm9wcyB9XG59O1xuZnVuY3Rpb24gY3JlYXRlVExTY2hlbWEoe1xuICBzaGFwZXMgPSBkZWZhdWx0U2hhcGVTY2hlbWFzLFxuICBiaW5kaW5ncyA9IGRlZmF1bHRCaW5kaW5nU2NoZW1hcyxcbiAgbWlncmF0aW9uc1xufSA9IHt9KSB7XG4gIGNvbnN0IHN0eWxlc0J5SWQgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBmb3IgKGNvbnN0IHNoYXBlIG9mIG9iamVjdE1hcFZhbHVlcyhzaGFwZXMpKSB7XG4gICAgZm9yIChjb25zdCBzdHlsZSBvZiBnZXRTaGFwZVByb3BLZXlzQnlTdHlsZShzaGFwZS5wcm9wcyA/PyB7fSkua2V5cygpKSB7XG4gICAgICBpZiAoc3R5bGVzQnlJZC5oYXMoc3R5bGUuaWQpICYmIHN0eWxlc0J5SWQuZ2V0KHN0eWxlLmlkKSAhPT0gc3R5bGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNdWx0aXBsZSBTdHlsZVByb3AgaW5zdGFuY2VzIHdpdGggdGhlIHNhbWUgaWQ6ICR7c3R5bGUuaWR9YCk7XG4gICAgICB9XG4gICAgICBzdHlsZXNCeUlkLnNldChzdHlsZS5pZCwgc3R5bGUpO1xuICAgIH1cbiAgfVxuICBjb25zdCBTaGFwZVJlY29yZFR5cGUgPSBjcmVhdGVTaGFwZVJlY29yZFR5cGUoc2hhcGVzKTtcbiAgY29uc3QgQmluZGluZ1JlY29yZFR5cGUgPSBjcmVhdGVCaW5kaW5nUmVjb3JkVHlwZShiaW5kaW5ncyk7XG4gIGNvbnN0IEluc3RhbmNlUmVjb3JkVHlwZSA9IGNyZWF0ZUluc3RhbmNlUmVjb3JkVHlwZShzdHlsZXNCeUlkKTtcbiAgcmV0dXJuIFN0b3JlU2NoZW1hLmNyZWF0ZShcbiAgICB7XG4gICAgICBhc3NldDogQXNzZXRSZWNvcmRUeXBlLFxuICAgICAgYmluZGluZzogQmluZGluZ1JlY29yZFR5cGUsXG4gICAgICBjYW1lcmE6IENhbWVyYVJlY29yZFR5cGUsXG4gICAgICBkb2N1bWVudDogRG9jdW1lbnRSZWNvcmRUeXBlLFxuICAgICAgaW5zdGFuY2U6IEluc3RhbmNlUmVjb3JkVHlwZSxcbiAgICAgIGluc3RhbmNlX3BhZ2Vfc3RhdGU6IEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZSxcbiAgICAgIHBhZ2U6IFBhZ2VSZWNvcmRUeXBlLFxuICAgICAgaW5zdGFuY2VfcHJlc2VuY2U6IEluc3RhbmNlUHJlc2VuY2VSZWNvcmRUeXBlLFxuICAgICAgcG9pbnRlcjogUG9pbnRlclJlY29yZFR5cGUsXG4gICAgICBzaGFwZTogU2hhcGVSZWNvcmRUeXBlXG4gICAgfSxcbiAgICB7XG4gICAgICBtaWdyYXRpb25zOiBbXG4gICAgICAgIHN0b3JlTWlncmF0aW9ucyxcbiAgICAgICAgYXNzZXRNaWdyYXRpb25zLFxuICAgICAgICBjYW1lcmFNaWdyYXRpb25zLFxuICAgICAgICBkb2N1bWVudE1pZ3JhdGlvbnMsXG4gICAgICAgIGluc3RhbmNlTWlncmF0aW9ucyxcbiAgICAgICAgaW5zdGFuY2VQYWdlU3RhdGVNaWdyYXRpb25zLFxuICAgICAgICBwYWdlTWlncmF0aW9ucyxcbiAgICAgICAgaW5zdGFuY2VQcmVzZW5jZU1pZ3JhdGlvbnMsXG4gICAgICAgIHBvaW50ZXJNaWdyYXRpb25zLFxuICAgICAgICByb290U2hhcGVNaWdyYXRpb25zLFxuICAgICAgICBib29rbWFya0Fzc2V0TWlncmF0aW9ucyxcbiAgICAgICAgaW1hZ2VBc3NldE1pZ3JhdGlvbnMsXG4gICAgICAgIHZpZGVvQXNzZXRNaWdyYXRpb25zLFxuICAgICAgICAuLi5wcm9jZXNzUHJvcHNNaWdyYXRpb25zKFwic2hhcGVcIiwgc2hhcGVzKSxcbiAgICAgICAgLi4ucHJvY2Vzc1Byb3BzTWlncmF0aW9ucyhcImJpbmRpbmdcIiwgYmluZGluZ3MpLFxuICAgICAgICAuLi4obWlncmF0aW9ucyA/PyBbXSlcbiAgICAgIF0sXG4gICAgICBvblZhbGlkYXRpb25GYWlsdXJlLFxuICAgICAgY3JlYXRlSW50ZWdyaXR5Q2hlY2tlclxuICAgIH1cbiAgKTtcbn1cbmV4cG9ydCB7XG4gIGNyZWF0ZVRMU2NoZW1hLFxuICBkZWZhdWx0QmluZGluZ1NjaGVtYXMsXG4gIGRlZmF1bHRTaGFwZVNjaGVtYXNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVUTFNjaGVtYS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/createTLSchema.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/index.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrowShapeArrowheadEndStyle: () => (/* reexport safe */ _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_22__.ArrowShapeArrowheadEndStyle),\n/* harmony export */   ArrowShapeArrowheadStartStyle: () => (/* reexport safe */ _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_22__.ArrowShapeArrowheadStartStyle),\n/* harmony export */   AssetRecordType: () => (/* reexport safe */ _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_12__.AssetRecordType),\n/* harmony export */   CameraRecordType: () => (/* reexport safe */ _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_14__.CameraRecordType),\n/* harmony export */   DefaultColorStyle: () => (/* reexport safe */ _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_37__.DefaultColorStyle),\n/* harmony export */   DefaultColorThemePalette: () => (/* reexport safe */ _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_37__.DefaultColorThemePalette),\n/* harmony export */   DefaultDashStyle: () => (/* reexport safe */ _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_38__.DefaultDashStyle),\n/* harmony export */   DefaultFillStyle: () => (/* reexport safe */ _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_39__.DefaultFillStyle),\n/* harmony export */   DefaultFontFamilies: () => (/* reexport safe */ _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_40__.DefaultFontFamilies),\n/* harmony export */   DefaultFontStyle: () => (/* reexport safe */ _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_40__.DefaultFontStyle),\n/* harmony export */   DefaultHorizontalAlignStyle: () => (/* reexport safe */ _styles_TLHorizontalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_41__.DefaultHorizontalAlignStyle),\n/* harmony export */   DefaultSizeStyle: () => (/* reexport safe */ _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_42__.DefaultSizeStyle),\n/* harmony export */   DefaultTextAlignStyle: () => (/* reexport safe */ _styles_TLTextAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_43__.DefaultTextAlignStyle),\n/* harmony export */   DefaultVerticalAlignStyle: () => (/* reexport safe */ _styles_TLVerticalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_44__.DefaultVerticalAlignStyle),\n/* harmony export */   DocumentRecordType: () => (/* reexport safe */ _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_15__.DocumentRecordType),\n/* harmony export */   EMBED_DEFINITIONS: () => (/* reexport safe */ _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_26__.EMBED_DEFINITIONS),\n/* harmony export */   EnumStyleProp: () => (/* reexport safe */ _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_36__.EnumStyleProp),\n/* harmony export */   GeoShapeGeoStyle: () => (/* reexport safe */ _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_28__.GeoShapeGeoStyle),\n/* harmony export */   ImageShapeCrop: () => (/* reexport safe */ _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_31__.ImageShapeCrop),\n/* harmony export */   InstancePageStateRecordType: () => (/* reexport safe */ _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_18__.InstancePageStateRecordType),\n/* harmony export */   InstancePresenceRecordType: () => (/* reexport safe */ _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_20__.InstancePresenceRecordType),\n/* harmony export */   LANGUAGES: () => (/* reexport safe */ _translations_translations_mjs__WEBPACK_IMPORTED_MODULE_45__.LANGUAGES),\n/* harmony export */   LineShapeSplineStyle: () => (/* reexport safe */ _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_32__.LineShapeSplineStyle),\n/* harmony export */   PageRecordType: () => (/* reexport safe */ _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_17__.PageRecordType),\n/* harmony export */   PointerRecordType: () => (/* reexport safe */ _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_19__.PointerRecordType),\n/* harmony export */   StyleProp: () => (/* reexport safe */ _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_36__.StyleProp),\n/* harmony export */   TLDOCUMENT_ID: () => (/* reexport safe */ _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_15__.TLDOCUMENT_ID),\n/* harmony export */   TLINSTANCE_ID: () => (/* reexport safe */ _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_16__.TLINSTANCE_ID),\n/* harmony export */   TLPOINTER_ID: () => (/* reexport safe */ _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_19__.TLPOINTER_ID),\n/* harmony export */   TL_CANVAS_UI_COLOR_TYPES: () => (/* reexport safe */ _misc_TLColor_mjs__WEBPACK_IMPORTED_MODULE_5__.TL_CANVAS_UI_COLOR_TYPES),\n/* harmony export */   TL_CURSOR_TYPES: () => (/* reexport safe */ _misc_TLCursor_mjs__WEBPACK_IMPORTED_MODULE_6__.TL_CURSOR_TYPES),\n/* harmony export */   TL_HANDLE_TYPES: () => (/* reexport safe */ _misc_TLHandle_mjs__WEBPACK_IMPORTED_MODULE_7__.TL_HANDLE_TYPES),\n/* harmony export */   TL_SCRIBBLE_STATES: () => (/* reexport safe */ _misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_9__.TL_SCRIBBLE_STATES),\n/* harmony export */   arrowBindingMigrations: () => (/* reexport safe */ _bindings_TLArrowBinding_mjs__WEBPACK_IMPORTED_MODULE_1__.arrowBindingMigrations),\n/* harmony export */   arrowBindingProps: () => (/* reexport safe */ _bindings_TLArrowBinding_mjs__WEBPACK_IMPORTED_MODULE_1__.arrowBindingProps),\n/* harmony export */   arrowShapeMigrations: () => (/* reexport safe */ _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_22__.arrowShapeMigrations),\n/* harmony export */   arrowShapeProps: () => (/* reexport safe */ _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_22__.arrowShapeProps),\n/* harmony export */   assetIdValidator: () => (/* reexport safe */ _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_0__.assetIdValidator),\n/* harmony export */   assetMigrations: () => (/* reexport safe */ _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_12__.assetMigrations),\n/* harmony export */   assetValidator: () => (/* reexport safe */ _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_12__.assetValidator),\n/* harmony export */   bindingIdValidator: () => (/* reexport safe */ _bindings_TLBaseBinding_mjs__WEBPACK_IMPORTED_MODULE_2__.bindingIdValidator),\n/* harmony export */   bookmarkShapeMigrations: () => (/* reexport safe */ _shapes_TLBookmarkShape_mjs__WEBPACK_IMPORTED_MODULE_24__.bookmarkShapeMigrations),\n/* harmony export */   bookmarkShapeProps: () => (/* reexport safe */ _shapes_TLBookmarkShape_mjs__WEBPACK_IMPORTED_MODULE_24__.bookmarkShapeProps),\n/* harmony export */   boxModelValidator: () => (/* reexport safe */ _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_10__.boxModelValidator),\n/* harmony export */   canvasUiColorTypeValidator: () => (/* reexport safe */ _misc_TLColor_mjs__WEBPACK_IMPORTED_MODULE_5__.canvasUiColorTypeValidator),\n/* harmony export */   createAssetValidator: () => (/* reexport safe */ _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_0__.createAssetValidator),\n/* harmony export */   createBindingId: () => (/* reexport safe */ _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_13__.createBindingId),\n/* harmony export */   createBindingPropsMigrationIds: () => (/* reexport safe */ _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_13__.createBindingPropsMigrationIds),\n/* harmony export */   createBindingPropsMigrationSequence: () => (/* reexport safe */ _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_13__.createBindingPropsMigrationSequence),\n/* harmony export */   createBindingValidator: () => (/* reexport safe */ _bindings_TLBaseBinding_mjs__WEBPACK_IMPORTED_MODULE_2__.createBindingValidator),\n/* harmony export */   createPresenceStateDerivation: () => (/* reexport safe */ _createPresenceStateDerivation_mjs__WEBPACK_IMPORTED_MODULE_3__.createPresenceStateDerivation),\n/* harmony export */   createShapeId: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_21__.createShapeId),\n/* harmony export */   createShapePropsMigrationIds: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_21__.createShapePropsMigrationIds),\n/* harmony export */   createShapePropsMigrationSequence: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_21__.createShapePropsMigrationSequence),\n/* harmony export */   createShapeValidator: () => (/* reexport safe */ _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_23__.createShapeValidator),\n/* harmony export */   createTLSchema: () => (/* reexport safe */ _createTLSchema_mjs__WEBPACK_IMPORTED_MODULE_4__.createTLSchema),\n/* harmony export */   defaultColorNames: () => (/* reexport safe */ _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_37__.defaultColorNames),\n/* harmony export */   defaultShapeSchemas: () => (/* reexport safe */ _createTLSchema_mjs__WEBPACK_IMPORTED_MODULE_4__.defaultShapeSchemas),\n/* harmony export */   drawShapeMigrations: () => (/* reexport safe */ _shapes_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_25__.drawShapeMigrations),\n/* harmony export */   drawShapeProps: () => (/* reexport safe */ _shapes_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_25__.drawShapeProps),\n/* harmony export */   embedShapeMigrations: () => (/* reexport safe */ _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_26__.embedShapeMigrations),\n/* harmony export */   embedShapePermissionDefaults: () => (/* reexport safe */ _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_26__.embedShapePermissionDefaults),\n/* harmony export */   embedShapeProps: () => (/* reexport safe */ _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_26__.embedShapeProps),\n/* harmony export */   frameShapeMigrations: () => (/* reexport safe */ _shapes_TLFrameShape_mjs__WEBPACK_IMPORTED_MODULE_27__.frameShapeMigrations),\n/* harmony export */   frameShapeProps: () => (/* reexport safe */ _shapes_TLFrameShape_mjs__WEBPACK_IMPORTED_MODULE_27__.frameShapeProps),\n/* harmony export */   geoShapeMigrations: () => (/* reexport safe */ _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_28__.geoShapeMigrations),\n/* harmony export */   geoShapeProps: () => (/* reexport safe */ _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_28__.geoShapeProps),\n/* harmony export */   getDefaultColorTheme: () => (/* reexport safe */ _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_37__.getDefaultColorTheme),\n/* harmony export */   getDefaultTranslationLocale: () => (/* reexport safe */ _translations_translations_mjs__WEBPACK_IMPORTED_MODULE_45__.getDefaultTranslationLocale),\n/* harmony export */   getShapePropKeysByStyle: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_21__.getShapePropKeysByStyle),\n/* harmony export */   groupShapeMigrations: () => (/* reexport safe */ _shapes_TLGroupShape_mjs__WEBPACK_IMPORTED_MODULE_29__.groupShapeMigrations),\n/* harmony export */   groupShapeProps: () => (/* reexport safe */ _shapes_TLGroupShape_mjs__WEBPACK_IMPORTED_MODULE_29__.groupShapeProps),\n/* harmony export */   highlightShapeMigrations: () => (/* reexport safe */ _shapes_TLHighlightShape_mjs__WEBPACK_IMPORTED_MODULE_30__.highlightShapeMigrations),\n/* harmony export */   highlightShapeProps: () => (/* reexport safe */ _shapes_TLHighlightShape_mjs__WEBPACK_IMPORTED_MODULE_30__.highlightShapeProps),\n/* harmony export */   idValidator: () => (/* reexport safe */ _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_11__.idValidator),\n/* harmony export */   imageShapeMigrations: () => (/* reexport safe */ _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_31__.imageShapeMigrations),\n/* harmony export */   imageShapeProps: () => (/* reexport safe */ _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_31__.imageShapeProps),\n/* harmony export */   isBinding: () => (/* reexport safe */ _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_13__.isBinding),\n/* harmony export */   isBindingId: () => (/* reexport safe */ _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_13__.isBindingId),\n/* harmony export */   isPageId: () => (/* reexport safe */ _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_17__.isPageId),\n/* harmony export */   isShape: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_21__.isShape),\n/* harmony export */   isShapeId: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_21__.isShapeId),\n/* harmony export */   lineShapeMigrations: () => (/* reexport safe */ _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_32__.lineShapeMigrations),\n/* harmony export */   lineShapeProps: () => (/* reexport safe */ _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_32__.lineShapeProps),\n/* harmony export */   noteShapeMigrations: () => (/* reexport safe */ _shapes_TLNoteShape_mjs__WEBPACK_IMPORTED_MODULE_33__.noteShapeMigrations),\n/* harmony export */   noteShapeProps: () => (/* reexport safe */ _shapes_TLNoteShape_mjs__WEBPACK_IMPORTED_MODULE_33__.noteShapeProps),\n/* harmony export */   opacityValidator: () => (/* reexport safe */ _misc_TLOpacity_mjs__WEBPACK_IMPORTED_MODULE_8__.opacityValidator),\n/* harmony export */   pageIdValidator: () => (/* reexport safe */ _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_17__.pageIdValidator),\n/* harmony export */   parentIdValidator: () => (/* reexport safe */ _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_23__.parentIdValidator),\n/* harmony export */   pluckPreservingValues: () => (/* reexport safe */ _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_16__.pluckPreservingValues),\n/* harmony export */   rootBindingMigrations: () => (/* reexport safe */ _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_13__.rootBindingMigrations),\n/* harmony export */   rootShapeMigrations: () => (/* reexport safe */ _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_21__.rootShapeMigrations),\n/* harmony export */   scribbleValidator: () => (/* reexport safe */ _misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_9__.scribbleValidator),\n/* harmony export */   shapeIdValidator: () => (/* reexport safe */ _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_23__.shapeIdValidator),\n/* harmony export */   textShapeMigrations: () => (/* reexport safe */ _shapes_TLTextShape_mjs__WEBPACK_IMPORTED_MODULE_34__.textShapeMigrations),\n/* harmony export */   textShapeProps: () => (/* reexport safe */ _shapes_TLTextShape_mjs__WEBPACK_IMPORTED_MODULE_34__.textShapeProps),\n/* harmony export */   vecModelValidator: () => (/* reexport safe */ _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_10__.vecModelValidator),\n/* harmony export */   videoShapeMigrations: () => (/* reexport safe */ _shapes_TLVideoShape_mjs__WEBPACK_IMPORTED_MODULE_35__.videoShapeMigrations),\n/* harmony export */   videoShapeProps: () => (/* reexport safe */ _shapes_TLVideoShape_mjs__WEBPACK_IMPORTED_MODULE_35__.videoShapeProps)\n/* harmony export */ });\n/* harmony import */ var _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./assets/TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n/* harmony import */ var _bindings_TLArrowBinding_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bindings/TLArrowBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLArrowBinding.mjs\");\n/* harmony import */ var _bindings_TLBaseBinding_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bindings/TLBaseBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLBaseBinding.mjs\");\n/* harmony import */ var _createPresenceStateDerivation_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./createPresenceStateDerivation.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/createPresenceStateDerivation.mjs\");\n/* harmony import */ var _createTLSchema_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./createTLSchema.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/createTLSchema.mjs\");\n/* harmony import */ var _misc_TLColor_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./misc/TLColor.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLColor.mjs\");\n/* harmony import */ var _misc_TLCursor_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./misc/TLCursor.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLCursor.mjs\");\n/* harmony import */ var _misc_TLHandle_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./misc/TLHandle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLHandle.mjs\");\n/* harmony import */ var _misc_TLOpacity_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./misc/TLOpacity.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLOpacity.mjs\");\n/* harmony import */ var _misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./misc/TLScribble.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLScribble.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n/* harmony import */ var _records_TLAsset_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./records/TLAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLAsset.mjs\");\n/* harmony import */ var _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./records/TLBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs\");\n/* harmony import */ var _records_TLCamera_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./records/TLCamera.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs\");\n/* harmony import */ var _records_TLDocument_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./records/TLDocument.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLDocument.mjs\");\n/* harmony import */ var _records_TLInstance_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./records/TLInstance.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs\");\n/* harmony import */ var _records_TLPage_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./records/TLPage.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs\");\n/* harmony import */ var _records_TLPageState_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./records/TLPageState.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs\");\n/* harmony import */ var _records_TLPointer_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./records/TLPointer.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs\");\n/* harmony import */ var _records_TLPresence_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./records/TLPresence.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPresence.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _shapes_TLArrowShape_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./shapes/TLArrowShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLArrowShape.mjs\");\n/* harmony import */ var _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./shapes/TLBaseShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs\");\n/* harmony import */ var _shapes_TLBookmarkShape_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./shapes/TLBookmarkShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBookmarkShape.mjs\");\n/* harmony import */ var _shapes_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./shapes/TLDrawShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLDrawShape.mjs\");\n/* harmony import */ var _shapes_TLEmbedShape_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./shapes/TLEmbedShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLEmbedShape.mjs\");\n/* harmony import */ var _shapes_TLFrameShape_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./shapes/TLFrameShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLFrameShape.mjs\");\n/* harmony import */ var _shapes_TLGeoShape_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./shapes/TLGeoShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGeoShape.mjs\");\n/* harmony import */ var _shapes_TLGroupShape_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./shapes/TLGroupShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGroupShape.mjs\");\n/* harmony import */ var _shapes_TLHighlightShape_mjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./shapes/TLHighlightShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLHighlightShape.mjs\");\n/* harmony import */ var _shapes_TLImageShape_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./shapes/TLImageShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLImageShape.mjs\");\n/* harmony import */ var _shapes_TLLineShape_mjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./shapes/TLLineShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLLineShape.mjs\");\n/* harmony import */ var _shapes_TLNoteShape_mjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./shapes/TLNoteShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLNoteShape.mjs\");\n/* harmony import */ var _shapes_TLTextShape_mjs__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./shapes/TLTextShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLTextShape.mjs\");\n/* harmony import */ var _shapes_TLVideoShape_mjs__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./shapes/TLVideoShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLVideoShape.mjs\");\n/* harmony import */ var _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./styles/StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./styles/TLDashStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs\");\n/* harmony import */ var _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./styles/TLFillStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs\");\n/* harmony import */ var _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./styles/TLFontStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs\");\n/* harmony import */ var _styles_TLHorizontalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./styles/TLHorizontalAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLHorizontalAlignStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n/* harmony import */ var _styles_TLTextAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./styles/TLTextAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLTextAlignStyle.mjs\");\n/* harmony import */ var _styles_TLVerticalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./styles/TLVerticalAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLVerticalAlignStyle.mjs\");\n/* harmony import */ var _translations_translations_mjs__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./translations/translations.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/translations/translations.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFrRjtBQUkzQztBQUlEO0FBQzhDO0FBSXREO0FBSUY7QUFDMEI7QUFDQTtBQUNFO0FBQ3NCO0FBSTNDO0FBQ21CO0FBS3ZCO0FBUUU7QUFDeUI7QUFDbUI7QUFJM0M7QUFLSjtBQUdLO0FBSUY7QUFHQztBQVNIO0FBTUk7QUFLRDtBQUlJO0FBSUo7QUFNQztBQUlBO0FBS0Y7QUFJRTtBQUlJO0FBS0o7QUFLRDtBQUlBO0FBSUE7QUFJQztBQUMrQjtBQU0vQjtBQUN5QjtBQUNBO0FBSTFCO0FBR1c7QUFDZTtBQUNVO0FBRzNCO0FBSUY7QUFxR3ZDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9pbmRleC5tanM/MjZhOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3NldElkVmFsaWRhdG9yLCBjcmVhdGVBc3NldFZhbGlkYXRvciB9IGZyb20gXCIuL2Fzc2V0cy9UTEJhc2VBc3NldC5tanNcIjtcbmltcG9ydCB7XG4gIGFycm93QmluZGluZ01pZ3JhdGlvbnMsXG4gIGFycm93QmluZGluZ1Byb3BzXG59IGZyb20gXCIuL2JpbmRpbmdzL1RMQXJyb3dCaW5kaW5nLm1qc1wiO1xuaW1wb3J0IHtcbiAgYmluZGluZ0lkVmFsaWRhdG9yLFxuICBjcmVhdGVCaW5kaW5nVmFsaWRhdG9yXG59IGZyb20gXCIuL2JpbmRpbmdzL1RMQmFzZUJpbmRpbmcubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVQcmVzZW5jZVN0YXRlRGVyaXZhdGlvbiB9IGZyb20gXCIuL2NyZWF0ZVByZXNlbmNlU3RhdGVEZXJpdmF0aW9uLm1qc1wiO1xuaW1wb3J0IHtcbiAgY3JlYXRlVExTY2hlbWEsXG4gIGRlZmF1bHRTaGFwZVNjaGVtYXNcbn0gZnJvbSBcIi4vY3JlYXRlVExTY2hlbWEubWpzXCI7XG5pbXBvcnQge1xuICBUTF9DQU5WQVNfVUlfQ09MT1JfVFlQRVMsXG4gIGNhbnZhc1VpQ29sb3JUeXBlVmFsaWRhdG9yXG59IGZyb20gXCIuL21pc2MvVExDb2xvci5tanNcIjtcbmltcG9ydCB7IFRMX0NVUlNPUl9UWVBFUyB9IGZyb20gXCIuL21pc2MvVExDdXJzb3IubWpzXCI7XG5pbXBvcnQgeyBUTF9IQU5ETEVfVFlQRVMgfSBmcm9tIFwiLi9taXNjL1RMSGFuZGxlLm1qc1wiO1xuaW1wb3J0IHsgb3BhY2l0eVZhbGlkYXRvciB9IGZyb20gXCIuL21pc2MvVExPcGFjaXR5Lm1qc1wiO1xuaW1wb3J0IHsgVExfU0NSSUJCTEVfU1RBVEVTLCBzY3JpYmJsZVZhbGlkYXRvciB9IGZyb20gXCIuL21pc2MvVExTY3JpYmJsZS5tanNcIjtcbmltcG9ydCB7XG4gIGJveE1vZGVsVmFsaWRhdG9yLFxuICB2ZWNNb2RlbFZhbGlkYXRvclxufSBmcm9tIFwiLi9taXNjL2dlb21ldHJ5LXR5cGVzLm1qc1wiO1xuaW1wb3J0IHsgaWRWYWxpZGF0b3IgfSBmcm9tIFwiLi9taXNjL2lkLXZhbGlkYXRvci5tanNcIjtcbmltcG9ydCB7XG4gIEFzc2V0UmVjb3JkVHlwZSxcbiAgYXNzZXRNaWdyYXRpb25zLFxuICBhc3NldFZhbGlkYXRvclxufSBmcm9tIFwiLi9yZWNvcmRzL1RMQXNzZXQubWpzXCI7XG5pbXBvcnQge1xuICBjcmVhdGVCaW5kaW5nSWQsXG4gIGNyZWF0ZUJpbmRpbmdQcm9wc01pZ3JhdGlvbklkcyxcbiAgY3JlYXRlQmluZGluZ1Byb3BzTWlncmF0aW9uU2VxdWVuY2UsXG4gIGlzQmluZGluZyxcbiAgaXNCaW5kaW5nSWQsXG4gIHJvb3RCaW5kaW5nTWlncmF0aW9uc1xufSBmcm9tIFwiLi9yZWNvcmRzL1RMQmluZGluZy5tanNcIjtcbmltcG9ydCB7IENhbWVyYVJlY29yZFR5cGUgfSBmcm9tIFwiLi9yZWNvcmRzL1RMQ2FtZXJhLm1qc1wiO1xuaW1wb3J0IHsgRG9jdW1lbnRSZWNvcmRUeXBlLCBUTERPQ1VNRU5UX0lEIH0gZnJvbSBcIi4vcmVjb3Jkcy9UTERvY3VtZW50Lm1qc1wiO1xuaW1wb3J0IHtcbiAgVExJTlNUQU5DRV9JRCxcbiAgcGx1Y2tQcmVzZXJ2aW5nVmFsdWVzXG59IGZyb20gXCIuL3JlY29yZHMvVExJbnN0YW5jZS5tanNcIjtcbmltcG9ydCB7XG4gIFBhZ2VSZWNvcmRUeXBlLFxuICBpc1BhZ2VJZCxcbiAgcGFnZUlkVmFsaWRhdG9yXG59IGZyb20gXCIuL3JlY29yZHMvVExQYWdlLm1qc1wiO1xuaW1wb3J0IHtcbiAgSW5zdGFuY2VQYWdlU3RhdGVSZWNvcmRUeXBlXG59IGZyb20gXCIuL3JlY29yZHMvVExQYWdlU3RhdGUubWpzXCI7XG5pbXBvcnQge1xuICBQb2ludGVyUmVjb3JkVHlwZSxcbiAgVExQT0lOVEVSX0lEXG59IGZyb20gXCIuL3JlY29yZHMvVExQb2ludGVyLm1qc1wiO1xuaW1wb3J0IHtcbiAgSW5zdGFuY2VQcmVzZW5jZVJlY29yZFR5cGVcbn0gZnJvbSBcIi4vcmVjb3Jkcy9UTFByZXNlbmNlLm1qc1wiO1xuaW1wb3J0IHtcbiAgY3JlYXRlU2hhcGVJZCxcbiAgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcyxcbiAgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlLFxuICBnZXRTaGFwZVByb3BLZXlzQnlTdHlsZSxcbiAgaXNTaGFwZSxcbiAgaXNTaGFwZUlkLFxuICByb290U2hhcGVNaWdyYXRpb25zXG59IGZyb20gXCIuL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmltcG9ydCB7XG4gIEFycm93U2hhcGVBcnJvd2hlYWRFbmRTdHlsZSxcbiAgQXJyb3dTaGFwZUFycm93aGVhZFN0YXJ0U3R5bGUsXG4gIGFycm93U2hhcGVNaWdyYXRpb25zLFxuICBhcnJvd1NoYXBlUHJvcHNcbn0gZnJvbSBcIi4vc2hhcGVzL1RMQXJyb3dTaGFwZS5tanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVNoYXBlVmFsaWRhdG9yLFxuICBwYXJlbnRJZFZhbGlkYXRvcixcbiAgc2hhcGVJZFZhbGlkYXRvclxufSBmcm9tIFwiLi9zaGFwZXMvVExCYXNlU2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICBib29rbWFya1NoYXBlTWlncmF0aW9ucyxcbiAgYm9va21hcmtTaGFwZVByb3BzXG59IGZyb20gXCIuL3NoYXBlcy9UTEJvb2ttYXJrU2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICBkcmF3U2hhcGVNaWdyYXRpb25zLFxuICBkcmF3U2hhcGVQcm9wc1xufSBmcm9tIFwiLi9zaGFwZXMvVExEcmF3U2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICBFTUJFRF9ERUZJTklUSU9OUyxcbiAgZW1iZWRTaGFwZU1pZ3JhdGlvbnMsXG4gIGVtYmVkU2hhcGVQZXJtaXNzaW9uRGVmYXVsdHMsXG4gIGVtYmVkU2hhcGVQcm9wc1xufSBmcm9tIFwiLi9zaGFwZXMvVExFbWJlZFNoYXBlLm1qc1wiO1xuaW1wb3J0IHtcbiAgZnJhbWVTaGFwZU1pZ3JhdGlvbnMsXG4gIGZyYW1lU2hhcGVQcm9wc1xufSBmcm9tIFwiLi9zaGFwZXMvVExGcmFtZVNoYXBlLm1qc1wiO1xuaW1wb3J0IHtcbiAgR2VvU2hhcGVHZW9TdHlsZSxcbiAgZ2VvU2hhcGVNaWdyYXRpb25zLFxuICBnZW9TaGFwZVByb3BzXG59IGZyb20gXCIuL3NoYXBlcy9UTEdlb1NoYXBlLm1qc1wiO1xuaW1wb3J0IHtcbiAgZ3JvdXBTaGFwZU1pZ3JhdGlvbnMsXG4gIGdyb3VwU2hhcGVQcm9wc1xufSBmcm9tIFwiLi9zaGFwZXMvVExHcm91cFNoYXBlLm1qc1wiO1xuaW1wb3J0IHtcbiAgaGlnaGxpZ2h0U2hhcGVNaWdyYXRpb25zLFxuICBoaWdobGlnaHRTaGFwZVByb3BzXG59IGZyb20gXCIuL3NoYXBlcy9UTEhpZ2hsaWdodFNoYXBlLm1qc1wiO1xuaW1wb3J0IHtcbiAgSW1hZ2VTaGFwZUNyb3AsXG4gIGltYWdlU2hhcGVNaWdyYXRpb25zLFxuICBpbWFnZVNoYXBlUHJvcHNcbn0gZnJvbSBcIi4vc2hhcGVzL1RMSW1hZ2VTaGFwZS5tanNcIjtcbmltcG9ydCB7XG4gIExpbmVTaGFwZVNwbGluZVN0eWxlLFxuICBsaW5lU2hhcGVNaWdyYXRpb25zLFxuICBsaW5lU2hhcGVQcm9wc1xufSBmcm9tIFwiLi9zaGFwZXMvVExMaW5lU2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICBub3RlU2hhcGVNaWdyYXRpb25zLFxuICBub3RlU2hhcGVQcm9wc1xufSBmcm9tIFwiLi9zaGFwZXMvVExOb3RlU2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICB0ZXh0U2hhcGVNaWdyYXRpb25zLFxuICB0ZXh0U2hhcGVQcm9wc1xufSBmcm9tIFwiLi9zaGFwZXMvVExUZXh0U2hhcGUubWpzXCI7XG5pbXBvcnQge1xuICB2aWRlb1NoYXBlTWlncmF0aW9ucyxcbiAgdmlkZW9TaGFwZVByb3BzXG59IGZyb20gXCIuL3NoYXBlcy9UTFZpZGVvU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBFbnVtU3R5bGVQcm9wLCBTdHlsZVByb3AgfSBmcm9tIFwiLi9zdHlsZXMvU3R5bGVQcm9wLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdENvbG9yU3R5bGUsXG4gIERlZmF1bHRDb2xvclRoZW1lUGFsZXR0ZSxcbiAgZGVmYXVsdENvbG9yTmFtZXMsXG4gIGdldERlZmF1bHRDb2xvclRoZW1lXG59IGZyb20gXCIuL3N0eWxlcy9UTENvbG9yU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0RGFzaFN0eWxlIH0gZnJvbSBcIi4vc3R5bGVzL1RMRGFzaFN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdEZpbGxTdHlsZSB9IGZyb20gXCIuL3N0eWxlcy9UTEZpbGxTdHlsZS5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRGb250RmFtaWxpZXMsXG4gIERlZmF1bHRGb250U3R5bGVcbn0gZnJvbSBcIi4vc3R5bGVzL1RMRm9udFN0eWxlLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdEhvcml6b250YWxBbGlnblN0eWxlXG59IGZyb20gXCIuL3N0eWxlcy9UTEhvcml6b250YWxBbGlnblN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdFNpemVTdHlsZSB9IGZyb20gXCIuL3N0eWxlcy9UTFNpemVTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRUZXh0QWxpZ25TdHlsZSB9IGZyb20gXCIuL3N0eWxlcy9UTFRleHRBbGlnblN0eWxlLm1qc1wiO1xuaW1wb3J0IHtcbiAgRGVmYXVsdFZlcnRpY2FsQWxpZ25TdHlsZVxufSBmcm9tIFwiLi9zdHlsZXMvVExWZXJ0aWNhbEFsaWduU3R5bGUubWpzXCI7XG5pbXBvcnQge1xuICBMQU5HVUFHRVMsXG4gIGdldERlZmF1bHRUcmFuc2xhdGlvbkxvY2FsZVxufSBmcm9tIFwiLi90cmFuc2xhdGlvbnMvdHJhbnNsYXRpb25zLm1qc1wiO1xuZXhwb3J0IHtcbiAgQXJyb3dTaGFwZUFycm93aGVhZEVuZFN0eWxlLFxuICBBcnJvd1NoYXBlQXJyb3doZWFkU3RhcnRTdHlsZSxcbiAgQXNzZXRSZWNvcmRUeXBlLFxuICBDYW1lcmFSZWNvcmRUeXBlLFxuICBEZWZhdWx0Q29sb3JTdHlsZSxcbiAgRGVmYXVsdENvbG9yVGhlbWVQYWxldHRlLFxuICBEZWZhdWx0RGFzaFN0eWxlLFxuICBEZWZhdWx0RmlsbFN0eWxlLFxuICBEZWZhdWx0Rm9udEZhbWlsaWVzLFxuICBEZWZhdWx0Rm9udFN0eWxlLFxuICBEZWZhdWx0SG9yaXpvbnRhbEFsaWduU3R5bGUsXG4gIERlZmF1bHRTaXplU3R5bGUsXG4gIERlZmF1bHRUZXh0QWxpZ25TdHlsZSxcbiAgRGVmYXVsdFZlcnRpY2FsQWxpZ25TdHlsZSxcbiAgRG9jdW1lbnRSZWNvcmRUeXBlLFxuICBFTUJFRF9ERUZJTklUSU9OUyxcbiAgRW51bVN0eWxlUHJvcCxcbiAgR2VvU2hhcGVHZW9TdHlsZSxcbiAgSW1hZ2VTaGFwZUNyb3AsXG4gIEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZSxcbiAgSW5zdGFuY2VQcmVzZW5jZVJlY29yZFR5cGUsXG4gIExBTkdVQUdFUyxcbiAgTGluZVNoYXBlU3BsaW5lU3R5bGUsXG4gIFBhZ2VSZWNvcmRUeXBlLFxuICBQb2ludGVyUmVjb3JkVHlwZSxcbiAgU3R5bGVQcm9wLFxuICBUTERPQ1VNRU5UX0lELFxuICBUTElOU1RBTkNFX0lELFxuICBUTFBPSU5URVJfSUQsXG4gIFRMX0NBTlZBU19VSV9DT0xPUl9UWVBFUyxcbiAgVExfQ1VSU09SX1RZUEVTLFxuICBUTF9IQU5ETEVfVFlQRVMsXG4gIFRMX1NDUklCQkxFX1NUQVRFUyxcbiAgYXJyb3dCaW5kaW5nTWlncmF0aW9ucyxcbiAgYXJyb3dCaW5kaW5nUHJvcHMsXG4gIGFycm93U2hhcGVNaWdyYXRpb25zLFxuICBhcnJvd1NoYXBlUHJvcHMsXG4gIGFzc2V0SWRWYWxpZGF0b3IsXG4gIGFzc2V0TWlncmF0aW9ucyxcbiAgYXNzZXRWYWxpZGF0b3IsXG4gIGJpbmRpbmdJZFZhbGlkYXRvcixcbiAgYm9va21hcmtTaGFwZU1pZ3JhdGlvbnMsXG4gIGJvb2ttYXJrU2hhcGVQcm9wcyxcbiAgYm94TW9kZWxWYWxpZGF0b3IsXG4gIGNhbnZhc1VpQ29sb3JUeXBlVmFsaWRhdG9yLFxuICBjcmVhdGVBc3NldFZhbGlkYXRvcixcbiAgY3JlYXRlQmluZGluZ0lkLFxuICBjcmVhdGVCaW5kaW5nUHJvcHNNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZUJpbmRpbmdQcm9wc01pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVCaW5kaW5nVmFsaWRhdG9yLFxuICBjcmVhdGVQcmVzZW5jZVN0YXRlRGVyaXZhdGlvbixcbiAgY3JlYXRlU2hhcGVJZCxcbiAgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcyxcbiAgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVTaGFwZVZhbGlkYXRvcixcbiAgY3JlYXRlVExTY2hlbWEsXG4gIGRlZmF1bHRDb2xvck5hbWVzLFxuICBkZWZhdWx0U2hhcGVTY2hlbWFzLFxuICBkcmF3U2hhcGVNaWdyYXRpb25zLFxuICBkcmF3U2hhcGVQcm9wcyxcbiAgZW1iZWRTaGFwZU1pZ3JhdGlvbnMsXG4gIGVtYmVkU2hhcGVQZXJtaXNzaW9uRGVmYXVsdHMsXG4gIGVtYmVkU2hhcGVQcm9wcyxcbiAgZnJhbWVTaGFwZU1pZ3JhdGlvbnMsXG4gIGZyYW1lU2hhcGVQcm9wcyxcbiAgZ2VvU2hhcGVNaWdyYXRpb25zLFxuICBnZW9TaGFwZVByb3BzLFxuICBnZXREZWZhdWx0Q29sb3JUaGVtZSxcbiAgZ2V0RGVmYXVsdFRyYW5zbGF0aW9uTG9jYWxlLFxuICBnZXRTaGFwZVByb3BLZXlzQnlTdHlsZSxcbiAgZ3JvdXBTaGFwZU1pZ3JhdGlvbnMsXG4gIGdyb3VwU2hhcGVQcm9wcyxcbiAgaGlnaGxpZ2h0U2hhcGVNaWdyYXRpb25zLFxuICBoaWdobGlnaHRTaGFwZVByb3BzLFxuICBpZFZhbGlkYXRvcixcbiAgaW1hZ2VTaGFwZU1pZ3JhdGlvbnMsXG4gIGltYWdlU2hhcGVQcm9wcyxcbiAgaXNCaW5kaW5nLFxuICBpc0JpbmRpbmdJZCxcbiAgaXNQYWdlSWQsXG4gIGlzU2hhcGUsXG4gIGlzU2hhcGVJZCxcbiAgbGluZVNoYXBlTWlncmF0aW9ucyxcbiAgbGluZVNoYXBlUHJvcHMsXG4gIG5vdGVTaGFwZU1pZ3JhdGlvbnMsXG4gIG5vdGVTaGFwZVByb3BzLFxuICBvcGFjaXR5VmFsaWRhdG9yLFxuICBwYWdlSWRWYWxpZGF0b3IsXG4gIHBhcmVudElkVmFsaWRhdG9yLFxuICBwbHVja1ByZXNlcnZpbmdWYWx1ZXMsXG4gIHJvb3RCaW5kaW5nTWlncmF0aW9ucyxcbiAgcm9vdFNoYXBlTWlncmF0aW9ucyxcbiAgc2NyaWJibGVWYWxpZGF0b3IsXG4gIHNoYXBlSWRWYWxpZGF0b3IsXG4gIHRleHRTaGFwZU1pZ3JhdGlvbnMsXG4gIHRleHRTaGFwZVByb3BzLFxuICB2ZWNNb2RlbFZhbGlkYXRvcixcbiAgdmlkZW9TaGFwZU1pZ3JhdGlvbnMsXG4gIHZpZGVvU2hhcGVQcm9wc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLColor.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/TLColor.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TL_CANVAS_UI_COLOR_TYPES: () => (/* binding */ TL_CANVAS_UI_COLOR_TYPES),\n/* harmony export */   canvasUiColorTypeValidator: () => (/* binding */ canvasUiColorTypeValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\nconst TL_CANVAS_UI_COLOR_TYPES = /* @__PURE__ */ new Set([\n  \"accent\",\n  \"white\",\n  \"black\",\n  \"selection-stroke\",\n  \"selection-fill\",\n  \"laser\",\n  \"muted-1\"\n]);\nconst canvasUiColorTypeValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.setEnum(TL_CANVAS_UI_COLOR_TYPES);\n\n//# sourceMappingURL=TLColor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL1RMQ29sb3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsdURBQVM7QUFJMUM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL21pc2MvVExDb2xvci5tanM/NGUzOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmNvbnN0IFRMX0NBTlZBU19VSV9DT0xPUl9UWVBFUyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgXCJhY2NlbnRcIixcbiAgXCJ3aGl0ZVwiLFxuICBcImJsYWNrXCIsXG4gIFwic2VsZWN0aW9uLXN0cm9rZVwiLFxuICBcInNlbGVjdGlvbi1maWxsXCIsXG4gIFwibGFzZXJcIixcbiAgXCJtdXRlZC0xXCJcbl0pO1xuY29uc3QgY2FudmFzVWlDb2xvclR5cGVWYWxpZGF0b3IgPSBULnNldEVudW0oVExfQ0FOVkFTX1VJX0NPTE9SX1RZUEVTKTtcbmV4cG9ydCB7XG4gIFRMX0NBTlZBU19VSV9DT0xPUl9UWVBFUyxcbiAgY2FudmFzVWlDb2xvclR5cGVWYWxpZGF0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTENvbG9yLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLColor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLCursor.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/TLCursor.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TL_CURSOR_TYPES: () => (/* binding */ TL_CURSOR_TYPES),\n/* harmony export */   cursorTypeValidator: () => (/* binding */ cursorTypeValidator),\n/* harmony export */   cursorValidator: () => (/* binding */ cursorValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\nconst TL_CURSOR_TYPES = /* @__PURE__ */ new Set([\n  \"none\",\n  \"default\",\n  \"pointer\",\n  \"cross\",\n  \"grab\",\n  \"rotate\",\n  \"grabbing\",\n  \"resize-edge\",\n  \"resize-corner\",\n  \"text\",\n  \"move\",\n  \"ew-resize\",\n  \"ns-resize\",\n  \"nesw-resize\",\n  \"nwse-resize\",\n  \"nesw-rotate\",\n  \"nwse-rotate\",\n  \"swne-rotate\",\n  \"senw-rotate\",\n  \"zoom-in\",\n  \"zoom-out\"\n]);\nconst cursorTypeValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.setEnum(TL_CURSOR_TYPES);\nconst cursorValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n  type: cursorTypeValidator,\n  rotation: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number\n});\n\n//# sourceMappingURL=TLCursor.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL1RMQ3Vyc29yLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsdURBQVM7QUFDckMsd0JBQXdCLHNEQUFRO0FBQ2hDO0FBQ0EsWUFBWSxzREFBUTtBQUNwQixDQUFDO0FBS0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL21pc2MvVExDdXJzb3IubWpzPzAxMzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5jb25zdCBUTF9DVVJTT1JfVFlQRVMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gIFwibm9uZVwiLFxuICBcImRlZmF1bHRcIixcbiAgXCJwb2ludGVyXCIsXG4gIFwiY3Jvc3NcIixcbiAgXCJncmFiXCIsXG4gIFwicm90YXRlXCIsXG4gIFwiZ3JhYmJpbmdcIixcbiAgXCJyZXNpemUtZWRnZVwiLFxuICBcInJlc2l6ZS1jb3JuZXJcIixcbiAgXCJ0ZXh0XCIsXG4gIFwibW92ZVwiLFxuICBcImV3LXJlc2l6ZVwiLFxuICBcIm5zLXJlc2l6ZVwiLFxuICBcIm5lc3ctcmVzaXplXCIsXG4gIFwibndzZS1yZXNpemVcIixcbiAgXCJuZXN3LXJvdGF0ZVwiLFxuICBcIm53c2Utcm90YXRlXCIsXG4gIFwic3duZS1yb3RhdGVcIixcbiAgXCJzZW53LXJvdGF0ZVwiLFxuICBcInpvb20taW5cIixcbiAgXCJ6b29tLW91dFwiXG5dKTtcbmNvbnN0IGN1cnNvclR5cGVWYWxpZGF0b3IgPSBULnNldEVudW0oVExfQ1VSU09SX1RZUEVTKTtcbmNvbnN0IGN1cnNvclZhbGlkYXRvciA9IFQub2JqZWN0KHtcbiAgdHlwZTogY3Vyc29yVHlwZVZhbGlkYXRvcixcbiAgcm90YXRpb246IFQubnVtYmVyXG59KTtcbmV4cG9ydCB7XG4gIFRMX0NVUlNPUl9UWVBFUyxcbiAgY3Vyc29yVHlwZVZhbGlkYXRvcixcbiAgY3Vyc29yVmFsaWRhdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExDdXJzb3IubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLCursor.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLHandle.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/TLHandle.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TL_HANDLE_TYPES: () => (/* binding */ TL_HANDLE_TYPES)\n/* harmony export */ });\nconst TL_HANDLE_TYPES = /* @__PURE__ */ new Set([\"vertex\", \"virtual\", \"create\", \"clone\"]);\n\n//# sourceMappingURL=TLHandle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL1RMSGFuZGxlLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vbWlzYy9UTEhhbmRsZS5tanM/ZWZjMSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBUTF9IQU5ETEVfVFlQRVMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXCJ2ZXJ0ZXhcIiwgXCJ2aXJ0dWFsXCIsIFwiY3JlYXRlXCIsIFwiY2xvbmVcIl0pO1xuZXhwb3J0IHtcbiAgVExfSEFORExFX1RZUEVTXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExIYW5kbGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLHandle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLOpacity.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/TLOpacity.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   opacityValidator: () => (/* binding */ opacityValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\nconst opacityValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number.check((n) => {\n  if (n < 0 || n > 1) {\n    throw new _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.ValidationError(\"Opacity must be between 0 and 1\");\n  }\n});\n\n//# sourceMappingURL=TLOpacity.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL1RMT3BhY2l0eS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUM7QUFDckMseUJBQXlCLHNEQUFRO0FBQ2pDO0FBQ0EsY0FBYywrREFBaUI7QUFDL0I7QUFDQSxDQUFDO0FBR0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL21pc2MvVExPcGFjaXR5Lm1qcz9mZGI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuY29uc3Qgb3BhY2l0eVZhbGlkYXRvciA9IFQubnVtYmVyLmNoZWNrKChuKSA9PiB7XG4gIGlmIChuIDwgMCB8fCBuID4gMSkge1xuICAgIHRocm93IG5ldyBULlZhbGlkYXRpb25FcnJvcihcIk9wYWNpdHkgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDFcIik7XG4gIH1cbn0pO1xuZXhwb3J0IHtcbiAgb3BhY2l0eVZhbGlkYXRvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMT3BhY2l0eS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLOpacity.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLScribble.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/TLScribble.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TL_SCRIBBLE_STATES: () => (/* binding */ TL_SCRIBBLE_STATES),\n/* harmony export */   scribbleValidator: () => (/* binding */ scribbleValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _TLColor_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TLColor.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLColor.mjs\");\n/* harmony import */ var _geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n\n\n\nconst TL_SCRIBBLE_STATES = /* @__PURE__ */ new Set([\"starting\", \"paused\", \"active\", \"stopping\"]);\nconst scribbleValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n  id: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string,\n  points: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.arrayOf(_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.vecModelValidator),\n  size: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.positiveNumber,\n  color: _TLColor_mjs__WEBPACK_IMPORTED_MODULE_1__.canvasUiColorTypeValidator,\n  opacity: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  state: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.setEnum(TL_SCRIBBLE_STATES),\n  delay: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  shrink: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  taper: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean\n});\n\n//# sourceMappingURL=TLScribble.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL1RMU2NyaWJibGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFDO0FBQ3NCO0FBQ0Y7QUFDekQ7QUFDQSwwQkFBMEIsc0RBQVE7QUFDbEMsTUFBTSxzREFBUTtBQUNkLFVBQVUsdURBQVMsQ0FBQyxrRUFBaUI7QUFDckMsUUFBUSw4REFBZ0I7QUFDeEIsU0FBUyxvRUFBMEI7QUFDbkMsV0FBVyxzREFBUTtBQUNuQixTQUFTLHVEQUFTO0FBQ2xCLFNBQVMsc0RBQVE7QUFDakIsVUFBVSxzREFBUTtBQUNsQixTQUFTLHVEQUFTO0FBQ2xCLENBQUM7QUFJQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vbWlzYy9UTFNjcmliYmxlLm1qcz83MTg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgY2FudmFzVWlDb2xvclR5cGVWYWxpZGF0b3IgfSBmcm9tIFwiLi9UTENvbG9yLm1qc1wiO1xuaW1wb3J0IHsgdmVjTW9kZWxWYWxpZGF0b3IgfSBmcm9tIFwiLi9nZW9tZXRyeS10eXBlcy5tanNcIjtcbmNvbnN0IFRMX1NDUklCQkxFX1NUQVRFUyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcInN0YXJ0aW5nXCIsIFwicGF1c2VkXCIsIFwiYWN0aXZlXCIsIFwic3RvcHBpbmdcIl0pO1xuY29uc3Qgc2NyaWJibGVWYWxpZGF0b3IgPSBULm9iamVjdCh7XG4gIGlkOiBULnN0cmluZyxcbiAgcG9pbnRzOiBULmFycmF5T2YodmVjTW9kZWxWYWxpZGF0b3IpLFxuICBzaXplOiBULnBvc2l0aXZlTnVtYmVyLFxuICBjb2xvcjogY2FudmFzVWlDb2xvclR5cGVWYWxpZGF0b3IsXG4gIG9wYWNpdHk6IFQubnVtYmVyLFxuICBzdGF0ZTogVC5zZXRFbnVtKFRMX1NDUklCQkxFX1NUQVRFUyksXG4gIGRlbGF5OiBULm51bWJlcixcbiAgc2hyaW5rOiBULm51bWJlcixcbiAgdGFwZXI6IFQuYm9vbGVhblxufSk7XG5leHBvcnQge1xuICBUTF9TQ1JJQkJMRV9TVEFURVMsXG4gIHNjcmliYmxlVmFsaWRhdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExTY3JpYmJsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLScribble.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   boxModelValidator: () => (/* binding */ boxModelValidator),\n/* harmony export */   vecModelValidator: () => (/* binding */ vecModelValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\nconst vecModelValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n  x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  z: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number.optional()\n});\nconst boxModelValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n  x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number\n});\n\n//# sourceMappingURL=geometry-types.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL2dlb21ldHJ5LXR5cGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7QUFDckMsMEJBQTBCLHNEQUFRO0FBQ2xDLEtBQUssc0RBQVE7QUFDYixLQUFLLHNEQUFRO0FBQ2IsS0FBSyxzREFBUTtBQUNiLENBQUM7QUFDRCwwQkFBMEIsc0RBQVE7QUFDbEMsS0FBSyxzREFBUTtBQUNiLEtBQUssc0RBQVE7QUFDYixLQUFLLHNEQUFRO0FBQ2IsS0FBSyxzREFBUTtBQUNiLENBQUM7QUFJQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vbWlzYy9nZW9tZXRyeS10eXBlcy5tanM/NTZlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmNvbnN0IHZlY01vZGVsVmFsaWRhdG9yID0gVC5vYmplY3Qoe1xuICB4OiBULm51bWJlcixcbiAgeTogVC5udW1iZXIsXG4gIHo6IFQubnVtYmVyLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgYm94TW9kZWxWYWxpZGF0b3IgPSBULm9iamVjdCh7XG4gIHg6IFQubnVtYmVyLFxuICB5OiBULm51bWJlcixcbiAgdzogVC5udW1iZXIsXG4gIGg6IFQubnVtYmVyXG59KTtcbmV4cG9ydCB7XG4gIGJveE1vZGVsVmFsaWRhdG9yLFxuICB2ZWNNb2RlbFZhbGlkYXRvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdlb21ldHJ5LXR5cGVzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   idValidator: () => (/* binding */ idValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\nfunction idValidator(prefix) {\n  return _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string.refine((id) => {\n    if (!id.startsWith(`${prefix}:`)) {\n      throw new Error(`${prefix} ID must start with \"${prefix}:\"`);\n    }\n    return id;\n  });\n}\n\n//# sourceMappingURL=id-validator.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9taXNjL2lkLXZhbGlkYXRvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUM7QUFDckM7QUFDQSxTQUFTLHNEQUFRO0FBQ2pCLDBCQUEwQixPQUFPO0FBQ2pDLHlCQUF5QixRQUFRLHNCQUFzQixPQUFPO0FBQzlEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vbWlzYy9pZC12YWxpZGF0b3IubWpzPzhiZTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5mdW5jdGlvbiBpZFZhbGlkYXRvcihwcmVmaXgpIHtcbiAgcmV0dXJuIFQuc3RyaW5nLnJlZmluZSgoaWQpID0+IHtcbiAgICBpZiAoIWlkLnN0YXJ0c1dpdGgoYCR7cHJlZml4fTpgKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3ByZWZpeH0gSUQgbXVzdCBzdGFydCB3aXRoIFwiJHtwcmVmaXh9OlwiYCk7XG4gICAgfVxuICAgIHJldHVybiBpZDtcbiAgfSk7XG59XG5leHBvcnQge1xuICBpZFZhbGlkYXRvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlkLXZhbGlkYXRvci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLAsset.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLAsset.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AssetRecordType: () => (/* binding */ AssetRecordType),\n/* harmony export */   assetMigrations: () => (/* binding */ assetMigrations),\n/* harmony export */   assetValidator: () => (/* binding */ assetValidator),\n/* harmony export */   assetVersions: () => (/* binding */ assetVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _assets_TLBookmarkAsset_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../assets/TLBookmarkAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBookmarkAsset.mjs\");\n/* harmony import */ var _assets_TLImageAsset_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../assets/TLImageAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLImageAsset.mjs\");\n/* harmony import */ var _assets_TLVideoAsset_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../assets/TLVideoAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLVideoAsset.mjs\");\n\n\n\n\n\nconst assetValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"asset\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.union(\"type\", {\n    image: _assets_TLImageAsset_mjs__WEBPACK_IMPORTED_MODULE_3__.imageAssetValidator,\n    video: _assets_TLVideoAsset_mjs__WEBPACK_IMPORTED_MODULE_4__.videoAssetValidator,\n    bookmark: _assets_TLBookmarkAsset_mjs__WEBPACK_IMPORTED_MODULE_2__.bookmarkAssetValidator\n  })\n);\nconst assetVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.asset\", {\n  AddMeta: 1\n});\nconst assetMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.asset\",\n  recordType: \"asset\",\n  sequence: [\n    {\n      id: assetVersions.AddMeta,\n      up: (record) => {\n        ;\n        record.meta = {};\n      }\n    }\n  ]\n});\nconst AssetRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"asset\", {\n  validator: assetValidator,\n  scope: \"document\"\n}).withDefaultProperties(() => ({\n  meta: {}\n}));\n\n//# sourceMappingURL=TLAsset.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMQXNzZXQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUl1QjtBQUNjO0FBQ2tDO0FBQ047QUFDQTtBQUNqRSx1QkFBdUIscURBQU87QUFDOUI7QUFDQSxFQUFFLHFEQUFPO0FBQ1QsV0FBVyx5RUFBbUI7QUFDOUIsV0FBVyx5RUFBbUI7QUFDOUIsY0FBYywrRUFBc0I7QUFDcEMsR0FBRztBQUNIO0FBQ0Esc0JBQXNCLGlFQUFrQjtBQUN4QztBQUNBLENBQUM7QUFDRCx3QkFBd0IsNEVBQTZCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsd0JBQXdCLCtEQUFnQjtBQUN4QztBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQU1DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMQXNzZXQubWpzPzc5YmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3JlYXRlTWlncmF0aW9uSWRzLFxuICBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlUmVjb3JkVHlwZVxufSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBib29rbWFya0Fzc2V0VmFsaWRhdG9yIH0gZnJvbSBcIi4uL2Fzc2V0cy9UTEJvb2ttYXJrQXNzZXQubWpzXCI7XG5pbXBvcnQgeyBpbWFnZUFzc2V0VmFsaWRhdG9yIH0gZnJvbSBcIi4uL2Fzc2V0cy9UTEltYWdlQXNzZXQubWpzXCI7XG5pbXBvcnQgeyB2aWRlb0Fzc2V0VmFsaWRhdG9yIH0gZnJvbSBcIi4uL2Fzc2V0cy9UTFZpZGVvQXNzZXQubWpzXCI7XG5jb25zdCBhc3NldFZhbGlkYXRvciA9IFQubW9kZWwoXG4gIFwiYXNzZXRcIixcbiAgVC51bmlvbihcInR5cGVcIiwge1xuICAgIGltYWdlOiBpbWFnZUFzc2V0VmFsaWRhdG9yLFxuICAgIHZpZGVvOiB2aWRlb0Fzc2V0VmFsaWRhdG9yLFxuICAgIGJvb2ttYXJrOiBib29rbWFya0Fzc2V0VmFsaWRhdG9yXG4gIH0pXG4pO1xuY29uc3QgYXNzZXRWZXJzaW9ucyA9IGNyZWF0ZU1pZ3JhdGlvbklkcyhcImNvbS50bGRyYXcuYXNzZXRcIiwge1xuICBBZGRNZXRhOiAxXG59KTtcbmNvbnN0IGFzc2V0TWlncmF0aW9ucyA9IGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2VJZDogXCJjb20udGxkcmF3LmFzc2V0XCIsXG4gIHJlY29yZFR5cGU6IFwiYXNzZXRcIixcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogYXNzZXRWZXJzaW9ucy5BZGRNZXRhLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgO1xuICAgICAgICByZWNvcmQubWV0YSA9IHt9O1xuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5jb25zdCBBc3NldFJlY29yZFR5cGUgPSBjcmVhdGVSZWNvcmRUeXBlKFwiYXNzZXRcIiwge1xuICB2YWxpZGF0b3I6IGFzc2V0VmFsaWRhdG9yLFxuICBzY29wZTogXCJkb2N1bWVudFwiXG59KS53aXRoRGVmYXVsdFByb3BlcnRpZXMoKCkgPT4gKHtcbiAgbWV0YToge31cbn0pKTtcbmV4cG9ydCB7XG4gIEFzc2V0UmVjb3JkVHlwZSxcbiAgYXNzZXRNaWdyYXRpb25zLFxuICBhc3NldFZhbGlkYXRvcixcbiAgYXNzZXRWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMQXNzZXQubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLAsset.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBindingId: () => (/* binding */ createBindingId),\n/* harmony export */   createBindingPropsMigrationIds: () => (/* binding */ createBindingPropsMigrationIds),\n/* harmony export */   createBindingPropsMigrationSequence: () => (/* binding */ createBindingPropsMigrationSequence),\n/* harmony export */   createBindingRecordType: () => (/* binding */ createBindingRecordType),\n/* harmony export */   isBinding: () => (/* binding */ isBinding),\n/* harmony export */   isBindingId: () => (/* binding */ isBindingId),\n/* harmony export */   rootBindingMigrations: () => (/* binding */ rootBindingMigrations),\n/* harmony export */   rootBindingVersions: () => (/* binding */ rootBindingVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! nanoid */ \"(ssr)/./node_modules/@tldraw/tlschema/node_modules/nanoid/index.js\");\n/* harmony import */ var _bindings_TLBaseBinding_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../bindings/TLBaseBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/bindings/TLBaseBinding.mjs\");\n\n\n\n\n\nconst rootBindingVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.binding\", {});\nconst rootBindingMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.binding\",\n  recordType: \"binding\",\n  sequence: []\n});\nfunction isBinding(record) {\n  if (!record)\n    return false;\n  return record.typeName === \"binding\";\n}\nfunction isBindingId(id) {\n  if (!id)\n    return false;\n  return id.startsWith(\"binding:\");\n}\nfunction createBindingId(id) {\n  return `binding:${id ?? (0,nanoid__WEBPACK_IMPORTED_MODULE_4__.nanoid)()}`;\n}\nfunction createBindingPropsMigrationSequence(migrations) {\n  return migrations;\n}\nfunction createBindingPropsMigrationIds(bindingType, ids) {\n  return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.mapObjectMapValues)(ids, (_k, v) => `com.tldraw.binding.${bindingType}/${v}`);\n}\nfunction createBindingRecordType(bindings) {\n  return (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"binding\", {\n    scope: \"document\",\n    validator: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.model(\n      \"binding\",\n      _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.union(\n        \"type\",\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.mapObjectMapValues)(\n          bindings,\n          (type, { props, meta }) => (0,_bindings_TLBaseBinding_mjs__WEBPACK_IMPORTED_MODULE_3__.createBindingValidator)(type, props, meta)\n        )\n      )\n    )\n  }).withDefaultProperties(() => ({\n    meta: {}\n  }));\n}\n\n//# sourceMappingURL=TLBinding.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMQmluZGluZy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUl1QjtBQUM0QjtBQUNkO0FBQ0w7QUFDdUM7QUFDdkUsNEJBQTRCLGlFQUFrQix5QkFBeUI7QUFDdkUsOEJBQThCLDRFQUE2QjtBQUMzRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixNQUFNLDhDQUFNLEdBQUc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaUVBQWtCLHVDQUF1QyxZQUFZLEdBQUcsRUFBRTtBQUNuRjtBQUNBO0FBQ0EsU0FBUywrREFBZ0I7QUFDekI7QUFDQSxlQUFlLHFEQUFPO0FBQ3RCO0FBQ0EsTUFBTSxxREFBTztBQUNiO0FBQ0EsUUFBUSxpRUFBa0I7QUFDMUI7QUFDQSxtQkFBbUIsYUFBYSxLQUFLLG1GQUFzQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFVRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vcmVjb3Jkcy9UTEJpbmRpbmcubWpzP2M1YzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3JlYXRlTWlncmF0aW9uSWRzLFxuICBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlUmVjb3JkVHlwZVxufSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgbWFwT2JqZWN0TWFwVmFsdWVzIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSBcIm5hbm9pZFwiO1xuaW1wb3J0IHsgY3JlYXRlQmluZGluZ1ZhbGlkYXRvciB9IGZyb20gXCIuLi9iaW5kaW5ncy9UTEJhc2VCaW5kaW5nLm1qc1wiO1xuY29uc3Qgcm9vdEJpbmRpbmdWZXJzaW9ucyA9IGNyZWF0ZU1pZ3JhdGlvbklkcyhcImNvbS50bGRyYXcuYmluZGluZ1wiLCB7fSk7XG5jb25zdCByb290QmluZGluZ01pZ3JhdGlvbnMgPSBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlSWQ6IFwiY29tLnRsZHJhdy5iaW5kaW5nXCIsXG4gIHJlY29yZFR5cGU6IFwiYmluZGluZ1wiLFxuICBzZXF1ZW5jZTogW11cbn0pO1xuZnVuY3Rpb24gaXNCaW5kaW5nKHJlY29yZCkge1xuICBpZiAoIXJlY29yZClcbiAgICByZXR1cm4gZmFsc2U7XG4gIHJldHVybiByZWNvcmQudHlwZU5hbWUgPT09IFwiYmluZGluZ1wiO1xufVxuZnVuY3Rpb24gaXNCaW5kaW5nSWQoaWQpIHtcbiAgaWYgKCFpZClcbiAgICByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBpZC5zdGFydHNXaXRoKFwiYmluZGluZzpcIik7XG59XG5mdW5jdGlvbiBjcmVhdGVCaW5kaW5nSWQoaWQpIHtcbiAgcmV0dXJuIGBiaW5kaW5nOiR7aWQgPz8gbmFub2lkKCl9YDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUJpbmRpbmdQcm9wc01pZ3JhdGlvblNlcXVlbmNlKG1pZ3JhdGlvbnMpIHtcbiAgcmV0dXJuIG1pZ3JhdGlvbnM7XG59XG5mdW5jdGlvbiBjcmVhdGVCaW5kaW5nUHJvcHNNaWdyYXRpb25JZHMoYmluZGluZ1R5cGUsIGlkcykge1xuICByZXR1cm4gbWFwT2JqZWN0TWFwVmFsdWVzKGlkcywgKF9rLCB2KSA9PiBgY29tLnRsZHJhdy5iaW5kaW5nLiR7YmluZGluZ1R5cGV9LyR7dn1gKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUJpbmRpbmdSZWNvcmRUeXBlKGJpbmRpbmdzKSB7XG4gIHJldHVybiBjcmVhdGVSZWNvcmRUeXBlKFwiYmluZGluZ1wiLCB7XG4gICAgc2NvcGU6IFwiZG9jdW1lbnRcIixcbiAgICB2YWxpZGF0b3I6IFQubW9kZWwoXG4gICAgICBcImJpbmRpbmdcIixcbiAgICAgIFQudW5pb24oXG4gICAgICAgIFwidHlwZVwiLFxuICAgICAgICBtYXBPYmplY3RNYXBWYWx1ZXMoXG4gICAgICAgICAgYmluZGluZ3MsXG4gICAgICAgICAgKHR5cGUsIHsgcHJvcHMsIG1ldGEgfSkgPT4gY3JlYXRlQmluZGluZ1ZhbGlkYXRvcih0eXBlLCBwcm9wcywgbWV0YSlcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfSkud2l0aERlZmF1bHRQcm9wZXJ0aWVzKCgpID0+ICh7XG4gICAgbWV0YToge31cbiAgfSkpO1xufVxuZXhwb3J0IHtcbiAgY3JlYXRlQmluZGluZ0lkLFxuICBjcmVhdGVCaW5kaW5nUHJvcHNNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZUJpbmRpbmdQcm9wc01pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVCaW5kaW5nUmVjb3JkVHlwZSxcbiAgaXNCaW5kaW5nLFxuICBpc0JpbmRpbmdJZCxcbiAgcm9vdEJpbmRpbmdNaWdyYXRpb25zLFxuICByb290QmluZGluZ1ZlcnNpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExCaW5kaW5nLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CameraRecordType: () => (/* binding */ CameraRecordType),\n/* harmony export */   cameraMigrations: () => (/* binding */ cameraMigrations),\n/* harmony export */   cameraValidator: () => (/* binding */ cameraValidator),\n/* harmony export */   cameraVersions: () => (/* binding */ cameraVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n\n\n\nconst cameraValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"camera\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"camera\"),\n    id: (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__.idValidator)(\"camera\"),\n    x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    z: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.jsonValue\n  })\n);\nconst cameraVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.camera\", {\n  AddMeta: 1\n});\nconst cameraMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.camera\",\n  recordType: \"camera\",\n  sequence: [\n    {\n      id: cameraVersions.AddMeta,\n      up: (record) => {\n        ;\n        record.meta = {};\n      }\n    }\n  ]\n});\nconst CameraRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"camera\", {\n  validator: cameraValidator,\n  scope: \"session\"\n}).withDefaultProperties(\n  () => ({\n    x: 0,\n    y: 0,\n    z: 1,\n    meta: {}\n  })\n);\n\n//# sourceMappingURL=TLCamera.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMQ2FtZXJhLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBSXVCO0FBQ2M7QUFDa0I7QUFDdkQsd0JBQXdCLHFEQUFPO0FBQy9CO0FBQ0EsRUFBRSxzREFBUTtBQUNWLGNBQWMsdURBQVM7QUFDdkIsUUFBUSxtRUFBVztBQUNuQixPQUFPLHNEQUFRO0FBQ2YsT0FBTyxzREFBUTtBQUNmLE9BQU8sc0RBQVE7QUFDZixVQUFVLHlEQUFXO0FBQ3JCLEdBQUc7QUFDSDtBQUNBLHVCQUF1QixpRUFBa0I7QUFDekM7QUFDQSxDQUFDO0FBQ0QseUJBQXlCLDRFQUE2QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHlCQUF5QiwrREFBZ0I7QUFDekM7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBTUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3JlY29yZHMvVExDYW1lcmEubWpzPzg2MjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3JlYXRlTWlncmF0aW9uSWRzLFxuICBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlUmVjb3JkVHlwZVxufSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBpZFZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL2lkLXZhbGlkYXRvci5tanNcIjtcbmNvbnN0IGNhbWVyYVZhbGlkYXRvciA9IFQubW9kZWwoXG4gIFwiY2FtZXJhXCIsXG4gIFQub2JqZWN0KHtcbiAgICB0eXBlTmFtZTogVC5saXRlcmFsKFwiY2FtZXJhXCIpLFxuICAgIGlkOiBpZFZhbGlkYXRvcihcImNhbWVyYVwiKSxcbiAgICB4OiBULm51bWJlcixcbiAgICB5OiBULm51bWJlcixcbiAgICB6OiBULm51bWJlcixcbiAgICBtZXRhOiBULmpzb25WYWx1ZVxuICB9KVxuKTtcbmNvbnN0IGNhbWVyYVZlcnNpb25zID0gY3JlYXRlTWlncmF0aW9uSWRzKFwiY29tLnRsZHJhdy5jYW1lcmFcIiwge1xuICBBZGRNZXRhOiAxXG59KTtcbmNvbnN0IGNhbWVyYU1pZ3JhdGlvbnMgPSBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlSWQ6IFwiY29tLnRsZHJhdy5jYW1lcmFcIixcbiAgcmVjb3JkVHlwZTogXCJjYW1lcmFcIixcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogY2FtZXJhVmVyc2lvbnMuQWRkTWV0YSxcbiAgICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIDtcbiAgICAgICAgcmVjb3JkLm1ldGEgPSB7fTtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuY29uc3QgQ2FtZXJhUmVjb3JkVHlwZSA9IGNyZWF0ZVJlY29yZFR5cGUoXCJjYW1lcmFcIiwge1xuICB2YWxpZGF0b3I6IGNhbWVyYVZhbGlkYXRvcixcbiAgc2NvcGU6IFwic2Vzc2lvblwiXG59KS53aXRoRGVmYXVsdFByb3BlcnRpZXMoXG4gICgpID0+ICh7XG4gICAgeDogMCxcbiAgICB5OiAwLFxuICAgIHo6IDEsXG4gICAgbWV0YToge31cbiAgfSlcbik7XG5leHBvcnQge1xuICBDYW1lcmFSZWNvcmRUeXBlLFxuICBjYW1lcmFNaWdyYXRpb25zLFxuICBjYW1lcmFWYWxpZGF0b3IsXG4gIGNhbWVyYVZlcnNpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExDYW1lcmEubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLCamera.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLDocument.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLDocument.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DocumentRecordType: () => (/* binding */ DocumentRecordType),\n/* harmony export */   TLDOCUMENT_ID: () => (/* binding */ TLDOCUMENT_ID),\n/* harmony export */   documentMigrations: () => (/* binding */ documentMigrations),\n/* harmony export */   documentValidator: () => (/* binding */ documentValidator),\n/* harmony export */   documentVersions: () => (/* binding */ documentVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\n\nconst documentValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"document\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"document\"),\n    id: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"document:document\"),\n    gridSize: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    name: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.jsonValue\n  })\n);\nconst documentVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.document\", {\n  AddName: 1,\n  AddMeta: 2\n});\nconst documentMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.document\",\n  recordType: \"document\",\n  sequence: [\n    {\n      id: documentVersions.AddName,\n      up: (document) => {\n        ;\n        document.name = \"\";\n      },\n      down: (document) => {\n        delete document.name;\n      }\n    },\n    {\n      id: documentVersions.AddMeta,\n      up: (record) => {\n        ;\n        record.meta = {};\n      }\n    }\n  ]\n});\nconst DocumentRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"document\", {\n  validator: documentValidator,\n  scope: \"document\"\n}).withDefaultProperties(\n  () => ({\n    gridSize: 10,\n    name: \"\",\n    meta: {}\n  })\n);\nconst TLDOCUMENT_ID = DocumentRecordType.createId(\"document\");\n\n//# sourceMappingURL=TLDocument.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMRG9jdW1lbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFJdUI7QUFDYztBQUNyQywwQkFBMEIscURBQU87QUFDakM7QUFDQSxFQUFFLHNEQUFRO0FBQ1YsY0FBYyx1REFBUztBQUN2QixRQUFRLHVEQUFTO0FBQ2pCLGNBQWMsc0RBQVE7QUFDdEIsVUFBVSxzREFBUTtBQUNsQixVQUFVLHlEQUFXO0FBQ3JCLEdBQUc7QUFDSDtBQUNBLHlCQUF5QixpRUFBa0I7QUFDM0M7QUFDQTtBQUNBLENBQUM7QUFDRCwyQkFBMkIsNEVBQTZCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsMkJBQTJCLCtEQUFnQjtBQUMzQztBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFPRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vcmVjb3Jkcy9UTERvY3VtZW50Lm1qcz80MmQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGNyZWF0ZU1pZ3JhdGlvbklkcyxcbiAgY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2UsXG4gIGNyZWF0ZVJlY29yZFR5cGVcbn0gZnJvbSBcIkB0bGRyYXcvc3RvcmVcIjtcbmltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuY29uc3QgZG9jdW1lbnRWYWxpZGF0b3IgPSBULm1vZGVsKFxuICBcImRvY3VtZW50XCIsXG4gIFQub2JqZWN0KHtcbiAgICB0eXBlTmFtZTogVC5saXRlcmFsKFwiZG9jdW1lbnRcIiksXG4gICAgaWQ6IFQubGl0ZXJhbChcImRvY3VtZW50OmRvY3VtZW50XCIpLFxuICAgIGdyaWRTaXplOiBULm51bWJlcixcbiAgICBuYW1lOiBULnN0cmluZyxcbiAgICBtZXRhOiBULmpzb25WYWx1ZVxuICB9KVxuKTtcbmNvbnN0IGRvY3VtZW50VmVyc2lvbnMgPSBjcmVhdGVNaWdyYXRpb25JZHMoXCJjb20udGxkcmF3LmRvY3VtZW50XCIsIHtcbiAgQWRkTmFtZTogMSxcbiAgQWRkTWV0YTogMlxufSk7XG5jb25zdCBkb2N1bWVudE1pZ3JhdGlvbnMgPSBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlSWQ6IFwiY29tLnRsZHJhdy5kb2N1bWVudFwiLFxuICByZWNvcmRUeXBlOiBcImRvY3VtZW50XCIsXG4gIHNlcXVlbmNlOiBbXG4gICAge1xuICAgICAgaWQ6IGRvY3VtZW50VmVyc2lvbnMuQWRkTmFtZSxcbiAgICAgIHVwOiAoZG9jdW1lbnQpID0+IHtcbiAgICAgICAgO1xuICAgICAgICBkb2N1bWVudC5uYW1lID0gXCJcIjtcbiAgICAgIH0sXG4gICAgICBkb3duOiAoZG9jdW1lbnQpID0+IHtcbiAgICAgICAgZGVsZXRlIGRvY3VtZW50Lm5hbWU7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogZG9jdW1lbnRWZXJzaW9ucy5BZGRNZXRhLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgO1xuICAgICAgICByZWNvcmQubWV0YSA9IHt9O1xuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5jb25zdCBEb2N1bWVudFJlY29yZFR5cGUgPSBjcmVhdGVSZWNvcmRUeXBlKFwiZG9jdW1lbnRcIiwge1xuICB2YWxpZGF0b3I6IGRvY3VtZW50VmFsaWRhdG9yLFxuICBzY29wZTogXCJkb2N1bWVudFwiXG59KS53aXRoRGVmYXVsdFByb3BlcnRpZXMoXG4gICgpID0+ICh7XG4gICAgZ3JpZFNpemU6IDEwLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgbWV0YToge31cbiAgfSlcbik7XG5jb25zdCBUTERPQ1VNRU5UX0lEID0gRG9jdW1lbnRSZWNvcmRUeXBlLmNyZWF0ZUlkKFwiZG9jdW1lbnRcIik7XG5leHBvcnQge1xuICBEb2N1bWVudFJlY29yZFR5cGUsXG4gIFRMRE9DVU1FTlRfSUQsXG4gIGRvY3VtZW50TWlncmF0aW9ucyxcbiAgZG9jdW1lbnRWYWxpZGF0b3IsXG4gIGRvY3VtZW50VmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTERvY3VtZW50Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLDocument.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TLINSTANCE_ID: () => (/* binding */ TLINSTANCE_ID),\n/* harmony export */   createInstanceRecordType: () => (/* binding */ createInstanceRecordType),\n/* harmony export */   instanceIdValidator: () => (/* binding */ instanceIdValidator),\n/* harmony export */   instanceMigrations: () => (/* binding */ instanceMigrations),\n/* harmony export */   instanceVersions: () => (/* binding */ instanceVersions),\n/* harmony export */   pluckPreservingValues: () => (/* binding */ pluckPreservingValues),\n/* harmony export */   shouldKeyBePreservedBetweenSessions: () => (/* binding */ shouldKeyBePreservedBetweenSessions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n/* harmony import */ var _misc_TLCursor_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../misc/TLCursor.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLCursor.mjs\");\n/* harmony import */ var _misc_TLOpacity_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../misc/TLOpacity.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLOpacity.mjs\");\n/* harmony import */ var _misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../misc/TLScribble.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLScribble.mjs\");\n/* harmony import */ var _TLPage_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./TLPage.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs\");\n\n\n\n\n\n\n\n\n\nconst shouldKeyBePreservedBetweenSessions = {\n  // This object defines keys that should be preserved across calls to loadSnapshot()\n  id: false,\n  // meta\n  typeName: false,\n  // meta\n  currentPageId: false,\n  // does not preserve because who knows if the page still exists\n  opacityForNextShape: false,\n  // does not preserve because it's a temporary state\n  stylesForNextShape: false,\n  // does not preserve because it's a temporary state\n  followingUserId: false,\n  // does not preserve because it's a temporary state\n  highlightedUserIds: false,\n  // does not preserve because it's a temporary state\n  brush: false,\n  // does not preserve because it's a temporary state\n  cursor: false,\n  // does not preserve because it's a temporary state\n  scribbles: false,\n  // does not preserve because it's a temporary state\n  isFocusMode: true,\n  // preserves because it's a user preference\n  isDebugMode: true,\n  // preserves because it's a user preference\n  isToolLocked: true,\n  // preserves because it's a user preference\n  exportBackground: true,\n  // preserves because it's a user preference\n  screenBounds: true,\n  // preserves because it's capturing the user's screen state\n  insets: true,\n  // preserves because it's capturing the user's screen state\n  zoomBrush: false,\n  // does not preserve because it's a temporary state\n  chatMessage: false,\n  // does not preserve because it's a temporary state\n  isChatting: false,\n  // does not preserve because it's a temporary state\n  isPenMode: false,\n  // does not preserve because it's a temporary state\n  isGridMode: true,\n  // preserves because it's a user preference\n  isFocused: true,\n  // preserves because obviously\n  devicePixelRatio: true,\n  // preserves because it captures the user's screen state\n  isCoarsePointer: true,\n  // preserves because it captures the user's screen state\n  isHoveringCanvas: false,\n  // does not preserve because it's a temporary state\n  openMenus: false,\n  // does not preserve because it's a temporary state\n  isChangingStyle: false,\n  // does not preserve because it's a temporary state\n  isReadonly: true,\n  // preserves because it's a config option\n  meta: false,\n  // does not preserve because who knows what's in there, leave it up to sdk users to save and reinstate\n  duplicateProps: false\n  //\n};\nconst pluckPreservingValues = (val) => val ? (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.filterEntries)(val, (key) => {\n  return shouldKeyBePreservedBetweenSessions[key];\n}) : null;\nconst instanceIdValidator = (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_4__.idValidator)(\"instance\");\nfunction createInstanceRecordType(stylesById) {\n  const stylesForNextShapeValidators = {};\n  for (const [id, style] of stylesById) {\n    stylesForNextShapeValidators[id] = _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.optional(style);\n  }\n  const instanceTypeValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.model(\n    \"instance\",\n    _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.object({\n      typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.literal(\"instance\"),\n      id: (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_4__.idValidator)(\"instance\"),\n      currentPageId: _TLPage_mjs__WEBPACK_IMPORTED_MODULE_8__.pageIdValidator,\n      followingUserId: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.string.nullable(),\n      brush: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_3__.boxModelValidator.nullable(),\n      opacityForNextShape: _misc_TLOpacity_mjs__WEBPACK_IMPORTED_MODULE_6__.opacityValidator,\n      stylesForNextShape: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.object(stylesForNextShapeValidators),\n      cursor: _misc_TLCursor_mjs__WEBPACK_IMPORTED_MODULE_5__.cursorValidator,\n      scribbles: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.arrayOf(_misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_7__.scribbleValidator),\n      isFocusMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      isDebugMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      isToolLocked: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      exportBackground: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      screenBounds: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_3__.boxModelValidator,\n      insets: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.arrayOf(_tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean),\n      zoomBrush: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_3__.boxModelValidator.nullable(),\n      isPenMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      isGridMode: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      chatMessage: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.string,\n      isChatting: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      highlightedUserIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.arrayOf(_tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.string),\n      isFocused: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      devicePixelRatio: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.number,\n      isCoarsePointer: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      isHoveringCanvas: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean.nullable(),\n      openMenus: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.arrayOf(_tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.string),\n      isChangingStyle: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      isReadonly: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.boolean,\n      meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.jsonValue,\n      duplicateProps: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.object({\n        shapeIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.arrayOf((0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_4__.idValidator)(\"shape\")),\n        offset: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.object({\n          x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.number,\n          y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.number\n        })\n      }).nullable()\n    })\n  );\n  return (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"instance\", {\n    validator: instanceTypeValidator,\n    scope: \"session\",\n    ephemeralKeys: {\n      currentPageId: false,\n      meta: false,\n      followingUserId: true,\n      opacityForNextShape: true,\n      stylesForNextShape: true,\n      brush: true,\n      cursor: true,\n      scribbles: true,\n      isFocusMode: true,\n      isDebugMode: true,\n      isToolLocked: true,\n      exportBackground: true,\n      screenBounds: true,\n      insets: true,\n      zoomBrush: true,\n      isPenMode: true,\n      isGridMode: true,\n      chatMessage: true,\n      isChatting: true,\n      highlightedUserIds: true,\n      isFocused: true,\n      devicePixelRatio: true,\n      isCoarsePointer: true,\n      isHoveringCanvas: true,\n      openMenus: true,\n      isChangingStyle: true,\n      isReadonly: true,\n      duplicateProps: true\n    }\n  }).withDefaultProperties(\n    () => ({\n      followingUserId: null,\n      opacityForNextShape: 1,\n      stylesForNextShape: {},\n      brush: null,\n      scribbles: [],\n      cursor: {\n        type: \"default\",\n        rotation: 0\n      },\n      isFocusMode: false,\n      exportBackground: false,\n      isDebugMode: \"development\" === \"development\",\n      isToolLocked: false,\n      screenBounds: { x: 0, y: 0, w: 1080, h: 720 },\n      insets: [false, false, false, false],\n      zoomBrush: null,\n      isGridMode: false,\n      isPenMode: false,\n      chatMessage: \"\",\n      isChatting: false,\n      highlightedUserIds: [],\n      isFocused: false,\n      devicePixelRatio: typeof window === \"undefined\" ? 1 : window.devicePixelRatio,\n      isCoarsePointer: false,\n      isHoveringCanvas: null,\n      openMenus: [],\n      isChangingStyle: false,\n      isReadonly: false,\n      meta: {},\n      duplicateProps: null\n    })\n  );\n}\nconst instanceVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.instance\", {\n  AddTransparentExportBgs: 1,\n  RemoveDialog: 2,\n  AddToolLockMode: 3,\n  RemoveExtraPropsForNextShape: 4,\n  AddLabelColor: 5,\n  AddFollowingUserId: 6,\n  RemoveAlignJustify: 7,\n  AddZoom: 8,\n  AddVerticalAlign: 9,\n  AddScribbleDelay: 10,\n  RemoveUserId: 11,\n  AddIsPenModeAndIsGridMode: 12,\n  HoistOpacity: 13,\n  AddChat: 14,\n  AddHighlightedUserIds: 15,\n  ReplacePropsForNextShapeWithStylesForNextShape: 16,\n  AddMeta: 17,\n  RemoveCursorColor: 18,\n  AddLonelyProperties: 19,\n  ReadOnlyReadonly: 20,\n  AddHoveringCanvas: 21,\n  AddScribbles: 22,\n  AddInset: 23,\n  AddDuplicateProps: 24,\n  RemoveCanMoveCamera: 25\n});\nconst instanceMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.instance\",\n  recordType: \"instance\",\n  sequence: [\n    {\n      id: instanceVersions.AddTransparentExportBgs,\n      up: (instance) => {\n        return { ...instance, exportBackground: true };\n      }\n    },\n    {\n      id: instanceVersions.RemoveDialog,\n      up: ({ dialog: _, ...instance }) => {\n        return instance;\n      }\n    },\n    {\n      id: instanceVersions.AddToolLockMode,\n      up: (instance) => {\n        return { ...instance, isToolLocked: false };\n      }\n    },\n    {\n      id: instanceVersions.RemoveExtraPropsForNextShape,\n      up: ({ propsForNextShape, ...instance }) => {\n        return {\n          ...instance,\n          propsForNextShape: Object.fromEntries(\n            Object.entries(propsForNextShape).filter(\n              ([key]) => [\n                \"color\",\n                \"labelColor\",\n                \"dash\",\n                \"fill\",\n                \"size\",\n                \"font\",\n                \"align\",\n                \"verticalAlign\",\n                \"icon\",\n                \"geo\",\n                \"arrowheadStart\",\n                \"arrowheadEnd\",\n                \"spline\"\n              ].includes(key)\n            )\n          )\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddLabelColor,\n      up: ({ propsForNextShape, ...instance }) => {\n        return {\n          ...instance,\n          propsForNextShape: {\n            ...propsForNextShape,\n            labelColor: \"black\"\n          }\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddFollowingUserId,\n      up: (instance) => {\n        return { ...instance, followingUserId: null };\n      }\n    },\n    {\n      id: instanceVersions.RemoveAlignJustify,\n      up: (instance) => {\n        let newAlign = instance.propsForNextShape.align;\n        if (newAlign === \"justify\") {\n          newAlign = \"start\";\n        }\n        return {\n          ...instance,\n          propsForNextShape: {\n            ...instance.propsForNextShape,\n            align: newAlign\n          }\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddZoom,\n      up: (instance) => {\n        return { ...instance, zoomBrush: null };\n      }\n    },\n    {\n      id: instanceVersions.AddVerticalAlign,\n      up: (instance) => {\n        return {\n          ...instance,\n          propsForNextShape: {\n            ...instance.propsForNextShape,\n            verticalAlign: \"middle\"\n          }\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddScribbleDelay,\n      up: (instance) => {\n        if (instance.scribble !== null) {\n          return { ...instance, scribble: { ...instance.scribble, delay: 0 } };\n        }\n        return { ...instance };\n      }\n    },\n    {\n      id: instanceVersions.RemoveUserId,\n      up: ({ userId: _, ...instance }) => {\n        return instance;\n      }\n    },\n    {\n      id: instanceVersions.AddIsPenModeAndIsGridMode,\n      up: (instance) => {\n        return { ...instance, isPenMode: false, isGridMode: false };\n      }\n    },\n    {\n      id: instanceVersions.HoistOpacity,\n      up: ({ propsForNextShape: { opacity, ...propsForNextShape }, ...instance }) => {\n        return { ...instance, opacityForNextShape: Number(opacity ?? \"1\"), propsForNextShape };\n      }\n    },\n    {\n      id: instanceVersions.AddChat,\n      up: (instance) => {\n        return { ...instance, chatMessage: \"\", isChatting: false };\n      }\n    },\n    {\n      id: instanceVersions.AddHighlightedUserIds,\n      up: (instance) => {\n        return { ...instance, highlightedUserIds: [] };\n      }\n    },\n    {\n      id: instanceVersions.ReplacePropsForNextShapeWithStylesForNextShape,\n      up: ({ propsForNextShape: _, ...instance }) => {\n        return { ...instance, stylesForNextShape: {} };\n      }\n    },\n    {\n      id: instanceVersions.AddMeta,\n      up: (record) => {\n        return {\n          ...record,\n          meta: {}\n        };\n      }\n    },\n    {\n      id: instanceVersions.RemoveCursorColor,\n      up: (record) => {\n        const { color: _, ...cursor } = record.cursor;\n        return {\n          ...record,\n          cursor\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddLonelyProperties,\n      up: (record) => {\n        return {\n          ...record,\n          canMoveCamera: true,\n          isFocused: false,\n          devicePixelRatio: 1,\n          isCoarsePointer: false,\n          openMenus: [],\n          isChangingStyle: false,\n          isReadOnly: false\n        };\n      }\n    },\n    {\n      id: instanceVersions.ReadOnlyReadonly,\n      up: ({ isReadOnly: _isReadOnly, ...record }) => {\n        return {\n          ...record,\n          isReadonly: _isReadOnly\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddHoveringCanvas,\n      up: (record) => {\n        return {\n          ...record,\n          isHoveringCanvas: null\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddScribbles,\n      up: ({ scribble: _, ...record }) => {\n        return {\n          ...record,\n          scribbles: []\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddInset,\n      up: (record) => {\n        return {\n          ...record,\n          insets: [false, false, false, false]\n        };\n      },\n      down: ({ insets: _, ...record }) => {\n        return {\n          ...record\n        };\n      }\n    },\n    {\n      id: instanceVersions.AddDuplicateProps,\n      up: (record) => {\n        return {\n          ...record,\n          duplicateProps: null\n        };\n      },\n      down: ({ duplicateProps: _, ...record }) => {\n        return {\n          ...record\n        };\n      }\n    },\n    {\n      id: instanceVersions.RemoveCanMoveCamera,\n      up: ({ canMoveCamera: _, ...record }) => {\n        return {\n          ...record\n        };\n      },\n      down: (instance) => {\n        return { ...instance, canMoveCamera: true };\n      }\n    }\n  ]\n});\nconst TLINSTANCE_ID = \"instance:instance\";\n\n//# sourceMappingURL=TLInstance.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMSW5zdGFuY2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJdUI7QUFDdUI7QUFDVDtBQUMwQjtBQUNSO0FBQ0E7QUFDRTtBQUNFO0FBQ1o7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDREQUFhO0FBQzFEO0FBQ0EsQ0FBQztBQUNELDRCQUE0QixtRUFBVztBQUN2QztBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsd0RBQVU7QUFDakQ7QUFDQSxnQ0FBZ0MscURBQU87QUFDdkM7QUFDQSxJQUFJLHNEQUFRO0FBQ1osZ0JBQWdCLHVEQUFTO0FBQ3pCLFVBQVUsbUVBQVc7QUFDckIscUJBQXFCLHdEQUFlO0FBQ3BDLHVCQUF1QixzREFBUTtBQUMvQixhQUFhLHVFQUFpQjtBQUM5QiwyQkFBMkIsaUVBQWdCO0FBQzNDLDBCQUEwQixzREFBUTtBQUNsQyxjQUFjLCtEQUFlO0FBQzdCLGlCQUFpQix1REFBUyxDQUFDLG1FQUFpQjtBQUM1QyxtQkFBbUIsdURBQVM7QUFDNUIsbUJBQW1CLHVEQUFTO0FBQzVCLG9CQUFvQix1REFBUztBQUM3Qix3QkFBd0IsdURBQVM7QUFDakMsb0JBQW9CLHVFQUFpQjtBQUNyQyxjQUFjLHVEQUFTLENBQUMsdURBQVM7QUFDakMsaUJBQWlCLHVFQUFpQjtBQUNsQyxpQkFBaUIsdURBQVM7QUFDMUIsa0JBQWtCLHVEQUFTO0FBQzNCLG1CQUFtQixzREFBUTtBQUMzQixrQkFBa0IsdURBQVM7QUFDM0IsMEJBQTBCLHVEQUFTLENBQUMsc0RBQVE7QUFDNUMsaUJBQWlCLHVEQUFTO0FBQzFCLHdCQUF3QixzREFBUTtBQUNoQyx1QkFBdUIsdURBQVM7QUFDaEMsd0JBQXdCLHVEQUFTO0FBQ2pDLGlCQUFpQix1REFBUyxDQUFDLHNEQUFRO0FBQ25DLHVCQUF1Qix1REFBUztBQUNoQyxrQkFBa0IsdURBQVM7QUFDM0IsWUFBWSx5REFBVztBQUN2QixzQkFBc0Isc0RBQVE7QUFDOUIsa0JBQWtCLHVEQUFTLENBQUMsbUVBQVc7QUFDdkMsZ0JBQWdCLHNEQUFRO0FBQ3hCLGFBQWEsc0RBQVE7QUFDckIsYUFBYSxzREFBUTtBQUNyQixTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLFNBQVMsK0RBQWdCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLG1CQUFtQixhQUFvQjtBQUN2QztBQUNBLHNCQUFzQiw2QkFBNkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EseUJBQXlCLGlFQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCwyQkFBMkIsNEVBQTZCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYSx3QkFBd0I7QUFDckM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWEsZ0NBQWdDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWEsZ0NBQWdDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix5QkFBeUI7QUFDNUM7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWEsd0JBQXdCO0FBQ3JDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhLHFCQUFxQiwrQkFBK0IsZUFBZTtBQUNoRixpQkFBaUI7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYSxtQ0FBbUM7QUFDaEQsaUJBQWlCO0FBQ2pCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNCQUFzQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWEsb0NBQW9DO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYSx3QkFBd0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxlQUFlLDhCQUE4QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYSw2QkFBNkI7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQVNFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMSW5zdGFuY2UubWpzPzAyY2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3JlYXRlTWlncmF0aW9uSWRzLFxuICBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlUmVjb3JkVHlwZVxufSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgZmlsdGVyRW50cmllcyB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGJveE1vZGVsVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvZ2VvbWV0cnktdHlwZXMubWpzXCI7XG5pbXBvcnQgeyBpZFZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL2lkLXZhbGlkYXRvci5tanNcIjtcbmltcG9ydCB7IGN1cnNvclZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL1RMQ3Vyc29yLm1qc1wiO1xuaW1wb3J0IHsgb3BhY2l0eVZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL1RMT3BhY2l0eS5tanNcIjtcbmltcG9ydCB7IHNjcmliYmxlVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvVExTY3JpYmJsZS5tanNcIjtcbmltcG9ydCB7IHBhZ2VJZFZhbGlkYXRvciB9IGZyb20gXCIuL1RMUGFnZS5tanNcIjtcbmNvbnN0IHNob3VsZEtleUJlUHJlc2VydmVkQmV0d2VlblNlc3Npb25zID0ge1xuICAvLyBUaGlzIG9iamVjdCBkZWZpbmVzIGtleXMgdGhhdCBzaG91bGQgYmUgcHJlc2VydmVkIGFjcm9zcyBjYWxscyB0byBsb2FkU25hcHNob3QoKVxuICBpZDogZmFsc2UsXG4gIC8vIG1ldGFcbiAgdHlwZU5hbWU6IGZhbHNlLFxuICAvLyBtZXRhXG4gIGN1cnJlbnRQYWdlSWQ6IGZhbHNlLFxuICAvLyBkb2VzIG5vdCBwcmVzZXJ2ZSBiZWNhdXNlIHdobyBrbm93cyBpZiB0aGUgcGFnZSBzdGlsbCBleGlzdHNcbiAgb3BhY2l0eUZvck5leHRTaGFwZTogZmFsc2UsXG4gIC8vIGRvZXMgbm90IHByZXNlcnZlIGJlY2F1c2UgaXQncyBhIHRlbXBvcmFyeSBzdGF0ZVxuICBzdHlsZXNGb3JOZXh0U2hhcGU6IGZhbHNlLFxuICAvLyBkb2VzIG5vdCBwcmVzZXJ2ZSBiZWNhdXNlIGl0J3MgYSB0ZW1wb3Jhcnkgc3RhdGVcbiAgZm9sbG93aW5nVXNlcklkOiBmYWxzZSxcbiAgLy8gZG9lcyBub3QgcHJlc2VydmUgYmVjYXVzZSBpdCdzIGEgdGVtcG9yYXJ5IHN0YXRlXG4gIGhpZ2hsaWdodGVkVXNlcklkczogZmFsc2UsXG4gIC8vIGRvZXMgbm90IHByZXNlcnZlIGJlY2F1c2UgaXQncyBhIHRlbXBvcmFyeSBzdGF0ZVxuICBicnVzaDogZmFsc2UsXG4gIC8vIGRvZXMgbm90IHByZXNlcnZlIGJlY2F1c2UgaXQncyBhIHRlbXBvcmFyeSBzdGF0ZVxuICBjdXJzb3I6IGZhbHNlLFxuICAvLyBkb2VzIG5vdCBwcmVzZXJ2ZSBiZWNhdXNlIGl0J3MgYSB0ZW1wb3Jhcnkgc3RhdGVcbiAgc2NyaWJibGVzOiBmYWxzZSxcbiAgLy8gZG9lcyBub3QgcHJlc2VydmUgYmVjYXVzZSBpdCdzIGEgdGVtcG9yYXJ5IHN0YXRlXG4gIGlzRm9jdXNNb2RlOiB0cnVlLFxuICAvLyBwcmVzZXJ2ZXMgYmVjYXVzZSBpdCdzIGEgdXNlciBwcmVmZXJlbmNlXG4gIGlzRGVidWdNb2RlOiB0cnVlLFxuICAvLyBwcmVzZXJ2ZXMgYmVjYXVzZSBpdCdzIGEgdXNlciBwcmVmZXJlbmNlXG4gIGlzVG9vbExvY2tlZDogdHJ1ZSxcbiAgLy8gcHJlc2VydmVzIGJlY2F1c2UgaXQncyBhIHVzZXIgcHJlZmVyZW5jZVxuICBleHBvcnRCYWNrZ3JvdW5kOiB0cnVlLFxuICAvLyBwcmVzZXJ2ZXMgYmVjYXVzZSBpdCdzIGEgdXNlciBwcmVmZXJlbmNlXG4gIHNjcmVlbkJvdW5kczogdHJ1ZSxcbiAgLy8gcHJlc2VydmVzIGJlY2F1c2UgaXQncyBjYXB0dXJpbmcgdGhlIHVzZXIncyBzY3JlZW4gc3RhdGVcbiAgaW5zZXRzOiB0cnVlLFxuICAvLyBwcmVzZXJ2ZXMgYmVjYXVzZSBpdCdzIGNhcHR1cmluZyB0aGUgdXNlcidzIHNjcmVlbiBzdGF0ZVxuICB6b29tQnJ1c2g6IGZhbHNlLFxuICAvLyBkb2VzIG5vdCBwcmVzZXJ2ZSBiZWNhdXNlIGl0J3MgYSB0ZW1wb3Jhcnkgc3RhdGVcbiAgY2hhdE1lc3NhZ2U6IGZhbHNlLFxuICAvLyBkb2VzIG5vdCBwcmVzZXJ2ZSBiZWNhdXNlIGl0J3MgYSB0ZW1wb3Jhcnkgc3RhdGVcbiAgaXNDaGF0dGluZzogZmFsc2UsXG4gIC8vIGRvZXMgbm90IHByZXNlcnZlIGJlY2F1c2UgaXQncyBhIHRlbXBvcmFyeSBzdGF0ZVxuICBpc1Blbk1vZGU6IGZhbHNlLFxuICAvLyBkb2VzIG5vdCBwcmVzZXJ2ZSBiZWNhdXNlIGl0J3MgYSB0ZW1wb3Jhcnkgc3RhdGVcbiAgaXNHcmlkTW9kZTogdHJ1ZSxcbiAgLy8gcHJlc2VydmVzIGJlY2F1c2UgaXQncyBhIHVzZXIgcHJlZmVyZW5jZVxuICBpc0ZvY3VzZWQ6IHRydWUsXG4gIC8vIHByZXNlcnZlcyBiZWNhdXNlIG9idmlvdXNseVxuICBkZXZpY2VQaXhlbFJhdGlvOiB0cnVlLFxuICAvLyBwcmVzZXJ2ZXMgYmVjYXVzZSBpdCBjYXB0dXJlcyB0aGUgdXNlcidzIHNjcmVlbiBzdGF0ZVxuICBpc0NvYXJzZVBvaW50ZXI6IHRydWUsXG4gIC8vIHByZXNlcnZlcyBiZWNhdXNlIGl0IGNhcHR1cmVzIHRoZSB1c2VyJ3Mgc2NyZWVuIHN0YXRlXG4gIGlzSG92ZXJpbmdDYW52YXM6IGZhbHNlLFxuICAvLyBkb2VzIG5vdCBwcmVzZXJ2ZSBiZWNhdXNlIGl0J3MgYSB0ZW1wb3Jhcnkgc3RhdGVcbiAgb3Blbk1lbnVzOiBmYWxzZSxcbiAgLy8gZG9lcyBub3QgcHJlc2VydmUgYmVjYXVzZSBpdCdzIGEgdGVtcG9yYXJ5IHN0YXRlXG4gIGlzQ2hhbmdpbmdTdHlsZTogZmFsc2UsXG4gIC8vIGRvZXMgbm90IHByZXNlcnZlIGJlY2F1c2UgaXQncyBhIHRlbXBvcmFyeSBzdGF0ZVxuICBpc1JlYWRvbmx5OiB0cnVlLFxuICAvLyBwcmVzZXJ2ZXMgYmVjYXVzZSBpdCdzIGEgY29uZmlnIG9wdGlvblxuICBtZXRhOiBmYWxzZSxcbiAgLy8gZG9lcyBub3QgcHJlc2VydmUgYmVjYXVzZSB3aG8ga25vd3Mgd2hhdCdzIGluIHRoZXJlLCBsZWF2ZSBpdCB1cCB0byBzZGsgdXNlcnMgdG8gc2F2ZSBhbmQgcmVpbnN0YXRlXG4gIGR1cGxpY2F0ZVByb3BzOiBmYWxzZVxuICAvL1xufTtcbmNvbnN0IHBsdWNrUHJlc2VydmluZ1ZhbHVlcyA9ICh2YWwpID0+IHZhbCA/IGZpbHRlckVudHJpZXModmFsLCAoa2V5KSA9PiB7XG4gIHJldHVybiBzaG91bGRLZXlCZVByZXNlcnZlZEJldHdlZW5TZXNzaW9uc1trZXldO1xufSkgOiBudWxsO1xuY29uc3QgaW5zdGFuY2VJZFZhbGlkYXRvciA9IGlkVmFsaWRhdG9yKFwiaW5zdGFuY2VcIik7XG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZVJlY29yZFR5cGUoc3R5bGVzQnlJZCkge1xuICBjb25zdCBzdHlsZXNGb3JOZXh0U2hhcGVWYWxpZGF0b3JzID0ge307XG4gIGZvciAoY29uc3QgW2lkLCBzdHlsZV0gb2Ygc3R5bGVzQnlJZCkge1xuICAgIHN0eWxlc0Zvck5leHRTaGFwZVZhbGlkYXRvcnNbaWRdID0gVC5vcHRpb25hbChzdHlsZSk7XG4gIH1cbiAgY29uc3QgaW5zdGFuY2VUeXBlVmFsaWRhdG9yID0gVC5tb2RlbChcbiAgICBcImluc3RhbmNlXCIsXG4gICAgVC5vYmplY3Qoe1xuICAgICAgdHlwZU5hbWU6IFQubGl0ZXJhbChcImluc3RhbmNlXCIpLFxuICAgICAgaWQ6IGlkVmFsaWRhdG9yKFwiaW5zdGFuY2VcIiksXG4gICAgICBjdXJyZW50UGFnZUlkOiBwYWdlSWRWYWxpZGF0b3IsXG4gICAgICBmb2xsb3dpbmdVc2VySWQ6IFQuc3RyaW5nLm51bGxhYmxlKCksXG4gICAgICBicnVzaDogYm94TW9kZWxWYWxpZGF0b3IubnVsbGFibGUoKSxcbiAgICAgIG9wYWNpdHlGb3JOZXh0U2hhcGU6IG9wYWNpdHlWYWxpZGF0b3IsXG4gICAgICBzdHlsZXNGb3JOZXh0U2hhcGU6IFQub2JqZWN0KHN0eWxlc0Zvck5leHRTaGFwZVZhbGlkYXRvcnMpLFxuICAgICAgY3Vyc29yOiBjdXJzb3JWYWxpZGF0b3IsXG4gICAgICBzY3JpYmJsZXM6IFQuYXJyYXlPZihzY3JpYmJsZVZhbGlkYXRvciksXG4gICAgICBpc0ZvY3VzTW9kZTogVC5ib29sZWFuLFxuICAgICAgaXNEZWJ1Z01vZGU6IFQuYm9vbGVhbixcbiAgICAgIGlzVG9vbExvY2tlZDogVC5ib29sZWFuLFxuICAgICAgZXhwb3J0QmFja2dyb3VuZDogVC5ib29sZWFuLFxuICAgICAgc2NyZWVuQm91bmRzOiBib3hNb2RlbFZhbGlkYXRvcixcbiAgICAgIGluc2V0czogVC5hcnJheU9mKFQuYm9vbGVhbiksXG4gICAgICB6b29tQnJ1c2g6IGJveE1vZGVsVmFsaWRhdG9yLm51bGxhYmxlKCksXG4gICAgICBpc1Blbk1vZGU6IFQuYm9vbGVhbixcbiAgICAgIGlzR3JpZE1vZGU6IFQuYm9vbGVhbixcbiAgICAgIGNoYXRNZXNzYWdlOiBULnN0cmluZyxcbiAgICAgIGlzQ2hhdHRpbmc6IFQuYm9vbGVhbixcbiAgICAgIGhpZ2hsaWdodGVkVXNlcklkczogVC5hcnJheU9mKFQuc3RyaW5nKSxcbiAgICAgIGlzRm9jdXNlZDogVC5ib29sZWFuLFxuICAgICAgZGV2aWNlUGl4ZWxSYXRpbzogVC5udW1iZXIsXG4gICAgICBpc0NvYXJzZVBvaW50ZXI6IFQuYm9vbGVhbixcbiAgICAgIGlzSG92ZXJpbmdDYW52YXM6IFQuYm9vbGVhbi5udWxsYWJsZSgpLFxuICAgICAgb3Blbk1lbnVzOiBULmFycmF5T2YoVC5zdHJpbmcpLFxuICAgICAgaXNDaGFuZ2luZ1N0eWxlOiBULmJvb2xlYW4sXG4gICAgICBpc1JlYWRvbmx5OiBULmJvb2xlYW4sXG4gICAgICBtZXRhOiBULmpzb25WYWx1ZSxcbiAgICAgIGR1cGxpY2F0ZVByb3BzOiBULm9iamVjdCh7XG4gICAgICAgIHNoYXBlSWRzOiBULmFycmF5T2YoaWRWYWxpZGF0b3IoXCJzaGFwZVwiKSksXG4gICAgICAgIG9mZnNldDogVC5vYmplY3Qoe1xuICAgICAgICAgIHg6IFQubnVtYmVyLFxuICAgICAgICAgIHk6IFQubnVtYmVyXG4gICAgICAgIH0pXG4gICAgICB9KS5udWxsYWJsZSgpXG4gICAgfSlcbiAgKTtcbiAgcmV0dXJuIGNyZWF0ZVJlY29yZFR5cGUoXCJpbnN0YW5jZVwiLCB7XG4gICAgdmFsaWRhdG9yOiBpbnN0YW5jZVR5cGVWYWxpZGF0b3IsXG4gICAgc2NvcGU6IFwic2Vzc2lvblwiLFxuICAgIGVwaGVtZXJhbEtleXM6IHtcbiAgICAgIGN1cnJlbnRQYWdlSWQ6IGZhbHNlLFxuICAgICAgbWV0YTogZmFsc2UsXG4gICAgICBmb2xsb3dpbmdVc2VySWQ6IHRydWUsXG4gICAgICBvcGFjaXR5Rm9yTmV4dFNoYXBlOiB0cnVlLFxuICAgICAgc3R5bGVzRm9yTmV4dFNoYXBlOiB0cnVlLFxuICAgICAgYnJ1c2g6IHRydWUsXG4gICAgICBjdXJzb3I6IHRydWUsXG4gICAgICBzY3JpYmJsZXM6IHRydWUsXG4gICAgICBpc0ZvY3VzTW9kZTogdHJ1ZSxcbiAgICAgIGlzRGVidWdNb2RlOiB0cnVlLFxuICAgICAgaXNUb29sTG9ja2VkOiB0cnVlLFxuICAgICAgZXhwb3J0QmFja2dyb3VuZDogdHJ1ZSxcbiAgICAgIHNjcmVlbkJvdW5kczogdHJ1ZSxcbiAgICAgIGluc2V0czogdHJ1ZSxcbiAgICAgIHpvb21CcnVzaDogdHJ1ZSxcbiAgICAgIGlzUGVuTW9kZTogdHJ1ZSxcbiAgICAgIGlzR3JpZE1vZGU6IHRydWUsXG4gICAgICBjaGF0TWVzc2FnZTogdHJ1ZSxcbiAgICAgIGlzQ2hhdHRpbmc6IHRydWUsXG4gICAgICBoaWdobGlnaHRlZFVzZXJJZHM6IHRydWUsXG4gICAgICBpc0ZvY3VzZWQ6IHRydWUsXG4gICAgICBkZXZpY2VQaXhlbFJhdGlvOiB0cnVlLFxuICAgICAgaXNDb2Fyc2VQb2ludGVyOiB0cnVlLFxuICAgICAgaXNIb3ZlcmluZ0NhbnZhczogdHJ1ZSxcbiAgICAgIG9wZW5NZW51czogdHJ1ZSxcbiAgICAgIGlzQ2hhbmdpbmdTdHlsZTogdHJ1ZSxcbiAgICAgIGlzUmVhZG9ubHk6IHRydWUsXG4gICAgICBkdXBsaWNhdGVQcm9wczogdHJ1ZVxuICAgIH1cbiAgfSkud2l0aERlZmF1bHRQcm9wZXJ0aWVzKFxuICAgICgpID0+ICh7XG4gICAgICBmb2xsb3dpbmdVc2VySWQ6IG51bGwsXG4gICAgICBvcGFjaXR5Rm9yTmV4dFNoYXBlOiAxLFxuICAgICAgc3R5bGVzRm9yTmV4dFNoYXBlOiB7fSxcbiAgICAgIGJydXNoOiBudWxsLFxuICAgICAgc2NyaWJibGVzOiBbXSxcbiAgICAgIGN1cnNvcjoge1xuICAgICAgICB0eXBlOiBcImRlZmF1bHRcIixcbiAgICAgICAgcm90YXRpb246IDBcbiAgICAgIH0sXG4gICAgICBpc0ZvY3VzTW9kZTogZmFsc2UsXG4gICAgICBleHBvcnRCYWNrZ3JvdW5kOiBmYWxzZSxcbiAgICAgIGlzRGVidWdNb2RlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiLFxuICAgICAgaXNUb29sTG9ja2VkOiBmYWxzZSxcbiAgICAgIHNjcmVlbkJvdW5kczogeyB4OiAwLCB5OiAwLCB3OiAxMDgwLCBoOiA3MjAgfSxcbiAgICAgIGluc2V0czogW2ZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlXSxcbiAgICAgIHpvb21CcnVzaDogbnVsbCxcbiAgICAgIGlzR3JpZE1vZGU6IGZhbHNlLFxuICAgICAgaXNQZW5Nb2RlOiBmYWxzZSxcbiAgICAgIGNoYXRNZXNzYWdlOiBcIlwiLFxuICAgICAgaXNDaGF0dGluZzogZmFsc2UsXG4gICAgICBoaWdobGlnaHRlZFVzZXJJZHM6IFtdLFxuICAgICAgaXNGb2N1c2VkOiBmYWxzZSxcbiAgICAgIGRldmljZVBpeGVsUmF0aW86IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgPyAxIDogd2luZG93LmRldmljZVBpeGVsUmF0aW8sXG4gICAgICBpc0NvYXJzZVBvaW50ZXI6IGZhbHNlLFxuICAgICAgaXNIb3ZlcmluZ0NhbnZhczogbnVsbCxcbiAgICAgIG9wZW5NZW51czogW10sXG4gICAgICBpc0NoYW5naW5nU3R5bGU6IGZhbHNlLFxuICAgICAgaXNSZWFkb25seTogZmFsc2UsXG4gICAgICBtZXRhOiB7fSxcbiAgICAgIGR1cGxpY2F0ZVByb3BzOiBudWxsXG4gICAgfSlcbiAgKTtcbn1cbmNvbnN0IGluc3RhbmNlVmVyc2lvbnMgPSBjcmVhdGVNaWdyYXRpb25JZHMoXCJjb20udGxkcmF3Lmluc3RhbmNlXCIsIHtcbiAgQWRkVHJhbnNwYXJlbnRFeHBvcnRCZ3M6IDEsXG4gIFJlbW92ZURpYWxvZzogMixcbiAgQWRkVG9vbExvY2tNb2RlOiAzLFxuICBSZW1vdmVFeHRyYVByb3BzRm9yTmV4dFNoYXBlOiA0LFxuICBBZGRMYWJlbENvbG9yOiA1LFxuICBBZGRGb2xsb3dpbmdVc2VySWQ6IDYsXG4gIFJlbW92ZUFsaWduSnVzdGlmeTogNyxcbiAgQWRkWm9vbTogOCxcbiAgQWRkVmVydGljYWxBbGlnbjogOSxcbiAgQWRkU2NyaWJibGVEZWxheTogMTAsXG4gIFJlbW92ZVVzZXJJZDogMTEsXG4gIEFkZElzUGVuTW9kZUFuZElzR3JpZE1vZGU6IDEyLFxuICBIb2lzdE9wYWNpdHk6IDEzLFxuICBBZGRDaGF0OiAxNCxcbiAgQWRkSGlnaGxpZ2h0ZWRVc2VySWRzOiAxNSxcbiAgUmVwbGFjZVByb3BzRm9yTmV4dFNoYXBlV2l0aFN0eWxlc0Zvck5leHRTaGFwZTogMTYsXG4gIEFkZE1ldGE6IDE3LFxuICBSZW1vdmVDdXJzb3JDb2xvcjogMTgsXG4gIEFkZExvbmVseVByb3BlcnRpZXM6IDE5LFxuICBSZWFkT25seVJlYWRvbmx5OiAyMCxcbiAgQWRkSG92ZXJpbmdDYW52YXM6IDIxLFxuICBBZGRTY3JpYmJsZXM6IDIyLFxuICBBZGRJbnNldDogMjMsXG4gIEFkZER1cGxpY2F0ZVByb3BzOiAyNCxcbiAgUmVtb3ZlQ2FuTW92ZUNhbWVyYTogMjVcbn0pO1xuY29uc3QgaW5zdGFuY2VNaWdyYXRpb25zID0gY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZUlkOiBcImNvbS50bGRyYXcuaW5zdGFuY2VcIixcbiAgcmVjb3JkVHlwZTogXCJpbnN0YW5jZVwiLFxuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZFRyYW5zcGFyZW50RXhwb3J0QmdzLFxuICAgICAgdXA6IChpbnN0YW5jZSkgPT4ge1xuICAgICAgICByZXR1cm4geyAuLi5pbnN0YW5jZSwgZXhwb3J0QmFja2dyb3VuZDogdHJ1ZSB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuUmVtb3ZlRGlhbG9nLFxuICAgICAgdXA6ICh7IGRpYWxvZzogXywgLi4uaW5zdGFuY2UgfSkgPT4ge1xuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRUb29sTG9ja01vZGUsXG4gICAgICB1cDogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIHJldHVybiB7IC4uLmluc3RhbmNlLCBpc1Rvb2xMb2NrZWQ6IGZhbHNlIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5SZW1vdmVFeHRyYVByb3BzRm9yTmV4dFNoYXBlLFxuICAgICAgdXA6ICh7IHByb3BzRm9yTmV4dFNoYXBlLCAuLi5pbnN0YW5jZSB9KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uaW5zdGFuY2UsXG4gICAgICAgICAgcHJvcHNGb3JOZXh0U2hhcGU6IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHByb3BzRm9yTmV4dFNoYXBlKS5maWx0ZXIoXG4gICAgICAgICAgICAgIChba2V5XSkgPT4gW1xuICAgICAgICAgICAgICAgIFwiY29sb3JcIixcbiAgICAgICAgICAgICAgICBcImxhYmVsQ29sb3JcIixcbiAgICAgICAgICAgICAgICBcImRhc2hcIixcbiAgICAgICAgICAgICAgICBcImZpbGxcIixcbiAgICAgICAgICAgICAgICBcInNpemVcIixcbiAgICAgICAgICAgICAgICBcImZvbnRcIixcbiAgICAgICAgICAgICAgICBcImFsaWduXCIsXG4gICAgICAgICAgICAgICAgXCJ2ZXJ0aWNhbEFsaWduXCIsXG4gICAgICAgICAgICAgICAgXCJpY29uXCIsXG4gICAgICAgICAgICAgICAgXCJnZW9cIixcbiAgICAgICAgICAgICAgICBcImFycm93aGVhZFN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgXCJhcnJvd2hlYWRFbmRcIixcbiAgICAgICAgICAgICAgICBcInNwbGluZVwiXG4gICAgICAgICAgICAgIF0uaW5jbHVkZXMoa2V5KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZExhYmVsQ29sb3IsXG4gICAgICB1cDogKHsgcHJvcHNGb3JOZXh0U2hhcGUsIC4uLmluc3RhbmNlIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5pbnN0YW5jZSxcbiAgICAgICAgICBwcm9wc0Zvck5leHRTaGFwZToge1xuICAgICAgICAgICAgLi4ucHJvcHNGb3JOZXh0U2hhcGUsXG4gICAgICAgICAgICBsYWJlbENvbG9yOiBcImJsYWNrXCJcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRGb2xsb3dpbmdVc2VySWQsXG4gICAgICB1cDogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIHJldHVybiB7IC4uLmluc3RhbmNlLCBmb2xsb3dpbmdVc2VySWQ6IG51bGwgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLlJlbW92ZUFsaWduSnVzdGlmeSxcbiAgICAgIHVwOiAoaW5zdGFuY2UpID0+IHtcbiAgICAgICAgbGV0IG5ld0FsaWduID0gaW5zdGFuY2UucHJvcHNGb3JOZXh0U2hhcGUuYWxpZ247XG4gICAgICAgIGlmIChuZXdBbGlnbiA9PT0gXCJqdXN0aWZ5XCIpIHtcbiAgICAgICAgICBuZXdBbGlnbiA9IFwic3RhcnRcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmluc3RhbmNlLFxuICAgICAgICAgIHByb3BzRm9yTmV4dFNoYXBlOiB7XG4gICAgICAgICAgICAuLi5pbnN0YW5jZS5wcm9wc0Zvck5leHRTaGFwZSxcbiAgICAgICAgICAgIGFsaWduOiBuZXdBbGlnblxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZFpvb20sXG4gICAgICB1cDogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIHJldHVybiB7IC4uLmluc3RhbmNlLCB6b29tQnJ1c2g6IG51bGwgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZFZlcnRpY2FsQWxpZ24sXG4gICAgICB1cDogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uaW5zdGFuY2UsXG4gICAgICAgICAgcHJvcHNGb3JOZXh0U2hhcGU6IHtcbiAgICAgICAgICAgIC4uLmluc3RhbmNlLnByb3BzRm9yTmV4dFNoYXBlLFxuICAgICAgICAgICAgdmVydGljYWxBbGlnbjogXCJtaWRkbGVcIlxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZFNjcmliYmxlRGVsYXksXG4gICAgICB1cDogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIGlmIChpbnN0YW5jZS5zY3JpYmJsZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiB7IC4uLmluc3RhbmNlLCBzY3JpYmJsZTogeyAuLi5pbnN0YW5jZS5zY3JpYmJsZSwgZGVsYXk6IDAgfSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IC4uLmluc3RhbmNlIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5SZW1vdmVVc2VySWQsXG4gICAgICB1cDogKHsgdXNlcklkOiBfLCAuLi5pbnN0YW5jZSB9KSA9PiB7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZElzUGVuTW9kZUFuZElzR3JpZE1vZGUsXG4gICAgICB1cDogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIHJldHVybiB7IC4uLmluc3RhbmNlLCBpc1Blbk1vZGU6IGZhbHNlLCBpc0dyaWRNb2RlOiBmYWxzZSB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuSG9pc3RPcGFjaXR5LFxuICAgICAgdXA6ICh7IHByb3BzRm9yTmV4dFNoYXBlOiB7IG9wYWNpdHksIC4uLnByb3BzRm9yTmV4dFNoYXBlIH0sIC4uLmluc3RhbmNlIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uaW5zdGFuY2UsIG9wYWNpdHlGb3JOZXh0U2hhcGU6IE51bWJlcihvcGFjaXR5ID8/IFwiMVwiKSwgcHJvcHNGb3JOZXh0U2hhcGUgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZENoYXQsXG4gICAgICB1cDogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIHJldHVybiB7IC4uLmluc3RhbmNlLCBjaGF0TWVzc2FnZTogXCJcIiwgaXNDaGF0dGluZzogZmFsc2UgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZEhpZ2hsaWdodGVkVXNlcklkcyxcbiAgICAgIHVwOiAoaW5zdGFuY2UpID0+IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uaW5zdGFuY2UsIGhpZ2hsaWdodGVkVXNlcklkczogW10gfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLlJlcGxhY2VQcm9wc0Zvck5leHRTaGFwZVdpdGhTdHlsZXNGb3JOZXh0U2hhcGUsXG4gICAgICB1cDogKHsgcHJvcHNGb3JOZXh0U2hhcGU6IF8sIC4uLmluc3RhbmNlIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIHsgLi4uaW5zdGFuY2UsIHN0eWxlc0Zvck5leHRTaGFwZToge30gfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZE1ldGEsXG4gICAgICB1cDogKHJlY29yZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlY29yZCxcbiAgICAgICAgICBtZXRhOiB7fVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuUmVtb3ZlQ3Vyc29yQ29sb3IsXG4gICAgICB1cDogKHJlY29yZCkgPT4ge1xuICAgICAgICBjb25zdCB7IGNvbG9yOiBfLCAuLi5jdXJzb3IgfSA9IHJlY29yZC5jdXJzb3I7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucmVjb3JkLFxuICAgICAgICAgIGN1cnNvclxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuQWRkTG9uZWx5UHJvcGVydGllcyxcbiAgICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucmVjb3JkLFxuICAgICAgICAgIGNhbk1vdmVDYW1lcmE6IHRydWUsXG4gICAgICAgICAgaXNGb2N1c2VkOiBmYWxzZSxcbiAgICAgICAgICBkZXZpY2VQaXhlbFJhdGlvOiAxLFxuICAgICAgICAgIGlzQ29hcnNlUG9pbnRlcjogZmFsc2UsXG4gICAgICAgICAgb3Blbk1lbnVzOiBbXSxcbiAgICAgICAgICBpc0NoYW5naW5nU3R5bGU6IGZhbHNlLFxuICAgICAgICAgIGlzUmVhZE9ubHk6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5SZWFkT25seVJlYWRvbmx5LFxuICAgICAgdXA6ICh7IGlzUmVhZE9ubHk6IF9pc1JlYWRPbmx5LCAuLi5yZWNvcmQgfSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlY29yZCxcbiAgICAgICAgICBpc1JlYWRvbmx5OiBfaXNSZWFkT25seVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuQWRkSG92ZXJpbmdDYW52YXMsXG4gICAgICB1cDogKHJlY29yZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlY29yZCxcbiAgICAgICAgICBpc0hvdmVyaW5nQ2FudmFzOiBudWxsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VWZXJzaW9ucy5BZGRTY3JpYmJsZXMsXG4gICAgICB1cDogKHsgc2NyaWJibGU6IF8sIC4uLnJlY29yZCB9KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucmVjb3JkLFxuICAgICAgICAgIHNjcmliYmxlczogW11cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVZlcnNpb25zLkFkZEluc2V0LFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5yZWNvcmQsXG4gICAgICAgICAgaW5zZXRzOiBbZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2VdXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgZG93bjogKHsgaW5zZXRzOiBfLCAuLi5yZWNvcmQgfSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlY29yZFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuQWRkRHVwbGljYXRlUHJvcHMsXG4gICAgICB1cDogKHJlY29yZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlY29yZCxcbiAgICAgICAgICBkdXBsaWNhdGVQcm9wczogbnVsbFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGRvd246ICh7IGR1cGxpY2F0ZVByb3BzOiBfLCAuLi5yZWNvcmQgfSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlY29yZFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlVmVyc2lvbnMuUmVtb3ZlQ2FuTW92ZUNhbWVyYSxcbiAgICAgIHVwOiAoeyBjYW5Nb3ZlQ2FtZXJhOiBfLCAuLi5yZWNvcmQgfSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlY29yZFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGRvd246IChpbnN0YW5jZSkgPT4ge1xuICAgICAgICByZXR1cm4geyAuLi5pbnN0YW5jZSwgY2FuTW92ZUNhbWVyYTogdHJ1ZSB9O1xuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5jb25zdCBUTElOU1RBTkNFX0lEID0gXCJpbnN0YW5jZTppbnN0YW5jZVwiO1xuZXhwb3J0IHtcbiAgVExJTlNUQU5DRV9JRCxcbiAgY3JlYXRlSW5zdGFuY2VSZWNvcmRUeXBlLFxuICBpbnN0YW5jZUlkVmFsaWRhdG9yLFxuICBpbnN0YW5jZU1pZ3JhdGlvbnMsXG4gIGluc3RhbmNlVmVyc2lvbnMsXG4gIHBsdWNrUHJlc2VydmluZ1ZhbHVlcyxcbiAgc2hvdWxkS2V5QmVQcmVzZXJ2ZWRCZXR3ZWVuU2Vzc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEluc3RhbmNlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLInstance.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PageRecordType: () => (/* binding */ PageRecordType),\n/* harmony export */   isPageId: () => (/* binding */ isPageId),\n/* harmony export */   pageIdValidator: () => (/* binding */ pageIdValidator),\n/* harmony export */   pageMigrations: () => (/* binding */ pageMigrations),\n/* harmony export */   pageValidator: () => (/* binding */ pageValidator),\n/* harmony export */   pageVersions: () => (/* binding */ pageVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n\n\n\nconst pageIdValidator = (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__.idValidator)(\"page\");\nconst pageValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"page\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"page\"),\n    id: pageIdValidator,\n    name: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    index: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.indexKey,\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.jsonValue\n  })\n);\nconst pageVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.page\", {\n  AddMeta: 1\n});\nconst pageMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.page\",\n  recordType: \"page\",\n  sequence: [\n    {\n      id: pageVersions.AddMeta,\n      up: (record) => {\n        record.meta = {};\n      }\n    }\n  ]\n});\nconst PageRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"page\", {\n  validator: pageValidator,\n  scope: \"document\"\n}).withDefaultProperties(() => ({\n  meta: {}\n}));\nfunction isPageId(id) {\n  return PageRecordType.isId(id);\n}\n\n//# sourceMappingURL=TLPage.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMUGFnZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBSXVCO0FBQ2M7QUFDa0I7QUFDdkQsd0JBQXdCLG1FQUFXO0FBQ25DLHNCQUFzQixxREFBTztBQUM3QjtBQUNBLEVBQUUsc0RBQVE7QUFDVixjQUFjLHVEQUFTO0FBQ3ZCO0FBQ0EsVUFBVSxzREFBUTtBQUNsQixXQUFXLHdEQUFVO0FBQ3JCLFVBQVUseURBQVc7QUFDckIsR0FBRztBQUNIO0FBQ0EscUJBQXFCLGlFQUFrQjtBQUN2QztBQUNBLENBQUM7QUFDRCx1QkFBdUIsNEVBQTZCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHVCQUF1QiwrREFBZ0I7QUFDdkM7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFRRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vcmVjb3Jkcy9UTFBhZ2UubWpzPzMwODEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3JlYXRlTWlncmF0aW9uSWRzLFxuICBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlUmVjb3JkVHlwZVxufSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBpZFZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL2lkLXZhbGlkYXRvci5tanNcIjtcbmNvbnN0IHBhZ2VJZFZhbGlkYXRvciA9IGlkVmFsaWRhdG9yKFwicGFnZVwiKTtcbmNvbnN0IHBhZ2VWYWxpZGF0b3IgPSBULm1vZGVsKFxuICBcInBhZ2VcIixcbiAgVC5vYmplY3Qoe1xuICAgIHR5cGVOYW1lOiBULmxpdGVyYWwoXCJwYWdlXCIpLFxuICAgIGlkOiBwYWdlSWRWYWxpZGF0b3IsXG4gICAgbmFtZTogVC5zdHJpbmcsXG4gICAgaW5kZXg6IFQuaW5kZXhLZXksXG4gICAgbWV0YTogVC5qc29uVmFsdWVcbiAgfSlcbik7XG5jb25zdCBwYWdlVmVyc2lvbnMgPSBjcmVhdGVNaWdyYXRpb25JZHMoXCJjb20udGxkcmF3LnBhZ2VcIiwge1xuICBBZGRNZXRhOiAxXG59KTtcbmNvbnN0IHBhZ2VNaWdyYXRpb25zID0gY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZUlkOiBcImNvbS50bGRyYXcucGFnZVwiLFxuICByZWNvcmRUeXBlOiBcInBhZ2VcIixcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogcGFnZVZlcnNpb25zLkFkZE1ldGEsXG4gICAgICB1cDogKHJlY29yZCkgPT4ge1xuICAgICAgICByZWNvcmQubWV0YSA9IHt9O1xuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5jb25zdCBQYWdlUmVjb3JkVHlwZSA9IGNyZWF0ZVJlY29yZFR5cGUoXCJwYWdlXCIsIHtcbiAgdmFsaWRhdG9yOiBwYWdlVmFsaWRhdG9yLFxuICBzY29wZTogXCJkb2N1bWVudFwiXG59KS53aXRoRGVmYXVsdFByb3BlcnRpZXMoKCkgPT4gKHtcbiAgbWV0YToge31cbn0pKTtcbmZ1bmN0aW9uIGlzUGFnZUlkKGlkKSB7XG4gIHJldHVybiBQYWdlUmVjb3JkVHlwZS5pc0lkKGlkKTtcbn1cbmV4cG9ydCB7XG4gIFBhZ2VSZWNvcmRUeXBlLFxuICBpc1BhZ2VJZCxcbiAgcGFnZUlkVmFsaWRhdG9yLFxuICBwYWdlTWlncmF0aW9ucyxcbiAgcGFnZVZhbGlkYXRvcixcbiAgcGFnZVZlcnNpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExQYWdlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InstancePageStateRecordType: () => (/* binding */ InstancePageStateRecordType),\n/* harmony export */   instancePageStateMigrations: () => (/* binding */ instancePageStateMigrations),\n/* harmony export */   instancePageStateValidator: () => (/* binding */ instancePageStateValidator),\n/* harmony export */   instancePageStateVersions: () => (/* binding */ instancePageStateVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n/* harmony import */ var _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shapes/TLBaseShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs\");\n/* harmony import */ var _TLPage_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TLPage.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPage.mjs\");\n\n\n\n\n\nconst instancePageStateValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"instance_page_state\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"instance_page_state\"),\n    id: (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__.idValidator)(\"instance_page_state\"),\n    pageId: _TLPage_mjs__WEBPACK_IMPORTED_MODULE_4__.pageIdValidator,\n    selectedShapeIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.arrayOf(_shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator),\n    hintingShapeIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.arrayOf(_shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator),\n    erasingShapeIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.arrayOf(_shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator),\n    hoveredShapeId: _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator.nullable(),\n    editingShapeId: _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator.nullable(),\n    croppingShapeId: _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator.nullable(),\n    focusedGroupId: _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.shapeIdValidator.nullable(),\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.jsonValue\n  })\n);\nconst instancePageStateVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.instance_page_state\", {\n  AddCroppingId: 1,\n  RemoveInstanceIdAndCameraId: 2,\n  AddMeta: 3,\n  RenameProperties: 4,\n  RenamePropertiesAgain: 5\n});\nconst instancePageStateMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.instance_page_state\",\n  recordType: \"instance_page_state\",\n  sequence: [\n    {\n      id: instancePageStateVersions.AddCroppingId,\n      up(instance) {\n        instance.croppingShapeId = null;\n      }\n    },\n    {\n      id: instancePageStateVersions.RemoveInstanceIdAndCameraId,\n      up(instance) {\n        delete instance.instanceId;\n        delete instance.cameraId;\n      }\n    },\n    {\n      id: instancePageStateVersions.AddMeta,\n      up: (record) => {\n        record.meta = {};\n      }\n    },\n    {\n      id: instancePageStateVersions.RenameProperties,\n      // this migration is cursed: it was written wrong and doesn't do anything.\n      // rather than replace it, I've added another migration below that fixes it.\n      up: (_record) => {\n      },\n      down: (_record) => {\n      }\n    },\n    {\n      id: instancePageStateVersions.RenamePropertiesAgain,\n      up: (record) => {\n        record.selectedShapeIds = record.selectedIds;\n        delete record.selectedIds;\n        record.hintingShapeIds = record.hintingIds;\n        delete record.hintingIds;\n        record.erasingShapeIds = record.erasingIds;\n        delete record.erasingIds;\n        record.hoveredShapeId = record.hoveredId;\n        delete record.hoveredId;\n        record.editingShapeId = record.editingId;\n        delete record.editingId;\n        record.croppingShapeId = record.croppingShapeId ?? record.croppingId ?? null;\n        delete record.croppingId;\n        record.focusedGroupId = record.focusLayerId;\n        delete record.focusLayerId;\n      },\n      down: (record) => {\n        record.selectedIds = record.selectedShapeIds;\n        delete record.selectedShapeIds;\n        record.hintingIds = record.hintingShapeIds;\n        delete record.hintingShapeIds;\n        record.erasingIds = record.erasingShapeIds;\n        delete record.erasingShapeIds;\n        record.hoveredId = record.hoveredShapeId;\n        delete record.hoveredShapeId;\n        record.editingId = record.editingShapeId;\n        delete record.editingShapeId;\n        record.croppingId = record.croppingShapeId;\n        delete record.croppingShapeId;\n        record.focusLayerId = record.focusedGroupId;\n        delete record.focusedGroupId;\n      }\n    }\n  ]\n});\nconst InstancePageStateRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\n  \"instance_page_state\",\n  {\n    validator: instancePageStateValidator,\n    scope: \"session\",\n    ephemeralKeys: {\n      pageId: false,\n      selectedShapeIds: false,\n      editingShapeId: false,\n      croppingShapeId: false,\n      meta: false,\n      hintingShapeIds: true,\n      erasingShapeIds: true,\n      hoveredShapeId: true,\n      focusedGroupId: true\n    }\n  }\n).withDefaultProperties(\n  () => ({\n    editingShapeId: null,\n    croppingShapeId: null,\n    selectedShapeIds: [],\n    hoveredShapeId: null,\n    erasingShapeIds: [],\n    hintingShapeIds: [],\n    focusedGroupId: null,\n    meta: {}\n  })\n);\n\n//# sourceMappingURL=TLPageState.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMUGFnZVN0YXRlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFJdUI7QUFDYztBQUNrQjtBQUNNO0FBQ2Q7QUFDL0MsbUNBQW1DLHFEQUFPO0FBQzFDO0FBQ0EsRUFBRSxzREFBUTtBQUNWLGNBQWMsdURBQVM7QUFDdkIsUUFBUSxtRUFBVztBQUNuQixZQUFZLHdEQUFlO0FBQzNCLHNCQUFzQix1REFBUyxDQUFDLHFFQUFnQjtBQUNoRCxxQkFBcUIsdURBQVMsQ0FBQyxxRUFBZ0I7QUFDL0MscUJBQXFCLHVEQUFTLENBQUMscUVBQWdCO0FBQy9DLG9CQUFvQixxRUFBZ0I7QUFDcEMsb0JBQW9CLHFFQUFnQjtBQUNwQyxxQkFBcUIscUVBQWdCO0FBQ3JDLG9CQUFvQixxRUFBZ0I7QUFDcEMsVUFBVSx5REFBVztBQUNyQixHQUFHO0FBQ0g7QUFDQSxrQ0FBa0MsaUVBQWtCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsb0NBQW9DLDRFQUE2QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxvQ0FBb0MsK0RBQWdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFNRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vcmVjb3Jkcy9UTFBhZ2VTdGF0ZS5tanM/OTJhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVSZWNvcmRUeXBlXG59IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGlkVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvaWQtdmFsaWRhdG9yLm1qc1wiO1xuaW1wb3J0IHsgc2hhcGVJZFZhbGlkYXRvciB9IGZyb20gXCIuLi9zaGFwZXMvVExCYXNlU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBwYWdlSWRWYWxpZGF0b3IgfSBmcm9tIFwiLi9UTFBhZ2UubWpzXCI7XG5jb25zdCBpbnN0YW5jZVBhZ2VTdGF0ZVZhbGlkYXRvciA9IFQubW9kZWwoXG4gIFwiaW5zdGFuY2VfcGFnZV9zdGF0ZVwiLFxuICBULm9iamVjdCh7XG4gICAgdHlwZU5hbWU6IFQubGl0ZXJhbChcImluc3RhbmNlX3BhZ2Vfc3RhdGVcIiksXG4gICAgaWQ6IGlkVmFsaWRhdG9yKFwiaW5zdGFuY2VfcGFnZV9zdGF0ZVwiKSxcbiAgICBwYWdlSWQ6IHBhZ2VJZFZhbGlkYXRvcixcbiAgICBzZWxlY3RlZFNoYXBlSWRzOiBULmFycmF5T2Yoc2hhcGVJZFZhbGlkYXRvciksXG4gICAgaGludGluZ1NoYXBlSWRzOiBULmFycmF5T2Yoc2hhcGVJZFZhbGlkYXRvciksXG4gICAgZXJhc2luZ1NoYXBlSWRzOiBULmFycmF5T2Yoc2hhcGVJZFZhbGlkYXRvciksXG4gICAgaG92ZXJlZFNoYXBlSWQ6IHNoYXBlSWRWYWxpZGF0b3IubnVsbGFibGUoKSxcbiAgICBlZGl0aW5nU2hhcGVJZDogc2hhcGVJZFZhbGlkYXRvci5udWxsYWJsZSgpLFxuICAgIGNyb3BwaW5nU2hhcGVJZDogc2hhcGVJZFZhbGlkYXRvci5udWxsYWJsZSgpLFxuICAgIGZvY3VzZWRHcm91cElkOiBzaGFwZUlkVmFsaWRhdG9yLm51bGxhYmxlKCksXG4gICAgbWV0YTogVC5qc29uVmFsdWVcbiAgfSlcbik7XG5jb25zdCBpbnN0YW5jZVBhZ2VTdGF0ZVZlcnNpb25zID0gY3JlYXRlTWlncmF0aW9uSWRzKFwiY29tLnRsZHJhdy5pbnN0YW5jZV9wYWdlX3N0YXRlXCIsIHtcbiAgQWRkQ3JvcHBpbmdJZDogMSxcbiAgUmVtb3ZlSW5zdGFuY2VJZEFuZENhbWVyYUlkOiAyLFxuICBBZGRNZXRhOiAzLFxuICBSZW5hbWVQcm9wZXJ0aWVzOiA0LFxuICBSZW5hbWVQcm9wZXJ0aWVzQWdhaW46IDVcbn0pO1xuY29uc3QgaW5zdGFuY2VQYWdlU3RhdGVNaWdyYXRpb25zID0gY3JlYXRlUmVjb3JkTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZUlkOiBcImNvbS50bGRyYXcuaW5zdGFuY2VfcGFnZV9zdGF0ZVwiLFxuICByZWNvcmRUeXBlOiBcImluc3RhbmNlX3BhZ2Vfc3RhdGVcIixcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VQYWdlU3RhdGVWZXJzaW9ucy5BZGRDcm9wcGluZ0lkLFxuICAgICAgdXAoaW5zdGFuY2UpIHtcbiAgICAgICAgaW5zdGFuY2UuY3JvcHBpbmdTaGFwZUlkID0gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVBhZ2VTdGF0ZVZlcnNpb25zLlJlbW92ZUluc3RhbmNlSWRBbmRDYW1lcmFJZCxcbiAgICAgIHVwKGluc3RhbmNlKSB7XG4gICAgICAgIGRlbGV0ZSBpbnN0YW5jZS5pbnN0YW5jZUlkO1xuICAgICAgICBkZWxldGUgaW5zdGFuY2UuY2FtZXJhSWQ7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VQYWdlU3RhdGVWZXJzaW9ucy5BZGRNZXRhLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgcmVjb3JkLm1ldGEgPSB7fTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVBhZ2VTdGF0ZVZlcnNpb25zLlJlbmFtZVByb3BlcnRpZXMsXG4gICAgICAvLyB0aGlzIG1pZ3JhdGlvbiBpcyBjdXJzZWQ6IGl0IHdhcyB3cml0dGVuIHdyb25nIGFuZCBkb2Vzbid0IGRvIGFueXRoaW5nLlxuICAgICAgLy8gcmF0aGVyIHRoYW4gcmVwbGFjZSBpdCwgSSd2ZSBhZGRlZCBhbm90aGVyIG1pZ3JhdGlvbiBiZWxvdyB0aGF0IGZpeGVzIGl0LlxuICAgICAgdXA6IChfcmVjb3JkKSA9PiB7XG4gICAgICB9LFxuICAgICAgZG93bjogKF9yZWNvcmQpID0+IHtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVBhZ2VTdGF0ZVZlcnNpb25zLlJlbmFtZVByb3BlcnRpZXNBZ2FpbixcbiAgICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIHJlY29yZC5zZWxlY3RlZFNoYXBlSWRzID0gcmVjb3JkLnNlbGVjdGVkSWRzO1xuICAgICAgICBkZWxldGUgcmVjb3JkLnNlbGVjdGVkSWRzO1xuICAgICAgICByZWNvcmQuaGludGluZ1NoYXBlSWRzID0gcmVjb3JkLmhpbnRpbmdJZHM7XG4gICAgICAgIGRlbGV0ZSByZWNvcmQuaGludGluZ0lkcztcbiAgICAgICAgcmVjb3JkLmVyYXNpbmdTaGFwZUlkcyA9IHJlY29yZC5lcmFzaW5nSWRzO1xuICAgICAgICBkZWxldGUgcmVjb3JkLmVyYXNpbmdJZHM7XG4gICAgICAgIHJlY29yZC5ob3ZlcmVkU2hhcGVJZCA9IHJlY29yZC5ob3ZlcmVkSWQ7XG4gICAgICAgIGRlbGV0ZSByZWNvcmQuaG92ZXJlZElkO1xuICAgICAgICByZWNvcmQuZWRpdGluZ1NoYXBlSWQgPSByZWNvcmQuZWRpdGluZ0lkO1xuICAgICAgICBkZWxldGUgcmVjb3JkLmVkaXRpbmdJZDtcbiAgICAgICAgcmVjb3JkLmNyb3BwaW5nU2hhcGVJZCA9IHJlY29yZC5jcm9wcGluZ1NoYXBlSWQgPz8gcmVjb3JkLmNyb3BwaW5nSWQgPz8gbnVsbDtcbiAgICAgICAgZGVsZXRlIHJlY29yZC5jcm9wcGluZ0lkO1xuICAgICAgICByZWNvcmQuZm9jdXNlZEdyb3VwSWQgPSByZWNvcmQuZm9jdXNMYXllcklkO1xuICAgICAgICBkZWxldGUgcmVjb3JkLmZvY3VzTGF5ZXJJZDtcbiAgICAgIH0sXG4gICAgICBkb3duOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIHJlY29yZC5zZWxlY3RlZElkcyA9IHJlY29yZC5zZWxlY3RlZFNoYXBlSWRzO1xuICAgICAgICBkZWxldGUgcmVjb3JkLnNlbGVjdGVkU2hhcGVJZHM7XG4gICAgICAgIHJlY29yZC5oaW50aW5nSWRzID0gcmVjb3JkLmhpbnRpbmdTaGFwZUlkcztcbiAgICAgICAgZGVsZXRlIHJlY29yZC5oaW50aW5nU2hhcGVJZHM7XG4gICAgICAgIHJlY29yZC5lcmFzaW5nSWRzID0gcmVjb3JkLmVyYXNpbmdTaGFwZUlkcztcbiAgICAgICAgZGVsZXRlIHJlY29yZC5lcmFzaW5nU2hhcGVJZHM7XG4gICAgICAgIHJlY29yZC5ob3ZlcmVkSWQgPSByZWNvcmQuaG92ZXJlZFNoYXBlSWQ7XG4gICAgICAgIGRlbGV0ZSByZWNvcmQuaG92ZXJlZFNoYXBlSWQ7XG4gICAgICAgIHJlY29yZC5lZGl0aW5nSWQgPSByZWNvcmQuZWRpdGluZ1NoYXBlSWQ7XG4gICAgICAgIGRlbGV0ZSByZWNvcmQuZWRpdGluZ1NoYXBlSWQ7XG4gICAgICAgIHJlY29yZC5jcm9wcGluZ0lkID0gcmVjb3JkLmNyb3BwaW5nU2hhcGVJZDtcbiAgICAgICAgZGVsZXRlIHJlY29yZC5jcm9wcGluZ1NoYXBlSWQ7XG4gICAgICAgIHJlY29yZC5mb2N1c0xheWVySWQgPSByZWNvcmQuZm9jdXNlZEdyb3VwSWQ7XG4gICAgICAgIGRlbGV0ZSByZWNvcmQuZm9jdXNlZEdyb3VwSWQ7XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmNvbnN0IEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZSA9IGNyZWF0ZVJlY29yZFR5cGUoXG4gIFwiaW5zdGFuY2VfcGFnZV9zdGF0ZVwiLFxuICB7XG4gICAgdmFsaWRhdG9yOiBpbnN0YW5jZVBhZ2VTdGF0ZVZhbGlkYXRvcixcbiAgICBzY29wZTogXCJzZXNzaW9uXCIsXG4gICAgZXBoZW1lcmFsS2V5czoge1xuICAgICAgcGFnZUlkOiBmYWxzZSxcbiAgICAgIHNlbGVjdGVkU2hhcGVJZHM6IGZhbHNlLFxuICAgICAgZWRpdGluZ1NoYXBlSWQ6IGZhbHNlLFxuICAgICAgY3JvcHBpbmdTaGFwZUlkOiBmYWxzZSxcbiAgICAgIG1ldGE6IGZhbHNlLFxuICAgICAgaGludGluZ1NoYXBlSWRzOiB0cnVlLFxuICAgICAgZXJhc2luZ1NoYXBlSWRzOiB0cnVlLFxuICAgICAgaG92ZXJlZFNoYXBlSWQ6IHRydWUsXG4gICAgICBmb2N1c2VkR3JvdXBJZDogdHJ1ZVxuICAgIH1cbiAgfVxuKS53aXRoRGVmYXVsdFByb3BlcnRpZXMoXG4gICgpID0+ICh7XG4gICAgZWRpdGluZ1NoYXBlSWQ6IG51bGwsXG4gICAgY3JvcHBpbmdTaGFwZUlkOiBudWxsLFxuICAgIHNlbGVjdGVkU2hhcGVJZHM6IFtdLFxuICAgIGhvdmVyZWRTaGFwZUlkOiBudWxsLFxuICAgIGVyYXNpbmdTaGFwZUlkczogW10sXG4gICAgaGludGluZ1NoYXBlSWRzOiBbXSxcbiAgICBmb2N1c2VkR3JvdXBJZDogbnVsbCxcbiAgICBtZXRhOiB7fVxuICB9KVxuKTtcbmV4cG9ydCB7XG4gIEluc3RhbmNlUGFnZVN0YXRlUmVjb3JkVHlwZSxcbiAgaW5zdGFuY2VQYWdlU3RhdGVNaWdyYXRpb25zLFxuICBpbnN0YW5jZVBhZ2VTdGF0ZVZhbGlkYXRvcixcbiAgaW5zdGFuY2VQYWdlU3RhdGVWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMUGFnZVN0YXRlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPageState.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PointerRecordType: () => (/* binding */ PointerRecordType),\n/* harmony export */   TLPOINTER_ID: () => (/* binding */ TLPOINTER_ID),\n/* harmony export */   pointerMigrations: () => (/* binding */ pointerMigrations),\n/* harmony export */   pointerValidator: () => (/* binding */ pointerValidator),\n/* harmony export */   pointerVersions: () => (/* binding */ pointerVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n\n\n\nconst pointerValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"pointer\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"pointer\"),\n    id: (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__.idValidator)(\"pointer\"),\n    x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    lastActivityTimestamp: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.jsonValue\n  })\n);\nconst pointerVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.pointer\", {\n  AddMeta: 1\n});\nconst pointerMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.pointer\",\n  recordType: \"pointer\",\n  sequence: [\n    {\n      id: pointerVersions.AddMeta,\n      up: (record) => {\n        record.meta = {};\n      }\n    }\n  ]\n});\nconst PointerRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"pointer\", {\n  validator: pointerValidator,\n  scope: \"session\"\n}).withDefaultProperties(\n  () => ({\n    x: 0,\n    y: 0,\n    lastActivityTimestamp: 0,\n    meta: {}\n  })\n);\nconst TLPOINTER_ID = PointerRecordType.createId(\"pointer\");\n\n//# sourceMappingURL=TLPointer.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMUG9pbnRlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFJdUI7QUFDYztBQUNrQjtBQUN2RCx5QkFBeUIscURBQU87QUFDaEM7QUFDQSxFQUFFLHNEQUFRO0FBQ1YsY0FBYyx1REFBUztBQUN2QixRQUFRLG1FQUFXO0FBQ25CLE9BQU8sc0RBQVE7QUFDZixPQUFPLHNEQUFRO0FBQ2YsMkJBQTJCLHNEQUFRO0FBQ25DLFVBQVUseURBQVc7QUFDckIsR0FBRztBQUNIO0FBQ0Esd0JBQXdCLGlFQUFrQjtBQUMxQztBQUNBLENBQUM7QUFDRCwwQkFBMEIsNEVBQTZCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDBCQUEwQiwrREFBZ0I7QUFDMUM7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFPRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vcmVjb3Jkcy9UTFBvaW50ZXIubWpzP2M4MjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3JlYXRlTWlncmF0aW9uSWRzLFxuICBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlUmVjb3JkVHlwZVxufSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBpZFZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL2lkLXZhbGlkYXRvci5tanNcIjtcbmNvbnN0IHBvaW50ZXJWYWxpZGF0b3IgPSBULm1vZGVsKFxuICBcInBvaW50ZXJcIixcbiAgVC5vYmplY3Qoe1xuICAgIHR5cGVOYW1lOiBULmxpdGVyYWwoXCJwb2ludGVyXCIpLFxuICAgIGlkOiBpZFZhbGlkYXRvcihcInBvaW50ZXJcIiksXG4gICAgeDogVC5udW1iZXIsXG4gICAgeTogVC5udW1iZXIsXG4gICAgbGFzdEFjdGl2aXR5VGltZXN0YW1wOiBULm51bWJlcixcbiAgICBtZXRhOiBULmpzb25WYWx1ZVxuICB9KVxuKTtcbmNvbnN0IHBvaW50ZXJWZXJzaW9ucyA9IGNyZWF0ZU1pZ3JhdGlvbklkcyhcImNvbS50bGRyYXcucG9pbnRlclwiLCB7XG4gIEFkZE1ldGE6IDFcbn0pO1xuY29uc3QgcG9pbnRlck1pZ3JhdGlvbnMgPSBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlSWQ6IFwiY29tLnRsZHJhdy5wb2ludGVyXCIsXG4gIHJlY29yZFR5cGU6IFwicG9pbnRlclwiLFxuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBwb2ludGVyVmVyc2lvbnMuQWRkTWV0YSxcbiAgICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIHJlY29yZC5tZXRhID0ge307XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmNvbnN0IFBvaW50ZXJSZWNvcmRUeXBlID0gY3JlYXRlUmVjb3JkVHlwZShcInBvaW50ZXJcIiwge1xuICB2YWxpZGF0b3I6IHBvaW50ZXJWYWxpZGF0b3IsXG4gIHNjb3BlOiBcInNlc3Npb25cIlxufSkud2l0aERlZmF1bHRQcm9wZXJ0aWVzKFxuICAoKSA9PiAoe1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICBsYXN0QWN0aXZpdHlUaW1lc3RhbXA6IDAsXG4gICAgbWV0YToge31cbiAgfSlcbik7XG5jb25zdCBUTFBPSU5URVJfSUQgPSBQb2ludGVyUmVjb3JkVHlwZS5jcmVhdGVJZChcInBvaW50ZXJcIik7XG5leHBvcnQge1xuICBQb2ludGVyUmVjb3JkVHlwZSxcbiAgVExQT0lOVEVSX0lELFxuICBwb2ludGVyTWlncmF0aW9ucyxcbiAgcG9pbnRlclZhbGlkYXRvcixcbiAgcG9pbnRlclZlcnNpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExQb2ludGVyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPointer.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPresence.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLPresence.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InstancePresenceRecordType: () => (/* binding */ InstancePresenceRecordType),\n/* harmony export */   instancePresenceMigrations: () => (/* binding */ instancePresenceMigrations),\n/* harmony export */   instancePresenceValidator: () => (/* binding */ instancePresenceValidator),\n/* harmony export */   instancePresenceVersions: () => (/* binding */ instancePresenceVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n/* harmony import */ var _misc_TLCursor_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../misc/TLCursor.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLCursor.mjs\");\n/* harmony import */ var _misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../misc/TLScribble.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLScribble.mjs\");\n\n\n\n\n\n\nconst instancePresenceValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.model(\n  \"instance_presence\",\n  _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.literal(\"instance_presence\"),\n    id: (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_3__.idValidator)(\"instance_presence\"),\n    userId: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    userName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    lastActivityTimestamp: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n    followingUserId: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string.nullable(),\n    cursor: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n      x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n      y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n      type: _misc_TLCursor_mjs__WEBPACK_IMPORTED_MODULE_4__.cursorTypeValidator,\n      rotation: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number\n    }),\n    color: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    camera: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n      x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n      y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n      z: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number\n    }),\n    screenBounds: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.boxModelValidator,\n    selectedShapeIds: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.arrayOf((0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_3__.idValidator)(\"shape\")),\n    currentPageId: (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_3__.idValidator)(\"page\"),\n    brush: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.boxModelValidator.nullable(),\n    scribbles: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.arrayOf(_misc_TLScribble_mjs__WEBPACK_IMPORTED_MODULE_5__.scribbleValidator),\n    chatMessage: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n    meta: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.jsonValue\n  })\n);\nconst instancePresenceVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.instance_presence\", {\n  AddScribbleDelay: 1,\n  RemoveInstanceId: 2,\n  AddChatMessage: 3,\n  AddMeta: 4,\n  RenameSelectedShapeIds: 5\n});\nconst instancePresenceMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.instance_presence\",\n  recordType: \"instance_presence\",\n  sequence: [\n    {\n      id: instancePresenceVersions.AddScribbleDelay,\n      up: (instance) => {\n        if (instance.scribble !== null) {\n          instance.scribble.delay = 0;\n        }\n      }\n    },\n    {\n      id: instancePresenceVersions.RemoveInstanceId,\n      up: (instance) => {\n        delete instance.instanceId;\n      }\n    },\n    {\n      id: instancePresenceVersions.AddChatMessage,\n      up: (instance) => {\n        instance.chatMessage = \"\";\n      }\n    },\n    {\n      id: instancePresenceVersions.AddMeta,\n      up: (record) => {\n        record.meta = {};\n      }\n    },\n    {\n      id: instancePresenceVersions.RenameSelectedShapeIds,\n      up: (_record) => {\n      }\n    }\n  ]\n});\nconst InstancePresenceRecordType = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\n  \"instance_presence\",\n  {\n    validator: instancePresenceValidator,\n    scope: \"presence\"\n  }\n).withDefaultProperties(() => ({\n  lastActivityTimestamp: 0,\n  followingUserId: null,\n  color: \"#FF0000\",\n  camera: {\n    x: 0,\n    y: 0,\n    z: 1\n  },\n  cursor: {\n    x: 0,\n    y: 0,\n    type: \"default\",\n    rotation: 0\n  },\n  screenBounds: {\n    x: 0,\n    y: 0,\n    w: 1,\n    h: 1\n  },\n  selectedShapeIds: [],\n  brush: null,\n  scribbles: [],\n  chatMessage: \"\",\n  meta: {}\n}));\n\n//# sourceMappingURL=TLPresence.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMUHJlc2VuY2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFJdUI7QUFDYztBQUMwQjtBQUNSO0FBQ0k7QUFDQTtBQUMzRCxrQ0FBa0MscURBQU87QUFDekM7QUFDQSxFQUFFLHNEQUFRO0FBQ1YsY0FBYyx1REFBUztBQUN2QixRQUFRLG1FQUFXO0FBQ25CLFlBQVksc0RBQVE7QUFDcEIsY0FBYyxzREFBUTtBQUN0QiwyQkFBMkIsc0RBQVE7QUFDbkMscUJBQXFCLHNEQUFRO0FBQzdCLFlBQVksc0RBQVE7QUFDcEIsU0FBUyxzREFBUTtBQUNqQixTQUFTLHNEQUFRO0FBQ2pCLFlBQVksbUVBQW1CO0FBQy9CLGdCQUFnQixzREFBUTtBQUN4QixLQUFLO0FBQ0wsV0FBVyxzREFBUTtBQUNuQixZQUFZLHNEQUFRO0FBQ3BCLFNBQVMsc0RBQVE7QUFDakIsU0FBUyxzREFBUTtBQUNqQixTQUFTLHNEQUFRO0FBQ2pCLEtBQUs7QUFDTCxrQkFBa0IsdUVBQWlCO0FBQ25DLHNCQUFzQix1REFBUyxDQUFDLG1FQUFXO0FBQzNDLG1CQUFtQixtRUFBVztBQUM5QixXQUFXLHVFQUFpQjtBQUM1QixlQUFlLHVEQUFTLENBQUMsbUVBQWlCO0FBQzFDLGlCQUFpQixzREFBUTtBQUN6QixVQUFVLHlEQUFXO0FBQ3JCLEdBQUc7QUFDSDtBQUNBLGlDQUFpQyxpRUFBa0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxtQ0FBbUMsNEVBQTZCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxtQ0FBbUMsK0RBQWdCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQU1DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMUHJlc2VuY2UubWpzP2EzMDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3JlYXRlTWlncmF0aW9uSWRzLFxuICBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSxcbiAgY3JlYXRlUmVjb3JkVHlwZVxufSBmcm9tIFwiQHRsZHJhdy9zdG9yZVwiO1xuaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBib3hNb2RlbFZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL2dlb21ldHJ5LXR5cGVzLm1qc1wiO1xuaW1wb3J0IHsgaWRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vbWlzYy9pZC12YWxpZGF0b3IubWpzXCI7XG5pbXBvcnQgeyBjdXJzb3JUeXBlVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvVExDdXJzb3IubWpzXCI7XG5pbXBvcnQgeyBzY3JpYmJsZVZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL1RMU2NyaWJibGUubWpzXCI7XG5jb25zdCBpbnN0YW5jZVByZXNlbmNlVmFsaWRhdG9yID0gVC5tb2RlbChcbiAgXCJpbnN0YW5jZV9wcmVzZW5jZVwiLFxuICBULm9iamVjdCh7XG4gICAgdHlwZU5hbWU6IFQubGl0ZXJhbChcImluc3RhbmNlX3ByZXNlbmNlXCIpLFxuICAgIGlkOiBpZFZhbGlkYXRvcihcImluc3RhbmNlX3ByZXNlbmNlXCIpLFxuICAgIHVzZXJJZDogVC5zdHJpbmcsXG4gICAgdXNlck5hbWU6IFQuc3RyaW5nLFxuICAgIGxhc3RBY3Rpdml0eVRpbWVzdGFtcDogVC5udW1iZXIsXG4gICAgZm9sbG93aW5nVXNlcklkOiBULnN0cmluZy5udWxsYWJsZSgpLFxuICAgIGN1cnNvcjogVC5vYmplY3Qoe1xuICAgICAgeDogVC5udW1iZXIsXG4gICAgICB5OiBULm51bWJlcixcbiAgICAgIHR5cGU6IGN1cnNvclR5cGVWYWxpZGF0b3IsXG4gICAgICByb3RhdGlvbjogVC5udW1iZXJcbiAgICB9KSxcbiAgICBjb2xvcjogVC5zdHJpbmcsXG4gICAgY2FtZXJhOiBULm9iamVjdCh7XG4gICAgICB4OiBULm51bWJlcixcbiAgICAgIHk6IFQubnVtYmVyLFxuICAgICAgejogVC5udW1iZXJcbiAgICB9KSxcbiAgICBzY3JlZW5Cb3VuZHM6IGJveE1vZGVsVmFsaWRhdG9yLFxuICAgIHNlbGVjdGVkU2hhcGVJZHM6IFQuYXJyYXlPZihpZFZhbGlkYXRvcihcInNoYXBlXCIpKSxcbiAgICBjdXJyZW50UGFnZUlkOiBpZFZhbGlkYXRvcihcInBhZ2VcIiksXG4gICAgYnJ1c2g6IGJveE1vZGVsVmFsaWRhdG9yLm51bGxhYmxlKCksXG4gICAgc2NyaWJibGVzOiBULmFycmF5T2Yoc2NyaWJibGVWYWxpZGF0b3IpLFxuICAgIGNoYXRNZXNzYWdlOiBULnN0cmluZyxcbiAgICBtZXRhOiBULmpzb25WYWx1ZVxuICB9KVxuKTtcbmNvbnN0IGluc3RhbmNlUHJlc2VuY2VWZXJzaW9ucyA9IGNyZWF0ZU1pZ3JhdGlvbklkcyhcImNvbS50bGRyYXcuaW5zdGFuY2VfcHJlc2VuY2VcIiwge1xuICBBZGRTY3JpYmJsZURlbGF5OiAxLFxuICBSZW1vdmVJbnN0YW5jZUlkOiAyLFxuICBBZGRDaGF0TWVzc2FnZTogMyxcbiAgQWRkTWV0YTogNCxcbiAgUmVuYW1lU2VsZWN0ZWRTaGFwZUlkczogNVxufSk7XG5jb25zdCBpbnN0YW5jZVByZXNlbmNlTWlncmF0aW9ucyA9IGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2VJZDogXCJjb20udGxkcmF3Lmluc3RhbmNlX3ByZXNlbmNlXCIsXG4gIHJlY29yZFR5cGU6IFwiaW5zdGFuY2VfcHJlc2VuY2VcIixcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VQcmVzZW5jZVZlcnNpb25zLkFkZFNjcmliYmxlRGVsYXksXG4gICAgICB1cDogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIGlmIChpbnN0YW5jZS5zY3JpYmJsZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGluc3RhbmNlLnNjcmliYmxlLmRlbGF5ID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGluc3RhbmNlUHJlc2VuY2VWZXJzaW9ucy5SZW1vdmVJbnN0YW5jZUlkLFxuICAgICAgdXA6IChpbnN0YW5jZSkgPT4ge1xuICAgICAgICBkZWxldGUgaW5zdGFuY2UuaW5zdGFuY2VJZDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVByZXNlbmNlVmVyc2lvbnMuQWRkQ2hhdE1lc3NhZ2UsXG4gICAgICB1cDogKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIGluc3RhbmNlLmNoYXRNZXNzYWdlID0gXCJcIjtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBpbnN0YW5jZVByZXNlbmNlVmVyc2lvbnMuQWRkTWV0YSxcbiAgICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIHJlY29yZC5tZXRhID0ge307XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogaW5zdGFuY2VQcmVzZW5jZVZlcnNpb25zLlJlbmFtZVNlbGVjdGVkU2hhcGVJZHMsXG4gICAgICB1cDogKF9yZWNvcmQpID0+IHtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuY29uc3QgSW5zdGFuY2VQcmVzZW5jZVJlY29yZFR5cGUgPSBjcmVhdGVSZWNvcmRUeXBlKFxuICBcImluc3RhbmNlX3ByZXNlbmNlXCIsXG4gIHtcbiAgICB2YWxpZGF0b3I6IGluc3RhbmNlUHJlc2VuY2VWYWxpZGF0b3IsXG4gICAgc2NvcGU6IFwicHJlc2VuY2VcIlxuICB9XG4pLndpdGhEZWZhdWx0UHJvcGVydGllcygoKSA9PiAoe1xuICBsYXN0QWN0aXZpdHlUaW1lc3RhbXA6IDAsXG4gIGZvbGxvd2luZ1VzZXJJZDogbnVsbCxcbiAgY29sb3I6IFwiI0ZGMDAwMFwiLFxuICBjYW1lcmE6IHtcbiAgICB4OiAwLFxuICAgIHk6IDAsXG4gICAgejogMVxuICB9LFxuICBjdXJzb3I6IHtcbiAgICB4OiAwLFxuICAgIHk6IDAsXG4gICAgdHlwZTogXCJkZWZhdWx0XCIsXG4gICAgcm90YXRpb246IDBcbiAgfSxcbiAgc2NyZWVuQm91bmRzOiB7XG4gICAgeDogMCxcbiAgICB5OiAwLFxuICAgIHc6IDEsXG4gICAgaDogMVxuICB9LFxuICBzZWxlY3RlZFNoYXBlSWRzOiBbXSxcbiAgYnJ1c2g6IG51bGwsXG4gIHNjcmliYmxlczogW10sXG4gIGNoYXRNZXNzYWdlOiBcIlwiLFxuICBtZXRhOiB7fVxufSkpO1xuZXhwb3J0IHtcbiAgSW5zdGFuY2VQcmVzZW5jZVJlY29yZFR5cGUsXG4gIGluc3RhbmNlUHJlc2VuY2VNaWdyYXRpb25zLFxuICBpbnN0YW5jZVByZXNlbmNlVmFsaWRhdG9yLFxuICBpbnN0YW5jZVByZXNlbmNlVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTFByZXNlbmNlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLPresence.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createShapeId: () => (/* binding */ createShapeId),\n/* harmony export */   createShapePropsMigrationIds: () => (/* binding */ createShapePropsMigrationIds),\n/* harmony export */   createShapePropsMigrationSequence: () => (/* binding */ createShapePropsMigrationSequence),\n/* harmony export */   createShapeRecordType: () => (/* binding */ createShapeRecordType),\n/* harmony export */   getShapePropKeysByStyle: () => (/* binding */ getShapePropKeysByStyle),\n/* harmony export */   isShape: () => (/* binding */ isShape),\n/* harmony export */   isShapeId: () => (/* binding */ isShapeId),\n/* harmony export */   rootShapeMigrations: () => (/* binding */ rootShapeMigrations),\n/* harmony export */   rootShapeVersions: () => (/* binding */ rootShapeVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! nanoid */ \"(ssr)/./node_modules/@tldraw/tlschema/node_modules/nanoid/index.js\");\n/* harmony import */ var _shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shapes/TLBaseShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs\");\n/* harmony import */ var _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\n\n\n\n\n\nconst rootShapeVersions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.shape\", {\n  AddIsLocked: 1,\n  HoistOpacity: 2,\n  AddMeta: 3,\n  AddWhite: 4\n});\nconst rootShapeMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordMigrationSequence)({\n  sequenceId: \"com.tldraw.shape\",\n  recordType: \"shape\",\n  sequence: [\n    {\n      id: rootShapeVersions.AddIsLocked,\n      up: (record) => {\n        record.isLocked = false;\n      },\n      down: (record) => {\n        delete record.isLocked;\n      }\n    },\n    {\n      id: rootShapeVersions.HoistOpacity,\n      up: (record) => {\n        record.opacity = Number(record.props.opacity ?? \"1\");\n        delete record.props.opacity;\n      },\n      down: (record) => {\n        const opacity = record.opacity;\n        delete record.opacity;\n        record.props.opacity = opacity < 0.175 ? \"0.1\" : opacity < 0.375 ? \"0.25\" : opacity < 0.625 ? \"0.5\" : opacity < 0.875 ? \"0.75\" : \"1\";\n      }\n    },\n    {\n      id: rootShapeVersions.AddMeta,\n      up: (record) => {\n        record.meta = {};\n      }\n    },\n    {\n      id: rootShapeVersions.AddWhite,\n      up: (_record) => {\n      },\n      down: (record) => {\n        if (record.props.color === \"white\") {\n          record.props.color = \"black\";\n        }\n      }\n    }\n  ]\n});\nfunction isShape(record) {\n  if (!record)\n    return false;\n  return record.typeName === \"shape\";\n}\nfunction isShapeId(id) {\n  if (!id)\n    return false;\n  return id.startsWith(\"shape:\");\n}\nfunction createShapeId(id) {\n  return `shape:${id ?? (0,nanoid__WEBPACK_IMPORTED_MODULE_5__.nanoid)()}`;\n}\nfunction getShapePropKeysByStyle(props) {\n  const propKeysByStyle = /* @__PURE__ */ new Map();\n  for (const [key, prop] of Object.entries(props)) {\n    if (prop instanceof _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_4__.StyleProp) {\n      if (propKeysByStyle.has(prop)) {\n        throw new Error(\n          `Duplicate style prop ${prop.id}. Each style prop can only be used once within a shape.`\n        );\n      }\n      propKeysByStyle.set(prop, key);\n    }\n  }\n  return propKeysByStyle;\n}\nfunction createShapePropsMigrationSequence(migrations) {\n  return migrations;\n}\nfunction createShapePropsMigrationIds(shapeType, ids) {\n  return (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.mapObjectMapValues)(ids, (_k, v) => `com.tldraw.shape.${shapeType}/${v}`);\n}\nfunction createShapeRecordType(shapes) {\n  return (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createRecordType)(\"shape\", {\n    scope: \"document\",\n    validator: _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.model(\n      \"shape\",\n      _tldraw_validate__WEBPACK_IMPORTED_MODULE_2__.T.union(\n        \"type\",\n        (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.mapObjectMapValues)(\n          shapes,\n          (type, { props, meta }) => (0,_shapes_TLBaseShape_mjs__WEBPACK_IMPORTED_MODULE_3__.createShapeValidator)(type, props, meta)\n        )\n      )\n    )\n  }).withDefaultProperties(() => ({\n    x: 0,\n    y: 0,\n    rotation: 0,\n    isLocked: false,\n    opacity: 1,\n    meta: {}\n  }));\n}\n\n//# sourceMappingURL=TLShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzL1RMU2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUl1QjtBQUM0QjtBQUNkO0FBQ0w7QUFDaUM7QUFDYjtBQUNwRCwwQkFBMEIsaUVBQWtCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDRCQUE0Qiw0RUFBNkI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU0sOENBQU0sR0FBRztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw0REFBUztBQUNqQztBQUNBO0FBQ0Esa0NBQWtDLFFBQVE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaUVBQWtCLHFDQUFxQyxVQUFVLEdBQUcsRUFBRTtBQUMvRTtBQUNBO0FBQ0EsU0FBUywrREFBZ0I7QUFDekI7QUFDQSxlQUFlLHFEQUFPO0FBQ3RCO0FBQ0EsTUFBTSxxREFBTztBQUNiO0FBQ0EsUUFBUSxpRUFBa0I7QUFDMUI7QUFDQSxtQkFBbUIsYUFBYSxLQUFLLDZFQUFvQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBV0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3JlY29yZHMvVExTaGFwZS5tanM/NGQzYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVNaWdyYXRpb25JZHMsXG4gIGNyZWF0ZVJlY29yZE1pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVSZWNvcmRUeXBlXG59IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBtYXBPYmplY3RNYXBWYWx1ZXMgfSBmcm9tIFwiQHRsZHJhdy91dGlsc1wiO1xuaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tIFwibmFub2lkXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFwZVZhbGlkYXRvciB9IGZyb20gXCIuLi9zaGFwZXMvVExCYXNlU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBTdHlsZVByb3AgfSBmcm9tIFwiLi4vc3R5bGVzL1N0eWxlUHJvcC5tanNcIjtcbmNvbnN0IHJvb3RTaGFwZVZlcnNpb25zID0gY3JlYXRlTWlncmF0aW9uSWRzKFwiY29tLnRsZHJhdy5zaGFwZVwiLCB7XG4gIEFkZElzTG9ja2VkOiAxLFxuICBIb2lzdE9wYWNpdHk6IDIsXG4gIEFkZE1ldGE6IDMsXG4gIEFkZFdoaXRlOiA0XG59KTtcbmNvbnN0IHJvb3RTaGFwZU1pZ3JhdGlvbnMgPSBjcmVhdGVSZWNvcmRNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlSWQ6IFwiY29tLnRsZHJhdy5zaGFwZVwiLFxuICByZWNvcmRUeXBlOiBcInNoYXBlXCIsXG4gIHNlcXVlbmNlOiBbXG4gICAge1xuICAgICAgaWQ6IHJvb3RTaGFwZVZlcnNpb25zLkFkZElzTG9ja2VkLFxuICAgICAgdXA6IChyZWNvcmQpID0+IHtcbiAgICAgICAgcmVjb3JkLmlzTG9ja2VkID0gZmFsc2U7XG4gICAgICB9LFxuICAgICAgZG93bjogKHJlY29yZCkgPT4ge1xuICAgICAgICBkZWxldGUgcmVjb3JkLmlzTG9ja2VkO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IHJvb3RTaGFwZVZlcnNpb25zLkhvaXN0T3BhY2l0eSxcbiAgICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIHJlY29yZC5vcGFjaXR5ID0gTnVtYmVyKHJlY29yZC5wcm9wcy5vcGFjaXR5ID8/IFwiMVwiKTtcbiAgICAgICAgZGVsZXRlIHJlY29yZC5wcm9wcy5vcGFjaXR5O1xuICAgICAgfSxcbiAgICAgIGRvd246IChyZWNvcmQpID0+IHtcbiAgICAgICAgY29uc3Qgb3BhY2l0eSA9IHJlY29yZC5vcGFjaXR5O1xuICAgICAgICBkZWxldGUgcmVjb3JkLm9wYWNpdHk7XG4gICAgICAgIHJlY29yZC5wcm9wcy5vcGFjaXR5ID0gb3BhY2l0eSA8IDAuMTc1ID8gXCIwLjFcIiA6IG9wYWNpdHkgPCAwLjM3NSA/IFwiMC4yNVwiIDogb3BhY2l0eSA8IDAuNjI1ID8gXCIwLjVcIiA6IG9wYWNpdHkgPCAwLjg3NSA/IFwiMC43NVwiIDogXCIxXCI7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogcm9vdFNoYXBlVmVyc2lvbnMuQWRkTWV0YSxcbiAgICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIHJlY29yZC5tZXRhID0ge307XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogcm9vdFNoYXBlVmVyc2lvbnMuQWRkV2hpdGUsXG4gICAgICB1cDogKF9yZWNvcmQpID0+IHtcbiAgICAgIH0sXG4gICAgICBkb3duOiAocmVjb3JkKSA9PiB7XG4gICAgICAgIGlmIChyZWNvcmQucHJvcHMuY29sb3IgPT09IFwid2hpdGVcIikge1xuICAgICAgICAgIHJlY29yZC5wcm9wcy5jb2xvciA9IFwiYmxhY2tcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5mdW5jdGlvbiBpc1NoYXBlKHJlY29yZCkge1xuICBpZiAoIXJlY29yZClcbiAgICByZXR1cm4gZmFsc2U7XG4gIHJldHVybiByZWNvcmQudHlwZU5hbWUgPT09IFwic2hhcGVcIjtcbn1cbmZ1bmN0aW9uIGlzU2hhcGVJZChpZCkge1xuICBpZiAoIWlkKVxuICAgIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGlkLnN0YXJ0c1dpdGgoXCJzaGFwZTpcIik7XG59XG5mdW5jdGlvbiBjcmVhdGVTaGFwZUlkKGlkKSB7XG4gIHJldHVybiBgc2hhcGU6JHtpZCA/PyBuYW5vaWQoKX1gO1xufVxuZnVuY3Rpb24gZ2V0U2hhcGVQcm9wS2V5c0J5U3R5bGUocHJvcHMpIHtcbiAgY29uc3QgcHJvcEtleXNCeVN0eWxlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgZm9yIChjb25zdCBba2V5LCBwcm9wXSBvZiBPYmplY3QuZW50cmllcyhwcm9wcykpIHtcbiAgICBpZiAocHJvcCBpbnN0YW5jZW9mIFN0eWxlUHJvcCkge1xuICAgICAgaWYgKHByb3BLZXlzQnlTdHlsZS5oYXMocHJvcCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBEdXBsaWNhdGUgc3R5bGUgcHJvcCAke3Byb3AuaWR9LiBFYWNoIHN0eWxlIHByb3AgY2FuIG9ubHkgYmUgdXNlZCBvbmNlIHdpdGhpbiBhIHNoYXBlLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHByb3BLZXlzQnlTdHlsZS5zZXQocHJvcCwga2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHByb3BLZXlzQnlTdHlsZTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZShtaWdyYXRpb25zKSB7XG4gIHJldHVybiBtaWdyYXRpb25zO1xufVxuZnVuY3Rpb24gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcyhzaGFwZVR5cGUsIGlkcykge1xuICByZXR1cm4gbWFwT2JqZWN0TWFwVmFsdWVzKGlkcywgKF9rLCB2KSA9PiBgY29tLnRsZHJhdy5zaGFwZS4ke3NoYXBlVHlwZX0vJHt2fWApO1xufVxuZnVuY3Rpb24gY3JlYXRlU2hhcGVSZWNvcmRUeXBlKHNoYXBlcykge1xuICByZXR1cm4gY3JlYXRlUmVjb3JkVHlwZShcInNoYXBlXCIsIHtcbiAgICBzY29wZTogXCJkb2N1bWVudFwiLFxuICAgIHZhbGlkYXRvcjogVC5tb2RlbChcbiAgICAgIFwic2hhcGVcIixcbiAgICAgIFQudW5pb24oXG4gICAgICAgIFwidHlwZVwiLFxuICAgICAgICBtYXBPYmplY3RNYXBWYWx1ZXMoXG4gICAgICAgICAgc2hhcGVzLFxuICAgICAgICAgICh0eXBlLCB7IHByb3BzLCBtZXRhIH0pID0+IGNyZWF0ZVNoYXBlVmFsaWRhdG9yKHR5cGUsIHByb3BzLCBtZXRhKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9KS53aXRoRGVmYXVsdFByb3BlcnRpZXMoKCkgPT4gKHtcbiAgICB4OiAwLFxuICAgIHk6IDAsXG4gICAgcm90YXRpb246IDAsXG4gICAgaXNMb2NrZWQ6IGZhbHNlLFxuICAgIG9wYWNpdHk6IDEsXG4gICAgbWV0YToge31cbiAgfSkpO1xufVxuZXhwb3J0IHtcbiAgY3JlYXRlU2hhcGVJZCxcbiAgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcyxcbiAgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlLFxuICBjcmVhdGVTaGFwZVJlY29yZFR5cGUsXG4gIGdldFNoYXBlUHJvcEtleXNCeVN0eWxlLFxuICBpc1NoYXBlLFxuICBpc1NoYXBlSWQsXG4gIHJvb3RTaGFwZU1pZ3JhdGlvbnMsXG4gIHJvb3RTaGFwZVZlcnNpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExTaGFwZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/recordsWithProps.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/recordsWithProps.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPropsMigration: () => (/* binding */ createPropsMigration),\n/* harmony export */   processPropsMigrations: () => (/* binding */ processPropsMigrations)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\n\nfunction processPropsMigrations(typeName, records) {\n  const result = [];\n  for (const [subType, { migrations }] of Object.entries(records)) {\n    const sequenceId = `com.tldraw.${typeName}.${subType}`;\n    if (!migrations) {\n      result.push(\n        (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationSequence)({\n          sequenceId,\n          retroactive: false,\n          sequence: []\n        })\n      );\n    } else if (\"sequenceId\" in migrations) {\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.assert)(\n        sequenceId === migrations.sequenceId,\n        `sequenceId mismatch for ${subType} ${_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.RecordType} migrations. Expected '${sequenceId}', got '${migrations.sequenceId}'`\n      );\n      result.push(migrations);\n    } else if (\"sequence\" in migrations) {\n      result.push(\n        (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationSequence)({\n          sequenceId,\n          retroactive: false,\n          sequence: migrations.sequence.map(\n            (m) => \"id\" in m ? createPropsMigration(typeName, subType, m) : m\n          )\n        })\n      );\n    } else {\n      result.push(\n        (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationSequence)({\n          sequenceId,\n          retroactive: false,\n          sequence: Object.keys(migrations.migrators).map((k) => Number(k)).sort((a, b) => a - b).map(\n            (version) => ({\n              id: `${sequenceId}/${version}`,\n              scope: \"record\",\n              filter: (r) => r.typeName === typeName && r.type === subType,\n              up: (record) => {\n                const result2 = migrations.migrators[version].up(record);\n                if (result2) {\n                  return result2;\n                }\n              },\n              down: (record) => {\n                const result2 = migrations.migrators[version].down(record);\n                if (result2) {\n                  return result2;\n                }\n              }\n            })\n          )\n        })\n      );\n    }\n  }\n  return result;\n}\nfunction createPropsMigration(typeName, subType, m) {\n  return {\n    id: m.id,\n    dependsOn: m.dependsOn,\n    scope: \"record\",\n    filter: (r) => r.typeName === typeName && r.type === subType,\n    up: (record) => {\n      const result = m.up(record.props);\n      if (result) {\n        record.props = result;\n      }\n    },\n    down: typeof m.down === \"function\" ? (record) => {\n      const result = m.down(record.props);\n      if (result) {\n        record.props = result;\n      }\n    } : void 0\n  };\n}\n\n//# sourceMappingURL=recordsWithProps.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9yZWNvcmRzV2l0aFByb3BzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR3VCO0FBQ2dCO0FBQ3ZDO0FBQ0E7QUFDQSx5QkFBeUIsWUFBWTtBQUNyQyxxQ0FBcUMsU0FBUyxHQUFHLFFBQVE7QUFDekQ7QUFDQTtBQUNBLFFBQVEsc0VBQXVCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE1BQU07QUFDTixNQUFNLHFEQUFNO0FBQ1o7QUFDQSxtQ0FBbUMsU0FBUyxFQUFFLHFEQUFVLEVBQUUsd0JBQXdCLFdBQVcsVUFBVSxzQkFBc0I7QUFDN0g7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLFFBQVEsc0VBQXVCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxNQUFNO0FBQ047QUFDQSxRQUFRLHNFQUF1QjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixXQUFXLEdBQUcsUUFBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3JlY29yZHNXaXRoUHJvcHMubWpzPzU2YzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgUmVjb3JkVHlwZSxcbiAgY3JlYXRlTWlncmF0aW9uU2VxdWVuY2Vcbn0gZnJvbSBcIkB0bGRyYXcvc3RvcmVcIjtcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5mdW5jdGlvbiBwcm9jZXNzUHJvcHNNaWdyYXRpb25zKHR5cGVOYW1lLCByZWNvcmRzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBmb3IgKGNvbnN0IFtzdWJUeXBlLCB7IG1pZ3JhdGlvbnMgfV0gb2YgT2JqZWN0LmVudHJpZXMocmVjb3JkcykpIHtcbiAgICBjb25zdCBzZXF1ZW5jZUlkID0gYGNvbS50bGRyYXcuJHt0eXBlTmFtZX0uJHtzdWJUeXBlfWA7XG4gICAgaWYgKCFtaWdyYXRpb25zKSB7XG4gICAgICByZXN1bHQucHVzaChcbiAgICAgICAgY3JlYXRlTWlncmF0aW9uU2VxdWVuY2Uoe1xuICAgICAgICAgIHNlcXVlbmNlSWQsXG4gICAgICAgICAgcmV0cm9hY3RpdmU6IGZhbHNlLFxuICAgICAgICAgIHNlcXVlbmNlOiBbXVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKFwic2VxdWVuY2VJZFwiIGluIG1pZ3JhdGlvbnMpIHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgc2VxdWVuY2VJZCA9PT0gbWlncmF0aW9ucy5zZXF1ZW5jZUlkLFxuICAgICAgICBgc2VxdWVuY2VJZCBtaXNtYXRjaCBmb3IgJHtzdWJUeXBlfSAke1JlY29yZFR5cGV9IG1pZ3JhdGlvbnMuIEV4cGVjdGVkICcke3NlcXVlbmNlSWR9JywgZ290ICcke21pZ3JhdGlvbnMuc2VxdWVuY2VJZH0nYFxuICAgICAgKTtcbiAgICAgIHJlc3VsdC5wdXNoKG1pZ3JhdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAoXCJzZXF1ZW5jZVwiIGluIG1pZ3JhdGlvbnMpIHtcbiAgICAgIHJlc3VsdC5wdXNoKFxuICAgICAgICBjcmVhdGVNaWdyYXRpb25TZXF1ZW5jZSh7XG4gICAgICAgICAgc2VxdWVuY2VJZCxcbiAgICAgICAgICByZXRyb2FjdGl2ZTogZmFsc2UsXG4gICAgICAgICAgc2VxdWVuY2U6IG1pZ3JhdGlvbnMuc2VxdWVuY2UubWFwKFxuICAgICAgICAgICAgKG0pID0+IFwiaWRcIiBpbiBtID8gY3JlYXRlUHJvcHNNaWdyYXRpb24odHlwZU5hbWUsIHN1YlR5cGUsIG0pIDogbVxuICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wdXNoKFxuICAgICAgICBjcmVhdGVNaWdyYXRpb25TZXF1ZW5jZSh7XG4gICAgICAgICAgc2VxdWVuY2VJZCxcbiAgICAgICAgICByZXRyb2FjdGl2ZTogZmFsc2UsXG4gICAgICAgICAgc2VxdWVuY2U6IE9iamVjdC5rZXlzKG1pZ3JhdGlvbnMubWlncmF0b3JzKS5tYXAoKGspID0+IE51bWJlcihrKSkuc29ydCgoYSwgYikgPT4gYSAtIGIpLm1hcChcbiAgICAgICAgICAgICh2ZXJzaW9uKSA9PiAoe1xuICAgICAgICAgICAgICBpZDogYCR7c2VxdWVuY2VJZH0vJHt2ZXJzaW9ufWAsXG4gICAgICAgICAgICAgIHNjb3BlOiBcInJlY29yZFwiLFxuICAgICAgICAgICAgICBmaWx0ZXI6IChyKSA9PiByLnR5cGVOYW1lID09PSB0eXBlTmFtZSAmJiByLnR5cGUgPT09IHN1YlR5cGUsXG4gICAgICAgICAgICAgIHVwOiAocmVjb3JkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0MiA9IG1pZ3JhdGlvbnMubWlncmF0b3JzW3ZlcnNpb25dLnVwKHJlY29yZCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdDIpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZG93bjogKHJlY29yZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdDIgPSBtaWdyYXRpb25zLm1pZ3JhdG9yc1t2ZXJzaW9uXS5kb3duKHJlY29yZCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdDIpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY3JlYXRlUHJvcHNNaWdyYXRpb24odHlwZU5hbWUsIHN1YlR5cGUsIG0pIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogbS5pZCxcbiAgICBkZXBlbmRzT246IG0uZGVwZW5kc09uLFxuICAgIHNjb3BlOiBcInJlY29yZFwiLFxuICAgIGZpbHRlcjogKHIpID0+IHIudHlwZU5hbWUgPT09IHR5cGVOYW1lICYmIHIudHlwZSA9PT0gc3ViVHlwZSxcbiAgICB1cDogKHJlY29yZCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gbS51cChyZWNvcmQucHJvcHMpO1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICByZWNvcmQucHJvcHMgPSByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcbiAgICBkb3duOiB0eXBlb2YgbS5kb3duID09PSBcImZ1bmN0aW9uXCIgPyAocmVjb3JkKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBtLmRvd24ocmVjb3JkLnByb3BzKTtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgcmVjb3JkLnByb3BzID0gcmVzdWx0O1xuICAgICAgfVxuICAgIH0gOiB2b2lkIDBcbiAgfTtcbn1cbmV4cG9ydCB7XG4gIGNyZWF0ZVByb3BzTWlncmF0aW9uLFxuICBwcm9jZXNzUHJvcHNNaWdyYXRpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVjb3Jkc1dpdGhQcm9wcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/recordsWithProps.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLArrowShape.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLArrowShape.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrowShapeArrowheadEndStyle: () => (/* binding */ ArrowShapeArrowheadEndStyle),\n/* harmony export */   ArrowShapeArrowheadStartStyle: () => (/* binding */ ArrowShapeArrowheadStartStyle),\n/* harmony export */   arrowShapeMigrations: () => (/* binding */ arrowShapeMigrations),\n/* harmony export */   arrowShapeProps: () => (/* binding */ arrowShapeProps),\n/* harmony export */   arrowShapeVersions: () => (/* binding */ arrowShapeVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../records/TLBinding.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLBinding.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _recordsWithProps_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../recordsWithProps.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/recordsWithProps.mjs\");\n/* harmony import */ var _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles/StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../styles/TLDashStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs\");\n/* harmony import */ var _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../styles/TLFillStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs\");\n/* harmony import */ var _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../styles/TLFontStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst arrowheadTypes = [\n  \"arrow\",\n  \"triangle\",\n  \"square\",\n  \"dot\",\n  \"pipe\",\n  \"diamond\",\n  \"inverted\",\n  \"bar\",\n  \"none\"\n];\nconst ArrowShapeArrowheadStartStyle = _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_6__.StyleProp.defineEnum(\"tldraw:arrowheadStart\", {\n  defaultValue: \"none\",\n  values: arrowheadTypes\n});\nconst ArrowShapeArrowheadEndStyle = _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_6__.StyleProp.defineEnum(\"tldraw:arrowheadEnd\", {\n  defaultValue: \"arrow\",\n  values: arrowheadTypes\n});\nconst arrowShapeProps = {\n  labelColor: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_7__.DefaultLabelColorStyle,\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_7__.DefaultColorStyle,\n  fill: _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_9__.DefaultFillStyle,\n  dash: _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_8__.DefaultDashStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_11__.DefaultSizeStyle,\n  arrowheadStart: ArrowShapeArrowheadStartStyle,\n  arrowheadEnd: ArrowShapeArrowheadEndStyle,\n  font: _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_10__.DefaultFontStyle,\n  start: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.vecModelValidator,\n  end: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.vecModelValidator,\n  bend: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n  text: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n  labelPosition: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number\n};\nconst arrowShapeVersions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_4__.createShapePropsMigrationIds)(\"arrow\", {\n  AddLabelColor: 1,\n  AddIsPrecise: 2,\n  AddLabelPosition: 3,\n  ExtractBindings: 4\n});\nfunction propsMigration(migration) {\n  return (0,_recordsWithProps_mjs__WEBPACK_IMPORTED_MODULE_5__.createPropsMigration)(\"shape\", \"arrow\", migration);\n}\nconst arrowShapeMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationSequence)({\n  sequenceId: \"com.tldraw.shape.arrow\",\n  sequence: [\n    propsMigration({\n      id: arrowShapeVersions.AddLabelColor,\n      up: (props) => {\n        props.labelColor = \"black\";\n      },\n      down: \"retired\"\n    }),\n    propsMigration({\n      id: arrowShapeVersions.AddIsPrecise,\n      up: ({ start, end }) => {\n        if (start.type === \"binding\") {\n          start.isPrecise = !(start.normalizedAnchor.x === 0.5 && start.normalizedAnchor.y === 0.5);\n        }\n        if (end.type === \"binding\") {\n          end.isPrecise = !(end.normalizedAnchor.x === 0.5 && end.normalizedAnchor.y === 0.5);\n        }\n      },\n      down: ({ start, end }) => {\n        if (start.type === \"binding\") {\n          if (!start.isPrecise) {\n            start.normalizedAnchor = { x: 0.5, y: 0.5 };\n          }\n          delete start.isPrecise;\n        }\n        if (end.type === \"binding\") {\n          if (!end.isPrecise) {\n            end.normalizedAnchor = { x: 0.5, y: 0.5 };\n          }\n          delete end.isPrecise;\n        }\n      }\n    }),\n    propsMigration({\n      id: arrowShapeVersions.AddLabelPosition,\n      up: (props) => {\n        props.labelPosition = 0.5;\n      },\n      down: (props) => {\n        delete props.labelPosition;\n      }\n    }),\n    {\n      id: arrowShapeVersions.ExtractBindings,\n      scope: \"store\",\n      up: (oldStore) => {\n        const arrows = Object.values(oldStore).filter(\n          (r) => r.typeName === \"shape\" && r.type === \"arrow\"\n        );\n        for (const arrow of arrows) {\n          const { start, end } = arrow.props;\n          if (start.type === \"binding\") {\n            const id = (0,_records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_3__.createBindingId)();\n            const binding = {\n              typeName: \"binding\",\n              id,\n              type: \"arrow\",\n              fromId: arrow.id,\n              toId: start.boundShapeId,\n              meta: {},\n              props: {\n                terminal: \"start\",\n                normalizedAnchor: start.normalizedAnchor,\n                isExact: start.isExact,\n                isPrecise: start.isPrecise\n              }\n            };\n            oldStore[id] = binding;\n            arrow.props.start = { x: 0, y: 0 };\n          } else {\n            delete arrow.props.start.type;\n          }\n          if (end.type === \"binding\") {\n            const id = (0,_records_TLBinding_mjs__WEBPACK_IMPORTED_MODULE_3__.createBindingId)();\n            const binding = {\n              typeName: \"binding\",\n              id,\n              type: \"arrow\",\n              fromId: arrow.id,\n              toId: end.boundShapeId,\n              meta: {},\n              props: {\n                terminal: \"end\",\n                normalizedAnchor: end.normalizedAnchor,\n                isExact: end.isExact,\n                isPrecise: end.isPrecise\n              }\n            };\n            oldStore[id] = binding;\n            arrow.props.end = { x: 0, y: 0 };\n          } else {\n            delete arrow.props.end.type;\n          }\n        }\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLArrowShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExBcnJvd1NoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3RDtBQUNuQjtBQUMwQjtBQUNKO0FBQ1c7QUFDUDtBQUNYO0FBQ21DO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsNERBQVM7QUFDL0M7QUFDQTtBQUNBLENBQUM7QUFDRCxvQ0FBb0MsNERBQVM7QUFDN0M7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGNBQWMsNEVBQXNCO0FBQ3BDLFNBQVMsdUVBQWlCO0FBQzFCLFFBQVEscUVBQWdCO0FBQ3hCLFFBQVEscUVBQWdCO0FBQ3hCLFFBQVEsc0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQSxRQUFRLHNFQUFnQjtBQUN4QixTQUFTLHVFQUFpQjtBQUMxQixPQUFPLHVFQUFpQjtBQUN4QixRQUFRLHNEQUFRO0FBQ2hCLFFBQVEsc0RBQVE7QUFDaEIsaUJBQWlCLHNEQUFRO0FBQ3pCO0FBQ0EsMkJBQTJCLGtGQUE0QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLFNBQVMsMkVBQW9CO0FBQzdCO0FBQ0EsNkJBQTZCLHNFQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWEsWUFBWTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsZUFBZSxZQUFZO0FBQzNCO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixhQUFhO0FBQy9CO0FBQ0EsdUJBQXVCLHVFQUFlO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUVBQWU7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEMsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFPQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc2hhcGVzL1RMQXJyb3dTaGFwZS5tanM/NDZkZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVNaWdyYXRpb25TZXF1ZW5jZSB9IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IHZlY01vZGVsVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvZ2VvbWV0cnktdHlwZXMubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVCaW5kaW5nSWQgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTEJpbmRpbmcubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzIH0gZnJvbSBcIi4uL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVByb3BzTWlncmF0aW9uIH0gZnJvbSBcIi4uL3JlY29yZHNXaXRoUHJvcHMubWpzXCI7XG5pbXBvcnQgeyBTdHlsZVByb3AgfSBmcm9tIFwiLi4vc3R5bGVzL1N0eWxlUHJvcC5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRDb2xvclN0eWxlLCBEZWZhdWx0TGFiZWxDb2xvclN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTENvbG9yU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0RGFzaFN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTERhc2hTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRGaWxsU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMRmlsbFN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdEZvbnRTdHlsZSB9IGZyb20gXCIuLi9zdHlsZXMvVExGb250U3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0U2l6ZVN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTFNpemVTdHlsZS5tanNcIjtcbmNvbnN0IGFycm93aGVhZFR5cGVzID0gW1xuICBcImFycm93XCIsXG4gIFwidHJpYW5nbGVcIixcbiAgXCJzcXVhcmVcIixcbiAgXCJkb3RcIixcbiAgXCJwaXBlXCIsXG4gIFwiZGlhbW9uZFwiLFxuICBcImludmVydGVkXCIsXG4gIFwiYmFyXCIsXG4gIFwibm9uZVwiXG5dO1xuY29uc3QgQXJyb3dTaGFwZUFycm93aGVhZFN0YXJ0U3R5bGUgPSBTdHlsZVByb3AuZGVmaW5lRW51bShcInRsZHJhdzphcnJvd2hlYWRTdGFydFwiLCB7XG4gIGRlZmF1bHRWYWx1ZTogXCJub25lXCIsXG4gIHZhbHVlczogYXJyb3doZWFkVHlwZXNcbn0pO1xuY29uc3QgQXJyb3dTaGFwZUFycm93aGVhZEVuZFN0eWxlID0gU3R5bGVQcm9wLmRlZmluZUVudW0oXCJ0bGRyYXc6YXJyb3doZWFkRW5kXCIsIHtcbiAgZGVmYXVsdFZhbHVlOiBcImFycm93XCIsXG4gIHZhbHVlczogYXJyb3doZWFkVHlwZXNcbn0pO1xuY29uc3QgYXJyb3dTaGFwZVByb3BzID0ge1xuICBsYWJlbENvbG9yOiBEZWZhdWx0TGFiZWxDb2xvclN0eWxlLFxuICBjb2xvcjogRGVmYXVsdENvbG9yU3R5bGUsXG4gIGZpbGw6IERlZmF1bHRGaWxsU3R5bGUsXG4gIGRhc2g6IERlZmF1bHREYXNoU3R5bGUsXG4gIHNpemU6IERlZmF1bHRTaXplU3R5bGUsXG4gIGFycm93aGVhZFN0YXJ0OiBBcnJvd1NoYXBlQXJyb3doZWFkU3RhcnRTdHlsZSxcbiAgYXJyb3doZWFkRW5kOiBBcnJvd1NoYXBlQXJyb3doZWFkRW5kU3R5bGUsXG4gIGZvbnQ6IERlZmF1bHRGb250U3R5bGUsXG4gIHN0YXJ0OiB2ZWNNb2RlbFZhbGlkYXRvcixcbiAgZW5kOiB2ZWNNb2RlbFZhbGlkYXRvcixcbiAgYmVuZDogVC5udW1iZXIsXG4gIHRleHQ6IFQuc3RyaW5nLFxuICBsYWJlbFBvc2l0aW9uOiBULm51bWJlclxufTtcbmNvbnN0IGFycm93U2hhcGVWZXJzaW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMoXCJhcnJvd1wiLCB7XG4gIEFkZExhYmVsQ29sb3I6IDEsXG4gIEFkZElzUHJlY2lzZTogMixcbiAgQWRkTGFiZWxQb3NpdGlvbjogMyxcbiAgRXh0cmFjdEJpbmRpbmdzOiA0XG59KTtcbmZ1bmN0aW9uIHByb3BzTWlncmF0aW9uKG1pZ3JhdGlvbikge1xuICByZXR1cm4gY3JlYXRlUHJvcHNNaWdyYXRpb24oXCJzaGFwZVwiLCBcImFycm93XCIsIG1pZ3JhdGlvbik7XG59XG5jb25zdCBhcnJvd1NoYXBlTWlncmF0aW9ucyA9IGNyZWF0ZU1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2VJZDogXCJjb20udGxkcmF3LnNoYXBlLmFycm93XCIsXG4gIHNlcXVlbmNlOiBbXG4gICAgcHJvcHNNaWdyYXRpb24oe1xuICAgICAgaWQ6IGFycm93U2hhcGVWZXJzaW9ucy5BZGRMYWJlbENvbG9yLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBwcm9wcy5sYWJlbENvbG9yID0gXCJibGFja1wiO1xuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSksXG4gICAgcHJvcHNNaWdyYXRpb24oe1xuICAgICAgaWQ6IGFycm93U2hhcGVWZXJzaW9ucy5BZGRJc1ByZWNpc2UsXG4gICAgICB1cDogKHsgc3RhcnQsIGVuZCB9KSA9PiB7XG4gICAgICAgIGlmIChzdGFydC50eXBlID09PSBcImJpbmRpbmdcIikge1xuICAgICAgICAgIHN0YXJ0LmlzUHJlY2lzZSA9ICEoc3RhcnQubm9ybWFsaXplZEFuY2hvci54ID09PSAwLjUgJiYgc3RhcnQubm9ybWFsaXplZEFuY2hvci55ID09PSAwLjUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmQudHlwZSA9PT0gXCJiaW5kaW5nXCIpIHtcbiAgICAgICAgICBlbmQuaXNQcmVjaXNlID0gIShlbmQubm9ybWFsaXplZEFuY2hvci54ID09PSAwLjUgJiYgZW5kLm5vcm1hbGl6ZWRBbmNob3IueSA9PT0gMC41KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246ICh7IHN0YXJ0LCBlbmQgfSkgPT4ge1xuICAgICAgICBpZiAoc3RhcnQudHlwZSA9PT0gXCJiaW5kaW5nXCIpIHtcbiAgICAgICAgICBpZiAoIXN0YXJ0LmlzUHJlY2lzZSkge1xuICAgICAgICAgICAgc3RhcnQubm9ybWFsaXplZEFuY2hvciA9IHsgeDogMC41LCB5OiAwLjUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVsZXRlIHN0YXJ0LmlzUHJlY2lzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5kLnR5cGUgPT09IFwiYmluZGluZ1wiKSB7XG4gICAgICAgICAgaWYgKCFlbmQuaXNQcmVjaXNlKSB7XG4gICAgICAgICAgICBlbmQubm9ybWFsaXplZEFuY2hvciA9IHsgeDogMC41LCB5OiAwLjUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVsZXRlIGVuZC5pc1ByZWNpc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcbiAgICBwcm9wc01pZ3JhdGlvbih7XG4gICAgICBpZDogYXJyb3dTaGFwZVZlcnNpb25zLkFkZExhYmVsUG9zaXRpb24sXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHByb3BzLmxhYmVsUG9zaXRpb24gPSAwLjU7XG4gICAgICB9LFxuICAgICAgZG93bjogKHByb3BzKSA9PiB7XG4gICAgICAgIGRlbGV0ZSBwcm9wcy5sYWJlbFBvc2l0aW9uO1xuICAgICAgfVxuICAgIH0pLFxuICAgIHtcbiAgICAgIGlkOiBhcnJvd1NoYXBlVmVyc2lvbnMuRXh0cmFjdEJpbmRpbmdzLFxuICAgICAgc2NvcGU6IFwic3RvcmVcIixcbiAgICAgIHVwOiAob2xkU3RvcmUpID0+IHtcbiAgICAgICAgY29uc3QgYXJyb3dzID0gT2JqZWN0LnZhbHVlcyhvbGRTdG9yZSkuZmlsdGVyKFxuICAgICAgICAgIChyKSA9PiByLnR5cGVOYW1lID09PSBcInNoYXBlXCIgJiYgci50eXBlID09PSBcImFycm93XCJcbiAgICAgICAgKTtcbiAgICAgICAgZm9yIChjb25zdCBhcnJvdyBvZiBhcnJvd3MpIHtcbiAgICAgICAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IGFycm93LnByb3BzO1xuICAgICAgICAgIGlmIChzdGFydC50eXBlID09PSBcImJpbmRpbmdcIikge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBjcmVhdGVCaW5kaW5nSWQoKTtcbiAgICAgICAgICAgIGNvbnN0IGJpbmRpbmcgPSB7XG4gICAgICAgICAgICAgIHR5cGVOYW1lOiBcImJpbmRpbmdcIixcbiAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgIHR5cGU6IFwiYXJyb3dcIixcbiAgICAgICAgICAgICAgZnJvbUlkOiBhcnJvdy5pZCxcbiAgICAgICAgICAgICAgdG9JZDogc3RhcnQuYm91bmRTaGFwZUlkLFxuICAgICAgICAgICAgICBtZXRhOiB7fSxcbiAgICAgICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgICAgICB0ZXJtaW5hbDogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRBbmNob3I6IHN0YXJ0Lm5vcm1hbGl6ZWRBbmNob3IsXG4gICAgICAgICAgICAgICAgaXNFeGFjdDogc3RhcnQuaXNFeGFjdCxcbiAgICAgICAgICAgICAgICBpc1ByZWNpc2U6IHN0YXJ0LmlzUHJlY2lzZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb2xkU3RvcmVbaWRdID0gYmluZGluZztcbiAgICAgICAgICAgIGFycm93LnByb3BzLnN0YXJ0ID0geyB4OiAwLCB5OiAwIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSBhcnJvdy5wcm9wcy5zdGFydC50eXBlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZW5kLnR5cGUgPT09IFwiYmluZGluZ1wiKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGNyZWF0ZUJpbmRpbmdJZCgpO1xuICAgICAgICAgICAgY29uc3QgYmluZGluZyA9IHtcbiAgICAgICAgICAgICAgdHlwZU5hbWU6IFwiYmluZGluZ1wiLFxuICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgdHlwZTogXCJhcnJvd1wiLFxuICAgICAgICAgICAgICBmcm9tSWQ6IGFycm93LmlkLFxuICAgICAgICAgICAgICB0b0lkOiBlbmQuYm91bmRTaGFwZUlkLFxuICAgICAgICAgICAgICBtZXRhOiB7fSxcbiAgICAgICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgICAgICB0ZXJtaW5hbDogXCJlbmRcIixcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkQW5jaG9yOiBlbmQubm9ybWFsaXplZEFuY2hvcixcbiAgICAgICAgICAgICAgICBpc0V4YWN0OiBlbmQuaXNFeGFjdCxcbiAgICAgICAgICAgICAgICBpc1ByZWNpc2U6IGVuZC5pc1ByZWNpc2VcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9sZFN0b3JlW2lkXSA9IGJpbmRpbmc7XG4gICAgICAgICAgICBhcnJvdy5wcm9wcy5lbmQgPSB7IHg6IDAsIHk6IDAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlIGFycm93LnByb3BzLmVuZC50eXBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5leHBvcnQge1xuICBBcnJvd1NoYXBlQXJyb3doZWFkRW5kU3R5bGUsXG4gIEFycm93U2hhcGVBcnJvd2hlYWRTdGFydFN0eWxlLFxuICBhcnJvd1NoYXBlTWlncmF0aW9ucyxcbiAgYXJyb3dTaGFwZVByb3BzLFxuICBhcnJvd1NoYXBlVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEFycm93U2hhcGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLArrowShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createShapeValidator: () => (/* binding */ createShapeValidator),\n/* harmony export */   parentIdValidator: () => (/* binding */ parentIdValidator),\n/* harmony export */   shapeIdValidator: () => (/* binding */ shapeIdValidator)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_TLOpacity_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/TLOpacity.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/TLOpacity.mjs\");\n/* harmony import */ var _misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/id-validator.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/id-validator.mjs\");\n\n\n\nconst parentIdValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string.refine((id) => {\n  if (!id.startsWith(\"page:\") && !id.startsWith(\"shape:\")) {\n    throw new Error('Parent ID must start with \"page:\" or \"shape:\"');\n  }\n  return id;\n});\nconst shapeIdValidator = (0,_misc_id_validator_mjs__WEBPACK_IMPORTED_MODULE_2__.idValidator)(\"shape\");\nfunction createShapeValidator(type, props, meta) {\n  return _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n    id: shapeIdValidator,\n    typeName: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literal(\"shape\"),\n    x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n    y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n    rotation: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n    index: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.indexKey,\n    parentId: parentIdValidator,\n    type: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literal(type),\n    isLocked: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n    opacity: _misc_TLOpacity_mjs__WEBPACK_IMPORTED_MODULE_1__.opacityValidator,\n    props: props ? _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object(props) : _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.jsonValue,\n    meta: meta ? _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object(meta) : _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.jsonValue\n  });\n}\n\n//# sourceMappingURL=TLBaseShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExCYXNlU2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFxQztBQUNvQjtBQUNGO0FBQ3ZELDBCQUEwQixzREFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCx5QkFBeUIsbUVBQVc7QUFDcEM7QUFDQSxTQUFTLHNEQUFRO0FBQ2pCO0FBQ0EsY0FBYyx1REFBUztBQUN2QixPQUFPLHNEQUFRO0FBQ2YsT0FBTyxzREFBUTtBQUNmLGNBQWMsc0RBQVE7QUFDdEIsV0FBVyx3REFBVTtBQUNyQjtBQUNBLFVBQVUsdURBQVM7QUFDbkIsY0FBYyx1REFBUztBQUN2QixhQUFhLGlFQUFnQjtBQUM3QixtQkFBbUIsc0RBQVEsVUFBVSx5REFBVztBQUNoRCxpQkFBaUIsc0RBQVEsU0FBUyx5REFBVztBQUM3QyxHQUFHO0FBQ0g7QUFLRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc2hhcGVzL1RMQmFzZVNoYXBlLm1qcz85ZjE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgb3BhY2l0eVZhbGlkYXRvciB9IGZyb20gXCIuLi9taXNjL1RMT3BhY2l0eS5tanNcIjtcbmltcG9ydCB7IGlkVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvaWQtdmFsaWRhdG9yLm1qc1wiO1xuY29uc3QgcGFyZW50SWRWYWxpZGF0b3IgPSBULnN0cmluZy5yZWZpbmUoKGlkKSA9PiB7XG4gIGlmICghaWQuc3RhcnRzV2l0aChcInBhZ2U6XCIpICYmICFpZC5zdGFydHNXaXRoKFwic2hhcGU6XCIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdQYXJlbnQgSUQgbXVzdCBzdGFydCB3aXRoIFwicGFnZTpcIiBvciBcInNoYXBlOlwiJyk7XG4gIH1cbiAgcmV0dXJuIGlkO1xufSk7XG5jb25zdCBzaGFwZUlkVmFsaWRhdG9yID0gaWRWYWxpZGF0b3IoXCJzaGFwZVwiKTtcbmZ1bmN0aW9uIGNyZWF0ZVNoYXBlVmFsaWRhdG9yKHR5cGUsIHByb3BzLCBtZXRhKSB7XG4gIHJldHVybiBULm9iamVjdCh7XG4gICAgaWQ6IHNoYXBlSWRWYWxpZGF0b3IsXG4gICAgdHlwZU5hbWU6IFQubGl0ZXJhbChcInNoYXBlXCIpLFxuICAgIHg6IFQubnVtYmVyLFxuICAgIHk6IFQubnVtYmVyLFxuICAgIHJvdGF0aW9uOiBULm51bWJlcixcbiAgICBpbmRleDogVC5pbmRleEtleSxcbiAgICBwYXJlbnRJZDogcGFyZW50SWRWYWxpZGF0b3IsXG4gICAgdHlwZTogVC5saXRlcmFsKHR5cGUpLFxuICAgIGlzTG9ja2VkOiBULmJvb2xlYW4sXG4gICAgb3BhY2l0eTogb3BhY2l0eVZhbGlkYXRvcixcbiAgICBwcm9wczogcHJvcHMgPyBULm9iamVjdChwcm9wcykgOiBULmpzb25WYWx1ZSxcbiAgICBtZXRhOiBtZXRhID8gVC5vYmplY3QobWV0YSkgOiBULmpzb25WYWx1ZVxuICB9KTtcbn1cbmV4cG9ydCB7XG4gIGNyZWF0ZVNoYXBlVmFsaWRhdG9yLFxuICBwYXJlbnRJZFZhbGlkYXRvcixcbiAgc2hhcGVJZFZhbGlkYXRvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMQmFzZVNoYXBlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBaseShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBookmarkShape.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBookmarkShape.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bookmarkShapeMigrations: () => (/* binding */ bookmarkShapeMigrations),\n/* harmony export */   bookmarkShapeProps: () => (/* binding */ bookmarkShapeProps),\n/* harmony export */   bookmarkShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../assets/TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n\n\n\nconst bookmarkShapeProps = {\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  assetId: _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__.assetIdValidator.nullable(),\n  url: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationIds)(\"bookmark\", {\n  NullAssetId: 1,\n  MakeUrlsValid: 2\n});\nconst bookmarkShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.NullAssetId,\n      up: (props) => {\n        if (props.assetId === void 0) {\n          props.assetId = null;\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.MakeUrlsValid,\n      up: (props) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl.isValid(props.url)) {\n          props.url = \"\";\n        }\n      },\n      down: (_props) => {\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLBookmarkShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExCb29rbWFya1NoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBcUM7QUFDd0I7QUFDNEM7QUFDekc7QUFDQSxLQUFLLDZEQUFlO0FBQ3BCLEtBQUssNkRBQWU7QUFDcEIsV0FBVyxxRUFBZ0I7QUFDM0IsT0FBTyx1REFBUztBQUNoQjtBQUNBLGlCQUFpQixrRkFBNEI7QUFDN0M7QUFDQTtBQUNBLENBQUM7QUFDRCxnQ0FBZ0MsdUZBQWlDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdURBQVM7QUFDdEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFLQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc2hhcGVzL1RMQm9va21hcmtTaGFwZS5tanM/YzkyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGFzc2V0SWRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vYXNzZXRzL1RMQmFzZUFzc2V0Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcywgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlIH0gZnJvbSBcIi4uL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmNvbnN0IGJvb2ttYXJrU2hhcGVQcm9wcyA9IHtcbiAgdzogVC5ub25aZXJvTnVtYmVyLFxuICBoOiBULm5vblplcm9OdW1iZXIsXG4gIGFzc2V0SWQ6IGFzc2V0SWRWYWxpZGF0b3IubnVsbGFibGUoKSxcbiAgdXJsOiBULmxpbmtVcmxcbn07XG5jb25zdCBWZXJzaW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMoXCJib29rbWFya1wiLCB7XG4gIE51bGxBc3NldElkOiAxLFxuICBNYWtlVXJsc1ZhbGlkOiAyXG59KTtcbmNvbnN0IGJvb2ttYXJrU2hhcGVNaWdyYXRpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuTnVsbEFzc2V0SWQsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIGlmIChwcm9wcy5hc3NldElkID09PSB2b2lkIDApIHtcbiAgICAgICAgICBwcm9wcy5hc3NldElkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuTWFrZVVybHNWYWxpZCxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgaWYgKCFULmxpbmtVcmwuaXNWYWxpZChwcm9wcy51cmwpKSB7XG4gICAgICAgICAgcHJvcHMudXJsID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IChfcHJvcHMpID0+IHtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuZXhwb3J0IHtcbiAgYm9va21hcmtTaGFwZU1pZ3JhdGlvbnMsXG4gIGJvb2ttYXJrU2hhcGVQcm9wcyxcbiAgVmVyc2lvbnMgYXMgYm9va21hcmtTaGFwZVZlcnNpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExCb29rbWFya1NoYXBlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLBookmarkShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLDrawShape.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLDrawShape.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DrawShapeSegment: () => (/* binding */ DrawShapeSegment),\n/* harmony export */   drawShapeMigrations: () => (/* binding */ drawShapeMigrations),\n/* harmony export */   drawShapeProps: () => (/* binding */ drawShapeProps),\n/* harmony export */   drawShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/TLDashStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs\");\n/* harmony import */ var _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles/TLFillStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n\n\n\n\n\n\n\nconst DrawShapeSegment = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n  type: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literalEnum(\"free\", \"straight\"),\n  points: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.arrayOf(_misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_1__.vecModelValidator)\n});\nconst drawShapeProps = {\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultColorStyle,\n  fill: _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_5__.DefaultFillStyle,\n  dash: _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultDashStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultSizeStyle,\n  segments: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.arrayOf(DrawShapeSegment),\n  isComplete: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  isClosed: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  isPen: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationIds)(\"draw\", {\n  AddInPen: 1\n});\nconst drawShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.AddInPen,\n      up: (props) => {\n        const { points } = props.segments[0];\n        if (points.length === 0) {\n          props.isPen = false;\n          return;\n        }\n        let isPen = !(points[0].z === 0 || points[0].z === 0.5);\n        if (points[1]) {\n          isPen = isPen && !(points[1].z === 0 || points[1].z === 0.5);\n        }\n        props.isPen = isPen;\n      },\n      down: \"retired\"\n    }\n  ]\n});\n\n//# sourceMappingURL=TLDrawShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExEcmF3U2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXFDO0FBQzBCO0FBQzBDO0FBQzFDO0FBQ0Y7QUFDQTtBQUNBO0FBQzdELHlCQUF5QixzREFBUTtBQUNqQyxRQUFRLDJEQUFhO0FBQ3JCLFVBQVUsdURBQVMsQ0FBQyx1RUFBaUI7QUFDckMsQ0FBQztBQUNEO0FBQ0EsU0FBUyx1RUFBaUI7QUFDMUIsUUFBUSxxRUFBZ0I7QUFDeEIsUUFBUSxxRUFBZ0I7QUFDeEIsUUFBUSxxRUFBZ0I7QUFDeEIsWUFBWSx1REFBUztBQUNyQixjQUFjLHVEQUFTO0FBQ3ZCLFlBQVksdURBQVM7QUFDckIsU0FBUyx1REFBUztBQUNsQjtBQUNBLGlCQUFpQixrRkFBNEI7QUFDN0M7QUFDQSxDQUFDO0FBQ0QsNEJBQTRCLHVGQUFpQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBTUM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3NoYXBlcy9UTERyYXdTaGFwZS5tanM/MmU0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IHZlY01vZGVsVmFsaWRhdG9yIH0gZnJvbSBcIi4uL21pc2MvZ2VvbWV0cnktdHlwZXMubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uSWRzLCBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2UgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTFNoYXBlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdENvbG9yU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMQ29sb3JTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHREYXNoU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMRGFzaFN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdEZpbGxTdHlsZSB9IGZyb20gXCIuLi9zdHlsZXMvVExGaWxsU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0U2l6ZVN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTFNpemVTdHlsZS5tanNcIjtcbmNvbnN0IERyYXdTaGFwZVNlZ21lbnQgPSBULm9iamVjdCh7XG4gIHR5cGU6IFQubGl0ZXJhbEVudW0oXCJmcmVlXCIsIFwic3RyYWlnaHRcIiksXG4gIHBvaW50czogVC5hcnJheU9mKHZlY01vZGVsVmFsaWRhdG9yKVxufSk7XG5jb25zdCBkcmF3U2hhcGVQcm9wcyA9IHtcbiAgY29sb3I6IERlZmF1bHRDb2xvclN0eWxlLFxuICBmaWxsOiBEZWZhdWx0RmlsbFN0eWxlLFxuICBkYXNoOiBEZWZhdWx0RGFzaFN0eWxlLFxuICBzaXplOiBEZWZhdWx0U2l6ZVN0eWxlLFxuICBzZWdtZW50czogVC5hcnJheU9mKERyYXdTaGFwZVNlZ21lbnQpLFxuICBpc0NvbXBsZXRlOiBULmJvb2xlYW4sXG4gIGlzQ2xvc2VkOiBULmJvb2xlYW4sXG4gIGlzUGVuOiBULmJvb2xlYW5cbn07XG5jb25zdCBWZXJzaW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMoXCJkcmF3XCIsIHtcbiAgQWRkSW5QZW46IDFcbn0pO1xuY29uc3QgZHJhd1NoYXBlTWlncmF0aW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlOiBbXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLkFkZEluUGVuLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBjb25zdCB7IHBvaW50cyB9ID0gcHJvcHMuc2VnbWVudHNbMF07XG4gICAgICAgIGlmIChwb2ludHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcHJvcHMuaXNQZW4gPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGlzUGVuID0gIShwb2ludHNbMF0ueiA9PT0gMCB8fCBwb2ludHNbMF0ueiA9PT0gMC41KTtcbiAgICAgICAgaWYgKHBvaW50c1sxXSkge1xuICAgICAgICAgIGlzUGVuID0gaXNQZW4gJiYgIShwb2ludHNbMV0ueiA9PT0gMCB8fCBwb2ludHNbMV0ueiA9PT0gMC41KTtcbiAgICAgICAgfVxuICAgICAgICBwcm9wcy5pc1BlbiA9IGlzUGVuO1xuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfVxuICBdXG59KTtcbmV4cG9ydCB7XG4gIERyYXdTaGFwZVNlZ21lbnQsXG4gIGRyYXdTaGFwZU1pZ3JhdGlvbnMsXG4gIGRyYXdTaGFwZVByb3BzLFxuICBWZXJzaW9ucyBhcyBkcmF3U2hhcGVWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMRHJhd1NoYXBlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLDrawShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLEmbedShape.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLEmbedShape.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EMBED_DEFINITIONS: () => (/* binding */ EMBED_DEFINITIONS),\n/* harmony export */   embedShapeMigrations: () => (/* binding */ embedShapeMigrations),\n/* harmony export */   embedShapePermissionDefaults: () => (/* binding */ embedShapePermissionDefaults),\n/* harmony export */   embedShapeProps: () => (/* binding */ embedShapeProps),\n/* harmony export */   embedShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n\n\nconst TLDRAW_APP_RE = /(^\\/r\\/[^/]+\\/?$)/;\nconst safeParseUrl = (url) => {\n  try {\n    return new URL(url);\n  } catch (err) {\n    return;\n  }\n};\nconst EMBED_DEFINITIONS = [\n  {\n    type: \"tldraw\",\n    title: \"tldraw\",\n    hostnames: [\"beta.tldraw.com\", \"tldraw.com\", \"localhost:3000\"],\n    minWidth: 300,\n    minHeight: 300,\n    width: 720,\n    height: 500,\n    doesResize: true,\n    overridePermissions: {\n      \"allow-top-navigation\": true\n    },\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(TLDRAW_APP_RE)) {\n        return url;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(TLDRAW_APP_RE)) {\n        return url;\n      }\n      return;\n    }\n  },\n  {\n    type: \"figma\",\n    title: \"Figma\",\n    hostnames: [\"figma.com\"],\n    width: 720,\n    height: 500,\n    doesResize: true,\n    toEmbedUrl: (url) => {\n      if (!!url.match(\n        // eslint-disable-next-line no-useless-escape\n        /https:\\/\\/([\\w\\.-]+\\.)?figma.com\\/(file|proto)\\/([0-9a-zA-Z]{22,128})(?:\\/.*)?$/\n      ) && !url.includes(\"figma.com/embed\")) {\n        return `https://www.figma.com/embed?embed_host=share&url=${url}`;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(/^\\/embed\\/?$/)) {\n        const outUrl = urlObj.searchParams.get(\"url\");\n        if (outUrl) {\n          return outUrl;\n        }\n      }\n      return;\n    }\n  },\n  {\n    type: \"google_maps\",\n    title: \"Google Maps\",\n    hostnames: [\"google.*\"],\n    width: 720,\n    height: 500,\n    doesResize: true,\n    overridePermissions: {\n      \"allow-presentation\": true\n    },\n    toEmbedUrl: (url) => {\n      if (url.includes(\"/maps/\")) {\n        const match = url.match(/@(.*),(.*),(.*)z/);\n        let result;\n        if (match) {\n          const [, lat, lng, z] = match;\n          const host = new URL(url).host.replace(\"www.\", \"\");\n          result = `https://${host}/maps/embed/v1/view?key=${process.env.NEXT_PUBLIC_GC_API_KEY}&center=${lat},${lng}&zoom=${z}`;\n        } else {\n          result = \"\";\n        }\n        return result;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (!urlObj)\n        return;\n      const matches = urlObj.pathname.match(/^\\/maps\\/embed\\/v1\\/view\\/?$/);\n      if (matches && urlObj.searchParams.has(\"center\") && urlObj.searchParams.get(\"zoom\")) {\n        const zoom = urlObj.searchParams.get(\"zoom\");\n        const [lat, lon] = urlObj.searchParams.get(\"center\").split(\",\");\n        return `https://www.google.com/maps/@${lat},${lon},${zoom}z`;\n      }\n      return;\n    }\n  },\n  {\n    type: \"val_town\",\n    title: \"Val Town\",\n    hostnames: [\"val.town\"],\n    minWidth: 260,\n    minHeight: 100,\n    width: 720,\n    height: 500,\n    doesResize: true,\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      const matches = urlObj && urlObj.pathname.match(/\\/v\\/(.+)\\/?/);\n      if (matches) {\n        return `https://www.val.town/embed/${matches[1]}`;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      const matches = urlObj && urlObj.pathname.match(/\\/embed\\/(.+)\\/?/);\n      if (matches) {\n        return `https://www.val.town/v/${matches[1]}`;\n      }\n      return;\n    }\n  },\n  {\n    type: \"codesandbox\",\n    title: \"CodeSandbox\",\n    hostnames: [\"codesandbox.io\"],\n    minWidth: 300,\n    minHeight: 300,\n    width: 720,\n    height: 500,\n    doesResize: true,\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      const matches = urlObj && urlObj.pathname.match(/\\/s\\/([^/]+)\\/?/);\n      if (matches) {\n        return `https://codesandbox.io/embed/${matches[1]}`;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      const matches = urlObj && urlObj.pathname.match(/\\/embed\\/([^/]+)\\/?/);\n      if (matches) {\n        return `https://codesandbox.io/s/${matches[1]}`;\n      }\n      return;\n    }\n  },\n  {\n    type: \"codepen\",\n    title: \"Codepen\",\n    hostnames: [\"codepen.io\"],\n    minWidth: 300,\n    minHeight: 300,\n    width: 520,\n    height: 400,\n    doesResize: true,\n    toEmbedUrl: (url) => {\n      const CODEPEN_URL_REGEXP = /https:\\/\\/codepen.io\\/([^/]+)\\/pen\\/([^/]+)/;\n      const matches = url.match(CODEPEN_URL_REGEXP);\n      if (matches) {\n        const [_, user, id] = matches;\n        return `https://codepen.io/${user}/embed/${id}`;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const CODEPEN_EMBED_REGEXP = /https:\\/\\/codepen.io\\/([^/]+)\\/embed\\/([^/]+)/;\n      const matches = url.match(CODEPEN_EMBED_REGEXP);\n      if (matches) {\n        const [_, user, id] = matches;\n        return `https://codepen.io/${user}/pen/${id}`;\n      }\n      return;\n    }\n  },\n  {\n    type: \"scratch\",\n    title: \"Scratch\",\n    hostnames: [\"scratch.mit.edu\"],\n    width: 520,\n    height: 400,\n    doesResize: false,\n    toEmbedUrl: (url) => {\n      const SCRATCH_URL_REGEXP = /https?:\\/\\/scratch.mit.edu\\/projects\\/([^/]+)/;\n      const matches = url.match(SCRATCH_URL_REGEXP);\n      if (matches) {\n        const [_, id] = matches;\n        return `https://scratch.mit.edu/projects/embed/${id}`;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const SCRATCH_EMBED_REGEXP = /https:\\/\\/scratch.mit.edu\\/projects\\/embed\\/([^/]+)/;\n      const matches = url.match(SCRATCH_EMBED_REGEXP);\n      if (matches) {\n        const [_, id] = matches;\n        return `https://scratch.mit.edu/projects/${id}`;\n      }\n      return;\n    }\n  },\n  {\n    type: \"youtube\",\n    title: \"YouTube\",\n    hostnames: [\"*.youtube.com\", \"youtube.com\", \"youtu.be\"],\n    width: 800,\n    height: 450,\n    doesResize: true,\n    overridePermissions: {\n      \"allow-presentation\": true,\n      \"allow-popups-to-escape-sandbox\": true\n    },\n    isAspectRatioLocked: true,\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (!urlObj)\n        return;\n      const hostname = urlObj.hostname.replace(/^www./, \"\");\n      if (hostname === \"youtu.be\") {\n        const videoId = urlObj.pathname.split(\"/\").filter(Boolean)[0];\n        return `https://www.youtube.com/embed/${videoId}`;\n      } else if ((hostname === \"youtube.com\" || hostname === \"m.youtube.com\") && urlObj.pathname.match(/^\\/watch/)) {\n        const videoId = urlObj.searchParams.get(\"v\");\n        return `https://www.youtube.com/embed/${videoId}`;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (!urlObj)\n        return;\n      const hostname = urlObj.hostname.replace(/^www./, \"\");\n      if (hostname === \"youtube.com\") {\n        const matches = urlObj.pathname.match(/^\\/embed\\/([^/]+)\\/?/);\n        if (matches) {\n          return `https://www.youtube.com/watch?v=${matches[1]}`;\n        }\n      }\n      return;\n    }\n  },\n  {\n    type: \"google_calendar\",\n    title: \"Google Calendar\",\n    hostnames: [\"calendar.google.*\"],\n    width: 720,\n    height: 500,\n    minWidth: 460,\n    minHeight: 360,\n    doesResize: true,\n    instructionLink: \"https://support.google.com/calendar/answer/41207?hl=en\",\n    overridePermissions: {\n      \"allow-popups-to-escape-sandbox\": true\n    },\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      const cidQs = urlObj?.searchParams.get(\"cid\");\n      if (urlObj?.pathname.match(/\\/calendar\\/u\\/0/) && cidQs) {\n        urlObj.pathname = \"/calendar/embed\";\n        const keys = Array.from(urlObj.searchParams.keys());\n        for (const key of keys) {\n          urlObj.searchParams.delete(key);\n        }\n        urlObj.searchParams.set(\"src\", cidQs);\n        return urlObj.href;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      const srcQs = urlObj?.searchParams.get(\"src\");\n      if (urlObj?.pathname.match(/\\/calendar\\/embed/) && srcQs) {\n        urlObj.pathname = \"/calendar/u/0\";\n        const keys = Array.from(urlObj.searchParams.keys());\n        for (const key of keys) {\n          urlObj.searchParams.delete(key);\n        }\n        urlObj.searchParams.set(\"cid\", srcQs);\n        return urlObj.href;\n      }\n      return;\n    }\n  },\n  {\n    type: \"google_slides\",\n    title: \"Google Slides\",\n    hostnames: [\"docs.google.*\"],\n    width: 720,\n    height: 500,\n    minWidth: 460,\n    minHeight: 360,\n    doesResize: true,\n    overridePermissions: {\n      \"allow-popups-to-escape-sandbox\": true\n    },\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj?.pathname.match(/^\\/presentation/) && urlObj?.pathname.match(/\\/pub\\/?$/)) {\n        urlObj.pathname = urlObj.pathname.replace(/\\/pub$/, \"/embed\");\n        const keys = Array.from(urlObj.searchParams.keys());\n        for (const key of keys) {\n          urlObj.searchParams.delete(key);\n        }\n        return urlObj.href;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj?.pathname.match(/^\\/presentation/) && urlObj?.pathname.match(/\\/embed\\/?$/)) {\n        urlObj.pathname = urlObj.pathname.replace(/\\/embed$/, \"/pub\");\n        const keys = Array.from(urlObj.searchParams.keys());\n        for (const key of keys) {\n          urlObj.searchParams.delete(key);\n        }\n        return urlObj.href;\n      }\n      return;\n    }\n  },\n  {\n    type: \"github_gist\",\n    title: \"GitHub Gist\",\n    hostnames: [\"gist.github.com\"],\n    width: 720,\n    height: 500,\n    doesResize: true,\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(/\\/([^/]+)\\/([^/]+)/)) {\n        if (!url.split(\"/\").pop())\n          return;\n        return url;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(/\\/([^/]+)\\/([^/]+)/)) {\n        if (!url.split(\"/\").pop())\n          return;\n        return url;\n      }\n      return;\n    }\n  },\n  {\n    type: \"replit\",\n    title: \"Replit\",\n    hostnames: [\"replit.com\"],\n    width: 720,\n    height: 500,\n    doesResize: true,\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(/\\/@([^/]+)\\/([^/]+)/)) {\n        return `${url}?embed=true`;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(/\\/@([^/]+)\\/([^/]+)/) && urlObj.searchParams.has(\"embed\")) {\n        urlObj.searchParams.delete(\"embed\");\n        return urlObj.href;\n      }\n      return;\n    }\n  },\n  {\n    type: \"felt\",\n    title: \"Felt\",\n    hostnames: [\"felt.com\"],\n    width: 720,\n    height: 500,\n    doesResize: true,\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(/^\\/map\\//)) {\n        return urlObj.origin + \"/embed\" + urlObj.pathname;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(/^\\/embed\\/map\\//)) {\n        urlObj.pathname = urlObj.pathname.replace(/^\\/embed/, \"\");\n        return urlObj.href;\n      }\n      return;\n    }\n  },\n  {\n    type: \"spotify\",\n    title: \"Spotify\",\n    hostnames: [\"open.spotify.com\"],\n    width: 720,\n    height: 500,\n    minHeight: 500,\n    overrideOutlineRadius: 12,\n    doesResize: true,\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(/^\\/(artist|album)\\//)) {\n        return urlObj.origin + \"/embed\" + urlObj.pathname;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(/^\\/embed\\/(artist|album)\\//)) {\n        return urlObj.origin + urlObj.pathname.replace(/^\\/embed/, \"\");\n      }\n      return;\n    }\n  },\n  {\n    type: \"vimeo\",\n    title: \"Vimeo\",\n    hostnames: [\"vimeo.com\", \"player.vimeo.com\"],\n    width: 640,\n    height: 360,\n    doesResize: true,\n    isAspectRatioLocked: true,\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.hostname === \"vimeo.com\") {\n        if (urlObj.pathname.match(/^\\/[0-9]+/)) {\n          return \"https://player.vimeo.com/video/\" + urlObj.pathname.split(\"/\")[1] + \"?title=0&byline=0\";\n        }\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.hostname === \"player.vimeo.com\") {\n        const matches = urlObj.pathname.match(/^\\/video\\/([^/]+)\\/?$/);\n        if (matches) {\n          return \"https://vimeo.com/\" + matches[1];\n        }\n      }\n      return;\n    }\n  },\n  {\n    type: \"excalidraw\",\n    title: \"Excalidraw\",\n    hostnames: [\"excalidraw.com\"],\n    width: 720,\n    height: 500,\n    doesResize: true,\n    isAspectRatioLocked: true,\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.hash.match(/#room=/)) {\n        return url;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.hash.match(/#room=/)) {\n        return url;\n      }\n      return;\n    }\n  },\n  {\n    type: \"observable\",\n    title: \"Observable\",\n    hostnames: [\"observablehq.com\"],\n    width: 720,\n    height: 500,\n    doesResize: true,\n    isAspectRatioLocked: false,\n    backgroundColor: \"#fff\",\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(/^\\/@([^/]+)\\/([^/]+)\\/?$/)) {\n        return `${urlObj.origin}/embed${urlObj.pathname}?cell=*`;\n      }\n      if (urlObj && urlObj.pathname.match(/^\\/d\\/([^/]+)\\/?$/)) {\n        const pathName = urlObj.pathname.replace(/^\\/d/, \"\");\n        return `${urlObj.origin}/embed${pathName}?cell=*`;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.pathname.match(/^\\/embed\\/@([^/]+)\\/([^/]+)\\/?$/)) {\n        return `${urlObj.origin}${urlObj.pathname.replace(\"/embed\", \"\")}#cell-*`;\n      }\n      if (urlObj && urlObj.pathname.match(/^\\/embed\\/([^/]+)\\/?$/)) {\n        return `${urlObj.origin}${urlObj.pathname.replace(\"/embed\", \"/d\")}#cell-*`;\n      }\n      return;\n    }\n  },\n  {\n    type: \"desmos\",\n    title: \"Desmos\",\n    hostnames: [\"desmos.com\"],\n    width: 700,\n    height: 450,\n    doesResize: true,\n    toEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.hostname === \"www.desmos.com\" && urlObj.pathname.match(/^\\/calculator\\/([^/]+)\\/?$/) && urlObj.search === \"\" && urlObj.hash === \"\") {\n        return `${url}?embed`;\n      }\n      return;\n    },\n    fromEmbedUrl: (url) => {\n      const urlObj = safeParseUrl(url);\n      if (urlObj && urlObj.hostname === \"www.desmos.com\" && urlObj.pathname.match(/^\\/calculator\\/([^/]+)\\/?$/) && urlObj.search === \"?embed\" && urlObj.hash === \"\") {\n        return url.replace(\"?embed\", \"\");\n      }\n      return;\n    }\n  }\n];\nconst embedShapePermissionDefaults = {\n  // ========================================================================================\n  // Disabled permissions\n  // ========================================================================================\n  // [MDN] Experimental: Allows for downloads to occur without a gesture from the user.\n  // [REASON] Disabled because otherwise the <iframe/> can trick the user on behalf of us to perform an action.\n  \"allow-downloads-without-user-activation\": false,\n  // [MDN] Allows for downloads to occur with a gesture from the user.\n  // [REASON] Disabled because otherwise the <iframe/> can trick the user on behalf of us to perform an action.\n  \"allow-downloads\": false,\n  // [MDN] Lets the resource open modal windows.\n  // [REASON] The <iframe/> could 'window.prompt(\"Enter your tldraw password\")'.\n  \"allow-modals\": false,\n  // [MDN] Lets the resource lock the screen orientation.\n  // [REASON] Would interfere with the tldraw interface.\n  \"allow-orientation-lock\": false,\n  // [MDN] Lets the resource use the Pointer Lock API.\n  // [REASON] Maybe we should allow this for games embeds (scratch/codepen/codesandbox).\n  \"allow-pointer-lock\": false,\n  // [MDN] Allows popups (such as window.open(), target=\"_blank\", or showModalDialog()). If this keyword is not used, the popup will silently fail to open.\n  // [REASON] We want to allow embeds to link back to their original sites (e.g. YouTube).\n  \"allow-popups\": true,\n  // [MDN] Lets the sandboxed document open new windows without those windows inheriting the sandboxing. For example, this can safely sandbox an advertisement without forcing the same restrictions upon the page the ad links to.\n  // [REASON] We shouldn't allow popups as a embed could pretend to be us by opening a mocked version of tldraw. This is very unobvious when it is performed as an action within our app.\n  \"allow-popups-to-escape-sandbox\": false,\n  // [MDN] Lets the resource start a presentation session.\n  // [REASON] Prevents embed from navigating away from tldraw and pretending to be us.\n  \"allow-presentation\": false,\n  // [MDN] Experimental: Lets the resource request access to the parent's storage capabilities with the Storage Access API.\n  // [REASON] We don't want anyone else to access our storage.\n  \"allow-storage-access-by-user-activation\": false,\n  // [MDN] Lets the resource navigate the top-level browsing context (the one named _top).\n  // [REASON] Prevents embed from navigating away from tldraw and pretending to be us.\n  \"allow-top-navigation\": false,\n  // [MDN] Lets the resource navigate the top-level browsing context, but only if initiated by a user gesture.\n  // [REASON] Prevents embed from navigating away from tldraw and pretending to be us.\n  \"allow-top-navigation-by-user-activation\": false,\n  // ========================================================================================\n  // Enabled permissions\n  // ========================================================================================\n  // [MDN] Lets the resource run scripts (but not create popup windows).\n  \"allow-scripts\": true,\n  // [MDN] If this token is not used, the resource is treated as being from a special origin that always fails the same-origin policy (potentially preventing access to data storage/cookies and some JavaScript APIs).\n  \"allow-same-origin\": true,\n  // [MDN] Allows the resource to submit forms. If this keyword is not used, form submission is blocked.\n  \"allow-forms\": true\n};\nconst embedShapeProps = {\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  url: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationIds)(\"embed\", {\n  GenOriginalUrlInEmbed: 1,\n  RemoveDoesResize: 2,\n  RemoveTmpOldUrl: 3,\n  RemovePermissionOverrides: 4\n});\nconst embedShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.GenOriginalUrlInEmbed,\n      // add tmpOldUrl property\n      up: (props) => {\n        try {\n          const url = props.url;\n          const host = new URL(url).host.replace(\"www.\", \"\");\n          let originalUrl;\n          for (const localEmbedDef of EMBED_DEFINITIONS) {\n            if (localEmbedDef.hostnames.includes(host)) {\n              try {\n                originalUrl = localEmbedDef.fromEmbedUrl(url);\n              } catch (err) {\n                console.warn(err);\n              }\n            }\n          }\n          props.tmpOldUrl = props.url;\n          props.url = originalUrl ?? \"\";\n        } catch (e) {\n          props.url = \"\";\n          props.tmpOldUrl = props.url;\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.RemoveDoesResize,\n      up: (props) => {\n        delete props.doesResize;\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.RemoveTmpOldUrl,\n      up: (props) => {\n        delete props.tmpOldUrl;\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.RemovePermissionOverrides,\n      up: (props) => {\n        delete props.overridePermissions;\n      },\n      down: \"retired\"\n    }\n  ]\n});\n\n//# sourceMappingURL=TLEmbedShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExFbWJlZFNoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFDO0FBQ29FO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0UsT0FBTztBQUM3RTtBQUNBLG1FQUFtRSxJQUFJO0FBQ3ZFO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLEtBQUssMEJBQTBCLG1DQUFtQyxVQUFVLElBQUksR0FBRyxJQUFJLFFBQVEsRUFBRTtBQUMvSCxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLElBQUksR0FBRyxJQUFJLEdBQUcsS0FBSztBQUNsRTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsV0FBVztBQUN4RDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLFdBQVc7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFdBQVc7QUFDMUQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxXQUFXO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLEtBQUssU0FBUyxHQUFHO0FBQ3REO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxLQUFLLE9BQU8sR0FBRztBQUNwRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELEdBQUc7QUFDNUQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELEdBQUc7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsUUFBUTtBQUN4RCxRQUFRO0FBQ1I7QUFDQSxnREFBZ0QsUUFBUTtBQUN4RDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsV0FBVztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsSUFBSTtBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsY0FBYyxRQUFRLGdCQUFnQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsY0FBYyxRQUFRLFNBQVM7QUFDakQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsY0FBYyxFQUFFLHNDQUFzQztBQUN4RTtBQUNBO0FBQ0Esa0JBQWtCLGNBQWMsRUFBRSx3Q0FBd0M7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLElBQUk7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDZEQUFlO0FBQ3BCLEtBQUssNkRBQWU7QUFDcEIsT0FBTyxzREFBUTtBQUNmO0FBQ0EsaUJBQWlCLGtGQUE0QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw2QkFBNkIsdUZBQWlDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQU9DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExFbWJlZFNoYXBlLm1qcz81NjVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcywgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlIH0gZnJvbSBcIi4uL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmNvbnN0IFRMRFJBV19BUFBfUkUgPSAvKF5cXC9yXFwvW14vXStcXC8/JCkvO1xuY29uc3Qgc2FmZVBhcnNlVXJsID0gKHVybCkgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBuZXcgVVJMKHVybCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybjtcbiAgfVxufTtcbmNvbnN0IEVNQkVEX0RFRklOSVRJT05TID0gW1xuICB7XG4gICAgdHlwZTogXCJ0bGRyYXdcIixcbiAgICB0aXRsZTogXCJ0bGRyYXdcIixcbiAgICBob3N0bmFtZXM6IFtcImJldGEudGxkcmF3LmNvbVwiLCBcInRsZHJhdy5jb21cIiwgXCJsb2NhbGhvc3Q6MzAwMFwiXSxcbiAgICBtaW5XaWR0aDogMzAwLFxuICAgIG1pbkhlaWdodDogMzAwLFxuICAgIHdpZHRoOiA3MjAsXG4gICAgaGVpZ2h0OiA1MDAsXG4gICAgZG9lc1Jlc2l6ZTogdHJ1ZSxcbiAgICBvdmVycmlkZVBlcm1pc3Npb25zOiB7XG4gICAgICBcImFsbG93LXRvcC1uYXZpZ2F0aW9uXCI6IHRydWVcbiAgICB9LFxuICAgIHRvRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgaWYgKHVybE9iaiAmJiB1cmxPYmoucGF0aG5hbWUubWF0Y2goVExEUkFXX0FQUF9SRSkpIHtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9LFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5wYXRobmFtZS5tYXRjaChUTERSQVdfQVBQX1JFKSkge1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHR5cGU6IFwiZmlnbWFcIixcbiAgICB0aXRsZTogXCJGaWdtYVwiLFxuICAgIGhvc3RuYW1lczogW1wiZmlnbWEuY29tXCJdLFxuICAgIHdpZHRoOiA3MjAsXG4gICAgaGVpZ2h0OiA1MDAsXG4gICAgZG9lc1Jlc2l6ZTogdHJ1ZSxcbiAgICB0b0VtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBpZiAoISF1cmwubWF0Y2goXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2VsZXNzLWVzY2FwZVxuICAgICAgICAvaHR0cHM6XFwvXFwvKFtcXHdcXC4tXStcXC4pP2ZpZ21hLmNvbVxcLyhmaWxlfHByb3RvKVxcLyhbMC05YS16QS1aXXsyMiwxMjh9KSg/OlxcLy4qKT8kL1xuICAgICAgKSAmJiAhdXJsLmluY2x1ZGVzKFwiZmlnbWEuY29tL2VtYmVkXCIpKSB7XG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly93d3cuZmlnbWEuY29tL2VtYmVkP2VtYmVkX2hvc3Q9c2hhcmUmdXJsPSR7dXJsfWA7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSxcbiAgICBmcm9tRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgaWYgKHVybE9iaiAmJiB1cmxPYmoucGF0aG5hbWUubWF0Y2goL15cXC9lbWJlZFxcLz8kLykpIHtcbiAgICAgICAgY29uc3Qgb3V0VXJsID0gdXJsT2JqLnNlYXJjaFBhcmFtcy5nZXQoXCJ1cmxcIik7XG4gICAgICAgIGlmIChvdXRVcmwpIHtcbiAgICAgICAgICByZXR1cm4gb3V0VXJsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LFxuICB7XG4gICAgdHlwZTogXCJnb29nbGVfbWFwc1wiLFxuICAgIHRpdGxlOiBcIkdvb2dsZSBNYXBzXCIsXG4gICAgaG9zdG5hbWVzOiBbXCJnb29nbGUuKlwiXSxcbiAgICB3aWR0aDogNzIwLFxuICAgIGhlaWdodDogNTAwLFxuICAgIGRvZXNSZXNpemU6IHRydWUsXG4gICAgb3ZlcnJpZGVQZXJtaXNzaW9uczoge1xuICAgICAgXCJhbGxvdy1wcmVzZW50YXRpb25cIjogdHJ1ZVxuICAgIH0sXG4gICAgdG9FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgaWYgKHVybC5pbmNsdWRlcyhcIi9tYXBzL1wiKSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IHVybC5tYXRjaCgvQCguKiksKC4qKSwoLiopei8pO1xuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBjb25zdCBbLCBsYXQsIGxuZywgel0gPSBtYXRjaDtcbiAgICAgICAgICBjb25zdCBob3N0ID0gbmV3IFVSTCh1cmwpLmhvc3QucmVwbGFjZShcInd3dy5cIiwgXCJcIik7XG4gICAgICAgICAgcmVzdWx0ID0gYGh0dHBzOi8vJHtob3N0fS9tYXBzL2VtYmVkL3YxL3ZpZXc/a2V5PSR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR0NfQVBJX0tFWX0mY2VudGVyPSR7bGF0fSwke2xuZ30mem9vbT0ke3p9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSxcbiAgICBmcm9tRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgaWYgKCF1cmxPYmopXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSB1cmxPYmoucGF0aG5hbWUubWF0Y2goL15cXC9tYXBzXFwvZW1iZWRcXC92MVxcL3ZpZXdcXC8/JC8pO1xuICAgICAgaWYgKG1hdGNoZXMgJiYgdXJsT2JqLnNlYXJjaFBhcmFtcy5oYXMoXCJjZW50ZXJcIikgJiYgdXJsT2JqLnNlYXJjaFBhcmFtcy5nZXQoXCJ6b29tXCIpKSB7XG4gICAgICAgIGNvbnN0IHpvb20gPSB1cmxPYmouc2VhcmNoUGFyYW1zLmdldChcInpvb21cIik7XG4gICAgICAgIGNvbnN0IFtsYXQsIGxvbl0gPSB1cmxPYmouc2VhcmNoUGFyYW1zLmdldChcImNlbnRlclwiKS5zcGxpdChcIixcIik7XG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9tYXBzL0Ake2xhdH0sJHtsb259LCR7em9vbX16YDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0eXBlOiBcInZhbF90b3duXCIsXG4gICAgdGl0bGU6IFwiVmFsIFRvd25cIixcbiAgICBob3N0bmFtZXM6IFtcInZhbC50b3duXCJdLFxuICAgIG1pbldpZHRoOiAyNjAsXG4gICAgbWluSGVpZ2h0OiAxMDAsXG4gICAgd2lkdGg6IDcyMCxcbiAgICBoZWlnaHQ6IDUwMCxcbiAgICBkb2VzUmVzaXplOiB0cnVlLFxuICAgIHRvRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgY29uc3QgbWF0Y2hlcyA9IHVybE9iaiAmJiB1cmxPYmoucGF0aG5hbWUubWF0Y2goL1xcL3ZcXC8oLispXFwvPy8pO1xuICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIGBodHRwczovL3d3dy52YWwudG93bi9lbWJlZC8ke21hdGNoZXNbMV19YDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9LFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBjb25zdCBtYXRjaGVzID0gdXJsT2JqICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXFwvZW1iZWRcXC8oLispXFwvPy8pO1xuICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIGBodHRwczovL3d3dy52YWwudG93bi92LyR7bWF0Y2hlc1sxXX1gO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHR5cGU6IFwiY29kZXNhbmRib3hcIixcbiAgICB0aXRsZTogXCJDb2RlU2FuZGJveFwiLFxuICAgIGhvc3RuYW1lczogW1wiY29kZXNhbmRib3guaW9cIl0sXG4gICAgbWluV2lkdGg6IDMwMCxcbiAgICBtaW5IZWlnaHQ6IDMwMCxcbiAgICB3aWR0aDogNzIwLFxuICAgIGhlaWdodDogNTAwLFxuICAgIGRvZXNSZXNpemU6IHRydWUsXG4gICAgdG9FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBjb25zdCBtYXRjaGVzID0gdXJsT2JqICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXFwvc1xcLyhbXi9dKylcXC8/Lyk7XG4gICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICByZXR1cm4gYGh0dHBzOi8vY29kZXNhbmRib3guaW8vZW1iZWQvJHttYXRjaGVzWzFdfWA7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSxcbiAgICBmcm9tRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgY29uc3QgbWF0Y2hlcyA9IHVybE9iaiAmJiB1cmxPYmoucGF0aG5hbWUubWF0Y2goL1xcL2VtYmVkXFwvKFteL10rKVxcLz8vKTtcbiAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly9jb2Rlc2FuZGJveC5pby9zLyR7bWF0Y2hlc1sxXX1gO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHR5cGU6IFwiY29kZXBlblwiLFxuICAgIHRpdGxlOiBcIkNvZGVwZW5cIixcbiAgICBob3N0bmFtZXM6IFtcImNvZGVwZW4uaW9cIl0sXG4gICAgbWluV2lkdGg6IDMwMCxcbiAgICBtaW5IZWlnaHQ6IDMwMCxcbiAgICB3aWR0aDogNTIwLFxuICAgIGhlaWdodDogNDAwLFxuICAgIGRvZXNSZXNpemU6IHRydWUsXG4gICAgdG9FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgQ09ERVBFTl9VUkxfUkVHRVhQID0gL2h0dHBzOlxcL1xcL2NvZGVwZW4uaW9cXC8oW14vXSspXFwvcGVuXFwvKFteL10rKS87XG4gICAgICBjb25zdCBtYXRjaGVzID0gdXJsLm1hdGNoKENPREVQRU5fVVJMX1JFR0VYUCk7XG4gICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICBjb25zdCBbXywgdXNlciwgaWRdID0gbWF0Y2hlcztcbiAgICAgICAgcmV0dXJuIGBodHRwczovL2NvZGVwZW4uaW8vJHt1c2VyfS9lbWJlZC8ke2lkfWA7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSxcbiAgICBmcm9tRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IENPREVQRU5fRU1CRURfUkVHRVhQID0gL2h0dHBzOlxcL1xcL2NvZGVwZW4uaW9cXC8oW14vXSspXFwvZW1iZWRcXC8oW14vXSspLztcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSB1cmwubWF0Y2goQ09ERVBFTl9FTUJFRF9SRUdFWFApO1xuICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgY29uc3QgW18sIHVzZXIsIGlkXSA9IG1hdGNoZXM7XG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly9jb2RlcGVuLmlvLyR7dXNlcn0vcGVuLyR7aWR9YDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0eXBlOiBcInNjcmF0Y2hcIixcbiAgICB0aXRsZTogXCJTY3JhdGNoXCIsXG4gICAgaG9zdG5hbWVzOiBbXCJzY3JhdGNoLm1pdC5lZHVcIl0sXG4gICAgd2lkdGg6IDUyMCxcbiAgICBoZWlnaHQ6IDQwMCxcbiAgICBkb2VzUmVzaXplOiBmYWxzZSxcbiAgICB0b0VtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCBTQ1JBVENIX1VSTF9SRUdFWFAgPSAvaHR0cHM/OlxcL1xcL3NjcmF0Y2gubWl0LmVkdVxcL3Byb2plY3RzXFwvKFteL10rKS87XG4gICAgICBjb25zdCBtYXRjaGVzID0gdXJsLm1hdGNoKFNDUkFUQ0hfVVJMX1JFR0VYUCk7XG4gICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICBjb25zdCBbXywgaWRdID0gbWF0Y2hlcztcbiAgICAgICAgcmV0dXJuIGBodHRwczovL3NjcmF0Y2gubWl0LmVkdS9wcm9qZWN0cy9lbWJlZC8ke2lkfWA7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSxcbiAgICBmcm9tRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IFNDUkFUQ0hfRU1CRURfUkVHRVhQID0gL2h0dHBzOlxcL1xcL3NjcmF0Y2gubWl0LmVkdVxcL3Byb2plY3RzXFwvZW1iZWRcXC8oW14vXSspLztcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSB1cmwubWF0Y2goU0NSQVRDSF9FTUJFRF9SRUdFWFApO1xuICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgY29uc3QgW18sIGlkXSA9IG1hdGNoZXM7XG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly9zY3JhdGNoLm1pdC5lZHUvcHJvamVjdHMvJHtpZH1gO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHR5cGU6IFwieW91dHViZVwiLFxuICAgIHRpdGxlOiBcIllvdVR1YmVcIixcbiAgICBob3N0bmFtZXM6IFtcIioueW91dHViZS5jb21cIiwgXCJ5b3V0dWJlLmNvbVwiLCBcInlvdXR1LmJlXCJdLFxuICAgIHdpZHRoOiA4MDAsXG4gICAgaGVpZ2h0OiA0NTAsXG4gICAgZG9lc1Jlc2l6ZTogdHJ1ZSxcbiAgICBvdmVycmlkZVBlcm1pc3Npb25zOiB7XG4gICAgICBcImFsbG93LXByZXNlbnRhdGlvblwiOiB0cnVlLFxuICAgICAgXCJhbGxvdy1wb3B1cHMtdG8tZXNjYXBlLXNhbmRib3hcIjogdHJ1ZVxuICAgIH0sXG4gICAgaXNBc3BlY3RSYXRpb0xvY2tlZDogdHJ1ZSxcbiAgICB0b0VtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICghdXJsT2JqKVxuICAgICAgICByZXR1cm47XG4gICAgICBjb25zdCBob3N0bmFtZSA9IHVybE9iai5ob3N0bmFtZS5yZXBsYWNlKC9ed3d3Li8sIFwiXCIpO1xuICAgICAgaWYgKGhvc3RuYW1lID09PSBcInlvdXR1LmJlXCIpIHtcbiAgICAgICAgY29uc3QgdmlkZW9JZCA9IHVybE9iai5wYXRobmFtZS5zcGxpdChcIi9cIikuZmlsdGVyKEJvb2xlYW4pWzBdO1xuICAgICAgICByZXR1cm4gYGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLyR7dmlkZW9JZH1gO1xuICAgICAgfSBlbHNlIGlmICgoaG9zdG5hbWUgPT09IFwieW91dHViZS5jb21cIiB8fCBob3N0bmFtZSA9PT0gXCJtLnlvdXR1YmUuY29tXCIpICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXlxcL3dhdGNoLykpIHtcbiAgICAgICAgY29uc3QgdmlkZW9JZCA9IHVybE9iai5zZWFyY2hQYXJhbXMuZ2V0KFwidlwiKTtcbiAgICAgICAgcmV0dXJuIGBodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8ke3ZpZGVvSWR9YDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9LFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBpZiAoIXVybE9iailcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY29uc3QgaG9zdG5hbWUgPSB1cmxPYmouaG9zdG5hbWUucmVwbGFjZSgvXnd3dy4vLCBcIlwiKTtcbiAgICAgIGlmIChob3N0bmFtZSA9PT0gXCJ5b3V0dWJlLmNvbVwiKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSB1cmxPYmoucGF0aG5hbWUubWF0Y2goL15cXC9lbWJlZFxcLyhbXi9dKylcXC8/Lyk7XG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgcmV0dXJuIGBodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PSR7bWF0Y2hlc1sxXX1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LFxuICB7XG4gICAgdHlwZTogXCJnb29nbGVfY2FsZW5kYXJcIixcbiAgICB0aXRsZTogXCJHb29nbGUgQ2FsZW5kYXJcIixcbiAgICBob3N0bmFtZXM6IFtcImNhbGVuZGFyLmdvb2dsZS4qXCJdLFxuICAgIHdpZHRoOiA3MjAsXG4gICAgaGVpZ2h0OiA1MDAsXG4gICAgbWluV2lkdGg6IDQ2MCxcbiAgICBtaW5IZWlnaHQ6IDM2MCxcbiAgICBkb2VzUmVzaXplOiB0cnVlLFxuICAgIGluc3RydWN0aW9uTGluazogXCJodHRwczovL3N1cHBvcnQuZ29vZ2xlLmNvbS9jYWxlbmRhci9hbnN3ZXIvNDEyMDc/aGw9ZW5cIixcbiAgICBvdmVycmlkZVBlcm1pc3Npb25zOiB7XG4gICAgICBcImFsbG93LXBvcHVwcy10by1lc2NhcGUtc2FuZGJveFwiOiB0cnVlXG4gICAgfSxcbiAgICB0b0VtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGNvbnN0IGNpZFFzID0gdXJsT2JqPy5zZWFyY2hQYXJhbXMuZ2V0KFwiY2lkXCIpO1xuICAgICAgaWYgKHVybE9iaj8ucGF0aG5hbWUubWF0Y2goL1xcL2NhbGVuZGFyXFwvdVxcLzAvKSAmJiBjaWRRcykge1xuICAgICAgICB1cmxPYmoucGF0aG5hbWUgPSBcIi9jYWxlbmRhci9lbWJlZFwiO1xuICAgICAgICBjb25zdCBrZXlzID0gQXJyYXkuZnJvbSh1cmxPYmouc2VhcmNoUGFyYW1zLmtleXMoKSk7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgICB1cmxPYmouc2VhcmNoUGFyYW1zLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHVybE9iai5zZWFyY2hQYXJhbXMuc2V0KFwic3JjXCIsIGNpZFFzKTtcbiAgICAgICAgcmV0dXJuIHVybE9iai5ocmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH0sXG4gICAgZnJvbUVtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGNvbnN0IHNyY1FzID0gdXJsT2JqPy5zZWFyY2hQYXJhbXMuZ2V0KFwic3JjXCIpO1xuICAgICAgaWYgKHVybE9iaj8ucGF0aG5hbWUubWF0Y2goL1xcL2NhbGVuZGFyXFwvZW1iZWQvKSAmJiBzcmNRcykge1xuICAgICAgICB1cmxPYmoucGF0aG5hbWUgPSBcIi9jYWxlbmRhci91LzBcIjtcbiAgICAgICAgY29uc3Qga2V5cyA9IEFycmF5LmZyb20odXJsT2JqLnNlYXJjaFBhcmFtcy5rZXlzKCkpO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgICAgdXJsT2JqLnNlYXJjaFBhcmFtcy5kZWxldGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB1cmxPYmouc2VhcmNoUGFyYW1zLnNldChcImNpZFwiLCBzcmNRcyk7XG4gICAgICAgIHJldHVybiB1cmxPYmouaHJlZjtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0eXBlOiBcImdvb2dsZV9zbGlkZXNcIixcbiAgICB0aXRsZTogXCJHb29nbGUgU2xpZGVzXCIsXG4gICAgaG9zdG5hbWVzOiBbXCJkb2NzLmdvb2dsZS4qXCJdLFxuICAgIHdpZHRoOiA3MjAsXG4gICAgaGVpZ2h0OiA1MDAsXG4gICAgbWluV2lkdGg6IDQ2MCxcbiAgICBtaW5IZWlnaHQ6IDM2MCxcbiAgICBkb2VzUmVzaXplOiB0cnVlLFxuICAgIG92ZXJyaWRlUGVybWlzc2lvbnM6IHtcbiAgICAgIFwiYWxsb3ctcG9wdXBzLXRvLWVzY2FwZS1zYW5kYm94XCI6IHRydWVcbiAgICB9LFxuICAgIHRvRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgaWYgKHVybE9iaj8ucGF0aG5hbWUubWF0Y2goL15cXC9wcmVzZW50YXRpb24vKSAmJiB1cmxPYmo/LnBhdGhuYW1lLm1hdGNoKC9cXC9wdWJcXC8/JC8pKSB7XG4gICAgICAgIHVybE9iai5wYXRobmFtZSA9IHVybE9iai5wYXRobmFtZS5yZXBsYWNlKC9cXC9wdWIkLywgXCIvZW1iZWRcIik7XG4gICAgICAgIGNvbnN0IGtleXMgPSBBcnJheS5mcm9tKHVybE9iai5zZWFyY2hQYXJhbXMua2V5cygpKTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgICAgIHVybE9iai5zZWFyY2hQYXJhbXMuZGVsZXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybE9iai5ocmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH0sXG4gICAgZnJvbUVtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICh1cmxPYmo/LnBhdGhuYW1lLm1hdGNoKC9eXFwvcHJlc2VudGF0aW9uLykgJiYgdXJsT2JqPy5wYXRobmFtZS5tYXRjaCgvXFwvZW1iZWRcXC8/JC8pKSB7XG4gICAgICAgIHVybE9iai5wYXRobmFtZSA9IHVybE9iai5wYXRobmFtZS5yZXBsYWNlKC9cXC9lbWJlZCQvLCBcIi9wdWJcIik7XG4gICAgICAgIGNvbnN0IGtleXMgPSBBcnJheS5mcm9tKHVybE9iai5zZWFyY2hQYXJhbXMua2V5cygpKTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgICAgIHVybE9iai5zZWFyY2hQYXJhbXMuZGVsZXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybE9iai5ocmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHR5cGU6IFwiZ2l0aHViX2dpc3RcIixcbiAgICB0aXRsZTogXCJHaXRIdWIgR2lzdFwiLFxuICAgIGhvc3RuYW1lczogW1wiZ2lzdC5naXRodWIuY29tXCJdLFxuICAgIHdpZHRoOiA3MjAsXG4gICAgaGVpZ2h0OiA1MDAsXG4gICAgZG9lc1Jlc2l6ZTogdHJ1ZSxcbiAgICB0b0VtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICh1cmxPYmogJiYgdXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9cXC8oW14vXSspXFwvKFteL10rKS8pKSB7XG4gICAgICAgIGlmICghdXJsLnNwbGl0KFwiL1wiKS5wb3AoKSlcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSxcbiAgICBmcm9tRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgaWYgKHVybE9iaiAmJiB1cmxPYmoucGF0aG5hbWUubWF0Y2goL1xcLyhbXi9dKylcXC8oW14vXSspLykpIHtcbiAgICAgICAgaWYgKCF1cmwuc3BsaXQoXCIvXCIpLnBvcCgpKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0eXBlOiBcInJlcGxpdFwiLFxuICAgIHRpdGxlOiBcIlJlcGxpdFwiLFxuICAgIGhvc3RuYW1lczogW1wicmVwbGl0LmNvbVwiXSxcbiAgICB3aWR0aDogNzIwLFxuICAgIGhlaWdodDogNTAwLFxuICAgIGRvZXNSZXNpemU6IHRydWUsXG4gICAgdG9FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXFwvQChbXi9dKylcXC8oW14vXSspLykpIHtcbiAgICAgICAgcmV0dXJuIGAke3VybH0/ZW1iZWQ9dHJ1ZWA7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSxcbiAgICBmcm9tRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgaWYgKHVybE9iaiAmJiB1cmxPYmoucGF0aG5hbWUubWF0Y2goL1xcL0AoW14vXSspXFwvKFteL10rKS8pICYmIHVybE9iai5zZWFyY2hQYXJhbXMuaGFzKFwiZW1iZWRcIikpIHtcbiAgICAgICAgdXJsT2JqLnNlYXJjaFBhcmFtcy5kZWxldGUoXCJlbWJlZFwiKTtcbiAgICAgICAgcmV0dXJuIHVybE9iai5ocmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHR5cGU6IFwiZmVsdFwiLFxuICAgIHRpdGxlOiBcIkZlbHRcIixcbiAgICBob3N0bmFtZXM6IFtcImZlbHQuY29tXCJdLFxuICAgIHdpZHRoOiA3MjAsXG4gICAgaGVpZ2h0OiA1MDAsXG4gICAgZG9lc1Jlc2l6ZTogdHJ1ZSxcbiAgICB0b0VtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICh1cmxPYmogJiYgdXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9eXFwvbWFwXFwvLykpIHtcbiAgICAgICAgcmV0dXJuIHVybE9iai5vcmlnaW4gKyBcIi9lbWJlZFwiICsgdXJsT2JqLnBhdGhuYW1lO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH0sXG4gICAgZnJvbUVtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICh1cmxPYmogJiYgdXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9eXFwvZW1iZWRcXC9tYXBcXC8vKSkge1xuICAgICAgICB1cmxPYmoucGF0aG5hbWUgPSB1cmxPYmoucGF0aG5hbWUucmVwbGFjZSgvXlxcL2VtYmVkLywgXCJcIik7XG4gICAgICAgIHJldHVybiB1cmxPYmouaHJlZjtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0eXBlOiBcInNwb3RpZnlcIixcbiAgICB0aXRsZTogXCJTcG90aWZ5XCIsXG4gICAgaG9zdG5hbWVzOiBbXCJvcGVuLnNwb3RpZnkuY29tXCJdLFxuICAgIHdpZHRoOiA3MjAsXG4gICAgaGVpZ2h0OiA1MDAsXG4gICAgbWluSGVpZ2h0OiA1MDAsXG4gICAgb3ZlcnJpZGVPdXRsaW5lUmFkaXVzOiAxMixcbiAgICBkb2VzUmVzaXplOiB0cnVlLFxuICAgIHRvRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgaWYgKHVybE9iaiAmJiB1cmxPYmoucGF0aG5hbWUubWF0Y2goL15cXC8oYXJ0aXN0fGFsYnVtKVxcLy8pKSB7XG4gICAgICAgIHJldHVybiB1cmxPYmoub3JpZ2luICsgXCIvZW1iZWRcIiArIHVybE9iai5wYXRobmFtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9LFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXlxcL2VtYmVkXFwvKGFydGlzdHxhbGJ1bSlcXC8vKSkge1xuICAgICAgICByZXR1cm4gdXJsT2JqLm9yaWdpbiArIHVybE9iai5wYXRobmFtZS5yZXBsYWNlKC9eXFwvZW1iZWQvLCBcIlwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB0eXBlOiBcInZpbWVvXCIsXG4gICAgdGl0bGU6IFwiVmltZW9cIixcbiAgICBob3N0bmFtZXM6IFtcInZpbWVvLmNvbVwiLCBcInBsYXllci52aW1lby5jb21cIl0sXG4gICAgd2lkdGg6IDY0MCxcbiAgICBoZWlnaHQ6IDM2MCxcbiAgICBkb2VzUmVzaXplOiB0cnVlLFxuICAgIGlzQXNwZWN0UmF0aW9Mb2NrZWQ6IHRydWUsXG4gICAgdG9FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5ob3N0bmFtZSA9PT0gXCJ2aW1lby5jb21cIikge1xuICAgICAgICBpZiAodXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9eXFwvWzAtOV0rLykpIHtcbiAgICAgICAgICByZXR1cm4gXCJodHRwczovL3BsYXllci52aW1lby5jb20vdmlkZW8vXCIgKyB1cmxPYmoucGF0aG5hbWUuc3BsaXQoXCIvXCIpWzFdICsgXCI/dGl0bGU9MCZieWxpbmU9MFwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSxcbiAgICBmcm9tRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgaWYgKHVybE9iaiAmJiB1cmxPYmouaG9zdG5hbWUgPT09IFwicGxheWVyLnZpbWVvLmNvbVwiKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSB1cmxPYmoucGF0aG5hbWUubWF0Y2goL15cXC92aWRlb1xcLyhbXi9dKylcXC8/JC8pO1xuICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgIHJldHVybiBcImh0dHBzOi8vdmltZW8uY29tL1wiICsgbWF0Y2hlc1sxXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHR5cGU6IFwiZXhjYWxpZHJhd1wiLFxuICAgIHRpdGxlOiBcIkV4Y2FsaWRyYXdcIixcbiAgICBob3N0bmFtZXM6IFtcImV4Y2FsaWRyYXcuY29tXCJdLFxuICAgIHdpZHRoOiA3MjAsXG4gICAgaGVpZ2h0OiA1MDAsXG4gICAgZG9lc1Jlc2l6ZTogdHJ1ZSxcbiAgICBpc0FzcGVjdFJhdGlvTG9ja2VkOiB0cnVlLFxuICAgIHRvRW1iZWRVcmw6ICh1cmwpID0+IHtcbiAgICAgIGNvbnN0IHVybE9iaiA9IHNhZmVQYXJzZVVybCh1cmwpO1xuICAgICAgaWYgKHVybE9iaiAmJiB1cmxPYmouaGFzaC5tYXRjaCgvI3Jvb209LykpIHtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9LFxuICAgIGZyb21FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5oYXNoLm1hdGNoKC8jcm9vbT0vKSkge1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHR5cGU6IFwib2JzZXJ2YWJsZVwiLFxuICAgIHRpdGxlOiBcIk9ic2VydmFibGVcIixcbiAgICBob3N0bmFtZXM6IFtcIm9ic2VydmFibGVocS5jb21cIl0sXG4gICAgd2lkdGg6IDcyMCxcbiAgICBoZWlnaHQ6IDUwMCxcbiAgICBkb2VzUmVzaXplOiB0cnVlLFxuICAgIGlzQXNwZWN0UmF0aW9Mb2NrZWQ6IGZhbHNlLFxuICAgIGJhY2tncm91bmRDb2xvcjogXCIjZmZmXCIsXG4gICAgdG9FbWJlZFVybDogKHVybCkgPT4ge1xuICAgICAgY29uc3QgdXJsT2JqID0gc2FmZVBhcnNlVXJsKHVybCk7XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXlxcL0AoW14vXSspXFwvKFteL10rKVxcLz8kLykpIHtcbiAgICAgICAgcmV0dXJuIGAke3VybE9iai5vcmlnaW59L2VtYmVkJHt1cmxPYmoucGF0aG5hbWV9P2NlbGw9KmA7XG4gICAgICB9XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXlxcL2RcXC8oW14vXSspXFwvPyQvKSkge1xuICAgICAgICBjb25zdCBwYXRoTmFtZSA9IHVybE9iai5wYXRobmFtZS5yZXBsYWNlKC9eXFwvZC8sIFwiXCIpO1xuICAgICAgICByZXR1cm4gYCR7dXJsT2JqLm9yaWdpbn0vZW1iZWQke3BhdGhOYW1lfT9jZWxsPSpgO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH0sXG4gICAgZnJvbUVtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICh1cmxPYmogJiYgdXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9eXFwvZW1iZWRcXC9AKFteL10rKVxcLyhbXi9dKylcXC8/JC8pKSB7XG4gICAgICAgIHJldHVybiBgJHt1cmxPYmoub3JpZ2lufSR7dXJsT2JqLnBhdGhuYW1lLnJlcGxhY2UoXCIvZW1iZWRcIiwgXCJcIil9I2NlbGwtKmA7XG4gICAgICB9XG4gICAgICBpZiAodXJsT2JqICYmIHVybE9iai5wYXRobmFtZS5tYXRjaCgvXlxcL2VtYmVkXFwvKFteL10rKVxcLz8kLykpIHtcbiAgICAgICAgcmV0dXJuIGAke3VybE9iai5vcmlnaW59JHt1cmxPYmoucGF0aG5hbWUucmVwbGFjZShcIi9lbWJlZFwiLCBcIi9kXCIpfSNjZWxsLSpgO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIHR5cGU6IFwiZGVzbW9zXCIsXG4gICAgdGl0bGU6IFwiRGVzbW9zXCIsXG4gICAgaG9zdG5hbWVzOiBbXCJkZXNtb3MuY29tXCJdLFxuICAgIHdpZHRoOiA3MDAsXG4gICAgaGVpZ2h0OiA0NTAsXG4gICAgZG9lc1Jlc2l6ZTogdHJ1ZSxcbiAgICB0b0VtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICh1cmxPYmogJiYgdXJsT2JqLmhvc3RuYW1lID09PSBcInd3dy5kZXNtb3MuY29tXCIgJiYgdXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9eXFwvY2FsY3VsYXRvclxcLyhbXi9dKylcXC8/JC8pICYmIHVybE9iai5zZWFyY2ggPT09IFwiXCIgJiYgdXJsT2JqLmhhc2ggPT09IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIGAke3VybH0/ZW1iZWRgO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH0sXG4gICAgZnJvbUVtYmVkVXJsOiAodXJsKSA9PiB7XG4gICAgICBjb25zdCB1cmxPYmogPSBzYWZlUGFyc2VVcmwodXJsKTtcbiAgICAgIGlmICh1cmxPYmogJiYgdXJsT2JqLmhvc3RuYW1lID09PSBcInd3dy5kZXNtb3MuY29tXCIgJiYgdXJsT2JqLnBhdGhuYW1lLm1hdGNoKC9eXFwvY2FsY3VsYXRvclxcLyhbXi9dKylcXC8/JC8pICYmIHVybE9iai5zZWFyY2ggPT09IFwiP2VtYmVkXCIgJiYgdXJsT2JqLmhhc2ggPT09IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIHVybC5yZXBsYWNlKFwiP2VtYmVkXCIsIFwiXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXTtcbmNvbnN0IGVtYmVkU2hhcGVQZXJtaXNzaW9uRGVmYXVsdHMgPSB7XG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRGlzYWJsZWQgcGVybWlzc2lvbnNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBbTUROXSBFeHBlcmltZW50YWw6IEFsbG93cyBmb3IgZG93bmxvYWRzIHRvIG9jY3VyIHdpdGhvdXQgYSBnZXN0dXJlIGZyb20gdGhlIHVzZXIuXG4gIC8vIFtSRUFTT05dIERpc2FibGVkIGJlY2F1c2Ugb3RoZXJ3aXNlIHRoZSA8aWZyYW1lLz4gY2FuIHRyaWNrIHRoZSB1c2VyIG9uIGJlaGFsZiBvZiB1cyB0byBwZXJmb3JtIGFuIGFjdGlvbi5cbiAgXCJhbGxvdy1kb3dubG9hZHMtd2l0aG91dC11c2VyLWFjdGl2YXRpb25cIjogZmFsc2UsXG4gIC8vIFtNRE5dIEFsbG93cyBmb3IgZG93bmxvYWRzIHRvIG9jY3VyIHdpdGggYSBnZXN0dXJlIGZyb20gdGhlIHVzZXIuXG4gIC8vIFtSRUFTT05dIERpc2FibGVkIGJlY2F1c2Ugb3RoZXJ3aXNlIHRoZSA8aWZyYW1lLz4gY2FuIHRyaWNrIHRoZSB1c2VyIG9uIGJlaGFsZiBvZiB1cyB0byBwZXJmb3JtIGFuIGFjdGlvbi5cbiAgXCJhbGxvdy1kb3dubG9hZHNcIjogZmFsc2UsXG4gIC8vIFtNRE5dIExldHMgdGhlIHJlc291cmNlIG9wZW4gbW9kYWwgd2luZG93cy5cbiAgLy8gW1JFQVNPTl0gVGhlIDxpZnJhbWUvPiBjb3VsZCAnd2luZG93LnByb21wdChcIkVudGVyIHlvdXIgdGxkcmF3IHBhc3N3b3JkXCIpJy5cbiAgXCJhbGxvdy1tb2RhbHNcIjogZmFsc2UsXG4gIC8vIFtNRE5dIExldHMgdGhlIHJlc291cmNlIGxvY2sgdGhlIHNjcmVlbiBvcmllbnRhdGlvbi5cbiAgLy8gW1JFQVNPTl0gV291bGQgaW50ZXJmZXJlIHdpdGggdGhlIHRsZHJhdyBpbnRlcmZhY2UuXG4gIFwiYWxsb3ctb3JpZW50YXRpb24tbG9ja1wiOiBmYWxzZSxcbiAgLy8gW01ETl0gTGV0cyB0aGUgcmVzb3VyY2UgdXNlIHRoZSBQb2ludGVyIExvY2sgQVBJLlxuICAvLyBbUkVBU09OXSBNYXliZSB3ZSBzaG91bGQgYWxsb3cgdGhpcyBmb3IgZ2FtZXMgZW1iZWRzIChzY3JhdGNoL2NvZGVwZW4vY29kZXNhbmRib3gpLlxuICBcImFsbG93LXBvaW50ZXItbG9ja1wiOiBmYWxzZSxcbiAgLy8gW01ETl0gQWxsb3dzIHBvcHVwcyAoc3VjaCBhcyB3aW5kb3cub3BlbigpLCB0YXJnZXQ9XCJfYmxhbmtcIiwgb3Igc2hvd01vZGFsRGlhbG9nKCkpLiBJZiB0aGlzIGtleXdvcmQgaXMgbm90IHVzZWQsIHRoZSBwb3B1cCB3aWxsIHNpbGVudGx5IGZhaWwgdG8gb3Blbi5cbiAgLy8gW1JFQVNPTl0gV2Ugd2FudCB0byBhbGxvdyBlbWJlZHMgdG8gbGluayBiYWNrIHRvIHRoZWlyIG9yaWdpbmFsIHNpdGVzIChlLmcuIFlvdVR1YmUpLlxuICBcImFsbG93LXBvcHVwc1wiOiB0cnVlLFxuICAvLyBbTUROXSBMZXRzIHRoZSBzYW5kYm94ZWQgZG9jdW1lbnQgb3BlbiBuZXcgd2luZG93cyB3aXRob3V0IHRob3NlIHdpbmRvd3MgaW5oZXJpdGluZyB0aGUgc2FuZGJveGluZy4gRm9yIGV4YW1wbGUsIHRoaXMgY2FuIHNhZmVseSBzYW5kYm94IGFuIGFkdmVydGlzZW1lbnQgd2l0aG91dCBmb3JjaW5nIHRoZSBzYW1lIHJlc3RyaWN0aW9ucyB1cG9uIHRoZSBwYWdlIHRoZSBhZCBsaW5rcyB0by5cbiAgLy8gW1JFQVNPTl0gV2Ugc2hvdWxkbid0IGFsbG93IHBvcHVwcyBhcyBhIGVtYmVkIGNvdWxkIHByZXRlbmQgdG8gYmUgdXMgYnkgb3BlbmluZyBhIG1vY2tlZCB2ZXJzaW9uIG9mIHRsZHJhdy4gVGhpcyBpcyB2ZXJ5IHVub2J2aW91cyB3aGVuIGl0IGlzIHBlcmZvcm1lZCBhcyBhbiBhY3Rpb24gd2l0aGluIG91ciBhcHAuXG4gIFwiYWxsb3ctcG9wdXBzLXRvLWVzY2FwZS1zYW5kYm94XCI6IGZhbHNlLFxuICAvLyBbTUROXSBMZXRzIHRoZSByZXNvdXJjZSBzdGFydCBhIHByZXNlbnRhdGlvbiBzZXNzaW9uLlxuICAvLyBbUkVBU09OXSBQcmV2ZW50cyBlbWJlZCBmcm9tIG5hdmlnYXRpbmcgYXdheSBmcm9tIHRsZHJhdyBhbmQgcHJldGVuZGluZyB0byBiZSB1cy5cbiAgXCJhbGxvdy1wcmVzZW50YXRpb25cIjogZmFsc2UsXG4gIC8vIFtNRE5dIEV4cGVyaW1lbnRhbDogTGV0cyB0aGUgcmVzb3VyY2UgcmVxdWVzdCBhY2Nlc3MgdG8gdGhlIHBhcmVudCdzIHN0b3JhZ2UgY2FwYWJpbGl0aWVzIHdpdGggdGhlIFN0b3JhZ2UgQWNjZXNzIEFQSS5cbiAgLy8gW1JFQVNPTl0gV2UgZG9uJ3Qgd2FudCBhbnlvbmUgZWxzZSB0byBhY2Nlc3Mgb3VyIHN0b3JhZ2UuXG4gIFwiYWxsb3ctc3RvcmFnZS1hY2Nlc3MtYnktdXNlci1hY3RpdmF0aW9uXCI6IGZhbHNlLFxuICAvLyBbTUROXSBMZXRzIHRoZSByZXNvdXJjZSBuYXZpZ2F0ZSB0aGUgdG9wLWxldmVsIGJyb3dzaW5nIGNvbnRleHQgKHRoZSBvbmUgbmFtZWQgX3RvcCkuXG4gIC8vIFtSRUFTT05dIFByZXZlbnRzIGVtYmVkIGZyb20gbmF2aWdhdGluZyBhd2F5IGZyb20gdGxkcmF3IGFuZCBwcmV0ZW5kaW5nIHRvIGJlIHVzLlxuICBcImFsbG93LXRvcC1uYXZpZ2F0aW9uXCI6IGZhbHNlLFxuICAvLyBbTUROXSBMZXRzIHRoZSByZXNvdXJjZSBuYXZpZ2F0ZSB0aGUgdG9wLWxldmVsIGJyb3dzaW5nIGNvbnRleHQsIGJ1dCBvbmx5IGlmIGluaXRpYXRlZCBieSBhIHVzZXIgZ2VzdHVyZS5cbiAgLy8gW1JFQVNPTl0gUHJldmVudHMgZW1iZWQgZnJvbSBuYXZpZ2F0aW5nIGF3YXkgZnJvbSB0bGRyYXcgYW5kIHByZXRlbmRpbmcgdG8gYmUgdXMuXG4gIFwiYWxsb3ctdG9wLW5hdmlnYXRpb24tYnktdXNlci1hY3RpdmF0aW9uXCI6IGZhbHNlLFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEVuYWJsZWQgcGVybWlzc2lvbnNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBbTUROXSBMZXRzIHRoZSByZXNvdXJjZSBydW4gc2NyaXB0cyAoYnV0IG5vdCBjcmVhdGUgcG9wdXAgd2luZG93cykuXG4gIFwiYWxsb3ctc2NyaXB0c1wiOiB0cnVlLFxuICAvLyBbTUROXSBJZiB0aGlzIHRva2VuIGlzIG5vdCB1c2VkLCB0aGUgcmVzb3VyY2UgaXMgdHJlYXRlZCBhcyBiZWluZyBmcm9tIGEgc3BlY2lhbCBvcmlnaW4gdGhhdCBhbHdheXMgZmFpbHMgdGhlIHNhbWUtb3JpZ2luIHBvbGljeSAocG90ZW50aWFsbHkgcHJldmVudGluZyBhY2Nlc3MgdG8gZGF0YSBzdG9yYWdlL2Nvb2tpZXMgYW5kIHNvbWUgSmF2YVNjcmlwdCBBUElzKS5cbiAgXCJhbGxvdy1zYW1lLW9yaWdpblwiOiB0cnVlLFxuICAvLyBbTUROXSBBbGxvd3MgdGhlIHJlc291cmNlIHRvIHN1Ym1pdCBmb3Jtcy4gSWYgdGhpcyBrZXl3b3JkIGlzIG5vdCB1c2VkLCBmb3JtIHN1Ym1pc3Npb24gaXMgYmxvY2tlZC5cbiAgXCJhbGxvdy1mb3Jtc1wiOiB0cnVlXG59O1xuY29uc3QgZW1iZWRTaGFwZVByb3BzID0ge1xuICB3OiBULm5vblplcm9OdW1iZXIsXG4gIGg6IFQubm9uWmVyb051bWJlcixcbiAgdXJsOiBULnN0cmluZ1xufTtcbmNvbnN0IFZlcnNpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcyhcImVtYmVkXCIsIHtcbiAgR2VuT3JpZ2luYWxVcmxJbkVtYmVkOiAxLFxuICBSZW1vdmVEb2VzUmVzaXplOiAyLFxuICBSZW1vdmVUbXBPbGRVcmw6IDMsXG4gIFJlbW92ZVBlcm1pc3Npb25PdmVycmlkZXM6IDRcbn0pO1xuY29uc3QgZW1iZWRTaGFwZU1pZ3JhdGlvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5HZW5PcmlnaW5hbFVybEluRW1iZWQsXG4gICAgICAvLyBhZGQgdG1wT2xkVXJsIHByb3BlcnR5XG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdXJsID0gcHJvcHMudXJsO1xuICAgICAgICAgIGNvbnN0IGhvc3QgPSBuZXcgVVJMKHVybCkuaG9zdC5yZXBsYWNlKFwid3d3LlwiLCBcIlwiKTtcbiAgICAgICAgICBsZXQgb3JpZ2luYWxVcmw7XG4gICAgICAgICAgZm9yIChjb25zdCBsb2NhbEVtYmVkRGVmIG9mIEVNQkVEX0RFRklOSVRJT05TKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxFbWJlZERlZi5ob3N0bmFtZXMuaW5jbHVkZXMoaG9zdCkpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFVybCA9IGxvY2FsRW1iZWREZWYuZnJvbUVtYmVkVXJsKHVybCk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHByb3BzLnRtcE9sZFVybCA9IHByb3BzLnVybDtcbiAgICAgICAgICBwcm9wcy51cmwgPSBvcmlnaW5hbFVybCA/PyBcIlwiO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcHJvcHMudXJsID0gXCJcIjtcbiAgICAgICAgICBwcm9wcy50bXBPbGRVcmwgPSBwcm9wcy51cmw7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLlJlbW92ZURvZXNSZXNpemUsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIGRlbGV0ZSBwcm9wcy5kb2VzUmVzaXplO1xuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuUmVtb3ZlVG1wT2xkVXJsLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBkZWxldGUgcHJvcHMudG1wT2xkVXJsO1xuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuUmVtb3ZlUGVybWlzc2lvbk92ZXJyaWRlcyxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgZGVsZXRlIHByb3BzLm92ZXJyaWRlUGVybWlzc2lvbnM7XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9XG4gIF1cbn0pO1xuZXhwb3J0IHtcbiAgRU1CRURfREVGSU5JVElPTlMsXG4gIGVtYmVkU2hhcGVNaWdyYXRpb25zLFxuICBlbWJlZFNoYXBlUGVybWlzc2lvbkRlZmF1bHRzLFxuICBlbWJlZFNoYXBlUHJvcHMsXG4gIFZlcnNpb25zIGFzIGVtYmVkU2hhcGVWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMRW1iZWRTaGFwZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLEmbedShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLFrameShape.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLFrameShape.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   frameShapeMigrations: () => (/* binding */ frameShapeMigrations),\n/* harmony export */   frameShapeProps: () => (/* binding */ frameShapeProps)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n\n\nconst frameShapeProps = {\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  name: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string\n};\nconst frameShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationSequence)({\n  sequence: []\n});\n\n//# sourceMappingURL=TLFrameShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExGcmFtZVNoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFDO0FBQ3NDO0FBQzNFO0FBQ0EsS0FBSyw2REFBZTtBQUNwQixLQUFLLDZEQUFlO0FBQ3BCLFFBQVEsc0RBQVE7QUFDaEI7QUFDQSw2QkFBNkIsdUZBQWlDO0FBQzlEO0FBQ0EsQ0FBQztBQUlDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExGcmFtZVNoYXBlLm1qcz9jYTA1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlIH0gZnJvbSBcIi4uL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmNvbnN0IGZyYW1lU2hhcGVQcm9wcyA9IHtcbiAgdzogVC5ub25aZXJvTnVtYmVyLFxuICBoOiBULm5vblplcm9OdW1iZXIsXG4gIG5hbWU6IFQuc3RyaW5nXG59O1xuY29uc3QgZnJhbWVTaGFwZU1pZ3JhdGlvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZTogW11cbn0pO1xuZXhwb3J0IHtcbiAgZnJhbWVTaGFwZU1pZ3JhdGlvbnMsXG4gIGZyYW1lU2hhcGVQcm9wc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMRnJhbWVTaGFwZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLFrameShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGeoShape.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGeoShape.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeoShapeGeoStyle: () => (/* binding */ GeoShapeGeoStyle),\n/* harmony export */   geoShapeMigrations: () => (/* binding */ geoShapeMigrations),\n/* harmony export */   geoShapeProps: () => (/* binding */ geoShapeProps),\n/* harmony export */   geoShapeVersions: () => (/* binding */ geoShapeVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../styles/StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/TLDashStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs\");\n/* harmony import */ var _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles/TLFillStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs\");\n/* harmony import */ var _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles/TLFontStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs\");\n/* harmony import */ var _styles_TLHorizontalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../styles/TLHorizontalAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLHorizontalAlignStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n/* harmony import */ var _styles_TLVerticalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../styles/TLVerticalAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLVerticalAlignStyle.mjs\");\n\n\n\n\n\n\n\n\n\n\nconst GeoShapeGeoStyle = _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_2__.StyleProp.defineEnum(\"tldraw:geo\", {\n  defaultValue: \"rectangle\",\n  values: [\n    \"cloud\",\n    \"rectangle\",\n    \"ellipse\",\n    \"triangle\",\n    \"diamond\",\n    \"pentagon\",\n    \"hexagon\",\n    \"octagon\",\n    \"star\",\n    \"rhombus\",\n    \"rhombus-2\",\n    \"oval\",\n    \"trapezoid\",\n    \"arrow-right\",\n    \"arrow-left\",\n    \"arrow-up\",\n    \"arrow-down\",\n    \"x-box\",\n    \"check-box\",\n    \"heart\"\n  ]\n});\nconst geoShapeProps = {\n  geo: GeoShapeGeoStyle,\n  labelColor: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultLabelColorStyle,\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultColorStyle,\n  fill: _styles_TLFillStyle_mjs__WEBPACK_IMPORTED_MODULE_5__.DefaultFillStyle,\n  dash: _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultDashStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_8__.DefaultSizeStyle,\n  font: _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultFontStyle,\n  align: _styles_TLHorizontalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_7__.DefaultHorizontalAlignStyle,\n  verticalAlign: _styles_TLVerticalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_9__.DefaultVerticalAlignStyle,\n  url: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl,\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  growY: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.positiveNumber,\n  text: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string\n};\nconst geoShapeVersions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationIds)(\"geo\", {\n  AddUrlProp: 1,\n  AddLabelColor: 2,\n  RemoveJustify: 3,\n  AddCheckBox: 4,\n  AddVerticalAlign: 5,\n  MigrateLegacyAlign: 6,\n  AddCloud: 7,\n  MakeUrlsValid: 8\n});\nconst geoShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: geoShapeVersions.AddUrlProp,\n      up: (props) => {\n        props.url = \"\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.AddLabelColor,\n      up: (props) => {\n        props.labelColor = \"black\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.RemoveJustify,\n      up: (props) => {\n        if (props.align === \"justify\") {\n          props.align = \"start\";\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.AddCheckBox,\n      up: (_props) => {\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.AddVerticalAlign,\n      up: (props) => {\n        props.verticalAlign = \"middle\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.MigrateLegacyAlign,\n      up: (props) => {\n        let newAlign;\n        switch (props.align) {\n          case \"start\":\n            newAlign = \"start-legacy\";\n            break;\n          case \"end\":\n            newAlign = \"end-legacy\";\n            break;\n          default:\n            newAlign = \"middle-legacy\";\n            break;\n        }\n        props.align = newAlign;\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.AddCloud,\n      up: (_props) => {\n      },\n      down: \"retired\"\n    },\n    {\n      id: geoShapeVersions.MakeUrlsValid,\n      up: (props) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl.isValid(props.url)) {\n          props.url = \"\";\n        }\n      },\n      down: (_props) => {\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLGeoShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExHZW9TaGFwZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcUM7QUFDb0U7QUFDckQ7QUFDbUM7QUFDMUI7QUFDQTtBQUNBO0FBR2Y7QUFDZTtBQUNrQjtBQUMvRSx5QkFBeUIsNERBQVM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsY0FBYyw0RUFBc0I7QUFDcEMsU0FBUyx1RUFBaUI7QUFDMUIsUUFBUSxxRUFBZ0I7QUFDeEIsUUFBUSxxRUFBZ0I7QUFDeEIsUUFBUSxxRUFBZ0I7QUFDeEIsUUFBUSxxRUFBZ0I7QUFDeEIsU0FBUywyRkFBMkI7QUFDcEMsaUJBQWlCLHVGQUF5QjtBQUMxQyxPQUFPLHVEQUFTO0FBQ2hCLEtBQUssNkRBQWU7QUFDcEIsS0FBSyw2REFBZTtBQUNwQixTQUFTLDhEQUFnQjtBQUN6QixRQUFRLHNEQUFRO0FBQ2hCO0FBQ0EseUJBQXlCLGtGQUE0QjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDJCQUEyQix1RkFBaUM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxhQUFhLHVEQUFTO0FBQ3RCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBTUM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3NoYXBlcy9UTEdlb1NoYXBlLm1qcz82ZTA4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcywgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlIH0gZnJvbSBcIi4uL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmltcG9ydCB7IFN0eWxlUHJvcCB9IGZyb20gXCIuLi9zdHlsZXMvU3R5bGVQcm9wLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdENvbG9yU3R5bGUsIERlZmF1bHRMYWJlbENvbG9yU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMQ29sb3JTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHREYXNoU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMRGFzaFN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdEZpbGxTdHlsZSB9IGZyb20gXCIuLi9zdHlsZXMvVExGaWxsU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0Rm9udFN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTEZvbnRTdHlsZS5tanNcIjtcbmltcG9ydCB7XG4gIERlZmF1bHRIb3Jpem9udGFsQWxpZ25TdHlsZVxufSBmcm9tIFwiLi4vc3R5bGVzL1RMSG9yaXpvbnRhbEFsaWduU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0U2l6ZVN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTFNpemVTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRWZXJ0aWNhbEFsaWduU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMVmVydGljYWxBbGlnblN0eWxlLm1qc1wiO1xuY29uc3QgR2VvU2hhcGVHZW9TdHlsZSA9IFN0eWxlUHJvcC5kZWZpbmVFbnVtKFwidGxkcmF3Omdlb1wiLCB7XG4gIGRlZmF1bHRWYWx1ZTogXCJyZWN0YW5nbGVcIixcbiAgdmFsdWVzOiBbXG4gICAgXCJjbG91ZFwiLFxuICAgIFwicmVjdGFuZ2xlXCIsXG4gICAgXCJlbGxpcHNlXCIsXG4gICAgXCJ0cmlhbmdsZVwiLFxuICAgIFwiZGlhbW9uZFwiLFxuICAgIFwicGVudGFnb25cIixcbiAgICBcImhleGFnb25cIixcbiAgICBcIm9jdGFnb25cIixcbiAgICBcInN0YXJcIixcbiAgICBcInJob21idXNcIixcbiAgICBcInJob21idXMtMlwiLFxuICAgIFwib3ZhbFwiLFxuICAgIFwidHJhcGV6b2lkXCIsXG4gICAgXCJhcnJvdy1yaWdodFwiLFxuICAgIFwiYXJyb3ctbGVmdFwiLFxuICAgIFwiYXJyb3ctdXBcIixcbiAgICBcImFycm93LWRvd25cIixcbiAgICBcIngtYm94XCIsXG4gICAgXCJjaGVjay1ib3hcIixcbiAgICBcImhlYXJ0XCJcbiAgXVxufSk7XG5jb25zdCBnZW9TaGFwZVByb3BzID0ge1xuICBnZW86IEdlb1NoYXBlR2VvU3R5bGUsXG4gIGxhYmVsQ29sb3I6IERlZmF1bHRMYWJlbENvbG9yU3R5bGUsXG4gIGNvbG9yOiBEZWZhdWx0Q29sb3JTdHlsZSxcbiAgZmlsbDogRGVmYXVsdEZpbGxTdHlsZSxcbiAgZGFzaDogRGVmYXVsdERhc2hTdHlsZSxcbiAgc2l6ZTogRGVmYXVsdFNpemVTdHlsZSxcbiAgZm9udDogRGVmYXVsdEZvbnRTdHlsZSxcbiAgYWxpZ246IERlZmF1bHRIb3Jpem9udGFsQWxpZ25TdHlsZSxcbiAgdmVydGljYWxBbGlnbjogRGVmYXVsdFZlcnRpY2FsQWxpZ25TdHlsZSxcbiAgdXJsOiBULmxpbmtVcmwsXG4gIHc6IFQubm9uWmVyb051bWJlcixcbiAgaDogVC5ub25aZXJvTnVtYmVyLFxuICBncm93WTogVC5wb3NpdGl2ZU51bWJlcixcbiAgdGV4dDogVC5zdHJpbmdcbn07XG5jb25zdCBnZW9TaGFwZVZlcnNpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcyhcImdlb1wiLCB7XG4gIEFkZFVybFByb3A6IDEsXG4gIEFkZExhYmVsQ29sb3I6IDIsXG4gIFJlbW92ZUp1c3RpZnk6IDMsXG4gIEFkZENoZWNrQm94OiA0LFxuICBBZGRWZXJ0aWNhbEFsaWduOiA1LFxuICBNaWdyYXRlTGVnYWN5QWxpZ246IDYsXG4gIEFkZENsb3VkOiA3LFxuICBNYWtlVXJsc1ZhbGlkOiA4XG59KTtcbmNvbnN0IGdlb1NoYXBlTWlncmF0aW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlOiBbXG4gICAge1xuICAgICAgaWQ6IGdlb1NoYXBlVmVyc2lvbnMuQWRkVXJsUHJvcCxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMudXJsID0gXCJcIjtcbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGdlb1NoYXBlVmVyc2lvbnMuQWRkTGFiZWxDb2xvcixcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMubGFiZWxDb2xvciA9IFwiYmxhY2tcIjtcbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGdlb1NoYXBlVmVyc2lvbnMuUmVtb3ZlSnVzdGlmeSxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgaWYgKHByb3BzLmFsaWduID09PSBcImp1c3RpZnlcIikge1xuICAgICAgICAgIHByb3BzLmFsaWduID0gXCJzdGFydFwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBnZW9TaGFwZVZlcnNpb25zLkFkZENoZWNrQm94LFxuICAgICAgdXA6IChfcHJvcHMpID0+IHtcbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGdlb1NoYXBlVmVyc2lvbnMuQWRkVmVydGljYWxBbGlnbixcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBnZW9TaGFwZVZlcnNpb25zLk1pZ3JhdGVMZWdhY3lBbGlnbixcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgbGV0IG5ld0FsaWduO1xuICAgICAgICBzd2l0Y2ggKHByb3BzLmFsaWduKSB7XG4gICAgICAgICAgY2FzZSBcInN0YXJ0XCI6XG4gICAgICAgICAgICBuZXdBbGlnbiA9IFwic3RhcnQtbGVnYWN5XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICBuZXdBbGlnbiA9IFwiZW5kLWxlZ2FjeVwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG5ld0FsaWduID0gXCJtaWRkbGUtbGVnYWN5XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBwcm9wcy5hbGlnbiA9IG5ld0FsaWduO1xuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogZ2VvU2hhcGVWZXJzaW9ucy5BZGRDbG91ZCxcbiAgICAgIHVwOiAoX3Byb3BzKSA9PiB7XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBnZW9TaGFwZVZlcnNpb25zLk1ha2VVcmxzVmFsaWQsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIGlmICghVC5saW5rVXJsLmlzVmFsaWQocHJvcHMudXJsKSkge1xuICAgICAgICAgIHByb3BzLnVybCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkb3duOiAoX3Byb3BzKSA9PiB7XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmV4cG9ydCB7XG4gIEdlb1NoYXBlR2VvU3R5bGUsXG4gIGdlb1NoYXBlTWlncmF0aW9ucyxcbiAgZ2VvU2hhcGVQcm9wcyxcbiAgZ2VvU2hhcGVWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMR2VvU2hhcGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGeoShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGroupShape.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGroupShape.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   groupShapeMigrations: () => (/* binding */ groupShapeMigrations),\n/* harmony export */   groupShapeProps: () => (/* binding */ groupShapeProps)\n/* harmony export */ });\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n\nconst groupShapeProps = {};\nconst groupShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_0__.createShapePropsMigrationSequence)({ sequence: [] });\n\n//# sourceMappingURL=TLGroupShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExHcm91cFNoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkU7QUFDM0U7QUFDQSw2QkFBNkIsdUZBQWlDLEdBQUcsY0FBYztBQUk3RTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc2hhcGVzL1RMR3JvdXBTaGFwZS5tanM/N2QwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2UgfSBmcm9tIFwiLi4vcmVjb3Jkcy9UTFNoYXBlLm1qc1wiO1xuY29uc3QgZ3JvdXBTaGFwZVByb3BzID0ge307XG5jb25zdCBncm91cFNoYXBlTWlncmF0aW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSh7IHNlcXVlbmNlOiBbXSB9KTtcbmV4cG9ydCB7XG4gIGdyb3VwU2hhcGVNaWdyYXRpb25zLFxuICBncm91cFNoYXBlUHJvcHNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEdyb3VwU2hhcGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLGroupShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLHighlightShape.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLHighlightShape.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   highlightShapeMigrations: () => (/* binding */ highlightShapeMigrations),\n/* harmony export */   highlightShapeProps: () => (/* binding */ highlightShapeProps)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n/* harmony import */ var _TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TLDrawShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLDrawShape.mjs\");\n\n\n\n\n\nconst highlightShapeProps = {\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_2__.DefaultColorStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultSizeStyle,\n  segments: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.arrayOf(_TLDrawShape_mjs__WEBPACK_IMPORTED_MODULE_4__.DrawShapeSegment),\n  isComplete: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  isPen: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean\n};\nconst highlightShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationSequence)({ sequence: [] });\n\n//# sourceMappingURL=TLHighlightShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExIaWdobGlnaHRTaGFwZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxQztBQUNzQztBQUNaO0FBQ0Y7QUFDUjtBQUNyRDtBQUNBLFNBQVMsdUVBQWlCO0FBQzFCLFFBQVEscUVBQWdCO0FBQ3hCLFlBQVksdURBQVMsQ0FBQyw4REFBZ0I7QUFDdEMsY0FBYyx1REFBUztBQUN2QixTQUFTLHVEQUFTO0FBQ2xCO0FBQ0EsaUNBQWlDLHVGQUFpQyxHQUFHLGNBQWM7QUFJakY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3NoYXBlcy9UTEhpZ2hsaWdodFNoYXBlLm1qcz8xY2FmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlIH0gZnJvbSBcIi4uL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRDb2xvclN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTENvbG9yU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0U2l6ZVN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTFNpemVTdHlsZS5tanNcIjtcbmltcG9ydCB7IERyYXdTaGFwZVNlZ21lbnQgfSBmcm9tIFwiLi9UTERyYXdTaGFwZS5tanNcIjtcbmNvbnN0IGhpZ2hsaWdodFNoYXBlUHJvcHMgPSB7XG4gIGNvbG9yOiBEZWZhdWx0Q29sb3JTdHlsZSxcbiAgc2l6ZTogRGVmYXVsdFNpemVTdHlsZSxcbiAgc2VnbWVudHM6IFQuYXJyYXlPZihEcmF3U2hhcGVTZWdtZW50KSxcbiAgaXNDb21wbGV0ZTogVC5ib29sZWFuLFxuICBpc1BlbjogVC5ib29sZWFuXG59O1xuY29uc3QgaGlnaGxpZ2h0U2hhcGVNaWdyYXRpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlKHsgc2VxdWVuY2U6IFtdIH0pO1xuZXhwb3J0IHtcbiAgaGlnaGxpZ2h0U2hhcGVNaWdyYXRpb25zLFxuICBoaWdobGlnaHRTaGFwZVByb3BzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExIaWdobGlnaHRTaGFwZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLHighlightShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLImageShape.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLImageShape.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImageShapeCrop: () => (/* binding */ ImageShapeCrop),\n/* harmony export */   imageShapeMigrations: () => (/* binding */ imageShapeMigrations),\n/* harmony export */   imageShapeProps: () => (/* binding */ imageShapeProps),\n/* harmony export */   imageShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../assets/TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n/* harmony import */ var _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc/geometry-types.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/misc/geometry-types.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n\n\n\n\nconst ImageShapeCrop = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.object({\n  topLeft: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.vecModelValidator,\n  bottomRight: _misc_geometry_types_mjs__WEBPACK_IMPORTED_MODULE_2__.vecModelValidator\n});\nconst imageShapeProps = {\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  playing: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  url: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl,\n  assetId: _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__.assetIdValidator.nullable(),\n  crop: ImageShapeCrop.nullable()\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_3__.createShapePropsMigrationIds)(\"image\", {\n  AddUrlProp: 1,\n  AddCropProp: 2,\n  MakeUrlsValid: 3\n});\nconst imageShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_3__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.AddUrlProp,\n      up: (props) => {\n        props.url = \"\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.AddCropProp,\n      up: (props) => {\n        props.crop = null;\n      },\n      down: (props) => {\n        delete props.crop;\n      }\n    },\n    {\n      id: Versions.MakeUrlsValid,\n      up: (props) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl.isValid(props.url)) {\n          props.url = \"\";\n        }\n      },\n      down: (_props) => {\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLImageShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExJbWFnZVNoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFxQztBQUN3QjtBQUNFO0FBQzBDO0FBQ3pHLHVCQUF1QixzREFBUTtBQUMvQixXQUFXLHVFQUFpQjtBQUM1QixlQUFlLHVFQUFpQjtBQUNoQyxDQUFDO0FBQ0Q7QUFDQSxLQUFLLDZEQUFlO0FBQ3BCLEtBQUssNkRBQWU7QUFDcEIsV0FBVyx1REFBUztBQUNwQixPQUFPLHVEQUFTO0FBQ2hCLFdBQVcscUVBQWdCO0FBQzNCO0FBQ0E7QUFDQSxpQkFBaUIsa0ZBQTRCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw2QkFBNkIsdUZBQWlDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdURBQVM7QUFDdEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFNQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc2hhcGVzL1RMSW1hZ2VTaGFwZS5tanM/NWYzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGFzc2V0SWRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vYXNzZXRzL1RMQmFzZUFzc2V0Lm1qc1wiO1xuaW1wb3J0IHsgdmVjTW9kZWxWYWxpZGF0b3IgfSBmcm9tIFwiLi4vbWlzYy9nZW9tZXRyeS10eXBlcy5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMsIGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSB9IGZyb20gXCIuLi9yZWNvcmRzL1RMU2hhcGUubWpzXCI7XG5jb25zdCBJbWFnZVNoYXBlQ3JvcCA9IFQub2JqZWN0KHtcbiAgdG9wTGVmdDogdmVjTW9kZWxWYWxpZGF0b3IsXG4gIGJvdHRvbVJpZ2h0OiB2ZWNNb2RlbFZhbGlkYXRvclxufSk7XG5jb25zdCBpbWFnZVNoYXBlUHJvcHMgPSB7XG4gIHc6IFQubm9uWmVyb051bWJlcixcbiAgaDogVC5ub25aZXJvTnVtYmVyLFxuICBwbGF5aW5nOiBULmJvb2xlYW4sXG4gIHVybDogVC5saW5rVXJsLFxuICBhc3NldElkOiBhc3NldElkVmFsaWRhdG9yLm51bGxhYmxlKCksXG4gIGNyb3A6IEltYWdlU2hhcGVDcm9wLm51bGxhYmxlKClcbn07XG5jb25zdCBWZXJzaW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMoXCJpbWFnZVwiLCB7XG4gIEFkZFVybFByb3A6IDEsXG4gIEFkZENyb3BQcm9wOiAyLFxuICBNYWtlVXJsc1ZhbGlkOiAzXG59KTtcbmNvbnN0IGltYWdlU2hhcGVNaWdyYXRpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuQWRkVXJsUHJvcCxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMudXJsID0gXCJcIjtcbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLkFkZENyb3BQcm9wLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBwcm9wcy5jcm9wID0gbnVsbDtcbiAgICAgIH0sXG4gICAgICBkb3duOiAocHJvcHMpID0+IHtcbiAgICAgICAgZGVsZXRlIHByb3BzLmNyb3A7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuTWFrZVVybHNWYWxpZCxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgaWYgKCFULmxpbmtVcmwuaXNWYWxpZChwcm9wcy51cmwpKSB7XG4gICAgICAgICAgcHJvcHMudXJsID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IChfcHJvcHMpID0+IHtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuZXhwb3J0IHtcbiAgSW1hZ2VTaGFwZUNyb3AsXG4gIGltYWdlU2hhcGVNaWdyYXRpb25zLFxuICBpbWFnZVNoYXBlUHJvcHMsXG4gIFZlcnNpb25zIGFzIGltYWdlU2hhcGVWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMSW1hZ2VTaGFwZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLImageShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLLineShape.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLLineShape.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LineShapeSplineStyle: () => (/* binding */ LineShapeSplineStyle),\n/* harmony export */   lineShapeMigrations: () => (/* binding */ lineShapeMigrations),\n/* harmony export */   lineShapeProps: () => (/* binding */ lineShapeProps),\n/* harmony export */   lineShapeVersions: () => (/* binding */ lineShapeVersions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles/TLDashStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n\n\n\n\n\n\n\nconst LineShapeSplineStyle = _styles_StyleProp_mjs__WEBPACK_IMPORTED_MODULE_3__.StyleProp.defineEnum(\"tldraw:spline\", {\n  defaultValue: \"line\",\n  values: [\"cubic\", \"line\"]\n});\nconst lineShapePointValidator = _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.object({\n  id: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string,\n  index: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.indexKey,\n  x: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number,\n  y: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.number\n});\nconst lineShapeProps = {\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultColorStyle,\n  dash: _styles_TLDashStyle_mjs__WEBPACK_IMPORTED_MODULE_5__.DefaultDashStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultSizeStyle,\n  spline: LineShapeSplineStyle,\n  points: _tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.dict(_tldraw_validate__WEBPACK_IMPORTED_MODULE_1__.T.string, lineShapePointValidator)\n};\nconst lineShapeVersions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationIds)(\"line\", {\n  AddSnapHandles: 1,\n  RemoveExtraHandleProps: 2,\n  HandlesToPoints: 3,\n  PointIndexIds: 4\n});\nconst lineShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: lineShapeVersions.AddSnapHandles,\n      up: (props) => {\n        for (const handle of Object.values(props.handles)) {\n          ;\n          handle.canSnap = true;\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: lineShapeVersions.RemoveExtraHandleProps,\n      up: (props) => {\n        props.handles = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.objectMapFromEntries)(\n          Object.values(props.handles).map((handle) => [\n            handle.index,\n            {\n              x: handle.x,\n              y: handle.y\n            }\n          ])\n        );\n      },\n      down: (props) => {\n        const handles = Object.entries(props.handles).map(([index, handle]) => ({ index, ...handle })).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sortByIndex);\n        props.handles = Object.fromEntries(\n          handles.map((handle, i) => {\n            const id = i === 0 ? \"start\" : i === handles.length - 1 ? \"end\" : `handle:${handle.index}`;\n            return [\n              id,\n              {\n                id,\n                type: \"vertex\",\n                canBind: false,\n                canSnap: true,\n                index: handle.index,\n                x: handle.x,\n                y: handle.y\n              }\n            ];\n          })\n        );\n      }\n    },\n    {\n      id: lineShapeVersions.HandlesToPoints,\n      up: (props) => {\n        const sortedHandles = Object.entries(props.handles).map(([index, { x, y }]) => ({ x, y, index })).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sortByIndex);\n        props.points = sortedHandles.map(({ x, y }) => ({ x, y }));\n        delete props.handles;\n      },\n      down: (props) => {\n        const indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndices)(props.points.length);\n        props.handles = Object.fromEntries(\n          props.points.map((handle, i) => {\n            const index = indices[i];\n            return [\n              index,\n              {\n                x: handle.x,\n                y: handle.y\n              }\n            ];\n          })\n        );\n        delete props.points;\n      }\n    },\n    {\n      id: lineShapeVersions.PointIndexIds,\n      up: (props) => {\n        const indices = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getIndices)(props.points.length);\n        props.points = Object.fromEntries(\n          props.points.map((point, i) => {\n            const id = indices[i];\n            return [\n              id,\n              {\n                id,\n                index: id,\n                x: point.x,\n                y: point.y\n              }\n            ];\n          })\n        );\n      },\n      down: (props) => {\n        const sortedHandles = Object.values(props.points).sort(_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.sortByIndex);\n        props.points = sortedHandles.map(({ x, y }) => ({ x, y }));\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLLineShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExMaW5lU2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQThFO0FBQ3pDO0FBQ29FO0FBQ3JEO0FBQ1c7QUFDRjtBQUNBO0FBQzdELDZCQUE2Qiw0REFBUztBQUN0QztBQUNBO0FBQ0EsQ0FBQztBQUNELGdDQUFnQyxzREFBUTtBQUN4QyxNQUFNLHNEQUFRO0FBQ2QsU0FBUyx3REFBVTtBQUNuQixLQUFLLHNEQUFRO0FBQ2IsS0FBSyxzREFBUTtBQUNiLENBQUM7QUFDRDtBQUNBLFNBQVMsdUVBQWlCO0FBQzFCLFFBQVEscUVBQWdCO0FBQ3hCLFFBQVEscUVBQWdCO0FBQ3hCO0FBQ0EsVUFBVSxvREFBTSxDQUFDLHNEQUFRO0FBQ3pCO0FBQ0EsMEJBQTBCLGtGQUE0QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw0QkFBNEIsdUZBQWlDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1FQUFvQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0Esa0ZBQWtGLGtCQUFrQixRQUFRLHNEQUFXO0FBQ3ZIO0FBQ0E7QUFDQSx3RkFBd0YsYUFBYTtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsTUFBTSxTQUFTLGFBQWEsUUFBUSxzREFBVztBQUMxSCw0Q0FBNEMsTUFBTSxRQUFRLE1BQU07QUFDaEU7QUFDQSxPQUFPO0FBQ1A7QUFDQSx3QkFBd0IseURBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5REFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQSwrREFBK0Qsc0RBQVc7QUFDMUUsNENBQTRDLE1BQU0sUUFBUSxNQUFNO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFNQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc2hhcGVzL1RMTGluZVNoYXBlLm1qcz9mNzg4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEluZGljZXMsIG9iamVjdE1hcEZyb21FbnRyaWVzLCBzb3J0QnlJbmRleCB9IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5pbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMsIGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSB9IGZyb20gXCIuLi9yZWNvcmRzL1RMU2hhcGUubWpzXCI7XG5pbXBvcnQgeyBTdHlsZVByb3AgfSBmcm9tIFwiLi4vc3R5bGVzL1N0eWxlUHJvcC5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRDb2xvclN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTENvbG9yU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0RGFzaFN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTERhc2hTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRTaXplU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMU2l6ZVN0eWxlLm1qc1wiO1xuY29uc3QgTGluZVNoYXBlU3BsaW5lU3R5bGUgPSBTdHlsZVByb3AuZGVmaW5lRW51bShcInRsZHJhdzpzcGxpbmVcIiwge1xuICBkZWZhdWx0VmFsdWU6IFwibGluZVwiLFxuICB2YWx1ZXM6IFtcImN1YmljXCIsIFwibGluZVwiXVxufSk7XG5jb25zdCBsaW5lU2hhcGVQb2ludFZhbGlkYXRvciA9IFQub2JqZWN0KHtcbiAgaWQ6IFQuc3RyaW5nLFxuICBpbmRleDogVC5pbmRleEtleSxcbiAgeDogVC5udW1iZXIsXG4gIHk6IFQubnVtYmVyXG59KTtcbmNvbnN0IGxpbmVTaGFwZVByb3BzID0ge1xuICBjb2xvcjogRGVmYXVsdENvbG9yU3R5bGUsXG4gIGRhc2g6IERlZmF1bHREYXNoU3R5bGUsXG4gIHNpemU6IERlZmF1bHRTaXplU3R5bGUsXG4gIHNwbGluZTogTGluZVNoYXBlU3BsaW5lU3R5bGUsXG4gIHBvaW50czogVC5kaWN0KFQuc3RyaW5nLCBsaW5lU2hhcGVQb2ludFZhbGlkYXRvcilcbn07XG5jb25zdCBsaW5lU2hhcGVWZXJzaW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMoXCJsaW5lXCIsIHtcbiAgQWRkU25hcEhhbmRsZXM6IDEsXG4gIFJlbW92ZUV4dHJhSGFuZGxlUHJvcHM6IDIsXG4gIEhhbmRsZXNUb1BvaW50czogMyxcbiAgUG9pbnRJbmRleElkczogNFxufSk7XG5jb25zdCBsaW5lU2hhcGVNaWdyYXRpb25zID0gY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogbGluZVNoYXBlVmVyc2lvbnMuQWRkU25hcEhhbmRsZXMsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlIG9mIE9iamVjdC52YWx1ZXMocHJvcHMuaGFuZGxlcykpIHtcbiAgICAgICAgICA7XG4gICAgICAgICAgaGFuZGxlLmNhblNuYXAgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBsaW5lU2hhcGVWZXJzaW9ucy5SZW1vdmVFeHRyYUhhbmRsZVByb3BzLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBwcm9wcy5oYW5kbGVzID0gb2JqZWN0TWFwRnJvbUVudHJpZXMoXG4gICAgICAgICAgT2JqZWN0LnZhbHVlcyhwcm9wcy5oYW5kbGVzKS5tYXAoKGhhbmRsZSkgPT4gW1xuICAgICAgICAgICAgaGFuZGxlLmluZGV4LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB4OiBoYW5kbGUueCxcbiAgICAgICAgICAgICAgeTogaGFuZGxlLnlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdKVxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIGRvd246IChwcm9wcykgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVzID0gT2JqZWN0LmVudHJpZXMocHJvcHMuaGFuZGxlcykubWFwKChbaW5kZXgsIGhhbmRsZV0pID0+ICh7IGluZGV4LCAuLi5oYW5kbGUgfSkpLnNvcnQoc29ydEJ5SW5kZXgpO1xuICAgICAgICBwcm9wcy5oYW5kbGVzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICAgIGhhbmRsZXMubWFwKChoYW5kbGUsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gaSA9PT0gMCA/IFwic3RhcnRcIiA6IGkgPT09IGhhbmRsZXMubGVuZ3RoIC0gMSA/IFwiZW5kXCIgOiBgaGFuZGxlOiR7aGFuZGxlLmluZGV4fWA7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidmVydGV4XCIsXG4gICAgICAgICAgICAgICAgY2FuQmluZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2FuU25hcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpbmRleDogaGFuZGxlLmluZGV4LFxuICAgICAgICAgICAgICAgIHg6IGhhbmRsZS54LFxuICAgICAgICAgICAgICAgIHk6IGhhbmRsZS55XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBsaW5lU2hhcGVWZXJzaW9ucy5IYW5kbGVzVG9Qb2ludHMsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IHNvcnRlZEhhbmRsZXMgPSBPYmplY3QuZW50cmllcyhwcm9wcy5oYW5kbGVzKS5tYXAoKFtpbmRleCwgeyB4LCB5IH1dKSA9PiAoeyB4LCB5LCBpbmRleCB9KSkuc29ydChzb3J0QnlJbmRleCk7XG4gICAgICAgIHByb3BzLnBvaW50cyA9IHNvcnRlZEhhbmRsZXMubWFwKCh7IHgsIHkgfSkgPT4gKHsgeCwgeSB9KSk7XG4gICAgICAgIGRlbGV0ZSBwcm9wcy5oYW5kbGVzO1xuICAgICAgfSxcbiAgICAgIGRvd246IChwcm9wcykgPT4ge1xuICAgICAgICBjb25zdCBpbmRpY2VzID0gZ2V0SW5kaWNlcyhwcm9wcy5wb2ludHMubGVuZ3RoKTtcbiAgICAgICAgcHJvcHMuaGFuZGxlcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgICBwcm9wcy5wb2ludHMubWFwKChoYW5kbGUsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gaW5kaWNlc1tpXTtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgeDogaGFuZGxlLngsXG4gICAgICAgICAgICAgICAgeTogaGFuZGxlLnlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBkZWxldGUgcHJvcHMucG9pbnRzO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGxpbmVTaGFwZVZlcnNpb25zLlBvaW50SW5kZXhJZHMsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IGluZGljZXMgPSBnZXRJbmRpY2VzKHByb3BzLnBvaW50cy5sZW5ndGgpO1xuICAgICAgICBwcm9wcy5wb2ludHMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgcHJvcHMucG9pbnRzLm1hcCgocG9pbnQsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gaW5kaWNlc1tpXTtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgaW5kZXg6IGlkLFxuICAgICAgICAgICAgICAgIHg6IHBvaW50LngsXG4gICAgICAgICAgICAgICAgeTogcG9pbnQueVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgZG93bjogKHByb3BzKSA9PiB7XG4gICAgICAgIGNvbnN0IHNvcnRlZEhhbmRsZXMgPSBPYmplY3QudmFsdWVzKHByb3BzLnBvaW50cykuc29ydChzb3J0QnlJbmRleCk7XG4gICAgICAgIHByb3BzLnBvaW50cyA9IHNvcnRlZEhhbmRsZXMubWFwKCh7IHgsIHkgfSkgPT4gKHsgeCwgeSB9KSk7XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmV4cG9ydCB7XG4gIExpbmVTaGFwZVNwbGluZVN0eWxlLFxuICBsaW5lU2hhcGVNaWdyYXRpb25zLFxuICBsaW5lU2hhcGVQcm9wcyxcbiAgbGluZVNoYXBlVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTExpbmVTaGFwZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLLineShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLNoteShape.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLNoteShape.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   noteShapeMigrations: () => (/* binding */ noteShapeMigrations),\n/* harmony export */   noteShapeProps: () => (/* binding */ noteShapeProps),\n/* harmony export */   noteShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/TLFontStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs\");\n/* harmony import */ var _styles_TLHorizontalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/TLHorizontalAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLHorizontalAlignStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n/* harmony import */ var _styles_TLVerticalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles/TLVerticalAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLVerticalAlignStyle.mjs\");\n\n\n\n\n\n\n\nconst noteShapeProps = {\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_2__.DefaultColorStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_5__.DefaultSizeStyle,\n  font: _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultFontStyle,\n  fontSizeAdjustment: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.positiveNumber,\n  align: _styles_TLHorizontalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultHorizontalAlignStyle,\n  verticalAlign: _styles_TLVerticalAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_6__.DefaultVerticalAlignStyle,\n  growY: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.positiveNumber,\n  url: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl,\n  text: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationIds)(\"note\", {\n  AddUrlProp: 1,\n  RemoveJustify: 2,\n  MigrateLegacyAlign: 3,\n  AddVerticalAlign: 4,\n  MakeUrlsValid: 5,\n  AddFontSizeAdjustment: 6\n});\nconst noteShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.AddUrlProp,\n      up: (props) => {\n        props.url = \"\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.RemoveJustify,\n      up: (props) => {\n        if (props.align === \"justify\") {\n          props.align = \"start\";\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.MigrateLegacyAlign,\n      up: (props) => {\n        switch (props.align) {\n          case \"start\":\n            props.align = \"start-legacy\";\n            return;\n          case \"end\":\n            props.align = \"end-legacy\";\n            return;\n          default:\n            props.align = \"middle-legacy\";\n            return;\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.AddVerticalAlign,\n      up: (props) => {\n        props.verticalAlign = \"middle\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.MakeUrlsValid,\n      up: (props) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl.isValid(props.url)) {\n          props.url = \"\";\n        }\n      },\n      down: (_props) => {\n      }\n    },\n    {\n      id: Versions.AddFontSizeAdjustment,\n      up: (props) => {\n        props.fontSizeAdjustment = 0;\n      },\n      down: (props) => {\n        delete props.fontSizeAdjustment;\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLNoteShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExOb3RlU2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBcUM7QUFDb0U7QUFDMUM7QUFDRjtBQUNzQjtBQUN0QjtBQUNrQjtBQUMvRTtBQUNBLFNBQVMsdUVBQWlCO0FBQzFCLFFBQVEscUVBQWdCO0FBQ3hCLFFBQVEscUVBQWdCO0FBQ3hCLHNCQUFzQiw4REFBZ0I7QUFDdEMsU0FBUywyRkFBMkI7QUFDcEMsaUJBQWlCLHVGQUF5QjtBQUMxQyxTQUFTLDhEQUFnQjtBQUN6QixPQUFPLHVEQUFTO0FBQ2hCLFFBQVEsc0RBQVE7QUFDaEI7QUFDQSxpQkFBaUIsa0ZBQTRCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw0QkFBNEIsdUZBQWlDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsYUFBYSx1REFBUztBQUN0QjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFLQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc2hhcGVzL1RMTm90ZVNoYXBlLm1qcz9jMDIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcywgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlIH0gZnJvbSBcIi4uL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRDb2xvclN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTENvbG9yU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0Rm9udFN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTEZvbnRTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRIb3Jpem9udGFsQWxpZ25TdHlsZSB9IGZyb20gXCIuLi9zdHlsZXMvVExIb3Jpem9udGFsQWxpZ25TdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRTaXplU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMU2l6ZVN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdFZlcnRpY2FsQWxpZ25TdHlsZSB9IGZyb20gXCIuLi9zdHlsZXMvVExWZXJ0aWNhbEFsaWduU3R5bGUubWpzXCI7XG5jb25zdCBub3RlU2hhcGVQcm9wcyA9IHtcbiAgY29sb3I6IERlZmF1bHRDb2xvclN0eWxlLFxuICBzaXplOiBEZWZhdWx0U2l6ZVN0eWxlLFxuICBmb250OiBEZWZhdWx0Rm9udFN0eWxlLFxuICBmb250U2l6ZUFkanVzdG1lbnQ6IFQucG9zaXRpdmVOdW1iZXIsXG4gIGFsaWduOiBEZWZhdWx0SG9yaXpvbnRhbEFsaWduU3R5bGUsXG4gIHZlcnRpY2FsQWxpZ246IERlZmF1bHRWZXJ0aWNhbEFsaWduU3R5bGUsXG4gIGdyb3dZOiBULnBvc2l0aXZlTnVtYmVyLFxuICB1cmw6IFQubGlua1VybCxcbiAgdGV4dDogVC5zdHJpbmdcbn07XG5jb25zdCBWZXJzaW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMoXCJub3RlXCIsIHtcbiAgQWRkVXJsUHJvcDogMSxcbiAgUmVtb3ZlSnVzdGlmeTogMixcbiAgTWlncmF0ZUxlZ2FjeUFsaWduOiAzLFxuICBBZGRWZXJ0aWNhbEFsaWduOiA0LFxuICBNYWtlVXJsc1ZhbGlkOiA1LFxuICBBZGRGb250U2l6ZUFkanVzdG1lbnQ6IDZcbn0pO1xuY29uc3Qgbm90ZVNoYXBlTWlncmF0aW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25TZXF1ZW5jZSh7XG4gIHNlcXVlbmNlOiBbXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLkFkZFVybFByb3AsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHByb3BzLnVybCA9IFwiXCI7XG4gICAgICB9LFxuICAgICAgZG93bjogXCJyZXRpcmVkXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5SZW1vdmVKdXN0aWZ5LFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBpZiAocHJvcHMuYWxpZ24gPT09IFwianVzdGlmeVwiKSB7XG4gICAgICAgICAgcHJvcHMuYWxpZ24gPSBcInN0YXJ0XCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLk1pZ3JhdGVMZWdhY3lBbGlnbixcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgc3dpdGNoIChwcm9wcy5hbGlnbikge1xuICAgICAgICAgIGNhc2UgXCJzdGFydFwiOlxuICAgICAgICAgICAgcHJvcHMuYWxpZ24gPSBcInN0YXJ0LWxlZ2FjeVwiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgIHByb3BzLmFsaWduID0gXCJlbmQtbGVnYWN5XCI7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHByb3BzLmFsaWduID0gXCJtaWRkbGUtbGVnYWN5XCI7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLkFkZFZlcnRpY2FsQWxpZ24sXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHByb3BzLnZlcnRpY2FsQWxpZ24gPSBcIm1pZGRsZVwiO1xuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuTWFrZVVybHNWYWxpZCxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgaWYgKCFULmxpbmtVcmwuaXNWYWxpZChwcm9wcy51cmwpKSB7XG4gICAgICAgICAgcHJvcHMudXJsID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IChfcHJvcHMpID0+IHtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5BZGRGb250U2l6ZUFkanVzdG1lbnQsXG4gICAgICB1cDogKHByb3BzKSA9PiB7XG4gICAgICAgIHByb3BzLmZvbnRTaXplQWRqdXN0bWVudCA9IDA7XG4gICAgICB9LFxuICAgICAgZG93bjogKHByb3BzKSA9PiB7XG4gICAgICAgIGRlbGV0ZSBwcm9wcy5mb250U2l6ZUFkanVzdG1lbnQ7XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmV4cG9ydCB7XG4gIG5vdGVTaGFwZU1pZ3JhdGlvbnMsXG4gIG5vdGVTaGFwZVByb3BzLFxuICBWZXJzaW9ucyBhcyBub3RlU2hhcGVWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMTm90ZVNoYXBlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLNoteShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLTextShape.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLTextShape.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   textShapeMigrations: () => (/* binding */ textShapeMigrations),\n/* harmony export */   textShapeProps: () => (/* binding */ textShapeProps),\n/* harmony export */   textShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n/* harmony import */ var _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../styles/TLColorStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\");\n/* harmony import */ var _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/TLFontStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs\");\n/* harmony import */ var _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/TLSizeStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\");\n/* harmony import */ var _styles_TLTextAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles/TLTextAlignStyle.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLTextAlignStyle.mjs\");\n\n\n\n\n\n\nconst textShapeProps = {\n  color: _styles_TLColorStyle_mjs__WEBPACK_IMPORTED_MODULE_2__.DefaultColorStyle,\n  size: _styles_TLSizeStyle_mjs__WEBPACK_IMPORTED_MODULE_4__.DefaultSizeStyle,\n  font: _styles_TLFontStyle_mjs__WEBPACK_IMPORTED_MODULE_3__.DefaultFontStyle,\n  textAlign: _styles_TLTextAlignStyle_mjs__WEBPACK_IMPORTED_MODULE_5__.DefaultTextAlignStyle,\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  text: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.string,\n  scale: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  autoSize: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationIds)(\"text\", {\n  RemoveJustify: 1,\n  AddTextAlign: 2\n});\nconst textShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_1__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.RemoveJustify,\n      up: (props) => {\n        if (props.align === \"justify\") {\n          props.align = \"start\";\n        }\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.AddTextAlign,\n      up: (props) => {\n        props.textAlign = props.align;\n        delete props.align;\n      },\n      down: (props) => {\n        props.align = props.textAlign;\n        delete props.textAlign;\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLTextShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExUZXh0U2hhcGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFxQztBQUNvRTtBQUMxQztBQUNGO0FBQ0E7QUFDVTtBQUN2RTtBQUNBLFNBQVMsdUVBQWlCO0FBQzFCLFFBQVEscUVBQWdCO0FBQ3hCLFFBQVEscUVBQWdCO0FBQ3hCLGFBQWEsK0VBQXFCO0FBQ2xDLEtBQUssNkRBQWU7QUFDcEIsUUFBUSxzREFBUTtBQUNoQixTQUFTLDZEQUFlO0FBQ3hCLFlBQVksdURBQVM7QUFDckI7QUFDQSxpQkFBaUIsa0ZBQTRCO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNEJBQTRCLHVGQUFpQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFLQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc2hhcGVzL1RMVGV4dFNoYXBlLm1qcz85NGRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgfSBmcm9tIFwiQHRsZHJhdy92YWxpZGF0ZVwiO1xuaW1wb3J0IHsgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcywgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlIH0gZnJvbSBcIi4uL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRDb2xvclN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTENvbG9yU3R5bGUubWpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0Rm9udFN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTEZvbnRTdHlsZS5tanNcIjtcbmltcG9ydCB7IERlZmF1bHRTaXplU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGVzL1RMU2l6ZVN0eWxlLm1qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdFRleHRBbGlnblN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlcy9UTFRleHRBbGlnblN0eWxlLm1qc1wiO1xuY29uc3QgdGV4dFNoYXBlUHJvcHMgPSB7XG4gIGNvbG9yOiBEZWZhdWx0Q29sb3JTdHlsZSxcbiAgc2l6ZTogRGVmYXVsdFNpemVTdHlsZSxcbiAgZm9udDogRGVmYXVsdEZvbnRTdHlsZSxcbiAgdGV4dEFsaWduOiBEZWZhdWx0VGV4dEFsaWduU3R5bGUsXG4gIHc6IFQubm9uWmVyb051bWJlcixcbiAgdGV4dDogVC5zdHJpbmcsXG4gIHNjYWxlOiBULm5vblplcm9OdW1iZXIsXG4gIGF1dG9TaXplOiBULmJvb2xlYW5cbn07XG5jb25zdCBWZXJzaW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMoXCJ0ZXh0XCIsIHtcbiAgUmVtb3ZlSnVzdGlmeTogMSxcbiAgQWRkVGV4dEFsaWduOiAyXG59KTtcbmNvbnN0IHRleHRTaGFwZU1pZ3JhdGlvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5SZW1vdmVKdXN0aWZ5LFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBpZiAocHJvcHMuYWxpZ24gPT09IFwianVzdGlmeVwiKSB7XG4gICAgICAgICAgcHJvcHMuYWxpZ24gPSBcInN0YXJ0XCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkb3duOiBcInJldGlyZWRcIlxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLkFkZFRleHRBbGlnbixcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMudGV4dEFsaWduID0gcHJvcHMuYWxpZ247XG4gICAgICAgIGRlbGV0ZSBwcm9wcy5hbGlnbjtcbiAgICAgIH0sXG4gICAgICBkb3duOiAocHJvcHMpID0+IHtcbiAgICAgICAgcHJvcHMuYWxpZ24gPSBwcm9wcy50ZXh0QWxpZ247XG4gICAgICAgIGRlbGV0ZSBwcm9wcy50ZXh0QWxpZ247XG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcbmV4cG9ydCB7XG4gIHRleHRTaGFwZU1pZ3JhdGlvbnMsXG4gIHRleHRTaGFwZVByb3BzLFxuICBWZXJzaW9ucyBhcyB0ZXh0U2hhcGVWZXJzaW9uc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMVGV4dFNoYXBlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLTextShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLVideoShape.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/shapes/TLVideoShape.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   videoShapeMigrations: () => (/* binding */ videoShapeMigrations),\n/* harmony export */   videoShapeProps: () => (/* binding */ videoShapeProps),\n/* harmony export */   videoShapeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n/* harmony import */ var _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../assets/TLBaseAsset.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/assets/TLBaseAsset.mjs\");\n/* harmony import */ var _records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../records/TLShape.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/records/TLShape.mjs\");\n\n\n\nconst videoShapeProps = {\n  w: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  h: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.nonZeroNumber,\n  time: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.number,\n  playing: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.boolean,\n  url: _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl,\n  assetId: _assets_TLBaseAsset_mjs__WEBPACK_IMPORTED_MODULE_1__.assetIdValidator.nullable()\n};\nconst Versions = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationIds)(\"video\", {\n  AddUrlProp: 1,\n  MakeUrlsValid: 2\n});\nconst videoShapeMigrations = (0,_records_TLShape_mjs__WEBPACK_IMPORTED_MODULE_2__.createShapePropsMigrationSequence)({\n  sequence: [\n    {\n      id: Versions.AddUrlProp,\n      up: (props) => {\n        props.url = \"\";\n      },\n      down: \"retired\"\n    },\n    {\n      id: Versions.MakeUrlsValid,\n      up: (props) => {\n        if (!_tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.linkUrl.isValid(props.url)) {\n          props.url = \"\";\n        }\n      },\n      down: (_props) => {\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=TLVideoShape.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zaGFwZXMvVExWaWRlb1NoYXBlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBcUM7QUFDd0I7QUFDNEM7QUFDekc7QUFDQSxLQUFLLDZEQUFlO0FBQ3BCLEtBQUssNkRBQWU7QUFDcEIsUUFBUSxzREFBUTtBQUNoQixXQUFXLHVEQUFTO0FBQ3BCLE9BQU8sdURBQVM7QUFDaEIsV0FBVyxxRUFBZ0I7QUFDM0I7QUFDQSxpQkFBaUIsa0ZBQTRCO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNkJBQTZCLHVGQUFpQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdURBQVM7QUFDdEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFLQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc2hhcGVzL1RMVmlkZW9TaGFwZS5tanM/YzY0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUIH0gZnJvbSBcIkB0bGRyYXcvdmFsaWRhdGVcIjtcbmltcG9ydCB7IGFzc2V0SWRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vYXNzZXRzL1RMQmFzZUFzc2V0Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvbklkcywgY3JlYXRlU2hhcGVQcm9wc01pZ3JhdGlvblNlcXVlbmNlIH0gZnJvbSBcIi4uL3JlY29yZHMvVExTaGFwZS5tanNcIjtcbmNvbnN0IHZpZGVvU2hhcGVQcm9wcyA9IHtcbiAgdzogVC5ub25aZXJvTnVtYmVyLFxuICBoOiBULm5vblplcm9OdW1iZXIsXG4gIHRpbWU6IFQubnVtYmVyLFxuICBwbGF5aW5nOiBULmJvb2xlYW4sXG4gIHVybDogVC5saW5rVXJsLFxuICBhc3NldElkOiBhc3NldElkVmFsaWRhdG9yLm51bGxhYmxlKClcbn07XG5jb25zdCBWZXJzaW9ucyA9IGNyZWF0ZVNoYXBlUHJvcHNNaWdyYXRpb25JZHMoXCJ2aWRlb1wiLCB7XG4gIEFkZFVybFByb3A6IDEsXG4gIE1ha2VVcmxzVmFsaWQ6IDJcbn0pO1xuY29uc3QgdmlkZW9TaGFwZU1pZ3JhdGlvbnMgPSBjcmVhdGVTaGFwZVByb3BzTWlncmF0aW9uU2VxdWVuY2Uoe1xuICBzZXF1ZW5jZTogW1xuICAgIHtcbiAgICAgIGlkOiBWZXJzaW9ucy5BZGRVcmxQcm9wLFxuICAgICAgdXA6IChwcm9wcykgPT4ge1xuICAgICAgICBwcm9wcy51cmwgPSBcIlwiO1xuICAgICAgfSxcbiAgICAgIGRvd246IFwicmV0aXJlZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuTWFrZVVybHNWYWxpZCxcbiAgICAgIHVwOiAocHJvcHMpID0+IHtcbiAgICAgICAgaWYgKCFULmxpbmtVcmwuaXNWYWxpZChwcm9wcy51cmwpKSB7XG4gICAgICAgICAgcHJvcHMudXJsID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRvd246IChfcHJvcHMpID0+IHtcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuZXhwb3J0IHtcbiAgdmlkZW9TaGFwZU1pZ3JhdGlvbnMsXG4gIHZpZGVvU2hhcGVQcm9wcyxcbiAgVmVyc2lvbnMgYXMgdmlkZW9TaGFwZVZlcnNpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExWaWRlb1NoYXBlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/shapes/TLVideoShape.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/store-migrations.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/store-migrations.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   storeMigrations: () => (/* binding */ storeMigrations),\n/* harmony export */   storeVersions: () => (/* binding */ Versions)\n/* harmony export */ });\n/* harmony import */ var _tldraw_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/store */ \"(ssr)/./node_modules/@tldraw/store/dist-esm/index.mjs\");\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\n\nconst Versions = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationIds)(\"com.tldraw.store\", {\n  RemoveCodeAndIconShapeTypes: 1,\n  AddInstancePresenceType: 2,\n  RemoveTLUserAndPresenceAndAddPointer: 3,\n  RemoveUserDocument: 4\n});\nconst storeMigrations = (0,_tldraw_store__WEBPACK_IMPORTED_MODULE_0__.createMigrationSequence)({\n  sequenceId: \"com.tldraw.store\",\n  retroactive: false,\n  sequence: [\n    {\n      id: Versions.RemoveCodeAndIconShapeTypes,\n      scope: \"store\",\n      up: (store) => {\n        for (const [id, record] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapEntries)(store)) {\n          if (record.typeName === \"shape\" && (record.type === \"icon\" || record.type === \"code\")) {\n            delete store[id];\n          }\n        }\n      }\n    },\n    {\n      id: Versions.AddInstancePresenceType,\n      scope: \"store\",\n      up(_store) {\n      }\n    },\n    {\n      // remove user and presence records and add pointer records\n      id: Versions.RemoveTLUserAndPresenceAndAddPointer,\n      scope: \"store\",\n      up: (store) => {\n        for (const [id, record] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapEntries)(store)) {\n          if (record.typeName.match(/^(user|user_presence)$/)) {\n            delete store[id];\n          }\n        }\n      }\n    },\n    {\n      // remove user document records\n      id: Versions.RemoveUserDocument,\n      scope: \"store\",\n      up: (store) => {\n        for (const [id, record] of (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_1__.objectMapEntries)(store)) {\n          if (record.typeName.match(\"user_document\")) {\n            delete store[id];\n          }\n        }\n      }\n    }\n  ]\n});\n\n//# sourceMappingURL=store-migrations.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdG9yZS1taWdyYXRpb25zLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTRFO0FBQzNCO0FBQ2pELGlCQUFpQixpRUFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsd0JBQXdCLHNFQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywrREFBZ0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsK0RBQWdCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywrREFBZ0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBSUM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3N0b3JlLW1pZ3JhdGlvbnMubWpzPzhiMWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlTWlncmF0aW9uSWRzLCBjcmVhdGVNaWdyYXRpb25TZXF1ZW5jZSB9IGZyb20gXCJAdGxkcmF3L3N0b3JlXCI7XG5pbXBvcnQgeyBvYmplY3RNYXBFbnRyaWVzIH0gZnJvbSBcIkB0bGRyYXcvdXRpbHNcIjtcbmNvbnN0IFZlcnNpb25zID0gY3JlYXRlTWlncmF0aW9uSWRzKFwiY29tLnRsZHJhdy5zdG9yZVwiLCB7XG4gIFJlbW92ZUNvZGVBbmRJY29uU2hhcGVUeXBlczogMSxcbiAgQWRkSW5zdGFuY2VQcmVzZW5jZVR5cGU6IDIsXG4gIFJlbW92ZVRMVXNlckFuZFByZXNlbmNlQW5kQWRkUG9pbnRlcjogMyxcbiAgUmVtb3ZlVXNlckRvY3VtZW50OiA0XG59KTtcbmNvbnN0IHN0b3JlTWlncmF0aW9ucyA9IGNyZWF0ZU1pZ3JhdGlvblNlcXVlbmNlKHtcbiAgc2VxdWVuY2VJZDogXCJjb20udGxkcmF3LnN0b3JlXCIsXG4gIHJldHJvYWN0aXZlOiBmYWxzZSxcbiAgc2VxdWVuY2U6IFtcbiAgICB7XG4gICAgICBpZDogVmVyc2lvbnMuUmVtb3ZlQ29kZUFuZEljb25TaGFwZVR5cGVzLFxuICAgICAgc2NvcGU6IFwic3RvcmVcIixcbiAgICAgIHVwOiAoc3RvcmUpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBbaWQsIHJlY29yZF0gb2Ygb2JqZWN0TWFwRW50cmllcyhzdG9yZSkpIHtcbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGVOYW1lID09PSBcInNoYXBlXCIgJiYgKHJlY29yZC50eXBlID09PSBcImljb25cIiB8fCByZWNvcmQudHlwZSA9PT0gXCJjb2RlXCIpKSB7XG4gICAgICAgICAgICBkZWxldGUgc3RvcmVbaWRdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IFZlcnNpb25zLkFkZEluc3RhbmNlUHJlc2VuY2VUeXBlLFxuICAgICAgc2NvcGU6IFwic3RvcmVcIixcbiAgICAgIHVwKF9zdG9yZSkge1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgLy8gcmVtb3ZlIHVzZXIgYW5kIHByZXNlbmNlIHJlY29yZHMgYW5kIGFkZCBwb2ludGVyIHJlY29yZHNcbiAgICAgIGlkOiBWZXJzaW9ucy5SZW1vdmVUTFVzZXJBbmRQcmVzZW5jZUFuZEFkZFBvaW50ZXIsXG4gICAgICBzY29wZTogXCJzdG9yZVwiLFxuICAgICAgdXA6IChzdG9yZSkgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IFtpZCwgcmVjb3JkXSBvZiBvYmplY3RNYXBFbnRyaWVzKHN0b3JlKSkge1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZU5hbWUubWF0Y2goL14odXNlcnx1c2VyX3ByZXNlbmNlKSQvKSkge1xuICAgICAgICAgICAgZGVsZXRlIHN0b3JlW2lkXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIHJlbW92ZSB1c2VyIGRvY3VtZW50IHJlY29yZHNcbiAgICAgIGlkOiBWZXJzaW9ucy5SZW1vdmVVc2VyRG9jdW1lbnQsXG4gICAgICBzY29wZTogXCJzdG9yZVwiLFxuICAgICAgdXA6IChzdG9yZSkgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IFtpZCwgcmVjb3JkXSBvZiBvYmplY3RNYXBFbnRyaWVzKHN0b3JlKSkge1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZU5hbWUubWF0Y2goXCJ1c2VyX2RvY3VtZW50XCIpKSB7XG4gICAgICAgICAgICBkZWxldGUgc3RvcmVbaWRdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5leHBvcnQge1xuICBzdG9yZU1pZ3JhdGlvbnMsXG4gIFZlcnNpb25zIGFzIHN0b3JlVmVyc2lvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdG9yZS1taWdyYXRpb25zLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/store-migrations.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EnumStyleProp: () => (/* binding */ EnumStyleProp),\n/* harmony export */   StyleProp: () => (/* binding */ StyleProp)\n/* harmony export */ });\n/* harmony import */ var _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/validate */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\");\n\nclass StyleProp {\n  /** @internal */\n  constructor(id, defaultValue, type) {\n    this.id = id;\n    this.defaultValue = defaultValue;\n    this.type = type;\n  }\n  /**\n   * Define a new {@link StyleProp}.\n   *\n   * @param uniqueId - Each StyleProp must have a unique ID. We recommend you prefix this with\n   * your app/library name.\n   * @param options -\n   * - `defaultValue`: The default value for this style prop.\n   *\n   * - `type`: Optionally, describe what type of data you expect for this style prop.\n   *\n   * @example\n   * ```ts\n   * import {T} from '@tldraw/validate'\n   * import {StyleProp} from '@tldraw/tlschema'\n   *\n   * const MyLineWidthProp = StyleProp.define('myApp:lineWidth', {\n   *   defaultValue: 1,\n   *   type: T.number,\n   * })\n   * ```\n   * @public\n   */\n  static define(uniqueId, options) {\n    const { defaultValue, type = _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.any } = options;\n    return new StyleProp(uniqueId, defaultValue, type);\n  }\n  /**\n   * Define a new {@link StyleProp} as a list of possible values.\n   *\n   * @param uniqueId - Each StyleProp must have a unique ID. We recommend you prefix this with\n   * your app/library name.\n   * @param options -\n   * - `defaultValue`: The default value for this style prop.\n   *\n   * - `values`: An array of possible values of this style prop.\n   *\n   * @example\n   * ```ts\n   * import {StyleProp} from '@tldraw/tlschema'\n   *\n   * const MySizeProp = StyleProp.defineEnum('myApp:size', {\n   *   defaultValue: 'medium',\n   *   values: ['small', 'medium', 'large'],\n   * })\n   * ```\n   */\n  static defineEnum(uniqueId, options) {\n    const { defaultValue, values } = options;\n    return new EnumStyleProp(uniqueId, defaultValue, values);\n  }\n  validate(value) {\n    return this.type.validate(value);\n  }\n  validateUsingKnownGoodVersion(prevValue, newValue) {\n    if (this.type.validateUsingKnownGoodVersion) {\n      return this.type.validateUsingKnownGoodVersion(prevValue, newValue);\n    } else {\n      return this.validate(newValue);\n    }\n  }\n}\nclass EnumStyleProp extends StyleProp {\n  /** @internal */\n  constructor(id, defaultValue, values) {\n    super(id, defaultValue, _tldraw_validate__WEBPACK_IMPORTED_MODULE_0__.T.literalEnum(...values));\n    this.values = values;\n  }\n}\n\n//# sourceMappingURL=StyleProp.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvU3R5bGVQcm9wLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLEdBQUc7QUFDaEIsYUFBYSxXQUFXO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxQkFBcUIsbURBQUssR0FBRztBQUN6QztBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUJBQWlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxXQUFXO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLFlBQVksdUJBQXVCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsMkRBQWE7QUFDekM7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3N0eWxlcy9TdHlsZVByb3AubWpzPzFhZmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVCB9IGZyb20gXCJAdGxkcmF3L3ZhbGlkYXRlXCI7XG5jbGFzcyBTdHlsZVByb3Age1xuICAvKiogQGludGVybmFsICovXG4gIGNvbnN0cnVjdG9yKGlkLCBkZWZhdWx0VmFsdWUsIHR5cGUpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgfVxuICAvKipcbiAgICogRGVmaW5lIGEgbmV3IHtAbGluayBTdHlsZVByb3B9LlxuICAgKlxuICAgKiBAcGFyYW0gdW5pcXVlSWQgLSBFYWNoIFN0eWxlUHJvcCBtdXN0IGhhdmUgYSB1bmlxdWUgSUQuIFdlIHJlY29tbWVuZCB5b3UgcHJlZml4IHRoaXMgd2l0aFxuICAgKiB5b3VyIGFwcC9saWJyYXJ5IG5hbWUuXG4gICAqIEBwYXJhbSBvcHRpb25zIC1cbiAgICogLSBgZGVmYXVsdFZhbHVlYDogVGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoaXMgc3R5bGUgcHJvcC5cbiAgICpcbiAgICogLSBgdHlwZWA6IE9wdGlvbmFsbHksIGRlc2NyaWJlIHdoYXQgdHlwZSBvZiBkYXRhIHlvdSBleHBlY3QgZm9yIHRoaXMgc3R5bGUgcHJvcC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogaW1wb3J0IHtUfSBmcm9tICdAdGxkcmF3L3ZhbGlkYXRlJ1xuICAgKiBpbXBvcnQge1N0eWxlUHJvcH0gZnJvbSAnQHRsZHJhdy90bHNjaGVtYSdcbiAgICpcbiAgICogY29uc3QgTXlMaW5lV2lkdGhQcm9wID0gU3R5bGVQcm9wLmRlZmluZSgnbXlBcHA6bGluZVdpZHRoJywge1xuICAgKiAgIGRlZmF1bHRWYWx1ZTogMSxcbiAgICogICB0eXBlOiBULm51bWJlcixcbiAgICogfSlcbiAgICogYGBgXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0YXRpYyBkZWZpbmUodW5pcXVlSWQsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGRlZmF1bHRWYWx1ZSwgdHlwZSA9IFQuYW55IH0gPSBvcHRpb25zO1xuICAgIHJldHVybiBuZXcgU3R5bGVQcm9wKHVuaXF1ZUlkLCBkZWZhdWx0VmFsdWUsIHR5cGUpO1xuICB9XG4gIC8qKlxuICAgKiBEZWZpbmUgYSBuZXcge0BsaW5rIFN0eWxlUHJvcH0gYXMgYSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHVuaXF1ZUlkIC0gRWFjaCBTdHlsZVByb3AgbXVzdCBoYXZlIGEgdW5pcXVlIElELiBXZSByZWNvbW1lbmQgeW91IHByZWZpeCB0aGlzIHdpdGhcbiAgICogeW91ciBhcHAvbGlicmFyeSBuYW1lLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtXG4gICAqIC0gYGRlZmF1bHRWYWx1ZWA6IFRoZSBkZWZhdWx0IHZhbHVlIGZvciB0aGlzIHN0eWxlIHByb3AuXG4gICAqXG4gICAqIC0gYHZhbHVlc2A6IEFuIGFycmF5IG9mIHBvc3NpYmxlIHZhbHVlcyBvZiB0aGlzIHN0eWxlIHByb3AuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGltcG9ydCB7U3R5bGVQcm9wfSBmcm9tICdAdGxkcmF3L3Rsc2NoZW1hJ1xuICAgKlxuICAgKiBjb25zdCBNeVNpemVQcm9wID0gU3R5bGVQcm9wLmRlZmluZUVudW0oJ215QXBwOnNpemUnLCB7XG4gICAqICAgZGVmYXVsdFZhbHVlOiAnbWVkaXVtJyxcbiAgICogICB2YWx1ZXM6IFsnc21hbGwnLCAnbWVkaXVtJywgJ2xhcmdlJ10sXG4gICAqIH0pXG4gICAqIGBgYFxuICAgKi9cbiAgc3RhdGljIGRlZmluZUVudW0odW5pcXVlSWQsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGRlZmF1bHRWYWx1ZSwgdmFsdWVzIH0gPSBvcHRpb25zO1xuICAgIHJldHVybiBuZXcgRW51bVN0eWxlUHJvcCh1bmlxdWVJZCwgZGVmYXVsdFZhbHVlLCB2YWx1ZXMpO1xuICB9XG4gIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZS52YWxpZGF0ZSh2YWx1ZSk7XG4gIH1cbiAgdmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24ocHJldlZhbHVlLCBuZXdWYWx1ZSkge1xuICAgIGlmICh0aGlzLnR5cGUudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLnR5cGUudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24ocHJldlZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRlKG5ld1ZhbHVlKTtcbiAgICB9XG4gIH1cbn1cbmNsYXNzIEVudW1TdHlsZVByb3AgZXh0ZW5kcyBTdHlsZVByb3Age1xuICAvKiogQGludGVybmFsICovXG4gIGNvbnN0cnVjdG9yKGlkLCBkZWZhdWx0VmFsdWUsIHZhbHVlcykge1xuICAgIHN1cGVyKGlkLCBkZWZhdWx0VmFsdWUsIFQubGl0ZXJhbEVudW0oLi4udmFsdWVzKSk7XG4gICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEVudW1TdHlsZVByb3AsXG4gIFN0eWxlUHJvcFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0eWxlUHJvcC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultColorStyle: () => (/* binding */ DefaultColorStyle),\n/* harmony export */   DefaultColorThemePalette: () => (/* binding */ DefaultColorThemePalette),\n/* harmony export */   DefaultLabelColorStyle: () => (/* binding */ DefaultLabelColorStyle),\n/* harmony export */   defaultColorNames: () => (/* binding */ defaultColorNames),\n/* harmony export */   getDefaultColorTheme: () => (/* binding */ getDefaultColorTheme)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst defaultColorNames = [\n  \"black\",\n  \"grey\",\n  \"light-violet\",\n  \"violet\",\n  \"blue\",\n  \"light-blue\",\n  \"yellow\",\n  \"orange\",\n  \"green\",\n  \"light-green\",\n  \"light-red\",\n  \"red\",\n  \"white\"\n];\nconst DefaultColorThemePalette = {\n  lightMode: {\n    id: \"light\",\n    text: \"#000000\",\n    background: \"rgb(249, 250, 251)\",\n    solid: \"#fcfffe\",\n    black: {\n      solid: \"#1d1d1d\",\n      note: {\n        fill: \"#FCE19C\",\n        text: \"#000000\"\n      },\n      semi: \"#e8e8e8\",\n      pattern: \"#494949\",\n      highlight: {\n        srgb: \"#fddd00\",\n        p3: \"color(display-p3 0.972 0.8705 0.05)\"\n      }\n    },\n    blue: {\n      solid: \"#4465e9\",\n      note: {\n        fill: \"#8AA3FF\",\n        text: \"#000000\"\n      },\n      semi: \"#dce1f8\",\n      pattern: \"#6681ee\",\n      highlight: {\n        srgb: \"#10acff\",\n        p3: \"color(display-p3 0.308 0.6632 0.9996)\"\n      }\n    },\n    green: {\n      solid: \"#099268\",\n      note: {\n        fill: \"#6FC896\",\n        text: \"#000000\"\n      },\n      semi: \"#d3e9e3\",\n      pattern: \"#39a785\",\n      highlight: {\n        srgb: \"#00ffc8\",\n        p3: \"color(display-p3 0.2536 0.984 0.7981)\"\n      }\n    },\n    grey: {\n      solid: \"#9fa8b2\",\n      note: {\n        fill: \"#C0CAD3\",\n        text: \"#000000\"\n      },\n      semi: \"#eceef0\",\n      pattern: \"#bcc3c9\",\n      highlight: {\n        srgb: \"#cbe7f1\",\n        p3: \"color(display-p3 0.8163 0.9023 0.9416)\"\n      }\n    },\n    \"light-blue\": {\n      solid: \"#4ba1f1\",\n      note: {\n        fill: \"#9BC4FD\",\n        text: \"#000000\"\n      },\n      semi: \"#ddedfa\",\n      pattern: \"#6fbbf8\",\n      highlight: {\n        srgb: \"#00f4ff\",\n        p3: \"color(display-p3 0.1512 0.9414 0.9996)\"\n      }\n    },\n    \"light-green\": {\n      solid: \"#4cb05e\",\n      note: {\n        fill: \"#98D08A\",\n        text: \"#000000\"\n      },\n      semi: \"#dbf0e0\",\n      pattern: \"#65cb78\",\n      highlight: {\n        srgb: \"#65f641\",\n        p3: \"color(display-p3 0.563 0.9495 0.3857)\"\n      }\n    },\n    \"light-red\": {\n      solid: \"#f87777\",\n      note: {\n        fill: \"#F7A5A1\",\n        text: \"#000000\"\n      },\n      semi: \"#f4dadb\",\n      pattern: \"#fe9e9e\",\n      highlight: {\n        srgb: \"#ff7fa3\",\n        p3: \"color(display-p3 0.9988 0.5301 0.6397)\"\n      }\n    },\n    \"light-violet\": {\n      solid: \"#e085f4\",\n      note: {\n        fill: \"#DFB0F9\",\n        text: \"#000000\"\n      },\n      semi: \"#f5eafa\",\n      pattern: \"#e9acf8\",\n      highlight: {\n        srgb: \"#ff88ff\",\n        p3: \"color(display-p3 0.9676 0.5652 0.9999)\"\n      }\n    },\n    orange: {\n      solid: \"#e16919\",\n      note: {\n        fill: \"#FAA475\",\n        text: \"#000000\"\n      },\n      semi: \"#f8e2d4\",\n      pattern: \"#f78438\",\n      highlight: {\n        srgb: \"#ffa500\",\n        p3: \"color(display-p3 0.9988 0.6905 0.266)\"\n      }\n    },\n    red: {\n      solid: \"#e03131\",\n      note: {\n        fill: \"#FC8282\",\n        text: \"#000000\"\n      },\n      semi: \"#f4dadb\",\n      pattern: \"#e55959\",\n      highlight: {\n        srgb: \"#ff636e\",\n        p3: \"color(display-p3 0.9992 0.4376 0.45)\"\n      }\n    },\n    violet: {\n      solid: \"#ae3ec9\",\n      note: {\n        fill: \"#DB91FD\",\n        text: \"#000000\"\n      },\n      semi: \"#ecdcf2\",\n      pattern: \"#bd63d3\",\n      highlight: {\n        srgb: \"#c77cff\",\n        p3: \"color(display-p3 0.7469 0.5089 0.9995)\"\n      }\n    },\n    yellow: {\n      solid: \"#f1ac4b\",\n      note: {\n        fill: \"#FED49A\",\n        text: \"#000000\"\n      },\n      semi: \"#f9f0e6\",\n      pattern: \"#fecb92\",\n      highlight: {\n        srgb: \"#fddd00\",\n        p3: \"color(display-p3 0.972 0.8705 0.05)\"\n      }\n    },\n    white: {\n      solid: \"#FFFFFF\",\n      semi: \"#f5f5f5\",\n      pattern: \"#f9f9f9\",\n      note: {\n        fill: \"#FFFFFF\",\n        text: \"#000000\"\n      },\n      highlight: {\n        srgb: \"#ffffff\",\n        p3: \"color(display-p3 1 1 1)\"\n      }\n    }\n  },\n  darkMode: {\n    id: \"dark\",\n    text: \"hsl(210, 17%, 98%)\",\n    background: \"hsl(240, 5%, 6.5%)\",\n    solid: \"#010403\",\n    black: {\n      solid: \"#f2f2f2\",\n      note: {\n        fill: \"#2c2c2c\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#2c3036\",\n      pattern: \"#989898\",\n      highlight: {\n        srgb: \"#d2b700\",\n        p3: \"color(display-p3 0.8078 0.7225 0.0312)\"\n      }\n    },\n    blue: {\n      solid: \"#4f72fc\",\n      // 3c60f0\n      note: {\n        fill: \"#2A3F98\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#262d40\",\n      pattern: \"#3a4b9e\",\n      highlight: {\n        srgb: \"#0079d2\",\n        p3: \"color(display-p3 0.0032 0.4655 0.7991)\"\n      }\n    },\n    green: {\n      solid: \"#099268\",\n      note: {\n        fill: \"#014429\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#253231\",\n      pattern: \"#366a53\",\n      highlight: {\n        srgb: \"#009774\",\n        p3: \"color(display-p3 0.0085 0.582 0.4604)\"\n      }\n    },\n    grey: {\n      solid: \"#9398b0\",\n      note: {\n        fill: \"#56595F\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#33373c\",\n      pattern: \"#7c8187\",\n      highlight: {\n        srgb: \"#9cb4cb\",\n        p3: \"color(display-p3 0.6299 0.7012 0.7856)\"\n      }\n    },\n    \"light-blue\": {\n      solid: \"#4dabf7\",\n      note: {\n        fill: \"#1F5495\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#2a3642\",\n      pattern: \"#4d7aa9\",\n      highlight: {\n        srgb: \"#00bdc8\",\n        p3: \"color(display-p3 0.0023 0.7259 0.7735)\"\n      }\n    },\n    \"light-green\": {\n      solid: \"#40c057\",\n      note: {\n        fill: \"#21581D\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#2a3830\",\n      pattern: \"#4e874e\",\n      highlight: {\n        srgb: \"#00a000\",\n        p3: \"color(display-p3 0.2711 0.6172 0.0195)\"\n      }\n    },\n    \"light-red\": {\n      solid: \"#ff8787\",\n      note: {\n        fill: \"#923632\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#3b3235\",\n      pattern: \"#a56767\",\n      highlight: {\n        srgb: \"#db005b\",\n        p3: \"color(display-p3 0.7849 0.0585 0.3589)\"\n      }\n    },\n    \"light-violet\": {\n      solid: \"#e599f7\",\n      note: {\n        fill: \"#762F8E\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#383442\",\n      pattern: \"#9770a9\",\n      highlight: {\n        srgb: \"#c400c7\",\n        p3: \"color(display-p3 0.7024 0.0403 0.753)\"\n      }\n    },\n    orange: {\n      solid: \"#f76707\",\n      note: {\n        fill: \"#843906\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#3a2e2a\",\n      pattern: \"#9f552d\",\n      highlight: {\n        srgb: \"#d07a00\",\n        p3: \"color(display-p3 0.7699 0.4937 0.0085)\"\n      }\n    },\n    red: {\n      solid: \"#e03131\",\n      note: {\n        fill: \"#89231A\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#36292b\",\n      pattern: \"#8f3734\",\n      highlight: {\n        srgb: \"#de002c\",\n        p3: \"color(display-p3 0.7978 0.0509 0.2035)\"\n      }\n    },\n    violet: {\n      solid: \"#ae3ec9\",\n      note: {\n        fill: \"#681683\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#31293c\",\n      pattern: \"#763a8b\",\n      highlight: {\n        srgb: \"#9e00ee\",\n        p3: \"color(display-p3 0.5651 0.0079 0.8986)\"\n      }\n    },\n    yellow: {\n      solid: \"#ffc034\",\n      note: {\n        fill: \"#98571B\",\n        text: \"#f2f2f2\"\n      },\n      semi: \"#3c3934\",\n      pattern: \"#fecb92\",\n      highlight: {\n        srgb: \"#d2b700\",\n        p3: \"color(display-p3 0.8078 0.7225 0.0312)\"\n      }\n    },\n    white: {\n      solid: \"#f3f3f3\",\n      semi: \"#f5f5f5\",\n      pattern: \"#f9f9f9\",\n      note: {\n        fill: \"#eaeaea\",\n        text: \"#1d1d1d\"\n      },\n      highlight: {\n        srgb: \"#ffffff\",\n        p3: \"color(display-p3 1 1 1)\"\n      }\n    }\n  }\n};\nfunction getDefaultColorTheme(opts) {\n  return opts.isDarkMode ? DefaultColorThemePalette.darkMode : DefaultColorThemePalette.lightMode;\n}\nconst DefaultColorStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:color\", {\n  defaultValue: \"black\",\n  values: defaultColorNames\n});\nconst DefaultLabelColorStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:labelColor\", {\n  defaultValue: \"black\",\n  values: defaultColorNames\n});\n\n//# sourceMappingURL=TLColorStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExDb2xvclN0eWxlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixxREFBUztBQUNuQztBQUNBO0FBQ0EsQ0FBQztBQUNELCtCQUErQixxREFBUztBQUN4QztBQUNBO0FBQ0EsQ0FBQztBQU9DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExDb2xvclN0eWxlLm1qcz80YjY4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0eWxlUHJvcCB9IGZyb20gXCIuL1N0eWxlUHJvcC5tanNcIjtcbmNvbnN0IGRlZmF1bHRDb2xvck5hbWVzID0gW1xuICBcImJsYWNrXCIsXG4gIFwiZ3JleVwiLFxuICBcImxpZ2h0LXZpb2xldFwiLFxuICBcInZpb2xldFwiLFxuICBcImJsdWVcIixcbiAgXCJsaWdodC1ibHVlXCIsXG4gIFwieWVsbG93XCIsXG4gIFwib3JhbmdlXCIsXG4gIFwiZ3JlZW5cIixcbiAgXCJsaWdodC1ncmVlblwiLFxuICBcImxpZ2h0LXJlZFwiLFxuICBcInJlZFwiLFxuICBcIndoaXRlXCJcbl07XG5jb25zdCBEZWZhdWx0Q29sb3JUaGVtZVBhbGV0dGUgPSB7XG4gIGxpZ2h0TW9kZToge1xuICAgIGlkOiBcImxpZ2h0XCIsXG4gICAgdGV4dDogXCIjMDAwMDAwXCIsXG4gICAgYmFja2dyb3VuZDogXCJyZ2IoMjQ5LCAyNTAsIDI1MSlcIixcbiAgICBzb2xpZDogXCIjZmNmZmZlXCIsXG4gICAgYmxhY2s6IHtcbiAgICAgIHNvbGlkOiBcIiMxZDFkMWRcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjRkNFMTlDXCIsXG4gICAgICAgIHRleHQ6IFwiIzAwMDAwMFwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjZThlOGU4XCIsXG4gICAgICBwYXR0ZXJuOiBcIiM0OTQ5NDlcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiNmZGRkMDBcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjk3MiAwLjg3MDUgMC4wNSlcIlxuICAgICAgfVxuICAgIH0sXG4gICAgYmx1ZToge1xuICAgICAgc29saWQ6IFwiIzQ0NjVlOVwiLFxuICAgICAgbm90ZToge1xuICAgICAgICBmaWxsOiBcIiM4QUEzRkZcIixcbiAgICAgICAgdGV4dDogXCIjMDAwMDAwXCJcbiAgICAgIH0sXG4gICAgICBzZW1pOiBcIiNkY2UxZjhcIixcbiAgICAgIHBhdHRlcm46IFwiIzY2ODFlZVwiLFxuICAgICAgaGlnaGxpZ2h0OiB7XG4gICAgICAgIHNyZ2I6IFwiIzEwYWNmZlwiLFxuICAgICAgICBwMzogXCJjb2xvcihkaXNwbGF5LXAzIDAuMzA4IDAuNjYzMiAwLjk5OTYpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIGdyZWVuOiB7XG4gICAgICBzb2xpZDogXCIjMDk5MjY4XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiIzZGQzg5NlwiLFxuICAgICAgICB0ZXh0OiBcIiMwMDAwMDBcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiI2QzZTllM1wiLFxuICAgICAgcGF0dGVybjogXCIjMzlhNzg1XCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjMDBmZmM4XCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC4yNTM2IDAuOTg0IDAuNzk4MSlcIlxuICAgICAgfVxuICAgIH0sXG4gICAgZ3JleToge1xuICAgICAgc29saWQ6IFwiIzlmYThiMlwiLFxuICAgICAgbm90ZToge1xuICAgICAgICBmaWxsOiBcIiNDMENBRDNcIixcbiAgICAgICAgdGV4dDogXCIjMDAwMDAwXCJcbiAgICAgIH0sXG4gICAgICBzZW1pOiBcIiNlY2VlZjBcIixcbiAgICAgIHBhdHRlcm46IFwiI2JjYzNjOVwiLFxuICAgICAgaGlnaGxpZ2h0OiB7XG4gICAgICAgIHNyZ2I6IFwiI2NiZTdmMVwiLFxuICAgICAgICBwMzogXCJjb2xvcihkaXNwbGF5LXAzIDAuODE2MyAwLjkwMjMgMC45NDE2KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICBcImxpZ2h0LWJsdWVcIjoge1xuICAgICAgc29saWQ6IFwiIzRiYTFmMVwiLFxuICAgICAgbm90ZToge1xuICAgICAgICBmaWxsOiBcIiM5QkM0RkRcIixcbiAgICAgICAgdGV4dDogXCIjMDAwMDAwXCJcbiAgICAgIH0sXG4gICAgICBzZW1pOiBcIiNkZGVkZmFcIixcbiAgICAgIHBhdHRlcm46IFwiIzZmYmJmOFwiLFxuICAgICAgaGlnaGxpZ2h0OiB7XG4gICAgICAgIHNyZ2I6IFwiIzAwZjRmZlwiLFxuICAgICAgICBwMzogXCJjb2xvcihkaXNwbGF5LXAzIDAuMTUxMiAwLjk0MTQgMC45OTk2KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICBcImxpZ2h0LWdyZWVuXCI6IHtcbiAgICAgIHNvbGlkOiBcIiM0Y2IwNWVcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjOThEMDhBXCIsXG4gICAgICAgIHRleHQ6IFwiIzAwMDAwMFwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjZGJmMGUwXCIsXG4gICAgICBwYXR0ZXJuOiBcIiM2NWNiNzhcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiM2NWY2NDFcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjU2MyAwLjk0OTUgMC4zODU3KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICBcImxpZ2h0LXJlZFwiOiB7XG4gICAgICBzb2xpZDogXCIjZjg3Nzc3XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiI0Y3QTVBMVwiLFxuICAgICAgICB0ZXh0OiBcIiMwMDAwMDBcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiI2Y0ZGFkYlwiLFxuICAgICAgcGF0dGVybjogXCIjZmU5ZTllXCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjZmY3ZmEzXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC45OTg4IDAuNTMwMSAwLjYzOTcpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIFwibGlnaHQtdmlvbGV0XCI6IHtcbiAgICAgIHNvbGlkOiBcIiNlMDg1ZjRcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjREZCMEY5XCIsXG4gICAgICAgIHRleHQ6IFwiIzAwMDAwMFwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjZjVlYWZhXCIsXG4gICAgICBwYXR0ZXJuOiBcIiNlOWFjZjhcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiNmZjg4ZmZcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjk2NzYgMC41NjUyIDAuOTk5OSlcIlxuICAgICAgfVxuICAgIH0sXG4gICAgb3JhbmdlOiB7XG4gICAgICBzb2xpZDogXCIjZTE2OTE5XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiI0ZBQTQ3NVwiLFxuICAgICAgICB0ZXh0OiBcIiMwMDAwMDBcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiI2Y4ZTJkNFwiLFxuICAgICAgcGF0dGVybjogXCIjZjc4NDM4XCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjZmZhNTAwXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC45OTg4IDAuNjkwNSAwLjI2NilcIlxuICAgICAgfVxuICAgIH0sXG4gICAgcmVkOiB7XG4gICAgICBzb2xpZDogXCIjZTAzMTMxXCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiI0ZDODI4MlwiLFxuICAgICAgICB0ZXh0OiBcIiMwMDAwMDBcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiI2Y0ZGFkYlwiLFxuICAgICAgcGF0dGVybjogXCIjZTU1OTU5XCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjZmY2MzZlXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC45OTkyIDAuNDM3NiAwLjQ1KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICB2aW9sZXQ6IHtcbiAgICAgIHNvbGlkOiBcIiNhZTNlYzlcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjREI5MUZEXCIsXG4gICAgICAgIHRleHQ6IFwiIzAwMDAwMFwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjZWNkY2YyXCIsXG4gICAgICBwYXR0ZXJuOiBcIiNiZDYzZDNcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiNjNzdjZmZcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjc0NjkgMC41MDg5IDAuOTk5NSlcIlxuICAgICAgfVxuICAgIH0sXG4gICAgeWVsbG93OiB7XG4gICAgICBzb2xpZDogXCIjZjFhYzRiXCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiI0ZFRDQ5QVwiLFxuICAgICAgICB0ZXh0OiBcIiMwMDAwMDBcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiI2Y5ZjBlNlwiLFxuICAgICAgcGF0dGVybjogXCIjZmVjYjkyXCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjZmRkZDAwXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC45NzIgMC44NzA1IDAuMDUpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIHdoaXRlOiB7XG4gICAgICBzb2xpZDogXCIjRkZGRkZGXCIsXG4gICAgICBzZW1pOiBcIiNmNWY1ZjVcIixcbiAgICAgIHBhdHRlcm46IFwiI2Y5ZjlmOVwiLFxuICAgICAgbm90ZToge1xuICAgICAgICBmaWxsOiBcIiNGRkZGRkZcIixcbiAgICAgICAgdGV4dDogXCIjMDAwMDAwXCJcbiAgICAgIH0sXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjZmZmZmZmXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMSAxIDEpXCJcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGRhcmtNb2RlOiB7XG4gICAgaWQ6IFwiZGFya1wiLFxuICAgIHRleHQ6IFwiaHNsKDIxMCwgMTclLCA5OCUpXCIsXG4gICAgYmFja2dyb3VuZDogXCJoc2woMjQwLCA1JSwgNi41JSlcIixcbiAgICBzb2xpZDogXCIjMDEwNDAzXCIsXG4gICAgYmxhY2s6IHtcbiAgICAgIHNvbGlkOiBcIiNmMmYyZjJcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjMmMyYzJjXCIsXG4gICAgICAgIHRleHQ6IFwiI2YyZjJmMlwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjMmMzMDM2XCIsXG4gICAgICBwYXR0ZXJuOiBcIiM5ODk4OThcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiNkMmI3MDBcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjgwNzggMC43MjI1IDAuMDMxMilcIlxuICAgICAgfVxuICAgIH0sXG4gICAgYmx1ZToge1xuICAgICAgc29saWQ6IFwiIzRmNzJmY1wiLFxuICAgICAgLy8gM2M2MGYwXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiIzJBM0Y5OFwiLFxuICAgICAgICB0ZXh0OiBcIiNmMmYyZjJcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiIzI2MmQ0MFwiLFxuICAgICAgcGF0dGVybjogXCIjM2E0YjllXCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjMDA3OWQyXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC4wMDMyIDAuNDY1NSAwLjc5OTEpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIGdyZWVuOiB7XG4gICAgICBzb2xpZDogXCIjMDk5MjY4XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiIzAxNDQyOVwiLFxuICAgICAgICB0ZXh0OiBcIiNmMmYyZjJcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiIzI1MzIzMVwiLFxuICAgICAgcGF0dGVybjogXCIjMzY2YTUzXCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjMDA5Nzc0XCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC4wMDg1IDAuNTgyIDAuNDYwNClcIlxuICAgICAgfVxuICAgIH0sXG4gICAgZ3JleToge1xuICAgICAgc29saWQ6IFwiIzkzOThiMFwiLFxuICAgICAgbm90ZToge1xuICAgICAgICBmaWxsOiBcIiM1NjU5NUZcIixcbiAgICAgICAgdGV4dDogXCIjZjJmMmYyXCJcbiAgICAgIH0sXG4gICAgICBzZW1pOiBcIiMzMzM3M2NcIixcbiAgICAgIHBhdHRlcm46IFwiIzdjODE4N1wiLFxuICAgICAgaGlnaGxpZ2h0OiB7XG4gICAgICAgIHNyZ2I6IFwiIzljYjRjYlwiLFxuICAgICAgICBwMzogXCJjb2xvcihkaXNwbGF5LXAzIDAuNjI5OSAwLjcwMTIgMC43ODU2KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICBcImxpZ2h0LWJsdWVcIjoge1xuICAgICAgc29saWQ6IFwiIzRkYWJmN1wiLFxuICAgICAgbm90ZToge1xuICAgICAgICBmaWxsOiBcIiMxRjU0OTVcIixcbiAgICAgICAgdGV4dDogXCIjZjJmMmYyXCJcbiAgICAgIH0sXG4gICAgICBzZW1pOiBcIiMyYTM2NDJcIixcbiAgICAgIHBhdHRlcm46IFwiIzRkN2FhOVwiLFxuICAgICAgaGlnaGxpZ2h0OiB7XG4gICAgICAgIHNyZ2I6IFwiIzAwYmRjOFwiLFxuICAgICAgICBwMzogXCJjb2xvcihkaXNwbGF5LXAzIDAuMDAyMyAwLjcyNTkgMC43NzM1KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICBcImxpZ2h0LWdyZWVuXCI6IHtcbiAgICAgIHNvbGlkOiBcIiM0MGMwNTdcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjMjE1ODFEXCIsXG4gICAgICAgIHRleHQ6IFwiI2YyZjJmMlwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjMmEzODMwXCIsXG4gICAgICBwYXR0ZXJuOiBcIiM0ZTg3NGVcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiMwMGEwMDBcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjI3MTEgMC42MTcyIDAuMDE5NSlcIlxuICAgICAgfVxuICAgIH0sXG4gICAgXCJsaWdodC1yZWRcIjoge1xuICAgICAgc29saWQ6IFwiI2ZmODc4N1wiLFxuICAgICAgbm90ZToge1xuICAgICAgICBmaWxsOiBcIiM5MjM2MzJcIixcbiAgICAgICAgdGV4dDogXCIjZjJmMmYyXCJcbiAgICAgIH0sXG4gICAgICBzZW1pOiBcIiMzYjMyMzVcIixcbiAgICAgIHBhdHRlcm46IFwiI2E1Njc2N1wiLFxuICAgICAgaGlnaGxpZ2h0OiB7XG4gICAgICAgIHNyZ2I6IFwiI2RiMDA1YlwiLFxuICAgICAgICBwMzogXCJjb2xvcihkaXNwbGF5LXAzIDAuNzg0OSAwLjA1ODUgMC4zNTg5KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICBcImxpZ2h0LXZpb2xldFwiOiB7XG4gICAgICBzb2xpZDogXCIjZTU5OWY3XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiIzc2MkY4RVwiLFxuICAgICAgICB0ZXh0OiBcIiNmMmYyZjJcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiIzM4MzQ0MlwiLFxuICAgICAgcGF0dGVybjogXCIjOTc3MGE5XCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjYzQwMGM3XCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC43MDI0IDAuMDQwMyAwLjc1MylcIlxuICAgICAgfVxuICAgIH0sXG4gICAgb3JhbmdlOiB7XG4gICAgICBzb2xpZDogXCIjZjc2NzA3XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiIzg0MzkwNlwiLFxuICAgICAgICB0ZXh0OiBcIiNmMmYyZjJcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiIzNhMmUyYVwiLFxuICAgICAgcGF0dGVybjogXCIjOWY1NTJkXCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjZDA3YTAwXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC43Njk5IDAuNDkzNyAwLjAwODUpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlZDoge1xuICAgICAgc29saWQ6IFwiI2UwMzEzMVwiLFxuICAgICAgbm90ZToge1xuICAgICAgICBmaWxsOiBcIiM4OTIzMUFcIixcbiAgICAgICAgdGV4dDogXCIjZjJmMmYyXCJcbiAgICAgIH0sXG4gICAgICBzZW1pOiBcIiMzNjI5MmJcIixcbiAgICAgIHBhdHRlcm46IFwiIzhmMzczNFwiLFxuICAgICAgaGlnaGxpZ2h0OiB7XG4gICAgICAgIHNyZ2I6IFwiI2RlMDAyY1wiLFxuICAgICAgICBwMzogXCJjb2xvcihkaXNwbGF5LXAzIDAuNzk3OCAwLjA1MDkgMC4yMDM1KVwiXG4gICAgICB9XG4gICAgfSxcbiAgICB2aW9sZXQ6IHtcbiAgICAgIHNvbGlkOiBcIiNhZTNlYzlcIixcbiAgICAgIG5vdGU6IHtcbiAgICAgICAgZmlsbDogXCIjNjgxNjgzXCIsXG4gICAgICAgIHRleHQ6IFwiI2YyZjJmMlwiXG4gICAgICB9LFxuICAgICAgc2VtaTogXCIjMzEyOTNjXCIsXG4gICAgICBwYXR0ZXJuOiBcIiM3NjNhOGJcIixcbiAgICAgIGhpZ2hsaWdodDoge1xuICAgICAgICBzcmdiOiBcIiM5ZTAwZWVcIixcbiAgICAgICAgcDM6IFwiY29sb3IoZGlzcGxheS1wMyAwLjU2NTEgMC4wMDc5IDAuODk4NilcIlxuICAgICAgfVxuICAgIH0sXG4gICAgeWVsbG93OiB7XG4gICAgICBzb2xpZDogXCIjZmZjMDM0XCIsXG4gICAgICBub3RlOiB7XG4gICAgICAgIGZpbGw6IFwiIzk4NTcxQlwiLFxuICAgICAgICB0ZXh0OiBcIiNmMmYyZjJcIlxuICAgICAgfSxcbiAgICAgIHNlbWk6IFwiIzNjMzkzNFwiLFxuICAgICAgcGF0dGVybjogXCIjZmVjYjkyXCIsXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjZDJiNzAwXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMC44MDc4IDAuNzIyNSAwLjAzMTIpXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIHdoaXRlOiB7XG4gICAgICBzb2xpZDogXCIjZjNmM2YzXCIsXG4gICAgICBzZW1pOiBcIiNmNWY1ZjVcIixcbiAgICAgIHBhdHRlcm46IFwiI2Y5ZjlmOVwiLFxuICAgICAgbm90ZToge1xuICAgICAgICBmaWxsOiBcIiNlYWVhZWFcIixcbiAgICAgICAgdGV4dDogXCIjMWQxZDFkXCJcbiAgICAgIH0sXG4gICAgICBoaWdobGlnaHQ6IHtcbiAgICAgICAgc3JnYjogXCIjZmZmZmZmXCIsXG4gICAgICAgIHAzOiBcImNvbG9yKGRpc3BsYXktcDMgMSAxIDEpXCJcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5mdW5jdGlvbiBnZXREZWZhdWx0Q29sb3JUaGVtZShvcHRzKSB7XG4gIHJldHVybiBvcHRzLmlzRGFya01vZGUgPyBEZWZhdWx0Q29sb3JUaGVtZVBhbGV0dGUuZGFya01vZGUgOiBEZWZhdWx0Q29sb3JUaGVtZVBhbGV0dGUubGlnaHRNb2RlO1xufVxuY29uc3QgRGVmYXVsdENvbG9yU3R5bGUgPSBTdHlsZVByb3AuZGVmaW5lRW51bShcInRsZHJhdzpjb2xvclwiLCB7XG4gIGRlZmF1bHRWYWx1ZTogXCJibGFja1wiLFxuICB2YWx1ZXM6IGRlZmF1bHRDb2xvck5hbWVzXG59KTtcbmNvbnN0IERlZmF1bHRMYWJlbENvbG9yU3R5bGUgPSBTdHlsZVByb3AuZGVmaW5lRW51bShcInRsZHJhdzpsYWJlbENvbG9yXCIsIHtcbiAgZGVmYXVsdFZhbHVlOiBcImJsYWNrXCIsXG4gIHZhbHVlczogZGVmYXVsdENvbG9yTmFtZXNcbn0pO1xuZXhwb3J0IHtcbiAgRGVmYXVsdENvbG9yU3R5bGUsXG4gIERlZmF1bHRDb2xvclRoZW1lUGFsZXR0ZSxcbiAgRGVmYXVsdExhYmVsQ29sb3JTdHlsZSxcbiAgZGVmYXVsdENvbG9yTmFtZXMsXG4gIGdldERlZmF1bHRDb2xvclRoZW1lXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExDb2xvclN0eWxlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLColorStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultDashStyle: () => (/* binding */ DefaultDashStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultDashStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:dash\", {\n  defaultValue: \"draw\",\n  values: [\"draw\", \"solid\", \"dashed\", \"dotted\"]\n});\n\n//# sourceMappingURL=TLDashStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExEYXNoU3R5bGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDLHlCQUF5QixxREFBUztBQUNsQztBQUNBO0FBQ0EsQ0FBQztBQUdDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExEYXNoU3R5bGUubWpzP2VhMjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3R5bGVQcm9wIH0gZnJvbSBcIi4vU3R5bGVQcm9wLm1qc1wiO1xuY29uc3QgRGVmYXVsdERhc2hTdHlsZSA9IFN0eWxlUHJvcC5kZWZpbmVFbnVtKFwidGxkcmF3OmRhc2hcIiwge1xuICBkZWZhdWx0VmFsdWU6IFwiZHJhd1wiLFxuICB2YWx1ZXM6IFtcImRyYXdcIiwgXCJzb2xpZFwiLCBcImRhc2hlZFwiLCBcImRvdHRlZFwiXVxufSk7XG5leHBvcnQge1xuICBEZWZhdWx0RGFzaFN0eWxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VExEYXNoU3R5bGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLDashStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultFillStyle: () => (/* binding */ DefaultFillStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultFillStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:fill\", {\n  defaultValue: \"none\",\n  values: [\"none\", \"semi\", \"solid\", \"pattern\"]\n});\n\n//# sourceMappingURL=TLFillStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExGaWxsU3R5bGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDLHlCQUF5QixxREFBUztBQUNsQztBQUNBO0FBQ0EsQ0FBQztBQUdDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExGaWxsU3R5bGUubWpzPzgxODkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3R5bGVQcm9wIH0gZnJvbSBcIi4vU3R5bGVQcm9wLm1qc1wiO1xuY29uc3QgRGVmYXVsdEZpbGxTdHlsZSA9IFN0eWxlUHJvcC5kZWZpbmVFbnVtKFwidGxkcmF3OmZpbGxcIiwge1xuICBkZWZhdWx0VmFsdWU6IFwibm9uZVwiLFxuICB2YWx1ZXM6IFtcIm5vbmVcIiwgXCJzZW1pXCIsIFwic29saWRcIiwgXCJwYXR0ZXJuXCJdXG59KTtcbmV4cG9ydCB7XG4gIERlZmF1bHRGaWxsU3R5bGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTEZpbGxTdHlsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFillStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultFontFamilies: () => (/* binding */ DefaultFontFamilies),\n/* harmony export */   DefaultFontStyle: () => (/* binding */ DefaultFontStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultFontStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:font\", {\n  defaultValue: \"draw\",\n  values: [\"draw\", \"sans\", \"serif\", \"mono\"]\n});\nconst DefaultFontFamilies = {\n  draw: \"'tldraw_draw', sans-serif\",\n  sans: \"'tldraw_sans', sans-serif\",\n  serif: \"'tldraw_serif', serif\",\n  mono: \"'tldraw_mono', monospace\"\n};\n\n//# sourceMappingURL=TLFontStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExGb250U3R5bGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0QztBQUM1Qyx5QkFBeUIscURBQVM7QUFDbEM7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vc3R5bGVzL1RMRm9udFN0eWxlLm1qcz9jMDRjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0eWxlUHJvcCB9IGZyb20gXCIuL1N0eWxlUHJvcC5tanNcIjtcbmNvbnN0IERlZmF1bHRGb250U3R5bGUgPSBTdHlsZVByb3AuZGVmaW5lRW51bShcInRsZHJhdzpmb250XCIsIHtcbiAgZGVmYXVsdFZhbHVlOiBcImRyYXdcIixcbiAgdmFsdWVzOiBbXCJkcmF3XCIsIFwic2Fuc1wiLCBcInNlcmlmXCIsIFwibW9ub1wiXVxufSk7XG5jb25zdCBEZWZhdWx0Rm9udEZhbWlsaWVzID0ge1xuICBkcmF3OiBcIid0bGRyYXdfZHJhdycsIHNhbnMtc2VyaWZcIixcbiAgc2FuczogXCIndGxkcmF3X3NhbnMnLCBzYW5zLXNlcmlmXCIsXG4gIHNlcmlmOiBcIid0bGRyYXdfc2VyaWYnLCBzZXJpZlwiLFxuICBtb25vOiBcIid0bGRyYXdfbW9ubycsIG1vbm9zcGFjZVwiXG59O1xuZXhwb3J0IHtcbiAgRGVmYXVsdEZvbnRGYW1pbGllcyxcbiAgRGVmYXVsdEZvbnRTdHlsZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMRm9udFN0eWxlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLFontStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLHorizontalAlignStyle.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLHorizontalAlignStyle.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultHorizontalAlignStyle: () => (/* binding */ DefaultHorizontalAlignStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultHorizontalAlignStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:horizontalAlign\", {\n  defaultValue: \"middle\",\n  values: [\"start\", \"middle\", \"end\", \"start-legacy\", \"end-legacy\", \"middle-legacy\"]\n});\n\n//# sourceMappingURL=TLHorizontalAlignStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExIb3Jpem9udGFsQWxpZ25TdHlsZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEM7QUFDNUMsb0NBQW9DLHFEQUFTO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBR0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3N0eWxlcy9UTEhvcml6b250YWxBbGlnblN0eWxlLm1qcz85Yzg3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0eWxlUHJvcCB9IGZyb20gXCIuL1N0eWxlUHJvcC5tanNcIjtcbmNvbnN0IERlZmF1bHRIb3Jpem9udGFsQWxpZ25TdHlsZSA9IFN0eWxlUHJvcC5kZWZpbmVFbnVtKFwidGxkcmF3Omhvcml6b250YWxBbGlnblwiLCB7XG4gIGRlZmF1bHRWYWx1ZTogXCJtaWRkbGVcIixcbiAgdmFsdWVzOiBbXCJzdGFydFwiLCBcIm1pZGRsZVwiLCBcImVuZFwiLCBcInN0YXJ0LWxlZ2FjeVwiLCBcImVuZC1sZWdhY3lcIiwgXCJtaWRkbGUtbGVnYWN5XCJdXG59KTtcbmV4cG9ydCB7XG4gIERlZmF1bHRIb3Jpem9udGFsQWxpZ25TdHlsZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMSG9yaXpvbnRhbEFsaWduU3R5bGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLHorizontalAlignStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultSizeStyle: () => (/* binding */ DefaultSizeStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultSizeStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:size\", {\n  defaultValue: \"m\",\n  values: [\"s\", \"m\", \"l\", \"xl\"]\n});\n\n//# sourceMappingURL=TLSizeStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExTaXplU3R5bGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDLHlCQUF5QixxREFBUztBQUNsQztBQUNBO0FBQ0EsQ0FBQztBQUdDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExTaXplU3R5bGUubWpzPzliNTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3R5bGVQcm9wIH0gZnJvbSBcIi4vU3R5bGVQcm9wLm1qc1wiO1xuY29uc3QgRGVmYXVsdFNpemVTdHlsZSA9IFN0eWxlUHJvcC5kZWZpbmVFbnVtKFwidGxkcmF3OnNpemVcIiwge1xuICBkZWZhdWx0VmFsdWU6IFwibVwiLFxuICB2YWx1ZXM6IFtcInNcIiwgXCJtXCIsIFwibFwiLCBcInhsXCJdXG59KTtcbmV4cG9ydCB7XG4gIERlZmF1bHRTaXplU3R5bGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UTFNpemVTdHlsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLSizeStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLTextAlignStyle.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLTextAlignStyle.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultTextAlignStyle: () => (/* binding */ DefaultTextAlignStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultTextAlignStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:textAlign\", {\n  defaultValue: \"start\",\n  values: [\"start\", \"middle\", \"end\"]\n});\n\n//# sourceMappingURL=TLTextAlignStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExUZXh0QWxpZ25TdHlsZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEM7QUFDNUMsOEJBQThCLHFEQUFTO0FBQ3ZDO0FBQ0E7QUFDQSxDQUFDO0FBR0M7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL2Rpc3QtZXNtL3N0eWxlcy9UTFRleHRBbGlnblN0eWxlLm1qcz8yZjE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0eWxlUHJvcCB9IGZyb20gXCIuL1N0eWxlUHJvcC5tanNcIjtcbmNvbnN0IERlZmF1bHRUZXh0QWxpZ25TdHlsZSA9IFN0eWxlUHJvcC5kZWZpbmVFbnVtKFwidGxkcmF3OnRleHRBbGlnblwiLCB7XG4gIGRlZmF1bHRWYWx1ZTogXCJzdGFydFwiLFxuICB2YWx1ZXM6IFtcInN0YXJ0XCIsIFwibWlkZGxlXCIsIFwiZW5kXCJdXG59KTtcbmV4cG9ydCB7XG4gIERlZmF1bHRUZXh0QWxpZ25TdHlsZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMVGV4dEFsaWduU3R5bGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLTextAlignStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLVerticalAlignStyle.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/styles/TLVerticalAlignStyle.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultVerticalAlignStyle: () => (/* binding */ DefaultVerticalAlignStyle)\n/* harmony export */ });\n/* harmony import */ var _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StyleProp.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/StyleProp.mjs\");\n\nconst DefaultVerticalAlignStyle = _StyleProp_mjs__WEBPACK_IMPORTED_MODULE_0__.StyleProp.defineEnum(\"tldraw:verticalAlign\", {\n  defaultValue: \"middle\",\n  values: [\"start\", \"middle\", \"end\"]\n});\n\n//# sourceMappingURL=TLVerticalAlignStyle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExWZXJ0aWNhbEFsaWduU3R5bGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBQzVDLGtDQUFrQyxxREFBUztBQUMzQztBQUNBO0FBQ0EsQ0FBQztBQUdDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS9zdHlsZXMvVExWZXJ0aWNhbEFsaWduU3R5bGUubWpzPzY2Y2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3R5bGVQcm9wIH0gZnJvbSBcIi4vU3R5bGVQcm9wLm1qc1wiO1xuY29uc3QgRGVmYXVsdFZlcnRpY2FsQWxpZ25TdHlsZSA9IFN0eWxlUHJvcC5kZWZpbmVFbnVtKFwidGxkcmF3OnZlcnRpY2FsQWxpZ25cIiwge1xuICBkZWZhdWx0VmFsdWU6IFwibWlkZGxlXCIsXG4gIHZhbHVlczogW1wic3RhcnRcIiwgXCJtaWRkbGVcIiwgXCJlbmRcIl1cbn0pO1xuZXhwb3J0IHtcbiAgRGVmYXVsdFZlcnRpY2FsQWxpZ25TdHlsZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRMVmVydGljYWxBbGlnblN0eWxlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/styles/TLVerticalAlignStyle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/translations/languages.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/translations/languages.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LANGUAGES: () => (/* binding */ LANGUAGES)\n/* harmony export */ });\nconst LANGUAGES = [\n  { locale: \"id\", label: \"Bahasa Indonesia\" },\n  { locale: \"ca\", label: \"Catal\\xE0\" },\n  { locale: \"cs\", label: \"\\u010Ce\\u0161tina\" },\n  { locale: \"da\", label: \"Danish\" },\n  { locale: \"de\", label: \"Deutsch\" },\n  { locale: \"en\", label: \"English\" },\n  { locale: \"es\", label: \"Espa\\xF1ol\" },\n  { locale: \"fr\", label: \"Fran\\xE7ais\" },\n  { locale: \"gl\", label: \"Galego\" },\n  { locale: \"hr\", label: \"Hrvatski\" },\n  { locale: \"it\", label: \"Italiano\" },\n  { locale: \"hu\", label: \"Magyar\" },\n  { locale: \"no\", label: \"Norwegian\" },\n  { locale: \"pl\", label: \"Polski\" },\n  { locale: \"pt-br\", label: \"Portugu\\xEAs - Brasil\" },\n  { locale: \"pt-pt\", label: \"Portugu\\xEAs - Europeu\" },\n  { locale: \"ro\", label: \"Rom\\xE2n\\u0103\" },\n  { locale: \"ru\", label: \"Russian\" },\n  { locale: \"sl\", label: \"Sloven\\u0161\\u010Dina\" },\n  { locale: \"fi\", label: \"Suomi\" },\n  { locale: \"sv\", label: \"Svenska\" },\n  { locale: \"vi\", label: \"Ti\\u1EBFng Vi\\u1EC7t\" },\n  { locale: \"tr\", label: \"T\\xFCrk\\xE7e\" },\n  { locale: \"uk\", label: \"Ukrainian\" },\n  { locale: \"he\", label: \"\\u05E2\\u05D1\\u05E8\\u05D9\\u05EA\" },\n  { locale: \"ar\", label: \"\\u0639\\u0631\\u0628\\u064A\" },\n  { locale: \"fa\", label: \"\\u0641\\u0627\\u0631\\u0633\\u06CC\" },\n  { locale: \"ku\", label: \"\\u06A9\\u0648\\u0631\\u062F\\u06CC\" },\n  { locale: \"ne\", label: \"\\u0928\\u0947\\u092A\\u093E\\u0932\\u0940\" },\n  { locale: \"hi-in\", label: \"\\u0939\\u093F\\u0928\\u094D\\u0926\\u0940\" },\n  { locale: \"te\", label: \"\\u0C24\\u0C46\\u0C32\\u0C41\\u0C17\\u0C41\" },\n  { locale: \"th\", label: \"\\u0E20\\u0E32\\u0E29\\u0E32\\u0E44\\u0E17\\u0E22\" },\n  { locale: \"my\", label: \"\\u1019\\u103C\\u1014\\u103A\\u1019\\u102C\\u1005\\u102C\" },\n  { locale: \"ko-kr\", label: \"\\uD55C\\uAD6D\\uC5B4\" },\n  { locale: \"ja\", label: \"\\u65E5\\u672C\\u8A9E\" },\n  { locale: \"zh-cn\", label: \"\\u7B80\\u4F53\\u4E2D\\u6587\" },\n  { locale: \"zh-tw\", label: \"\\u7E41\\u9AD4\\u4E2D\\u6587 (\\u53F0\\u7063)\" }\n];\n\n//# sourceMappingURL=languages.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS90cmFuc2xhdGlvbnMvbGFuZ3VhZ2VzLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQSxJQUFJLHlDQUF5QztBQUM3QyxJQUFJLGtDQUFrQztBQUN0QyxJQUFJLDBDQUEwQztBQUM5QyxJQUFJLCtCQUErQjtBQUNuQyxJQUFJLGdDQUFnQztBQUNwQyxJQUFJLGdDQUFnQztBQUNwQyxJQUFJLG1DQUFtQztBQUN2QyxJQUFJLG9DQUFvQztBQUN4QyxJQUFJLCtCQUErQjtBQUNuQyxJQUFJLGlDQUFpQztBQUNyQyxJQUFJLGlDQUFpQztBQUNyQyxJQUFJLCtCQUErQjtBQUNuQyxJQUFJLGtDQUFrQztBQUN0QyxJQUFJLCtCQUErQjtBQUNuQyxJQUFJLGlEQUFpRDtBQUNyRCxJQUFJLGtEQUFrRDtBQUN0RCxJQUFJLHVDQUF1QztBQUMzQyxJQUFJLGdDQUFnQztBQUNwQyxJQUFJLDhDQUE4QztBQUNsRCxJQUFJLDhCQUE4QjtBQUNsQyxJQUFJLGdDQUFnQztBQUNwQyxJQUFJLDZDQUE2QztBQUNqRCxJQUFJLHFDQUFxQztBQUN6QyxJQUFJLGtDQUFrQztBQUN0QyxJQUFJLHVEQUF1RDtBQUMzRCxJQUFJLGlEQUFpRDtBQUNyRCxJQUFJLHVEQUF1RDtBQUMzRCxJQUFJLHVEQUF1RDtBQUMzRCxJQUFJLDZEQUE2RDtBQUNqRSxJQUFJLGdFQUFnRTtBQUNwRSxJQUFJLDZEQUE2RDtBQUNqRSxJQUFJLG1FQUFtRTtBQUN2RSxJQUFJLHlFQUF5RTtBQUM3RSxJQUFJLDhDQUE4QztBQUNsRCxJQUFJLDJDQUEyQztBQUMvQyxJQUFJLG9EQUFvRDtBQUN4RCxJQUFJO0FBQ0o7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vdHJhbnNsYXRpb25zL2xhbmd1YWdlcy5tanM/MTA2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBMQU5HVUFHRVMgPSBbXG4gIHsgbG9jYWxlOiBcImlkXCIsIGxhYmVsOiBcIkJhaGFzYSBJbmRvbmVzaWFcIiB9LFxuICB7IGxvY2FsZTogXCJjYVwiLCBsYWJlbDogXCJDYXRhbFxceEUwXCIgfSxcbiAgeyBsb2NhbGU6IFwiY3NcIiwgbGFiZWw6IFwiXFx1MDEwQ2VcXHUwMTYxdGluYVwiIH0sXG4gIHsgbG9jYWxlOiBcImRhXCIsIGxhYmVsOiBcIkRhbmlzaFwiIH0sXG4gIHsgbG9jYWxlOiBcImRlXCIsIGxhYmVsOiBcIkRldXRzY2hcIiB9LFxuICB7IGxvY2FsZTogXCJlblwiLCBsYWJlbDogXCJFbmdsaXNoXCIgfSxcbiAgeyBsb2NhbGU6IFwiZXNcIiwgbGFiZWw6IFwiRXNwYVxceEYxb2xcIiB9LFxuICB7IGxvY2FsZTogXCJmclwiLCBsYWJlbDogXCJGcmFuXFx4RTdhaXNcIiB9LFxuICB7IGxvY2FsZTogXCJnbFwiLCBsYWJlbDogXCJHYWxlZ29cIiB9LFxuICB7IGxvY2FsZTogXCJoclwiLCBsYWJlbDogXCJIcnZhdHNraVwiIH0sXG4gIHsgbG9jYWxlOiBcIml0XCIsIGxhYmVsOiBcIkl0YWxpYW5vXCIgfSxcbiAgeyBsb2NhbGU6IFwiaHVcIiwgbGFiZWw6IFwiTWFneWFyXCIgfSxcbiAgeyBsb2NhbGU6IFwibm9cIiwgbGFiZWw6IFwiTm9yd2VnaWFuXCIgfSxcbiAgeyBsb2NhbGU6IFwicGxcIiwgbGFiZWw6IFwiUG9sc2tpXCIgfSxcbiAgeyBsb2NhbGU6IFwicHQtYnJcIiwgbGFiZWw6IFwiUG9ydHVndVxceEVBcyAtIEJyYXNpbFwiIH0sXG4gIHsgbG9jYWxlOiBcInB0LXB0XCIsIGxhYmVsOiBcIlBvcnR1Z3VcXHhFQXMgLSBFdXJvcGV1XCIgfSxcbiAgeyBsb2NhbGU6IFwicm9cIiwgbGFiZWw6IFwiUm9tXFx4RTJuXFx1MDEwM1wiIH0sXG4gIHsgbG9jYWxlOiBcInJ1XCIsIGxhYmVsOiBcIlJ1c3NpYW5cIiB9LFxuICB7IGxvY2FsZTogXCJzbFwiLCBsYWJlbDogXCJTbG92ZW5cXHUwMTYxXFx1MDEwRGluYVwiIH0sXG4gIHsgbG9jYWxlOiBcImZpXCIsIGxhYmVsOiBcIlN1b21pXCIgfSxcbiAgeyBsb2NhbGU6IFwic3ZcIiwgbGFiZWw6IFwiU3ZlbnNrYVwiIH0sXG4gIHsgbG9jYWxlOiBcInZpXCIsIGxhYmVsOiBcIlRpXFx1MUVCRm5nIFZpXFx1MUVDN3RcIiB9LFxuICB7IGxvY2FsZTogXCJ0clwiLCBsYWJlbDogXCJUXFx4RkNya1xceEU3ZVwiIH0sXG4gIHsgbG9jYWxlOiBcInVrXCIsIGxhYmVsOiBcIlVrcmFpbmlhblwiIH0sXG4gIHsgbG9jYWxlOiBcImhlXCIsIGxhYmVsOiBcIlxcdTA1RTJcXHUwNUQxXFx1MDVFOFxcdTA1RDlcXHUwNUVBXCIgfSxcbiAgeyBsb2NhbGU6IFwiYXJcIiwgbGFiZWw6IFwiXFx1MDYzOVxcdTA2MzFcXHUwNjI4XFx1MDY0QVwiIH0sXG4gIHsgbG9jYWxlOiBcImZhXCIsIGxhYmVsOiBcIlxcdTA2NDFcXHUwNjI3XFx1MDYzMVxcdTA2MzNcXHUwNkNDXCIgfSxcbiAgeyBsb2NhbGU6IFwia3VcIiwgbGFiZWw6IFwiXFx1MDZBOVxcdTA2NDhcXHUwNjMxXFx1MDYyRlxcdTA2Q0NcIiB9LFxuICB7IGxvY2FsZTogXCJuZVwiLCBsYWJlbDogXCJcXHUwOTI4XFx1MDk0N1xcdTA5MkFcXHUwOTNFXFx1MDkzMlxcdTA5NDBcIiB9LFxuICB7IGxvY2FsZTogXCJoaS1pblwiLCBsYWJlbDogXCJcXHUwOTM5XFx1MDkzRlxcdTA5MjhcXHUwOTREXFx1MDkyNlxcdTA5NDBcIiB9LFxuICB7IGxvY2FsZTogXCJ0ZVwiLCBsYWJlbDogXCJcXHUwQzI0XFx1MEM0NlxcdTBDMzJcXHUwQzQxXFx1MEMxN1xcdTBDNDFcIiB9LFxuICB7IGxvY2FsZTogXCJ0aFwiLCBsYWJlbDogXCJcXHUwRTIwXFx1MEUzMlxcdTBFMjlcXHUwRTMyXFx1MEU0NFxcdTBFMTdcXHUwRTIyXCIgfSxcbiAgeyBsb2NhbGU6IFwibXlcIiwgbGFiZWw6IFwiXFx1MTAxOVxcdTEwM0NcXHUxMDE0XFx1MTAzQVxcdTEwMTlcXHUxMDJDXFx1MTAwNVxcdTEwMkNcIiB9LFxuICB7IGxvY2FsZTogXCJrby1rclwiLCBsYWJlbDogXCJcXHVENTVDXFx1QUQ2RFxcdUM1QjRcIiB9LFxuICB7IGxvY2FsZTogXCJqYVwiLCBsYWJlbDogXCJcXHU2NUU1XFx1NjcyQ1xcdThBOUVcIiB9LFxuICB7IGxvY2FsZTogXCJ6aC1jblwiLCBsYWJlbDogXCJcXHU3QjgwXFx1NEY1M1xcdTRFMkRcXHU2NTg3XCIgfSxcbiAgeyBsb2NhbGU6IFwiemgtdHdcIiwgbGFiZWw6IFwiXFx1N0U0MVxcdTlBRDRcXHU0RTJEXFx1NjU4NyAoXFx1NTNGMFxcdTcwNjMpXCIgfVxuXTtcbmV4cG9ydCB7XG4gIExBTkdVQUdFU1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhbmd1YWdlcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/translations/languages.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/dist-esm/translations/translations.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/dist-esm/translations/translations.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LANGUAGES: () => (/* reexport safe */ _languages_mjs__WEBPACK_IMPORTED_MODULE_0__.LANGUAGES),\n/* harmony export */   _getDefaultTranslationLocale: () => (/* binding */ _getDefaultTranslationLocale),\n/* harmony export */   getDefaultTranslationLocale: () => (/* binding */ getDefaultTranslationLocale)\n/* harmony export */ });\n/* harmony import */ var _languages_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./languages.mjs */ \"(ssr)/./node_modules/@tldraw/tlschema/dist-esm/translations/languages.mjs\");\n\nfunction getDefaultTranslationLocale() {\n  const locales = typeof window !== \"undefined\" ? window.navigator.languages ?? [\"en\"] : [\"en\"];\n  return _getDefaultTranslationLocale(locales);\n}\nfunction _getDefaultTranslationLocale(locales) {\n  for (const locale of locales) {\n    const supportedLocale = getSupportedLocale(locale);\n    if (supportedLocale) {\n      return supportedLocale;\n    }\n  }\n  return \"en\";\n}\nconst DEFAULT_LOCALE_REGIONS = {\n  zh: \"zh-cn\",\n  pt: \"pt-br\",\n  ko: \"ko-kr\",\n  hi: \"hi-in\"\n};\nfunction getSupportedLocale(locale) {\n  const exactMatch = _languages_mjs__WEBPACK_IMPORTED_MODULE_0__.LANGUAGES.find((t) => t.locale === locale.toLowerCase());\n  if (exactMatch) {\n    return exactMatch.locale;\n  }\n  const [language, region] = locale.split(/[-_]/).map((s) => s.toLowerCase());\n  if (region) {\n    const languageMatch = _languages_mjs__WEBPACK_IMPORTED_MODULE_0__.LANGUAGES.find((t) => t.locale === language);\n    if (languageMatch) {\n      return languageMatch.locale;\n    }\n  }\n  if (language in DEFAULT_LOCALE_REGIONS) {\n    return DEFAULT_LOCALE_REGIONS[language];\n  }\n  return null;\n}\n\n//# sourceMappingURL=translations.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9kaXN0LWVzbS90cmFuc2xhdGlvbnMvdHJhbnNsYXRpb25zLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIscURBQVM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixxREFBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdGxzY2hlbWEvZGlzdC1lc20vdHJhbnNsYXRpb25zL3RyYW5zbGF0aW9ucy5tanM/YmZjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMQU5HVUFHRVMgfSBmcm9tIFwiLi9sYW5ndWFnZXMubWpzXCI7XG5mdW5jdGlvbiBnZXREZWZhdWx0VHJhbnNsYXRpb25Mb2NhbGUoKSB7XG4gIGNvbnN0IGxvY2FsZXMgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZXMgPz8gW1wiZW5cIl0gOiBbXCJlblwiXTtcbiAgcmV0dXJuIF9nZXREZWZhdWx0VHJhbnNsYXRpb25Mb2NhbGUobG9jYWxlcyk7XG59XG5mdW5jdGlvbiBfZ2V0RGVmYXVsdFRyYW5zbGF0aW9uTG9jYWxlKGxvY2FsZXMpIHtcbiAgZm9yIChjb25zdCBsb2NhbGUgb2YgbG9jYWxlcykge1xuICAgIGNvbnN0IHN1cHBvcnRlZExvY2FsZSA9IGdldFN1cHBvcnRlZExvY2FsZShsb2NhbGUpO1xuICAgIGlmIChzdXBwb3J0ZWRMb2NhbGUpIHtcbiAgICAgIHJldHVybiBzdXBwb3J0ZWRMb2NhbGU7XG4gICAgfVxuICB9XG4gIHJldHVybiBcImVuXCI7XG59XG5jb25zdCBERUZBVUxUX0xPQ0FMRV9SRUdJT05TID0ge1xuICB6aDogXCJ6aC1jblwiLFxuICBwdDogXCJwdC1iclwiLFxuICBrbzogXCJrby1rclwiLFxuICBoaTogXCJoaS1pblwiXG59O1xuZnVuY3Rpb24gZ2V0U3VwcG9ydGVkTG9jYWxlKGxvY2FsZSkge1xuICBjb25zdCBleGFjdE1hdGNoID0gTEFOR1VBR0VTLmZpbmQoKHQpID0+IHQubG9jYWxlID09PSBsb2NhbGUudG9Mb3dlckNhc2UoKSk7XG4gIGlmIChleGFjdE1hdGNoKSB7XG4gICAgcmV0dXJuIGV4YWN0TWF0Y2gubG9jYWxlO1xuICB9XG4gIGNvbnN0IFtsYW5ndWFnZSwgcmVnaW9uXSA9IGxvY2FsZS5zcGxpdCgvWy1fXS8pLm1hcCgocykgPT4gcy50b0xvd2VyQ2FzZSgpKTtcbiAgaWYgKHJlZ2lvbikge1xuICAgIGNvbnN0IGxhbmd1YWdlTWF0Y2ggPSBMQU5HVUFHRVMuZmluZCgodCkgPT4gdC5sb2NhbGUgPT09IGxhbmd1YWdlKTtcbiAgICBpZiAobGFuZ3VhZ2VNYXRjaCkge1xuICAgICAgcmV0dXJuIGxhbmd1YWdlTWF0Y2gubG9jYWxlO1xuICAgIH1cbiAgfVxuICBpZiAobGFuZ3VhZ2UgaW4gREVGQVVMVF9MT0NBTEVfUkVHSU9OUykge1xuICAgIHJldHVybiBERUZBVUxUX0xPQ0FMRV9SRUdJT05TW2xhbmd1YWdlXTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmV4cG9ydCB7XG4gIExBTkdVQUdFUyxcbiAgX2dldERlZmF1bHRUcmFuc2xhdGlvbkxvY2FsZSxcbiAgZ2V0RGVmYXVsdFRyYW5zbGF0aW9uTG9jYWxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNsYXRpb25zLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/dist-esm/translations/translations.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/node_modules/nanoid/index.js":
/*!********************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/node_modules/nanoid/index.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customAlphabet: () => (/* binding */ customAlphabet),\n/* harmony export */   customRandom: () => (/* binding */ customRandom),\n/* harmony export */   nanoid: () => (/* binding */ nanoid),\n/* harmony export */   random: () => (/* binding */ random),\n/* harmony export */   urlAlphabet: () => (/* reexport safe */ _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__.urlAlphabet)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./url-alphabet/index.js */ \"(ssr)/./node_modules/@tldraw/tlschema/node_modules/nanoid/url-alphabet/index.js\");\n\n\n\nconst POOL_SIZE_MULTIPLIER = 128\nlet pool, poolOffset\nlet fillPool = bytes => {\n  if (!pool || pool.length < bytes) {\n    pool = Buffer.allocUnsafe(bytes * POOL_SIZE_MULTIPLIER)\n    ;(0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomFillSync)(pool)\n    poolOffset = 0\n  } else if (poolOffset + bytes > pool.length) {\n    (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomFillSync)(pool)\n    poolOffset = 0\n  }\n  poolOffset += bytes\n}\nlet random = bytes => {\n  fillPool((bytes -= 0))\n  return pool.subarray(poolOffset - bytes, poolOffset)\n}\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (31 - Math.clz32((alphabet.length - 1) | 1))) - 1\n  let step = Math.ceil((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let i = step\n      while (i--) {\n        id += alphabet[bytes[i] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) => {\n  fillPool((size -= 0))\n  let id = ''\n  for (let i = poolOffset - size; i < poolOffset; i++) {\n    id += _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__.urlAlphabet[pool[i] & 63]\n  }\n  return id\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9ub2RlX21vZHVsZXMvbmFub2lkL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBdUM7QUFDYztBQUMvQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx1REFBYztBQUNsQjtBQUNBLElBQUk7QUFDSixJQUFJLHNEQUFjO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ087QUFDUDtBQUNBO0FBQ0Esa0NBQWtDLGdCQUFnQjtBQUNsRCxVQUFVLCtEQUFXO0FBQ3JCO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL25vZGVfbW9kdWxlcy9uYW5vaWQvaW5kZXguanM/MDMwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByYW5kb21GaWxsU3luYyB9IGZyb20gJ2NyeXB0bydcbmltcG9ydCB7IHVybEFscGhhYmV0IH0gZnJvbSAnLi91cmwtYWxwaGFiZXQvaW5kZXguanMnXG5leHBvcnQgeyB1cmxBbHBoYWJldCB9XG5jb25zdCBQT09MX1NJWkVfTVVMVElQTElFUiA9IDEyOFxubGV0IHBvb2wsIHBvb2xPZmZzZXRcbmxldCBmaWxsUG9vbCA9IGJ5dGVzID0+IHtcbiAgaWYgKCFwb29sIHx8IHBvb2wubGVuZ3RoIDwgYnl0ZXMpIHtcbiAgICBwb29sID0gQnVmZmVyLmFsbG9jVW5zYWZlKGJ5dGVzICogUE9PTF9TSVpFX01VTFRJUExJRVIpXG4gICAgcmFuZG9tRmlsbFN5bmMocG9vbClcbiAgICBwb29sT2Zmc2V0ID0gMFxuICB9IGVsc2UgaWYgKHBvb2xPZmZzZXQgKyBieXRlcyA+IHBvb2wubGVuZ3RoKSB7XG4gICAgcmFuZG9tRmlsbFN5bmMocG9vbClcbiAgICBwb29sT2Zmc2V0ID0gMFxuICB9XG4gIHBvb2xPZmZzZXQgKz0gYnl0ZXNcbn1cbmV4cG9ydCBsZXQgcmFuZG9tID0gYnl0ZXMgPT4ge1xuICBmaWxsUG9vbCgoYnl0ZXMgLT0gMCkpXG4gIHJldHVybiBwb29sLnN1YmFycmF5KHBvb2xPZmZzZXQgLSBieXRlcywgcG9vbE9mZnNldClcbn1cbmV4cG9ydCBsZXQgY3VzdG9tUmFuZG9tID0gKGFscGhhYmV0LCBkZWZhdWx0U2l6ZSwgZ2V0UmFuZG9tKSA9PiB7XG4gIGxldCBtYXNrID0gKDIgPDwgKDMxIC0gTWF0aC5jbHozMigoYWxwaGFiZXQubGVuZ3RoIC0gMSkgfCAxKSkpIC0gMVxuICBsZXQgc3RlcCA9IE1hdGguY2VpbCgoMS42ICogbWFzayAqIGRlZmF1bHRTaXplKSAvIGFscGhhYmV0Lmxlbmd0aClcbiAgcmV0dXJuIChzaXplID0gZGVmYXVsdFNpemUpID0+IHtcbiAgICBsZXQgaWQgPSAnJ1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBsZXQgYnl0ZXMgPSBnZXRSYW5kb20oc3RlcClcbiAgICAgIGxldCBpID0gc3RlcFxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBpZCArPSBhbHBoYWJldFtieXRlc1tpXSAmIG1hc2tdIHx8ICcnXG4gICAgICAgIGlmIChpZC5sZW5ndGggPT09IHNpemUpIHJldHVybiBpZFxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZXhwb3J0IGxldCBjdXN0b21BbHBoYWJldCA9IChhbHBoYWJldCwgc2l6ZSA9IDIxKSA9PlxuICBjdXN0b21SYW5kb20oYWxwaGFiZXQsIHNpemUsIHJhbmRvbSlcbmV4cG9ydCBsZXQgbmFub2lkID0gKHNpemUgPSAyMSkgPT4ge1xuICBmaWxsUG9vbCgoc2l6ZSAtPSAwKSlcbiAgbGV0IGlkID0gJydcbiAgZm9yIChsZXQgaSA9IHBvb2xPZmZzZXQgLSBzaXplOyBpIDwgcG9vbE9mZnNldDsgaSsrKSB7XG4gICAgaWQgKz0gdXJsQWxwaGFiZXRbcG9vbFtpXSAmIDYzXVxuICB9XG4gIHJldHVybiBpZFxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/node_modules/nanoid/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/tlschema/node_modules/nanoid/url-alphabet/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@tldraw/tlschema/node_modules/nanoid/url-alphabet/index.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   urlAlphabet: () => (/* binding */ urlAlphabet)\n/* harmony export */ });\nconst urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy90bHNjaGVtYS9ub2RlX21vZHVsZXMvbmFub2lkL3VybC1hbHBoYWJldC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUCIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3Rsc2NoZW1hL25vZGVfbW9kdWxlcy9uYW5vaWQvdXJsLWFscGhhYmV0L2luZGV4LmpzPzA3OTkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHVybEFscGhhYmV0ID1cbiAgJ3VzZWFuZG9tLTI2VDE5ODM0MFBYNzVweEpBQ0tWRVJZTUlOREJVU0hXT0xGX0dRWmJmZ2hqa2xxdnd5enJpY3QnXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/tlschema/node_modules/nanoid/url-alphabet/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_SUPPORTED_IMAGE_TYPES: () => (/* reexport safe */ _lib_media_media_mjs__WEBPACK_IMPORTED_MODULE_10__.DEFAULT_SUPPORTED_IMAGE_TYPES),\n/* harmony export */   DEFAULT_SUPPORTED_MEDIA_TYPE_LIST: () => (/* reexport safe */ _lib_media_media_mjs__WEBPACK_IMPORTED_MODULE_10__.DEFAULT_SUPPORTED_MEDIA_TYPE_LIST),\n/* harmony export */   DEFAULT_SUPPORT_VIDEO_TYPES: () => (/* reexport safe */ _lib_media_media_mjs__WEBPACK_IMPORTED_MODULE_10__.DEFAULT_SUPPORT_VIDEO_TYPES),\n/* harmony export */   FileHelpers: () => (/* reexport safe */ _lib_file_mjs__WEBPACK_IMPORTED_MODULE_6__.FileHelpers),\n/* harmony export */   MediaHelpers: () => (/* reexport safe */ _lib_media_media_mjs__WEBPACK_IMPORTED_MODULE_10__.MediaHelpers),\n/* harmony export */   PerformanceTracker: () => (/* reexport safe */ _lib_PerformanceTracker_mjs__WEBPACK_IMPORTED_MODULE_0__.PerformanceTracker),\n/* harmony export */   PngHelpers: () => (/* reexport safe */ _lib_media_png_mjs__WEBPACK_IMPORTED_MODULE_11__.PngHelpers),\n/* harmony export */   Result: () => (/* reexport safe */ _lib_control_mjs__WEBPACK_IMPORTED_MODULE_3__.Result),\n/* harmony export */   STRUCTURED_CLONE_OBJECT_PROTOTYPE: () => (/* reexport safe */ _lib_value_mjs__WEBPACK_IMPORTED_MODULE_20__.STRUCTURED_CLONE_OBJECT_PROTOTYPE),\n/* harmony export */   Timers: () => (/* reexport safe */ _lib_timers_mjs__WEBPACK_IMPORTED_MODULE_19__.Timers),\n/* harmony export */   WeakCache: () => (/* reexport safe */ _lib_cache_mjs__WEBPACK_IMPORTED_MODULE_2__.WeakCache),\n/* harmony export */   ZERO_INDEX_KEY: () => (/* reexport safe */ _lib_reordering_reordering_mjs__WEBPACK_IMPORTED_MODULE_15__.ZERO_INDEX_KEY),\n/* harmony export */   annotateError: () => (/* reexport safe */ _lib_error_mjs__WEBPACK_IMPORTED_MODULE_5__.annotateError),\n/* harmony export */   areArraysShallowEqual: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_1__.areArraysShallowEqual),\n/* harmony export */   areObjectsShallowEqual: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_13__.areObjectsShallowEqual),\n/* harmony export */   assert: () => (/* reexport safe */ _lib_control_mjs__WEBPACK_IMPORTED_MODULE_3__.assert),\n/* harmony export */   assertExists: () => (/* reexport safe */ _lib_control_mjs__WEBPACK_IMPORTED_MODULE_3__.assertExists),\n/* harmony export */   clearLocalStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_17__.clearLocalStorage),\n/* harmony export */   clearSessionStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_17__.clearSessionStorage),\n/* harmony export */   compact: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_1__.compact),\n/* harmony export */   debounce: () => (/* reexport safe */ _lib_debounce_mjs__WEBPACK_IMPORTED_MODULE_4__.debounce),\n/* harmony export */   dedupe: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_1__.dedupe),\n/* harmony export */   deleteFromLocalStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_17__.deleteFromLocalStorage),\n/* harmony export */   deleteFromSessionStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_17__.deleteFromSessionStorage),\n/* harmony export */   exhaustiveSwitchError: () => (/* reexport safe */ _lib_control_mjs__WEBPACK_IMPORTED_MODULE_3__.exhaustiveSwitchError),\n/* harmony export */   filterEntries: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_13__.filterEntries),\n/* harmony export */   fpsThrottle: () => (/* reexport safe */ _lib_throttle_mjs__WEBPACK_IMPORTED_MODULE_18__.fpsThrottle),\n/* harmony export */   getErrorAnnotations: () => (/* reexport safe */ _lib_error_mjs__WEBPACK_IMPORTED_MODULE_5__.getErrorAnnotations),\n/* harmony export */   getFirstFromIterable: () => (/* reexport safe */ _lib_iterable_mjs__WEBPACK_IMPORTED_MODULE_9__.getFirstFromIterable),\n/* harmony export */   getFromLocalStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_17__.getFromLocalStorage),\n/* harmony export */   getFromSessionStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_17__.getFromSessionStorage),\n/* harmony export */   getHashForBuffer: () => (/* reexport safe */ _lib_hash_mjs__WEBPACK_IMPORTED_MODULE_8__.getHashForBuffer),\n/* harmony export */   getHashForObject: () => (/* reexport safe */ _lib_hash_mjs__WEBPACK_IMPORTED_MODULE_8__.getHashForObject),\n/* harmony export */   getHashForString: () => (/* reexport safe */ _lib_hash_mjs__WEBPACK_IMPORTED_MODULE_8__.getHashForString),\n/* harmony export */   getIndexAbove: () => (/* reexport safe */ _lib_reordering_reordering_mjs__WEBPACK_IMPORTED_MODULE_15__.getIndexAbove),\n/* harmony export */   getIndexBelow: () => (/* reexport safe */ _lib_reordering_reordering_mjs__WEBPACK_IMPORTED_MODULE_15__.getIndexBelow),\n/* harmony export */   getIndexBetween: () => (/* reexport safe */ _lib_reordering_reordering_mjs__WEBPACK_IMPORTED_MODULE_15__.getIndexBetween),\n/* harmony export */   getIndices: () => (/* reexport safe */ _lib_reordering_reordering_mjs__WEBPACK_IMPORTED_MODULE_15__.getIndices),\n/* harmony export */   getIndicesAbove: () => (/* reexport safe */ _lib_reordering_reordering_mjs__WEBPACK_IMPORTED_MODULE_15__.getIndicesAbove),\n/* harmony export */   getIndicesBelow: () => (/* reexport safe */ _lib_reordering_reordering_mjs__WEBPACK_IMPORTED_MODULE_15__.getIndicesBelow),\n/* harmony export */   getIndicesBetween: () => (/* reexport safe */ _lib_reordering_reordering_mjs__WEBPACK_IMPORTED_MODULE_15__.getIndicesBetween),\n/* harmony export */   getOwnProperty: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_13__.getOwnProperty),\n/* harmony export */   hasOwnProperty: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_13__.hasOwnProperty),\n/* harmony export */   invLerp: () => (/* reexport safe */ _lib_number_mjs__WEBPACK_IMPORTED_MODULE_12__.invLerp),\n/* harmony export */   isDefined: () => (/* reexport safe */ _lib_value_mjs__WEBPACK_IMPORTED_MODULE_20__.isDefined),\n/* harmony export */   isNativeStructuredClone: () => (/* reexport safe */ _lib_value_mjs__WEBPACK_IMPORTED_MODULE_20__.isNativeStructuredClone),\n/* harmony export */   isNonNull: () => (/* reexport safe */ _lib_value_mjs__WEBPACK_IMPORTED_MODULE_20__.isNonNull),\n/* harmony export */   isNonNullish: () => (/* reexport safe */ _lib_value_mjs__WEBPACK_IMPORTED_MODULE_20__.isNonNullish),\n/* harmony export */   last: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_1__.last),\n/* harmony export */   lerp: () => (/* reexport safe */ _lib_number_mjs__WEBPACK_IMPORTED_MODULE_12__.lerp),\n/* harmony export */   lns: () => (/* reexport safe */ _lib_hash_mjs__WEBPACK_IMPORTED_MODULE_8__.lns),\n/* harmony export */   mapObjectMapValues: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_13__.mapObjectMapValues),\n/* harmony export */   measureAverageDuration: () => (/* reexport safe */ _lib_perf_mjs__WEBPACK_IMPORTED_MODULE_14__.measureAverageDuration),\n/* harmony export */   measureCbDuration: () => (/* reexport safe */ _lib_perf_mjs__WEBPACK_IMPORTED_MODULE_14__.measureCbDuration),\n/* harmony export */   measureDuration: () => (/* reexport safe */ _lib_perf_mjs__WEBPACK_IMPORTED_MODULE_14__.measureDuration),\n/* harmony export */   minBy: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_1__.minBy),\n/* harmony export */   modulate: () => (/* reexport safe */ _lib_number_mjs__WEBPACK_IMPORTED_MODULE_12__.modulate),\n/* harmony export */   noop: () => (/* reexport safe */ _lib_function_mjs__WEBPACK_IMPORTED_MODULE_7__.noop),\n/* harmony export */   objectMapEntries: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_13__.objectMapEntries),\n/* harmony export */   objectMapFromEntries: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_13__.objectMapFromEntries),\n/* harmony export */   objectMapKeys: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_13__.objectMapKeys),\n/* harmony export */   objectMapValues: () => (/* reexport safe */ _lib_object_mjs__WEBPACK_IMPORTED_MODULE_13__.objectMapValues),\n/* harmony export */   omitFromStackTrace: () => (/* reexport safe */ _lib_function_mjs__WEBPACK_IMPORTED_MODULE_7__.omitFromStackTrace),\n/* harmony export */   partition: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_1__.partition),\n/* harmony export */   promiseWithResolve: () => (/* reexport safe */ _lib_control_mjs__WEBPACK_IMPORTED_MODULE_3__.promiseWithResolve),\n/* harmony export */   rng: () => (/* reexport safe */ _lib_number_mjs__WEBPACK_IMPORTED_MODULE_12__.rng),\n/* harmony export */   rotateArray: () => (/* reexport safe */ _lib_array_mjs__WEBPACK_IMPORTED_MODULE_1__.rotateArray),\n/* harmony export */   setInLocalStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_17__.setInLocalStorage),\n/* harmony export */   setInSessionStorage: () => (/* reexport safe */ _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_17__.setInSessionStorage),\n/* harmony export */   sortById: () => (/* reexport safe */ _lib_sort_mjs__WEBPACK_IMPORTED_MODULE_16__.sortById),\n/* harmony export */   sortByIndex: () => (/* reexport safe */ _lib_reordering_reordering_mjs__WEBPACK_IMPORTED_MODULE_15__.sortByIndex),\n/* harmony export */   structuredClone: () => (/* reexport safe */ _lib_value_mjs__WEBPACK_IMPORTED_MODULE_20__.structuredClone),\n/* harmony export */   throttle: () => (/* reexport safe */ _lib_function_mjs__WEBPACK_IMPORTED_MODULE_7__.throttle),\n/* harmony export */   throttleToNextFrame: () => (/* reexport safe */ _lib_throttle_mjs__WEBPACK_IMPORTED_MODULE_18__.throttleToNextFrame),\n/* harmony export */   validateIndexKey: () => (/* reexport safe */ _lib_reordering_reordering_mjs__WEBPACK_IMPORTED_MODULE_15__.validateIndexKey),\n/* harmony export */   warnDeprecatedGetter: () => (/* reexport safe */ _lib_warnDeprecatedGetter_mjs__WEBPACK_IMPORTED_MODULE_21__.warnDeprecatedGetter)\n/* harmony export */ });\n/* harmony import */ var _lib_PerformanceTracker_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/PerformanceTracker.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/PerformanceTracker.mjs\");\n/* harmony import */ var _lib_array_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/array.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/array.mjs\");\n/* harmony import */ var _lib_cache_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/cache.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/cache.mjs\");\n/* harmony import */ var _lib_control_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/control.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/control.mjs\");\n/* harmony import */ var _lib_debounce_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/debounce.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/debounce.mjs\");\n/* harmony import */ var _lib_error_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/error.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/error.mjs\");\n/* harmony import */ var _lib_file_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/file.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/file.mjs\");\n/* harmony import */ var _lib_function_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/function.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/function.mjs\");\n/* harmony import */ var _lib_hash_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/hash.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/hash.mjs\");\n/* harmony import */ var _lib_iterable_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./lib/iterable.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/iterable.mjs\");\n/* harmony import */ var _lib_media_media_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lib/media/media.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/media.mjs\");\n/* harmony import */ var _lib_media_png_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./lib/media/png.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/png.mjs\");\n/* harmony import */ var _lib_number_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./lib/number.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/number.mjs\");\n/* harmony import */ var _lib_object_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./lib/object.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/object.mjs\");\n/* harmony import */ var _lib_perf_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./lib/perf.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/perf.mjs\");\n/* harmony import */ var _lib_reordering_reordering_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./lib/reordering/reordering.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/reordering/reordering.mjs\");\n/* harmony import */ var _lib_sort_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./lib/sort.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/sort.mjs\");\n/* harmony import */ var _lib_storage_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./lib/storage.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/storage.mjs\");\n/* harmony import */ var _lib_throttle_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./lib/throttle.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/throttle.mjs\");\n/* harmony import */ var _lib_timers_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./lib/timers.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/timers.mjs\");\n/* harmony import */ var _lib_value_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./lib/value.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/value.mjs\");\n/* harmony import */ var _lib_warnDeprecatedGetter_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./lib/warnDeprecatedGetter.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/warnDeprecatedGetter.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBa0U7QUFTekM7QUFDbUI7QUFPakI7QUFDbUI7QUFDdUI7QUFDeEI7QUFDMkI7QUFDbUI7QUFDakM7QUFNM0I7QUFDa0I7QUFDZTtBQVd0QztBQUNrRTtBQVluRDtBQUNDO0FBVWY7QUFDMkM7QUFDNUI7QUFRakI7QUFDNkM7QUE4RXBFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9pbmRleC5tanM/YzExMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQZXJmb3JtYW5jZVRyYWNrZXIgfSBmcm9tIFwiLi9saWIvUGVyZm9ybWFuY2VUcmFja2VyLm1qc1wiO1xuaW1wb3J0IHtcbiAgYXJlQXJyYXlzU2hhbGxvd0VxdWFsLFxuICBjb21wYWN0LFxuICBkZWR1cGUsXG4gIGxhc3QsXG4gIG1pbkJ5LFxuICBwYXJ0aXRpb24sXG4gIHJvdGF0ZUFycmF5XG59IGZyb20gXCIuL2xpYi9hcnJheS5tanNcIjtcbmltcG9ydCB7IFdlYWtDYWNoZSB9IGZyb20gXCIuL2xpYi9jYWNoZS5tanNcIjtcbmltcG9ydCB7XG4gIFJlc3VsdCxcbiAgYXNzZXJ0LFxuICBhc3NlcnRFeGlzdHMsXG4gIGV4aGF1c3RpdmVTd2l0Y2hFcnJvcixcbiAgcHJvbWlzZVdpdGhSZXNvbHZlXG59IGZyb20gXCIuL2xpYi9jb250cm9sLm1qc1wiO1xuaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tIFwiLi9saWIvZGVib3VuY2UubWpzXCI7XG5pbXBvcnQgeyBhbm5vdGF0ZUVycm9yLCBnZXRFcnJvckFubm90YXRpb25zIH0gZnJvbSBcIi4vbGliL2Vycm9yLm1qc1wiO1xuaW1wb3J0IHsgRmlsZUhlbHBlcnMgfSBmcm9tIFwiLi9saWIvZmlsZS5tanNcIjtcbmltcG9ydCB7IG5vb3AsIG9taXRGcm9tU3RhY2tUcmFjZSwgdGhyb3R0bGUgfSBmcm9tIFwiLi9saWIvZnVuY3Rpb24ubWpzXCI7XG5pbXBvcnQgeyBnZXRIYXNoRm9yQnVmZmVyLCBnZXRIYXNoRm9yT2JqZWN0LCBnZXRIYXNoRm9yU3RyaW5nLCBsbnMgfSBmcm9tIFwiLi9saWIvaGFzaC5tanNcIjtcbmltcG9ydCB7IGdldEZpcnN0RnJvbUl0ZXJhYmxlIH0gZnJvbSBcIi4vbGliL2l0ZXJhYmxlLm1qc1wiO1xuaW1wb3J0IHtcbiAgREVGQVVMVF9TVVBQT1JURURfSU1BR0VfVFlQRVMsXG4gIERFRkFVTFRfU1VQUE9SVEVEX01FRElBX1RZUEVfTElTVCxcbiAgREVGQVVMVF9TVVBQT1JUX1ZJREVPX1RZUEVTLFxuICBNZWRpYUhlbHBlcnNcbn0gZnJvbSBcIi4vbGliL21lZGlhL21lZGlhLm1qc1wiO1xuaW1wb3J0IHsgUG5nSGVscGVycyB9IGZyb20gXCIuL2xpYi9tZWRpYS9wbmcubWpzXCI7XG5pbXBvcnQgeyBpbnZMZXJwLCBsZXJwLCBtb2R1bGF0ZSwgcm5nIH0gZnJvbSBcIi4vbGliL251bWJlci5tanNcIjtcbmltcG9ydCB7XG4gIGFyZU9iamVjdHNTaGFsbG93RXF1YWwsXG4gIGZpbHRlckVudHJpZXMsXG4gIGdldE93blByb3BlcnR5LFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgbWFwT2JqZWN0TWFwVmFsdWVzLFxuICBvYmplY3RNYXBFbnRyaWVzLFxuICBvYmplY3RNYXBGcm9tRW50cmllcyxcbiAgb2JqZWN0TWFwS2V5cyxcbiAgb2JqZWN0TWFwVmFsdWVzXG59IGZyb20gXCIuL2xpYi9vYmplY3QubWpzXCI7XG5pbXBvcnQgeyBtZWFzdXJlQXZlcmFnZUR1cmF0aW9uLCBtZWFzdXJlQ2JEdXJhdGlvbiwgbWVhc3VyZUR1cmF0aW9uIH0gZnJvbSBcIi4vbGliL3BlcmYubWpzXCI7XG5pbXBvcnQge1xuICBaRVJPX0lOREVYX0tFWSxcbiAgZ2V0SW5kZXhBYm92ZSxcbiAgZ2V0SW5kZXhCZWxvdyxcbiAgZ2V0SW5kZXhCZXR3ZWVuLFxuICBnZXRJbmRpY2VzLFxuICBnZXRJbmRpY2VzQWJvdmUsXG4gIGdldEluZGljZXNCZWxvdyxcbiAgZ2V0SW5kaWNlc0JldHdlZW4sXG4gIHNvcnRCeUluZGV4LFxuICB2YWxpZGF0ZUluZGV4S2V5XG59IGZyb20gXCIuL2xpYi9yZW9yZGVyaW5nL3Jlb3JkZXJpbmcubWpzXCI7XG5pbXBvcnQgeyBzb3J0QnlJZCB9IGZyb20gXCIuL2xpYi9zb3J0Lm1qc1wiO1xuaW1wb3J0IHtcbiAgY2xlYXJMb2NhbFN0b3JhZ2UsXG4gIGNsZWFyU2Vzc2lvblN0b3JhZ2UsXG4gIGRlbGV0ZUZyb21Mb2NhbFN0b3JhZ2UsXG4gIGRlbGV0ZUZyb21TZXNzaW9uU3RvcmFnZSxcbiAgZ2V0RnJvbUxvY2FsU3RvcmFnZSxcbiAgZ2V0RnJvbVNlc3Npb25TdG9yYWdlLFxuICBzZXRJbkxvY2FsU3RvcmFnZSxcbiAgc2V0SW5TZXNzaW9uU3RvcmFnZVxufSBmcm9tIFwiLi9saWIvc3RvcmFnZS5tanNcIjtcbmltcG9ydCB7IGZwc1Rocm90dGxlLCB0aHJvdHRsZVRvTmV4dEZyYW1lIH0gZnJvbSBcIi4vbGliL3Rocm90dGxlLm1qc1wiO1xuaW1wb3J0IHsgVGltZXJzIH0gZnJvbSBcIi4vbGliL3RpbWVycy5tanNcIjtcbmltcG9ydCB7XG4gIFNUUlVDVFVSRURfQ0xPTkVfT0JKRUNUX1BST1RPVFlQRSxcbiAgaXNEZWZpbmVkLFxuICBpc05hdGl2ZVN0cnVjdHVyZWRDbG9uZSxcbiAgaXNOb25OdWxsLFxuICBpc05vbk51bGxpc2gsXG4gIHN0cnVjdHVyZWRDbG9uZVxufSBmcm9tIFwiLi9saWIvdmFsdWUubWpzXCI7XG5pbXBvcnQgeyB3YXJuRGVwcmVjYXRlZEdldHRlciB9IGZyb20gXCIuL2xpYi93YXJuRGVwcmVjYXRlZEdldHRlci5tanNcIjtcbmV4cG9ydCB7XG4gIERFRkFVTFRfU1VQUE9SVEVEX0lNQUdFX1RZUEVTLFxuICBERUZBVUxUX1NVUFBPUlRFRF9NRURJQV9UWVBFX0xJU1QsXG4gIERFRkFVTFRfU1VQUE9SVF9WSURFT19UWVBFUyxcbiAgRmlsZUhlbHBlcnMsXG4gIE1lZGlhSGVscGVycyxcbiAgUGVyZm9ybWFuY2VUcmFja2VyLFxuICBQbmdIZWxwZXJzLFxuICBSZXN1bHQsXG4gIFNUUlVDVFVSRURfQ0xPTkVfT0JKRUNUX1BST1RPVFlQRSxcbiAgVGltZXJzLFxuICBXZWFrQ2FjaGUsXG4gIFpFUk9fSU5ERVhfS0VZLFxuICBhbm5vdGF0ZUVycm9yLFxuICBhcmVBcnJheXNTaGFsbG93RXF1YWwsXG4gIGFyZU9iamVjdHNTaGFsbG93RXF1YWwsXG4gIGFzc2VydCxcbiAgYXNzZXJ0RXhpc3RzLFxuICBjbGVhckxvY2FsU3RvcmFnZSxcbiAgY2xlYXJTZXNzaW9uU3RvcmFnZSxcbiAgY29tcGFjdCxcbiAgZGVib3VuY2UsXG4gIGRlZHVwZSxcbiAgZGVsZXRlRnJvbUxvY2FsU3RvcmFnZSxcbiAgZGVsZXRlRnJvbVNlc3Npb25TdG9yYWdlLFxuICBleGhhdXN0aXZlU3dpdGNoRXJyb3IsXG4gIGZpbHRlckVudHJpZXMsXG4gIGZwc1Rocm90dGxlLFxuICBnZXRFcnJvckFubm90YXRpb25zLFxuICBnZXRGaXJzdEZyb21JdGVyYWJsZSxcbiAgZ2V0RnJvbUxvY2FsU3RvcmFnZSxcbiAgZ2V0RnJvbVNlc3Npb25TdG9yYWdlLFxuICBnZXRIYXNoRm9yQnVmZmVyLFxuICBnZXRIYXNoRm9yT2JqZWN0LFxuICBnZXRIYXNoRm9yU3RyaW5nLFxuICBnZXRJbmRleEFib3ZlLFxuICBnZXRJbmRleEJlbG93LFxuICBnZXRJbmRleEJldHdlZW4sXG4gIGdldEluZGljZXMsXG4gIGdldEluZGljZXNBYm92ZSxcbiAgZ2V0SW5kaWNlc0JlbG93LFxuICBnZXRJbmRpY2VzQmV0d2VlbixcbiAgZ2V0T3duUHJvcGVydHksXG4gIGhhc093blByb3BlcnR5LFxuICBpbnZMZXJwLFxuICBpc0RlZmluZWQsXG4gIGlzTmF0aXZlU3RydWN0dXJlZENsb25lLFxuICBpc05vbk51bGwsXG4gIGlzTm9uTnVsbGlzaCxcbiAgbGFzdCxcbiAgbGVycCxcbiAgbG5zLFxuICBtYXBPYmplY3RNYXBWYWx1ZXMsXG4gIG1lYXN1cmVBdmVyYWdlRHVyYXRpb24sXG4gIG1lYXN1cmVDYkR1cmF0aW9uLFxuICBtZWFzdXJlRHVyYXRpb24sXG4gIG1pbkJ5LFxuICBtb2R1bGF0ZSxcbiAgbm9vcCxcbiAgb2JqZWN0TWFwRW50cmllcyxcbiAgb2JqZWN0TWFwRnJvbUVudHJpZXMsXG4gIG9iamVjdE1hcEtleXMsXG4gIG9iamVjdE1hcFZhbHVlcyxcbiAgb21pdEZyb21TdGFja1RyYWNlLFxuICBwYXJ0aXRpb24sXG4gIHByb21pc2VXaXRoUmVzb2x2ZSxcbiAgcm5nLFxuICByb3RhdGVBcnJheSxcbiAgc2V0SW5Mb2NhbFN0b3JhZ2UsXG4gIHNldEluU2Vzc2lvblN0b3JhZ2UsXG4gIHNvcnRCeUlkLFxuICBzb3J0QnlJbmRleCxcbiAgc3RydWN0dXJlZENsb25lLFxuICB0aHJvdHRsZSxcbiAgdGhyb3R0bGVUb05leHRGcmFtZSxcbiAgdmFsaWRhdGVJbmRleEtleSxcbiAgd2FybkRlcHJlY2F0ZWRHZXR0ZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/PerformanceTracker.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/PerformanceTracker.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PerformanceTracker: () => (/* binding */ PerformanceTracker)\n/* harmony export */ });\n/* harmony import */ var _perf_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./perf.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/perf.mjs\");\n\nclass PerformanceTracker {\n  startTime = 0;\n  name = \"\";\n  frames = 0;\n  started = false;\n  frame = null;\n  recordFrame = () => {\n    this.frames++;\n    if (!this.started)\n      return;\n    this.frame = requestAnimationFrame(this.recordFrame);\n  };\n  start(name) {\n    this.name = name;\n    this.frames = 0;\n    this.started = true;\n    if (this.frame !== null)\n      cancelAnimationFrame(this.frame);\n    this.frame = requestAnimationFrame(this.recordFrame);\n    this.startTime = performance.now();\n  }\n  stop() {\n    this.started = false;\n    if (this.frame !== null)\n      cancelAnimationFrame(this.frame);\n    const duration = (performance.now() - this.startTime) / 1e3;\n    const fps = duration === 0 ? 0 : Math.floor(this.frames / duration);\n    const background = fps > 55 ? _perf_mjs__WEBPACK_IMPORTED_MODULE_0__.PERFORMANCE_COLORS.Good : fps > 30 ? _perf_mjs__WEBPACK_IMPORTED_MODULE_0__.PERFORMANCE_COLORS.Mid : _perf_mjs__WEBPACK_IMPORTED_MODULE_0__.PERFORMANCE_COLORS.Poor;\n    const color = background === _perf_mjs__WEBPACK_IMPORTED_MODULE_0__.PERFORMANCE_COLORS.Mid ? \"black\" : \"white\";\n    const capitalized = this.name[0].toUpperCase() + this.name.slice(1);\n    console.debug(\n      `%cPerf%c ${capitalized} %c${fps}%c fps`,\n      `color: white; background: ${_perf_mjs__WEBPACK_IMPORTED_MODULE_0__.PERFORMANCE_PREFIX_COLOR};padding: 2px;border-radius: 3px;`,\n      \"font-weight: normal\",\n      `font-weight: bold; padding: 2px; background: ${background};color: ${color};`,\n      \"font-weight: normal\"\n    );\n  }\n  isStarted() {\n    return this.started;\n  }\n}\n\n//# sourceMappingURL=PerformanceTracker.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvUGVyZm9ybWFuY2VUcmFja2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEwRTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MseURBQWtCLG1CQUFtQix5REFBa0IsT0FBTyx5REFBa0I7QUFDbEgsaUNBQWlDLHlEQUFrQjtBQUNuRDtBQUNBO0FBQ0Esa0JBQWtCLGFBQWEsSUFBSSxJQUFJO0FBQ3ZDLHFCQUFxQixjQUFjLCtEQUF3QixFQUFFLGFBQWEsbUJBQW1CO0FBQzdGO0FBQ0EsMEJBQTBCLGNBQWMsY0FBYyxZQUFZLFNBQVMsT0FBTztBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvUGVyZm9ybWFuY2VUcmFja2VyLm1qcz83NmNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBFUkZPUk1BTkNFX0NPTE9SUywgUEVSRk9STUFOQ0VfUFJFRklYX0NPTE9SIH0gZnJvbSBcIi4vcGVyZi5tanNcIjtcbmNsYXNzIFBlcmZvcm1hbmNlVHJhY2tlciB7XG4gIHN0YXJ0VGltZSA9IDA7XG4gIG5hbWUgPSBcIlwiO1xuICBmcmFtZXMgPSAwO1xuICBzdGFydGVkID0gZmFsc2U7XG4gIGZyYW1lID0gbnVsbDtcbiAgcmVjb3JkRnJhbWUgPSAoKSA9PiB7XG4gICAgdGhpcy5mcmFtZXMrKztcbiAgICBpZiAoIXRoaXMuc3RhcnRlZClcbiAgICAgIHJldHVybjtcbiAgICB0aGlzLmZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucmVjb3JkRnJhbWUpO1xuICB9O1xuICBzdGFydChuYW1lKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmZyYW1lcyA9IDA7XG4gICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5mcmFtZSAhPT0gbnVsbClcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZnJhbWUpO1xuICAgIHRoaXMuZnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5yZWNvcmRGcmFtZSk7XG4gICAgdGhpcy5zdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgfVxuICBzdG9wKCkge1xuICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLmZyYW1lICE9PSBudWxsKVxuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5mcmFtZSk7XG4gICAgY29uc3QgZHVyYXRpb24gPSAocGVyZm9ybWFuY2Uubm93KCkgLSB0aGlzLnN0YXJ0VGltZSkgLyAxZTM7XG4gICAgY29uc3QgZnBzID0gZHVyYXRpb24gPT09IDAgPyAwIDogTWF0aC5mbG9vcih0aGlzLmZyYW1lcyAvIGR1cmF0aW9uKTtcbiAgICBjb25zdCBiYWNrZ3JvdW5kID0gZnBzID4gNTUgPyBQRVJGT1JNQU5DRV9DT0xPUlMuR29vZCA6IGZwcyA+IDMwID8gUEVSRk9STUFOQ0VfQ09MT1JTLk1pZCA6IFBFUkZPUk1BTkNFX0NPTE9SUy5Qb29yO1xuICAgIGNvbnN0IGNvbG9yID0gYmFja2dyb3VuZCA9PT0gUEVSRk9STUFOQ0VfQ09MT1JTLk1pZCA/IFwiYmxhY2tcIiA6IFwid2hpdGVcIjtcbiAgICBjb25zdCBjYXBpdGFsaXplZCA9IHRoaXMubmFtZVswXS50b1VwcGVyQ2FzZSgpICsgdGhpcy5uYW1lLnNsaWNlKDEpO1xuICAgIGNvbnNvbGUuZGVidWcoXG4gICAgICBgJWNQZXJmJWMgJHtjYXBpdGFsaXplZH0gJWMke2Zwc30lYyBmcHNgLFxuICAgICAgYGNvbG9yOiB3aGl0ZTsgYmFja2dyb3VuZDogJHtQRVJGT1JNQU5DRV9QUkVGSVhfQ09MT1J9O3BhZGRpbmc6IDJweDtib3JkZXItcmFkaXVzOiAzcHg7YCxcbiAgICAgIFwiZm9udC13ZWlnaHQ6IG5vcm1hbFwiLFxuICAgICAgYGZvbnQtd2VpZ2h0OiBib2xkOyBwYWRkaW5nOiAycHg7IGJhY2tncm91bmQ6ICR7YmFja2dyb3VuZH07Y29sb3I6ICR7Y29sb3J9O2AsXG4gICAgICBcImZvbnQtd2VpZ2h0OiBub3JtYWxcIlxuICAgICk7XG4gIH1cbiAgaXNTdGFydGVkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXJ0ZWQ7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIFBlcmZvcm1hbmNlVHJhY2tlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBlcmZvcm1hbmNlVHJhY2tlci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/PerformanceTracker.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/array.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/array.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   areArraysShallowEqual: () => (/* binding */ areArraysShallowEqual),\n/* harmony export */   compact: () => (/* binding */ compact),\n/* harmony export */   dedupe: () => (/* binding */ dedupe),\n/* harmony export */   last: () => (/* binding */ last),\n/* harmony export */   minBy: () => (/* binding */ minBy),\n/* harmony export */   partition: () => (/* binding */ partition),\n/* harmony export */   rotateArray: () => (/* binding */ rotateArray)\n/* harmony export */ });\nfunction rotateArray(arr, offset) {\n  return arr.map((_, i) => arr[(i + offset) % arr.length]);\n}\nfunction dedupe(input, equals) {\n  const result = [];\n  mainLoop:\n    for (const item of input) {\n      for (const existing of result) {\n        if (equals ? equals(item, existing) : item === existing) {\n          continue mainLoop;\n        }\n      }\n      result.push(item);\n    }\n  return result;\n}\nfunction compact(arr) {\n  return arr.filter((i) => i !== void 0 && i !== null);\n}\nfunction last(arr) {\n  return arr[arr.length - 1];\n}\nfunction minBy(arr, fn) {\n  let min;\n  let minVal = Infinity;\n  for (const item of arr) {\n    const val = fn(item);\n    if (val < minVal) {\n      min = item;\n      minVal = val;\n    }\n  }\n  return min;\n}\nfunction partition(arr, predicate) {\n  const satisfies = [];\n  const doesNotSatisfy = [];\n  for (const item of arr) {\n    if (predicate(item)) {\n      satisfies.push(item);\n    } else {\n      doesNotSatisfy.push(item);\n    }\n  }\n  return [satisfies, doesNotSatisfy];\n}\nfunction areArraysShallowEqual(arr1, arr2) {\n  if (arr1 === arr2)\n    return true;\n  if (arr1.length !== arr2.length)\n    return false;\n  for (let i = 0; i < arr1.length; i++) {\n    if (!Object.is(arr1[i], arr2[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n//# sourceMappingURL=array.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvYXJyYXkubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpQkFBaUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9hcnJheS5tanM/YzM1MiJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiByb3RhdGVBcnJheShhcnIsIG9mZnNldCkge1xuICByZXR1cm4gYXJyLm1hcCgoXywgaSkgPT4gYXJyWyhpICsgb2Zmc2V0KSAlIGFyci5sZW5ndGhdKTtcbn1cbmZ1bmN0aW9uIGRlZHVwZShpbnB1dCwgZXF1YWxzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBtYWluTG9vcDpcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaW5wdXQpIHtcbiAgICAgIGZvciAoY29uc3QgZXhpc3Rpbmcgb2YgcmVzdWx0KSB7XG4gICAgICAgIGlmIChlcXVhbHMgPyBlcXVhbHMoaXRlbSwgZXhpc3RpbmcpIDogaXRlbSA9PT0gZXhpc3RpbmcpIHtcbiAgICAgICAgICBjb250aW51ZSBtYWluTG9vcDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVzdWx0LnB1c2goaXRlbSk7XG4gICAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY29tcGFjdChhcnIpIHtcbiAgcmV0dXJuIGFyci5maWx0ZXIoKGkpID0+IGkgIT09IHZvaWQgMCAmJiBpICE9PSBudWxsKTtcbn1cbmZ1bmN0aW9uIGxhc3QoYXJyKSB7XG4gIHJldHVybiBhcnJbYXJyLmxlbmd0aCAtIDFdO1xufVxuZnVuY3Rpb24gbWluQnkoYXJyLCBmbikge1xuICBsZXQgbWluO1xuICBsZXQgbWluVmFsID0gSW5maW5pdHk7XG4gIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpIHtcbiAgICBjb25zdCB2YWwgPSBmbihpdGVtKTtcbiAgICBpZiAodmFsIDwgbWluVmFsKSB7XG4gICAgICBtaW4gPSBpdGVtO1xuICAgICAgbWluVmFsID0gdmFsO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWluO1xufVxuZnVuY3Rpb24gcGFydGl0aW9uKGFyciwgcHJlZGljYXRlKSB7XG4gIGNvbnN0IHNhdGlzZmllcyA9IFtdO1xuICBjb25zdCBkb2VzTm90U2F0aXNmeSA9IFtdO1xuICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyKSB7XG4gICAgaWYgKHByZWRpY2F0ZShpdGVtKSkge1xuICAgICAgc2F0aXNmaWVzLnB1c2goaXRlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvZXNOb3RTYXRpc2Z5LnB1c2goaXRlbSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBbc2F0aXNmaWVzLCBkb2VzTm90U2F0aXNmeV07XG59XG5mdW5jdGlvbiBhcmVBcnJheXNTaGFsbG93RXF1YWwoYXJyMSwgYXJyMikge1xuICBpZiAoYXJyMSA9PT0gYXJyMilcbiAgICByZXR1cm4gdHJ1ZTtcbiAgaWYgKGFycjEubGVuZ3RoICE9PSBhcnIyLmxlbmd0aClcbiAgICByZXR1cm4gZmFsc2U7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyMS5sZW5ndGg7IGkrKykge1xuICAgIGlmICghT2JqZWN0LmlzKGFycjFbaV0sIGFycjJbaV0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IHtcbiAgYXJlQXJyYXlzU2hhbGxvd0VxdWFsLFxuICBjb21wYWN0LFxuICBkZWR1cGUsXG4gIGxhc3QsXG4gIG1pbkJ5LFxuICBwYXJ0aXRpb24sXG4gIHJvdGF0ZUFycmF5XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/array.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/cache.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/cache.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WeakCache: () => (/* binding */ WeakCache)\n/* harmony export */ });\nclass WeakCache {\n  /** The map of items to their cached values. */\n  items = /* @__PURE__ */ new WeakMap();\n  /**\n   * Get the cached value for a given record. If the record is not present in the map, the callback\n   * will be used to create the value (with the result being stored in the cache for next time).\n   *\n   * @param item - The item to get.\n   * @param cb - The callback to use to create the value when a cached value is not found.\n   */\n  get(item, cb) {\n    if (!this.items.has(item)) {\n      this.items.set(item, cb(item));\n    }\n    return this.items.get(item);\n  }\n}\n\n//# sourceMappingURL=cache.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvY2FjaGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9jYWNoZS5tanM/MTVjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBXZWFrQ2FjaGUge1xuICAvKiogVGhlIG1hcCBvZiBpdGVtcyB0byB0aGVpciBjYWNoZWQgdmFsdWVzLiAqL1xuICBpdGVtcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICAvKipcbiAgICogR2V0IHRoZSBjYWNoZWQgdmFsdWUgZm9yIGEgZ2l2ZW4gcmVjb3JkLiBJZiB0aGUgcmVjb3JkIGlzIG5vdCBwcmVzZW50IGluIHRoZSBtYXAsIHRoZSBjYWxsYmFja1xuICAgKiB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIHRoZSB2YWx1ZSAod2l0aCB0aGUgcmVzdWx0IGJlaW5nIHN0b3JlZCBpbiB0aGUgY2FjaGUgZm9yIG5leHQgdGltZSkuXG4gICAqXG4gICAqIEBwYXJhbSBpdGVtIC0gVGhlIGl0ZW0gdG8gZ2V0LlxuICAgKiBAcGFyYW0gY2IgLSBUaGUgY2FsbGJhY2sgdG8gdXNlIHRvIGNyZWF0ZSB0aGUgdmFsdWUgd2hlbiBhIGNhY2hlZCB2YWx1ZSBpcyBub3QgZm91bmQuXG4gICAqL1xuICBnZXQoaXRlbSwgY2IpIHtcbiAgICBpZiAoIXRoaXMuaXRlbXMuaGFzKGl0ZW0pKSB7XG4gICAgICB0aGlzLml0ZW1zLnNldChpdGVtLCBjYihpdGVtKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLml0ZW1zLmdldChpdGVtKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgV2Vha0NhY2hlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/cache.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/control.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/control.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Result: () => (/* binding */ Result),\n/* harmony export */   assert: () => (/* binding */ assert),\n/* harmony export */   assertExists: () => (/* binding */ assertExists),\n/* harmony export */   exhaustiveSwitchError: () => (/* binding */ exhaustiveSwitchError),\n/* harmony export */   promiseWithResolve: () => (/* binding */ promiseWithResolve)\n/* harmony export */ });\n/* harmony import */ var _function_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./function.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/function.mjs\");\n\nconst Result = {\n  ok(value) {\n    return { ok: true, value };\n  },\n  err(error) {\n    return { ok: false, error };\n  }\n};\nfunction exhaustiveSwitchError(value, property) {\n  const debugValue = property && value && typeof value === \"object\" && property in value ? value[property] : value;\n  throw new Error(`Unknown switch case ${debugValue}`);\n}\nconst assert = (0,_function_mjs__WEBPACK_IMPORTED_MODULE_0__.omitFromStackTrace)(\n  (value, message) => {\n    if (!value) {\n      throw new Error(message || \"Assertion Error\");\n    }\n  }\n);\nconst assertExists = (0,_function_mjs__WEBPACK_IMPORTED_MODULE_0__.omitFromStackTrace)((value, message) => {\n  if (value == null) {\n    throw new Error(message ?? \"value must be defined\");\n  }\n  return value;\n});\nfunction promiseWithResolve() {\n  let resolve;\n  let reject;\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return Object.assign(promise, {\n    resolve,\n    reject\n  });\n}\n\n//# sourceMappingURL=control.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvY29udHJvbC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9EO0FBQ3BEO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLFdBQVc7QUFDcEQ7QUFDQSxlQUFlLGlFQUFrQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUVBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFPRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL2NvbnRyb2wubWpzPzNjMjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb21pdEZyb21TdGFja1RyYWNlIH0gZnJvbSBcIi4vZnVuY3Rpb24ubWpzXCI7XG5jb25zdCBSZXN1bHQgPSB7XG4gIG9rKHZhbHVlKSB7XG4gICAgcmV0dXJuIHsgb2s6IHRydWUsIHZhbHVlIH07XG4gIH0sXG4gIGVycihlcnJvcikge1xuICAgIHJldHVybiB7IG9rOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufTtcbmZ1bmN0aW9uIGV4aGF1c3RpdmVTd2l0Y2hFcnJvcih2YWx1ZSwgcHJvcGVydHkpIHtcbiAgY29uc3QgZGVidWdWYWx1ZSA9IHByb3BlcnR5ICYmIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiBwcm9wZXJ0eSBpbiB2YWx1ZSA/IHZhbHVlW3Byb3BlcnR5XSA6IHZhbHVlO1xuICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gc3dpdGNoIGNhc2UgJHtkZWJ1Z1ZhbHVlfWApO1xufVxuY29uc3QgYXNzZXJ0ID0gb21pdEZyb21TdGFja1RyYWNlKFxuICAodmFsdWUsIG1lc3NhZ2UpID0+IHtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSB8fCBcIkFzc2VydGlvbiBFcnJvclwiKTtcbiAgICB9XG4gIH1cbik7XG5jb25zdCBhc3NlcnRFeGlzdHMgPSBvbWl0RnJvbVN0YWNrVHJhY2UoKHZhbHVlLCBtZXNzYWdlKSA9PiB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UgPz8gXCJ2YWx1ZSBtdXN0IGJlIGRlZmluZWRcIik7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufSk7XG5mdW5jdGlvbiBwcm9taXNlV2l0aFJlc29sdmUoKSB7XG4gIGxldCByZXNvbHZlO1xuICBsZXQgcmVqZWN0O1xuICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgcmVzb2x2ZSA9IHJlcztcbiAgICByZWplY3QgPSByZWo7XG4gIH0pO1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9taXNlLCB7XG4gICAgcmVzb2x2ZSxcbiAgICByZWplY3RcbiAgfSk7XG59XG5leHBvcnQge1xuICBSZXN1bHQsXG4gIGFzc2VydCxcbiAgYXNzZXJ0RXhpc3RzLFxuICBleGhhdXN0aXZlU3dpdGNoRXJyb3IsXG4gIHByb21pc2VXaXRoUmVzb2x2ZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRyb2wubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/control.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/debounce.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/debounce.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   debounce: () => (/* binding */ debounce)\n/* harmony export */ });\nfunction debounce(callback, wait) {\n  let state = void 0;\n  const fn = (...args) => {\n    if (!state) {\n      state = {};\n      state.promise = new Promise((resolve, reject) => {\n        state.resolve = resolve;\n        state.reject = reject;\n      });\n    }\n    clearTimeout(state.timeout);\n    state.latestArgs = args;\n    state.timeout = setTimeout(() => {\n      const s = state;\n      state = void 0;\n      try {\n        s.resolve(callback(...s.latestArgs));\n      } catch (e) {\n        s.reject(e);\n      }\n    }, wait);\n    return state.promise;\n  };\n  fn.cancel = () => {\n    if (!state)\n      return;\n    clearTimeout(state.timeout);\n  };\n  return fn;\n}\n\n//# sourceMappingURL=debounce.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvZGVib3VuY2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL2RlYm91bmNlLm1qcz9kNWEzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGRlYm91bmNlKGNhbGxiYWNrLCB3YWl0KSB7XG4gIGxldCBzdGF0ZSA9IHZvaWQgMDtcbiAgY29uc3QgZm4gPSAoLi4uYXJncykgPT4ge1xuICAgIGlmICghc3RhdGUpIHtcbiAgICAgIHN0YXRlID0ge307XG4gICAgICBzdGF0ZS5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBzdGF0ZS5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgc3RhdGUucmVqZWN0ID0gcmVqZWN0O1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNsZWFyVGltZW91dChzdGF0ZS50aW1lb3V0KTtcbiAgICBzdGF0ZS5sYXRlc3RBcmdzID0gYXJncztcbiAgICBzdGF0ZS50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBzID0gc3RhdGU7XG4gICAgICBzdGF0ZSA9IHZvaWQgMDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHMucmVzb2x2ZShjYWxsYmFjayguLi5zLmxhdGVzdEFyZ3MpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcy5yZWplY3QoZSk7XG4gICAgICB9XG4gICAgfSwgd2FpdCk7XG4gICAgcmV0dXJuIHN0YXRlLnByb21pc2U7XG4gIH07XG4gIGZuLmNhbmNlbCA9ICgpID0+IHtcbiAgICBpZiAoIXN0YXRlKVxuICAgICAgcmV0dXJuO1xuICAgIGNsZWFyVGltZW91dChzdGF0ZS50aW1lb3V0KTtcbiAgfTtcbiAgcmV0dXJuIGZuO1xufVxuZXhwb3J0IHtcbiAgZGVib3VuY2Vcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWJvdW5jZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/debounce.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/error.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/error.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   annotateError: () => (/* binding */ annotateError),\n/* harmony export */   getErrorAnnotations: () => (/* binding */ getErrorAnnotations)\n/* harmony export */ });\nconst annotationsByError = /* @__PURE__ */ new WeakMap();\nfunction annotateError(error, annotations) {\n  if (typeof error !== \"object\" || error === null)\n    return;\n  let currentAnnotations = annotationsByError.get(error);\n  if (!currentAnnotations) {\n    currentAnnotations = { tags: {}, extras: {} };\n    annotationsByError.set(error, currentAnnotations);\n  }\n  if (annotations.tags) {\n    currentAnnotations.tags = {\n      ...currentAnnotations.tags,\n      ...annotations.tags\n    };\n  }\n  if (annotations.extras) {\n    currentAnnotations.extras = {\n      ...currentAnnotations.extras,\n      ...annotations.extras\n    };\n  }\n}\nfunction getErrorAnnotations(error) {\n  return annotationsByError.get(error) ?? { tags: {}, extras: {} };\n}\n\n//# sourceMappingURL=error.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvZXJyb3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFFBQVE7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsUUFBUTtBQUNwRDtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvZXJyb3IubWpzP2Q2N2YiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYW5ub3RhdGlvbnNCeUVycm9yID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBhbm5vdGF0ZUVycm9yKGVycm9yLCBhbm5vdGF0aW9ucykge1xuICBpZiAodHlwZW9mIGVycm9yICE9PSBcIm9iamVjdFwiIHx8IGVycm9yID09PSBudWxsKVxuICAgIHJldHVybjtcbiAgbGV0IGN1cnJlbnRBbm5vdGF0aW9ucyA9IGFubm90YXRpb25zQnlFcnJvci5nZXQoZXJyb3IpO1xuICBpZiAoIWN1cnJlbnRBbm5vdGF0aW9ucykge1xuICAgIGN1cnJlbnRBbm5vdGF0aW9ucyA9IHsgdGFnczoge30sIGV4dHJhczoge30gfTtcbiAgICBhbm5vdGF0aW9uc0J5RXJyb3Iuc2V0KGVycm9yLCBjdXJyZW50QW5ub3RhdGlvbnMpO1xuICB9XG4gIGlmIChhbm5vdGF0aW9ucy50YWdzKSB7XG4gICAgY3VycmVudEFubm90YXRpb25zLnRhZ3MgPSB7XG4gICAgICAuLi5jdXJyZW50QW5ub3RhdGlvbnMudGFncyxcbiAgICAgIC4uLmFubm90YXRpb25zLnRhZ3NcbiAgICB9O1xuICB9XG4gIGlmIChhbm5vdGF0aW9ucy5leHRyYXMpIHtcbiAgICBjdXJyZW50QW5ub3RhdGlvbnMuZXh0cmFzID0ge1xuICAgICAgLi4uY3VycmVudEFubm90YXRpb25zLmV4dHJhcyxcbiAgICAgIC4uLmFubm90YXRpb25zLmV4dHJhc1xuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIGdldEVycm9yQW5ub3RhdGlvbnMoZXJyb3IpIHtcbiAgcmV0dXJuIGFubm90YXRpb25zQnlFcnJvci5nZXQoZXJyb3IpID8/IHsgdGFnczoge30sIGV4dHJhczoge30gfTtcbn1cbmV4cG9ydCB7XG4gIGFubm90YXRlRXJyb3IsXG4gIGdldEVycm9yQW5ub3RhdGlvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvci5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/error.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/file.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/file.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FileHelpers: () => (/* binding */ FileHelpers)\n/* harmony export */ });\nclass FileHelpers {\n  /**\n   * @param dataURL - The file as a string.\n   *\n   * from https://stackoverflow.com/a/53817185\n   */\n  static async dataUrlToArrayBuffer(dataURL) {\n    return fetch(dataURL, { referrerPolicy: \"strict-origin-when-cross-origin\" }).then(\n      function(result) {\n        return result.arrayBuffer();\n      }\n    );\n  }\n  /**\n   * Convert a file to a base64 encoded data url.\n   *\n   * @example\n   *\n   * ```ts\n   * const A = FileHelpers.toDataUrl(myImageFile)\n   * ```\n   *\n   * @param value - The file as a blob.\n   */\n  static async blobToDataUrl(file) {\n    return await new Promise((resolve, reject) => {\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = (error) => reject(error);\n        reader.onabort = (error) => reject(error);\n        reader.readAsDataURL(file);\n      }\n    });\n  }\n  /**\n   * Convert a file to a unicode text string.\n   *\n   * @example\n   *\n   * ```ts\n   * const A = FileHelpers.fileToDataUrl(myTextFile)\n   * ```\n   *\n   * @param value - The file as a blob.\n   */\n  static async blobToText(file) {\n    return await new Promise((resolve, reject) => {\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = (error) => reject(error);\n        reader.onabort = (error) => reject(error);\n        reader.readAsText(file);\n      }\n    });\n  }\n}\n\n//# sourceMappingURL=file.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvZmlsZS5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1EQUFtRDtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvZmlsZS5tanM/NTUxMSJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGaWxlSGVscGVycyB7XG4gIC8qKlxuICAgKiBAcGFyYW0gZGF0YVVSTCAtIFRoZSBmaWxlIGFzIGEgc3RyaW5nLlxuICAgKlxuICAgKiBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS81MzgxNzE4NVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGRhdGFVcmxUb0FycmF5QnVmZmVyKGRhdGFVUkwpIHtcbiAgICByZXR1cm4gZmV0Y2goZGF0YVVSTCwgeyByZWZlcnJlclBvbGljeTogXCJzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luXCIgfSkudGhlbihcbiAgICAgIGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0LmFycmF5QnVmZmVyKCk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIGZpbGUgdG8gYSBiYXNlNjQgZW5jb2RlZCBkYXRhIHVybC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBgdHNcbiAgICogY29uc3QgQSA9IEZpbGVIZWxwZXJzLnRvRGF0YVVybChteUltYWdlRmlsZSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBmaWxlIGFzIGEgYmxvYi5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBibG9iVG9EYXRhVXJsKGZpbGUpIHtcbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XG4gICAgICAgIHJlYWRlci5vbmVycm9yID0gKGVycm9yKSA9PiByZWplY3QoZXJyb3IpO1xuICAgICAgICByZWFkZXIub25hYm9ydCA9IChlcnJvcikgPT4gcmVqZWN0KGVycm9yKTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgYSBmaWxlIHRvIGEgdW5pY29kZSB0ZXh0IHN0cmluZy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBgdHNcbiAgICogY29uc3QgQSA9IEZpbGVIZWxwZXJzLmZpbGVUb0RhdGFVcmwobXlUZXh0RmlsZSlcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBmaWxlIGFzIGEgYmxvYi5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBibG9iVG9UZXh0KGZpbGUpIHtcbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XG4gICAgICAgIHJlYWRlci5vbmVycm9yID0gKGVycm9yKSA9PiByZWplY3QoZXJyb3IpO1xuICAgICAgICByZWFkZXIub25hYm9ydCA9IChlcnJvcikgPT4gcmVqZWN0KGVycm9yKTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEZpbGVIZWxwZXJzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/file.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/function.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/function.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   noop: () => (/* binding */ noop),\n/* harmony export */   omitFromStackTrace: () => (/* binding */ omitFromStackTrace),\n/* harmony export */   throttle: () => (/* binding */ throttle)\n/* harmony export */ });\nfunction throttle(func, limit) {\n  let inThrottle;\n  let lastResult;\n  return function(...args) {\n    if (!inThrottle) {\n      inThrottle = true;\n      setTimeout(() => inThrottle = false, limit);\n      lastResult = func(...args);\n    }\n    return lastResult;\n  };\n}\nfunction omitFromStackTrace(fn) {\n  const wrappedFn = (...args) => {\n    try {\n      return fn(...args);\n    } catch (error) {\n      if (error instanceof Error && Error.captureStackTrace) {\n        Error.captureStackTrace(error, wrappedFn);\n      }\n      throw error;\n    }\n  };\n  return wrappedFn;\n}\nconst noop = () => {\n};\n\n//# sourceMappingURL=function.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvZnVuY3Rpb24ubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9mdW5jdGlvbi5tanM/ZDU5YiJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiB0aHJvdHRsZShmdW5jLCBsaW1pdCkge1xuICBsZXQgaW5UaHJvdHRsZTtcbiAgbGV0IGxhc3RSZXN1bHQ7XG4gIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgaWYgKCFpblRocm90dGxlKSB7XG4gICAgICBpblRocm90dGxlID0gdHJ1ZTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gaW5UaHJvdHRsZSA9IGZhbHNlLCBsaW1pdCk7XG4gICAgICBsYXN0UmVzdWx0ID0gZnVuYyguLi5hcmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gIH07XG59XG5mdW5jdGlvbiBvbWl0RnJvbVN0YWNrVHJhY2UoZm4pIHtcbiAgY29uc3Qgd3JhcHBlZEZuID0gKC4uLmFyZ3MpID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGZuKC4uLmFyZ3MpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShlcnJvciwgd3JhcHBlZEZuKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHdyYXBwZWRGbjtcbn1cbmNvbnN0IG5vb3AgPSAoKSA9PiB7XG59O1xuZXhwb3J0IHtcbiAgbm9vcCxcbiAgb21pdEZyb21TdGFja1RyYWNlLFxuICB0aHJvdHRsZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZ1bmN0aW9uLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/function.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/hash.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/hash.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getHashForBuffer: () => (/* binding */ getHashForBuffer),\n/* harmony export */   getHashForObject: () => (/* binding */ getHashForObject),\n/* harmony export */   getHashForString: () => (/* binding */ getHashForString),\n/* harmony export */   lns: () => (/* binding */ lns)\n/* harmony export */ });\nfunction getHashForString(string) {\n  let hash = 0;\n  for (let i = 0; i < string.length; i++) {\n    hash = (hash << 5) - hash + string.charCodeAt(i);\n    hash |= 0;\n  }\n  return hash + \"\";\n}\nfunction getHashForObject(obj) {\n  return getHashForString(JSON.stringify(obj));\n}\nfunction getHashForBuffer(buffer) {\n  const view = new DataView(buffer);\n  let hash = 0;\n  for (let i = 0; i < view.byteLength; i++) {\n    hash = (hash << 5) - hash + view.getUint8(i);\n    hash |= 0;\n  }\n  return hash + \"\";\n}\nfunction lns(str) {\n  const result = str.split(\"\");\n  result.push(...result.splice(0, Math.round(result.length / 5)));\n  result.push(...result.splice(0, Math.round(result.length / 4)));\n  result.push(...result.splice(0, Math.round(result.length / 3)));\n  result.push(...result.splice(0, Math.round(result.length / 2)));\n  return result.reverse().map((n) => +n ? +n < 5 ? 5 + +n : +n > 5 ? +n - 5 : n : n).join(\"\");\n}\n\n//# sourceMappingURL=hash.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvaGFzaC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscUJBQXFCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9oYXNoLm1qcz83YzA5Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGdldEhhc2hGb3JTdHJpbmcoc3RyaW5nKSB7XG4gIGxldCBoYXNoID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHtcbiAgICBoYXNoID0gKGhhc2ggPDwgNSkgLSBoYXNoICsgc3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgaGFzaCB8PSAwO1xuICB9XG4gIHJldHVybiBoYXNoICsgXCJcIjtcbn1cbmZ1bmN0aW9uIGdldEhhc2hGb3JPYmplY3Qob2JqKSB7XG4gIHJldHVybiBnZXRIYXNoRm9yU3RyaW5nKEpTT04uc3RyaW5naWZ5KG9iaikpO1xufVxuZnVuY3Rpb24gZ2V0SGFzaEZvckJ1ZmZlcihidWZmZXIpIHtcbiAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICBsZXQgaGFzaCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdmlldy5ieXRlTGVuZ3RoOyBpKyspIHtcbiAgICBoYXNoID0gKGhhc2ggPDwgNSkgLSBoYXNoICsgdmlldy5nZXRVaW50OChpKTtcbiAgICBoYXNoIHw9IDA7XG4gIH1cbiAgcmV0dXJuIGhhc2ggKyBcIlwiO1xufVxuZnVuY3Rpb24gbG5zKHN0cikge1xuICBjb25zdCByZXN1bHQgPSBzdHIuc3BsaXQoXCJcIik7XG4gIHJlc3VsdC5wdXNoKC4uLnJlc3VsdC5zcGxpY2UoMCwgTWF0aC5yb3VuZChyZXN1bHQubGVuZ3RoIC8gNSkpKTtcbiAgcmVzdWx0LnB1c2goLi4ucmVzdWx0LnNwbGljZSgwLCBNYXRoLnJvdW5kKHJlc3VsdC5sZW5ndGggLyA0KSkpO1xuICByZXN1bHQucHVzaCguLi5yZXN1bHQuc3BsaWNlKDAsIE1hdGgucm91bmQocmVzdWx0Lmxlbmd0aCAvIDMpKSk7XG4gIHJlc3VsdC5wdXNoKC4uLnJlc3VsdC5zcGxpY2UoMCwgTWF0aC5yb3VuZChyZXN1bHQubGVuZ3RoIC8gMikpKTtcbiAgcmV0dXJuIHJlc3VsdC5yZXZlcnNlKCkubWFwKChuKSA9PiArbiA/ICtuIDwgNSA/IDUgKyArbiA6ICtuID4gNSA/ICtuIC0gNSA6IG4gOiBuKS5qb2luKFwiXCIpO1xufVxuZXhwb3J0IHtcbiAgZ2V0SGFzaEZvckJ1ZmZlcixcbiAgZ2V0SGFzaEZvck9iamVjdCxcbiAgZ2V0SGFzaEZvclN0cmluZyxcbiAgbG5zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzaC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/hash.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/iterable.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/iterable.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFirstFromIterable: () => (/* binding */ getFirstFromIterable)\n/* harmony export */ });\nfunction getFirstFromIterable(set) {\n  return set.values().next().value;\n}\n\n//# sourceMappingURL=iterable.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvaXRlcmFibGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL2l0ZXJhYmxlLm1qcz84MGY3Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGdldEZpcnN0RnJvbUl0ZXJhYmxlKHNldCkge1xuICByZXR1cm4gc2V0LnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbn1cbmV4cG9ydCB7XG4gIGdldEZpcnN0RnJvbUl0ZXJhYmxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlcmFibGUubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/iterable.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/apng.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/media/apng.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isApngAnimated: () => (/* binding */ isApngAnimated)\n/* harmony export */ });\n/*!\n * MIT License: https://github.com/vHeemstra/is-apng/blob/main/license\n * Copyright (c) Philip van Heemstra\n */\nfunction isApngAnimated(buffer) {\n  const view = new Uint8Array(buffer);\n  if (!view || !(typeof Buffer !== \"undefined\" && Buffer.isBuffer(view) || view instanceof Uint8Array) || view.length < 16) {\n    return false;\n  }\n  const isPNG = view[0] === 137 && view[1] === 80 && view[2] === 78 && view[3] === 71 && view[4] === 13 && view[5] === 10 && view[6] === 26 && view[7] === 10;\n  if (!isPNG) {\n    return false;\n  }\n  function indexOfSubstring(haystack, needle, fromIndex, upToIndex, chunksize = 1024) {\n    if (!needle) {\n      return -1;\n    }\n    needle = new RegExp(needle, \"g\");\n    const needle_length = needle.source.length;\n    const decoder = new TextDecoder();\n    const full_haystack_length = haystack.length;\n    if (typeof upToIndex === \"undefined\") {\n      upToIndex = full_haystack_length;\n    }\n    if (fromIndex >= full_haystack_length || upToIndex <= 0 || fromIndex >= upToIndex) {\n      return -1;\n    }\n    haystack = haystack.subarray(fromIndex, upToIndex);\n    let position = -1;\n    let current_index = 0;\n    let full_length = 0;\n    let needle_buffer = \"\";\n    outer:\n      while (current_index < haystack.length) {\n        const next_index = current_index + chunksize;\n        const chunk = haystack.subarray(current_index, next_index);\n        const decoded = decoder.decode(chunk, { stream: true });\n        const text = needle_buffer + decoded;\n        let match;\n        let last_index = -1;\n        while ((match = needle.exec(text)) !== null) {\n          last_index = match.index - needle_buffer.length;\n          position = full_length + last_index;\n          break outer;\n        }\n        current_index = next_index;\n        full_length += decoded.length;\n        const needle_index = last_index > -1 ? last_index + needle_length : decoded.length - needle_length;\n        needle_buffer = decoded.slice(needle_index);\n      }\n    if (position >= 0) {\n      position += fromIndex >= 0 ? fromIndex : full_haystack_length + fromIndex;\n    }\n    return position;\n  }\n  const idatIdx = indexOfSubstring(view, \"IDAT\", 12);\n  if (idatIdx >= 12) {\n    const actlIdx = indexOfSubstring(view, \"acTL\", 8, idatIdx);\n    return actlIdx >= 8;\n  }\n  return false;\n}\n\n//# sourceMappingURL=apng.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvYXBuZy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxjQUFjO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9tZWRpYS9hcG5nLm1qcz9iYWFhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogTUlUIExpY2Vuc2U6IGh0dHBzOi8vZ2l0aHViLmNvbS92SGVlbXN0cmEvaXMtYXBuZy9ibG9iL21haW4vbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSBQaGlsaXAgdmFuIEhlZW1zdHJhXG4gKi9cbmZ1bmN0aW9uIGlzQXBuZ0FuaW1hdGVkKGJ1ZmZlcikge1xuICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgaWYgKCF2aWV3IHx8ICEodHlwZW9mIEJ1ZmZlciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBCdWZmZXIuaXNCdWZmZXIodmlldykgfHwgdmlldyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHx8IHZpZXcubGVuZ3RoIDwgMTYpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgaXNQTkcgPSB2aWV3WzBdID09PSAxMzcgJiYgdmlld1sxXSA9PT0gODAgJiYgdmlld1syXSA9PT0gNzggJiYgdmlld1szXSA9PT0gNzEgJiYgdmlld1s0XSA9PT0gMTMgJiYgdmlld1s1XSA9PT0gMTAgJiYgdmlld1s2XSA9PT0gMjYgJiYgdmlld1s3XSA9PT0gMTA7XG4gIGlmICghaXNQTkcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZnVuY3Rpb24gaW5kZXhPZlN1YnN0cmluZyhoYXlzdGFjaywgbmVlZGxlLCBmcm9tSW5kZXgsIHVwVG9JbmRleCwgY2h1bmtzaXplID0gMTAyNCkge1xuICAgIGlmICghbmVlZGxlKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIG5lZWRsZSA9IG5ldyBSZWdFeHAobmVlZGxlLCBcImdcIik7XG4gICAgY29uc3QgbmVlZGxlX2xlbmd0aCA9IG5lZWRsZS5zb3VyY2UubGVuZ3RoO1xuICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgICBjb25zdCBmdWxsX2hheXN0YWNrX2xlbmd0aCA9IGhheXN0YWNrLmxlbmd0aDtcbiAgICBpZiAodHlwZW9mIHVwVG9JbmRleCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdXBUb0luZGV4ID0gZnVsbF9oYXlzdGFja19sZW5ndGg7XG4gICAgfVxuICAgIGlmIChmcm9tSW5kZXggPj0gZnVsbF9oYXlzdGFja19sZW5ndGggfHwgdXBUb0luZGV4IDw9IDAgfHwgZnJvbUluZGV4ID49IHVwVG9JbmRleCkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBoYXlzdGFjayA9IGhheXN0YWNrLnN1YmFycmF5KGZyb21JbmRleCwgdXBUb0luZGV4KTtcbiAgICBsZXQgcG9zaXRpb24gPSAtMTtcbiAgICBsZXQgY3VycmVudF9pbmRleCA9IDA7XG4gICAgbGV0IGZ1bGxfbGVuZ3RoID0gMDtcbiAgICBsZXQgbmVlZGxlX2J1ZmZlciA9IFwiXCI7XG4gICAgb3V0ZXI6XG4gICAgICB3aGlsZSAoY3VycmVudF9pbmRleCA8IGhheXN0YWNrLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBuZXh0X2luZGV4ID0gY3VycmVudF9pbmRleCArIGNodW5rc2l6ZTtcbiAgICAgICAgY29uc3QgY2h1bmsgPSBoYXlzdGFjay5zdWJhcnJheShjdXJyZW50X2luZGV4LCBuZXh0X2luZGV4KTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZXIuZGVjb2RlKGNodW5rLCB7IHN0cmVhbTogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3QgdGV4dCA9IG5lZWRsZV9idWZmZXIgKyBkZWNvZGVkO1xuICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgIGxldCBsYXN0X2luZGV4ID0gLTE7XG4gICAgICAgIHdoaWxlICgobWF0Y2ggPSBuZWVkbGUuZXhlYyh0ZXh0KSkgIT09IG51bGwpIHtcbiAgICAgICAgICBsYXN0X2luZGV4ID0gbWF0Y2guaW5kZXggLSBuZWVkbGVfYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgICBwb3NpdGlvbiA9IGZ1bGxfbGVuZ3RoICsgbGFzdF9pbmRleDtcbiAgICAgICAgICBicmVhayBvdXRlcjtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50X2luZGV4ID0gbmV4dF9pbmRleDtcbiAgICAgICAgZnVsbF9sZW5ndGggKz0gZGVjb2RlZC5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG5lZWRsZV9pbmRleCA9IGxhc3RfaW5kZXggPiAtMSA/IGxhc3RfaW5kZXggKyBuZWVkbGVfbGVuZ3RoIDogZGVjb2RlZC5sZW5ndGggLSBuZWVkbGVfbGVuZ3RoO1xuICAgICAgICBuZWVkbGVfYnVmZmVyID0gZGVjb2RlZC5zbGljZShuZWVkbGVfaW5kZXgpO1xuICAgICAgfVxuICAgIGlmIChwb3NpdGlvbiA+PSAwKSB7XG4gICAgICBwb3NpdGlvbiArPSBmcm9tSW5kZXggPj0gMCA/IGZyb21JbmRleCA6IGZ1bGxfaGF5c3RhY2tfbGVuZ3RoICsgZnJvbUluZGV4O1xuICAgIH1cbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH1cbiAgY29uc3QgaWRhdElkeCA9IGluZGV4T2ZTdWJzdHJpbmcodmlldywgXCJJREFUXCIsIDEyKTtcbiAgaWYgKGlkYXRJZHggPj0gMTIpIHtcbiAgICBjb25zdCBhY3RsSWR4ID0gaW5kZXhPZlN1YnN0cmluZyh2aWV3LCBcImFjVExcIiwgOCwgaWRhdElkeCk7XG4gICAgcmV0dXJuIGFjdGxJZHggPj0gODtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQge1xuICBpc0FwbmdBbmltYXRlZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwbmcubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/apng.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/avif.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/media/avif.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAvifAnimated: () => (/* binding */ isAvifAnimated)\n/* harmony export */ });\nconst isAvifAnimated = (buffer) => {\n  const view = new Uint8Array(buffer);\n  return view[3] === 44;\n};\n\n//# sourceMappingURL=avif.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvYXZpZi5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9tZWRpYS9hdmlmLm1qcz9hN2UwIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGlzQXZpZkFuaW1hdGVkID0gKGJ1ZmZlcikgPT4ge1xuICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgcmV0dXJuIHZpZXdbM10gPT09IDQ0O1xufTtcbmV4cG9ydCB7XG4gIGlzQXZpZkFuaW1hdGVkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXZpZi5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/avif.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/gif.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/media/gif.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isGIF: () => (/* binding */ isGIF),\n/* harmony export */   isGifAnimated: () => (/* binding */ isGifAnimated)\n/* harmony export */ });\n/*!\n * MIT License\n * Modified code originally from <https://github.com/qzb/is-animated>\n * Copyright (c) 2016 Józef Sokołowski <j.k.sokolowski@gmail.com>\n */\nfunction getDataBlocksLength(buffer, offset) {\n  let length = 0;\n  while (buffer[offset + length]) {\n    length += buffer[offset + length] + 1;\n  }\n  return length + 1;\n}\nfunction isGIF(buffer) {\n  const enc = new TextDecoder(\"ascii\");\n  const header = enc.decode(buffer.slice(0, 3));\n  return header === \"GIF\";\n}\nfunction isGifAnimated(buffer) {\n  const view = new Uint8Array(buffer);\n  let hasColorTable, colorTableSize;\n  let offset = 0;\n  let imagesCount = 0;\n  if (!isGIF(buffer)) {\n    return false;\n  }\n  hasColorTable = view[10] & 128;\n  colorTableSize = view[10] & 7;\n  offset += 6;\n  offset += 7;\n  offset += hasColorTable ? 3 * Math.pow(2, colorTableSize + 1) : 0;\n  while (imagesCount < 2 && offset < view.length) {\n    switch (view[offset]) {\n      case 44:\n        imagesCount += 1;\n        hasColorTable = view[offset + 9] & 128;\n        colorTableSize = view[offset + 9] & 7;\n        offset += 10;\n        offset += hasColorTable ? 3 * Math.pow(2, colorTableSize + 1) : 0;\n        offset += getDataBlocksLength(view, offset + 1) + 1;\n        break;\n      case 33:\n        offset += 2;\n        offset += getDataBlocksLength(view, offset);\n        break;\n      case 59:\n        offset = view.length;\n        break;\n      default:\n        offset = view.length;\n        break;\n    }\n  }\n  return imagesCount > 1;\n}\n\n//# sourceMappingURL=gif.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvZ2lmLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvZ2lmLm1qcz82NGYyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogTUlUIExpY2Vuc2VcbiAqIE1vZGlmaWVkIGNvZGUgb3JpZ2luYWxseSBmcm9tIDxodHRwczovL2dpdGh1Yi5jb20vcXpiL2lzLWFuaW1hdGVkPlxuICogQ29weXJpZ2h0IChjKSAyMDE2IErDs3plZiBTb2tvxYJvd3NraSA8ai5rLnNva29sb3dza2lAZ21haWwuY29tPlxuICovXG5mdW5jdGlvbiBnZXREYXRhQmxvY2tzTGVuZ3RoKGJ1ZmZlciwgb2Zmc2V0KSB7XG4gIGxldCBsZW5ndGggPSAwO1xuICB3aGlsZSAoYnVmZmVyW29mZnNldCArIGxlbmd0aF0pIHtcbiAgICBsZW5ndGggKz0gYnVmZmVyW29mZnNldCArIGxlbmd0aF0gKyAxO1xuICB9XG4gIHJldHVybiBsZW5ndGggKyAxO1xufVxuZnVuY3Rpb24gaXNHSUYoYnVmZmVyKSB7XG4gIGNvbnN0IGVuYyA9IG5ldyBUZXh0RGVjb2RlcihcImFzY2lpXCIpO1xuICBjb25zdCBoZWFkZXIgPSBlbmMuZGVjb2RlKGJ1ZmZlci5zbGljZSgwLCAzKSk7XG4gIHJldHVybiBoZWFkZXIgPT09IFwiR0lGXCI7XG59XG5mdW5jdGlvbiBpc0dpZkFuaW1hdGVkKGJ1ZmZlcikge1xuICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgbGV0IGhhc0NvbG9yVGFibGUsIGNvbG9yVGFibGVTaXplO1xuICBsZXQgb2Zmc2V0ID0gMDtcbiAgbGV0IGltYWdlc0NvdW50ID0gMDtcbiAgaWYgKCFpc0dJRihidWZmZXIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGhhc0NvbG9yVGFibGUgPSB2aWV3WzEwXSAmIDEyODtcbiAgY29sb3JUYWJsZVNpemUgPSB2aWV3WzEwXSAmIDc7XG4gIG9mZnNldCArPSA2O1xuICBvZmZzZXQgKz0gNztcbiAgb2Zmc2V0ICs9IGhhc0NvbG9yVGFibGUgPyAzICogTWF0aC5wb3coMiwgY29sb3JUYWJsZVNpemUgKyAxKSA6IDA7XG4gIHdoaWxlIChpbWFnZXNDb3VudCA8IDIgJiYgb2Zmc2V0IDwgdmlldy5sZW5ndGgpIHtcbiAgICBzd2l0Y2ggKHZpZXdbb2Zmc2V0XSkge1xuICAgICAgY2FzZSA0NDpcbiAgICAgICAgaW1hZ2VzQ291bnQgKz0gMTtcbiAgICAgICAgaGFzQ29sb3JUYWJsZSA9IHZpZXdbb2Zmc2V0ICsgOV0gJiAxMjg7XG4gICAgICAgIGNvbG9yVGFibGVTaXplID0gdmlld1tvZmZzZXQgKyA5XSAmIDc7XG4gICAgICAgIG9mZnNldCArPSAxMDtcbiAgICAgICAgb2Zmc2V0ICs9IGhhc0NvbG9yVGFibGUgPyAzICogTWF0aC5wb3coMiwgY29sb3JUYWJsZVNpemUgKyAxKSA6IDA7XG4gICAgICAgIG9mZnNldCArPSBnZXREYXRhQmxvY2tzTGVuZ3RoKHZpZXcsIG9mZnNldCArIDEpICsgMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDMzOlxuICAgICAgICBvZmZzZXQgKz0gMjtcbiAgICAgICAgb2Zmc2V0ICs9IGdldERhdGFCbG9ja3NMZW5ndGgodmlldywgb2Zmc2V0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDU5OlxuICAgICAgICBvZmZzZXQgPSB2aWV3Lmxlbmd0aDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBvZmZzZXQgPSB2aWV3Lmxlbmd0aDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBpbWFnZXNDb3VudCA+IDE7XG59XG5leHBvcnQge1xuICBpc0dJRixcbiAgaXNHaWZBbmltYXRlZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdpZi5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/gif.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/media.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/media/media.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_SUPPORTED_ANIMATED_IMAGE_TYPES: () => (/* binding */ DEFAULT_SUPPORTED_ANIMATED_IMAGE_TYPES),\n/* harmony export */   DEFAULT_SUPPORTED_IMAGE_TYPES: () => (/* binding */ DEFAULT_SUPPORTED_IMAGE_TYPES),\n/* harmony export */   DEFAULT_SUPPORTED_MEDIA_TYPE_LIST: () => (/* binding */ DEFAULT_SUPPORTED_MEDIA_TYPE_LIST),\n/* harmony export */   DEFAULT_SUPPORTED_STATIC_IMAGE_TYPES: () => (/* binding */ DEFAULT_SUPPORTED_STATIC_IMAGE_TYPES),\n/* harmony export */   DEFAULT_SUPPORTED_VECTOR_IMAGE_TYPES: () => (/* binding */ DEFAULT_SUPPORTED_VECTOR_IMAGE_TYPES),\n/* harmony export */   DEFAULT_SUPPORT_VIDEO_TYPES: () => (/* binding */ DEFAULT_SUPPORT_VIDEO_TYPES),\n/* harmony export */   MediaHelpers: () => (/* binding */ MediaHelpers)\n/* harmony export */ });\n/* harmony import */ var _apng_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./apng.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/apng.mjs\");\n/* harmony import */ var _avif_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./avif.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/avif.mjs\");\n/* harmony import */ var _gif_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./gif.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/gif.mjs\");\n/* harmony import */ var _png_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./png.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/png.mjs\");\n/* harmony import */ var _webp_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./webp.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/webp.mjs\");\n\n\n\n\n\nconst DEFAULT_SUPPORTED_VECTOR_IMAGE_TYPES = Object.freeze([\"image/svg+xml\"]);\nconst DEFAULT_SUPPORTED_STATIC_IMAGE_TYPES = Object.freeze([\n  \"image/jpeg\",\n  \"image/png\",\n  \"image/webp\"\n]);\nconst DEFAULT_SUPPORTED_ANIMATED_IMAGE_TYPES = Object.freeze([\n  \"image/gif\",\n  \"image/apng\",\n  \"image/avif\"\n]);\nconst DEFAULT_SUPPORTED_IMAGE_TYPES = Object.freeze([\n  ...DEFAULT_SUPPORTED_STATIC_IMAGE_TYPES,\n  ...DEFAULT_SUPPORTED_VECTOR_IMAGE_TYPES,\n  ...DEFAULT_SUPPORTED_ANIMATED_IMAGE_TYPES\n]);\nconst DEFAULT_SUPPORT_VIDEO_TYPES = Object.freeze([\n  \"video/mp4\",\n  \"video/webm\",\n  \"video/quicktime\"\n]);\nconst DEFAULT_SUPPORTED_MEDIA_TYPE_LIST = [\n  ...DEFAULT_SUPPORTED_IMAGE_TYPES,\n  ...DEFAULT_SUPPORT_VIDEO_TYPES\n].join(\",\");\nclass MediaHelpers {\n  /**\n   * Load a video from a url.\n   * @public\n   */\n  static loadVideo(src) {\n    return new Promise((resolve, reject) => {\n      const video = document.createElement(\"video\");\n      video.onloadeddata = () => resolve(video);\n      video.onerror = (e) => {\n        console.error(e);\n        reject(new Error(\"Could not load video\"));\n      };\n      video.crossOrigin = \"anonymous\";\n      video.src = src;\n    });\n  }\n  /**\n   * Load an image from a url.\n   * @public\n   */\n  static loadImage(src) {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.onload = () => resolve(img);\n      img.onerror = (e) => {\n        console.error(e);\n        reject(new Error(\"Could not load image\"));\n      };\n      img.crossOrigin = \"anonymous\";\n      img.referrerPolicy = \"strict-origin-when-cross-origin\";\n      img.src = src;\n    });\n  }\n  /**\n   * Get the size of a video blob\n   *\n   * @param src - A SharedBlob containing the video\n   * @public\n   */\n  static async getVideoSize(blob) {\n    return MediaHelpers.usingObjectURL(blob, async (url) => {\n      const video = await MediaHelpers.loadVideo(url);\n      return { w: video.videoWidth, h: video.videoHeight };\n    });\n  }\n  /**\n   * Get the size of an image blob\n   *\n   * @param dataURL - A Blob containing the image.\n   * @public\n   */\n  static async getImageSize(blob) {\n    const image = await MediaHelpers.usingObjectURL(blob, MediaHelpers.loadImage);\n    try {\n      if (blob.type === \"image/png\") {\n        const view = new DataView(await blob.arrayBuffer());\n        if (_png_mjs__WEBPACK_IMPORTED_MODULE_3__.PngHelpers.isPng(view, 0)) {\n          const physChunk = _png_mjs__WEBPACK_IMPORTED_MODULE_3__.PngHelpers.findChunk(view, \"pHYs\");\n          if (physChunk) {\n            const physData = _png_mjs__WEBPACK_IMPORTED_MODULE_3__.PngHelpers.parsePhys(view, physChunk.dataOffset);\n            if (physData.unit === 0 && physData.ppux === physData.ppuy) {\n              const pixelRatio = Math.max(physData.ppux / 2834.5, 1);\n              return {\n                w: Math.round(image.naturalWidth / pixelRatio),\n                h: Math.round(image.naturalHeight / pixelRatio)\n              };\n            }\n          }\n        }\n      }\n    } catch (err) {\n      console.error(err);\n      return { w: image.naturalWidth, h: image.naturalHeight };\n    }\n    return { w: image.naturalWidth, h: image.naturalHeight };\n  }\n  static async isAnimated(file) {\n    if (file.type === \"image/gif\") {\n      return (0,_gif_mjs__WEBPACK_IMPORTED_MODULE_2__.isGifAnimated)(await file.arrayBuffer());\n    }\n    if (file.type === \"image/avif\") {\n      return (0,_avif_mjs__WEBPACK_IMPORTED_MODULE_1__.isAvifAnimated)(await file.arrayBuffer());\n    }\n    if (file.type === \"image/webp\") {\n      return (0,_webp_mjs__WEBPACK_IMPORTED_MODULE_4__.isWebpAnimated)(await file.arrayBuffer());\n    }\n    if (file.type === \"image/apng\") {\n      return (0,_apng_mjs__WEBPACK_IMPORTED_MODULE_0__.isApngAnimated)(await file.arrayBuffer());\n    }\n    return false;\n  }\n  static isAnimatedImageType(mimeType) {\n    return DEFAULT_SUPPORTED_ANIMATED_IMAGE_TYPES.includes(mimeType || \"\");\n  }\n  static isStaticImageType(mimeType) {\n    return DEFAULT_SUPPORTED_STATIC_IMAGE_TYPES.includes(mimeType || \"\");\n  }\n  static isImageType(mimeType) {\n    return DEFAULT_SUPPORTED_IMAGE_TYPES.includes(mimeType);\n  }\n  static async usingObjectURL(blob, fn) {\n    const url = URL.createObjectURL(blob);\n    try {\n      return await fn(url);\n    } finally {\n      URL.revokeObjectURL(url);\n    }\n  }\n}\n\n//# sourceMappingURL=media.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvbWVkaWEubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUE0QztBQUNBO0FBQ0Y7QUFDSDtBQUNLO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGdEQUFVO0FBQ3RCLDRCQUE0QixnREFBVTtBQUN0QztBQUNBLDZCQUE2QixnREFBVTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLGVBQWU7QUFDZjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhLHVEQUFhO0FBQzFCO0FBQ0E7QUFDQSxhQUFhLHlEQUFjO0FBQzNCO0FBQ0E7QUFDQSxhQUFhLHlEQUFjO0FBQzNCO0FBQ0E7QUFDQSxhQUFhLHlEQUFjO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBU0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9tZWRpYS9tZWRpYS5tanM/MTA2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0FwbmdBbmltYXRlZCB9IGZyb20gXCIuL2FwbmcubWpzXCI7XG5pbXBvcnQgeyBpc0F2aWZBbmltYXRlZCB9IGZyb20gXCIuL2F2aWYubWpzXCI7XG5pbXBvcnQgeyBpc0dpZkFuaW1hdGVkIH0gZnJvbSBcIi4vZ2lmLm1qc1wiO1xuaW1wb3J0IHsgUG5nSGVscGVycyB9IGZyb20gXCIuL3BuZy5tanNcIjtcbmltcG9ydCB7IGlzV2VicEFuaW1hdGVkIH0gZnJvbSBcIi4vd2VicC5tanNcIjtcbmNvbnN0IERFRkFVTFRfU1VQUE9SVEVEX1ZFQ1RPUl9JTUFHRV9UWVBFUyA9IE9iamVjdC5mcmVlemUoW1wiaW1hZ2Uvc3ZnK3htbFwiXSk7XG5jb25zdCBERUZBVUxUX1NVUFBPUlRFRF9TVEFUSUNfSU1BR0VfVFlQRVMgPSBPYmplY3QuZnJlZXplKFtcbiAgXCJpbWFnZS9qcGVnXCIsXG4gIFwiaW1hZ2UvcG5nXCIsXG4gIFwiaW1hZ2Uvd2VicFwiXG5dKTtcbmNvbnN0IERFRkFVTFRfU1VQUE9SVEVEX0FOSU1BVEVEX0lNQUdFX1RZUEVTID0gT2JqZWN0LmZyZWV6ZShbXG4gIFwiaW1hZ2UvZ2lmXCIsXG4gIFwiaW1hZ2UvYXBuZ1wiLFxuICBcImltYWdlL2F2aWZcIlxuXSk7XG5jb25zdCBERUZBVUxUX1NVUFBPUlRFRF9JTUFHRV9UWVBFUyA9IE9iamVjdC5mcmVlemUoW1xuICAuLi5ERUZBVUxUX1NVUFBPUlRFRF9TVEFUSUNfSU1BR0VfVFlQRVMsXG4gIC4uLkRFRkFVTFRfU1VQUE9SVEVEX1ZFQ1RPUl9JTUFHRV9UWVBFUyxcbiAgLi4uREVGQVVMVF9TVVBQT1JURURfQU5JTUFURURfSU1BR0VfVFlQRVNcbl0pO1xuY29uc3QgREVGQVVMVF9TVVBQT1JUX1ZJREVPX1RZUEVTID0gT2JqZWN0LmZyZWV6ZShbXG4gIFwidmlkZW8vbXA0XCIsXG4gIFwidmlkZW8vd2VibVwiLFxuICBcInZpZGVvL3F1aWNrdGltZVwiXG5dKTtcbmNvbnN0IERFRkFVTFRfU1VQUE9SVEVEX01FRElBX1RZUEVfTElTVCA9IFtcbiAgLi4uREVGQVVMVF9TVVBQT1JURURfSU1BR0VfVFlQRVMsXG4gIC4uLkRFRkFVTFRfU1VQUE9SVF9WSURFT19UWVBFU1xuXS5qb2luKFwiLFwiKTtcbmNsYXNzIE1lZGlhSGVscGVycyB7XG4gIC8qKlxuICAgKiBMb2FkIGEgdmlkZW8gZnJvbSBhIHVybC5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc3RhdGljIGxvYWRWaWRlbyhzcmMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidmlkZW9cIik7XG4gICAgICB2aWRlby5vbmxvYWRlZGRhdGEgPSAoKSA9PiByZXNvbHZlKHZpZGVvKTtcbiAgICAgIHZpZGVvLm9uZXJyb3IgPSAoZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICByZWplY3QobmV3IEVycm9yKFwiQ291bGQgbm90IGxvYWQgdmlkZW9cIikpO1xuICAgICAgfTtcbiAgICAgIHZpZGVvLmNyb3NzT3JpZ2luID0gXCJhbm9ueW1vdXNcIjtcbiAgICAgIHZpZGVvLnNyYyA9IHNyYztcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogTG9hZCBhbiBpbWFnZSBmcm9tIGEgdXJsLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzdGF0aWMgbG9hZEltYWdlKHNyYykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKGltZyk7XG4gICAgICBpbWcub25lcnJvciA9IChlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJDb3VsZCBub3QgbG9hZCBpbWFnZVwiKSk7XG4gICAgICB9O1xuICAgICAgaW1nLmNyb3NzT3JpZ2luID0gXCJhbm9ueW1vdXNcIjtcbiAgICAgIGltZy5yZWZlcnJlclBvbGljeSA9IFwic3RyaWN0LW9yaWdpbi13aGVuLWNyb3NzLW9yaWdpblwiO1xuICAgICAgaW1nLnNyYyA9IHNyYztcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBzaXplIG9mIGEgdmlkZW8gYmxvYlxuICAgKlxuICAgKiBAcGFyYW0gc3JjIC0gQSBTaGFyZWRCbG9iIGNvbnRhaW5pbmcgdGhlIHZpZGVvXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRWaWRlb1NpemUoYmxvYikge1xuICAgIHJldHVybiBNZWRpYUhlbHBlcnMudXNpbmdPYmplY3RVUkwoYmxvYiwgYXN5bmMgKHVybCkgPT4ge1xuICAgICAgY29uc3QgdmlkZW8gPSBhd2FpdCBNZWRpYUhlbHBlcnMubG9hZFZpZGVvKHVybCk7XG4gICAgICByZXR1cm4geyB3OiB2aWRlby52aWRlb1dpZHRoLCBoOiB2aWRlby52aWRlb0hlaWdodCB9O1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHNpemUgb2YgYW4gaW1hZ2UgYmxvYlxuICAgKlxuICAgKiBAcGFyYW0gZGF0YVVSTCAtIEEgQmxvYiBjb250YWluaW5nIHRoZSBpbWFnZS5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldEltYWdlU2l6ZShibG9iKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBNZWRpYUhlbHBlcnMudXNpbmdPYmplY3RVUkwoYmxvYiwgTWVkaWFIZWxwZXJzLmxvYWRJbWFnZSk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChibG9iLnR5cGUgPT09IFwiaW1hZ2UvcG5nXCIpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhhd2FpdCBibG9iLmFycmF5QnVmZmVyKCkpO1xuICAgICAgICBpZiAoUG5nSGVscGVycy5pc1BuZyh2aWV3LCAwKSkge1xuICAgICAgICAgIGNvbnN0IHBoeXNDaHVuayA9IFBuZ0hlbHBlcnMuZmluZENodW5rKHZpZXcsIFwicEhZc1wiKTtcbiAgICAgICAgICBpZiAocGh5c0NodW5rKSB7XG4gICAgICAgICAgICBjb25zdCBwaHlzRGF0YSA9IFBuZ0hlbHBlcnMucGFyc2VQaHlzKHZpZXcsIHBoeXNDaHVuay5kYXRhT2Zmc2V0KTtcbiAgICAgICAgICAgIGlmIChwaHlzRGF0YS51bml0ID09PSAwICYmIHBoeXNEYXRhLnBwdXggPT09IHBoeXNEYXRhLnBwdXkpIHtcbiAgICAgICAgICAgICAgY29uc3QgcGl4ZWxSYXRpbyA9IE1hdGgubWF4KHBoeXNEYXRhLnBwdXggLyAyODM0LjUsIDEpO1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHc6IE1hdGgucm91bmQoaW1hZ2UubmF0dXJhbFdpZHRoIC8gcGl4ZWxSYXRpbyksXG4gICAgICAgICAgICAgICAgaDogTWF0aC5yb3VuZChpbWFnZS5uYXR1cmFsSGVpZ2h0IC8gcGl4ZWxSYXRpbylcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIHJldHVybiB7IHc6IGltYWdlLm5hdHVyYWxXaWR0aCwgaDogaW1hZ2UubmF0dXJhbEhlaWdodCB9O1xuICAgIH1cbiAgICByZXR1cm4geyB3OiBpbWFnZS5uYXR1cmFsV2lkdGgsIGg6IGltYWdlLm5hdHVyYWxIZWlnaHQgfTtcbiAgfVxuICBzdGF0aWMgYXN5bmMgaXNBbmltYXRlZChmaWxlKSB7XG4gICAgaWYgKGZpbGUudHlwZSA9PT0gXCJpbWFnZS9naWZcIikge1xuICAgICAgcmV0dXJuIGlzR2lmQW5pbWF0ZWQoYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpKTtcbiAgICB9XG4gICAgaWYgKGZpbGUudHlwZSA9PT0gXCJpbWFnZS9hdmlmXCIpIHtcbiAgICAgIHJldHVybiBpc0F2aWZBbmltYXRlZChhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCkpO1xuICAgIH1cbiAgICBpZiAoZmlsZS50eXBlID09PSBcImltYWdlL3dlYnBcIikge1xuICAgICAgcmV0dXJuIGlzV2VicEFuaW1hdGVkKGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKSk7XG4gICAgfVxuICAgIGlmIChmaWxlLnR5cGUgPT09IFwiaW1hZ2UvYXBuZ1wiKSB7XG4gICAgICByZXR1cm4gaXNBcG5nQW5pbWF0ZWQoYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0YXRpYyBpc0FuaW1hdGVkSW1hZ2VUeXBlKG1pbWVUeXBlKSB7XG4gICAgcmV0dXJuIERFRkFVTFRfU1VQUE9SVEVEX0FOSU1BVEVEX0lNQUdFX1RZUEVTLmluY2x1ZGVzKG1pbWVUeXBlIHx8IFwiXCIpO1xuICB9XG4gIHN0YXRpYyBpc1N0YXRpY0ltYWdlVHlwZShtaW1lVHlwZSkge1xuICAgIHJldHVybiBERUZBVUxUX1NVUFBPUlRFRF9TVEFUSUNfSU1BR0VfVFlQRVMuaW5jbHVkZXMobWltZVR5cGUgfHwgXCJcIik7XG4gIH1cbiAgc3RhdGljIGlzSW1hZ2VUeXBlKG1pbWVUeXBlKSB7XG4gICAgcmV0dXJuIERFRkFVTFRfU1VQUE9SVEVEX0lNQUdFX1RZUEVTLmluY2x1ZGVzKG1pbWVUeXBlKTtcbiAgfVxuICBzdGF0aWMgYXN5bmMgdXNpbmdPYmplY3RVUkwoYmxvYiwgZm4pIHtcbiAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgZm4odXJsKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0IHtcbiAgREVGQVVMVF9TVVBQT1JURURfQU5JTUFURURfSU1BR0VfVFlQRVMsXG4gIERFRkFVTFRfU1VQUE9SVEVEX0lNQUdFX1RZUEVTLFxuICBERUZBVUxUX1NVUFBPUlRFRF9NRURJQV9UWVBFX0xJU1QsXG4gIERFRkFVTFRfU1VQUE9SVEVEX1NUQVRJQ19JTUFHRV9UWVBFUyxcbiAgREVGQVVMVF9TVVBQT1JURURfVkVDVE9SX0lNQUdFX1RZUEVTLFxuICBERUZBVUxUX1NVUFBPUlRfVklERU9fVFlQRVMsXG4gIE1lZGlhSGVscGVyc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lZGlhLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/media.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/png.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/media/png.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PngHelpers: () => (/* binding */ PngHelpers)\n/* harmony export */ });\nlet TABLE = [\n  0,\n  1996959894,\n  3993919788,\n  2567524794,\n  124634137,\n  1886057615,\n  3915621685,\n  2657392035,\n  249268274,\n  2044508324,\n  3772115230,\n  2547177864,\n  162941995,\n  2125561021,\n  3887607047,\n  2428444049,\n  498536548,\n  1789927666,\n  4089016648,\n  2227061214,\n  450548861,\n  1843258603,\n  4107580753,\n  2211677639,\n  325883990,\n  1684777152,\n  4251122042,\n  2321926636,\n  335633487,\n  1661365465,\n  4195302755,\n  2366115317,\n  997073096,\n  1281953886,\n  3579855332,\n  2724688242,\n  1006888145,\n  1258607687,\n  3524101629,\n  2768942443,\n  901097722,\n  1119000684,\n  3686517206,\n  2898065728,\n  853044451,\n  1172266101,\n  3705015759,\n  2882616665,\n  651767980,\n  1373503546,\n  3369554304,\n  3218104598,\n  565507253,\n  1454621731,\n  3485111705,\n  3099436303,\n  671266974,\n  1594198024,\n  3322730930,\n  2970347812,\n  795835527,\n  1483230225,\n  3244367275,\n  3060149565,\n  1994146192,\n  31158534,\n  2563907772,\n  4023717930,\n  1907459465,\n  112637215,\n  2680153253,\n  3904427059,\n  2013776290,\n  251722036,\n  2517215374,\n  3775830040,\n  2137656763,\n  141376813,\n  2439277719,\n  3865271297,\n  1802195444,\n  476864866,\n  2238001368,\n  4066508878,\n  1812370925,\n  453092731,\n  2181625025,\n  4111451223,\n  1706088902,\n  314042704,\n  2344532202,\n  4240017532,\n  1658658271,\n  366619977,\n  2362670323,\n  4224994405,\n  1303535960,\n  984961486,\n  2747007092,\n  3569037538,\n  1256170817,\n  1037604311,\n  2765210733,\n  3554079995,\n  1131014506,\n  879679996,\n  2909243462,\n  3663771856,\n  1141124467,\n  855842277,\n  2852801631,\n  3708648649,\n  1342533948,\n  654459306,\n  3188396048,\n  3373015174,\n  1466479909,\n  544179635,\n  3110523913,\n  3462522015,\n  1591671054,\n  702138776,\n  2966460450,\n  3352799412,\n  1504918807,\n  783551873,\n  3082640443,\n  3233442989,\n  3988292384,\n  2596254646,\n  62317068,\n  1957810842,\n  3939845945,\n  2647816111,\n  81470997,\n  1943803523,\n  3814918930,\n  2489596804,\n  225274430,\n  2053790376,\n  3826175755,\n  2466906013,\n  167816743,\n  2097651377,\n  4027552580,\n  2265490386,\n  503444072,\n  1762050814,\n  4150417245,\n  2154129355,\n  426522225,\n  1852507879,\n  4275313526,\n  2312317920,\n  282753626,\n  1742555852,\n  4189708143,\n  2394877945,\n  397917763,\n  1622183637,\n  3604390888,\n  2714866558,\n  953729732,\n  1340076626,\n  3518719985,\n  2797360999,\n  1068828381,\n  1219638859,\n  3624741850,\n  2936675148,\n  906185462,\n  1090812512,\n  3747672003,\n  2825379669,\n  829329135,\n  1181335161,\n  3412177804,\n  3160834842,\n  628085408,\n  1382605366,\n  3423369109,\n  3138078467,\n  570562233,\n  1426400815,\n  3317316542,\n  2998733608,\n  733239954,\n  1555261956,\n  3268935591,\n  3050360625,\n  752459403,\n  1541320221,\n  2607071920,\n  3965973030,\n  1969922972,\n  40735498,\n  2617837225,\n  3943577151,\n  1913087877,\n  83908371,\n  2512341634,\n  3803740692,\n  2075208622,\n  213261112,\n  2463272603,\n  3855990285,\n  2094854071,\n  198958881,\n  2262029012,\n  4057260610,\n  1759359992,\n  534414190,\n  2176718541,\n  4139329115,\n  1873836001,\n  414664567,\n  2282248934,\n  4279200368,\n  1711684554,\n  285281116,\n  2405801727,\n  4167216745,\n  1634467795,\n  376229701,\n  2685067896,\n  3608007406,\n  1308918612,\n  956543938,\n  2808555105,\n  3495958263,\n  1231636301,\n  1047427035,\n  2932959818,\n  3654703836,\n  1088359270,\n  936918e3,\n  2847714899,\n  3736837829,\n  1202900863,\n  817233897,\n  3183342108,\n  3401237130,\n  1404277552,\n  615818150,\n  3134207493,\n  3453421203,\n  1423857449,\n  601450431,\n  3009837614,\n  3294710456,\n  1567103746,\n  711928724,\n  3020668471,\n  3272380065,\n  1510334235,\n  755167117\n];\nif (typeof Int32Array !== \"undefined\") {\n  TABLE = new Int32Array(TABLE);\n}\n/*!\n * MIT License: https://github.com/alexgorbatchev/crc/blob/master/LICENSE\n * Copyright: 2014 Alex Gorbatchev\n * Code: crc32, https://github.com/alexgorbatchev/crc/blob/master/src/calculators/crc32.ts\n */\nconst crc = (current, previous) => {\n  let crc2 = previous === 0 ? 0 : ~~previous ^ -1;\n  for (let index = 0; index < current.length; index++) {\n    crc2 = TABLE[(crc2 ^ current[index]) & 255] ^ crc2 >>> 8;\n  }\n  return crc2 ^ -1;\n};\nconst LEN_SIZE = 4;\nconst CRC_SIZE = 4;\nclass PngHelpers {\n  static isPng(view, offset) {\n    if (view.getUint8(offset + 0) === 137 && view.getUint8(offset + 1) === 80 && view.getUint8(offset + 2) === 78 && view.getUint8(offset + 3) === 71 && view.getUint8(offset + 4) === 13 && view.getUint8(offset + 5) === 10 && view.getUint8(offset + 6) === 26 && view.getUint8(offset + 7) === 10) {\n      return true;\n    }\n    return false;\n  }\n  static getChunkType(view, offset) {\n    return [\n      String.fromCharCode(view.getUint8(offset)),\n      String.fromCharCode(view.getUint8(offset + 1)),\n      String.fromCharCode(view.getUint8(offset + 2)),\n      String.fromCharCode(view.getUint8(offset + 3))\n    ].join(\"\");\n  }\n  static readChunks(view, offset = 0) {\n    const chunks = {};\n    if (!PngHelpers.isPng(view, offset)) {\n      throw new Error(\"Not a PNG\");\n    }\n    offset += 8;\n    while (offset <= view.buffer.byteLength) {\n      const start = offset;\n      const len = view.getInt32(offset);\n      offset += 4;\n      const chunkType = PngHelpers.getChunkType(view, offset);\n      if (chunkType === \"IDAT\" && chunks[chunkType]) {\n        offset += len + LEN_SIZE + CRC_SIZE;\n        continue;\n      }\n      if (chunkType === \"IEND\") {\n        break;\n      }\n      chunks[chunkType] = {\n        start,\n        dataOffset: offset + 4,\n        size: len\n      };\n      offset += len + LEN_SIZE + CRC_SIZE;\n    }\n    return chunks;\n  }\n  static parsePhys(view, offset) {\n    return {\n      ppux: view.getUint32(offset),\n      ppuy: view.getUint32(offset + 4),\n      unit: view.getUint8(offset + 4)\n    };\n  }\n  static findChunk(view, type) {\n    const chunks = PngHelpers.readChunks(view);\n    return chunks[type];\n  }\n  static setPhysChunk(view, dpr = 1, options) {\n    let offset = 46;\n    let size = 0;\n    const res1 = PngHelpers.findChunk(view, \"pHYs\");\n    if (res1) {\n      offset = res1.start;\n      size = res1.size;\n    }\n    const res2 = PngHelpers.findChunk(view, \"IDAT\");\n    if (res2) {\n      offset = res2.start;\n      size = 0;\n    }\n    const pHYsData = new ArrayBuffer(21);\n    const pHYsDataView = new DataView(pHYsData);\n    pHYsDataView.setUint32(0, 9);\n    pHYsDataView.setUint8(4, \"p\".charCodeAt(0));\n    pHYsDataView.setUint8(5, \"H\".charCodeAt(0));\n    pHYsDataView.setUint8(6, \"Y\".charCodeAt(0));\n    pHYsDataView.setUint8(7, \"s\".charCodeAt(0));\n    const DPI_96 = 2835.5;\n    pHYsDataView.setInt32(8, DPI_96 * dpr);\n    pHYsDataView.setInt32(12, DPI_96 * dpr);\n    pHYsDataView.setInt8(16, 1);\n    const crcBit = new Uint8Array(pHYsData.slice(4, 17));\n    pHYsDataView.setInt32(17, crc(crcBit));\n    const startBuf = view.buffer.slice(0, offset);\n    const endBuf = view.buffer.slice(offset + size);\n    return new Blob([startBuf, pHYsData, endBuf], options);\n  }\n}\n\n//# sourceMappingURL=png.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvcG5nLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isd0JBQXdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvcG5nLm1qcz9jM2IxIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBUQUJMRSA9IFtcbiAgMCxcbiAgMTk5Njk1OTg5NCxcbiAgMzk5MzkxOTc4OCxcbiAgMjU2NzUyNDc5NCxcbiAgMTI0NjM0MTM3LFxuICAxODg2MDU3NjE1LFxuICAzOTE1NjIxNjg1LFxuICAyNjU3MzkyMDM1LFxuICAyNDkyNjgyNzQsXG4gIDIwNDQ1MDgzMjQsXG4gIDM3NzIxMTUyMzAsXG4gIDI1NDcxNzc4NjQsXG4gIDE2Mjk0MTk5NSxcbiAgMjEyNTU2MTAyMSxcbiAgMzg4NzYwNzA0NyxcbiAgMjQyODQ0NDA0OSxcbiAgNDk4NTM2NTQ4LFxuICAxNzg5OTI3NjY2LFxuICA0MDg5MDE2NjQ4LFxuICAyMjI3MDYxMjE0LFxuICA0NTA1NDg4NjEsXG4gIDE4NDMyNTg2MDMsXG4gIDQxMDc1ODA3NTMsXG4gIDIyMTE2Nzc2MzksXG4gIDMyNTg4Mzk5MCxcbiAgMTY4NDc3NzE1MixcbiAgNDI1MTEyMjA0MixcbiAgMjMyMTkyNjYzNixcbiAgMzM1NjMzNDg3LFxuICAxNjYxMzY1NDY1LFxuICA0MTk1MzAyNzU1LFxuICAyMzY2MTE1MzE3LFxuICA5OTcwNzMwOTYsXG4gIDEyODE5NTM4ODYsXG4gIDM1Nzk4NTUzMzIsXG4gIDI3MjQ2ODgyNDIsXG4gIDEwMDY4ODgxNDUsXG4gIDEyNTg2MDc2ODcsXG4gIDM1MjQxMDE2MjksXG4gIDI3Njg5NDI0NDMsXG4gIDkwMTA5NzcyMixcbiAgMTExOTAwMDY4NCxcbiAgMzY4NjUxNzIwNixcbiAgMjg5ODA2NTcyOCxcbiAgODUzMDQ0NDUxLFxuICAxMTcyMjY2MTAxLFxuICAzNzA1MDE1NzU5LFxuICAyODgyNjE2NjY1LFxuICA2NTE3Njc5ODAsXG4gIDEzNzM1MDM1NDYsXG4gIDMzNjk1NTQzMDQsXG4gIDMyMTgxMDQ1OTgsXG4gIDU2NTUwNzI1MyxcbiAgMTQ1NDYyMTczMSxcbiAgMzQ4NTExMTcwNSxcbiAgMzA5OTQzNjMwMyxcbiAgNjcxMjY2OTc0LFxuICAxNTk0MTk4MDI0LFxuICAzMzIyNzMwOTMwLFxuICAyOTcwMzQ3ODEyLFxuICA3OTU4MzU1MjcsXG4gIDE0ODMyMzAyMjUsXG4gIDMyNDQzNjcyNzUsXG4gIDMwNjAxNDk1NjUsXG4gIDE5OTQxNDYxOTIsXG4gIDMxMTU4NTM0LFxuICAyNTYzOTA3NzcyLFxuICA0MDIzNzE3OTMwLFxuICAxOTA3NDU5NDY1LFxuICAxMTI2MzcyMTUsXG4gIDI2ODAxNTMyNTMsXG4gIDM5MDQ0MjcwNTksXG4gIDIwMTM3NzYyOTAsXG4gIDI1MTcyMjAzNixcbiAgMjUxNzIxNTM3NCxcbiAgMzc3NTgzMDA0MCxcbiAgMjEzNzY1Njc2MyxcbiAgMTQxMzc2ODEzLFxuICAyNDM5Mjc3NzE5LFxuICAzODY1MjcxMjk3LFxuICAxODAyMTk1NDQ0LFxuICA0NzY4NjQ4NjYsXG4gIDIyMzgwMDEzNjgsXG4gIDQwNjY1MDg4NzgsXG4gIDE4MTIzNzA5MjUsXG4gIDQ1MzA5MjczMSxcbiAgMjE4MTYyNTAyNSxcbiAgNDExMTQ1MTIyMyxcbiAgMTcwNjA4ODkwMixcbiAgMzE0MDQyNzA0LFxuICAyMzQ0NTMyMjAyLFxuICA0MjQwMDE3NTMyLFxuICAxNjU4NjU4MjcxLFxuICAzNjY2MTk5NzcsXG4gIDIzNjI2NzAzMjMsXG4gIDQyMjQ5OTQ0MDUsXG4gIDEzMDM1MzU5NjAsXG4gIDk4NDk2MTQ4NixcbiAgMjc0NzAwNzA5MixcbiAgMzU2OTAzNzUzOCxcbiAgMTI1NjE3MDgxNyxcbiAgMTAzNzYwNDMxMSxcbiAgMjc2NTIxMDczMyxcbiAgMzU1NDA3OTk5NSxcbiAgMTEzMTAxNDUwNixcbiAgODc5Njc5OTk2LFxuICAyOTA5MjQzNDYyLFxuICAzNjYzNzcxODU2LFxuICAxMTQxMTI0NDY3LFxuICA4NTU4NDIyNzcsXG4gIDI4NTI4MDE2MzEsXG4gIDM3MDg2NDg2NDksXG4gIDEzNDI1MzM5NDgsXG4gIDY1NDQ1OTMwNixcbiAgMzE4ODM5NjA0OCxcbiAgMzM3MzAxNTE3NCxcbiAgMTQ2NjQ3OTkwOSxcbiAgNTQ0MTc5NjM1LFxuICAzMTEwNTIzOTEzLFxuICAzNDYyNTIyMDE1LFxuICAxNTkxNjcxMDU0LFxuICA3MDIxMzg3NzYsXG4gIDI5NjY0NjA0NTAsXG4gIDMzNTI3OTk0MTIsXG4gIDE1MDQ5MTg4MDcsXG4gIDc4MzU1MTg3MyxcbiAgMzA4MjY0MDQ0MyxcbiAgMzIzMzQ0Mjk4OSxcbiAgMzk4ODI5MjM4NCxcbiAgMjU5NjI1NDY0NixcbiAgNjIzMTcwNjgsXG4gIDE5NTc4MTA4NDIsXG4gIDM5Mzk4NDU5NDUsXG4gIDI2NDc4MTYxMTEsXG4gIDgxNDcwOTk3LFxuICAxOTQzODAzNTIzLFxuICAzODE0OTE4OTMwLFxuICAyNDg5NTk2ODA0LFxuICAyMjUyNzQ0MzAsXG4gIDIwNTM3OTAzNzYsXG4gIDM4MjYxNzU3NTUsXG4gIDI0NjY5MDYwMTMsXG4gIDE2NzgxNjc0MyxcbiAgMjA5NzY1MTM3NyxcbiAgNDAyNzU1MjU4MCxcbiAgMjI2NTQ5MDM4NixcbiAgNTAzNDQ0MDcyLFxuICAxNzYyMDUwODE0LFxuICA0MTUwNDE3MjQ1LFxuICAyMTU0MTI5MzU1LFxuICA0MjY1MjIyMjUsXG4gIDE4NTI1MDc4NzksXG4gIDQyNzUzMTM1MjYsXG4gIDIzMTIzMTc5MjAsXG4gIDI4Mjc1MzYyNixcbiAgMTc0MjU1NTg1MixcbiAgNDE4OTcwODE0MyxcbiAgMjM5NDg3Nzk0NSxcbiAgMzk3OTE3NzYzLFxuICAxNjIyMTgzNjM3LFxuICAzNjA0MzkwODg4LFxuICAyNzE0ODY2NTU4LFxuICA5NTM3Mjk3MzIsXG4gIDEzNDAwNzY2MjYsXG4gIDM1MTg3MTk5ODUsXG4gIDI3OTczNjA5OTksXG4gIDEwNjg4MjgzODEsXG4gIDEyMTk2Mzg4NTksXG4gIDM2MjQ3NDE4NTAsXG4gIDI5MzY2NzUxNDgsXG4gIDkwNjE4NTQ2MixcbiAgMTA5MDgxMjUxMixcbiAgMzc0NzY3MjAwMyxcbiAgMjgyNTM3OTY2OSxcbiAgODI5MzI5MTM1LFxuICAxMTgxMzM1MTYxLFxuICAzNDEyMTc3ODA0LFxuICAzMTYwODM0ODQyLFxuICA2MjgwODU0MDgsXG4gIDEzODI2MDUzNjYsXG4gIDM0MjMzNjkxMDksXG4gIDMxMzgwNzg0NjcsXG4gIDU3MDU2MjIzMyxcbiAgMTQyNjQwMDgxNSxcbiAgMzMxNzMxNjU0MixcbiAgMjk5ODczMzYwOCxcbiAgNzMzMjM5OTU0LFxuICAxNTU1MjYxOTU2LFxuICAzMjY4OTM1NTkxLFxuICAzMDUwMzYwNjI1LFxuICA3NTI0NTk0MDMsXG4gIDE1NDEzMjAyMjEsXG4gIDI2MDcwNzE5MjAsXG4gIDM5NjU5NzMwMzAsXG4gIDE5Njk5MjI5NzIsXG4gIDQwNzM1NDk4LFxuICAyNjE3ODM3MjI1LFxuICAzOTQzNTc3MTUxLFxuICAxOTEzMDg3ODc3LFxuICA4MzkwODM3MSxcbiAgMjUxMjM0MTYzNCxcbiAgMzgwMzc0MDY5MixcbiAgMjA3NTIwODYyMixcbiAgMjEzMjYxMTEyLFxuICAyNDYzMjcyNjAzLFxuICAzODU1OTkwMjg1LFxuICAyMDk0ODU0MDcxLFxuICAxOTg5NTg4ODEsXG4gIDIyNjIwMjkwMTIsXG4gIDQwNTcyNjA2MTAsXG4gIDE3NTkzNTk5OTIsXG4gIDUzNDQxNDE5MCxcbiAgMjE3NjcxODU0MSxcbiAgNDEzOTMyOTExNSxcbiAgMTg3MzgzNjAwMSxcbiAgNDE0NjY0NTY3LFxuICAyMjgyMjQ4OTM0LFxuICA0Mjc5MjAwMzY4LFxuICAxNzExNjg0NTU0LFxuICAyODUyODExMTYsXG4gIDI0MDU4MDE3MjcsXG4gIDQxNjcyMTY3NDUsXG4gIDE2MzQ0Njc3OTUsXG4gIDM3NjIyOTcwMSxcbiAgMjY4NTA2Nzg5NixcbiAgMzYwODAwNzQwNixcbiAgMTMwODkxODYxMixcbiAgOTU2NTQzOTM4LFxuICAyODA4NTU1MTA1LFxuICAzNDk1OTU4MjYzLFxuICAxMjMxNjM2MzAxLFxuICAxMDQ3NDI3MDM1LFxuICAyOTMyOTU5ODE4LFxuICAzNjU0NzAzODM2LFxuICAxMDg4MzU5MjcwLFxuICA5MzY5MThlMyxcbiAgMjg0NzcxNDg5OSxcbiAgMzczNjgzNzgyOSxcbiAgMTIwMjkwMDg2MyxcbiAgODE3MjMzODk3LFxuICAzMTgzMzQyMTA4LFxuICAzNDAxMjM3MTMwLFxuICAxNDA0Mjc3NTUyLFxuICA2MTU4MTgxNTAsXG4gIDMxMzQyMDc0OTMsXG4gIDM0NTM0MjEyMDMsXG4gIDE0MjM4NTc0NDksXG4gIDYwMTQ1MDQzMSxcbiAgMzAwOTgzNzYxNCxcbiAgMzI5NDcxMDQ1NixcbiAgMTU2NzEwMzc0NixcbiAgNzExOTI4NzI0LFxuICAzMDIwNjY4NDcxLFxuICAzMjcyMzgwMDY1LFxuICAxNTEwMzM0MjM1LFxuICA3NTUxNjcxMTdcbl07XG5pZiAodHlwZW9mIEludDMyQXJyYXkgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgVEFCTEUgPSBuZXcgSW50MzJBcnJheShUQUJMRSk7XG59XG4vKiFcbiAqIE1JVCBMaWNlbnNlOiBodHRwczovL2dpdGh1Yi5jb20vYWxleGdvcmJhdGNoZXYvY3JjL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqIENvcHlyaWdodDogMjAxNCBBbGV4IEdvcmJhdGNoZXZcbiAqIENvZGU6IGNyYzMyLCBodHRwczovL2dpdGh1Yi5jb20vYWxleGdvcmJhdGNoZXYvY3JjL2Jsb2IvbWFzdGVyL3NyYy9jYWxjdWxhdG9ycy9jcmMzMi50c1xuICovXG5jb25zdCBjcmMgPSAoY3VycmVudCwgcHJldmlvdXMpID0+IHtcbiAgbGV0IGNyYzIgPSBwcmV2aW91cyA9PT0gMCA/IDAgOiB+fnByZXZpb3VzIF4gLTE7XG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjdXJyZW50Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgIGNyYzIgPSBUQUJMRVsoY3JjMiBeIGN1cnJlbnRbaW5kZXhdKSAmIDI1NV0gXiBjcmMyID4+PiA4O1xuICB9XG4gIHJldHVybiBjcmMyIF4gLTE7XG59O1xuY29uc3QgTEVOX1NJWkUgPSA0O1xuY29uc3QgQ1JDX1NJWkUgPSA0O1xuY2xhc3MgUG5nSGVscGVycyB7XG4gIHN0YXRpYyBpc1BuZyh2aWV3LCBvZmZzZXQpIHtcbiAgICBpZiAodmlldy5nZXRVaW50OChvZmZzZXQgKyAwKSA9PT0gMTM3ICYmIHZpZXcuZ2V0VWludDgob2Zmc2V0ICsgMSkgPT09IDgwICYmIHZpZXcuZ2V0VWludDgob2Zmc2V0ICsgMikgPT09IDc4ICYmIHZpZXcuZ2V0VWludDgob2Zmc2V0ICsgMykgPT09IDcxICYmIHZpZXcuZ2V0VWludDgob2Zmc2V0ICsgNCkgPT09IDEzICYmIHZpZXcuZ2V0VWludDgob2Zmc2V0ICsgNSkgPT09IDEwICYmIHZpZXcuZ2V0VWludDgob2Zmc2V0ICsgNikgPT09IDI2ICYmIHZpZXcuZ2V0VWludDgob2Zmc2V0ICsgNykgPT09IDEwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0YXRpYyBnZXRDaHVua1R5cGUodmlldywgb2Zmc2V0KSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIFN0cmluZy5mcm9tQ2hhckNvZGUodmlldy5nZXRVaW50OChvZmZzZXQpKSxcbiAgICAgIFN0cmluZy5mcm9tQ2hhckNvZGUodmlldy5nZXRVaW50OChvZmZzZXQgKyAxKSksXG4gICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlKHZpZXcuZ2V0VWludDgob2Zmc2V0ICsgMikpLFxuICAgICAgU3RyaW5nLmZyb21DaGFyQ29kZSh2aWV3LmdldFVpbnQ4KG9mZnNldCArIDMpKVxuICAgIF0uam9pbihcIlwiKTtcbiAgfVxuICBzdGF0aWMgcmVhZENodW5rcyh2aWV3LCBvZmZzZXQgPSAwKSB7XG4gICAgY29uc3QgY2h1bmtzID0ge307XG4gICAgaWYgKCFQbmdIZWxwZXJzLmlzUG5nKHZpZXcsIG9mZnNldCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBhIFBOR1wiKTtcbiAgICB9XG4gICAgb2Zmc2V0ICs9IDg7XG4gICAgd2hpbGUgKG9mZnNldCA8PSB2aWV3LmJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICBjb25zdCBzdGFydCA9IG9mZnNldDtcbiAgICAgIGNvbnN0IGxlbiA9IHZpZXcuZ2V0SW50MzIob2Zmc2V0KTtcbiAgICAgIG9mZnNldCArPSA0O1xuICAgICAgY29uc3QgY2h1bmtUeXBlID0gUG5nSGVscGVycy5nZXRDaHVua1R5cGUodmlldywgb2Zmc2V0KTtcbiAgICAgIGlmIChjaHVua1R5cGUgPT09IFwiSURBVFwiICYmIGNodW5rc1tjaHVua1R5cGVdKSB7XG4gICAgICAgIG9mZnNldCArPSBsZW4gKyBMRU5fU0laRSArIENSQ19TSVpFO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChjaHVua1R5cGUgPT09IFwiSUVORFwiKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2h1bmtzW2NodW5rVHlwZV0gPSB7XG4gICAgICAgIHN0YXJ0LFxuICAgICAgICBkYXRhT2Zmc2V0OiBvZmZzZXQgKyA0LFxuICAgICAgICBzaXplOiBsZW5cbiAgICAgIH07XG4gICAgICBvZmZzZXQgKz0gbGVuICsgTEVOX1NJWkUgKyBDUkNfU0laRTtcbiAgICB9XG4gICAgcmV0dXJuIGNodW5rcztcbiAgfVxuICBzdGF0aWMgcGFyc2VQaHlzKHZpZXcsIG9mZnNldCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcHV4OiB2aWV3LmdldFVpbnQzMihvZmZzZXQpLFxuICAgICAgcHB1eTogdmlldy5nZXRVaW50MzIob2Zmc2V0ICsgNCksXG4gICAgICB1bml0OiB2aWV3LmdldFVpbnQ4KG9mZnNldCArIDQpXG4gICAgfTtcbiAgfVxuICBzdGF0aWMgZmluZENodW5rKHZpZXcsIHR5cGUpIHtcbiAgICBjb25zdCBjaHVua3MgPSBQbmdIZWxwZXJzLnJlYWRDaHVua3Modmlldyk7XG4gICAgcmV0dXJuIGNodW5rc1t0eXBlXTtcbiAgfVxuICBzdGF0aWMgc2V0UGh5c0NodW5rKHZpZXcsIGRwciA9IDEsIG9wdGlvbnMpIHtcbiAgICBsZXQgb2Zmc2V0ID0gNDY7XG4gICAgbGV0IHNpemUgPSAwO1xuICAgIGNvbnN0IHJlczEgPSBQbmdIZWxwZXJzLmZpbmRDaHVuayh2aWV3LCBcInBIWXNcIik7XG4gICAgaWYgKHJlczEpIHtcbiAgICAgIG9mZnNldCA9IHJlczEuc3RhcnQ7XG4gICAgICBzaXplID0gcmVzMS5zaXplO1xuICAgIH1cbiAgICBjb25zdCByZXMyID0gUG5nSGVscGVycy5maW5kQ2h1bmsodmlldywgXCJJREFUXCIpO1xuICAgIGlmIChyZXMyKSB7XG4gICAgICBvZmZzZXQgPSByZXMyLnN0YXJ0O1xuICAgICAgc2l6ZSA9IDA7XG4gICAgfVxuICAgIGNvbnN0IHBIWXNEYXRhID0gbmV3IEFycmF5QnVmZmVyKDIxKTtcbiAgICBjb25zdCBwSFlzRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcocEhZc0RhdGEpO1xuICAgIHBIWXNEYXRhVmlldy5zZXRVaW50MzIoMCwgOSk7XG4gICAgcEhZc0RhdGFWaWV3LnNldFVpbnQ4KDQsIFwicFwiLmNoYXJDb2RlQXQoMCkpO1xuICAgIHBIWXNEYXRhVmlldy5zZXRVaW50OCg1LCBcIkhcIi5jaGFyQ29kZUF0KDApKTtcbiAgICBwSFlzRGF0YVZpZXcuc2V0VWludDgoNiwgXCJZXCIuY2hhckNvZGVBdCgwKSk7XG4gICAgcEhZc0RhdGFWaWV3LnNldFVpbnQ4KDcsIFwic1wiLmNoYXJDb2RlQXQoMCkpO1xuICAgIGNvbnN0IERQSV85NiA9IDI4MzUuNTtcbiAgICBwSFlzRGF0YVZpZXcuc2V0SW50MzIoOCwgRFBJXzk2ICogZHByKTtcbiAgICBwSFlzRGF0YVZpZXcuc2V0SW50MzIoMTIsIERQSV85NiAqIGRwcik7XG4gICAgcEhZc0RhdGFWaWV3LnNldEludDgoMTYsIDEpO1xuICAgIGNvbnN0IGNyY0JpdCA9IG5ldyBVaW50OEFycmF5KHBIWXNEYXRhLnNsaWNlKDQsIDE3KSk7XG4gICAgcEhZc0RhdGFWaWV3LnNldEludDMyKDE3LCBjcmMoY3JjQml0KSk7XG4gICAgY29uc3Qgc3RhcnRCdWYgPSB2aWV3LmJ1ZmZlci5zbGljZSgwLCBvZmZzZXQpO1xuICAgIGNvbnN0IGVuZEJ1ZiA9IHZpZXcuYnVmZmVyLnNsaWNlKG9mZnNldCArIHNpemUpO1xuICAgIHJldHVybiBuZXcgQmxvYihbc3RhcnRCdWYsIHBIWXNEYXRhLCBlbmRCdWZdLCBvcHRpb25zKTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgUG5nSGVscGVyc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBuZy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/png.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/webp.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/media/webp.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isWebpAnimated: () => (/* binding */ isWebpAnimated)\n/* harmony export */ });\n/*!\n * MIT License: https://github.com/sindresorhus/is-webp/blob/main/license\n * Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)\n */\nfunction isWebp(view) {\n  if (!view || view.length < 12) {\n    return false;\n  }\n  return view[8] === 87 && view[9] === 69 && view[10] === 66 && view[11] === 80;\n}\nfunction isWebpAnimated(buffer) {\n  const view = new Uint8Array(buffer);\n  if (!isWebp(view)) {\n    return false;\n  }\n  if (!view || view.length < 21) {\n    return false;\n  }\n  return (view[20] >> 1 & 1) === 1;\n}\n\n//# sourceMappingURL=webp.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbWVkaWEvd2VicC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL21lZGlhL3dlYnAubWpzP2Q5Y2IiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBNSVQgTGljZW5zZTogaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9pcy13ZWJwL2Jsb2IvbWFpbi9saWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIFNpbmRyZSBTb3JodXMgPHNpbmRyZXNvcmh1c0BnbWFpbC5jb20+IChodHRwczovL3NpbmRyZXNvcmh1cy5jb20pXG4gKi9cbmZ1bmN0aW9uIGlzV2VicCh2aWV3KSB7XG4gIGlmICghdmlldyB8fCB2aWV3Lmxlbmd0aCA8IDEyKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB2aWV3WzhdID09PSA4NyAmJiB2aWV3WzldID09PSA2OSAmJiB2aWV3WzEwXSA9PT0gNjYgJiYgdmlld1sxMV0gPT09IDgwO1xufVxuZnVuY3Rpb24gaXNXZWJwQW5pbWF0ZWQoYnVmZmVyKSB7XG4gIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICBpZiAoIWlzV2VicCh2aWV3KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoIXZpZXcgfHwgdmlldy5sZW5ndGggPCAyMSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKHZpZXdbMjBdID4+IDEgJiAxKSA9PT0gMTtcbn1cbmV4cG9ydCB7XG4gIGlzV2VicEFuaW1hdGVkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2VicC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/media/webp.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/number.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/number.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   invLerp: () => (/* binding */ invLerp),\n/* harmony export */   lerp: () => (/* binding */ lerp),\n/* harmony export */   modulate: () => (/* binding */ modulate),\n/* harmony export */   rng: () => (/* binding */ rng)\n/* harmony export */ });\nfunction lerp(a, b, t) {\n  return a + (b - a) * t;\n}\nfunction invLerp(a, b, t) {\n  return (t - a) / (b - a);\n}\nfunction rng(seed = \"\") {\n  let x = 0;\n  let y = 0;\n  let z = 0;\n  let w = 0;\n  function next() {\n    const t = x ^ x << 11;\n    x = y;\n    y = z;\n    z = w;\n    w ^= (w >>> 19 ^ t ^ t >>> 8) >>> 0;\n    return w / 4294967296 * 2;\n  }\n  for (let k = 0; k < seed.length + 64; k++) {\n    x ^= seed.charCodeAt(k) | 0;\n    next();\n  }\n  return next;\n}\nfunction modulate(value, rangeA, rangeB, clamp = false) {\n  const [fromLow, fromHigh] = rangeA;\n  const [v0, v1] = rangeB;\n  const result = v0 + (value - fromLow) / (fromHigh - fromLow) * (v1 - v0);\n  return clamp ? v0 < v1 ? Math.max(Math.min(result, v1), v0) : Math.max(Math.min(result, v0), v1) : result;\n}\n\n//# sourceMappingURL=number.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvbnVtYmVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0JBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL251bWJlci5tanM/Mzc4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBsZXJwKGEsIGIsIHQpIHtcbiAgcmV0dXJuIGEgKyAoYiAtIGEpICogdDtcbn1cbmZ1bmN0aW9uIGludkxlcnAoYSwgYiwgdCkge1xuICByZXR1cm4gKHQgLSBhKSAvIChiIC0gYSk7XG59XG5mdW5jdGlvbiBybmcoc2VlZCA9IFwiXCIpIHtcbiAgbGV0IHggPSAwO1xuICBsZXQgeSA9IDA7XG4gIGxldCB6ID0gMDtcbiAgbGV0IHcgPSAwO1xuICBmdW5jdGlvbiBuZXh0KCkge1xuICAgIGNvbnN0IHQgPSB4IF4geCA8PCAxMTtcbiAgICB4ID0geTtcbiAgICB5ID0gejtcbiAgICB6ID0gdztcbiAgICB3IF49ICh3ID4+PiAxOSBeIHQgXiB0ID4+PiA4KSA+Pj4gMDtcbiAgICByZXR1cm4gdyAvIDQyOTQ5NjcyOTYgKiAyO1xuICB9XG4gIGZvciAobGV0IGsgPSAwOyBrIDwgc2VlZC5sZW5ndGggKyA2NDsgaysrKSB7XG4gICAgeCBePSBzZWVkLmNoYXJDb2RlQXQoaykgfCAwO1xuICAgIG5leHQoKTtcbiAgfVxuICByZXR1cm4gbmV4dDtcbn1cbmZ1bmN0aW9uIG1vZHVsYXRlKHZhbHVlLCByYW5nZUEsIHJhbmdlQiwgY2xhbXAgPSBmYWxzZSkge1xuICBjb25zdCBbZnJvbUxvdywgZnJvbUhpZ2hdID0gcmFuZ2VBO1xuICBjb25zdCBbdjAsIHYxXSA9IHJhbmdlQjtcbiAgY29uc3QgcmVzdWx0ID0gdjAgKyAodmFsdWUgLSBmcm9tTG93KSAvIChmcm9tSGlnaCAtIGZyb21Mb3cpICogKHYxIC0gdjApO1xuICByZXR1cm4gY2xhbXAgPyB2MCA8IHYxID8gTWF0aC5tYXgoTWF0aC5taW4ocmVzdWx0LCB2MSksIHYwKSA6IE1hdGgubWF4KE1hdGgubWluKHJlc3VsdCwgdjApLCB2MSkgOiByZXN1bHQ7XG59XG5leHBvcnQge1xuICBpbnZMZXJwLFxuICBsZXJwLFxuICBtb2R1bGF0ZSxcbiAgcm5nXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bnVtYmVyLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/number.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/object.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/object.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   areObjectsShallowEqual: () => (/* binding */ areObjectsShallowEqual),\n/* harmony export */   filterEntries: () => (/* binding */ filterEntries),\n/* harmony export */   getOwnProperty: () => (/* binding */ getOwnProperty),\n/* harmony export */   hasOwnProperty: () => (/* binding */ hasOwnProperty),\n/* harmony export */   mapObjectMapValues: () => (/* binding */ mapObjectMapValues),\n/* harmony export */   objectMapEntries: () => (/* binding */ objectMapEntries),\n/* harmony export */   objectMapFromEntries: () => (/* binding */ objectMapFromEntries),\n/* harmony export */   objectMapKeys: () => (/* binding */ objectMapKeys),\n/* harmony export */   objectMapValues: () => (/* binding */ objectMapValues)\n/* harmony export */ });\nfunction hasOwnProperty(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\nfunction getOwnProperty(obj, key) {\n  if (!hasOwnProperty(obj, key)) {\n    return void 0;\n  }\n  return obj[key];\n}\nfunction objectMapKeys(object) {\n  return Object.keys(object);\n}\nfunction objectMapValues(object) {\n  return Object.values(object);\n}\nfunction objectMapEntries(object) {\n  return Object.entries(object);\n}\nfunction objectMapFromEntries(entries) {\n  return Object.fromEntries(entries);\n}\nfunction filterEntries(object, predicate) {\n  const result = {};\n  let didChange = false;\n  for (const [key, value] of objectMapEntries(object)) {\n    if (predicate(key, value)) {\n      result[key] = value;\n    } else {\n      didChange = true;\n    }\n  }\n  return didChange ? result : object;\n}\nfunction mapObjectMapValues(object, mapper) {\n  const result = {};\n  for (const [key, value] of objectMapEntries(object)) {\n    const newValue = mapper(key, value);\n    result[key] = newValue;\n  }\n  return result;\n}\nfunction areObjectsShallowEqual(obj1, obj2) {\n  if (obj1 === obj2)\n    return true;\n  const keys1 = new Set(Object.keys(obj1));\n  const keys2 = new Set(Object.keys(obj2));\n  if (keys1.size !== keys2.size)\n    return false;\n  for (const key of keys1) {\n    if (!keys2.has(key))\n      return false;\n    if (!Object.is(obj1[key], obj2[key]))\n      return false;\n  }\n  return true;\n}\n\n//# sourceMappingURL=object.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvb2JqZWN0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL29iamVjdC5tanM/YTc5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIGtleSkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cbmZ1bmN0aW9uIGdldE93blByb3BlcnR5KG9iaiwga2V5KSB7XG4gIGlmICghaGFzT3duUHJvcGVydHkob2JqLCBrZXkpKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICByZXR1cm4gb2JqW2tleV07XG59XG5mdW5jdGlvbiBvYmplY3RNYXBLZXlzKG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LmtleXMob2JqZWN0KTtcbn1cbmZ1bmN0aW9uIG9iamVjdE1hcFZhbHVlcyhvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC52YWx1ZXMob2JqZWN0KTtcbn1cbmZ1bmN0aW9uIG9iamVjdE1hcEVudHJpZXMob2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3QuZW50cmllcyhvYmplY3QpO1xufVxuZnVuY3Rpb24gb2JqZWN0TWFwRnJvbUVudHJpZXMoZW50cmllcykge1xuICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKGVudHJpZXMpO1xufVxuZnVuY3Rpb24gZmlsdGVyRW50cmllcyhvYmplY3QsIHByZWRpY2F0ZSkge1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgbGV0IGRpZENoYW5nZSA9IGZhbHNlO1xuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBvYmplY3RNYXBFbnRyaWVzKG9iamVjdCkpIHtcbiAgICBpZiAocHJlZGljYXRlKGtleSwgdmFsdWUpKSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaWRDaGFuZ2UgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGlkQ2hhbmdlID8gcmVzdWx0IDogb2JqZWN0O1xufVxuZnVuY3Rpb24gbWFwT2JqZWN0TWFwVmFsdWVzKG9iamVjdCwgbWFwcGVyKSB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBvYmplY3RNYXBFbnRyaWVzKG9iamVjdCkpIHtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IG1hcHBlcihrZXksIHZhbHVlKTtcbiAgICByZXN1bHRba2V5XSA9IG5ld1ZhbHVlO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBhcmVPYmplY3RzU2hhbGxvd0VxdWFsKG9iajEsIG9iajIpIHtcbiAgaWYgKG9iajEgPT09IG9iajIpXG4gICAgcmV0dXJuIHRydWU7XG4gIGNvbnN0IGtleXMxID0gbmV3IFNldChPYmplY3Qua2V5cyhvYmoxKSk7XG4gIGNvbnN0IGtleXMyID0gbmV3IFNldChPYmplY3Qua2V5cyhvYmoyKSk7XG4gIGlmIChrZXlzMS5zaXplICE9PSBrZXlzMi5zaXplKVxuICAgIHJldHVybiBmYWxzZTtcbiAgZm9yIChjb25zdCBrZXkgb2Yga2V5czEpIHtcbiAgICBpZiAoIWtleXMyLmhhcyhrZXkpKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghT2JqZWN0LmlzKG9iajFba2V5XSwgb2JqMltrZXldKSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCB7XG4gIGFyZU9iamVjdHNTaGFsbG93RXF1YWwsXG4gIGZpbHRlckVudHJpZXMsXG4gIGdldE93blByb3BlcnR5LFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgbWFwT2JqZWN0TWFwVmFsdWVzLFxuICBvYmplY3RNYXBFbnRyaWVzLFxuICBvYmplY3RNYXBGcm9tRW50cmllcyxcbiAgb2JqZWN0TWFwS2V5cyxcbiAgb2JqZWN0TWFwVmFsdWVzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JqZWN0Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/object.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/perf.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/perf.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PERFORMANCE_COLORS: () => (/* binding */ PERFORMANCE_COLORS),\n/* harmony export */   PERFORMANCE_PREFIX_COLOR: () => (/* binding */ PERFORMANCE_PREFIX_COLOR),\n/* harmony export */   measureAverageDuration: () => (/* binding */ measureAverageDuration),\n/* harmony export */   measureCbDuration: () => (/* binding */ measureCbDuration),\n/* harmony export */   measureDuration: () => (/* binding */ measureDuration)\n/* harmony export */ });\nconst PERFORMANCE_COLORS = {\n  Good: \"#40C057\",\n  Mid: \"#FFC078\",\n  Poor: \"#E03131\"\n};\nconst PERFORMANCE_PREFIX_COLOR = PERFORMANCE_COLORS.Good;\nfunction measureCbDuration(name, cb) {\n  const start = performance.now();\n  const result = cb();\n  console.debug(\n    `%cPerf%c ${name} took ${performance.now() - start}ms`,\n    `color: white; background: ${PERFORMANCE_PREFIX_COLOR};padding: 2px;border-radius: 3px;`,\n    \"font-weight: normal\"\n  );\n  return result;\n}\nfunction measureDuration(_target, propertyKey, descriptor) {\n  const originalMethod = descriptor.value;\n  descriptor.value = function(...args) {\n    const start = performance.now();\n    const result = originalMethod.apply(this, args);\n    console.debug(\n      `%cPerf%c ${propertyKey} took: ${performance.now() - start}ms`,\n      `color: white; background: ${PERFORMANCE_PREFIX_COLOR};padding: 2px;border-radius: 3px;`,\n      \"font-weight: normal\"\n    );\n    return result;\n  };\n  return descriptor;\n}\nconst averages = /* @__PURE__ */ new Map();\nfunction measureAverageDuration(_target, propertyKey, descriptor) {\n  const originalMethod = descriptor.value;\n  descriptor.value = function(...args) {\n    const start = performance.now();\n    const result = originalMethod.apply(this, args);\n    const end = performance.now();\n    const length = end - start;\n    if (length !== 0) {\n      const value = averages.get(descriptor.value);\n      const total = value.total + length;\n      const count = value.count + 1;\n      averages.set(descriptor.value, { total, count });\n      console.debug(\n        `%cPerf%c ${propertyKey} took ${(end - start).toFixed(2)}ms | average ${(total / count).toFixed(2)}ms`,\n        `color: white; background: ${PERFORMANCE_PREFIX_COLOR};padding: 2px;border-radius: 3px;`,\n        \"font-weight: normal\"\n      );\n    }\n    return result;\n  };\n  averages.set(descriptor.value, { total: 0, count: 0 });\n  return descriptor;\n}\n\n//# sourceMappingURL=perf.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvcGVyZi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixNQUFNLE9BQU8sMEJBQTBCO0FBQ3ZELG1CQUFtQixjQUFjLDBCQUEwQixhQUFhLG1CQUFtQjtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixhQUFhLFFBQVEsMEJBQTBCO0FBQ2pFLHFCQUFxQixjQUFjLDBCQUEwQixhQUFhLG1CQUFtQjtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsY0FBYztBQUNyRDtBQUNBLG9CQUFvQixhQUFhLE9BQU8seUJBQXlCLGVBQWUsMkJBQTJCO0FBQzNHLHVCQUF1QixjQUFjLDBCQUEwQixhQUFhLG1CQUFtQjtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLG9CQUFvQjtBQUN2RDtBQUNBO0FBT0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9wZXJmLm1qcz9kMDY3Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFBFUkZPUk1BTkNFX0NPTE9SUyA9IHtcbiAgR29vZDogXCIjNDBDMDU3XCIsXG4gIE1pZDogXCIjRkZDMDc4XCIsXG4gIFBvb3I6IFwiI0UwMzEzMVwiXG59O1xuY29uc3QgUEVSRk9STUFOQ0VfUFJFRklYX0NPTE9SID0gUEVSRk9STUFOQ0VfQ09MT1JTLkdvb2Q7XG5mdW5jdGlvbiBtZWFzdXJlQ2JEdXJhdGlvbihuYW1lLCBjYikge1xuICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICBjb25zdCByZXN1bHQgPSBjYigpO1xuICBjb25zb2xlLmRlYnVnKFxuICAgIGAlY1BlcmYlYyAke25hbWV9IHRvb2sgJHtwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0fW1zYCxcbiAgICBgY29sb3I6IHdoaXRlOyBiYWNrZ3JvdW5kOiAke1BFUkZPUk1BTkNFX1BSRUZJWF9DT0xPUn07cGFkZGluZzogMnB4O2JvcmRlci1yYWRpdXM6IDNweDtgLFxuICAgIFwiZm9udC13ZWlnaHQ6IG5vcm1hbFwiXG4gICk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBtZWFzdXJlRHVyYXRpb24oX3RhcmdldCwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3IpIHtcbiAgY29uc3Qgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xuICBkZXNjcmlwdG9yLnZhbHVlID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgcmVzdWx0ID0gb3JpZ2luYWxNZXRob2QuYXBwbHkodGhpcywgYXJncyk7XG4gICAgY29uc29sZS5kZWJ1ZyhcbiAgICAgIGAlY1BlcmYlYyAke3Byb3BlcnR5S2V5fSB0b29rOiAke3BlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnR9bXNgLFxuICAgICAgYGNvbG9yOiB3aGl0ZTsgYmFja2dyb3VuZDogJHtQRVJGT1JNQU5DRV9QUkVGSVhfQ09MT1J9O3BhZGRpbmc6IDJweDtib3JkZXItcmFkaXVzOiAzcHg7YCxcbiAgICAgIFwiZm9udC13ZWlnaHQ6IG5vcm1hbFwiXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICByZXR1cm4gZGVzY3JpcHRvcjtcbn1cbmNvbnN0IGF2ZXJhZ2VzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbmZ1bmN0aW9uIG1lYXN1cmVBdmVyYWdlRHVyYXRpb24oX3RhcmdldCwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3IpIHtcbiAgY29uc3Qgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xuICBkZXNjcmlwdG9yLnZhbHVlID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgcmVzdWx0ID0gb3JpZ2luYWxNZXRob2QuYXBwbHkodGhpcywgYXJncyk7XG4gICAgY29uc3QgZW5kID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgbGVuZ3RoID0gZW5kIC0gc3RhcnQ7XG4gICAgaWYgKGxlbmd0aCAhPT0gMCkge1xuICAgICAgY29uc3QgdmFsdWUgPSBhdmVyYWdlcy5nZXQoZGVzY3JpcHRvci52YWx1ZSk7XG4gICAgICBjb25zdCB0b3RhbCA9IHZhbHVlLnRvdGFsICsgbGVuZ3RoO1xuICAgICAgY29uc3QgY291bnQgPSB2YWx1ZS5jb3VudCArIDE7XG4gICAgICBhdmVyYWdlcy5zZXQoZGVzY3JpcHRvci52YWx1ZSwgeyB0b3RhbCwgY291bnQgfSk7XG4gICAgICBjb25zb2xlLmRlYnVnKFxuICAgICAgICBgJWNQZXJmJWMgJHtwcm9wZXJ0eUtleX0gdG9vayAkeyhlbmQgLSBzdGFydCkudG9GaXhlZCgyKX1tcyB8IGF2ZXJhZ2UgJHsodG90YWwgLyBjb3VudCkudG9GaXhlZCgyKX1tc2AsXG4gICAgICAgIGBjb2xvcjogd2hpdGU7IGJhY2tncm91bmQ6ICR7UEVSRk9STUFOQ0VfUFJFRklYX0NPTE9SfTtwYWRkaW5nOiAycHg7Ym9yZGVyLXJhZGl1czogM3B4O2AsXG4gICAgICAgIFwiZm9udC13ZWlnaHQ6IG5vcm1hbFwiXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBhdmVyYWdlcy5zZXQoZGVzY3JpcHRvci52YWx1ZSwgeyB0b3RhbDogMCwgY291bnQ6IDAgfSk7XG4gIHJldHVybiBkZXNjcmlwdG9yO1xufVxuZXhwb3J0IHtcbiAgUEVSRk9STUFOQ0VfQ09MT1JTLFxuICBQRVJGT1JNQU5DRV9QUkVGSVhfQ09MT1IsXG4gIG1lYXN1cmVBdmVyYWdlRHVyYXRpb24sXG4gIG1lYXN1cmVDYkR1cmF0aW9uLFxuICBtZWFzdXJlRHVyYXRpb25cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wZXJmLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/perf.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/reordering/dgreensp/dgreensp.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/reordering/dgreensp/dgreensp.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INTEGER_ZERO: () => (/* binding */ INTEGER_ZERO),\n/* harmony export */   generateNKeysBetween: () => (/* binding */ generateNKeysBetween),\n/* harmony export */   validateOrder: () => (/* binding */ validateOrder)\n/* harmony export */ });\nconst DIGITS = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\nconst INTEGER_ZERO = \"a0\";\nconst SMALLEST_INTEGER = \"A00000000000000000000000000\";\nfunction getIntegerLength(head) {\n  if (head >= \"a\" && head <= \"z\") {\n    return head.charCodeAt(0) - \"a\".charCodeAt(0) + 2;\n  } else if (head >= \"A\" && head <= \"Z\") {\n    return \"Z\".charCodeAt(0) - head.charCodeAt(0) + 2;\n  } else {\n    throw new Error(\"Invalid index key head: \" + head);\n  }\n}\nfunction validateInteger(int) {\n  if (int.length !== getIntegerLength(int.charAt(0))) {\n    throw new Error(\"invalid integer part of index key: \" + int);\n  }\n}\nfunction isNotUndefined(n) {\n  if (n === void 0)\n    throw Error(\"n is undefined\");\n}\nfunction incrementInteger(x) {\n  validateInteger(x);\n  const [head, ...digs] = x.split(\"\");\n  let carry = true;\n  for (let i = digs.length - 1; carry && i >= 0; i--) {\n    const d = DIGITS.indexOf(digs[i]) + 1;\n    if (d === DIGITS.length) {\n      digs[i] = \"0\";\n    } else {\n      digs[i] = DIGITS.charAt(d);\n      carry = false;\n    }\n  }\n  if (carry) {\n    if (head === \"Z\")\n      return \"a0\";\n    if (head === \"z\")\n      return void 0;\n    const h = String.fromCharCode(head.charCodeAt(0) + 1);\n    if (h > \"a\") {\n      digs.push(\"0\");\n    } else {\n      digs.pop();\n    }\n    return h + digs.join(\"\");\n  } else {\n    return head + digs.join(\"\");\n  }\n}\nfunction decrementInteger(x) {\n  validateInteger(x);\n  const [head, ...digs] = x.split(\"\");\n  let borrow = true;\n  for (let i = digs.length - 1; borrow && i >= 0; i--) {\n    const d = DIGITS.indexOf(digs[i]) - 1;\n    if (d === -1) {\n      digs[i] = DIGITS.slice(-1);\n    } else {\n      digs[i] = DIGITS.charAt(d);\n      borrow = false;\n    }\n  }\n  if (borrow) {\n    if (head === \"a\")\n      return \"Z\" + DIGITS.slice(-1);\n    if (head === \"A\")\n      return void 0;\n    const h = String.fromCharCode(head.charCodeAt(0) - 1);\n    if (h < \"Z\") {\n      digs.push(DIGITS.slice(-1));\n    } else {\n      digs.pop();\n    }\n    return h + digs.join(\"\");\n  } else {\n    return head + digs.join(\"\");\n  }\n}\nfunction midpoint(a, b) {\n  if (b !== void 0 && a >= b) {\n    throw new Error(a + \" >= \" + b);\n  }\n  if (a.slice(-1) === \"0\" || b && b.slice(-1) === \"0\") {\n    throw new Error(\"trailing zero\");\n  }\n  if (b) {\n    let n = 0;\n    while ((a.charAt(n) || \"0\") === b.charAt(n)) {\n      n++;\n    }\n    if (n > 0) {\n      return b.slice(0, n) + midpoint(a.slice(n), b.slice(n));\n    }\n  }\n  const digitA = a ? DIGITS.indexOf(a.charAt(0)) : 0;\n  const digitB = b !== void 0 ? DIGITS.indexOf(b.charAt(0)) : DIGITS.length;\n  if (digitB - digitA > 1) {\n    const midDigit = Math.round(0.5 * (digitA + digitB));\n    return DIGITS.charAt(midDigit);\n  } else {\n    if (b && b.length > 1) {\n      return b.slice(0, 1);\n    } else {\n      return DIGITS.charAt(digitA) + midpoint(a.slice(1), void 0);\n    }\n  }\n}\nfunction getIntegerPart(index) {\n  const integerPartLength = getIntegerLength(index.charAt(0));\n  if (integerPartLength > index.length) {\n    throw new Error(\"invalid index: \" + index);\n  }\n  return index.slice(0, integerPartLength);\n}\nfunction validateOrder(index) {\n  if (index === SMALLEST_INTEGER) {\n    throw new Error(\"invalid index: \" + index);\n  }\n  const i = getIntegerPart(index);\n  const f = index.slice(i.length);\n  if (f.slice(-1) === \"0\") {\n    throw new Error(\"invalid index: \" + index);\n  }\n}\nfunction generateKeyBetween(a, b) {\n  if (a !== void 0)\n    validateOrder(a);\n  if (b !== void 0)\n    validateOrder(b);\n  if (a !== void 0 && b !== void 0 && a >= b) {\n    throw new Error(a + \" >= \" + b);\n  }\n  if (a === void 0 && b === void 0) {\n    return INTEGER_ZERO;\n  }\n  if (a === void 0) {\n    if (b === void 0)\n      throw Error(\"b is undefined\");\n    const ib2 = getIntegerPart(b);\n    const fb2 = b.slice(ib2.length);\n    if (ib2 === SMALLEST_INTEGER) {\n      return ib2 + midpoint(\"\", fb2);\n    }\n    if (ib2 < b) {\n      return ib2;\n    }\n    const ibl = decrementInteger(ib2);\n    isNotUndefined(ibl);\n    return ibl;\n  }\n  if (b === void 0) {\n    const ia2 = getIntegerPart(a);\n    const fa2 = a.slice(ia2.length);\n    const i2 = incrementInteger(ia2);\n    return i2 === void 0 ? ia2 + midpoint(fa2, void 0) : i2;\n  }\n  const ia = getIntegerPart(a);\n  const fa = a.slice(ia.length);\n  const ib = getIntegerPart(b);\n  const fb = b.slice(ib.length);\n  if (ia === ib) {\n    return ia + midpoint(fa, fb);\n  }\n  const i = incrementInteger(ia);\n  isNotUndefined(i);\n  return i < b ? i : ia + midpoint(fa, void 0);\n}\nfunction generateNKeysBetween(a, b, n) {\n  if (n === 0)\n    return [];\n  if (n === 1)\n    return [generateKeyBetween(a, b)];\n  if (b === void 0) {\n    let c2 = generateKeyBetween(a, b);\n    const result = [c2];\n    for (let i = 0; i < n - 1; i++) {\n      c2 = generateKeyBetween(c2, b);\n      result.push(c2);\n    }\n    return result;\n  }\n  if (a === void 0) {\n    let c2 = generateKeyBetween(a, b);\n    const result = [c2];\n    for (let i = 0; i < n - 1; i++) {\n      c2 = generateKeyBetween(a, c2);\n      result.push(c2);\n    }\n    result.reverse();\n    return result;\n  }\n  const mid = Math.floor(n / 2);\n  const c = generateKeyBetween(a, b);\n  return [...generateNKeysBetween(a, c, mid), c, ...generateNKeysBetween(c, b, n - mid - 1)];\n}\n\n//# sourceMappingURL=dgreensp.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvcmVvcmRlcmluZy9kZ3JlZW5zcC9kZ3JlZW5zcC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGlCQUFpQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxrQkFBa0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXctYS11aS8uL25vZGVfbW9kdWxlcy9AdGxkcmF3L3V0aWxzL2Rpc3QtZXNtL2xpYi9yZW9yZGVyaW5nL2RncmVlbnNwL2RncmVlbnNwLm1qcz9hNGY3Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IERJR0lUUyA9IFwiMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIjtcbmNvbnN0IElOVEVHRVJfWkVSTyA9IFwiYTBcIjtcbmNvbnN0IFNNQUxMRVNUX0lOVEVHRVIgPSBcIkEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiO1xuZnVuY3Rpb24gZ2V0SW50ZWdlckxlbmd0aChoZWFkKSB7XG4gIGlmIChoZWFkID49IFwiYVwiICYmIGhlYWQgPD0gXCJ6XCIpIHtcbiAgICByZXR1cm4gaGVhZC5jaGFyQ29kZUF0KDApIC0gXCJhXCIuY2hhckNvZGVBdCgwKSArIDI7XG4gIH0gZWxzZSBpZiAoaGVhZCA+PSBcIkFcIiAmJiBoZWFkIDw9IFwiWlwiKSB7XG4gICAgcmV0dXJuIFwiWlwiLmNoYXJDb2RlQXQoMCkgLSBoZWFkLmNoYXJDb2RlQXQoMCkgKyAyO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5kZXgga2V5IGhlYWQ6IFwiICsgaGVhZCk7XG4gIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlSW50ZWdlcihpbnQpIHtcbiAgaWYgKGludC5sZW5ndGggIT09IGdldEludGVnZXJMZW5ndGgoaW50LmNoYXJBdCgwKSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGludGVnZXIgcGFydCBvZiBpbmRleCBrZXk6IFwiICsgaW50KTtcbiAgfVxufVxuZnVuY3Rpb24gaXNOb3RVbmRlZmluZWQobikge1xuICBpZiAobiA9PT0gdm9pZCAwKVxuICAgIHRocm93IEVycm9yKFwibiBpcyB1bmRlZmluZWRcIik7XG59XG5mdW5jdGlvbiBpbmNyZW1lbnRJbnRlZ2VyKHgpIHtcbiAgdmFsaWRhdGVJbnRlZ2VyKHgpO1xuICBjb25zdCBbaGVhZCwgLi4uZGlnc10gPSB4LnNwbGl0KFwiXCIpO1xuICBsZXQgY2FycnkgPSB0cnVlO1xuICBmb3IgKGxldCBpID0gZGlncy5sZW5ndGggLSAxOyBjYXJyeSAmJiBpID49IDA7IGktLSkge1xuICAgIGNvbnN0IGQgPSBESUdJVFMuaW5kZXhPZihkaWdzW2ldKSArIDE7XG4gICAgaWYgKGQgPT09IERJR0lUUy5sZW5ndGgpIHtcbiAgICAgIGRpZ3NbaV0gPSBcIjBcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlnc1tpXSA9IERJR0lUUy5jaGFyQXQoZCk7XG4gICAgICBjYXJyeSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBpZiAoY2FycnkpIHtcbiAgICBpZiAoaGVhZCA9PT0gXCJaXCIpXG4gICAgICByZXR1cm4gXCJhMFwiO1xuICAgIGlmIChoZWFkID09PSBcInpcIilcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgY29uc3QgaCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaGVhZC5jaGFyQ29kZUF0KDApICsgMSk7XG4gICAgaWYgKGggPiBcImFcIikge1xuICAgICAgZGlncy5wdXNoKFwiMFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlncy5wb3AoKTtcbiAgICB9XG4gICAgcmV0dXJuIGggKyBkaWdzLmpvaW4oXCJcIik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGhlYWQgKyBkaWdzLmpvaW4oXCJcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlY3JlbWVudEludGVnZXIoeCkge1xuICB2YWxpZGF0ZUludGVnZXIoeCk7XG4gIGNvbnN0IFtoZWFkLCAuLi5kaWdzXSA9IHguc3BsaXQoXCJcIik7XG4gIGxldCBib3Jyb3cgPSB0cnVlO1xuICBmb3IgKGxldCBpID0gZGlncy5sZW5ndGggLSAxOyBib3Jyb3cgJiYgaSA+PSAwOyBpLS0pIHtcbiAgICBjb25zdCBkID0gRElHSVRTLmluZGV4T2YoZGlnc1tpXSkgLSAxO1xuICAgIGlmIChkID09PSAtMSkge1xuICAgICAgZGlnc1tpXSA9IERJR0lUUy5zbGljZSgtMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpZ3NbaV0gPSBESUdJVFMuY2hhckF0KGQpO1xuICAgICAgYm9ycm93ID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIGlmIChib3Jyb3cpIHtcbiAgICBpZiAoaGVhZCA9PT0gXCJhXCIpXG4gICAgICByZXR1cm4gXCJaXCIgKyBESUdJVFMuc2xpY2UoLTEpO1xuICAgIGlmIChoZWFkID09PSBcIkFcIilcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgY29uc3QgaCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaGVhZC5jaGFyQ29kZUF0KDApIC0gMSk7XG4gICAgaWYgKGggPCBcIlpcIikge1xuICAgICAgZGlncy5wdXNoKERJR0lUUy5zbGljZSgtMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaWdzLnBvcCgpO1xuICAgIH1cbiAgICByZXR1cm4gaCArIGRpZ3Muam9pbihcIlwiKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaGVhZCArIGRpZ3Muam9pbihcIlwiKTtcbiAgfVxufVxuZnVuY3Rpb24gbWlkcG9pbnQoYSwgYikge1xuICBpZiAoYiAhPT0gdm9pZCAwICYmIGEgPj0gYikge1xuICAgIHRocm93IG5ldyBFcnJvcihhICsgXCIgPj0gXCIgKyBiKTtcbiAgfVxuICBpZiAoYS5zbGljZSgtMSkgPT09IFwiMFwiIHx8IGIgJiYgYi5zbGljZSgtMSkgPT09IFwiMFwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidHJhaWxpbmcgemVyb1wiKTtcbiAgfVxuICBpZiAoYikge1xuICAgIGxldCBuID0gMDtcbiAgICB3aGlsZSAoKGEuY2hhckF0KG4pIHx8IFwiMFwiKSA9PT0gYi5jaGFyQXQobikpIHtcbiAgICAgIG4rKztcbiAgICB9XG4gICAgaWYgKG4gPiAwKSB7XG4gICAgICByZXR1cm4gYi5zbGljZSgwLCBuKSArIG1pZHBvaW50KGEuc2xpY2UobiksIGIuc2xpY2UobikpO1xuICAgIH1cbiAgfVxuICBjb25zdCBkaWdpdEEgPSBhID8gRElHSVRTLmluZGV4T2YoYS5jaGFyQXQoMCkpIDogMDtcbiAgY29uc3QgZGlnaXRCID0gYiAhPT0gdm9pZCAwID8gRElHSVRTLmluZGV4T2YoYi5jaGFyQXQoMCkpIDogRElHSVRTLmxlbmd0aDtcbiAgaWYgKGRpZ2l0QiAtIGRpZ2l0QSA+IDEpIHtcbiAgICBjb25zdCBtaWREaWdpdCA9IE1hdGgucm91bmQoMC41ICogKGRpZ2l0QSArIGRpZ2l0QikpO1xuICAgIHJldHVybiBESUdJVFMuY2hhckF0KG1pZERpZ2l0KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoYiAmJiBiLmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybiBiLnNsaWNlKDAsIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gRElHSVRTLmNoYXJBdChkaWdpdEEpICsgbWlkcG9pbnQoYS5zbGljZSgxKSwgdm9pZCAwKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGdldEludGVnZXJQYXJ0KGluZGV4KSB7XG4gIGNvbnN0IGludGVnZXJQYXJ0TGVuZ3RoID0gZ2V0SW50ZWdlckxlbmd0aChpbmRleC5jaGFyQXQoMCkpO1xuICBpZiAoaW50ZWdlclBhcnRMZW5ndGggPiBpbmRleC5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGluZGV4OiBcIiArIGluZGV4KTtcbiAgfVxuICByZXR1cm4gaW5kZXguc2xpY2UoMCwgaW50ZWdlclBhcnRMZW5ndGgpO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVPcmRlcihpbmRleCkge1xuICBpZiAoaW5kZXggPT09IFNNQUxMRVNUX0lOVEVHRVIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGluZGV4OiBcIiArIGluZGV4KTtcbiAgfVxuICBjb25zdCBpID0gZ2V0SW50ZWdlclBhcnQoaW5kZXgpO1xuICBjb25zdCBmID0gaW5kZXguc2xpY2UoaS5sZW5ndGgpO1xuICBpZiAoZi5zbGljZSgtMSkgPT09IFwiMFwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBpbmRleDogXCIgKyBpbmRleCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGdlbmVyYXRlS2V5QmV0d2VlbihhLCBiKSB7XG4gIGlmIChhICE9PSB2b2lkIDApXG4gICAgdmFsaWRhdGVPcmRlcihhKTtcbiAgaWYgKGIgIT09IHZvaWQgMClcbiAgICB2YWxpZGF0ZU9yZGVyKGIpO1xuICBpZiAoYSAhPT0gdm9pZCAwICYmIGIgIT09IHZvaWQgMCAmJiBhID49IGIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYSArIFwiID49IFwiICsgYik7XG4gIH1cbiAgaWYgKGEgPT09IHZvaWQgMCAmJiBiID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4gSU5URUdFUl9aRVJPO1xuICB9XG4gIGlmIChhID09PSB2b2lkIDApIHtcbiAgICBpZiAoYiA9PT0gdm9pZCAwKVxuICAgICAgdGhyb3cgRXJyb3IoXCJiIGlzIHVuZGVmaW5lZFwiKTtcbiAgICBjb25zdCBpYjIgPSBnZXRJbnRlZ2VyUGFydChiKTtcbiAgICBjb25zdCBmYjIgPSBiLnNsaWNlKGliMi5sZW5ndGgpO1xuICAgIGlmIChpYjIgPT09IFNNQUxMRVNUX0lOVEVHRVIpIHtcbiAgICAgIHJldHVybiBpYjIgKyBtaWRwb2ludChcIlwiLCBmYjIpO1xuICAgIH1cbiAgICBpZiAoaWIyIDwgYikge1xuICAgICAgcmV0dXJuIGliMjtcbiAgICB9XG4gICAgY29uc3QgaWJsID0gZGVjcmVtZW50SW50ZWdlcihpYjIpO1xuICAgIGlzTm90VW5kZWZpbmVkKGlibCk7XG4gICAgcmV0dXJuIGlibDtcbiAgfVxuICBpZiAoYiA9PT0gdm9pZCAwKSB7XG4gICAgY29uc3QgaWEyID0gZ2V0SW50ZWdlclBhcnQoYSk7XG4gICAgY29uc3QgZmEyID0gYS5zbGljZShpYTIubGVuZ3RoKTtcbiAgICBjb25zdCBpMiA9IGluY3JlbWVudEludGVnZXIoaWEyKTtcbiAgICByZXR1cm4gaTIgPT09IHZvaWQgMCA/IGlhMiArIG1pZHBvaW50KGZhMiwgdm9pZCAwKSA6IGkyO1xuICB9XG4gIGNvbnN0IGlhID0gZ2V0SW50ZWdlclBhcnQoYSk7XG4gIGNvbnN0IGZhID0gYS5zbGljZShpYS5sZW5ndGgpO1xuICBjb25zdCBpYiA9IGdldEludGVnZXJQYXJ0KGIpO1xuICBjb25zdCBmYiA9IGIuc2xpY2UoaWIubGVuZ3RoKTtcbiAgaWYgKGlhID09PSBpYikge1xuICAgIHJldHVybiBpYSArIG1pZHBvaW50KGZhLCBmYik7XG4gIH1cbiAgY29uc3QgaSA9IGluY3JlbWVudEludGVnZXIoaWEpO1xuICBpc05vdFVuZGVmaW5lZChpKTtcbiAgcmV0dXJuIGkgPCBiID8gaSA6IGlhICsgbWlkcG9pbnQoZmEsIHZvaWQgMCk7XG59XG5mdW5jdGlvbiBnZW5lcmF0ZU5LZXlzQmV0d2VlbihhLCBiLCBuKSB7XG4gIGlmIChuID09PSAwKVxuICAgIHJldHVybiBbXTtcbiAgaWYgKG4gPT09IDEpXG4gICAgcmV0dXJuIFtnZW5lcmF0ZUtleUJldHdlZW4oYSwgYildO1xuICBpZiAoYiA9PT0gdm9pZCAwKSB7XG4gICAgbGV0IGMyID0gZ2VuZXJhdGVLZXlCZXR3ZWVuKGEsIGIpO1xuICAgIGNvbnN0IHJlc3VsdCA9IFtjMl07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuIC0gMTsgaSsrKSB7XG4gICAgICBjMiA9IGdlbmVyYXRlS2V5QmV0d2VlbihjMiwgYik7XG4gICAgICByZXN1bHQucHVzaChjMik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgaWYgKGEgPT09IHZvaWQgMCkge1xuICAgIGxldCBjMiA9IGdlbmVyYXRlS2V5QmV0d2VlbihhLCBiKTtcbiAgICBjb25zdCByZXN1bHQgPSBbYzJdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbiAtIDE7IGkrKykge1xuICAgICAgYzIgPSBnZW5lcmF0ZUtleUJldHdlZW4oYSwgYzIpO1xuICAgICAgcmVzdWx0LnB1c2goYzIpO1xuICAgIH1cbiAgICByZXN1bHQucmV2ZXJzZSgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgY29uc3QgbWlkID0gTWF0aC5mbG9vcihuIC8gMik7XG4gIGNvbnN0IGMgPSBnZW5lcmF0ZUtleUJldHdlZW4oYSwgYik7XG4gIHJldHVybiBbLi4uZ2VuZXJhdGVOS2V5c0JldHdlZW4oYSwgYywgbWlkKSwgYywgLi4uZ2VuZXJhdGVOS2V5c0JldHdlZW4oYywgYiwgbiAtIG1pZCAtIDEpXTtcbn1cbmV4cG9ydCB7XG4gIElOVEVHRVJfWkVSTyxcbiAgZ2VuZXJhdGVOS2V5c0JldHdlZW4sXG4gIHZhbGlkYXRlT3JkZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZ3JlZW5zcC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/reordering/dgreensp/dgreensp.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/reordering/reordering.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/reordering/reordering.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ZERO_INDEX_KEY: () => (/* binding */ ZERO_INDEX_KEY),\n/* harmony export */   getIndexAbove: () => (/* binding */ getIndexAbove),\n/* harmony export */   getIndexBelow: () => (/* binding */ getIndexBelow),\n/* harmony export */   getIndexBetween: () => (/* binding */ getIndexBetween),\n/* harmony export */   getIndices: () => (/* binding */ getIndices),\n/* harmony export */   getIndicesAbove: () => (/* binding */ getIndicesAbove),\n/* harmony export */   getIndicesBelow: () => (/* binding */ getIndicesBelow),\n/* harmony export */   getIndicesBetween: () => (/* binding */ getIndicesBetween),\n/* harmony export */   sortByIndex: () => (/* binding */ sortByIndex),\n/* harmony export */   validateIndexKey: () => (/* binding */ validateIndexKey)\n/* harmony export */ });\n/* harmony import */ var _dgreensp_dgreensp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dgreensp/dgreensp.mjs */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/reordering/dgreensp/dgreensp.mjs\");\n\nconst ZERO_INDEX_KEY = _dgreensp_dgreensp_mjs__WEBPACK_IMPORTED_MODULE_0__.INTEGER_ZERO;\nfunction validateIndexKey(key) {\n  (0,_dgreensp_dgreensp_mjs__WEBPACK_IMPORTED_MODULE_0__.validateOrder)(key);\n}\nfunction getIndicesBetween(below, above, n) {\n  return (0,_dgreensp_dgreensp_mjs__WEBPACK_IMPORTED_MODULE_0__.generateNKeysBetween)(below, above, n);\n}\nfunction getIndicesAbove(below, n) {\n  return (0,_dgreensp_dgreensp_mjs__WEBPACK_IMPORTED_MODULE_0__.generateNKeysBetween)(below, void 0, n);\n}\nfunction getIndicesBelow(above, n) {\n  return (0,_dgreensp_dgreensp_mjs__WEBPACK_IMPORTED_MODULE_0__.generateNKeysBetween)(void 0, above, n);\n}\nfunction getIndexBetween(below, above) {\n  return (0,_dgreensp_dgreensp_mjs__WEBPACK_IMPORTED_MODULE_0__.generateNKeysBetween)(below, above, 1)[0];\n}\nfunction getIndexAbove(below) {\n  return (0,_dgreensp_dgreensp_mjs__WEBPACK_IMPORTED_MODULE_0__.generateNKeysBetween)(below, void 0, 1)[0];\n}\nfunction getIndexBelow(above) {\n  return (0,_dgreensp_dgreensp_mjs__WEBPACK_IMPORTED_MODULE_0__.generateNKeysBetween)(void 0, above, 1)[0];\n}\nfunction getIndices(n, start = \"a1\") {\n  return [start, ...(0,_dgreensp_dgreensp_mjs__WEBPACK_IMPORTED_MODULE_0__.generateNKeysBetween)(start, void 0, n)];\n}\nfunction sortByIndex(a, b) {\n  if (a.index < b.index) {\n    return -1;\n  } else if (a.index > b.index) {\n    return 1;\n  }\n  return 0;\n}\n\n//# sourceMappingURL=reordering.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvcmVvcmRlcmluZy9yZW9yZGVyaW5nLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUE0RjtBQUM1Rix1QkFBdUIsZ0VBQVk7QUFDbkM7QUFDQSxFQUFFLHFFQUFhO0FBQ2Y7QUFDQTtBQUNBLFNBQVMsNEVBQW9CO0FBQzdCO0FBQ0E7QUFDQSxTQUFTLDRFQUFvQjtBQUM3QjtBQUNBO0FBQ0EsU0FBUyw0RUFBb0I7QUFDN0I7QUFDQTtBQUNBLFNBQVMsNEVBQW9CO0FBQzdCO0FBQ0E7QUFDQSxTQUFTLDRFQUFvQjtBQUM3QjtBQUNBO0FBQ0EsU0FBUyw0RUFBb0I7QUFDN0I7QUFDQTtBQUNBLG9CQUFvQiw0RUFBb0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFZRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL3Jlb3JkZXJpbmcvcmVvcmRlcmluZy5tanM/MzU4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlRFR0VSX1pFUk8sIGdlbmVyYXRlTktleXNCZXR3ZWVuLCB2YWxpZGF0ZU9yZGVyIH0gZnJvbSBcIi4vZGdyZWVuc3AvZGdyZWVuc3AubWpzXCI7XG5jb25zdCBaRVJPX0lOREVYX0tFWSA9IElOVEVHRVJfWkVSTztcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhLZXkoa2V5KSB7XG4gIHZhbGlkYXRlT3JkZXIoa2V5KTtcbn1cbmZ1bmN0aW9uIGdldEluZGljZXNCZXR3ZWVuKGJlbG93LCBhYm92ZSwgbikge1xuICByZXR1cm4gZ2VuZXJhdGVOS2V5c0JldHdlZW4oYmVsb3csIGFib3ZlLCBuKTtcbn1cbmZ1bmN0aW9uIGdldEluZGljZXNBYm92ZShiZWxvdywgbikge1xuICByZXR1cm4gZ2VuZXJhdGVOS2V5c0JldHdlZW4oYmVsb3csIHZvaWQgMCwgbik7XG59XG5mdW5jdGlvbiBnZXRJbmRpY2VzQmVsb3coYWJvdmUsIG4pIHtcbiAgcmV0dXJuIGdlbmVyYXRlTktleXNCZXR3ZWVuKHZvaWQgMCwgYWJvdmUsIG4pO1xufVxuZnVuY3Rpb24gZ2V0SW5kZXhCZXR3ZWVuKGJlbG93LCBhYm92ZSkge1xuICByZXR1cm4gZ2VuZXJhdGVOS2V5c0JldHdlZW4oYmVsb3csIGFib3ZlLCAxKVswXTtcbn1cbmZ1bmN0aW9uIGdldEluZGV4QWJvdmUoYmVsb3cpIHtcbiAgcmV0dXJuIGdlbmVyYXRlTktleXNCZXR3ZWVuKGJlbG93LCB2b2lkIDAsIDEpWzBdO1xufVxuZnVuY3Rpb24gZ2V0SW5kZXhCZWxvdyhhYm92ZSkge1xuICByZXR1cm4gZ2VuZXJhdGVOS2V5c0JldHdlZW4odm9pZCAwLCBhYm92ZSwgMSlbMF07XG59XG5mdW5jdGlvbiBnZXRJbmRpY2VzKG4sIHN0YXJ0ID0gXCJhMVwiKSB7XG4gIHJldHVybiBbc3RhcnQsIC4uLmdlbmVyYXRlTktleXNCZXR3ZWVuKHN0YXJ0LCB2b2lkIDAsIG4pXTtcbn1cbmZ1bmN0aW9uIHNvcnRCeUluZGV4KGEsIGIpIHtcbiAgaWYgKGEuaW5kZXggPCBiLmluZGV4KSB7XG4gICAgcmV0dXJuIC0xO1xuICB9IGVsc2UgaWYgKGEuaW5kZXggPiBiLmluZGV4KSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5leHBvcnQge1xuICBaRVJPX0lOREVYX0tFWSxcbiAgZ2V0SW5kZXhBYm92ZSxcbiAgZ2V0SW5kZXhCZWxvdyxcbiAgZ2V0SW5kZXhCZXR3ZWVuLFxuICBnZXRJbmRpY2VzLFxuICBnZXRJbmRpY2VzQWJvdmUsXG4gIGdldEluZGljZXNCZWxvdyxcbiAgZ2V0SW5kaWNlc0JldHdlZW4sXG4gIHNvcnRCeUluZGV4LFxuICB2YWxpZGF0ZUluZGV4S2V5XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVvcmRlcmluZy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/reordering/reordering.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/sort.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/sort.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sortById: () => (/* binding */ sortById)\n/* harmony export */ });\nfunction sortById(a, b) {\n  return a.id > b.id ? 1 : -1;\n}\n\n//# sourceMappingURL=sort.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvc29ydC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvc29ydC5tanM/NGI3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBzb3J0QnlJZChhLCBiKSB7XG4gIHJldHVybiBhLmlkID4gYi5pZCA/IDEgOiAtMTtcbn1cbmV4cG9ydCB7XG4gIHNvcnRCeUlkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c29ydC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/sort.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/storage.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/storage.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearLocalStorage: () => (/* binding */ clearLocalStorage),\n/* harmony export */   clearSessionStorage: () => (/* binding */ clearSessionStorage),\n/* harmony export */   deleteFromLocalStorage: () => (/* binding */ deleteFromLocalStorage),\n/* harmony export */   deleteFromSessionStorage: () => (/* binding */ deleteFromSessionStorage),\n/* harmony export */   getFromLocalStorage: () => (/* binding */ getFromLocalStorage),\n/* harmony export */   getFromSessionStorage: () => (/* binding */ getFromSessionStorage),\n/* harmony export */   setInLocalStorage: () => (/* binding */ setInLocalStorage),\n/* harmony export */   setInSessionStorage: () => (/* binding */ setInSessionStorage)\n/* harmony export */ });\nfunction getFromLocalStorage(key) {\n  try {\n    return localStorage.getItem(key);\n  } catch {\n    return null;\n  }\n}\nfunction setInLocalStorage(key, value) {\n  try {\n    localStorage.setItem(key, value);\n  } catch {\n  }\n}\nfunction deleteFromLocalStorage(key) {\n  try {\n    localStorage.removeItem(key);\n  } catch {\n  }\n}\nfunction clearLocalStorage() {\n  try {\n    localStorage.clear();\n  } catch {\n  }\n}\nfunction getFromSessionStorage(key) {\n  try {\n    return sessionStorage.getItem(key);\n  } catch {\n    return null;\n  }\n}\nfunction setInSessionStorage(key, value) {\n  try {\n    sessionStorage.setItem(key, value);\n  } catch {\n  }\n}\nfunction deleteFromSessionStorage(key) {\n  try {\n    sessionStorage.removeItem(key);\n  } catch {\n  }\n}\nfunction clearSessionStorage() {\n  try {\n    sessionStorage.clear();\n  } catch {\n  }\n}\n\n//# sourceMappingURL=storage.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvc3RvcmFnZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQVVFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvc3RvcmFnZS5tanM/YTc2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBnZXRGcm9tTG9jYWxTdG9yYWdlKGtleSkge1xuICB0cnkge1xuICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuZnVuY3Rpb24gc2V0SW5Mb2NhbFN0b3JhZ2Uoa2V5LCB2YWx1ZSkge1xuICB0cnkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpO1xuICB9IGNhdGNoIHtcbiAgfVxufVxuZnVuY3Rpb24gZGVsZXRlRnJvbUxvY2FsU3RvcmFnZShrZXkpIHtcbiAgdHJ5IHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICB9IGNhdGNoIHtcbiAgfVxufVxuZnVuY3Rpb24gY2xlYXJMb2NhbFN0b3JhZ2UoKSB7XG4gIHRyeSB7XG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gIH0gY2F0Y2gge1xuICB9XG59XG5mdW5jdGlvbiBnZXRGcm9tU2Vzc2lvblN0b3JhZ2Uoa2V5KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmZ1bmN0aW9uIHNldEluU2Vzc2lvblN0b3JhZ2Uoa2V5LCB2YWx1ZSkge1xuICB0cnkge1xuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gIH0gY2F0Y2gge1xuICB9XG59XG5mdW5jdGlvbiBkZWxldGVGcm9tU2Vzc2lvblN0b3JhZ2Uoa2V5KSB7XG4gIHRyeSB7XG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICB9IGNhdGNoIHtcbiAgfVxufVxuZnVuY3Rpb24gY2xlYXJTZXNzaW9uU3RvcmFnZSgpIHtcbiAgdHJ5IHtcbiAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xuICB9IGNhdGNoIHtcbiAgfVxufVxuZXhwb3J0IHtcbiAgY2xlYXJMb2NhbFN0b3JhZ2UsXG4gIGNsZWFyU2Vzc2lvblN0b3JhZ2UsXG4gIGRlbGV0ZUZyb21Mb2NhbFN0b3JhZ2UsXG4gIGRlbGV0ZUZyb21TZXNzaW9uU3RvcmFnZSxcbiAgZ2V0RnJvbUxvY2FsU3RvcmFnZSxcbiAgZ2V0RnJvbVNlc3Npb25TdG9yYWdlLFxuICBzZXRJbkxvY2FsU3RvcmFnZSxcbiAgc2V0SW5TZXNzaW9uU3RvcmFnZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0b3JhZ2UubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/storage.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/throttle.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/throttle.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fpsThrottle: () => (/* binding */ fpsThrottle),\n/* harmony export */   throttleToNextFrame: () => (/* binding */ throttleToNextFrame)\n/* harmony export */ });\nconst isTest = () => typeof process !== \"undefined\" && \"development\" === \"test\" && // @ts-expect-error\n0;\nconst fpsQueue = [];\nconst targetFps = 60;\nconst targetTimePerFrame = Math.ceil(1e3 / targetFps);\nlet frame;\nlet time = 0;\nlet last = 0;\nconst flush = () => {\n  const queue = fpsQueue.splice(0, fpsQueue.length);\n  for (const fn of queue) {\n    fn();\n  }\n};\nfunction tick() {\n  if (frame) {\n    return;\n  }\n  const now = Date.now();\n  const elapsed = now - last;\n  if (time + elapsed < targetTimePerFrame) {\n    frame = requestAnimationFrame(() => {\n      frame = void 0;\n      tick();\n    });\n    return;\n  }\n  frame = requestAnimationFrame(() => {\n    frame = void 0;\n    last = now;\n    time = Math.min(time + elapsed - targetTimePerFrame, targetTimePerFrame * 10);\n    flush();\n  });\n}\nlet started = false;\nfunction fpsThrottle(fn) {\n  if (isTest()) {\n    return fn;\n  }\n  return () => {\n    if (fpsQueue.includes(fn)) {\n      return;\n    }\n    fpsQueue.push(fn);\n    if (!started) {\n      started = true;\n      last = Date.now() - targetTimePerFrame - 1;\n    }\n    tick();\n  };\n}\nfunction throttleToNextFrame(fn) {\n  if (isTest()) {\n    fn();\n    return () => {\n    };\n  }\n  if (!fpsQueue.includes(fn)) {\n    fpsQueue.push(fn);\n    if (!started) {\n      started = true;\n      last = Date.now() - targetTimePerFrame - 1;\n    }\n    tick();\n  }\n  return () => {\n    const index = fpsQueue.indexOf(fn);\n    if (index > -1) {\n      fpsQueue.splice(index, 1);\n    }\n  };\n}\n\n//# sourceMappingURL=throttle.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvdGhyb3R0bGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsdURBQXVELGFBQW9CO0FBQzNFLENBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvdGhyb3R0bGUubWpzPzY3ZjUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaXNUZXN0ID0gKCkgPT4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwidGVzdFwiICYmIC8vIEB0cy1leHBlY3QtZXJyb3JcbiFnbG9iYWxUaGlzLl9fRk9SQ0VfUkFGX0lOX1RFU1RTX187XG5jb25zdCBmcHNRdWV1ZSA9IFtdO1xuY29uc3QgdGFyZ2V0RnBzID0gNjA7XG5jb25zdCB0YXJnZXRUaW1lUGVyRnJhbWUgPSBNYXRoLmNlaWwoMWUzIC8gdGFyZ2V0RnBzKTtcbmxldCBmcmFtZTtcbmxldCB0aW1lID0gMDtcbmxldCBsYXN0ID0gMDtcbmNvbnN0IGZsdXNoID0gKCkgPT4ge1xuICBjb25zdCBxdWV1ZSA9IGZwc1F1ZXVlLnNwbGljZSgwLCBmcHNRdWV1ZS5sZW5ndGgpO1xuICBmb3IgKGNvbnN0IGZuIG9mIHF1ZXVlKSB7XG4gICAgZm4oKTtcbiAgfVxufTtcbmZ1bmN0aW9uIHRpY2soKSB7XG4gIGlmIChmcmFtZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICBjb25zdCBlbGFwc2VkID0gbm93IC0gbGFzdDtcbiAgaWYgKHRpbWUgKyBlbGFwc2VkIDwgdGFyZ2V0VGltZVBlckZyYW1lKSB7XG4gICAgZnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgZnJhbWUgPSB2b2lkIDA7XG4gICAgICB0aWNrKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICBmcmFtZSA9IHZvaWQgMDtcbiAgICBsYXN0ID0gbm93O1xuICAgIHRpbWUgPSBNYXRoLm1pbih0aW1lICsgZWxhcHNlZCAtIHRhcmdldFRpbWVQZXJGcmFtZSwgdGFyZ2V0VGltZVBlckZyYW1lICogMTApO1xuICAgIGZsdXNoKCk7XG4gIH0pO1xufVxubGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIGZwc1Rocm90dGxlKGZuKSB7XG4gIGlmIChpc1Rlc3QoKSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuICByZXR1cm4gKCkgPT4ge1xuICAgIGlmIChmcHNRdWV1ZS5pbmNsdWRlcyhmbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZnBzUXVldWUucHVzaChmbik7XG4gICAgaWYgKCFzdGFydGVkKSB7XG4gICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgIGxhc3QgPSBEYXRlLm5vdygpIC0gdGFyZ2V0VGltZVBlckZyYW1lIC0gMTtcbiAgICB9XG4gICAgdGljaygpO1xuICB9O1xufVxuZnVuY3Rpb24gdGhyb3R0bGVUb05leHRGcmFtZShmbikge1xuICBpZiAoaXNUZXN0KCkpIHtcbiAgICBmbigpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgfTtcbiAgfVxuICBpZiAoIWZwc1F1ZXVlLmluY2x1ZGVzKGZuKSkge1xuICAgIGZwc1F1ZXVlLnB1c2goZm4pO1xuICAgIGlmICghc3RhcnRlZCkge1xuICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICBsYXN0ID0gRGF0ZS5ub3coKSAtIHRhcmdldFRpbWVQZXJGcmFtZSAtIDE7XG4gICAgfVxuICAgIHRpY2soKTtcbiAgfVxuICByZXR1cm4gKCkgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gZnBzUXVldWUuaW5kZXhPZihmbik7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIGZwc1F1ZXVlLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICB9O1xufVxuZXhwb3J0IHtcbiAgZnBzVGhyb3R0bGUsXG4gIHRocm90dGxlVG9OZXh0RnJhbWVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aHJvdHRsZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/throttle.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/timers.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/timers.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Timers: () => (/* binding */ Timers)\n/* harmony export */ });\nclass Timers {\n  timeouts = [];\n  intervals = [];\n  rafs = [];\n  /** @public */\n  setTimeout(handler, timeout, ...args) {\n    const id = window.setTimeout(handler, timeout, args);\n    this.timeouts.push(id);\n    return id;\n  }\n  /** @public */\n  setInterval(handler, timeout, ...args) {\n    const id = window.setInterval(handler, timeout, args);\n    this.intervals.push(id);\n    return id;\n  }\n  /** @public */\n  requestAnimationFrame(callback) {\n    const id = window.requestAnimationFrame(callback);\n    this.rafs.push(id);\n    return id;\n  }\n  /** @public */\n  dispose() {\n    this.timeouts.forEach((id) => clearTimeout(id));\n    this.intervals.forEach((id) => clearInterval(id));\n    this.rafs.forEach((id) => cancelAnimationFrame(id));\n    this.timeouts.length = 0;\n    this.intervals.length = 0;\n    this.rafs.length = 0;\n  }\n}\n\n//# sourceMappingURL=timers.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvdGltZXJzLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvdGltZXJzLm1qcz85ZmU5Il0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFRpbWVycyB7XG4gIHRpbWVvdXRzID0gW107XG4gIGludGVydmFscyA9IFtdO1xuICByYWZzID0gW107XG4gIC8qKiBAcHVibGljICovXG4gIHNldFRpbWVvdXQoaGFuZGxlciwgdGltZW91dCwgLi4uYXJncykge1xuICAgIGNvbnN0IGlkID0gd2luZG93LnNldFRpbWVvdXQoaGFuZGxlciwgdGltZW91dCwgYXJncyk7XG4gICAgdGhpcy50aW1lb3V0cy5wdXNoKGlkKTtcbiAgICByZXR1cm4gaWQ7XG4gIH1cbiAgLyoqIEBwdWJsaWMgKi9cbiAgc2V0SW50ZXJ2YWwoaGFuZGxlciwgdGltZW91dCwgLi4uYXJncykge1xuICAgIGNvbnN0IGlkID0gd2luZG93LnNldEludGVydmFsKGhhbmRsZXIsIHRpbWVvdXQsIGFyZ3MpO1xuICAgIHRoaXMuaW50ZXJ2YWxzLnB1c2goaWQpO1xuICAgIHJldHVybiBpZDtcbiAgfVxuICAvKiogQHB1YmxpYyAqL1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spIHtcbiAgICBjb25zdCBpZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgIHRoaXMucmFmcy5wdXNoKGlkKTtcbiAgICByZXR1cm4gaWQ7XG4gIH1cbiAgLyoqIEBwdWJsaWMgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLnRpbWVvdXRzLmZvckVhY2goKGlkKSA9PiBjbGVhclRpbWVvdXQoaWQpKTtcbiAgICB0aGlzLmludGVydmFscy5mb3JFYWNoKChpZCkgPT4gY2xlYXJJbnRlcnZhbChpZCkpO1xuICAgIHRoaXMucmFmcy5mb3JFYWNoKChpZCkgPT4gY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpKTtcbiAgICB0aGlzLnRpbWVvdXRzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5pbnRlcnZhbHMubGVuZ3RoID0gMDtcbiAgICB0aGlzLnJhZnMubGVuZ3RoID0gMDtcbiAgfVxufVxuZXhwb3J0IHtcbiAgVGltZXJzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZXJzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/timers.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/value.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/value.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   STRUCTURED_CLONE_OBJECT_PROTOTYPE: () => (/* binding */ STRUCTURED_CLONE_OBJECT_PROTOTYPE),\n/* harmony export */   isDefined: () => (/* binding */ isDefined),\n/* harmony export */   isNativeStructuredClone: () => (/* binding */ isNativeStructuredClone),\n/* harmony export */   isNonNull: () => (/* binding */ isNonNull),\n/* harmony export */   isNonNullish: () => (/* binding */ isNonNullish),\n/* harmony export */   structuredClone: () => (/* binding */ structuredClone)\n/* harmony export */ });\nfunction isDefined(value) {\n  return value !== void 0;\n}\nfunction isNonNull(value) {\n  return value !== null;\n}\nfunction isNonNullish(value) {\n  return value !== null && value !== void 0;\n}\nfunction getStructuredClone() {\n  if (typeof globalThis !== \"undefined\" && globalThis.structuredClone) {\n    return [globalThis.structuredClone, true];\n  }\n  if (typeof global !== \"undefined\" && global.structuredClone) {\n    return [global.structuredClone, true];\n  }\n  if (typeof window !== \"undefined\" && window.structuredClone) {\n    return [window.structuredClone, true];\n  }\n  return [(i) => i ? JSON.parse(JSON.stringify(i)) : i, false];\n}\nconst _structuredClone = getStructuredClone();\nconst structuredClone = _structuredClone[0];\nconst isNativeStructuredClone = _structuredClone[1];\nconst STRUCTURED_CLONE_OBJECT_PROTOTYPE = Object.getPrototypeOf(structuredClone({}));\n\n//# sourceMappingURL=value.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvdmFsdWUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtGQUFrRjtBQVFoRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL3ZhbHVlLm1qcz9mZWFkIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGlzRGVmaW5lZCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IHZvaWQgMDtcbn1cbmZ1bmN0aW9uIGlzTm9uTnVsbCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGw7XG59XG5mdW5jdGlvbiBpc05vbk51bGxpc2godmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDA7XG59XG5mdW5jdGlvbiBnZXRTdHJ1Y3R1cmVkQ2xvbmUoKSB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWxUaGlzLnN0cnVjdHVyZWRDbG9uZSkge1xuICAgIHJldHVybiBbZ2xvYmFsVGhpcy5zdHJ1Y3R1cmVkQ2xvbmUsIHRydWVdO1xuICB9XG4gIGlmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5zdHJ1Y3R1cmVkQ2xvbmUpIHtcbiAgICByZXR1cm4gW2dsb2JhbC5zdHJ1Y3R1cmVkQ2xvbmUsIHRydWVdO1xuICB9XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5zdHJ1Y3R1cmVkQ2xvbmUpIHtcbiAgICByZXR1cm4gW3dpbmRvdy5zdHJ1Y3R1cmVkQ2xvbmUsIHRydWVdO1xuICB9XG4gIHJldHVybiBbKGkpID0+IGkgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGkpKSA6IGksIGZhbHNlXTtcbn1cbmNvbnN0IF9zdHJ1Y3R1cmVkQ2xvbmUgPSBnZXRTdHJ1Y3R1cmVkQ2xvbmUoKTtcbmNvbnN0IHN0cnVjdHVyZWRDbG9uZSA9IF9zdHJ1Y3R1cmVkQ2xvbmVbMF07XG5jb25zdCBpc05hdGl2ZVN0cnVjdHVyZWRDbG9uZSA9IF9zdHJ1Y3R1cmVkQ2xvbmVbMV07XG5jb25zdCBTVFJVQ1RVUkVEX0NMT05FX09CSkVDVF9QUk9UT1RZUEUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yoc3RydWN0dXJlZENsb25lKHt9KSk7XG5leHBvcnQge1xuICBTVFJVQ1RVUkVEX0NMT05FX09CSkVDVF9QUk9UT1RZUEUsXG4gIGlzRGVmaW5lZCxcbiAgaXNOYXRpdmVTdHJ1Y3R1cmVkQ2xvbmUsXG4gIGlzTm9uTnVsbCxcbiAgaXNOb25OdWxsaXNoLFxuICBzdHJ1Y3R1cmVkQ2xvbmVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12YWx1ZS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/value.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/warnDeprecatedGetter.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@tldraw/utils/dist-esm/lib/warnDeprecatedGetter.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   warnDeprecatedGetter: () => (/* binding */ warnDeprecatedGetter)\n/* harmony export */ });\nconst warnedNames = /* @__PURE__ */ new Set();\nfunction warnDeprecatedGetter(name) {\n  if (warnedNames.has(name))\n    return;\n  warnedNames.add(name);\n  console.warn(\n    `Using '${name}' is deprecated and will be removed in the near future. Please refactor to use 'get${name[0].toLocaleUpperCase()}${name.slice(\n      1\n    )}' instead.`\n  );\n}\n\n//# sourceMappingURL=warnDeprecatedGetter.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy91dGlscy9kaXN0LWVzbS9saWIvd2FybkRlcHJlY2F0ZWRHZXR0ZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLEtBQUsscUZBQXFGLDRCQUE0QixFQUFFO0FBQ3RJO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhdy1hLXVpLy4vbm9kZV9tb2R1bGVzL0B0bGRyYXcvdXRpbHMvZGlzdC1lc20vbGliL3dhcm5EZXByZWNhdGVkR2V0dGVyLm1qcz8xMjg3Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHdhcm5lZE5hbWVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbmZ1bmN0aW9uIHdhcm5EZXByZWNhdGVkR2V0dGVyKG5hbWUpIHtcbiAgaWYgKHdhcm5lZE5hbWVzLmhhcyhuYW1lKSlcbiAgICByZXR1cm47XG4gIHdhcm5lZE5hbWVzLmFkZChuYW1lKTtcbiAgY29uc29sZS53YXJuKFxuICAgIGBVc2luZyAnJHtuYW1lfScgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZWFyIGZ1dHVyZS4gUGxlYXNlIHJlZmFjdG9yIHRvIHVzZSAnZ2V0JHtuYW1lWzBdLnRvTG9jYWxlVXBwZXJDYXNlKCl9JHtuYW1lLnNsaWNlKFxuICAgICAgMVxuICAgICl9JyBpbnN0ZWFkLmBcbiAgKTtcbn1cbmV4cG9ydCB7XG4gIHdhcm5EZXByZWNhdGVkR2V0dGVyXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2FybkRlcHJlY2F0ZWRHZXR0ZXIubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/utils/dist-esm/lib/warnDeprecatedGetter.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@tldraw/validate/dist-esm/index.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrayOfValidator: () => (/* reexport safe */ _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.ArrayOfValidator),\n/* harmony export */   DictValidator: () => (/* reexport safe */ _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.DictValidator),\n/* harmony export */   ObjectValidator: () => (/* reexport safe */ _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.ObjectValidator),\n/* harmony export */   T: () => (/* reexport module object */ _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_0__),\n/* harmony export */   UnionValidator: () => (/* reexport safe */ _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.UnionValidator),\n/* harmony export */   Validator: () => (/* reexport safe */ _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_0__.Validator)\n/* harmony export */ });\n/* harmony import */ var _lib_validation_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/validation.mjs */ \"(ssr)/./node_modules/@tldraw/validate/dist-esm/lib/validation.mjs\");\n\n\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy92YWxpZGF0ZS9kaXN0LWVzbS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEwQztBQU9aO0FBUTVCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy92YWxpZGF0ZS9kaXN0LWVzbS9pbmRleC5tanM/MTIzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBUIGZyb20gXCIuL2xpYi92YWxpZGF0aW9uLm1qc1wiO1xuaW1wb3J0IHtcbiAgQXJyYXlPZlZhbGlkYXRvcixcbiAgRGljdFZhbGlkYXRvcixcbiAgT2JqZWN0VmFsaWRhdG9yLFxuICBVbmlvblZhbGlkYXRvcixcbiAgVmFsaWRhdG9yXG59IGZyb20gXCIuL2xpYi92YWxpZGF0aW9uLm1qc1wiO1xuZXhwb3J0IHtcbiAgQXJyYXlPZlZhbGlkYXRvcixcbiAgRGljdFZhbGlkYXRvcixcbiAgT2JqZWN0VmFsaWRhdG9yLFxuICBULFxuICBVbmlvblZhbGlkYXRvcixcbiAgVmFsaWRhdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/validate/dist-esm/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@tldraw/validate/dist-esm/lib/validation.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@tldraw/validate/dist-esm/lib/validation.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrayOfValidator: () => (/* binding */ ArrayOfValidator),\n/* harmony export */   DictValidator: () => (/* binding */ DictValidator),\n/* harmony export */   ObjectValidator: () => (/* binding */ ObjectValidator),\n/* harmony export */   UnionValidator: () => (/* binding */ UnionValidator),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   Validator: () => (/* binding */ Validator),\n/* harmony export */   any: () => (/* binding */ any),\n/* harmony export */   array: () => (/* binding */ array),\n/* harmony export */   arrayOf: () => (/* binding */ arrayOf),\n/* harmony export */   bigint: () => (/* binding */ bigint),\n/* harmony export */   boolean: () => (/* binding */ boolean),\n/* harmony export */   dict: () => (/* binding */ dict),\n/* harmony export */   indexKey: () => (/* binding */ indexKey),\n/* harmony export */   integer: () => (/* binding */ integer),\n/* harmony export */   jsonDict: () => (/* binding */ jsonDict),\n/* harmony export */   jsonValue: () => (/* binding */ jsonValue),\n/* harmony export */   linkUrl: () => (/* binding */ linkUrl),\n/* harmony export */   literal: () => (/* binding */ literal),\n/* harmony export */   literalEnum: () => (/* binding */ literalEnum),\n/* harmony export */   model: () => (/* binding */ model),\n/* harmony export */   nonZeroInteger: () => (/* binding */ nonZeroInteger),\n/* harmony export */   nonZeroNumber: () => (/* binding */ nonZeroNumber),\n/* harmony export */   nullable: () => (/* binding */ nullable),\n/* harmony export */   number: () => (/* binding */ number),\n/* harmony export */   numberUnion: () => (/* binding */ numberUnion),\n/* harmony export */   object: () => (/* binding */ object),\n/* harmony export */   optional: () => (/* binding */ optional),\n/* harmony export */   positiveInteger: () => (/* binding */ positiveInteger),\n/* harmony export */   positiveNumber: () => (/* binding */ positiveNumber),\n/* harmony export */   setEnum: () => (/* binding */ setEnum),\n/* harmony export */   srcUrl: () => (/* binding */ srcUrl),\n/* harmony export */   string: () => (/* binding */ string),\n/* harmony export */   union: () => (/* binding */ union),\n/* harmony export */   unknown: () => (/* binding */ unknown),\n/* harmony export */   unknownObject: () => (/* binding */ unknownObject)\n/* harmony export */ });\n/* harmony import */ var _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/utils */ \"(ssr)/./node_modules/@tldraw/utils/dist-esm/index.mjs\");\n\nfunction formatPath(path) {\n  if (!path.length) {\n    return null;\n  }\n  let formattedPath = \"\";\n  for (const item of path) {\n    if (typeof item === \"number\") {\n      formattedPath += `.${item}`;\n    } else if (item.startsWith(\"(\")) {\n      if (formattedPath.endsWith(\")\")) {\n        formattedPath = `${formattedPath.slice(0, -1)}, ${item.slice(1)}`;\n      } else {\n        formattedPath += item;\n      }\n    } else {\n      formattedPath += `.${item}`;\n    }\n  }\n  formattedPath = formattedPath.replace(/id = [^,]+, /, \"\").replace(/id = [^)]+/, \"\");\n  if (formattedPath.startsWith(\".\")) {\n    return formattedPath.slice(1);\n  }\n  return formattedPath;\n}\nclass ValidationError extends Error {\n  constructor(rawMessage, path = []) {\n    const formattedPath = formatPath(path);\n    const indentedMessage = rawMessage.split(\"\\n\").map((line, i) => i === 0 ? line : `  ${line}`).join(\"\\n\");\n    super(path ? `At ${formattedPath}: ${indentedMessage}` : indentedMessage);\n    this.rawMessage = rawMessage;\n    this.path = path;\n  }\n  name = \"ValidationError\";\n}\nfunction prefixError(path, fn) {\n  try {\n    return fn();\n  } catch (err) {\n    if (err instanceof ValidationError) {\n      throw new ValidationError(err.rawMessage, [path, ...err.path]);\n    }\n    throw new ValidationError(err.toString(), [path]);\n  }\n}\nfunction typeToString(value) {\n  if (value === null)\n    return \"null\";\n  if (Array.isArray(value))\n    return \"an array\";\n  const type = typeof value;\n  switch (type) {\n    case \"bigint\":\n    case \"boolean\":\n    case \"function\":\n    case \"number\":\n    case \"string\":\n    case \"symbol\":\n      return `a ${type}`;\n    case \"object\":\n      return `an ${type}`;\n    case \"undefined\":\n      return \"undefined\";\n    default:\n      (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.exhaustiveSwitchError)(type);\n  }\n}\nclass Validator {\n  constructor(validationFn, validateUsingKnownGoodVersionFn) {\n    this.validationFn = validationFn;\n    this.validateUsingKnownGoodVersionFn = validateUsingKnownGoodVersionFn;\n  }\n  /**\n   * Asserts that the passed value is of the correct type and returns it. The returned value is\n   * guaranteed to be referentially equal to the passed value.\n   */\n  validate(value) {\n    const validated = this.validationFn(value);\n    if ( true && !Object.is(value, validated)) {\n      throw new ValidationError(\"Validator functions must return the same value they were passed\");\n    }\n    return validated;\n  }\n  validateUsingKnownGoodVersion(knownGoodValue, newValue) {\n    if (Object.is(knownGoodValue, newValue)) {\n      return knownGoodValue;\n    }\n    if (this.validateUsingKnownGoodVersionFn) {\n      return this.validateUsingKnownGoodVersionFn(knownGoodValue, newValue);\n    }\n    return this.validate(newValue);\n  }\n  /** Checks that the passed value is of the correct type. */\n  isValid(value) {\n    try {\n      this.validate(value);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * Returns a new validator that also accepts null or undefined. The resulting value will always be\n   * null.\n   */\n  nullable() {\n    return nullable(this);\n  }\n  /**\n   * Returns a new validator that also accepts null or undefined. The resulting value will always be\n   * null.\n   */\n  optional() {\n    return optional(this);\n  }\n  /**\n   * Refine this validation to a new type. The passed-in validation function should throw an error\n   * if the value can't be converted to the new type, or return the new type otherwise.\n   */\n  refine(otherValidationFn) {\n    return new Validator(\n      (value) => {\n        return otherValidationFn(this.validate(value));\n      },\n      (knownGoodValue, newValue) => {\n        const validated = this.validateUsingKnownGoodVersion(knownGoodValue, newValue);\n        if (Object.is(knownGoodValue, validated)) {\n          return knownGoodValue;\n        }\n        return otherValidationFn(validated);\n      }\n    );\n  }\n  check(nameOrCheckFn, checkFn) {\n    if (typeof nameOrCheckFn === \"string\") {\n      return this.refine((value) => {\n        prefixError(`(check ${nameOrCheckFn})`, () => checkFn(value));\n        return value;\n      });\n    } else {\n      return this.refine((value) => {\n        nameOrCheckFn(value);\n        return value;\n      });\n    }\n  }\n}\nclass ArrayOfValidator extends Validator {\n  constructor(itemValidator) {\n    super(\n      (value) => {\n        const arr = array.validate(value);\n        for (let i = 0; i < arr.length; i++) {\n          prefixError(i, () => itemValidator.validate(arr[i]));\n        }\n        return arr;\n      },\n      (knownGoodValue, newValue) => {\n        if (!itemValidator.validateUsingKnownGoodVersion)\n          return this.validate(newValue);\n        const arr = array.validate(newValue);\n        let isDifferent = knownGoodValue.length !== arr.length;\n        for (let i = 0; i < arr.length; i++) {\n          const item = arr[i];\n          if (i >= knownGoodValue.length) {\n            isDifferent = true;\n            prefixError(i, () => itemValidator.validate(item));\n            continue;\n          }\n          if (Object.is(knownGoodValue[i], item)) {\n            continue;\n          }\n          const checkedItem = prefixError(\n            i,\n            () => itemValidator.validateUsingKnownGoodVersion(knownGoodValue[i], item)\n          );\n          if (!Object.is(checkedItem, knownGoodValue[i])) {\n            isDifferent = true;\n          }\n        }\n        return isDifferent ? newValue : knownGoodValue;\n      }\n    );\n    this.itemValidator = itemValidator;\n  }\n  nonEmpty() {\n    return this.check((value) => {\n      if (value.length === 0) {\n        throw new ValidationError(\"Expected a non-empty array\");\n      }\n    });\n  }\n  lengthGreaterThan1() {\n    return this.check((value) => {\n      if (value.length <= 1) {\n        throw new ValidationError(\"Expected an array with length greater than 1\");\n      }\n    });\n  }\n}\nclass ObjectValidator extends Validator {\n  constructor(config, shouldAllowUnknownProperties = false) {\n    super(\n      (object2) => {\n        if (typeof object2 !== \"object\" || object2 === null) {\n          throw new ValidationError(`Expected object, got ${typeToString(object2)}`);\n        }\n        for (const [key, validator] of Object.entries(config)) {\n          prefixError(key, () => {\n            ;\n            validator.validate((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(object2, key));\n          });\n        }\n        if (!shouldAllowUnknownProperties) {\n          for (const key of Object.keys(object2)) {\n            if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(config, key)) {\n              throw new ValidationError(`Unexpected property`, [key]);\n            }\n          }\n        }\n        return object2;\n      },\n      (knownGoodValue, newValue) => {\n        if (typeof newValue !== \"object\" || newValue === null) {\n          throw new ValidationError(`Expected object, got ${typeToString(newValue)}`);\n        }\n        let isDifferent = false;\n        for (const [key, validator] of Object.entries(config)) {\n          const prev = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(knownGoodValue, key);\n          const next = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(newValue, key);\n          if (Object.is(prev, next)) {\n            continue;\n          }\n          const checked = prefixError(key, () => {\n            const validatable = validator;\n            if (validatable.validateUsingKnownGoodVersion) {\n              return validatable.validateUsingKnownGoodVersion(prev, next);\n            } else {\n              return validatable.validate(next);\n            }\n          });\n          if (!Object.is(checked, prev)) {\n            isDifferent = true;\n          }\n        }\n        if (!shouldAllowUnknownProperties) {\n          for (const key of Object.keys(newValue)) {\n            if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(config, key)) {\n              throw new ValidationError(`Unexpected property`, [key]);\n            }\n          }\n        }\n        for (const key of Object.keys(knownGoodValue)) {\n          if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(newValue, key)) {\n            isDifferent = true;\n            break;\n          }\n        }\n        return isDifferent ? newValue : knownGoodValue;\n      }\n    );\n    this.config = config;\n    this.shouldAllowUnknownProperties = shouldAllowUnknownProperties;\n  }\n  allowUnknownProperties() {\n    return new ObjectValidator(this.config, true);\n  }\n  /**\n   * Extend an object validator by adding additional properties.\n   *\n   * @example\n   *\n   * ```ts\n   * const animalValidator = T.object({\n   * \tname: T.string,\n   * })\n   * const catValidator = animalValidator.extend({\n   * \tmeowVolume: T.number,\n   * })\n   * ```\n   */\n  extend(extension) {\n    return new ObjectValidator({ ...this.config, ...extension });\n  }\n}\nclass UnionValidator extends Validator {\n  constructor(key, config, unknownValueValidation, useNumberKeys) {\n    super(\n      (input) => {\n        this.expectObject(input);\n        const { matchingSchema, variant } = this.getMatchingSchemaAndVariant(input);\n        if (matchingSchema === void 0) {\n          return this.unknownValueValidation(input, variant);\n        }\n        return prefixError(`(${key} = ${variant})`, () => matchingSchema.validate(input));\n      },\n      (prevValue, newValue) => {\n        this.expectObject(newValue);\n        this.expectObject(prevValue);\n        const { matchingSchema, variant } = this.getMatchingSchemaAndVariant(newValue);\n        if (matchingSchema === void 0) {\n          return this.unknownValueValidation(newValue, variant);\n        }\n        if ((0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(prevValue, key) !== (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(newValue, key)) {\n          return prefixError(`(${key} = ${variant})`, () => matchingSchema.validate(newValue));\n        }\n        return prefixError(`(${key} = ${variant})`, () => {\n          if (matchingSchema.validateUsingKnownGoodVersion) {\n            return matchingSchema.validateUsingKnownGoodVersion(prevValue, newValue);\n          } else {\n            return matchingSchema.validate(newValue);\n          }\n        });\n      }\n    );\n    this.key = key;\n    this.config = config;\n    this.unknownValueValidation = unknownValueValidation;\n    this.useNumberKeys = useNumberKeys;\n  }\n  expectObject(value) {\n    if (typeof value !== \"object\" || value === null) {\n      throw new ValidationError(`Expected an object, got ${typeToString(value)}`, []);\n    }\n  }\n  getMatchingSchemaAndVariant(object2) {\n    const variant = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(object2, this.key);\n    if (!this.useNumberKeys && typeof variant !== \"string\") {\n      throw new ValidationError(\n        `Expected a string for key \"${this.key}\", got ${typeToString(variant)}`\n      );\n    } else if (this.useNumberKeys && !Number.isFinite(Number(variant))) {\n      throw new ValidationError(`Expected a number for key \"${this.key}\", got \"${variant}\"`);\n    }\n    const matchingSchema = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(this.config, variant) ? this.config[variant] : void 0;\n    return { matchingSchema, variant };\n  }\n  validateUnknownVariants(unknownValueValidation) {\n    return new UnionValidator(this.key, this.config, unknownValueValidation, this.useNumberKeys);\n  }\n}\nclass DictValidator extends Validator {\n  constructor(keyValidator, valueValidator) {\n    super(\n      (object2) => {\n        if (typeof object2 !== \"object\" || object2 === null) {\n          throw new ValidationError(`Expected object, got ${typeToString(object2)}`);\n        }\n        for (const [key, value] of Object.entries(object2)) {\n          prefixError(key, () => {\n            keyValidator.validate(key);\n            valueValidator.validate(value);\n          });\n        }\n        return object2;\n      },\n      (knownGoodValue, newValue) => {\n        if (typeof newValue !== \"object\" || newValue === null) {\n          throw new ValidationError(`Expected object, got ${typeToString(newValue)}`);\n        }\n        let isDifferent = false;\n        for (const [key, value] of Object.entries(newValue)) {\n          if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(knownGoodValue, key)) {\n            isDifferent = true;\n            prefixError(key, () => {\n              keyValidator.validate(key);\n              valueValidator.validate(value);\n            });\n            continue;\n          }\n          const prev = (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.getOwnProperty)(knownGoodValue, key);\n          const next = value;\n          if (Object.is(prev, next)) {\n            continue;\n          }\n          const checked = prefixError(key, () => {\n            if (valueValidator.validateUsingKnownGoodVersion) {\n              return valueValidator.validateUsingKnownGoodVersion(prev, next);\n            } else {\n              return valueValidator.validate(next);\n            }\n          });\n          if (!Object.is(checked, prev)) {\n            isDifferent = true;\n          }\n        }\n        for (const key of Object.keys(knownGoodValue)) {\n          if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(newValue, key)) {\n            isDifferent = true;\n            break;\n          }\n        }\n        return isDifferent ? newValue : knownGoodValue;\n      }\n    );\n    this.keyValidator = keyValidator;\n    this.valueValidator = valueValidator;\n  }\n}\nfunction typeofValidator(type) {\n  return new Validator((value) => {\n    if (typeof value !== type) {\n      throw new ValidationError(`Expected ${type}, got ${typeToString(value)}`);\n    }\n    return value;\n  });\n}\nconst unknown = new Validator((value) => value);\nconst any = new Validator((value) => value);\nconst string = typeofValidator(\"string\");\nconst number = typeofValidator(\"number\").check((number2) => {\n  if (Number.isNaN(number2)) {\n    throw new ValidationError(\"Expected a number, got NaN\");\n  }\n  if (!Number.isFinite(number2)) {\n    throw new ValidationError(`Expected a finite number, got ${number2}`);\n  }\n});\nconst positiveNumber = number.check((value) => {\n  if (value < 0)\n    throw new ValidationError(`Expected a positive number, got ${value}`);\n});\nconst nonZeroNumber = number.check((value) => {\n  if (value <= 0)\n    throw new ValidationError(`Expected a non-zero positive number, got ${value}`);\n});\nconst integer = number.check((value) => {\n  if (!Number.isInteger(value))\n    throw new ValidationError(`Expected an integer, got ${value}`);\n});\nconst positiveInteger = integer.check((value) => {\n  if (value < 0)\n    throw new ValidationError(`Expected a positive integer, got ${value}`);\n});\nconst nonZeroInteger = integer.check((value) => {\n  if (value <= 0)\n    throw new ValidationError(`Expected a non-zero positive integer, got ${value}`);\n});\nconst boolean = typeofValidator(\"boolean\");\nconst bigint = typeofValidator(\"bigint\");\nfunction literal(expectedValue) {\n  return new Validator((actualValue) => {\n    if (actualValue !== expectedValue) {\n      throw new ValidationError(`Expected ${expectedValue}, got ${JSON.stringify(actualValue)}`);\n    }\n    return expectedValue;\n  });\n}\nconst array = new Validator((value) => {\n  if (!Array.isArray(value)) {\n    throw new ValidationError(`Expected an array, got ${typeToString(value)}`);\n  }\n  return value;\n});\nfunction arrayOf(itemValidator) {\n  return new ArrayOfValidator(itemValidator);\n}\nconst unknownObject = new Validator((value) => {\n  if (typeof value !== \"object\" || value === null) {\n    throw new ValidationError(`Expected object, got ${typeToString(value)}`);\n  }\n  return value;\n});\nfunction object(config) {\n  return new ObjectValidator(config);\n}\nfunction isPlainObject(value) {\n  return typeof value === \"object\" && value !== null && (Object.getPrototypeOf(value) === Object.prototype || Object.getPrototypeOf(value) === null || Object.getPrototypeOf(value) === _tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.STRUCTURED_CLONE_OBJECT_PROTOTYPE);\n}\nfunction isValidJson(value) {\n  if (value === null || typeof value === \"number\" || typeof value === \"string\" || typeof value === \"boolean\") {\n    return true;\n  }\n  if (Array.isArray(value)) {\n    return value.every(isValidJson);\n  }\n  if (isPlainObject(value)) {\n    return Object.values(value).every(isValidJson);\n  }\n  return false;\n}\nconst jsonValue = new Validator(\n  (value) => {\n    if (isValidJson(value)) {\n      return value;\n    }\n    throw new ValidationError(`Expected json serializable value, got ${typeof value}`);\n  },\n  (knownGoodValue, newValue) => {\n    if (Array.isArray(knownGoodValue) && Array.isArray(newValue)) {\n      let isDifferent = knownGoodValue.length !== newValue.length;\n      for (let i = 0; i < newValue.length; i++) {\n        if (i >= knownGoodValue.length) {\n          isDifferent = true;\n          jsonValue.validate(newValue[i]);\n          continue;\n        }\n        const prev = knownGoodValue[i];\n        const next = newValue[i];\n        if (Object.is(prev, next)) {\n          continue;\n        }\n        const checked = jsonValue.validateUsingKnownGoodVersion(prev, next);\n        if (!Object.is(checked, prev)) {\n          isDifferent = true;\n        }\n      }\n      return isDifferent ? newValue : knownGoodValue;\n    } else if (isPlainObject(knownGoodValue) && isPlainObject(newValue)) {\n      let isDifferent = false;\n      for (const key of Object.keys(newValue)) {\n        if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(knownGoodValue, key)) {\n          isDifferent = true;\n          jsonValue.validate(newValue[key]);\n          continue;\n        }\n        const prev = knownGoodValue[key];\n        const next = newValue[key];\n        if (Object.is(prev, next)) {\n          continue;\n        }\n        const checked = jsonValue.validateUsingKnownGoodVersion(prev, next);\n        if (!Object.is(checked, prev)) {\n          isDifferent = true;\n        }\n      }\n      for (const key of Object.keys(knownGoodValue)) {\n        if (!(0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(newValue, key)) {\n          isDifferent = true;\n          break;\n        }\n      }\n      return isDifferent ? newValue : knownGoodValue;\n    } else {\n      return jsonValue.validate(newValue);\n    }\n  }\n);\nfunction jsonDict() {\n  return dict(string, jsonValue);\n}\nfunction dict(keyValidator, valueValidator) {\n  return new DictValidator(keyValidator, valueValidator);\n}\nfunction union(key, config) {\n  return new UnionValidator(\n    key,\n    config,\n    (unknownValue, unknownVariant) => {\n      throw new ValidationError(\n        `Expected one of ${Object.keys(config).map((key2) => JSON.stringify(key2)).join(\" or \")}, got ${JSON.stringify(unknownVariant)}`,\n        [key]\n      );\n    },\n    false\n  );\n}\nfunction numberUnion(key, config) {\n  return new UnionValidator(\n    key,\n    config,\n    (unknownValue, unknownVariant) => {\n      throw new ValidationError(\n        `Expected one of ${Object.keys(config).map((key2) => JSON.stringify(key2)).join(\" or \")}, got ${JSON.stringify(unknownVariant)}`,\n        [key]\n      );\n    },\n    true\n  );\n}\nfunction model(name, validator) {\n  return new Validator(\n    (value) => {\n      return prefixError(name, () => validator.validate(value));\n    },\n    (prevValue, newValue) => {\n      return prefixError(name, () => {\n        if (validator.validateUsingKnownGoodVersion) {\n          return validator.validateUsingKnownGoodVersion(prevValue, newValue);\n        } else {\n          return validator.validate(newValue);\n        }\n      });\n    }\n  );\n}\nfunction setEnum(values) {\n  return new Validator((value) => {\n    if (!values.has(value)) {\n      const valuesString = Array.from(values, (value2) => JSON.stringify(value2)).join(\" or \");\n      throw new ValidationError(`Expected ${valuesString}, got ${value}`);\n    }\n    return value;\n  });\n}\nfunction optional(validator) {\n  return new Validator(\n    (value) => {\n      if (value === void 0)\n        return void 0;\n      return validator.validate(value);\n    },\n    (knownGoodValue, newValue) => {\n      if (knownGoodValue === void 0 && newValue === void 0)\n        return void 0;\n      if (newValue === void 0)\n        return void 0;\n      if (validator.validateUsingKnownGoodVersion && knownGoodValue !== void 0) {\n        return validator.validateUsingKnownGoodVersion(knownGoodValue, newValue);\n      }\n      return validator.validate(newValue);\n    }\n  );\n}\nfunction nullable(validator) {\n  return new Validator(\n    (value) => {\n      if (value === null)\n        return null;\n      return validator.validate(value);\n    },\n    (knownGoodValue, newValue) => {\n      if (newValue === null)\n        return null;\n      if (validator.validateUsingKnownGoodVersion && knownGoodValue !== null) {\n        return validator.validateUsingKnownGoodVersion(knownGoodValue, newValue);\n      }\n      return validator.validate(newValue);\n    }\n  );\n}\nfunction literalEnum(...values) {\n  return setEnum(new Set(values));\n}\nfunction parseUrl(str) {\n  try {\n    return new URL(str);\n  } catch (error) {\n    if (str.startsWith(\"/\") || str.startsWith(\"./\")) {\n      try {\n        return new URL(str, \"http://example.com\");\n      } catch (error2) {\n        throw new ValidationError(`Expected a valid url, got ${JSON.stringify(str)}`);\n      }\n    }\n    throw new ValidationError(`Expected a valid url, got ${JSON.stringify(str)}`);\n  }\n}\nconst validLinkProtocols = /* @__PURE__ */ new Set([\"http:\", \"https:\", \"mailto:\"]);\nconst linkUrl = string.check((value) => {\n  if (value === \"\")\n    return;\n  const url = parseUrl(value);\n  if (!validLinkProtocols.has(url.protocol.toLowerCase())) {\n    throw new ValidationError(\n      `Expected a valid url, got ${JSON.stringify(value)} (invalid protocol)`\n    );\n  }\n});\nconst validSrcProtocols = /* @__PURE__ */ new Set([\"http:\", \"https:\", \"data:\"]);\nconst srcUrl = string.check((value) => {\n  if (value === \"\")\n    return;\n  const url = parseUrl(value);\n  if (!validSrcProtocols.has(url.protocol.toLowerCase())) {\n    throw new ValidationError(\n      `Expected a valid url, got ${JSON.stringify(value)} (invalid protocol)`\n    );\n  }\n});\nconst indexKey = string.refine((key) => {\n  try {\n    (0,_tldraw_utils__WEBPACK_IMPORTED_MODULE_0__.validateIndexKey)(key);\n    return key;\n  } catch {\n    throw new ValidationError(`Expected an index key, got ${JSON.stringify(key)}`);\n  }\n});\n\n//# sourceMappingURL=validation.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy92YWxpZGF0ZS9kaXN0LWVzbS9saWIvdmFsaWRhdGlvbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLEtBQUs7QUFDaEMsTUFBTTtBQUNOO0FBQ0EsMkJBQTJCLDJCQUEyQixJQUFJLGNBQWM7QUFDeEUsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ04sMkJBQTJCLEtBQUs7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBGQUEwRixLQUFLO0FBQy9GLHVCQUF1QixjQUFjLElBQUksZ0JBQWdCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsS0FBSztBQUN2QjtBQUNBLG1CQUFtQixLQUFLO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLE1BQU0sb0VBQXFCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxLQUFxQztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGNBQWM7QUFDNUM7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQkFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxzQkFBc0I7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsNkRBQWM7QUFDN0MsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2REFBYztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSw0REFBNEQsdUJBQXVCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2REFBYztBQUNyQyx1QkFBdUIsNkRBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkRBQWM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkRBQWM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDhCQUE4QjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwwQkFBMEI7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLEtBQUssSUFBSSxRQUFRO0FBQ2hELE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMEJBQTBCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLFlBQVksNkRBQWMscUJBQXFCLDZEQUFjO0FBQzdELGlDQUFpQyxLQUFLLElBQUksUUFBUTtBQUNsRDtBQUNBLCtCQUErQixLQUFLLElBQUksUUFBUTtBQUNoRDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELG9CQUFvQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNkRBQWM7QUFDbEM7QUFDQTtBQUNBLHNDQUFzQyxTQUFTLFNBQVMsc0JBQXNCO0FBQzlFO0FBQ0EsTUFBTTtBQUNOLDhEQUE4RCxTQUFTLFVBQVUsUUFBUTtBQUN6RjtBQUNBLDJCQUEyQiw2REFBYztBQUN6QyxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsc0JBQXNCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsNERBQTRELHVCQUF1QjtBQUNuRjtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZEQUFjO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSx1QkFBdUIsNkRBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2REFBYztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLEtBQUssUUFBUSxvQkFBb0I7QUFDN0U7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsUUFBUTtBQUN2RTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsaUVBQWlFLE1BQU07QUFDdkUsQ0FBQztBQUNEO0FBQ0E7QUFDQSwwRUFBMEUsTUFBTTtBQUNoRixDQUFDO0FBQ0Q7QUFDQTtBQUNBLDBEQUEwRCxNQUFNO0FBQ2hFLENBQUM7QUFDRDtBQUNBO0FBQ0Esa0VBQWtFLE1BQU07QUFDeEUsQ0FBQztBQUNEO0FBQ0E7QUFDQSwyRUFBMkUsTUFBTTtBQUNqRixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxjQUFjLFFBQVEsNEJBQTRCO0FBQzlGO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELG9CQUFvQjtBQUM1RTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsb0JBQW9CO0FBQzFFO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3TEFBd0wsNEVBQWlDO0FBQ3pOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxhQUFhO0FBQ3BGLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IscUJBQXFCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxhQUFhLDZEQUFjO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNkRBQWM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixxRUFBcUUsUUFBUSwrQkFBK0I7QUFDdkk7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIscUVBQXFFLFFBQVEsK0JBQStCO0FBQ3ZJO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxhQUFhLFFBQVEsTUFBTTtBQUN2RTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsK0RBQStELG9CQUFvQjtBQUNuRjtBQUNBO0FBQ0EsMkRBQTJELG9CQUFvQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsdUJBQXVCO0FBQzFEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsdUJBQXVCO0FBQzFEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLElBQUksK0RBQWdCO0FBQ3BCO0FBQ0EsSUFBSTtBQUNKLDREQUE0RCxvQkFBb0I7QUFDaEY7QUFDQSxDQUFDO0FBcUNDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3LWEtdWkvLi9ub2RlX21vZHVsZXMvQHRsZHJhdy92YWxpZGF0ZS9kaXN0LWVzbS9saWIvdmFsaWRhdGlvbi5tanM/MzVkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBTVFJVQ1RVUkVEX0NMT05FX09CSkVDVF9QUk9UT1RZUEUsXG4gIGV4aGF1c3RpdmVTd2l0Y2hFcnJvcixcbiAgZ2V0T3duUHJvcGVydHksXG4gIGhhc093blByb3BlcnR5LFxuICB2YWxpZGF0ZUluZGV4S2V5XG59IGZyb20gXCJAdGxkcmF3L3V0aWxzXCI7XG5mdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgpIHtcbiAgaWYgKCFwYXRoLmxlbmd0aCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGxldCBmb3JtYXR0ZWRQYXRoID0gXCJcIjtcbiAgZm9yIChjb25zdCBpdGVtIG9mIHBhdGgpIHtcbiAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGZvcm1hdHRlZFBhdGggKz0gYC4ke2l0ZW19YDtcbiAgICB9IGVsc2UgaWYgKGl0ZW0uc3RhcnRzV2l0aChcIihcIikpIHtcbiAgICAgIGlmIChmb3JtYXR0ZWRQYXRoLmVuZHNXaXRoKFwiKVwiKSkge1xuICAgICAgICBmb3JtYXR0ZWRQYXRoID0gYCR7Zm9ybWF0dGVkUGF0aC5zbGljZSgwLCAtMSl9LCAke2l0ZW0uc2xpY2UoMSl9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcm1hdHRlZFBhdGggKz0gaXRlbTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9ybWF0dGVkUGF0aCArPSBgLiR7aXRlbX1gO1xuICAgIH1cbiAgfVxuICBmb3JtYXR0ZWRQYXRoID0gZm9ybWF0dGVkUGF0aC5yZXBsYWNlKC9pZCA9IFteLF0rLCAvLCBcIlwiKS5yZXBsYWNlKC9pZCA9IFteKV0rLywgXCJcIik7XG4gIGlmIChmb3JtYXR0ZWRQYXRoLnN0YXJ0c1dpdGgoXCIuXCIpKSB7XG4gICAgcmV0dXJuIGZvcm1hdHRlZFBhdGguc2xpY2UoMSk7XG4gIH1cbiAgcmV0dXJuIGZvcm1hdHRlZFBhdGg7XG59XG5jbGFzcyBWYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHJhd01lc3NhZ2UsIHBhdGggPSBbXSkge1xuICAgIGNvbnN0IGZvcm1hdHRlZFBhdGggPSBmb3JtYXRQYXRoKHBhdGgpO1xuICAgIGNvbnN0IGluZGVudGVkTWVzc2FnZSA9IHJhd01lc3NhZ2Uuc3BsaXQoXCJcXG5cIikubWFwKChsaW5lLCBpKSA9PiBpID09PSAwID8gbGluZSA6IGAgICR7bGluZX1gKS5qb2luKFwiXFxuXCIpO1xuICAgIHN1cGVyKHBhdGggPyBgQXQgJHtmb3JtYXR0ZWRQYXRofTogJHtpbmRlbnRlZE1lc3NhZ2V9YCA6IGluZGVudGVkTWVzc2FnZSk7XG4gICAgdGhpcy5yYXdNZXNzYWdlID0gcmF3TWVzc2FnZTtcbiAgICB0aGlzLnBhdGggPSBwYXRoO1xuICB9XG4gIG5hbWUgPSBcIlZhbGlkYXRpb25FcnJvclwiO1xufVxuZnVuY3Rpb24gcHJlZml4RXJyb3IocGF0aCwgZm4pIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZm4oKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihlcnIucmF3TWVzc2FnZSwgW3BhdGgsIC4uLmVyci5wYXRoXSk7XG4gICAgfVxuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoZXJyLnRvU3RyaW5nKCksIFtwYXRoXSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHR5cGVUb1N0cmluZyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT09IG51bGwpXG4gICAgcmV0dXJuIFwibnVsbFwiO1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpXG4gICAgcmV0dXJuIFwiYW4gYXJyYXlcIjtcbiAgY29uc3QgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBcImJpZ2ludFwiOlxuICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgY2FzZSBcIm51bWJlclwiOlxuICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICByZXR1cm4gYGEgJHt0eXBlfWA7XG4gICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgcmV0dXJuIGBhbiAke3R5cGV9YDtcbiAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgZXhoYXVzdGl2ZVN3aXRjaEVycm9yKHR5cGUpO1xuICB9XG59XG5jbGFzcyBWYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uRm4sIHZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uRm4pIHtcbiAgICB0aGlzLnZhbGlkYXRpb25GbiA9IHZhbGlkYXRpb25GbjtcbiAgICB0aGlzLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uRm4gPSB2YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbkZuO1xuICB9XG4gIC8qKlxuICAgKiBBc3NlcnRzIHRoYXQgdGhlIHBhc3NlZCB2YWx1ZSBpcyBvZiB0aGUgY29ycmVjdCB0eXBlIGFuZCByZXR1cm5zIGl0LiBUaGUgcmV0dXJuZWQgdmFsdWUgaXNcbiAgICogZ3VhcmFudGVlZCB0byBiZSByZWZlcmVudGlhbGx5IGVxdWFsIHRvIHRoZSBwYXNzZWQgdmFsdWUuXG4gICAqL1xuICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgIGNvbnN0IHZhbGlkYXRlZCA9IHRoaXMudmFsaWRhdGlvbkZuKHZhbHVlKTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmICFPYmplY3QuaXModmFsdWUsIHZhbGlkYXRlZCkpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJWYWxpZGF0b3IgZnVuY3Rpb25zIG11c3QgcmV0dXJuIHRoZSBzYW1lIHZhbHVlIHRoZXkgd2VyZSBwYXNzZWRcIik7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0ZWQ7XG4gIH1cbiAgdmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24oa25vd25Hb29kVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgaWYgKE9iamVjdC5pcyhrbm93bkdvb2RWYWx1ZSwgbmV3VmFsdWUpKSB7XG4gICAgICByZXR1cm4ga25vd25Hb29kVmFsdWU7XG4gICAgfVxuICAgIGlmICh0aGlzLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uRm4pIHtcbiAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uRm4oa25vd25Hb29kVmFsdWUsIG5ld1ZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmFsaWRhdGUobmV3VmFsdWUpO1xuICB9XG4gIC8qKiBDaGVja3MgdGhhdCB0aGUgcGFzc2VkIHZhbHVlIGlzIG9mIHRoZSBjb3JyZWN0IHR5cGUuICovXG4gIGlzVmFsaWQodmFsdWUpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy52YWxpZGF0ZSh2YWx1ZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgdmFsaWRhdG9yIHRoYXQgYWxzbyBhY2NlcHRzIG51bGwgb3IgdW5kZWZpbmVkLiBUaGUgcmVzdWx0aW5nIHZhbHVlIHdpbGwgYWx3YXlzIGJlXG4gICAqIG51bGwuXG4gICAqL1xuICBudWxsYWJsZSgpIHtcbiAgICByZXR1cm4gbnVsbGFibGUodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgdmFsaWRhdG9yIHRoYXQgYWxzbyBhY2NlcHRzIG51bGwgb3IgdW5kZWZpbmVkLiBUaGUgcmVzdWx0aW5nIHZhbHVlIHdpbGwgYWx3YXlzIGJlXG4gICAqIG51bGwuXG4gICAqL1xuICBvcHRpb25hbCgpIHtcbiAgICByZXR1cm4gb3B0aW9uYWwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFJlZmluZSB0aGlzIHZhbGlkYXRpb24gdG8gYSBuZXcgdHlwZS4gVGhlIHBhc3NlZC1pbiB2YWxpZGF0aW9uIGZ1bmN0aW9uIHNob3VsZCB0aHJvdyBhbiBlcnJvclxuICAgKiBpZiB0aGUgdmFsdWUgY2FuJ3QgYmUgY29udmVydGVkIHRvIHRoZSBuZXcgdHlwZSwgb3IgcmV0dXJuIHRoZSBuZXcgdHlwZSBvdGhlcndpc2UuXG4gICAqL1xuICByZWZpbmUob3RoZXJWYWxpZGF0aW9uRm4pIHtcbiAgICByZXR1cm4gbmV3IFZhbGlkYXRvcihcbiAgICAgICh2YWx1ZSkgPT4ge1xuICAgICAgICByZXR1cm4gb3RoZXJWYWxpZGF0aW9uRm4odGhpcy52YWxpZGF0ZSh2YWx1ZSkpO1xuICAgICAgfSxcbiAgICAgIChrbm93bkdvb2RWYWx1ZSwgbmV3VmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkID0gdGhpcy52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbihrbm93bkdvb2RWYWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICBpZiAoT2JqZWN0LmlzKGtub3duR29vZFZhbHVlLCB2YWxpZGF0ZWQpKSB7XG4gICAgICAgICAgcmV0dXJuIGtub3duR29vZFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdGhlclZhbGlkYXRpb25Gbih2YWxpZGF0ZWQpO1xuICAgICAgfVxuICAgICk7XG4gIH1cbiAgY2hlY2sobmFtZU9yQ2hlY2tGbiwgY2hlY2tGbikge1xuICAgIGlmICh0eXBlb2YgbmFtZU9yQ2hlY2tGbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIHRoaXMucmVmaW5lKCh2YWx1ZSkgPT4ge1xuICAgICAgICBwcmVmaXhFcnJvcihgKGNoZWNrICR7bmFtZU9yQ2hlY2tGbn0pYCwgKCkgPT4gY2hlY2tGbih2YWx1ZSkpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucmVmaW5lKCh2YWx1ZSkgPT4ge1xuICAgICAgICBuYW1lT3JDaGVja0ZuKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5jbGFzcyBBcnJheU9mVmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoaXRlbVZhbGlkYXRvcikge1xuICAgIHN1cGVyKFxuICAgICAgKHZhbHVlKSA9PiB7XG4gICAgICAgIGNvbnN0IGFyciA9IGFycmF5LnZhbGlkYXRlKHZhbHVlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBwcmVmaXhFcnJvcihpLCAoKSA9PiBpdGVtVmFsaWRhdG9yLnZhbGlkYXRlKGFycltpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgICB9LFxuICAgICAgKGtub3duR29vZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIWl0ZW1WYWxpZGF0b3IudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24pXG4gICAgICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGUobmV3VmFsdWUpO1xuICAgICAgICBjb25zdCBhcnIgPSBhcnJheS52YWxpZGF0ZShuZXdWYWx1ZSk7XG4gICAgICAgIGxldCBpc0RpZmZlcmVudCA9IGtub3duR29vZFZhbHVlLmxlbmd0aCAhPT0gYXJyLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gYXJyW2ldO1xuICAgICAgICAgIGlmIChpID49IGtub3duR29vZFZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgcHJlZml4RXJyb3IoaSwgKCkgPT4gaXRlbVZhbGlkYXRvci52YWxpZGF0ZShpdGVtKSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKE9iamVjdC5pcyhrbm93bkdvb2RWYWx1ZVtpXSwgaXRlbSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjaGVja2VkSXRlbSA9IHByZWZpeEVycm9yKFxuICAgICAgICAgICAgaSxcbiAgICAgICAgICAgICgpID0+IGl0ZW1WYWxpZGF0b3IudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24oa25vd25Hb29kVmFsdWVbaV0sIGl0ZW0pXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoIU9iamVjdC5pcyhjaGVja2VkSXRlbSwga25vd25Hb29kVmFsdWVbaV0pKSB7XG4gICAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0RpZmZlcmVudCA/IG5ld1ZhbHVlIDoga25vd25Hb29kVmFsdWU7XG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLml0ZW1WYWxpZGF0b3IgPSBpdGVtVmFsaWRhdG9yO1xuICB9XG4gIG5vbkVtcHR5KCkge1xuICAgIHJldHVybiB0aGlzLmNoZWNrKCh2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFwiRXhwZWN0ZWQgYSBub24tZW1wdHkgYXJyYXlcIik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgbGVuZ3RoR3JlYXRlclRoYW4xKCkge1xuICAgIHJldHVybiB0aGlzLmNoZWNrKCh2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJFeHBlY3RlZCBhbiBhcnJheSB3aXRoIGxlbmd0aCBncmVhdGVyIHRoYW4gMVwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuY2xhc3MgT2JqZWN0VmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBzaG91bGRBbGxvd1Vua25vd25Qcm9wZXJ0aWVzID0gZmFsc2UpIHtcbiAgICBzdXBlcihcbiAgICAgIChvYmplY3QyKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0MiAhPT0gXCJvYmplY3RcIiB8fCBvYmplY3QyID09PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgb2JqZWN0LCBnb3QgJHt0eXBlVG9TdHJpbmcob2JqZWN0Mil9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWxpZGF0b3JdIG9mIE9iamVjdC5lbnRyaWVzKGNvbmZpZykpIHtcbiAgICAgICAgICBwcmVmaXhFcnJvcihrZXksICgpID0+IHtcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIHZhbGlkYXRvci52YWxpZGF0ZShnZXRPd25Qcm9wZXJ0eShvYmplY3QyLCBrZXkpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNob3VsZEFsbG93VW5rbm93blByb3BlcnRpZXMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvYmplY3QyKSkge1xuICAgICAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShjb25maWcsIGtleSkpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgVW5leHBlY3RlZCBwcm9wZXJ0eWAsIFtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDI7XG4gICAgICB9LFxuICAgICAgKGtub3duR29vZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIG5ld1ZhbHVlICE9PSBcIm9iamVjdFwiIHx8IG5ld1ZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgb2JqZWN0LCBnb3QgJHt0eXBlVG9TdHJpbmcobmV3VmFsdWUpfWApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpc0RpZmZlcmVudCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbGlkYXRvcl0gb2YgT2JqZWN0LmVudHJpZXMoY29uZmlnKSkge1xuICAgICAgICAgIGNvbnN0IHByZXYgPSBnZXRPd25Qcm9wZXJ0eShrbm93bkdvb2RWYWx1ZSwga2V5KTtcbiAgICAgICAgICBjb25zdCBuZXh0ID0gZ2V0T3duUHJvcGVydHkobmV3VmFsdWUsIGtleSk7XG4gICAgICAgICAgaWYgKE9iamVjdC5pcyhwcmV2LCBuZXh0KSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBwcmVmaXhFcnJvcihrZXksICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRhYmxlID0gdmFsaWRhdG9yO1xuICAgICAgICAgICAgaWYgKHZhbGlkYXRhYmxlLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uKSB7XG4gICAgICAgICAgICAgIHJldHVybiB2YWxpZGF0YWJsZS52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbihwcmV2LCBuZXh0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiB2YWxpZGF0YWJsZS52YWxpZGF0ZShuZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIU9iamVjdC5pcyhjaGVja2VkLCBwcmV2KSkge1xuICAgICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNob3VsZEFsbG93VW5rbm93blByb3BlcnRpZXMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhuZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkoY29uZmlnLCBrZXkpKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYFVuZXhwZWN0ZWQgcHJvcGVydHlgLCBba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGtub3duR29vZFZhbHVlKSkge1xuICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkobmV3VmFsdWUsIGtleSkpIHtcbiAgICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNEaWZmZXJlbnQgPyBuZXdWYWx1ZSA6IGtub3duR29vZFZhbHVlO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5zaG91bGRBbGxvd1Vua25vd25Qcm9wZXJ0aWVzID0gc2hvdWxkQWxsb3dVbmtub3duUHJvcGVydGllcztcbiAgfVxuICBhbGxvd1Vua25vd25Qcm9wZXJ0aWVzKCkge1xuICAgIHJldHVybiBuZXcgT2JqZWN0VmFsaWRhdG9yKHRoaXMuY29uZmlnLCB0cnVlKTtcbiAgfVxuICAvKipcbiAgICogRXh0ZW5kIGFuIG9iamVjdCB2YWxpZGF0b3IgYnkgYWRkaW5nIGFkZGl0aW9uYWwgcHJvcGVydGllcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBgdHNcbiAgICogY29uc3QgYW5pbWFsVmFsaWRhdG9yID0gVC5vYmplY3Qoe1xuICAgKiBcdG5hbWU6IFQuc3RyaW5nLFxuICAgKiB9KVxuICAgKiBjb25zdCBjYXRWYWxpZGF0b3IgPSBhbmltYWxWYWxpZGF0b3IuZXh0ZW5kKHtcbiAgICogXHRtZW93Vm9sdW1lOiBULm51bWJlcixcbiAgICogfSlcbiAgICogYGBgXG4gICAqL1xuICBleHRlbmQoZXh0ZW5zaW9uKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RWYWxpZGF0b3IoeyAuLi50aGlzLmNvbmZpZywgLi4uZXh0ZW5zaW9uIH0pO1xuICB9XG59XG5jbGFzcyBVbmlvblZhbGlkYXRvciBleHRlbmRzIFZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGtleSwgY29uZmlnLCB1bmtub3duVmFsdWVWYWxpZGF0aW9uLCB1c2VOdW1iZXJLZXlzKSB7XG4gICAgc3VwZXIoXG4gICAgICAoaW5wdXQpID0+IHtcbiAgICAgICAgdGhpcy5leHBlY3RPYmplY3QoaW5wdXQpO1xuICAgICAgICBjb25zdCB7IG1hdGNoaW5nU2NoZW1hLCB2YXJpYW50IH0gPSB0aGlzLmdldE1hdGNoaW5nU2NoZW1hQW5kVmFyaWFudChpbnB1dCk7XG4gICAgICAgIGlmIChtYXRjaGluZ1NjaGVtYSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMudW5rbm93blZhbHVlVmFsaWRhdGlvbihpbnB1dCwgdmFyaWFudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByZWZpeEVycm9yKGAoJHtrZXl9ID0gJHt2YXJpYW50fSlgLCAoKSA9PiBtYXRjaGluZ1NjaGVtYS52YWxpZGF0ZShpbnB1dCkpO1xuICAgICAgfSxcbiAgICAgIChwcmV2VmFsdWUsIG5ld1ZhbHVlKSA9PiB7XG4gICAgICAgIHRoaXMuZXhwZWN0T2JqZWN0KG5ld1ZhbHVlKTtcbiAgICAgICAgdGhpcy5leHBlY3RPYmplY3QocHJldlZhbHVlKTtcbiAgICAgICAgY29uc3QgeyBtYXRjaGluZ1NjaGVtYSwgdmFyaWFudCB9ID0gdGhpcy5nZXRNYXRjaGluZ1NjaGVtYUFuZFZhcmlhbnQobmV3VmFsdWUpO1xuICAgICAgICBpZiAobWF0Y2hpbmdTY2hlbWEgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnVua25vd25WYWx1ZVZhbGlkYXRpb24obmV3VmFsdWUsIHZhcmlhbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZXRPd25Qcm9wZXJ0eShwcmV2VmFsdWUsIGtleSkgIT09IGdldE93blByb3BlcnR5KG5ld1ZhbHVlLCBrZXkpKSB7XG4gICAgICAgICAgcmV0dXJuIHByZWZpeEVycm9yKGAoJHtrZXl9ID0gJHt2YXJpYW50fSlgLCAoKSA9PiBtYXRjaGluZ1NjaGVtYS52YWxpZGF0ZShuZXdWYWx1ZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcmVmaXhFcnJvcihgKCR7a2V5fSA9ICR7dmFyaWFudH0pYCwgKCkgPT4ge1xuICAgICAgICAgIGlmIChtYXRjaGluZ1NjaGVtYS52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nU2NoZW1hLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uKHByZXZWYWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hpbmdTY2hlbWEudmFsaWRhdGUobmV3VmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLmtleSA9IGtleTtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnVua25vd25WYWx1ZVZhbGlkYXRpb24gPSB1bmtub3duVmFsdWVWYWxpZGF0aW9uO1xuICAgIHRoaXMudXNlTnVtYmVyS2V5cyA9IHVzZU51bWJlcktleXM7XG4gIH1cbiAgZXhwZWN0T2JqZWN0KHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgYW4gb2JqZWN0LCBnb3QgJHt0eXBlVG9TdHJpbmcodmFsdWUpfWAsIFtdKTtcbiAgICB9XG4gIH1cbiAgZ2V0TWF0Y2hpbmdTY2hlbWFBbmRWYXJpYW50KG9iamVjdDIpIHtcbiAgICBjb25zdCB2YXJpYW50ID0gZ2V0T3duUHJvcGVydHkob2JqZWN0MiwgdGhpcy5rZXkpO1xuICAgIGlmICghdGhpcy51c2VOdW1iZXJLZXlzICYmIHR5cGVvZiB2YXJpYW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxuICAgICAgICBgRXhwZWN0ZWQgYSBzdHJpbmcgZm9yIGtleSBcIiR7dGhpcy5rZXl9XCIsIGdvdCAke3R5cGVUb1N0cmluZyh2YXJpYW50KX1gXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodGhpcy51c2VOdW1iZXJLZXlzICYmICFOdW1iZXIuaXNGaW5pdGUoTnVtYmVyKHZhcmlhbnQpKSkge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgYSBudW1iZXIgZm9yIGtleSBcIiR7dGhpcy5rZXl9XCIsIGdvdCBcIiR7dmFyaWFudH1cImApO1xuICAgIH1cbiAgICBjb25zdCBtYXRjaGluZ1NjaGVtYSA9IGhhc093blByb3BlcnR5KHRoaXMuY29uZmlnLCB2YXJpYW50KSA/IHRoaXMuY29uZmlnW3ZhcmlhbnRdIDogdm9pZCAwO1xuICAgIHJldHVybiB7IG1hdGNoaW5nU2NoZW1hLCB2YXJpYW50IH07XG4gIH1cbiAgdmFsaWRhdGVVbmtub3duVmFyaWFudHModW5rbm93blZhbHVlVmFsaWRhdGlvbikge1xuICAgIHJldHVybiBuZXcgVW5pb25WYWxpZGF0b3IodGhpcy5rZXksIHRoaXMuY29uZmlnLCB1bmtub3duVmFsdWVWYWxpZGF0aW9uLCB0aGlzLnVzZU51bWJlcktleXMpO1xuICB9XG59XG5jbGFzcyBEaWN0VmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioa2V5VmFsaWRhdG9yLCB2YWx1ZVZhbGlkYXRvcikge1xuICAgIHN1cGVyKFxuICAgICAgKG9iamVjdDIpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QyICE9PSBcIm9iamVjdFwiIHx8IG9iamVjdDIgPT09IG51bGwpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBFeHBlY3RlZCBvYmplY3QsIGdvdCAke3R5cGVUb1N0cmluZyhvYmplY3QyKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhvYmplY3QyKSkge1xuICAgICAgICAgIHByZWZpeEVycm9yKGtleSwgKCkgPT4ge1xuICAgICAgICAgICAga2V5VmFsaWRhdG9yLnZhbGlkYXRlKGtleSk7XG4gICAgICAgICAgICB2YWx1ZVZhbGlkYXRvci52YWxpZGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdDI7XG4gICAgICB9LFxuICAgICAgKGtub3duR29vZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIG5ld1ZhbHVlICE9PSBcIm9iamVjdFwiIHx8IG5ld1ZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgb2JqZWN0LCBnb3QgJHt0eXBlVG9TdHJpbmcobmV3VmFsdWUpfWApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpc0RpZmZlcmVudCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhuZXdWYWx1ZSkpIHtcbiAgICAgICAgICBpZiAoIWhhc093blByb3BlcnR5KGtub3duR29vZFZhbHVlLCBrZXkpKSB7XG4gICAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgICAgICBwcmVmaXhFcnJvcihrZXksICgpID0+IHtcbiAgICAgICAgICAgICAga2V5VmFsaWRhdG9yLnZhbGlkYXRlKGtleSk7XG4gICAgICAgICAgICAgIHZhbHVlVmFsaWRhdG9yLnZhbGlkYXRlKHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHByZXYgPSBnZXRPd25Qcm9wZXJ0eShrbm93bkdvb2RWYWx1ZSwga2V5KTtcbiAgICAgICAgICBjb25zdCBuZXh0ID0gdmFsdWU7XG4gICAgICAgICAgaWYgKE9iamVjdC5pcyhwcmV2LCBuZXh0KSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBwcmVmaXhFcnJvcihrZXksICgpID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZVZhbGlkYXRvci52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbikge1xuICAgICAgICAgICAgICByZXR1cm4gdmFsdWVWYWxpZGF0b3IudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24ocHJldiwgbmV4dCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gdmFsdWVWYWxpZGF0b3IudmFsaWRhdGUobmV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKCFPYmplY3QuaXMoY2hlY2tlZCwgcHJldikpIHtcbiAgICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoa25vd25Hb29kVmFsdWUpKSB7XG4gICAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShuZXdWYWx1ZSwga2V5KSkge1xuICAgICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0RpZmZlcmVudCA/IG5ld1ZhbHVlIDoga25vd25Hb29kVmFsdWU7XG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLmtleVZhbGlkYXRvciA9IGtleVZhbGlkYXRvcjtcbiAgICB0aGlzLnZhbHVlVmFsaWRhdG9yID0gdmFsdWVWYWxpZGF0b3I7XG4gIH1cbn1cbmZ1bmN0aW9uIHR5cGVvZlZhbGlkYXRvcih0eXBlKSB7XG4gIHJldHVybiBuZXcgVmFsaWRhdG9yKCh2YWx1ZSkgPT4ge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IHR5cGUpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkICR7dHlwZX0sIGdvdCAke3R5cGVUb1N0cmluZyh2YWx1ZSl9YCk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSk7XG59XG5jb25zdCB1bmtub3duID0gbmV3IFZhbGlkYXRvcigodmFsdWUpID0+IHZhbHVlKTtcbmNvbnN0IGFueSA9IG5ldyBWYWxpZGF0b3IoKHZhbHVlKSA9PiB2YWx1ZSk7XG5jb25zdCBzdHJpbmcgPSB0eXBlb2ZWYWxpZGF0b3IoXCJzdHJpbmdcIik7XG5jb25zdCBudW1iZXIgPSB0eXBlb2ZWYWxpZGF0b3IoXCJudW1iZXJcIikuY2hlY2soKG51bWJlcjIpID0+IHtcbiAgaWYgKE51bWJlci5pc05hTihudW1iZXIyKSkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJFeHBlY3RlZCBhIG51bWJlciwgZ290IE5hTlwiKTtcbiAgfVxuICBpZiAoIU51bWJlci5pc0Zpbml0ZShudW1iZXIyKSkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIGEgZmluaXRlIG51bWJlciwgZ290ICR7bnVtYmVyMn1gKTtcbiAgfVxufSk7XG5jb25zdCBwb3NpdGl2ZU51bWJlciA9IG51bWJlci5jaGVjaygodmFsdWUpID0+IHtcbiAgaWYgKHZhbHVlIDwgMClcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBFeHBlY3RlZCBhIHBvc2l0aXZlIG51bWJlciwgZ290ICR7dmFsdWV9YCk7XG59KTtcbmNvbnN0IG5vblplcm9OdW1iZXIgPSBudW1iZXIuY2hlY2soKHZhbHVlKSA9PiB7XG4gIGlmICh2YWx1ZSA8PSAwKVxuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIGEgbm9uLXplcm8gcG9zaXRpdmUgbnVtYmVyLCBnb3QgJHt2YWx1ZX1gKTtcbn0pO1xuY29uc3QgaW50ZWdlciA9IG51bWJlci5jaGVjaygodmFsdWUpID0+IHtcbiAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlKSlcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBFeHBlY3RlZCBhbiBpbnRlZ2VyLCBnb3QgJHt2YWx1ZX1gKTtcbn0pO1xuY29uc3QgcG9zaXRpdmVJbnRlZ2VyID0gaW50ZWdlci5jaGVjaygodmFsdWUpID0+IHtcbiAgaWYgKHZhbHVlIDwgMClcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBFeHBlY3RlZCBhIHBvc2l0aXZlIGludGVnZXIsIGdvdCAke3ZhbHVlfWApO1xufSk7XG5jb25zdCBub25aZXJvSW50ZWdlciA9IGludGVnZXIuY2hlY2soKHZhbHVlKSA9PiB7XG4gIGlmICh2YWx1ZSA8PSAwKVxuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIGEgbm9uLXplcm8gcG9zaXRpdmUgaW50ZWdlciwgZ290ICR7dmFsdWV9YCk7XG59KTtcbmNvbnN0IGJvb2xlYW4gPSB0eXBlb2ZWYWxpZGF0b3IoXCJib29sZWFuXCIpO1xuY29uc3QgYmlnaW50ID0gdHlwZW9mVmFsaWRhdG9yKFwiYmlnaW50XCIpO1xuZnVuY3Rpb24gbGl0ZXJhbChleHBlY3RlZFZhbHVlKSB7XG4gIHJldHVybiBuZXcgVmFsaWRhdG9yKChhY3R1YWxWYWx1ZSkgPT4ge1xuICAgIGlmIChhY3R1YWxWYWx1ZSAhPT0gZXhwZWN0ZWRWYWx1ZSkge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgJHtleHBlY3RlZFZhbHVlfSwgZ290ICR7SlNPTi5zdHJpbmdpZnkoYWN0dWFsVmFsdWUpfWApO1xuICAgIH1cbiAgICByZXR1cm4gZXhwZWN0ZWRWYWx1ZTtcbiAgfSk7XG59XG5jb25zdCBhcnJheSA9IG5ldyBWYWxpZGF0b3IoKHZhbHVlKSA9PiB7XG4gIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBFeHBlY3RlZCBhbiBhcnJheSwgZ290ICR7dHlwZVRvU3RyaW5nKHZhbHVlKX1gKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59KTtcbmZ1bmN0aW9uIGFycmF5T2YoaXRlbVZhbGlkYXRvcikge1xuICByZXR1cm4gbmV3IEFycmF5T2ZWYWxpZGF0b3IoaXRlbVZhbGlkYXRvcik7XG59XG5jb25zdCB1bmtub3duT2JqZWN0ID0gbmV3IFZhbGlkYXRvcigodmFsdWUpID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEV4cGVjdGVkIG9iamVjdCwgZ290ICR7dHlwZVRvU3RyaW5nKHZhbHVlKX1gKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59KTtcbmZ1bmN0aW9uIG9iamVjdChjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBPYmplY3RWYWxpZGF0b3IoY29uZmlnKTtcbn1cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpID09PSBudWxsIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSkgPT09IFNUUlVDVFVSRURfQ0xPTkVfT0JKRUNUX1BST1RPVFlQRSk7XG59XG5mdW5jdGlvbiBpc1ZhbGlkSnNvbih2YWx1ZSkge1xuICBpZiAodmFsdWUgPT09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLmV2ZXJ5KGlzVmFsaWRKc29uKTtcbiAgfVxuICBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh2YWx1ZSkuZXZlcnkoaXNWYWxpZEpzb24pO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmNvbnN0IGpzb25WYWx1ZSA9IG5ldyBWYWxpZGF0b3IoXG4gICh2YWx1ZSkgPT4ge1xuICAgIGlmIChpc1ZhbGlkSnNvbih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQganNvbiBzZXJpYWxpemFibGUgdmFsdWUsIGdvdCAke3R5cGVvZiB2YWx1ZX1gKTtcbiAgfSxcbiAgKGtub3duR29vZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGtub3duR29vZFZhbHVlKSAmJiBBcnJheS5pc0FycmF5KG5ld1ZhbHVlKSkge1xuICAgICAgbGV0IGlzRGlmZmVyZW50ID0ga25vd25Hb29kVmFsdWUubGVuZ3RoICE9PSBuZXdWYWx1ZS5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1ZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpID49IGtub3duR29vZFZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgICBqc29uVmFsdWUudmFsaWRhdGUobmV3VmFsdWVbaV0pO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXYgPSBrbm93bkdvb2RWYWx1ZVtpXTtcbiAgICAgICAgY29uc3QgbmV4dCA9IG5ld1ZhbHVlW2ldO1xuICAgICAgICBpZiAoT2JqZWN0LmlzKHByZXYsIG5leHQpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hlY2tlZCA9IGpzb25WYWx1ZS52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbihwcmV2LCBuZXh0KTtcbiAgICAgICAgaWYgKCFPYmplY3QuaXMoY2hlY2tlZCwgcHJldikpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBpc0RpZmZlcmVudCA/IG5ld1ZhbHVlIDoga25vd25Hb29kVmFsdWU7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KGtub3duR29vZFZhbHVlKSAmJiBpc1BsYWluT2JqZWN0KG5ld1ZhbHVlKSkge1xuICAgICAgbGV0IGlzRGlmZmVyZW50ID0gZmFsc2U7XG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhuZXdWYWx1ZSkpIHtcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShrbm93bkdvb2RWYWx1ZSwga2V5KSkge1xuICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgICBqc29uVmFsdWUudmFsaWRhdGUobmV3VmFsdWVba2V5XSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJldiA9IGtub3duR29vZFZhbHVlW2tleV07XG4gICAgICAgIGNvbnN0IG5leHQgPSBuZXdWYWx1ZVtrZXldO1xuICAgICAgICBpZiAoT2JqZWN0LmlzKHByZXYsIG5leHQpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hlY2tlZCA9IGpzb25WYWx1ZS52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbihwcmV2LCBuZXh0KTtcbiAgICAgICAgaWYgKCFPYmplY3QuaXMoY2hlY2tlZCwgcHJldikpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGtub3duR29vZFZhbHVlKSkge1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5KG5ld1ZhbHVlLCBrZXkpKSB7XG4gICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNEaWZmZXJlbnQgPyBuZXdWYWx1ZSA6IGtub3duR29vZFZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ganNvblZhbHVlLnZhbGlkYXRlKG5ld1ZhbHVlKTtcbiAgICB9XG4gIH1cbik7XG5mdW5jdGlvbiBqc29uRGljdCgpIHtcbiAgcmV0dXJuIGRpY3Qoc3RyaW5nLCBqc29uVmFsdWUpO1xufVxuZnVuY3Rpb24gZGljdChrZXlWYWxpZGF0b3IsIHZhbHVlVmFsaWRhdG9yKSB7XG4gIHJldHVybiBuZXcgRGljdFZhbGlkYXRvcihrZXlWYWxpZGF0b3IsIHZhbHVlVmFsaWRhdG9yKTtcbn1cbmZ1bmN0aW9uIHVuaW9uKGtleSwgY29uZmlnKSB7XG4gIHJldHVybiBuZXcgVW5pb25WYWxpZGF0b3IoXG4gICAga2V5LFxuICAgIGNvbmZpZyxcbiAgICAodW5rbm93blZhbHVlLCB1bmtub3duVmFyaWFudCkgPT4ge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcbiAgICAgICAgYEV4cGVjdGVkIG9uZSBvZiAke09iamVjdC5rZXlzKGNvbmZpZykubWFwKChrZXkyKSA9PiBKU09OLnN0cmluZ2lmeShrZXkyKSkuam9pbihcIiBvciBcIil9LCBnb3QgJHtKU09OLnN0cmluZ2lmeSh1bmtub3duVmFyaWFudCl9YCxcbiAgICAgICAgW2tleV1cbiAgICAgICk7XG4gICAgfSxcbiAgICBmYWxzZVxuICApO1xufVxuZnVuY3Rpb24gbnVtYmVyVW5pb24oa2V5LCBjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBVbmlvblZhbGlkYXRvcihcbiAgICBrZXksXG4gICAgY29uZmlnLFxuICAgICh1bmtub3duVmFsdWUsIHVua25vd25WYXJpYW50KSA9PiB7XG4gICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxuICAgICAgICBgRXhwZWN0ZWQgb25lIG9mICR7T2JqZWN0LmtleXMoY29uZmlnKS5tYXAoKGtleTIpID0+IEpTT04uc3RyaW5naWZ5KGtleTIpKS5qb2luKFwiIG9yIFwiKX0sIGdvdCAke0pTT04uc3RyaW5naWZ5KHVua25vd25WYXJpYW50KX1gLFxuICAgICAgICBba2V5XVxuICAgICAgKTtcbiAgICB9LFxuICAgIHRydWVcbiAgKTtcbn1cbmZ1bmN0aW9uIG1vZGVsKG5hbWUsIHZhbGlkYXRvcikge1xuICByZXR1cm4gbmV3IFZhbGlkYXRvcihcbiAgICAodmFsdWUpID0+IHtcbiAgICAgIHJldHVybiBwcmVmaXhFcnJvcihuYW1lLCAoKSA9PiB2YWxpZGF0b3IudmFsaWRhdGUodmFsdWUpKTtcbiAgICB9LFxuICAgIChwcmV2VmFsdWUsIG5ld1ZhbHVlKSA9PiB7XG4gICAgICByZXR1cm4gcHJlZml4RXJyb3IobmFtZSwgKCkgPT4ge1xuICAgICAgICBpZiAodmFsaWRhdG9yLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRvci52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbihwcmV2VmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdmFsaWRhdG9yLnZhbGlkYXRlKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICApO1xufVxuZnVuY3Rpb24gc2V0RW51bSh2YWx1ZXMpIHtcbiAgcmV0dXJuIG5ldyBWYWxpZGF0b3IoKHZhbHVlKSA9PiB7XG4gICAgaWYgKCF2YWx1ZXMuaGFzKHZhbHVlKSkge1xuICAgICAgY29uc3QgdmFsdWVzU3RyaW5nID0gQXJyYXkuZnJvbSh2YWx1ZXMsICh2YWx1ZTIpID0+IEpTT04uc3RyaW5naWZ5KHZhbHVlMikpLmpvaW4oXCIgb3IgXCIpO1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgJHt2YWx1ZXNTdHJpbmd9LCBnb3QgJHt2YWx1ZX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9KTtcbn1cbmZ1bmN0aW9uIG9wdGlvbmFsKHZhbGlkYXRvcikge1xuICByZXR1cm4gbmV3IFZhbGlkYXRvcihcbiAgICAodmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgcmV0dXJuIHZhbGlkYXRvci52YWxpZGF0ZSh2YWx1ZSk7XG4gICAgfSxcbiAgICAoa25vd25Hb29kVmFsdWUsIG5ld1ZhbHVlKSA9PiB7XG4gICAgICBpZiAoa25vd25Hb29kVmFsdWUgPT09IHZvaWQgMCAmJiBuZXdWYWx1ZSA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgaWYgKG5ld1ZhbHVlID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICBpZiAodmFsaWRhdG9yLnZhbGlkYXRlVXNpbmdLbm93bkdvb2RWZXJzaW9uICYmIGtub3duR29vZFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRvci52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbihrbm93bkdvb2RWYWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbGlkYXRvci52YWxpZGF0ZShuZXdWYWx1ZSk7XG4gICAgfVxuICApO1xufVxuZnVuY3Rpb24gbnVsbGFibGUodmFsaWRhdG9yKSB7XG4gIHJldHVybiBuZXcgVmFsaWRhdG9yKFxuICAgICh2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB2YWxpZGF0b3IudmFsaWRhdGUodmFsdWUpO1xuICAgIH0sXG4gICAgKGtub3duR29vZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICAgICAgaWYgKG5ld1ZhbHVlID09PSBudWxsKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIGlmICh2YWxpZGF0b3IudmFsaWRhdGVVc2luZ0tub3duR29vZFZlcnNpb24gJiYga25vd25Hb29kVmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRvci52YWxpZGF0ZVVzaW5nS25vd25Hb29kVmVyc2lvbihrbm93bkdvb2RWYWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbGlkYXRvci52YWxpZGF0ZShuZXdWYWx1ZSk7XG4gICAgfVxuICApO1xufVxuZnVuY3Rpb24gbGl0ZXJhbEVudW0oLi4udmFsdWVzKSB7XG4gIHJldHVybiBzZXRFbnVtKG5ldyBTZXQodmFsdWVzKSk7XG59XG5mdW5jdGlvbiBwYXJzZVVybChzdHIpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbmV3IFVSTChzdHIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChzdHIuc3RhcnRzV2l0aChcIi9cIikgfHwgc3RyLnN0YXJ0c1dpdGgoXCIuL1wiKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBVUkwoc3RyLCBcImh0dHA6Ly9leGFtcGxlLmNvbVwiKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yMikge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBFeHBlY3RlZCBhIHZhbGlkIHVybCwgZ290ICR7SlNPTi5zdHJpbmdpZnkoc3RyKX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihgRXhwZWN0ZWQgYSB2YWxpZCB1cmwsIGdvdCAke0pTT04uc3RyaW5naWZ5KHN0cil9YCk7XG4gIH1cbn1cbmNvbnN0IHZhbGlkTGlua1Byb3RvY29scyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcImh0dHA6XCIsIFwiaHR0cHM6XCIsIFwibWFpbHRvOlwiXSk7XG5jb25zdCBsaW5rVXJsID0gc3RyaW5nLmNoZWNrKCh2YWx1ZSkgPT4ge1xuICBpZiAodmFsdWUgPT09IFwiXCIpXG4gICAgcmV0dXJuO1xuICBjb25zdCB1cmwgPSBwYXJzZVVybCh2YWx1ZSk7XG4gIGlmICghdmFsaWRMaW5rUHJvdG9jb2xzLmhhcyh1cmwucHJvdG9jb2wudG9Mb3dlckNhc2UoKSkpIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxuICAgICAgYEV4cGVjdGVkIGEgdmFsaWQgdXJsLCBnb3QgJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9IChpbnZhbGlkIHByb3RvY29sKWBcbiAgICApO1xuICB9XG59KTtcbmNvbnN0IHZhbGlkU3JjUHJvdG9jb2xzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1wiaHR0cDpcIiwgXCJodHRwczpcIiwgXCJkYXRhOlwiXSk7XG5jb25zdCBzcmNVcmwgPSBzdHJpbmcuY2hlY2soKHZhbHVlKSA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gXCJcIilcbiAgICByZXR1cm47XG4gIGNvbnN0IHVybCA9IHBhcnNlVXJsKHZhbHVlKTtcbiAgaWYgKCF2YWxpZFNyY1Byb3RvY29scy5oYXModXJsLnByb3RvY29sLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcbiAgICAgIGBFeHBlY3RlZCBhIHZhbGlkIHVybCwgZ290ICR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfSAoaW52YWxpZCBwcm90b2NvbClgXG4gICAgKTtcbiAgfVxufSk7XG5jb25zdCBpbmRleEtleSA9IHN0cmluZy5yZWZpbmUoKGtleSkgPT4ge1xuICB0cnkge1xuICAgIHZhbGlkYXRlSW5kZXhLZXkoa2V5KTtcbiAgICByZXR1cm4ga2V5O1xuICB9IGNhdGNoIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKGBFeHBlY3RlZCBhbiBpbmRleCBrZXksIGdvdCAke0pTT04uc3RyaW5naWZ5KGtleSl9YCk7XG4gIH1cbn0pO1xuZXhwb3J0IHtcbiAgQXJyYXlPZlZhbGlkYXRvcixcbiAgRGljdFZhbGlkYXRvcixcbiAgT2JqZWN0VmFsaWRhdG9yLFxuICBVbmlvblZhbGlkYXRvcixcbiAgVmFsaWRhdGlvbkVycm9yLFxuICBWYWxpZGF0b3IsXG4gIGFueSxcbiAgYXJyYXksXG4gIGFycmF5T2YsXG4gIGJpZ2ludCxcbiAgYm9vbGVhbixcbiAgZGljdCxcbiAgaW5kZXhLZXksXG4gIGludGVnZXIsXG4gIGpzb25EaWN0LFxuICBqc29uVmFsdWUsXG4gIGxpbmtVcmwsXG4gIGxpdGVyYWwsXG4gIGxpdGVyYWxFbnVtLFxuICBtb2RlbCxcbiAgbm9uWmVyb0ludGVnZXIsXG4gIG5vblplcm9OdW1iZXIsXG4gIG51bGxhYmxlLFxuICBudW1iZXIsXG4gIG51bWJlclVuaW9uLFxuICBvYmplY3QsXG4gIG9wdGlvbmFsLFxuICBwb3NpdGl2ZUludGVnZXIsXG4gIHBvc2l0aXZlTnVtYmVyLFxuICBzZXRFbnVtLFxuICBzcmNVcmwsXG4gIHN0cmluZyxcbiAgdW5pb24sXG4gIHVua25vd24sXG4gIHVua25vd25PYmplY3Rcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12YWxpZGF0aW9uLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@tldraw/validate/dist-esm/lib/validation.mjs\n");

/***/ })

};
;